(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function f_(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Pm={exports:{}},hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function qT(){if(cv)return hc;cv=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var g in l)g!=="key"&&(u[g]=l[g])}else u=l;return l=u.ref,{$$typeof:a,type:r,key:h,ref:l!==void 0?l:null,props:u}}return hc.Fragment=e,hc.jsx=n,hc.jsxs=n,hc}var uv;function FT(){return uv||(uv=1,Pm.exports=qT()),Pm.exports}var c=FT(),Lm={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function GT(){if(dv)return Be;dv=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function C(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,k={};function B(U,ee,ue){this.props=U,this.context=ee,this.refs=k,this.updater=ue||L}B.prototype.isReactComponent={},B.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},B.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function $(){}$.prototype=B.prototype;function I(U,ee,ue){this.props=U,this.context=ee,this.refs=k,this.updater=ue||L}var X=I.prototype=new $;X.constructor=I,z(X,B.prototype),X.isPureReactComponent=!0;var te=Array.isArray;function se(){}var A={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function D(U,ee,ue){var me=ue.ref;return{$$typeof:a,type:U,key:ee,ref:me!==void 0?me:null,props:ue}}function V(U,ee){return D(U.type,ee,U.props)}function P(U){return typeof U=="object"&&U!==null&&U.$$typeof===a}function M(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ue){return ee[ue]})}var N=/\/+/g;function je(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):ee.toString(36)}function ce(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(se,se):(U.status="pending",U.then(function(ee){U.status==="pending"&&(U.status="fulfilled",U.value=ee)},function(ee){U.status==="pending"&&(U.status="rejected",U.reason=ee)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Y(U,ee,ue,me,Te){var Me=typeof U;(Me==="undefined"||Me==="boolean")&&(U=null);var ze=!1;if(U===null)ze=!0;else switch(Me){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(U.$$typeof){case a:case e:ze=!0;break;case v:return ze=U._init,Y(ze(U._payload),ee,ue,me,Te)}}if(ze)return Te=Te(U),ze=me===""?"."+je(U,0):me,te(Te)?(ue="",ze!=null&&(ue=ze.replace(N,"$&/")+"/"),Y(Te,ee,ue,"",function(jn){return jn})):Te!=null&&(P(Te)&&(Te=V(Te,ue+(Te.key==null||U&&U.key===Te.key?"":(""+Te.key).replace(N,"$&/")+"/")+ze)),ee.push(Te)),1;ze=0;var Et=me===""?".":me+":";if(te(U))for(var tt=0;tt<U.length;tt++)me=U[tt],Me=Et+je(me,tt),ze+=Y(me,ee,ue,Me,Te);else if(tt=C(U),typeof tt=="function")for(U=tt.call(U),tt=0;!(me=U.next()).done;)me=me.value,Me=Et+je(me,tt++),ze+=Y(me,ee,ue,Me,Te);else if(Me==="object"){if(typeof U.then=="function")return Y(ce(U),ee,ue,me,Te);throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ze}function oe(U,ee,ue){if(U==null)return U;var me=[],Te=0;return Y(U,me,"","",function(Me){return ee.call(ue,Me,Te++)}),me}function de(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(ue){(U._status===0||U._status===-1)&&(U._status=1,U._result=ue)},function(ue){(U._status===0||U._status===-1)&&(U._status=2,U._result=ue)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var xe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},$e={map:oe,forEach:function(U,ee,ue){oe(U,function(){ee.apply(this,arguments)},ue)},count:function(U){var ee=0;return oe(U,function(){ee++}),ee},toArray:function(U){return oe(U,function(ee){return ee})||[]},only:function(U){if(!P(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Be.Activity=w,Be.Children=$e,Be.Component=B,Be.Fragment=n,Be.Profiler=l,Be.PureComponent=I,Be.StrictMode=r,Be.Suspense=p,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Be.__COMPILER_RUNTIME={__proto__:null,c:function(U){return A.H.useMemoCache(U)}},Be.cache=function(U){return function(){return U.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(U,ee,ue){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var me=z({},U.props),Te=U.key;if(ee!=null)for(Me in ee.key!==void 0&&(Te=""+ee.key),ee)!R.call(ee,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ee.ref===void 0||(me[Me]=ee[Me]);var Me=arguments.length-2;if(Me===1)me.children=ue;else if(1<Me){for(var ze=Array(Me),Et=0;Et<Me;Et++)ze[Et]=arguments[Et+2];me.children=ze}return D(U.type,Te,me)},Be.createContext=function(U){return U={$$typeof:h,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:u,_context:U},U},Be.createElement=function(U,ee,ue){var me,Te={},Me=null;if(ee!=null)for(me in ee.key!==void 0&&(Me=""+ee.key),ee)R.call(ee,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Te[me]=ee[me]);var ze=arguments.length-2;if(ze===1)Te.children=ue;else if(1<ze){for(var Et=Array(ze),tt=0;tt<ze;tt++)Et[tt]=arguments[tt+2];Te.children=Et}if(U&&U.defaultProps)for(me in ze=U.defaultProps,ze)Te[me]===void 0&&(Te[me]=ze[me]);return D(U,Me,Te)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(U){return{$$typeof:g,render:U}},Be.isValidElement=P,Be.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:de}},Be.memo=function(U,ee){return{$$typeof:y,type:U,compare:ee===void 0?null:ee}},Be.startTransition=function(U){var ee=A.T,ue={};A.T=ue;try{var me=U(),Te=A.S;Te!==null&&Te(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(se,xe)}catch(Me){xe(Me)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),A.T=ee}},Be.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Be.use=function(U){return A.H.use(U)},Be.useActionState=function(U,ee,ue){return A.H.useActionState(U,ee,ue)},Be.useCallback=function(U,ee){return A.H.useCallback(U,ee)},Be.useContext=function(U){return A.H.useContext(U)},Be.useDebugValue=function(){},Be.useDeferredValue=function(U,ee){return A.H.useDeferredValue(U,ee)},Be.useEffect=function(U,ee){return A.H.useEffect(U,ee)},Be.useEffectEvent=function(U){return A.H.useEffectEvent(U)},Be.useId=function(){return A.H.useId()},Be.useImperativeHandle=function(U,ee,ue){return A.H.useImperativeHandle(U,ee,ue)},Be.useInsertionEffect=function(U,ee){return A.H.useInsertionEffect(U,ee)},Be.useLayoutEffect=function(U,ee){return A.H.useLayoutEffect(U,ee)},Be.useMemo=function(U,ee){return A.H.useMemo(U,ee)},Be.useOptimistic=function(U,ee){return A.H.useOptimistic(U,ee)},Be.useReducer=function(U,ee,ue){return A.H.useReducer(U,ee,ue)},Be.useRef=function(U){return A.H.useRef(U)},Be.useState=function(U){return A.H.useState(U)},Be.useSyncExternalStore=function(U,ee,ue){return A.H.useSyncExternalStore(U,ee,ue)},Be.useTransition=function(){return A.H.useTransition()},Be.version="19.2.3",Be}var hv;function Op(){return hv||(hv=1,Lm.exports=GT()),Lm.exports}var j=Op();const m_=f_(j);var Um={exports:{}},fc={},zm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function $T(){return fv||(fv=1,(function(a){function e(Y,oe){var de=Y.length;Y.push(oe);e:for(;0<de;){var xe=de-1>>>1,$e=Y[xe];if(0<l($e,oe))Y[xe]=oe,Y[de]=$e,de=xe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var oe=Y[0],de=Y.pop();if(de!==oe){Y[0]=de;e:for(var xe=0,$e=Y.length,U=$e>>>1;xe<U;){var ee=2*(xe+1)-1,ue=Y[ee],me=ee+1,Te=Y[me];if(0>l(ue,de))me<$e&&0>l(Te,ue)?(Y[xe]=Te,Y[me]=de,xe=me):(Y[xe]=ue,Y[ee]=de,xe=ee);else if(me<$e&&0>l(Te,de))Y[xe]=Te,Y[me]=de,xe=me;else break e}}return oe}function l(Y,oe){var de=Y.sortIndex-oe.sortIndex;return de!==0?de:Y.id-oe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();a.unstable_now=function(){return h.now()-g}}var p=[],y=[],v=1,w=null,E=3,C=!1,L=!1,z=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function X(Y){for(var oe=n(y);oe!==null;){if(oe.callback===null)r(y);else if(oe.startTime<=Y)r(y),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(y)}}function te(Y){if(z=!1,X(Y),!L)if(n(p)!==null)L=!0,se||(se=!0,M());else{var oe=n(y);oe!==null&&ce(te,oe.startTime-Y)}}var se=!1,A=-1,R=5,D=-1;function V(){return k?!0:!(a.unstable_now()-D<R)}function P(){if(k=!1,se){var Y=a.unstable_now();D=Y;var oe=!0;try{e:{L=!1,z&&(z=!1,$(A),A=-1),C=!0;var de=E;try{t:{for(X(Y),w=n(p);w!==null&&!(w.expirationTime>Y&&V());){var xe=w.callback;if(typeof xe=="function"){w.callback=null,E=w.priorityLevel;var $e=xe(w.expirationTime<=Y);if(Y=a.unstable_now(),typeof $e=="function"){w.callback=$e,X(Y),oe=!0;break t}w===n(p)&&r(p),X(Y)}else r(p);w=n(p)}if(w!==null)oe=!0;else{var U=n(y);U!==null&&ce(te,U.startTime-Y),oe=!1}}break e}finally{w=null,E=de,C=!1}oe=void 0}}finally{oe?M():se=!1}}}var M;if(typeof I=="function")M=function(){I(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,je=N.port2;N.port1.onmessage=P,M=function(){je.postMessage(null)}}else M=function(){B(P,0)};function ce(Y,oe){A=B(function(){Y(a.unstable_now())},oe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Y){Y.callback=null},a.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},a.unstable_getCurrentPriorityLevel=function(){return E},a.unstable_next=function(Y){switch(E){case 1:case 2:case 3:var oe=3;break;default:oe=E}var de=E;E=oe;try{return Y()}finally{E=de}},a.unstable_requestPaint=function(){k=!0},a.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var de=E;E=Y;try{return oe()}finally{E=de}},a.unstable_scheduleCallback=function(Y,oe,de){var xe=a.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?xe+de:xe):de=xe,Y){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=de+$e,Y={id:v++,callback:oe,priorityLevel:Y,startTime:de,expirationTime:$e,sortIndex:-1},de>xe?(Y.sortIndex=de,e(y,Y),n(p)===null&&Y===n(y)&&(z?($(A),A=-1):z=!0,ce(te,de-xe))):(Y.sortIndex=$e,e(p,Y),L||C||(L=!0,se||(se=!0,M()))),Y},a.unstable_shouldYield=V,a.unstable_wrapCallback=function(Y){var oe=E;return function(){var de=E;E=oe;try{return Y.apply(this,arguments)}finally{E=de}}}})(Bm)),Bm}var mv;function YT(){return mv||(mv=1,zm.exports=$T()),zm.exports}var Hm={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function KT(){if(pv)return Mn;pv=1;var a=Op();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:p,containerInfo:y,implementation:v}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,v)},Mn.flushSync=function(p){var y=h.T,v=r.p;try{if(h.T=null,r.p=2,p)return p()}finally{h.T=y,r.p=v,r.d.f()}},Mn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Mn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Mn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,w=g(v,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:C}):v==="script"&&r.d.X(p,{crossOrigin:w,integrity:E,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Mn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=g(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Mn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=g(v,y.crossOrigin);r.d.L(p,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Mn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=g(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Mn.requestFormReset=function(p){r.d.r(p)},Mn.unstable_batchedUpdates=function(p,y){return p(y)},Mn.useFormState=function(p,y,v){return h.H.useFormState(p,y,v)},Mn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Mn.version="19.2.3",Mn}var gv;function QT(){if(gv)return Hm.exports;gv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Hm.exports=KT(),Hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function XT(){if(yv)return fc;yv=1;var a=YT(),e=Op(),n=QT();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,i=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(i=s.return),t=s.return;while(t)}return s.tag===3?i:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(r(188))}function y(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var i=t,o=s;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){i=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return p(f),t;if(m===o)return p(f),s;m=m.sibling}throw Error(r(188))}if(i.return!==o.return)i=f,o=m;else{for(var b=!1,T=f.child;T;){if(T===i){b=!0,i=f,o=m;break}if(T===o){b=!0,o=f,i=m;break}T=T.sibling}if(!b){for(T=m.child;T;){if(T===i){b=!0,i=m,o=f;break}if(T===o){b=!0,o=m,i=f;break}T=T.sibling}if(!b)throw Error(r(189))}}if(i.alternate!==o)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),I=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function je(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case B:return"Profiler";case k:return"StrictMode";case te:return"Suspense";case se:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case I:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case X:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return s=t.displayName||null,s!==null?s:je(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return je(t(s))}catch{}}return null}var ce=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},xe=[],$e=-1;function U(t){return{current:t}}function ee(t){0>$e||(t.current=xe[$e],xe[$e]=null,$e--)}function ue(t,s){$e++,xe[$e]=t.current,t.current=s}var me=U(null),Te=U(null),Me=U(null),ze=U(null);function Et(t,s){switch(ue(Me,s),ue(Te,t),ue(me,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Dx(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Dx(s),t=Mx(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(me),ue(me,t)}function tt(){ee(me),ee(Te),ee(Me)}function jn(t){t.memoizedState!==null&&ue(ze,t);var s=me.current,i=Mx(s,t.type);s!==i&&(ue(Te,t),ue(me,i))}function Un(t){Te.current===t&&(ee(me),ee(Te)),ze.current===t&&(ee(ze),oc._currentValue=de)}var Gn,as;function Rn(t){if(Gn===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);Gn=s&&s[1]||"",as=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gn+t+as}var or=!1;function _s(t,s){if(!t||or)return"";or=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var W=Z}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Z){W=Z}t.call(ie.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),b=m[0],T=m[1];if(b&&T){var O=b.split(`
`),Q=T.split(`
`);for(f=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(o===O.length||f===Q.length)for(o=O.length-1,f=Q.length-1;1<=o&&0<=f&&O[o]!==Q[f];)f--;for(;1<=o&&0<=f;o--,f--)if(O[o]!==Q[f]){if(o!==1||f!==1)do if(o--,f--,0>f||O[o]!==Q[f]){var ne=`
`+O[o].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=o&&0<=f);break}}}finally{or=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Rn(i):""}function cr(t,s){switch(t.tag){case 26:case 27:case 5:return Rn(t.type);case 16:return Rn("Lazy");case 13:return t.child!==s&&s!==null?Rn("Suspense Fallback"):Rn("Suspense");case 19:return Rn("SuspenseList");case 0:case 15:return _s(t.type,!1);case 11:return _s(t.type.render,!1);case 1:return _s(t.type,!0);case 31:return Rn("Activity");default:return""}}function Ta(t){try{var s="",i=null;do s+=cr(t,i),i=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var gt=Object.prototype.hasOwnProperty,Pt=a.unstable_scheduleCallback,Cn=a.unstable_cancelCallback,Ji=a.unstable_shouldYield,ur=a.unstable_requestPaint,Jt=a.unstable_now,Lt=a.unstable_getCurrentPriorityLevel,rs=a.unstable_ImmediatePriority,na=a.unstable_UserBlockingPriority,ws=a.unstable_NormalPriority,yo=a.unstable_LowPriority,dr=a.unstable_IdlePriority,fi=a.log,Zi=a.unstable_setDisableYieldValue,is=null,Zt=null;function $n(t){if(typeof fi=="function"&&Zi(t),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(is,t)}catch{}}var kt=Math.clz32?Math.clz32:tl,el=Math.log,In=Math.LN2;function tl(t){return t>>>=0,t===0?32:31-(el(t)/In|0)|0}var Es=256,Sa=262144,Ut=4194304;function Ts(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yn(t,s,i){var o=t.pendingLanes;if(o===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~m,o!==0?f=Ts(o):(b&=T,b!==0?f=Ts(b):i||(i=T&~t,i!==0&&(f=Ts(i))))):(T=o&~m,T!==0?f=Ts(T):b!==0?f=Ts(b):i||(i=o&~t,i!==0&&(f=Ts(i)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,i=s&-s,m>=i||m===32&&(i&4194048)!==0)?s:f}function ls(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function xo(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var t=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),t}function Ss(t){for(var s=[],i=0;31>i;i++)s.push(t);return s}function Na(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vo(t,s,i,o,f,m){var b=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,Q=t.hiddenUpdates;for(i=b&~i;0<i;){var ne=31-kt(i),ie=1<<ne;T[ne]=0,O[ne]=-1;var W=Q[ne];if(W!==null)for(Q[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}i&=~ie}o!==0&&sa(t,o,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function sa(t,s,i){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-kt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|i&261930}function q(t,s){var i=t.entangledLanes|=s;for(t=t.entanglements;i;){var o=31-kt(i),f=1<<o;f&s|t[o]&s&&(t[o]|=s),i&=~f}}function fe(t,s){var i=s&-s;return i=(i&42)!==0?1:be(i),(i&(t.suspendedLanes|s))!==0?0:i}function be(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ye(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Se(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:nv(t.type))}function Re(t,s){var i=oe.p;try{return oe.p=t,s()}finally{oe.p=i}}var Oe=Math.random().toString(36).slice(2),we="__reactFiber$"+Oe,Le="__reactProps$"+Oe,Ke="__reactContainer$"+Oe,Pe="__reactEvents$"+Oe,nt="__reactListeners$"+Oe,Gt="__reactHandles$"+Oe,cn="__reactResources$"+Oe,en="__reactMarker$"+Oe;function vn(t){delete t[we],delete t[Le],delete t[Pe],delete t[nt],delete t[Gt]}function zt(t){var s=t[we];if(s)return s;for(var i=t.parentNode;i;){if(s=i[Ke]||i[we]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(t=zx(t);t!==null;){if(i=t[we])return i;t=zx(t)}return s}t=i,i=t.parentNode}return null}function un(t){if(t=t[we]||t[Ke]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function $t(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function zn(t){var s=t[cn];return s||(s=t[cn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Tt(t){t[en]=!0}var Aa=new Set,ja={};function ke(t,s){lt(t,s),lt(t+"Capture",s)}function lt(t,s){for(ja[t]=s,t=0;t<s.length;t++)Aa.add(s[t])}var dn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yt={},Bn={};function Ns(t){return gt.call(Bn,t)?!0:gt.call(Yt,t)?!1:dn.test(t)?Bn[t]=!0:(Yt[t]=!0,!1)}function Kn(t,s,i){if(Ns(s))if(i===null)t.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+i)}}function Dn(t,s,i){if(i===null)t.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+i)}}function Bt(t,s,i,o){if(o===null)t.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(s,i,""+o)}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hr(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bo(t,s,i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){i=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ft(t){if(!t._valueTracker){var s=hr(t)?"checked":"value";t._valueTracker=bo(t,s,""+t[s])}}function mi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var i=s.getValue(),o="";return t&&(o=hr(t)?t.checked?"true":"false":t.value),t=o,t!==i?(s.setValue(t),!0):!1}function aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pi=/[\n"\\]/g;function Qn(t){return t.replace(pi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function sl(t,s,i,o,f,m,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+gn(s)):t.value!==""+gn(s)&&(t.value=""+gn(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?_o(t,b,gn(s)):i!=null?_o(t,b,gn(i)):o!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+gn(T):t.removeAttribute("name")}function iu(t,s,i,o,f,m,b,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ft(t);return}i=i!=null?""+gn(i):"",s=s!=null?""+gn(s):i,T||s===t.value||(t.value=s),t.defaultValue=s}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),ft(t)}function _o(t,s,i){s==="number"&&aa(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function fr(t,s,i,o){if(t=t.options,s){s={};for(var f=0;f<i.length;f++)s["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=s.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&o&&(t[i].defaultSelected=!0)}else{for(i=""+gn(i),s=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function lu(t,s,i){if(s!=null&&(s=""+gn(s),s!==t.value&&(t.value=s),i==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=i!=null?""+gn(i):""}function mr(t,s,i,o){if(s==null){if(o!=null){if(i!=null)throw Error(r(92));if(ce(o)){if(1<o.length)throw Error(r(93));o=o[0]}i=o}i==null&&(i=""),s=i}i=gn(s),t.defaultValue=i,o=t.textContent,o===i&&o!==""&&o!==null&&(t.value=o),ft(t)}function Xn(t,s){if(s){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=s;return}}t.textContent=s}var ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(t,s,i){var o=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,i):typeof i!="number"||i===0||ou.has(s)?s==="float"?t.cssFloat=i:t[s]=(""+i).trim():t[s]=i+"px"}function Eo(t,s,i){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in s)o=s[f],s.hasOwnProperty(f)&&i[f]!==o&&wo(t,f,o)}else for(var m in s)s.hasOwnProperty(m)&&wo(t,m,s[m])}function al(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(t){return pr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Bs(){}var To=null;function As(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gr=null,ra=null;function gi(t){var s=un(t);if(s&&(t=s.stateNode)){var i=t[Le]||null;e:switch(t=s.stateNode,s.type){case"input":if(sl(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Qn(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var o=i[s];if(o!==t&&o.form===t.form){var f=o[Le]||null;if(!f)throw Error(r(90));sl(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<i.length;s++)o=i[s],o.form===t.form&&mi(o)}break e;case"textarea":lu(t,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&fr(t,!!i.multiple,s,!1)}}}var il=!1;function yr(t,s,i){if(il)return t(s,i);il=!0;try{var o=t(s);return o}finally{if(il=!1,(gr!==null||ra!==null)&&(nd(),gr&&(s=gr,t=ra,ra=gr=null,gi(s),t)))for(s=0;s<t.length;s++)gi(t[s])}}function Hs(t,s){var i=t.stateNode;if(i===null)return null;var o=i[Le]||null;if(o===null)return null;i=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(r(231,s,typeof i));return i}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yi=!1;if(js)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){yi=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{yi=!1}var ia=null,So=null,xi=null;function No(){if(xi)return xi;var t,s=So,i=s.length,o,f="value"in ia?ia.value:ia.textContent,m=f.length;for(t=0;t<i&&s[t]===f[t];t++);var b=i-t;for(o=1;o<=b&&s[i-o]===f[m-o];o++);return xi=f.slice(t,1<o?1-o:void 0)}function vi(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ra(){return!0}function qs(){return!1}function bn(t){function s(i,o,f,m,b){this._reactName=i,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(i=t[T],this[T]=i?i(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ra:qs,this.isPropagationStopped=qs,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),s}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=bn(Ca),xr=w({},Ca,{view:0,detail:0}),Ao=bn(xr),vr,ll,oa,ol=w({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(vr=t.screenX-oa.screenX,ll=t.screenY-oa.screenY):ll=vr=0,oa=t),vr)},movementY:function(t){return"movementY"in t?t.movementY:ll}}),jo=bn(ol),bi=w({},ol,{dataTransfer:0}),uu=bn(bi),du=w({},xr,{relatedTarget:0}),_i=bn(du),Ro=w({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),hu=bn(Ro),cl=w({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fu=bn(cl),mu=w({},Ca,{data:0}),ca=bn(mu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=yu[t])?!!s[t]:!1}function br(){return xu}var Hn=w({},xr,{key:function(t){if(t.key){var s=pu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=vi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(t){return t.type==="keypress"?vi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vu=bn(Hn),bu=w({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ia=bn(bu),d=w({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br}),x=bn(d),_=w({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=bn(_),G=w({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=bn(G),he=w({},Ca,{newState:0,oldState:0}),qe=bn(he),Kt=[9,13,27,32],ut=js&&"CompositionEvent"in window,It=null;js&&"documentMode"in document&&(It=document.documentMode);var Rs=js&&"TextEvent"in window&&!It,ua=js&&(!ut||It&&8<It&&11>=It),Fs=" ",Gs=!1;function wi(t,s){switch(t){case"keyup":return Kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ul(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dl=!1;function fE(t,s){switch(t){case"compositionend":return ul(s);case"keypress":return s.which!==32?null:(Gs=!0,Fs);case"textInput":return t=s.data,t===Fs&&Gs?null:t;default:return null}}function mE(t,s){if(dl)return t==="compositionend"||!ut&&wi(t,s)?(t=No(),xi=So=ia=null,dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ua&&s.locale!=="ko"?null:s.data;default:return null}}var pE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!pE[t.type]:s==="textarea"}function Fg(t,s,i,o){gr?ra?ra.push(o):ra=[o]:gr=o,s=cd(s,"onChange"),0<s.length&&(i=new la("onChange","change",null,i,o),t.push({event:i,listeners:s}))}var Co=null,Io=null;function gE(t){Nx(t,0)}function _u(t){var s=$t(t);if(mi(s))return t}function Gg(t,s){if(t==="change")return s}var $g=!1;if(js){var qh;if(js){var Fh="oninput"in document;if(!Fh){var Yg=document.createElement("div");Yg.setAttribute("oninput","return;"),Fh=typeof Yg.oninput=="function"}qh=Fh}else qh=!1;$g=qh&&(!document.documentMode||9<document.documentMode)}function Kg(){Co&&(Co.detachEvent("onpropertychange",Qg),Io=Co=null)}function Qg(t){if(t.propertyName==="value"&&_u(Io)){var s=[];Fg(s,Io,t,As(t)),yr(gE,s)}}function yE(t,s,i){t==="focusin"?(Kg(),Co=s,Io=i,Co.attachEvent("onpropertychange",Qg)):t==="focusout"&&Kg()}function xE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(Io)}function vE(t,s){if(t==="click")return _u(s)}function bE(t,s){if(t==="input"||t==="change")return _u(s)}function _E(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var os=typeof Object.is=="function"?Object.is:_E;function Do(t,s){if(os(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var i=Object.keys(t),o=Object.keys(s);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var f=i[o];if(!gt.call(s,f)||!os(t[f],s[f]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,s){var i=Xg(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=s&&o>=s)return{node:i,offset:s-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Xg(i)}}function Jg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Jg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Zg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=aa(t.document);s instanceof t.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)t=s.contentWindow;else break;s=aa(t.document)}return s}function Gh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var wE=js&&"documentMode"in document&&11>=document.documentMode,hl=null,$h=null,Mo=null,Yh=!1;function e0(t,s,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Yh||hl==null||hl!==aa(o)||(o=hl,"selectionStart"in o&&Gh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Mo&&Do(Mo,o)||(Mo=o,o=cd($h,"onSelect"),0<o.length&&(s=new la("onSelect","select",null,s,i),t.push({event:s,listeners:o}),s.target=hl)))}function Ei(t,s){var i={};return i[t.toLowerCase()]=s.toLowerCase(),i["Webkit"+t]="webkit"+s,i["Moz"+t]="moz"+s,i}var fl={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},Kh={},t0={};js&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Ti(t){if(Kh[t])return Kh[t];if(!fl[t])return t;var s=fl[t],i;for(i in s)if(s.hasOwnProperty(i)&&i in t0)return Kh[t]=s[i];return t}var n0=Ti("animationend"),s0=Ti("animationiteration"),a0=Ti("animationstart"),EE=Ti("transitionrun"),TE=Ti("transitionstart"),SE=Ti("transitioncancel"),r0=Ti("transitionend"),i0=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function $s(t,s){i0.set(t,s),ke(s,[t])}var wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Cs=[],ml=0,Xh=0;function Eu(){for(var t=ml,s=Xh=ml=0;s<t;){var i=Cs[s];Cs[s++]=null;var o=Cs[s];Cs[s++]=null;var f=Cs[s];Cs[s++]=null;var m=Cs[s];if(Cs[s++]=null,o!==null&&f!==null){var b=o.pending;b===null?f.next=f:(f.next=b.next,b.next=f),o.pending=f}m!==0&&l0(i,f,m)}}function Tu(t,s,i,o){Cs[ml++]=t,Cs[ml++]=s,Cs[ml++]=i,Cs[ml++]=o,Xh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Wh(t,s,i,o){return Tu(t,s,i,o),Su(t)}function Si(t,s){return Tu(t,null,null,s),Su(t)}function l0(t,s,i){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,o=m.alternate,o!==null&&(o.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-kt(i),t=m.hiddenUpdates,o=t[f],o===null?t[f]=[s]:o.push(s),s.lane=i|536870912),m):null}function Su(t){if(50<tc)throw tc=0,lm=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var pl={};function NE(t,s,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(t,s,i,o){return new NE(t,s,i,o)}function Jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Da(t,s){var i=t.alternate;return i===null?(i=cs(t.tag,s,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=s,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,s=t.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function o0(t,s){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,s=i.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Nu(t,s,i,o,f,m){var b=0;if(o=t,typeof t=="function")Jh(t)&&(b=1);else if(typeof t=="string")b=IT(t,i,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=cs(31,i,s,f),t.elementType=D,t.lanes=m,t;case z:return Ni(i.children,f,m,s);case k:b=8,f|=24;break;case B:return t=cs(12,i,s,f|2),t.elementType=B,t.lanes=m,t;case te:return t=cs(13,i,s,f),t.elementType=te,t.lanes=m,t;case se:return t=cs(19,i,s,f),t.elementType=se,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I:b=10;break e;case $:b=9;break e;case X:b=11;break e;case A:b=14;break e;case R:b=16,o=null;break e}b=29,i=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=cs(b,i,s,f),s.elementType=t,s.type=o,s.lanes=m,s}function Ni(t,s,i,o){return t=cs(7,t,o,s),t.lanes=i,t}function Zh(t,s,i){return t=cs(6,t,null,s),t.lanes=i,t}function c0(t){var s=cs(18,null,null,0);return s.stateNode=t,s}function ef(t,s,i){return s=cs(4,t.children!==null?t.children:[],t.key,s),s.lanes=i,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var u0=new WeakMap;function Is(t,s){if(typeof t=="object"&&t!==null){var i=u0.get(t);return i!==void 0?i:(s={value:t,source:s,stack:Ta(s)},u0.set(t,s),s)}return{value:t,source:s,stack:Ta(s)}}var gl=[],yl=0,Au=null,ko=0,Ds=[],Ms=0,_r=null,da=1,ha="";function Ma(t,s){gl[yl++]=ko,gl[yl++]=Au,Au=t,ko=s}function d0(t,s,i){Ds[Ms++]=da,Ds[Ms++]=ha,Ds[Ms++]=_r,_r=t;var o=da;t=ha;var f=32-kt(o)-1;o&=~(1<<f),i+=1;var m=32-kt(s)+f;if(30<m){var b=f-f%5;m=(o&(1<<b)-1).toString(32),o>>=b,f-=b,da=1<<32-kt(s)+f|i<<f|o,ha=m+t}else da=1<<m|i<<f|o,ha=t}function tf(t){t.return!==null&&(Ma(t,1),d0(t,1,0))}function nf(t){for(;t===Au;)Au=gl[--yl],gl[yl]=null,ko=gl[--yl],gl[yl]=null;for(;t===_r;)_r=Ds[--Ms],Ds[Ms]=null,ha=Ds[--Ms],Ds[Ms]=null,da=Ds[--Ms],Ds[Ms]=null}function h0(t,s){Ds[Ms++]=da,Ds[Ms++]=ha,Ds[Ms++]=_r,da=s.id,ha=s.overflow,_r=t}var _n=null,At=null,st=!1,wr=null,ks=!1,sf=Error(r(519));function Er(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(Is(s,t)),sf}function f0(t){var s=t.stateNode,i=t.type,o=t.memoizedProps;switch(s[we]=t,s[Le]=o,i){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(i=0;i<sc.length;i++)Xe(sc[i],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),iu(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),mr(s,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||o.suppressHydrationWarning===!0||Cx(s.textContent,i)?(o.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),o.onScroll!=null&&Xe("scroll",s),o.onScrollEnd!=null&&Xe("scrollend",s),o.onClick!=null&&(s.onclick=Bs),s=!0):s=!1,s||Er(t,!0)}function m0(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:_n=_n.return}}function xl(t){if(t!==_n)return!1;if(!st)return m0(t),st=!0,!1;var s=t.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||wm(t.type,t.memoizedProps)),i=!i),i&&At&&Er(t),m0(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));At=Ux(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));At=Ux(t)}else s===27?(s=At,Pr(t.type)?(t=Am,Am=null,At=t):At=s):At=_n?Vs(t.stateNode.nextSibling):null;return!0}function Ai(){At=_n=null,st=!1}function af(){var t=wr;return t!==null&&(es===null?es=t:es.push.apply(es,t),wr=null),t}function Oo(t){wr===null?wr=[t]:wr.push(t)}var rf=U(null),ji=null,ka=null;function Tr(t,s,i){ue(rf,s._currentValue),s._currentValue=i}function Oa(t){t._currentValue=rf.current,ee(rf)}function lf(t,s,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===i)break;t=t.return}}function of(t,s,i,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var O=0;O<s.length;O++)if(T.context===s[O]){m.lanes|=i,T=m.alternate,T!==null&&(T.lanes|=i),lf(m.return,i,t),o||(b=null);break e}m=T.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=i,m=b.alternate,m!==null&&(m.lanes|=i),lf(b,i,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function vl(t,s,i,o){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var T=f.type;os(f.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(f===ze.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(oc):t=[oc])}f=f.return}t!==null&&of(s,t,i,o),s.flags|=262144}function ju(t){for(t=t.firstContext;t!==null;){if(!os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ri(t){ji=t,ka=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wn(t){return p0(ji,t)}function Ru(t,s){return ji===null&&Ri(t),p0(t,s)}function p0(t,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},ka===null){if(t===null)throw Error(r(308));ka=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ka=ka.next=s;return i}var AE=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(i,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(i){return i()})}},jE=a.unstable_scheduleCallback,RE=a.unstable_NormalPriority,tn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new AE,data:new Map,refCount:0}}function Vo(t){t.refCount--,t.refCount===0&&jE(RE,function(){t.controller.abort()})}var Po=null,uf=0,bl=0,_l=null;function CE(t,s){if(Po===null){var i=Po=[];uf=0,bl=fm(),_l={status:"pending",value:void 0,then:function(o){i.push(o)}}}return uf++,s.then(g0,g0),s}function g0(){if(--uf===0&&Po!==null){_l!==null&&(_l.status="fulfilled");var t=Po;Po=null,bl=0,_l=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function IE(t,s){var i=[],o={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var f=0;f<i.length;f++)(0,i[f])(s)},function(f){for(o.status="rejected",o.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),o}var y0=Y.S;Y.S=function(t,s){ex=Jt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&CE(t,s),y0!==null&&y0(t,s)};var Ci=U(null);function df(){var t=Ci.current;return t!==null?t:_t.pooledCache}function Cu(t,s){s===null?ue(Ci,Ci.current):ue(Ci,s.pool)}function x0(){var t=df();return t===null?null:{parent:tn._currentValue,pool:t}}var wl=Error(r(460)),hf=Error(r(474)),Iu=Error(r(542)),Du={then:function(){}};function v0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function b0(t,s,i){switch(i=t[i],i===void 0?t.push(s):i!==s&&(s.then(Bs,Bs),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,w0(t),t;default:if(typeof s.status=="string")s.then(Bs,Bs);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=o}},function(o){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,w0(t),t}throw Di=s,wl}}function Ii(t){try{var s=t._init;return s(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Di=i,wl):i}}var Di=null;function _0(){if(Di===null)throw Error(r(459));var t=Di;return Di=null,t}function w0(t){if(t===wl||t===Iu)throw Error(r(483))}var El=null,Lo=0;function Mu(t){var s=Lo;return Lo+=1,El===null&&(El=[]),b0(El,t,s)}function Uo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function ku(t,s){throw s.$$typeof===E?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function E0(t){function s(F,H){if(t){var K=F.deletions;K===null?(F.deletions=[H],F.flags|=16):K.push(H)}}function i(F,H){if(!t)return null;for(;H!==null;)s(F,H),H=H.sibling;return null}function o(F){for(var H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function f(F,H){return F=Da(F,H),F.index=0,F.sibling=null,F}function m(F,H,K){return F.index=K,t?(K=F.alternate,K!==null?(K=K.index,K<H?(F.flags|=67108866,H):K):(F.flags|=67108866,H)):(F.flags|=1048576,H)}function b(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function T(F,H,K,ae){return H===null||H.tag!==6?(H=Zh(K,F.mode,ae),H.return=F,H):(H=f(H,K),H.return=F,H)}function O(F,H,K,ae){var Ne=K.type;return Ne===z?ne(F,H,K.props.children,ae,K.key):H!==null&&(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&Ii(Ne)===H.type)?(H=f(H,K.props),Uo(H,K),H.return=F,H):(H=Nu(K.type,K.key,K.props,null,F.mode,ae),Uo(H,K),H.return=F,H)}function Q(F,H,K,ae){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=ef(K,F.mode,ae),H.return=F,H):(H=f(H,K.children||[]),H.return=F,H)}function ne(F,H,K,ae,Ne){return H===null||H.tag!==7?(H=Ni(K,F.mode,ae,Ne),H.return=F,H):(H=f(H,K),H.return=F,H)}function ie(F,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Zh(""+H,F.mode,K),H.return=F,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return K=Nu(H.type,H.key,H.props,null,F.mode,K),Uo(K,H),K.return=F,K;case L:return H=ef(H,F.mode,K),H.return=F,H;case R:return H=Ii(H),ie(F,H,K)}if(ce(H)||M(H))return H=Ni(H,F.mode,K,null),H.return=F,H;if(typeof H.then=="function")return ie(F,Mu(H),K);if(H.$$typeof===I)return ie(F,Ru(F,H),K);ku(F,H)}return null}function W(F,H,K,ae){var Ne=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ne!==null?null:T(F,H,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Ne?O(F,H,K,ae):null;case L:return K.key===Ne?Q(F,H,K,ae):null;case R:return K=Ii(K),W(F,H,K,ae)}if(ce(K)||M(K))return Ne!==null?null:ne(F,H,K,ae,null);if(typeof K.then=="function")return W(F,H,Mu(K),ae);if(K.$$typeof===I)return W(F,H,Ru(F,K),ae);ku(F,K)}return null}function Z(F,H,K,ae,Ne){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return F=F.get(K)||null,T(H,F,""+ae,Ne);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case C:return F=F.get(ae.key===null?K:ae.key)||null,O(H,F,ae,Ne);case L:return F=F.get(ae.key===null?K:ae.key)||null,Q(H,F,ae,Ne);case R:return ae=Ii(ae),Z(F,H,K,ae,Ne)}if(ce(ae)||M(ae))return F=F.get(K)||null,ne(H,F,ae,Ne,null);if(typeof ae.then=="function")return Z(F,H,K,Mu(ae),Ne);if(ae.$$typeof===I)return Z(F,H,K,Ru(H,ae),Ne);ku(H,ae)}return null}function _e(F,H,K,ae){for(var Ne=null,ot=null,Ee=H,Ge=H=0,Je=null;Ee!==null&&Ge<K.length;Ge++){Ee.index>Ge?(Je=Ee,Ee=null):Je=Ee.sibling;var ct=W(F,Ee,K[Ge],ae);if(ct===null){Ee===null&&(Ee=Je);break}t&&Ee&&ct.alternate===null&&s(F,Ee),H=m(ct,H,Ge),ot===null?Ne=ct:ot.sibling=ct,ot=ct,Ee=Je}if(Ge===K.length)return i(F,Ee),st&&Ma(F,Ge),Ne;if(Ee===null){for(;Ge<K.length;Ge++)Ee=ie(F,K[Ge],ae),Ee!==null&&(H=m(Ee,H,Ge),ot===null?Ne=Ee:ot.sibling=Ee,ot=Ee);return st&&Ma(F,Ge),Ne}for(Ee=o(Ee);Ge<K.length;Ge++)Je=Z(Ee,F,Ge,K[Ge],ae),Je!==null&&(t&&Je.alternate!==null&&Ee.delete(Je.key===null?Ge:Je.key),H=m(Je,H,Ge),ot===null?Ne=Je:ot.sibling=Je,ot=Je);return t&&Ee.forEach(function(Hr){return s(F,Hr)}),st&&Ma(F,Ge),Ne}function Ce(F,H,K,ae){if(K==null)throw Error(r(151));for(var Ne=null,ot=null,Ee=H,Ge=H=0,Je=null,ct=K.next();Ee!==null&&!ct.done;Ge++,ct=K.next()){Ee.index>Ge?(Je=Ee,Ee=null):Je=Ee.sibling;var Hr=W(F,Ee,ct.value,ae);if(Hr===null){Ee===null&&(Ee=Je);break}t&&Ee&&Hr.alternate===null&&s(F,Ee),H=m(Hr,H,Ge),ot===null?Ne=Hr:ot.sibling=Hr,ot=Hr,Ee=Je}if(ct.done)return i(F,Ee),st&&Ma(F,Ge),Ne;if(Ee===null){for(;!ct.done;Ge++,ct=K.next())ct=ie(F,ct.value,ae),ct!==null&&(H=m(ct,H,Ge),ot===null?Ne=ct:ot.sibling=ct,ot=ct);return st&&Ma(F,Ge),Ne}for(Ee=o(Ee);!ct.done;Ge++,ct=K.next())ct=Z(Ee,F,Ge,ct.value,ae),ct!==null&&(t&&ct.alternate!==null&&Ee.delete(ct.key===null?Ge:ct.key),H=m(ct,H,Ge),ot===null?Ne=ct:ot.sibling=ct,ot=ct);return t&&Ee.forEach(function(HT){return s(F,HT)}),st&&Ma(F,Ge),Ne}function bt(F,H,K,ae){if(typeof K=="object"&&K!==null&&K.type===z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Ne=K.key;H!==null;){if(H.key===Ne){if(Ne=K.type,Ne===z){if(H.tag===7){i(F,H.sibling),ae=f(H,K.props.children),ae.return=F,F=ae;break e}}else if(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&Ii(Ne)===H.type){i(F,H.sibling),ae=f(H,K.props),Uo(ae,K),ae.return=F,F=ae;break e}i(F,H);break}else s(F,H);H=H.sibling}K.type===z?(ae=Ni(K.props.children,F.mode,ae,K.key),ae.return=F,F=ae):(ae=Nu(K.type,K.key,K.props,null,F.mode,ae),Uo(ae,K),ae.return=F,F=ae)}return b(F);case L:e:{for(Ne=K.key;H!==null;){if(H.key===Ne)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){i(F,H.sibling),ae=f(H,K.children||[]),ae.return=F,F=ae;break e}else{i(F,H);break}else s(F,H);H=H.sibling}ae=ef(K,F.mode,ae),ae.return=F,F=ae}return b(F);case R:return K=Ii(K),bt(F,H,K,ae)}if(ce(K))return _e(F,H,K,ae);if(M(K)){if(Ne=M(K),typeof Ne!="function")throw Error(r(150));return K=Ne.call(K),Ce(F,H,K,ae)}if(typeof K.then=="function")return bt(F,H,Mu(K),ae);if(K.$$typeof===I)return bt(F,H,Ru(F,K),ae);ku(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(i(F,H.sibling),ae=f(H,K),ae.return=F,F=ae):(i(F,H),ae=Zh(K,F.mode,ae),ae.return=F,F=ae),b(F)):i(F,H)}return function(F,H,K,ae){try{Lo=0;var Ne=bt(F,H,K,ae);return El=null,Ne}catch(Ee){if(Ee===wl||Ee===Iu)throw Ee;var ot=cs(29,Ee,null,F.mode);return ot.lanes=ae,ot.return=F,ot}finally{}}}var Mi=E0(!0),T0=E0(!1),Sr=!1;function ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Nr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ar(t,s,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(dt&2)!==0){var f=o.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s,s=Su(t),l0(t,null,i),s}return Tu(t,o,s,i),Su(t)}function zo(t,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,i|=o,s.lanes=i,q(t,i)}}function pf(t,s){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,i=i.next}while(i!==null);m===null?f=m=s:m=m.next=s}else f=m=s;i={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=s:t.next=s,i.lastBaseUpdate=s}var gf=!1;function Bo(){if(gf){var t=_l;if(t!==null)throw t}}function Ho(t,s,i,o){gf=!1;var f=t.updateQueue;Sr=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var O=T,Q=O.next;O.next=null,b===null?m=Q:b.next=Q,b=O;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==b&&(T===null?ne.firstBaseUpdate=Q:T.next=Q,ne.lastBaseUpdate=O))}if(m!==null){var ie=f.baseState;b=0,ne=Q=O=null,T=m;do{var W=T.lane&-536870913,Z=W!==T.lane;if(Z?(We&W)===W:(o&W)===W){W!==0&&W===bl&&(gf=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var _e=t,Ce=T;W=s;var bt=i;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){ie=_e.call(bt,ie,W);break e}ie=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,W=typeof _e=="function"?_e.call(bt,ie,W):_e,W==null)break e;ie=w({},ie,W);break e;case 2:Sr=!0}}W=T.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(Q=ne=Z,O=ie):ne=ne.next=Z,b|=W;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(O=ie),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),Dr|=b,t.lanes=b,t.memoizedState=ie}}function S0(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function N0(t,s){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)S0(i[t],s)}var Tl=U(null),Ou=U(0);function A0(t,s){t=Fa,ue(Ou,t),ue(Tl,s),Fa=t|s.baseLanes}function yf(){ue(Ou,Fa),ue(Tl,Tl.current)}function xf(){Fa=Ou.current,ee(Tl),ee(Ou)}var us=U(null),Os=null;function jr(t){var s=t.alternate;ue(Qt,Qt.current&1),ue(us,t),Os===null&&(s===null||Tl.current!==null||s.memoizedState!==null)&&(Os=t)}function vf(t){ue(Qt,Qt.current),ue(us,t),Os===null&&(Os=t)}function j0(t){t.tag===22?(ue(Qt,Qt.current),ue(us,t),Os===null&&(Os=t)):Rr()}function Rr(){ue(Qt,Qt.current),ue(us,us.current)}function ds(t){ee(us),Os===t&&(Os=null),ee(Qt)}var Qt=U(0);function Vu(t){for(var s=t;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Sm(i)||Nm(i)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Va=0,Fe=null,xt=null,nn=null,Pu=!1,Sl=!1,ki=!1,Lu=0,qo=0,Nl=null,DE=0;function Ht(){throw Error(r(321))}function bf(t,s){if(s===null)return!1;for(var i=0;i<s.length&&i<t.length;i++)if(!os(t[i],s[i]))return!1;return!0}function _f(t,s,i,o,f,m){return Va=m,Fe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=t===null||t.memoizedState===null?dy:Vf,ki=!1,m=i(o,f),ki=!1,Sl&&(m=C0(s,i,o,f)),R0(t),m}function R0(t){Y.H=$o;var s=xt!==null&&xt.next!==null;if(Va=0,nn=xt=Fe=null,Pu=!1,qo=0,Nl=null,s)throw Error(r(300));t===null||sn||(t=t.dependencies,t!==null&&ju(t)&&(sn=!0))}function C0(t,s,i,o){Fe=t;var f=0;do{if(Sl&&(Nl=null),qo=0,Sl=!1,25<=f)throw Error(r(301));if(f+=1,nn=xt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=hy,m=s(i,o)}while(Sl);return m}function ME(){var t=Y.H,s=t.useState()[0];return s=typeof s.then=="function"?Fo(s):s,t=t.useState()[0],(xt!==null?xt.memoizedState:null)!==t&&(Fe.flags|=1024),s}function wf(){var t=Lu!==0;return Lu=0,t}function Ef(t,s,i){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~i}function Tf(t){if(Pu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Pu=!1}Va=0,nn=xt=Fe=null,Sl=!1,qo=Lu=0,Nl=null}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Fe.memoizedState=nn=t:nn=nn.next=t,nn}function Xt(){if(xt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var s=nn===null?Fe.memoizedState:nn.next;if(s!==null)nn=s,xt=t;else{if(t===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},nn===null?Fe.memoizedState=nn=t:nn=nn.next=t}return nn}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(t){var s=qo;return qo+=1,Nl===null&&(Nl=[]),t=b0(Nl,t,s),s=Fe,(nn===null?s.memoizedState:nn.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?dy:Vf),t}function zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Fo(t);if(t.$$typeof===I)return wn(t)}throw Error(r(438,String(t)))}function Sf(t){var s=null,i=Fe.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var o=Fe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=Uu(),Fe.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(t),o=0;o<t;o++)i[o]=V;return s.index++,i}function Pa(t,s){return typeof s=="function"?s(t):s}function Bu(t){var s=Xt();return Nf(s,xt,t)}function Nf(t,s,i){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var f=t.baseQueue,m=o.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,o.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var T=b=null,O=null,Q=s,ne=!1;do{var ie=Q.lane&-536870913;if(ie!==Q.lane?(We&ie)===ie:(Va&ie)===ie){var W=Q.revertLane;if(W===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ie===bl&&(ne=!0);else if((Va&W)===W){Q=Q.next,W===bl&&(ne=!0);continue}else ie={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(T=O=ie,b=m):O=O.next=ie,Fe.lanes|=W,Dr|=W;ie=Q.action,ki&&i(m,ie),m=Q.hasEagerState?Q.eagerState:i(m,ie)}else W={lane:ie,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(T=O=W,b=m):O=O.next=W,Fe.lanes|=ie,Dr|=ie;Q=Q.next}while(Q!==null&&Q!==s);if(O===null?b=m:O.next=T,!os(m,t.memoizedState)&&(sn=!0,ne&&(i=_l,i!==null)))throw i;t.memoizedState=m,t.baseState=b,t.baseQueue=O,o.lastRenderedState=m}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Af(t){var s=Xt(),i=s.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var o=i.dispatch,f=i.pending,m=s.memoizedState;if(f!==null){i.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);os(m,s.memoizedState)||(sn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),i.lastRenderedState=m}return[m,o]}function I0(t,s,i){var o=Fe,f=Xt(),m=st;if(m){if(i===void 0)throw Error(r(407));i=i()}else i=s();var b=!os((xt||f).memoizedState,i);if(b&&(f.memoizedState=i,sn=!0),f=f.queue,Cf(k0.bind(null,o,f,t),[t]),f.getSnapshot!==s||b||nn!==null&&nn.memoizedState.tag&1){if(o.flags|=2048,Al(9,{destroy:void 0},M0.bind(null,o,f,i,s),null),_t===null)throw Error(r(349));m||(Va&127)!==0||D0(o,s,i)}return i}function D0(t,s,i){t.flags|=16384,t={getSnapshot:s,value:i},s=Fe.updateQueue,s===null?(s=Uu(),Fe.updateQueue=s,s.stores=[t]):(i=s.stores,i===null?s.stores=[t]:i.push(t))}function M0(t,s,i,o){s.value=i,s.getSnapshot=o,O0(s)&&V0(t)}function k0(t,s,i){return i(function(){O0(s)&&V0(t)})}function O0(t){var s=t.getSnapshot;t=t.value;try{var i=s();return!os(t,i)}catch{return!0}}function V0(t){var s=Si(t,2);s!==null&&ts(s,t,2)}function jf(t){var s=qn();if(typeof t=="function"){var i=t;if(t=i(),ki){$n(!0);try{i()}finally{$n(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},s}function P0(t,s,i,o){return t.baseState=i,Nf(t,xt,typeof o=="function"?o:Pa)}function kE(t,s,i,o,f){if(Fu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?i(!0):m.isTransition=!1,o(m),i=s.pending,i===null?(m.next=s.pending=m,L0(s,m)):(m.next=i.next,s.pending=i.next=m)}}function L0(t,s){var i=s.action,o=s.payload,f=t.state;if(s.isTransition){var m=Y.T,b={};Y.T=b;try{var T=i(f,o),O=Y.S;O!==null&&O(b,T),U0(t,s,T)}catch(Q){Rf(t,s,Q)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=i(f,o),U0(t,s,m)}catch(Q){Rf(t,s,Q)}}function U0(t,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){z0(t,s,o)},function(o){return Rf(t,s,o)}):z0(t,s,i)}function z0(t,s,i){s.status="fulfilled",s.value=i,B0(s),t.state=i,s=t.pending,s!==null&&(i=s.next,i===s?t.pending=null:(i=i.next,s.next=i,L0(t,i)))}function Rf(t,s,i){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=i,B0(s),s=s.next;while(s!==o)}t.action=null}function B0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function H0(t,s){return s}function q0(t,s){if(st){var i=_t.formState;if(i!==null){e:{var o=Fe;if(st){if(At){t:{for(var f=At,m=ks;f.nodeType!==8;){if(!m){f=null;break t}if(f=Vs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){At=Vs(f.nextSibling),o=f.data==="F!";break e}}Er(o)}o=!1}o&&(s=i[0])}}return i=qn(),i.memoizedState=i.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:H0,lastRenderedState:s},i.queue=o,i=oy.bind(null,Fe,o),o.dispatch=i,o=jf(!1),m=Of.bind(null,Fe,!1,o.queue),o=qn(),f={state:s,dispatch:null,action:t,pending:null},o.queue=f,i=kE.bind(null,Fe,f,m,i),f.dispatch=i,o.memoizedState=t,[s,i,!1]}function F0(t){var s=Xt();return G0(s,xt,t)}function G0(t,s,i){if(s=Nf(t,s,H0)[0],t=Bu(Pa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Fo(s)}catch(b){throw b===wl?Iu:b}else o=s;s=Xt();var f=s.queue,m=f.dispatch;return i!==s.memoizedState&&(Fe.flags|=2048,Al(9,{destroy:void 0},OE.bind(null,f,i),null)),[o,m,t]}function OE(t,s){t.action=s}function $0(t){var s=Xt(),i=xt;if(i!==null)return G0(s,i,t);Xt(),s=s.memoizedState,i=Xt();var o=i.queue.dispatch;return i.memoizedState=t,[s,o,!1]}function Al(t,s,i,o){return t={tag:t,create:i,deps:o,inst:s,next:null},s=Fe.updateQueue,s===null&&(s=Uu(),Fe.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,s.lastEffect=t),t}function Y0(){return Xt().memoizedState}function Hu(t,s,i,o){var f=qn();Fe.flags|=t,f.memoizedState=Al(1|s,{destroy:void 0},i,o===void 0?null:o)}function qu(t,s,i,o){var f=Xt();o=o===void 0?null:o;var m=f.memoizedState.inst;xt!==null&&o!==null&&bf(o,xt.memoizedState.deps)?f.memoizedState=Al(s,m,i,o):(Fe.flags|=t,f.memoizedState=Al(1|s,m,i,o))}function K0(t,s){Hu(8390656,8,t,s)}function Cf(t,s){qu(2048,8,t,s)}function VE(t){Fe.flags|=4;var s=Fe.updateQueue;if(s===null)s=Uu(),Fe.updateQueue=s,s.events=[t];else{var i=s.events;i===null?s.events=[t]:i.push(t)}}function Q0(t){var s=Xt().memoizedState;return VE({ref:s,nextImpl:t}),function(){if((dt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function X0(t,s){return qu(4,2,t,s)}function W0(t,s){return qu(4,4,t,s)}function J0(t,s){if(typeof s=="function"){t=t();var i=s(t);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Z0(t,s,i){i=i!=null?i.concat([t]):null,qu(4,4,J0.bind(null,s,t),i)}function If(){}function ey(t,s){var i=Xt();s=s===void 0?null:s;var o=i.memoizedState;return s!==null&&bf(s,o[1])?o[0]:(i.memoizedState=[t,s],t)}function ty(t,s){var i=Xt();s=s===void 0?null:s;var o=i.memoizedState;if(s!==null&&bf(s,o[1]))return o[0];if(o=t(),ki){$n(!0);try{t()}finally{$n(!1)}}return i.memoizedState=[o,s],o}function Df(t,s,i){return i===void 0||(Va&1073741824)!==0&&(We&261930)===0?t.memoizedState=s:(t.memoizedState=i,t=nx(),Fe.lanes|=t,Dr|=t,i)}function ny(t,s,i,o){return os(i,s)?i:Tl.current!==null?(t=Df(t,i,o),os(t,s)||(sn=!0),t):(Va&42)===0||(Va&1073741824)!==0&&(We&261930)===0?(sn=!0,t.memoizedState=i):(t=nx(),Fe.lanes|=t,Dr|=t,s)}function sy(t,s,i,o,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var b=Y.T,T={};Y.T=T,Of(t,!1,s,i);try{var O=f(),Q=Y.S;if(Q!==null&&Q(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=IE(O,o);Go(t,s,ne,ms(t))}else Go(t,s,o,ms(t))}catch(ie){Go(t,s,{then:function(){},status:"rejected",reason:ie},ms())}finally{oe.p=m,b!==null&&T.types!==null&&(b.types=T.types),Y.T=b}}function PE(){}function Mf(t,s,i,o){if(t.tag!==5)throw Error(r(476));var f=ay(t).queue;sy(t,f,s,de,i===null?PE:function(){return ry(t),i(o)})}function ay(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:de},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:i},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function ry(t){var s=ay(t);s.next===null&&(s=t.alternate.memoizedState),Go(t,s.next.queue,{},ms())}function kf(){return wn(oc)}function iy(){return Xt().memoizedState}function ly(){return Xt().memoizedState}function LE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var i=ms();t=Nr(i);var o=Ar(s,t,i);o!==null&&(ts(o,s,i),zo(o,s,i)),s={cache:cf()},t.payload=s;return}s=s.return}}function UE(t,s,i){var o=ms();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Fu(t)?cy(s,i):(i=Wh(t,s,i,o),i!==null&&(ts(i,t,o),uy(i,s,o)))}function oy(t,s,i){var o=ms();Go(t,s,i,o)}function Go(t,s,i,o){var f={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))cy(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,T=m(b,i);if(f.hasEagerState=!0,f.eagerState=T,os(T,b))return Tu(t,s,f,0),_t===null&&Eu(),!1}catch{}finally{}if(i=Wh(t,s,f,o),i!==null)return ts(i,t,o),uy(i,s,o),!0}return!1}function Of(t,s,i,o){if(o={lane:2,revertLane:fm(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Fu(t)){if(s)throw Error(r(479))}else s=Wh(t,i,o,2),s!==null&&ts(s,t,2)}function Fu(t){var s=t.alternate;return t===Fe||s!==null&&s===Fe}function cy(t,s){Sl=Pu=!0;var i=t.pending;i===null?s.next=s:(s.next=i.next,i.next=s),t.pending=s}function uy(t,s,i){if((i&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,i|=o,s.lanes=i,q(t,i)}}var $o={readContext:wn,use:zu,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};$o.useEffectEvent=Ht;var dy={readContext:wn,use:zu,useCallback:function(t,s){return qn().memoizedState=[t,s===void 0?null:s],t},useContext:wn,useEffect:K0,useImperativeHandle:function(t,s,i){i=i!=null?i.concat([t]):null,Hu(4194308,4,J0.bind(null,s,t),i)},useLayoutEffect:function(t,s){return Hu(4194308,4,t,s)},useInsertionEffect:function(t,s){Hu(4,2,t,s)},useMemo:function(t,s){var i=qn();s=s===void 0?null:s;var o=t();if(ki){$n(!0);try{t()}finally{$n(!1)}}return i.memoizedState=[o,s],o},useReducer:function(t,s,i){var o=qn();if(i!==void 0){var f=i(s);if(ki){$n(!0);try{i(s)}finally{$n(!1)}}}else f=s;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=UE.bind(null,Fe,t),[o.memoizedState,t]},useRef:function(t){var s=qn();return t={current:t},s.memoizedState=t},useState:function(t){t=jf(t);var s=t.queue,i=oy.bind(null,Fe,s);return s.dispatch=i,[t.memoizedState,i]},useDebugValue:If,useDeferredValue:function(t,s){var i=qn();return Df(i,t,s)},useTransition:function(){var t=jf(!1);return t=sy.bind(null,Fe,t.queue,!0,!1),qn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,i){var o=Fe,f=qn();if(st){if(i===void 0)throw Error(r(407));i=i()}else{if(i=s(),_t===null)throw Error(r(349));(We&127)!==0||D0(o,s,i)}f.memoizedState=i;var m={value:i,getSnapshot:s};return f.queue=m,K0(k0.bind(null,o,m,t),[t]),o.flags|=2048,Al(9,{destroy:void 0},M0.bind(null,o,m,i,s),null),i},useId:function(){var t=qn(),s=_t.identifierPrefix;if(st){var i=ha,o=da;i=(o&~(1<<32-kt(o)-1)).toString(32)+i,s="_"+s+"R_"+i,i=Lu++,0<i&&(s+="H"+i.toString(32)),s+="_"}else i=DE++,s="_"+s+"r_"+i.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:kf,useFormState:q0,useActionState:q0,useOptimistic:function(t){var s=qn();s.memoizedState=s.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=Of.bind(null,Fe,!0,i),i.dispatch=s,[t,s]},useMemoCache:Sf,useCacheRefresh:function(){return qn().memoizedState=LE.bind(null,Fe)},useEffectEvent:function(t){var s=qn(),i={impl:t};return s.memoizedState=i,function(){if((dt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},Vf={readContext:wn,use:zu,useCallback:ey,useContext:wn,useEffect:Cf,useImperativeHandle:Z0,useInsertionEffect:X0,useLayoutEffect:W0,useMemo:ty,useReducer:Bu,useRef:Y0,useState:function(){return Bu(Pa)},useDebugValue:If,useDeferredValue:function(t,s){var i=Xt();return ny(i,xt.memoizedState,t,s)},useTransition:function(){var t=Bu(Pa)[0],s=Xt().memoizedState;return[typeof t=="boolean"?t:Fo(t),s]},useSyncExternalStore:I0,useId:iy,useHostTransitionStatus:kf,useFormState:F0,useActionState:F0,useOptimistic:function(t,s){var i=Xt();return P0(i,xt,t,s)},useMemoCache:Sf,useCacheRefresh:ly};Vf.useEffectEvent=Q0;var hy={readContext:wn,use:zu,useCallback:ey,useContext:wn,useEffect:Cf,useImperativeHandle:Z0,useInsertionEffect:X0,useLayoutEffect:W0,useMemo:ty,useReducer:Af,useRef:Y0,useState:function(){return Af(Pa)},useDebugValue:If,useDeferredValue:function(t,s){var i=Xt();return xt===null?Df(i,t,s):ny(i,xt.memoizedState,t,s)},useTransition:function(){var t=Af(Pa)[0],s=Xt().memoizedState;return[typeof t=="boolean"?t:Fo(t),s]},useSyncExternalStore:I0,useId:iy,useHostTransitionStatus:kf,useFormState:$0,useActionState:$0,useOptimistic:function(t,s){var i=Xt();return xt!==null?P0(i,xt,t,s):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Sf,useCacheRefresh:ly};hy.useEffectEvent=Q0;function Pf(t,s,i,o){s=t.memoizedState,i=i(o,s),i=i==null?s:w({},s,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Lf={enqueueSetState:function(t,s,i){t=t._reactInternals;var o=ms(),f=Nr(o);f.payload=s,i!=null&&(f.callback=i),s=Ar(t,f,o),s!==null&&(ts(s,t,o),zo(s,t,o))},enqueueReplaceState:function(t,s,i){t=t._reactInternals;var o=ms(),f=Nr(o);f.tag=1,f.payload=s,i!=null&&(f.callback=i),s=Ar(t,f,o),s!==null&&(ts(s,t,o),zo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var i=ms(),o=Nr(i);o.tag=2,s!=null&&(o.callback=s),s=Ar(t,o,i),s!==null&&(ts(s,t,i),zo(s,t,i))}};function fy(t,s,i,o,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,b):s.prototype&&s.prototype.isPureReactComponent?!Do(i,o)||!Do(f,m):!0}function my(t,s,i,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,o),s.state!==t&&Lf.enqueueReplaceState(s,s.state,null)}function Oi(t,s){var i=s;if("ref"in s){i={};for(var o in s)o!=="ref"&&(i[o]=s[o])}if(t=t.defaultProps){i===s&&(i=w({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function py(t){wu(t)}function gy(t){console.error(t)}function yy(t){wu(t)}function Gu(t,s){try{var i=t.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function xy(t,s,i){try{var o=t.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Uf(t,s,i){return i=Nr(i),i.tag=3,i.payload={element:null},i.callback=function(){Gu(t,s)},i}function vy(t){return t=Nr(t),t.tag=3,t}function by(t,s,i,o){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;t.payload=function(){return f(m)},t.callback=function(){xy(s,i,o)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){xy(s,i,o),typeof f!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function zE(t,s,i,o,f){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=i.alternate,s!==null&&vl(s,i,f,!0),i=us.current,i!==null){switch(i.tag){case 31:case 13:return Os===null?sd():i.alternate===null&&qt===0&&(qt=3),i.flags&=-257,i.flags|=65536,i.lanes=f,o===Du?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([o]):s.add(o),um(t,o,f)),!1;case 22:return i.flags|=65536,o===Du?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([o]):i.add(o)),um(t,o,f)),!1}throw Error(r(435,i.tag))}return um(t,o,f),sd(),!1}if(st)return s=us.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,o!==sf&&(t=Error(r(422),{cause:o}),Oo(Is(t,i)))):(o!==sf&&(s=Error(r(423),{cause:o}),Oo(Is(s,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=Is(o,i),f=Uf(t.stateNode,o,f),pf(t,f),qt!==4&&(qt=2)),!1;var m=Error(r(520),{cause:o});if(m=Is(m,i),ec===null?ec=[m]:ec.push(m),qt!==4&&(qt=2),s===null)return!0;o=Is(o,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Uf(i.stateNode,o,t),pf(i,t),!1;case 1:if(s=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Mr===null||!Mr.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=vy(f),by(f,t,i,o),pf(i,f),!1}i=i.return}while(i!==null);return!1}var zf=Error(r(461)),sn=!1;function En(t,s,i,o){s.child=t===null?T0(s,null,i,o):Mi(s,t.child,i,o)}function _y(t,s,i,o,f){i=i.render;var m=s.ref;if("ref"in o){var b={};for(var T in o)T!=="ref"&&(b[T]=o[T])}else b=o;return Ri(s),o=_f(t,s,i,b,m,f),T=wf(),t!==null&&!sn?(Ef(t,s,f),La(t,s,f)):(st&&T&&tf(s),s.flags|=1,En(t,s,o,f),s.child)}function wy(t,s,i,o,f){if(t===null){var m=i.type;return typeof m=="function"&&!Jh(m)&&m.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=m,Ey(t,s,m,o,f)):(t=Nu(i.type,null,o,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Kf(t,f)){var b=m.memoizedProps;if(i=i.compare,i=i!==null?i:Do,i(b,o)&&t.ref===s.ref)return La(t,s,f)}return s.flags|=1,t=Da(m,o),t.ref=s.ref,t.return=s,s.child=t}function Ey(t,s,i,o,f){if(t!==null){var m=t.memoizedProps;if(Do(m,o)&&t.ref===s.ref)if(sn=!1,s.pendingProps=o=m,Kf(t,f))(t.flags&131072)!==0&&(sn=!0);else return s.lanes=t.lanes,La(t,s,f)}return Bf(t,s,i,o,f)}function Ty(t,s,i,o){var f=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,t!==null){for(o=s.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,s.child=null;return Sy(t,s,m,i,o)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Cu(s,m!==null?m.cachePool:null),m!==null?A0(s,m):yf(),j0(s);else return o=s.lanes=536870912,Sy(t,s,m!==null?m.baseLanes|i:i,i,o)}else m!==null?(Cu(s,m.cachePool),A0(s,m),Rr(),s.memoizedState=null):(t!==null&&Cu(s,null),yf(),Rr());return En(t,s,f,i),s.child}function Yo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Sy(t,s,i,o,f){var m=df();return m=m===null?null:{parent:tn._currentValue,pool:m},s.memoizedState={baseLanes:i,cachePool:m},t!==null&&Cu(s,null),yf(),j0(s),t!==null&&vl(t,s,o,!0),s.childLanes=f,null}function $u(t,s){return s=Ku({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Ny(t,s,i){return Mi(s,t.child,null,i),t=$u(s,s.pendingProps),t.flags|=2,ds(s),s.memoizedState=null,t}function BE(t,s,i){var o=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(st){if(o.mode==="hidden")return t=$u(s,o),s.lanes=536870912,Yo(null,t);if(vf(s),(t=At)?(t=Lx(t,ks),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:_r!==null?{id:da,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},i=c0(t),i.return=s,s.child=i,_n=s,At=null)):t=null,t===null)throw Er(s);return s.lanes=536870912,null}return $u(s,o)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(vf(s),f)if(s.flags&256)s.flags&=-257,s=Ny(t,s,i);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(sn||vl(t,s,i,!1),f=(i&t.childLanes)!==0,sn||f){if(o=_t,o!==null&&(b=fe(o,i),b!==0&&b!==m.retryLane))throw m.retryLane=b,Si(t,b),ts(o,t,b),zf;sd(),s=Ny(t,s,i)}else t=m.treeContext,At=Vs(b.nextSibling),_n=s,st=!0,wr=null,ks=!1,t!==null&&h0(s,t),s=$u(s,o),s.flags|=4096;return s}return t=Da(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Yu(t,s){var i=s.ref;if(i===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(t===null||t.ref!==i)&&(s.flags|=4194816)}}function Bf(t,s,i,o,f){return Ri(s),i=_f(t,s,i,o,void 0,f),o=wf(),t!==null&&!sn?(Ef(t,s,f),La(t,s,f)):(st&&o&&tf(s),s.flags|=1,En(t,s,i,f),s.child)}function Ay(t,s,i,o,f,m){return Ri(s),s.updateQueue=null,i=C0(s,o,i,f),R0(t),o=wf(),t!==null&&!sn?(Ef(t,s,m),La(t,s,m)):(st&&o&&tf(s),s.flags|=1,En(t,s,i,m),s.child)}function jy(t,s,i,o,f){if(Ri(s),s.stateNode===null){var m=pl,b=i.contextType;typeof b=="object"&&b!==null&&(m=wn(b)),m=new i(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Lf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},ff(s),b=i.contextType,m.context=typeof b=="object"&&b!==null?wn(b):pl,m.state=s.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(Pf(s,i,b,o),m.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Lf.enqueueReplaceState(m,m.state,null),Ho(s,o,m,f),Bo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var T=s.memoizedProps,O=Oi(i,T);m.props=O;var Q=m.context,ne=i.contextType;b=pl,typeof ne=="object"&&ne!==null&&(b=wn(ne));var ie=i.getDerivedStateFromProps;ne=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||Q!==b)&&my(s,m,o,b),Sr=!1;var W=s.memoizedState;m.state=W,Ho(s,o,m,f),Bo(),Q=s.memoizedState,T||W!==Q||Sr?(typeof ie=="function"&&(Pf(s,i,ie,o),Q=s.memoizedState),(O=Sr||fy(s,i,O,o,W,Q,b))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=Q),m.props=o,m.state=Q,m.context=b,o=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,mf(t,s),b=s.memoizedProps,ne=Oi(i,b),m.props=ne,ie=s.pendingProps,W=m.context,Q=i.contextType,O=pl,typeof Q=="object"&&Q!==null&&(O=wn(Q)),T=i.getDerivedStateFromProps,(Q=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ie||W!==O)&&my(s,m,o,O),Sr=!1,W=s.memoizedState,m.state=W,Ho(s,o,m,f),Bo();var Z=s.memoizedState;b!==ie||W!==Z||Sr||t!==null&&t.dependencies!==null&&ju(t.dependencies)?(typeof T=="function"&&(Pf(s,i,T,o),Z=s.memoizedState),(ne=Sr||fy(s,i,ne,o,W,Z,O)||t!==null&&t.dependencies!==null&&ju(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,Z,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,Z,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=Z),m.props=o,m.state=Z,m.context=O,o=ne):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&W===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Yu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=Mi(s,t.child,null,f),s.child=Mi(s,null,i,f)):En(t,s,i,f),s.memoizedState=m.state,t=s.child):t=La(t,s,f),t}function Ry(t,s,i,o){return Ai(),s.flags|=256,En(t,s,i,o),s.child}var Hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qf(t){return{baseLanes:t,cachePool:x0()}}function Ff(t,s,i){return t=t!==null?t.childLanes&~i:0,s&&(t|=fs),t}function Cy(t,s,i){var o=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Qt.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(st){if(f?jr(s):Rr(),(t=At)?(t=Lx(t,ks),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:_r!==null?{id:da,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},i=c0(t),i.return=s,s.child=i,_n=s,At=null)):t=null,t===null)throw Er(s);return Nm(t)?s.lanes=32:s.lanes=536870912,null}var T=o.children;return o=o.fallback,f?(Rr(),f=s.mode,T=Ku({mode:"hidden",children:T},f),o=Ni(o,f,i,null),T.return=s,o.return=s,T.sibling=o,s.child=T,o=s.child,o.memoizedState=qf(i),o.childLanes=Ff(t,b,i),s.memoizedState=Hf,Yo(null,o)):(jr(s),Gf(s,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(m)s.flags&256?(jr(s),s.flags&=-257,s=$f(t,s,i)):s.memoizedState!==null?(Rr(),s.child=t.child,s.flags|=128,s=null):(Rr(),T=o.fallback,f=s.mode,o=Ku({mode:"visible",children:o.children},f),T=Ni(T,f,i,null),T.flags|=2,o.return=s,T.return=s,o.sibling=T,s.child=o,Mi(s,t.child,null,i),o=s.child,o.memoizedState=qf(i),o.childLanes=Ff(t,b,i),s.memoizedState=Hf,s=Yo(null,o));else if(jr(s),Nm(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var Q=b.dgst;b=Q,o=Error(r(419)),o.stack="",o.digest=b,Oo({value:o,source:null,stack:null}),s=$f(t,s,i)}else if(sn||vl(t,s,i,!1),b=(i&t.childLanes)!==0,sn||b){if(b=_t,b!==null&&(o=fe(b,i),o!==0&&o!==O.retryLane))throw O.retryLane=o,Si(t,o),ts(b,t,o),zf;Sm(T)||sd(),s=$f(t,s,i)}else Sm(T)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,At=Vs(T.nextSibling),_n=s,st=!0,wr=null,ks=!1,t!==null&&h0(s,t),s=Gf(s,o.children),s.flags|=4096);return s}return f?(Rr(),T=o.fallback,f=s.mode,O=t.child,Q=O.sibling,o=Da(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,Q!==null?T=Da(Q,T):(T=Ni(T,f,i,null),T.flags|=2),T.return=s,o.return=s,o.sibling=T,s.child=o,Yo(null,o),o=s.child,T=t.child.memoizedState,T===null?T=qf(i):(f=T.cachePool,f!==null?(O=tn._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=x0(),T={baseLanes:T.baseLanes|i,cachePool:f}),o.memoizedState=T,o.childLanes=Ff(t,b,i),s.memoizedState=Hf,Yo(t.child,o)):(jr(s),i=t.child,t=i.sibling,i=Da(i,{mode:"visible",children:o.children}),i.return=s,i.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=i,s.memoizedState=null,i)}function Gf(t,s){return s=Ku({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ku(t,s){return t=cs(22,t,null,s),t.lanes=0,t}function $f(t,s,i){return Mi(s,t.child,null,i),t=Gf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Iy(t,s,i){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),lf(t.return,s,i)}function Yf(t,s,i,o,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:f,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=i,b.tailMode=f,b.treeForkCount=m)}function Dy(t,s,i){var o=s.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var b=Qt.current,T=(b&2)!==0;if(T?(b=b&1|2,s.flags|=128):b&=1,ue(Qt,b),En(t,s,o,i),o=st?ko:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iy(t,i,s);else if(t.tag===19)Iy(t,i,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=s.child,f=null;i!==null;)t=i.alternate,t!==null&&Vu(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=s.child,s.child=null):(f=i.sibling,i.sibling=null),Yf(s,!1,f,i,m,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Vu(t)===null){s.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Yf(s,!0,i,null,m,o);break;case"together":Yf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function La(t,s,i){if(t!==null&&(s.dependencies=t.dependencies),Dr|=s.lanes,(i&s.childLanes)===0)if(t!==null){if(vl(t,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,i=Da(t,t.pendingProps),s.child=i,i.return=s;t.sibling!==null;)t=t.sibling,i=i.sibling=Da(t,t.pendingProps),i.return=s;i.sibling=null}return s.child}function Kf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&ju(t)))}function HE(t,s,i){switch(s.tag){case 3:Et(s,s.stateNode.containerInfo),Tr(s,tn,t.memoizedState.cache),Ai();break;case 27:case 5:jn(s);break;case 4:Et(s,s.stateNode.containerInfo);break;case 10:Tr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,vf(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(jr(s),s.flags|=128,null):(i&s.child.childLanes)!==0?Cy(t,s,i):(jr(s),t=La(t,s,i),t!==null?t.sibling:null);jr(s);break;case 19:var f=(t.flags&128)!==0;if(o=(i&s.childLanes)!==0,o||(vl(t,s,i,!1),o=(i&s.childLanes)!==0),f){if(o)return Dy(t,s,i);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Qt,Qt.current),o)break;return null;case 22:return s.lanes=0,Ty(t,s,i,s.pendingProps);case 24:Tr(s,tn,t.memoizedState.cache)}return La(t,s,i)}function My(t,s,i){if(t!==null)if(t.memoizedProps!==s.pendingProps)sn=!0;else{if(!Kf(t,i)&&(s.flags&128)===0)return sn=!1,HE(t,s,i);sn=(t.flags&131072)!==0}else sn=!1,st&&(s.flags&1048576)!==0&&d0(s,ko,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=Ii(s.elementType),s.type=t,typeof t=="function")Jh(t)?(o=Oi(t,o),s.tag=1,s=jy(null,s,t,o,i)):(s.tag=0,s=Bf(null,s,t,o,i));else{if(t!=null){var f=t.$$typeof;if(f===X){s.tag=11,s=_y(null,s,t,o,i);break e}else if(f===A){s.tag=14,s=wy(null,s,t,o,i);break e}}throw s=je(t)||t,Error(r(306,s,""))}}return s;case 0:return Bf(t,s,s.type,s.pendingProps,i);case 1:return o=s.type,f=Oi(o,s.pendingProps),jy(t,s,o,f,i);case 3:e:{if(Et(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var m=s.memoizedState;f=m.element,mf(t,s),Ho(s,o,null,i);var b=s.memoizedState;if(o=b.cache,Tr(s,tn,o),o!==m.cache&&of(s,[tn],i,!0),Bo(),o=b.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Ry(t,s,o,i);break e}else if(o!==f){f=Is(Error(r(424)),s),Oo(f),s=Ry(t,s,o,i);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(At=Vs(t.firstChild),_n=s,st=!0,wr=null,ks=!0,i=T0(s,null,o,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ai(),o===f){s=La(t,s,i);break e}En(t,s,o,i)}s=s.child}return s;case 26:return Yu(t,s),t===null?(i=Fx(s.type,null,s.pendingProps,null))?s.memoizedState=i:st||(i=s.type,t=s.pendingProps,o=ud(Me.current).createElement(i),o[we]=s,o[Le]=t,Tn(o,i,t),Tt(o),s.stateNode=o):s.memoizedState=Fx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return jn(s),t===null&&st&&(o=s.stateNode=Bx(s.type,s.pendingProps,Me.current),_n=s,ks=!0,f=At,Pr(s.type)?(Am=f,At=Vs(o.firstChild)):At=f),En(t,s,s.pendingProps.children,i),Yu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&st&&((f=o=At)&&(o=xT(o,s.type,s.pendingProps,ks),o!==null?(s.stateNode=o,_n=s,At=Vs(o.firstChild),ks=!1,f=!0):f=!1),f||Er(s)),jn(s),f=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,o=m.children,wm(f,m)?o=null:b!==null&&wm(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=_f(t,s,ME,null,null,i),oc._currentValue=f),Yu(t,s),En(t,s,o,i),s.child;case 6:return t===null&&st&&((t=i=At)&&(i=vT(i,s.pendingProps,ks),i!==null?(s.stateNode=i,_n=s,At=null,t=!0):t=!1),t||Er(s)),null;case 13:return Cy(t,s,i);case 4:return Et(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=Mi(s,null,o,i):En(t,s,o,i),s.child;case 11:return _y(t,s,s.type,s.pendingProps,i);case 7:return En(t,s,s.pendingProps,i),s.child;case 8:return En(t,s,s.pendingProps.children,i),s.child;case 12:return En(t,s,s.pendingProps.children,i),s.child;case 10:return o=s.pendingProps,Tr(s,s.type,o.value),En(t,s,o.children,i),s.child;case 9:return f=s.type._context,o=s.pendingProps.children,Ri(s),f=wn(f),o=o(f),s.flags|=1,En(t,s,o,i),s.child;case 14:return wy(t,s,s.type,s.pendingProps,i);case 15:return Ey(t,s,s.type,s.pendingProps,i);case 19:return Dy(t,s,i);case 31:return BE(t,s,i);case 22:return Ty(t,s,i,s.pendingProps);case 24:return Ri(s),o=wn(tn),t===null?(f=df(),f===null&&(f=_t,m=cf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),s.memoizedState={parent:o,cache:f},ff(s),Tr(s,tn,f)):((t.lanes&i)!==0&&(mf(t,s),Ho(s,null,null,i),Bo()),f=t.memoizedState,m=s.memoizedState,f.parent!==o?(f={parent:o,cache:o},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Tr(s,tn,o)):(o=m.cache,Tr(s,tn,o),o!==f.cache&&of(s,[tn],i,!0))),En(t,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ua(t){t.flags|=4}function Qf(t,s,i,o,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(ix())t.flags|=8192;else throw Di=Du,hf}else t.flags&=-16777217}function ky(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qx(s))if(ix())t.flags|=8192;else throw Di=Du,hf}function Qu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?nl():536870912,t.lanes|=s,Il|=s)}function Ko(t,s){if(!st)switch(t.tailMode){case"hidden":s=t.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function jt(t){var s=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(s)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=i,s}function qE(t,s,i){var o=s.pendingProps;switch(nf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return jt(s),null;case 3:return i=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Oa(tn),tt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(xl(s)?Ua(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,af())),jt(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(Ua(s),m!==null?(jt(s),ky(s,m)):(jt(s),Qf(s,f,null,o,i))):m?m!==t.memoizedState?(Ua(s),jt(s),ky(s,m)):(jt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ua(s),jt(s),Qf(s,f,t,o,i)),null;case 27:if(Un(s),i=Me.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&Ua(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return jt(s),null}t=me.current,xl(s)?f0(s):(t=Bx(f,o,i),s.stateNode=t,Ua(s))}return jt(s),null;case 5:if(Un(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&Ua(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return jt(s),null}if(m=me.current,xl(s))f0(s);else{var b=ud(Me.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?b.createElement(f,{is:o.is}):b.createElement(f)}}m[we]=s,m[Le]=o;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(Tn(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ua(s)}}return jt(s),Qf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,i),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&Ua(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=Me.current,xl(s)){if(t=s.stateNode,i=s.memoizedProps,o=null,f=_n,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[we]=s,t=!!(t.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Cx(t.nodeValue,i)),t||Er(s,!0)}else t=ud(t).createTextNode(o),t[we]=s,s.stateNode=t}return jt(s),null;case 31:if(i=s.memoizedState,t===null||t.memoizedState!==null){if(o=xl(s),i!==null){if(t===null){if(!o)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[we]=s}else Ai(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),t=!1}else i=af(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return s.flags&256?(ds(s),s):(ds(s),null);if((s.flags&128)!==0)throw Error(r(558))}return jt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=xl(s),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[we]=s}else Ai(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),f=!1}else f=af(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ds(s),s):(ds(s),null)}return ds(s),(s.flags&128)!==0?(s.lanes=i,s):(i=o!==null,t=t!==null&&t.memoizedState!==null,i&&(o=s.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),i!==t&&i&&(s.child.flags|=8192),Qu(s,s.updateQueue),jt(s),null);case 4:return tt(),t===null&&ym(s.stateNode.containerInfo),jt(s),null;case 10:return Oa(s.type),jt(s),null;case 19:if(ee(Qt),o=s.memoizedState,o===null)return jt(s),null;if(f=(s.flags&128)!==0,m=o.rendering,m===null)if(f)Ko(o,!1);else{if(qt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Vu(t),m!==null){for(s.flags|=128,Ko(o,!1),t=m.updateQueue,s.updateQueue=t,Qu(s,t),s.subtreeFlags=0,t=i,i=s.child;i!==null;)o0(i,t),i=i.sibling;return ue(Qt,Qt.current&1|2),st&&Ma(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&Jt()>ed&&(s.flags|=128,f=!0,Ko(o,!1),s.lanes=4194304)}else{if(!f)if(t=Vu(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,Qu(s,t),Ko(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!st)return jt(s),null}else 2*Jt()-o.renderingStartTime>ed&&i!==536870912&&(s.flags|=128,f=!0,Ko(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Jt(),t.sibling=null,i=Qt.current,ue(Qt,f?i&1|2:i&1),st&&Ma(s,o.treeForkCount),t):(jt(s),null);case 22:case 23:return ds(s),xf(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(i&536870912)!==0&&(s.flags&128)===0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),i=s.updateQueue,i!==null&&Qu(s,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==i&&(s.flags|=2048),t!==null&&ee(Ci),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),Oa(tn),jt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function FE(t,s){switch(nf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Oa(tn),tt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Un(s),null;case 31:if(s.memoizedState!==null){if(ds(s),s.alternate===null)throw Error(r(340));Ai()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(ds(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ai()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ee(Qt),null;case 4:return tt(),null;case 10:return Oa(s.type),null;case 22:case 23:return ds(s),xf(),t!==null&&ee(Ci),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Oa(tn),null;case 25:return null;default:return null}}function Oy(t,s){switch(nf(s),s.tag){case 3:Oa(tn),tt();break;case 26:case 27:case 5:Un(s);break;case 4:tt();break;case 31:s.memoizedState!==null&&ds(s);break;case 13:ds(s);break;case 19:ee(Qt);break;case 10:Oa(s.type);break;case 22:case 23:ds(s),xf(),t!==null&&ee(Ci);break;case 24:Oa(tn)}}function Qo(t,s){try{var i=s.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var f=o.next;i=f;do{if((i.tag&t)===t){o=void 0;var m=i.create,b=i.inst;o=m(),b.destroy=o}i=i.next}while(i!==f)}}catch(T){pt(s,s.return,T)}}function Cr(t,s,i){try{var o=s.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&t)===t){var b=o.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,f=s;var O=i,Q=T;try{Q()}catch(ne){pt(f,O,ne)}}}o=o.next}while(o!==m)}}catch(ne){pt(s,s.return,ne)}}function Vy(t){var s=t.updateQueue;if(s!==null){var i=t.stateNode;try{N0(s,i)}catch(o){pt(t,t.return,o)}}}function Py(t,s,i){i.props=Oi(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(o){pt(t,s,o)}}function Xo(t,s){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof i=="function"?t.refCleanup=i(o):i.current=o}}catch(f){pt(t,s,f)}}function fa(t,s){var i=t.ref,o=t.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(f){pt(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){pt(t,s,f)}else i.current=null}function Ly(t){var s=t.type,i=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(f){pt(t,t.return,f)}}function Xf(t,s,i){try{var o=t.stateNode;hT(o,t.type,i,s),o[Le]=s}catch(f){pt(t,t.return,f)}}function Uy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Pr(t.type)||t.tag===4}function Wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Pr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,s,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(t),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bs));else if(o!==4&&(o===27&&Pr(t.type)&&(i=t.stateNode,s=null),t=t.child,t!==null))for(Jf(t,s,i),t=t.sibling;t!==null;)Jf(t,s,i),t=t.sibling}function Xu(t,s,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?i.insertBefore(t,s):i.appendChild(t);else if(o!==4&&(o===27&&Pr(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Xu(t,s,i),t=t.sibling;t!==null;)Xu(t,s,i),t=t.sibling}function zy(t){var s=t.stateNode,i=t.memoizedProps;try{for(var o=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Tn(s,o,i),s[we]=t,s[Le]=i}catch(m){pt(t,t.return,m)}}var za=!1,an=!1,Zf=!1,By=typeof WeakSet=="function"?WeakSet:Set,yn=null;function GE(t,s){if(t=t.containerInfo,bm=yd,t=Zg(t),Gh(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var b=0,T=-1,O=-1,Q=0,ne=0,ie=t,W=null;t:for(;;){for(var Z;ie!==i||f!==0&&ie.nodeType!==3||(T=b+f),ie!==m||o!==0&&ie.nodeType!==3||(O=b+o),ie.nodeType===3&&(b+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)W=ie,ie=Z;for(;;){if(ie===t)break t;if(W===i&&++Q===f&&(T=b),W===m&&++ne===o&&(O=b),(Z=ie.nextSibling)!==null)break;ie=W,W=ie.parentNode}ie=Z}i=T===-1||O===-1?null:{start:T,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(_m={focusedElem:t,selectionRange:i},yd=!1,yn=s;yn!==null;)if(s=yn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,yn=t;else for(;yn!==null;){switch(s=yn,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=s,f=m.memoizedProps,m=m.memoizedState,o=i.stateNode;try{var _e=Oi(i.type,f);t=o.getSnapshotBeforeUpdate(_e,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ce){pt(i,i.return,Ce)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,i=t.nodeType,i===9)Tm(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Tm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,yn=t;break}yn=s.return}}function Hy(t,s,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Ha(t,i),o&4&&Qo(5,i);break;case 1:if(Ha(t,i),o&4)if(t=i.stateNode,s===null)try{t.componentDidMount()}catch(b){pt(i,i.return,b)}else{var f=Oi(i.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){pt(i,i.return,b)}}o&64&&Vy(i),o&512&&Xo(i,i.return);break;case 3:if(Ha(t,i),o&64&&(t=i.updateQueue,t!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{N0(t,s)}catch(b){pt(i,i.return,b)}}break;case 27:s===null&&o&4&&zy(i);case 26:case 5:Ha(t,i),s===null&&o&4&&Ly(i),o&512&&Xo(i,i.return);break;case 12:Ha(t,i);break;case 31:Ha(t,i),o&4&&Gy(t,i);break;case 13:Ha(t,i),o&4&&$y(t,i),o&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=eT.bind(null,i),bT(t,i))));break;case 22:if(o=i.memoizedState!==null||za,!o){s=s!==null&&s.memoizedState!==null||an,f=za;var m=an;za=o,(an=s)&&!m?qa(t,i,(i.subtreeFlags&8772)!==0):Ha(t,i),za=f,an=m}break;case 30:break;default:Ha(t,i)}}function qy(t){var s=t.alternate;s!==null&&(t.alternate=null,qy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&vn(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Dt=null,Wn=!1;function Ba(t,s,i){for(i=i.child;i!==null;)Fy(t,s,i),i=i.sibling}function Fy(t,s,i){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(is,i)}catch{}switch(i.tag){case 26:an||fa(i,s),Ba(t,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:an||fa(i,s);var o=Dt,f=Wn;Pr(i.type)&&(Dt=i.stateNode,Wn=!1),Ba(t,s,i),rc(i.stateNode),Dt=o,Wn=f;break;case 5:an||fa(i,s);case 6:if(o=Dt,f=Wn,Dt=null,Ba(t,s,i),Dt=o,Wn=f,Dt!==null)if(Wn)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(i.stateNode)}catch(m){pt(i,s,m)}else try{Dt.removeChild(i.stateNode)}catch(m){pt(i,s,m)}break;case 18:Dt!==null&&(Wn?(t=Dt,Vx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Ul(t)):Vx(Dt,i.stateNode));break;case 4:o=Dt,f=Wn,Dt=i.stateNode.containerInfo,Wn=!0,Ba(t,s,i),Dt=o,Wn=f;break;case 0:case 11:case 14:case 15:Cr(2,i,s),an||Cr(4,i,s),Ba(t,s,i);break;case 1:an||(fa(i,s),o=i.stateNode,typeof o.componentWillUnmount=="function"&&Py(i,s,o)),Ba(t,s,i);break;case 21:Ba(t,s,i);break;case 22:an=(o=an)||i.memoizedState!==null,Ba(t,s,i),an=o;break;default:Ba(t,s,i)}}function Gy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ul(t)}catch(i){pt(s,s.return,i)}}}function $y(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ul(t)}catch(i){pt(s,s.return,i)}}function $E(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new By),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new By),s;default:throw Error(r(435,t.tag))}}function Wu(t,s){var i=$E(t);s.forEach(function(o){if(!i.has(o)){i.add(o);var f=tT.bind(null,t,o);o.then(f,f)}})}function Jn(t,s){var i=s.deletions;if(i!==null)for(var o=0;o<i.length;o++){var f=i[o],m=t,b=s,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(Pr(T.type)){Dt=T.stateNode,Wn=!1;break e}break;case 5:Dt=T.stateNode,Wn=!1;break e;case 3:case 4:Dt=T.stateNode.containerInfo,Wn=!0;break e}T=T.return}if(Dt===null)throw Error(r(160));Fy(m,b,f),Dt=null,Wn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Yy(s,t),s=s.sibling}var Ys=null;function Yy(t,s){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Jn(s,t),Zn(t),o&4&&(Cr(3,t,t.return),Qo(3,t),Cr(5,t,t.return));break;case 1:Jn(s,t),Zn(t),o&512&&(an||i===null||fa(i,i.return)),o&64&&za&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var f=Ys;if(Jn(s,t),Zn(t),o&512&&(an||i===null||fa(i,i.return)),o&4){var m=i!==null?i.memoizedState:null;if(o=t.memoizedState,i===null)if(o===null)if(t.stateNode===null){e:{o=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[en]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),Tn(m,o,i),m[we]=t,Tt(m),o=m;break e;case"link":var b=Yx("link","href",f).get(o+(i.href||""));if(b){for(var T=0;T<b.length;T++)if(m=b[T],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(T,1);break t}}m=f.createElement(o),Tn(m,o,i),f.head.appendChild(m);break;case"meta":if(b=Yx("meta","content",f).get(o+(i.content||""))){for(T=0;T<b.length;T++)if(m=b[T],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(T,1);break t}}m=f.createElement(o),Tn(m,o,i),f.head.appendChild(m);break;default:throw Error(r(468,o))}m[we]=t,Tt(m),o=m}t.stateNode=o}else Kx(f,t.type,t.stateNode);else t.stateNode=$x(f,o,t.memoizedProps);else m!==o?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,o===null?Kx(f,t.type,t.stateNode):$x(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Xf(t,t.memoizedProps,i.memoizedProps)}break;case 27:Jn(s,t),Zn(t),o&512&&(an||i===null||fa(i,i.return)),i!==null&&o&4&&Xf(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Jn(s,t),Zn(t),o&512&&(an||i===null||fa(i,i.return)),t.flags&32){f=t.stateNode;try{Xn(f,"")}catch(_e){pt(t,t.return,_e)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,Xf(t,f,i!==null?i.memoizedProps:f)),o&1024&&(Zf=!0);break;case 6:if(Jn(s,t),Zn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,i=t.stateNode;try{i.nodeValue=o}catch(_e){pt(t,t.return,_e)}}break;case 3:if(fd=null,f=Ys,Ys=dd(s.containerInfo),Jn(s,t),Ys=f,Zn(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Ul(s.containerInfo)}catch(_e){pt(t,t.return,_e)}Zf&&(Zf=!1,Ky(t));break;case 4:o=Ys,Ys=dd(t.stateNode.containerInfo),Jn(s,t),Zn(t),Ys=o;break;case 12:Jn(s,t),Zn(t);break;case 31:Jn(s,t),Zn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Wu(t,o)));break;case 13:Jn(s,t),Zn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Zu=Jt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Wu(t,o)));break;case 22:f=t.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,Q=za,ne=an;if(za=Q||f,an=ne||O,Jn(s,t),an=ne,za=Q,Zn(t),o&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(i===null||O||za||an||Vi(t)),i=null,s=t;;){if(s.tag===5||s.tag===26){if(i===null){O=i=s;try{if(m=O.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=O.stateNode;var ie=O.memoizedProps.style,W=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(_e){pt(O,O.return,_e)}}}else if(s.tag===6){if(i===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(_e){pt(O,O.return,_e)}}}else if(s.tag===18){if(i===null){O=s;try{var Z=O.stateNode;f?Px(Z,!0):Px(O.stateNode,!1)}catch(_e){pt(O,O.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Wu(t,i))));break;case 19:Jn(s,t),Zn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Wu(t,o)));break;case 30:break;case 21:break;default:Jn(s,t),Zn(t)}}function Zn(t){var s=t.flags;if(s&2){try{for(var i,o=t.return;o!==null;){if(Uy(o)){i=o;break}o=o.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var f=i.stateNode,m=Wf(t);Xu(t,m,f);break;case 5:var b=i.stateNode;i.flags&32&&(Xn(b,""),i.flags&=-33);var T=Wf(t);Xu(t,T,b);break;case 3:case 4:var O=i.stateNode.containerInfo,Q=Wf(t);Jf(t,Q,O);break;default:throw Error(r(161))}}catch(ne){pt(t,t.return,ne)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Ky(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Ky(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ha(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Hy(t,s.alternate,s),s=s.sibling}function Vi(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Cr(4,s,s.return),Vi(s);break;case 1:fa(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&Py(s,s.return,i),Vi(s);break;case 27:rc(s.stateNode);case 26:case 5:fa(s,s.return),Vi(s);break;case 22:s.memoizedState===null&&Vi(s);break;case 30:Vi(s);break;default:Vi(s)}t=t.sibling}}function qa(t,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,f=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:qa(f,m,i),Qo(4,m);break;case 1:if(qa(f,m,i),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){pt(o,o.return,Q)}if(o=m,f=o.updateQueue,f!==null){var T=o.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)S0(O[f],T)}catch(Q){pt(o,o.return,Q)}}i&&b&64&&Vy(m),Xo(m,m.return);break;case 27:zy(m);case 26:case 5:qa(f,m,i),i&&o===null&&b&4&&Ly(m),Xo(m,m.return);break;case 12:qa(f,m,i);break;case 31:qa(f,m,i),i&&b&4&&Gy(f,m);break;case 13:qa(f,m,i),i&&b&4&&$y(f,m);break;case 22:m.memoizedState===null&&qa(f,m,i),Xo(m,m.return);break;case 30:break;default:qa(f,m,i)}s=s.sibling}}function em(t,s){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Vo(i))}function tm(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Vo(t))}function Ks(t,s,i,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Qy(t,s,i,o),s=s.sibling}function Qy(t,s,i,o){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ks(t,s,i,o),f&2048&&Qo(9,s);break;case 1:Ks(t,s,i,o);break;case 3:Ks(t,s,i,o),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Vo(t)));break;case 12:if(f&2048){Ks(t,s,i,o),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,T=m.onPostCommit;typeof T=="function"&&T(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){pt(s,s.return,O)}}else Ks(t,s,i,o);break;case 31:Ks(t,s,i,o);break;case 13:Ks(t,s,i,o);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?Ks(t,s,i,o):Wo(t,s):m._visibility&2?Ks(t,s,i,o):(m._visibility|=2,jl(t,s,i,o,(s.subtreeFlags&10256)!==0||!1)),f&2048&&em(b,s);break;case 24:Ks(t,s,i,o),f&2048&&tm(s.alternate,s);break;default:Ks(t,s,i,o)}}function jl(t,s,i,o,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,b=s,T=i,O=o,Q=b.flags;switch(b.tag){case 0:case 11:case 15:jl(m,b,T,O,f),Qo(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?jl(m,b,T,O,f):Wo(m,b):(ne._visibility|=2,jl(m,b,T,O,f)),f&&Q&2048&&em(b.alternate,b);break;case 24:jl(m,b,T,O,f),f&&Q&2048&&tm(b.alternate,b);break;default:jl(m,b,T,O,f)}s=s.sibling}}function Wo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=t,o=s,f=o.flags;switch(o.tag){case 22:Wo(i,o),f&2048&&em(o.alternate,o);break;case 24:Wo(i,o),f&2048&&tm(o.alternate,o);break;default:Wo(i,o)}s=s.sibling}}var Jo=8192;function Rl(t,s,i){if(t.subtreeFlags&Jo)for(t=t.child;t!==null;)Xy(t,s,i),t=t.sibling}function Xy(t,s,i){switch(t.tag){case 26:Rl(t,s,i),t.flags&Jo&&t.memoizedState!==null&&DT(i,Ys,t.memoizedState,t.memoizedProps);break;case 5:Rl(t,s,i);break;case 3:case 4:var o=Ys;Ys=dd(t.stateNode.containerInfo),Rl(t,s,i),Ys=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Jo,Jo=16777216,Rl(t,s,i),Jo=o):Rl(t,s,i));break;default:Rl(t,s,i)}}function Wy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Zo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var o=s[i];yn=o,Zy(o,t)}Wy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jy(t),t=t.sibling}function Jy(t){switch(t.tag){case 0:case 11:case 15:Zo(t),t.flags&2048&&Cr(9,t,t.return);break;case 3:Zo(t);break;case 12:Zo(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Ju(t)):Zo(t);break;default:Zo(t)}}function Ju(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var o=s[i];yn=o,Zy(o,t)}Wy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Cr(8,s,s.return),Ju(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Ju(s));break;default:Ju(s)}t=t.sibling}}function Zy(t,s){for(;yn!==null;){var i=yn;switch(i.tag){case 0:case 11:case 15:Cr(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Vo(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,yn=o;else e:for(i=t;yn!==null;){o=yn;var f=o.sibling,m=o.return;if(qy(o),o===i){yn=null;break e}if(f!==null){f.return=m,yn=f;break e}yn=m}}}var YE={getCacheForType:function(t){var s=wn(tn),i=s.data.get(t);return i===void 0&&(i=t(),s.data.set(t,i)),i},cacheSignal:function(){return wn(tn).controller.signal}},KE=typeof WeakMap=="function"?WeakMap:Map,dt=0,_t=null,Qe=null,We=0,mt=0,hs=null,Ir=!1,Cl=!1,nm=!1,Fa=0,qt=0,Dr=0,Pi=0,sm=0,fs=0,Il=0,ec=null,es=null,am=!1,Zu=0,ex=0,ed=1/0,td=null,Mr=null,hn=0,kr=null,Dl=null,Ga=0,rm=0,im=null,tx=null,tc=0,lm=null;function ms(){return(dt&2)!==0&&We!==0?We&-We:Y.T!==null?fm():Se()}function nx(){if(fs===0)if((We&536870912)===0||st){var t=Sa;Sa<<=1,(Sa&3932160)===0&&(Sa=262144),fs=t}else fs=536870912;return t=us.current,t!==null&&(t.flags|=32),fs}function ts(t,s,i){(t===_t&&(mt===2||mt===9)||t.cancelPendingCommit!==null)&&(Ml(t,0),Or(t,We,fs,!1)),Na(t,i),((dt&2)===0||t!==_t)&&(t===_t&&((dt&2)===0&&(Pi|=i),qt===4&&Or(t,We,fs,!1)),ma(t))}function sx(t,s,i){if((dt&6)!==0)throw Error(r(327));var o=!i&&(s&127)===0&&(s&t.expiredLanes)===0||ls(t,s),f=o?WE(t,s):cm(t,s,!0),m=o;do{if(f===0){Cl&&!o&&Or(t,s,0,!1);break}else{if(i=t.current.alternate,m&&!QE(i)){f=cm(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var T=t;f=ec;var O=T.current.memoizedState.isDehydrated;if(O&&(Ml(T,b).flags|=256),b=cm(T,b,!1),b!==2){if(nm&&!O){T.errorRecoveryDisabledLanes|=m,Pi|=m,f=4;break e}m=es,es=f,m!==null&&(es===null?es=m:es.push.apply(es,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){Ml(t,0),Or(t,s,0,!0);break}e:{switch(o=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Or(o,s,fs,!Ir);break e;case 2:es=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Zu+300-Jt(),10<f)){if(Or(o,s,fs,!Ir),Yn(o,0,!0)!==0)break e;Ga=s,o.timeoutHandle=kx(ax.bind(null,o,i,es,td,am,s,fs,Pi,Il,Ir,m,"Throttled",-0,0),f);break e}ax(o,i,es,td,am,s,fs,Pi,Il,Ir,m,null,-0,0)}}break}while(!0);ma(t)}function ax(t,s,i,o,f,m,b,T,O,Q,ne,ie,W,Z){if(t.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bs},Xy(s,m,ie);var _e=(m&62914560)===m?Zu-Jt():(m&4194048)===m?ex-Jt():0;if(_e=MT(ie,_e),_e!==null){Ga=m,t.cancelPendingCommit=_e(hx.bind(null,t,s,m,i,o,f,b,T,O,ne,ie,null,W,Z)),Or(t,m,b,!Q);return}}hx(t,s,m,i,o,f,b,T,O)}function QE(t){for(var s=t;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var f=i[o],m=f.getSnapshot;f=f.value;try{if(!os(m(),f))return!1}catch{return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Or(t,s,i,o){s&=~sm,s&=~Pi,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var f=s;0<f;){var m=31-kt(f),b=1<<m;o[m]=-1,f&=~b}i!==0&&sa(t,i,s)}function nd(){return(dt&6)===0?(nc(0),!1):!0}function om(){if(Qe!==null){if(mt===0)var t=Qe.return;else t=Qe,ka=ji=null,Tf(t),El=null,Lo=0,t=Qe;for(;t!==null;)Oy(t.alternate,t),t=t.return;Qe=null}}function Ml(t,s){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,pT(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Ga=0,om(),_t=t,Qe=i=Da(t.current,null),We=s,mt=0,hs=null,Ir=!1,Cl=ls(t,s),nm=!1,Il=fs=sm=Pi=Dr=qt=0,es=ec=null,am=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var f=31-kt(o),m=1<<f;s|=t[f],o&=~m}return Fa=s,Eu(),i}function rx(t,s){Fe=null,Y.H=$o,s===wl||s===Iu?(s=_0(),mt=3):s===hf?(s=_0(),mt=4):mt=s===zf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,hs=s,Qe===null&&(qt=1,Gu(t,Is(s,t.current)))}function ix(){var t=us.current;return t===null?!0:(We&4194048)===We?Os===null:(We&62914560)===We||(We&536870912)!==0?t===Os:!1}function lx(){var t=Y.H;return Y.H=$o,t===null?$o:t}function ox(){var t=Y.A;return Y.A=YE,t}function sd(){qt=4,Ir||(We&4194048)!==We&&us.current!==null||(Cl=!0),(Dr&134217727)===0&&(Pi&134217727)===0||_t===null||Or(_t,We,fs,!1)}function cm(t,s,i){var o=dt;dt|=2;var f=lx(),m=ox();(_t!==t||We!==s)&&(td=null,Ml(t,s)),s=!1;var b=qt;e:do try{if(mt!==0&&Qe!==null){var T=Qe,O=hs;switch(mt){case 8:om(),b=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(s=!0);var Q=mt;if(mt=0,hs=null,kl(t,T,O,Q),i&&Cl){b=0;break e}break;default:Q=mt,mt=0,hs=null,kl(t,T,O,Q)}}XE(),b=qt;break}catch(ne){rx(t,ne)}while(!0);return s&&t.shellSuspendCounter++,ka=ji=null,dt=o,Y.H=f,Y.A=m,Qe===null&&(_t=null,We=0,Eu()),b}function XE(){for(;Qe!==null;)cx(Qe)}function WE(t,s){var i=dt;dt|=2;var o=lx(),f=ox();_t!==t||We!==s?(td=null,ed=Jt()+500,Ml(t,s)):Cl=ls(t,s);e:do try{if(mt!==0&&Qe!==null){s=Qe;var m=hs;t:switch(mt){case 1:mt=0,hs=null,kl(t,s,m,1);break;case 2:case 9:if(v0(m)){mt=0,hs=null,ux(s);break}s=function(){mt!==2&&mt!==9||_t!==t||(mt=7),ma(t)},m.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:v0(m)?(mt=0,hs=null,ux(s)):(mt=0,hs=null,kl(t,s,m,7));break;case 5:var b=null;switch(Qe.tag){case 26:b=Qe.memoizedState;case 5:case 27:var T=Qe;if(b?Qx(b):T.stateNode.complete){mt=0,hs=null;var O=T.sibling;if(O!==null)Qe=O;else{var Q=T.return;Q!==null?(Qe=Q,ad(Q)):Qe=null}break t}}mt=0,hs=null,kl(t,s,m,5);break;case 6:mt=0,hs=null,kl(t,s,m,6);break;case 8:om(),qt=6;break e;default:throw Error(r(462))}}JE();break}catch(ne){rx(t,ne)}while(!0);return ka=ji=null,Y.H=o,Y.A=f,dt=i,Qe!==null?0:(_t=null,We=0,Eu(),qt)}function JE(){for(;Qe!==null&&!Ji();)cx(Qe)}function cx(t){var s=My(t.alternate,t,Fa);t.memoizedProps=t.pendingProps,s===null?ad(t):Qe=s}function ux(t){var s=t,i=s.alternate;switch(s.tag){case 15:case 0:s=Ay(i,s,s.pendingProps,s.type,void 0,We);break;case 11:s=Ay(i,s,s.pendingProps,s.type.render,s.ref,We);break;case 5:Tf(s);default:Oy(i,s),s=Qe=o0(s,Fa),s=My(i,s,Fa)}t.memoizedProps=t.pendingProps,s===null?ad(t):Qe=s}function kl(t,s,i,o){ka=ji=null,Tf(s),El=null,Lo=0;var f=s.return;try{if(zE(t,f,s,i,We)){qt=1,Gu(t,Is(i,t.current)),Qe=null;return}}catch(m){if(f!==null)throw Qe=f,m;qt=1,Gu(t,Is(i,t.current)),Qe=null;return}s.flags&32768?(st||o===1?t=!0:Cl||(We&536870912)!==0?t=!1:(Ir=t=!0,(o===2||o===9||o===3||o===6)&&(o=us.current,o!==null&&o.tag===13&&(o.flags|=16384))),dx(s,t)):ad(s)}function ad(t){var s=t;do{if((s.flags&32768)!==0){dx(s,Ir);return}t=s.return;var i=qE(s.alternate,s,Fa);if(i!==null){Qe=i;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=t}while(s!==null);qt===0&&(qt=5)}function dx(t,s){do{var i=FE(t.alternate,t);if(i!==null){i.flags&=32767,Qe=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=i}while(t!==null);qt=6,Qe=null}function hx(t,s,i,o,f,m,b,T,O){t.cancelPendingCommit=null;do rd();while(hn!==0);if((dt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Xh,vo(t,i,m,b,T,O),t===_t&&(Qe=_t=null,We=0),Dl=s,kr=t,Ga=i,rm=m,im=f,tx=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,nT(ws,function(){return yx(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,f=oe.p,oe.p=2,b=dt,dt|=4;try{GE(t,s,i)}finally{dt=b,oe.p=f,Y.T=o}}hn=1,fx(),mx(),px()}}function fx(){if(hn===1){hn=0;var t=kr,s=Dl,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=Y.T,Y.T=null;var o=oe.p;oe.p=2;var f=dt;dt|=4;try{Yy(s,t);var m=_m,b=Zg(t.containerInfo),T=m.focusedElem,O=m.selectionRange;if(b!==T&&T&&T.ownerDocument&&Jg(T.ownerDocument.documentElement,T)){if(O!==null&&Gh(T)){var Q=O.start,ne=O.end;if(ne===void 0&&(ne=Q),"selectionStart"in T)T.selectionStart=Q,T.selectionEnd=Math.min(ne,T.value.length);else{var ie=T.ownerDocument||document,W=ie&&ie.defaultView||window;if(W.getSelection){var Z=W.getSelection(),_e=T.textContent.length,Ce=Math.min(O.start,_e),bt=O.end===void 0?Ce:Math.min(O.end,_e);!Z.extend&&Ce>bt&&(b=bt,bt=Ce,Ce=b);var F=Wg(T,Ce),H=Wg(T,bt);if(F&&H&&(Z.rangeCount!==1||Z.anchorNode!==F.node||Z.anchorOffset!==F.offset||Z.focusNode!==H.node||Z.focusOffset!==H.offset)){var K=ie.createRange();K.setStart(F.node,F.offset),Z.removeAllRanges(),Ce>bt?(Z.addRange(K),Z.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),Z.addRange(K))}}}}for(ie=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ae=ie[T];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}yd=!!bm,_m=bm=null}finally{dt=f,oe.p=o,Y.T=i}}t.current=s,hn=2}}function mx(){if(hn===2){hn=0;var t=kr,s=Dl,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=Y.T,Y.T=null;var o=oe.p;oe.p=2;var f=dt;dt|=4;try{Hy(t,s.alternate,s)}finally{dt=f,oe.p=o,Y.T=i}}hn=3}}function px(){if(hn===4||hn===3){hn=0,ur();var t=kr,s=Dl,i=Ga,o=tx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?hn=5:(hn=0,Dl=kr=null,gx(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Mr=null),ye(i),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(is,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=Y.T,f=oe.p,oe.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<o.length;b++){var T=o[b];m(T.value,{componentStack:T.stack})}}finally{Y.T=s,oe.p=f}}(Ga&3)!==0&&rd(),ma(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===lm?tc++:(tc=0,lm=t):tc=0,nc(0)}}function gx(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Vo(s)))}function rd(){return fx(),mx(),px(),yx()}function yx(){if(hn!==5)return!1;var t=kr,s=rm;rm=0;var i=ye(Ga),o=Y.T,f=oe.p;try{oe.p=32>i?32:i,Y.T=null,i=im,im=null;var m=kr,b=Ga;if(hn=0,Dl=kr=null,Ga=0,(dt&6)!==0)throw Error(r(331));var T=dt;if(dt|=4,Jy(m.current),Qy(m,m.current,b,i),dt=T,nc(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(is,m)}catch{}return!0}finally{oe.p=f,Y.T=o,gx(t,s)}}function xx(t,s,i){s=Is(i,s),s=Uf(t.stateNode,s,2),t=Ar(t,s,2),t!==null&&(Na(t,2),ma(t))}function pt(t,s,i){if(t.tag===3)xx(t,t,i);else for(;s!==null;){if(s.tag===3){xx(s,t,i);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Mr===null||!Mr.has(o))){t=Is(i,t),i=vy(2),o=Ar(s,i,2),o!==null&&(by(i,o,s,t),Na(o,2),ma(o));break}}s=s.return}}function um(t,s,i){var o=t.pingCache;if(o===null){o=t.pingCache=new KE;var f=new Set;o.set(s,f)}else f=o.get(s),f===void 0&&(f=new Set,o.set(s,f));f.has(i)||(nm=!0,f.add(i),t=ZE.bind(null,t,s,i),s.then(t,t))}function ZE(t,s,i){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,_t===t&&(We&i)===i&&(qt===4||qt===3&&(We&62914560)===We&&300>Jt()-Zu?(dt&2)===0&&Ml(t,0):sm|=i,Il===We&&(Il=0)),ma(t)}function vx(t,s){s===0&&(s=nl()),t=Si(t,s),t!==null&&(Na(t,s),ma(t))}function eT(t){var s=t.memoizedState,i=0;s!==null&&(i=s.retryLane),vx(t,i)}function tT(t,s){var i=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),vx(t,i)}function nT(t,s){return Pt(t,s)}var id=null,Ol=null,dm=!1,ld=!1,hm=!1,Vr=0;function ma(t){t!==Ol&&t.next===null&&(Ol===null?id=Ol=t:Ol=Ol.next=t),ld=!0,dm||(dm=!0,aT())}function nc(t,s){if(!hm&&ld){hm=!0;do for(var i=!1,o=id;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var b=o.suspendedLanes,T=o.pingedLanes;m=(1<<31-kt(42|t)+1)-1,m&=f&~(b&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Ex(o,m))}else m=We,m=Yn(o,o===_t?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ls(o,m)||(i=!0,Ex(o,m));o=o.next}while(i);hm=!1}}function sT(){bx()}function bx(){ld=dm=!1;var t=0;Vr!==0&&mT()&&(t=Vr);for(var s=Jt(),i=null,o=id;o!==null;){var f=o.next,m=_x(o,s);m===0?(o.next=null,i===null?id=f:i.next=f,f===null&&(Ol=i)):(i=o,(t!==0||(m&3)!==0)&&(ld=!0)),o=f}hn!==0&&hn!==5||nc(t),Vr!==0&&(Vr=0)}function _x(t,s){for(var i=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-kt(m),T=1<<b,O=f[b];O===-1?((T&i)===0||(T&o)!==0)&&(f[b]=xo(T,s)):O<=s&&(t.expiredLanes|=T),m&=~T}if(s=_t,i=We,i=Yn(t,t===s?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,i===0||t===s&&(mt===2||mt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Cn(o),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||ls(t,i)){if(s=i&-i,s===t.callbackPriority)return s;switch(o!==null&&Cn(o),ye(i)){case 2:case 8:i=na;break;case 32:i=ws;break;case 268435456:i=dr;break;default:i=ws}return o=wx.bind(null,t),i=Pt(i,o),t.callbackPriority=s,t.callbackNode=i,s}return o!==null&&o!==null&&Cn(o),t.callbackPriority=2,t.callbackNode=null,2}function wx(t,s){if(hn!==0&&hn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(rd()&&t.callbackNode!==i)return null;var o=We;return o=Yn(t,t===_t?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(sx(t,o,s),_x(t,Jt()),t.callbackNode!=null&&t.callbackNode===i?wx.bind(null,t):null)}function Ex(t,s){if(rd())return null;sx(t,s,!0)}function aT(){gT(function(){(dt&6)!==0?Pt(rs,sT):bx()})}function fm(){if(Vr===0){var t=bl;t===0&&(t=Es,Es<<=1,(Es&261888)===0&&(Es=256)),Vr=t}return Vr}function Tx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rl(""+t)}function Sx(t,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,t.id&&i.setAttribute("form",t.id),s.parentNode.insertBefore(i,s),t=new FormData(t),i.parentNode.removeChild(i),t}function rT(t,s,i,o,f){if(s==="submit"&&i&&i.stateNode===f){var m=Tx((f[Le]||null).action),b=o.submitter;b&&(s=(s=b[Le]||null)?Tx(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var T=new la("action","action",null,o,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vr!==0){var O=b?Sx(f,b):new FormData(f);Mf(i,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(T.preventDefault(),O=b?Sx(f,b):new FormData(f),Mf(i,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var mm=0;mm<Qh.length;mm++){var pm=Qh[mm],iT=pm.toLowerCase(),lT=pm[0].toUpperCase()+pm.slice(1);$s(iT,"on"+lT)}$s(n0,"onAnimationEnd"),$s(s0,"onAnimationIteration"),$s(a0,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(EE,"onTransitionRun"),$s(TE,"onTransitionStart"),$s(SE,"onTransitionCancel"),$s(r0,"onTransitionEnd"),lt("onMouseEnter",["mouseout","mouseover"]),lt("onMouseLeave",["mouseout","mouseover"]),lt("onPointerEnter",["pointerout","pointerover"]),lt("onPointerLeave",["pointerout","pointerover"]),ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sc));function Nx(t,s){s=(s&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],f=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var b=o.length-1;0<=b;b--){var T=o[b],O=T.instance,Q=T.currentTarget;if(T=T.listener,O!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Q;try{m(f)}catch(ne){wu(ne)}f.currentTarget=null,m=O}else for(b=0;b<o.length;b++){if(T=o[b],O=T.instance,Q=T.currentTarget,T=T.listener,O!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Q;try{m(f)}catch(ne){wu(ne)}f.currentTarget=null,m=O}}}}function Xe(t,s){var i=s[Pe];i===void 0&&(i=s[Pe]=new Set);var o=t+"__bubble";i.has(o)||(Ax(s,t,2,!1),i.add(o))}function gm(t,s,i){var o=0;s&&(o|=4),Ax(i,t,o,s)}var od="_reactListening"+Math.random().toString(36).slice(2);function ym(t){if(!t[od]){t[od]=!0,Aa.forEach(function(i){i!=="selectionchange"&&(oT.has(i)||gm(i,!1,t),gm(i,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[od]||(s[od]=!0,gm("selectionchange",!1,s))}}function Ax(t,s,i,o){switch(nv(s)){case 2:var f=VT;break;case 8:f=PT;break;default:f=Dm}i=f.bind(null,s,i,t),f=void 0,!yi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(s,i,{capture:!0,passive:f}):t.addEventListener(s,i,!0):f!==void 0?t.addEventListener(s,i,{passive:f}):t.addEventListener(s,i,!1)}function xm(t,s,i,o,f){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var T=o.stateNode.containerInfo;if(T===f)break;if(b===4)for(b=o.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;T!==null;){if(b=zt(T),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){o=m=b;continue e}T=T.parentNode}}o=o.return}yr(function(){var Q=m,ne=As(i),ie=[];e:{var W=i0.get(t);if(W!==void 0){var Z=la,_e=t;switch(t){case"keypress":if(vi(i)===0)break e;case"keydown":case"keyup":Z=vu;break;case"focusin":_e="focus",Z=_i;break;case"focusout":_e="blur",Z=_i;break;case"beforeblur":case"afterblur":Z=_i;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=x;break;case n0:case s0:case a0:Z=hu;break;case r0:Z=S;break;case"scroll":case"scrollend":Z=Ao;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ia;break;case"toggle":case"beforetoggle":Z=qe}var Ce=(s&4)!==0,bt=!Ce&&(t==="scroll"||t==="scrollend"),F=Ce?W!==null?W+"Capture":null:W;Ce=[];for(var H=Q,K;H!==null;){var ae=H;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||F===null||(ae=Hs(H,F),ae!=null&&Ce.push(ac(H,ae,K))),bt)break;H=H.return}0<Ce.length&&(W=new Z(W,_e,null,i,ne),ie.push({event:W,listeners:Ce}))}}if((s&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&i!==To&&(_e=i.relatedTarget||i.fromElement)&&(zt(_e)||_e[Ke]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(_e=i.relatedTarget||i.toElement,Z=Q,_e=_e?zt(_e):null,_e!==null&&(bt=u(_e),Ce=_e.tag,_e!==bt||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(Z=null,_e=Q),Z!==_e)){if(Ce=jo,ae="onMouseLeave",F="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(Ce=Ia,ae="onPointerLeave",F="onPointerEnter",H="pointer"),bt=Z==null?W:$t(Z),K=_e==null?W:$t(_e),W=new Ce(ae,H+"leave",Z,i,ne),W.target=bt,W.relatedTarget=K,ae=null,zt(ne)===Q&&(Ce=new Ce(F,H+"enter",_e,i,ne),Ce.target=K,Ce.relatedTarget=bt,ae=Ce),bt=ae,Z&&_e)t:{for(Ce=cT,F=Z,H=_e,K=0,ae=F;ae;ae=Ce(ae))K++;ae=0;for(var Ne=H;Ne;Ne=Ce(Ne))ae++;for(;0<K-ae;)F=Ce(F),K--;for(;0<ae-K;)H=Ce(H),ae--;for(;K--;){if(F===H||H!==null&&F===H.alternate){Ce=F;break t}F=Ce(F),H=Ce(H)}Ce=null}else Ce=null;Z!==null&&jx(ie,W,Z,Ce,!1),_e!==null&&bt!==null&&jx(ie,bt,_e,Ce,!0)}}e:{if(W=Q?$t(Q):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var ot=Gg;else if(qg(W))if($g)ot=bE;else{ot=xE;var Ee=yE}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Q&&al(Q.elementType)&&(ot=Gg):ot=vE;if(ot&&(ot=ot(t,Q))){Fg(ie,ot,i,ne);break e}Ee&&Ee(t,W,Q),t==="focusout"&&Q&&W.type==="number"&&Q.memoizedProps.value!=null&&_o(W,"number",W.value)}switch(Ee=Q?$t(Q):window,t){case"focusin":(qg(Ee)||Ee.contentEditable==="true")&&(hl=Ee,$h=Q,Mo=null);break;case"focusout":Mo=$h=hl=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,e0(ie,i,ne);break;case"selectionchange":if(wE)break;case"keydown":case"keyup":e0(ie,i,ne)}var Ge;if(ut)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else dl?wi(t,i)&&(Je="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Je="onCompositionStart");Je&&(ua&&i.locale!=="ko"&&(dl||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&dl&&(Ge=No()):(ia=ne,So="value"in ia?ia.value:ia.textContent,dl=!0)),Ee=cd(Q,Je),0<Ee.length&&(Je=new ca(Je,t,null,i,ne),ie.push({event:Je,listeners:Ee}),Ge?Je.data=Ge:(Ge=ul(i),Ge!==null&&(Je.data=Ge)))),(Ge=Rs?fE(t,i):mE(t,i))&&(Je=cd(Q,"onBeforeInput"),0<Je.length&&(Ee=new ca("onBeforeInput","beforeinput",null,i,ne),ie.push({event:Ee,listeners:Je}),Ee.data=Ge)),rT(ie,t,Q,i,ne)}Nx(ie,s)})}function ac(t,s,i){return{instance:t,listener:s,currentTarget:i}}function cd(t,s){for(var i=s+"Capture",o=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Hs(t,i),f!=null&&o.unshift(ac(t,f,m)),f=Hs(t,s),f!=null&&o.push(ac(t,f,m))),t.tag===3)return o;t=t.return}return[]}function cT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jx(t,s,i,o,f){for(var m=s._reactName,b=[];i!==null&&i!==o;){var T=i,O=T.alternate,Q=T.stateNode;if(T=T.tag,O!==null&&O===o)break;T!==5&&T!==26&&T!==27||Q===null||(O=Q,f?(Q=Hs(i,m),Q!=null&&b.unshift(ac(i,Q,O))):f||(Q=Hs(i,m),Q!=null&&b.push(ac(i,Q,O)))),i=i.return}b.length!==0&&t.push({event:s,listeners:b})}var uT=/\r\n?/g,dT=/\u0000|\uFFFD/g;function Rx(t){return(typeof t=="string"?t:""+t).replace(uT,`
`).replace(dT,"")}function Cx(t,s){return s=Rx(s),Rx(t)===s}function vt(t,s,i,o,f,m){switch(i){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Xn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Xn(t,""+o);break;case"className":Dn(t,"class",o);break;case"tabIndex":Dn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Dn(t,i,o);break;case"style":Eo(t,o,m);break;case"data":if(s!=="object"){Dn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||i!=="href")){t.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=rl(""+o),t.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(s!=="input"&&vt(t,s,"name",f.name,f,null),vt(t,s,"formEncType",f.formEncType,f,null),vt(t,s,"formMethod",f.formMethod,f,null),vt(t,s,"formTarget",f.formTarget,f,null)):(vt(t,s,"encType",f.encType,f,null),vt(t,s,"method",f.method,f,null),vt(t,s,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=rl(""+o),t.setAttribute(i,o);break;case"onClick":o!=null&&(t.onclick=Bs);break;case"onScroll":o!=null&&Xe("scroll",t);break;case"onScrollEnd":o!=null&&Xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}i=rl(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""+o):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":o===!0?t.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,o):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(i,o):t.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(i):t.setAttribute(i,o);break;case"popover":Xe("beforetoggle",t),Xe("toggle",t),Kn(t,"popover",o);break;case"xlinkActuate":Bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Bt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Bt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Bt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Bt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Kn(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=cu.get(i)||i,Kn(t,i,o))}}function vm(t,s,i,o,f,m){switch(i){case"style":Eo(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"children":typeof o=="string"?Xn(t,o):(typeof o=="number"||typeof o=="bigint")&&Xn(t,""+o);break;case"onScroll":o!=null&&Xe("scroll",t);break;case"onScrollEnd":o!=null&&Xe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ja.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),s=i.slice(2,f?i.length-7:void 0),m=t[Le]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(s,o,f);break e}i in t?t[i]=o:o===!0?t.setAttribute(i,""):Kn(t,i,o)}}}function Tn(t,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",t),Xe("load",t);var o=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var b=i[m];if(b!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:vt(t,s,m,b,i,null)}}f&&vt(t,s,"srcSet",i.srcSet,i,null),o&&vt(t,s,"src",i.src,i,null);return;case"input":Xe("invalid",t);var T=m=b=f=null,O=null,Q=null;for(o in i)if(i.hasOwnProperty(o)){var ne=i[o];if(ne!=null)switch(o){case"name":f=ne;break;case"type":b=ne;break;case"checked":O=ne;break;case"defaultChecked":Q=ne;break;case"value":m=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,s));break;default:vt(t,s,o,ne,i,null)}}iu(t,m,T,O,Q,b,f,!1);return;case"select":Xe("invalid",t),o=b=m=null;for(f in i)if(i.hasOwnProperty(f)&&(T=i[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":b=T;break;case"multiple":o=T;default:vt(t,s,f,T,i,null)}s=m,i=b,t.multiple=!!o,s!=null?fr(t,!!o,s,!1):i!=null&&fr(t,!!o,i,!0);return;case"textarea":Xe("invalid",t),m=f=o=null;for(b in i)if(i.hasOwnProperty(b)&&(T=i[b],T!=null))switch(b){case"value":o=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:vt(t,s,b,T,i,null)}mr(t,o,f,m);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(o=i[O],o!=null))switch(O){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:vt(t,s,O,o,i,null)}return;case"dialog":Xe("beforetoggle",t),Xe("toggle",t),Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":Xe("load",t);break;case"video":case"audio":for(o=0;o<sc.length;o++)Xe(sc[o],t);break;case"image":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"embed":case"source":case"link":Xe("error",t),Xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in i)if(i.hasOwnProperty(Q)&&(o=i[Q],o!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:vt(t,s,Q,o,i,null)}return;default:if(al(s)){for(ne in i)i.hasOwnProperty(ne)&&(o=i[ne],o!==void 0&&vm(t,s,ne,o,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(o=i[T],o!=null&&vt(t,s,T,o,i,null))}function hT(t,s,i,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,T=null,O=null,Q=null,ne=null;for(Z in i){var ie=i[Z];if(i.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=ie;default:o.hasOwnProperty(Z)||vt(t,s,Z,null,o,ie)}}for(var W in o){var Z=o[W];if(ie=i[W],o.hasOwnProperty(W)&&(Z!=null||ie!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":Q=Z;break;case"defaultChecked":ne=Z;break;case"value":b=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==ie&&vt(t,s,W,Z,o,ie)}}sl(t,b,T,O,Q,ne,m,f);return;case"select":Z=b=T=W=null;for(m in i)if(O=i[m],i.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Z=O;default:o.hasOwnProperty(m)||vt(t,s,m,null,o,O)}for(f in o)if(m=o[f],O=i[f],o.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":W=m;break;case"defaultValue":T=m;break;case"multiple":b=m;default:m!==O&&vt(t,s,f,m,o,O)}s=T,i=b,o=Z,W!=null?fr(t,!!i,W,!1):!!o!=!!i&&(s!=null?fr(t,!!i,s,!0):fr(t,!!i,i?[]:"",!1));return;case"textarea":Z=W=null;for(T in i)if(f=i[T],i.hasOwnProperty(T)&&f!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:vt(t,s,T,null,o,f)}for(b in o)if(f=o[b],m=i[b],o.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&vt(t,s,b,f,o,m)}lu(t,W,Z);return;case"option":for(var _e in i)if(W=i[_e],i.hasOwnProperty(_e)&&W!=null&&!o.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:vt(t,s,_e,null,o,W)}for(O in o)if(W=o[O],Z=i[O],o.hasOwnProperty(O)&&W!==Z&&(W!=null||Z!=null))switch(O){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:vt(t,s,O,W,o,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in i)W=i[Ce],i.hasOwnProperty(Ce)&&W!=null&&!o.hasOwnProperty(Ce)&&vt(t,s,Ce,null,o,W);for(Q in o)if(W=o[Q],Z=i[Q],o.hasOwnProperty(Q)&&W!==Z&&(W!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:vt(t,s,Q,W,o,Z)}return;default:if(al(s)){for(var bt in i)W=i[bt],i.hasOwnProperty(bt)&&W!==void 0&&!o.hasOwnProperty(bt)&&vm(t,s,bt,void 0,o,W);for(ne in o)W=o[ne],Z=i[ne],!o.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||vm(t,s,ne,W,o,Z);return}}for(var F in i)W=i[F],i.hasOwnProperty(F)&&W!=null&&!o.hasOwnProperty(F)&&vt(t,s,F,null,o,W);for(ie in o)W=o[ie],Z=i[ie],!o.hasOwnProperty(ie)||W===Z||W==null&&Z==null||vt(t,s,ie,W,o,Z)}function Ix(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var f=i[o],m=f.transferSize,b=f.initiatorType,T=f.duration;if(m&&T&&Ix(b)){for(b=0,T=f.responseEnd,o+=1;o<i.length;o++){var O=i[o],Q=O.startTime;if(Q>T)break;var ne=O.transferSize,ie=O.initiatorType;ne&&Ix(ie)&&(O=O.responseEnd,b+=ne*(O<T?1:(T-Q)/(O-Q)))}if(--o,s+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var bm=null,_m=null;function ud(t){return t.nodeType===9?t:t.ownerDocument}function Dx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mx(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function wm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Em=null;function mT(){var t=window.event;return t&&t.type==="popstate"?t===Em?!1:(Em=t,!0):(Em=null,!1)}var kx=typeof setTimeout=="function"?setTimeout:void 0,pT=typeof clearTimeout=="function"?clearTimeout:void 0,Ox=typeof Promise=="function"?Promise:void 0,gT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ox<"u"?function(t){return Ox.resolve(null).then(t).catch(yT)}:kx;function yT(t){setTimeout(function(){throw t})}function Pr(t){return t==="head"}function Vx(t,s){var i=s,o=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(o===0){t.removeChild(f),Ul(s);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")rc(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,rc(i);for(var m=i.firstChild;m;){var b=m.nextSibling,T=m.nodeName;m[en]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=b}}else i==="body"&&rc(t.ownerDocument.body);i=f}while(i);Ul(s)}function Px(t,s){var i=t;t=0;do{var o=i.nextSibling;if(i.nodeType===1?s?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(s?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=o}while(i)}function Tm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Tm(i),vn(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function xT(t,s,i,o){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[en])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Vs(t.nextSibling),t===null)break}return null}function vT(t,s,i){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Vs(t.nextSibling),t===null))return null;return t}function Lx(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Vs(t.nextSibling),t===null))return null;return t}function Sm(t){return t.data==="$?"||t.data==="$~"}function Nm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function bT(t,s){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||i.readyState!=="loading")s();else{var o=function(){s(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Vs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Am=null;function Ux(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(s===0)return Vs(t.nextSibling);s--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||s++}t=t.nextSibling}return null}function zx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(s===0)return t;s--}else i!=="/$"&&i!=="/&"||s++}t=t.previousSibling}return null}function Bx(t,s,i){switch(s=ud(i),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function rc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);vn(t)}var Ps=new Map,Hx=new Set;function dd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $a=oe.d;oe.d={f:_T,r:wT,D:ET,C:TT,L:ST,m:NT,X:jT,S:AT,M:RT};function _T(){var t=$a.f(),s=nd();return t||s}function wT(t){var s=un(t);s!==null&&s.tag===5&&s.type==="form"?ry(s):$a.r(t)}var Vl=typeof document>"u"?null:document;function qx(t,s,i){var o=Vl;if(o&&typeof s=="string"&&s){var f=Qn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Hx.has(f)||(Hx.add(f),t={rel:t,crossOrigin:i,href:s},o.querySelector(f)===null&&(s=o.createElement("link"),Tn(s,"link",t),Tt(s),o.head.appendChild(s)))}}function ET(t){$a.D(t),qx("dns-prefetch",t,null)}function TT(t,s){$a.C(t,s),qx("preconnect",t,s)}function ST(t,s,i){$a.L(t,s,i);var o=Vl;if(o&&t&&s){var f='link[rel="preload"][as="'+Qn(s)+'"]';s==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Qn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Qn(i.imageSizes)+'"]')):f+='[href="'+Qn(t)+'"]';var m=f;switch(s){case"style":m=Pl(t);break;case"script":m=Ll(t)}Ps.has(m)||(t=w({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:t,as:s},i),Ps.set(m,t),o.querySelector(f)!==null||s==="style"&&o.querySelector(ic(m))||s==="script"&&o.querySelector(lc(m))||(s=o.createElement("link"),Tn(s,"link",t),Tt(s),o.head.appendChild(s)))}}function NT(t,s){$a.m(t,s);var i=Vl;if(i&&t){var o=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Qn(o)+'"][href="'+Qn(t)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ll(t)}if(!Ps.has(m)&&(t=w({rel:"modulepreload",href:t},s),Ps.set(m,t),i.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(lc(m)))return}o=i.createElement("link"),Tn(o,"link",t),Tt(o),i.head.appendChild(o)}}}function AT(t,s,i){$a.S(t,s,i);var o=Vl;if(o&&t){var f=zn(o).hoistableStyles,m=Pl(t);s=s||"default";var b=f.get(m);if(!b){var T={loading:0,preload:null};if(b=o.querySelector(ic(m)))T.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},i),(i=Ps.get(m))&&jm(t,i);var O=b=o.createElement("link");Tt(O),Tn(O,"link",t),O._p=new Promise(function(Q,ne){O.onload=Q,O.onerror=ne}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,hd(b,s,o)}b={type:"stylesheet",instance:b,count:1,state:T},f.set(m,b)}}}function jT(t,s){$a.X(t,s);var i=Vl;if(i&&t){var o=zn(i).hoistableScripts,f=Ll(t),m=o.get(f);m||(m=i.querySelector(lc(f)),m||(t=w({src:t,async:!0},s),(s=Ps.get(f))&&Rm(t,s),m=i.createElement("script"),Tt(m),Tn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function RT(t,s){$a.M(t,s);var i=Vl;if(i&&t){var o=zn(i).hoistableScripts,f=Ll(t),m=o.get(f);m||(m=i.querySelector(lc(f)),m||(t=w({src:t,async:!0,type:"module"},s),(s=Ps.get(f))&&Rm(t,s),m=i.createElement("script"),Tt(m),Tn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function Fx(t,s,i,o){var f=(f=Me.current)?dd(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=Pl(i.href),i=zn(f).hoistableStyles,o=i.get(s),o||(o={type:"style",instance:null,count:0,state:null},i.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Pl(i.href);var m=zn(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(ic(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Ps.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ps.set(t,i),m||CT(f,t,i,b.state))),s&&o===null)throw Error(r(528,""));return b}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ll(i),i=zn(f).hoistableScripts,o=i.get(s),o||(o={type:"script",instance:null,count:0,state:null},i.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Pl(t){return'href="'+Qn(t)+'"'}function ic(t){return'link[rel="stylesheet"]['+t+"]"}function Gx(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function CT(t,s,i,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),Tn(s,"link",i),Tt(s),t.head.appendChild(s))}function Ll(t){return'[src="'+Qn(t)+'"]'}function lc(t){return"script[async]"+t}function $x(t,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+Qn(i.href)+'"]');if(o)return s.instance=o,Tt(o),o;var f=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Tt(o),Tn(o,"style",f),hd(o,i.precedence,t),s.instance=o;case"stylesheet":f=Pl(i.href);var m=t.querySelector(ic(f));if(m)return s.state.loading|=4,s.instance=m,Tt(m),m;o=Gx(i),(f=Ps.get(f))&&jm(o,f),m=(t.ownerDocument||t).createElement("link"),Tt(m);var b=m;return b._p=new Promise(function(T,O){b.onload=T,b.onerror=O}),Tn(m,"link",o),s.state.loading|=4,hd(m,i.precedence,t),s.instance=m;case"script":return m=Ll(i.src),(f=t.querySelector(lc(m)))?(s.instance=f,Tt(f),f):(o=i,(f=Ps.get(m))&&(o=w({},i),Rm(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Tt(f),Tn(f,"link",o),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,hd(o,i.precedence,t));return s.instance}function hd(t,s,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,b=0;b<o.length;b++){var T=o[b];if(T.dataset.precedence===s)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(t,s.firstChild))}function jm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Rm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var fd=null;function Yx(t,s,i){if(fd===null){var o=new Map,f=fd=new Map;f.set(i,o)}else f=fd,o=f.get(i),o||(o=new Map,f.set(i,o));if(o.has(t))return o;for(o.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[en]||m[we]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var T=o.get(b);T?T.push(m):o.set(b,[m])}}return o}function Kx(t,s,i){t=t.ownerDocument||t,t.head.insertBefore(i,s==="title"?t.querySelector("head > title"):null)}function IT(t,s,i){if(i===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Qx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function DT(t,s,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Pl(o.href),m=s.querySelector(ic(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=md.bind(t),s.then(t,t)),i.state.loading|=4,i.instance=m,Tt(m);return}m=s.ownerDocument||s,o=Gx(o),(f=Ps.get(f))&&jm(o,f),m=m.createElement("link"),Tt(m);var b=m;b._p=new Promise(function(T,O){b.onload=T,b.onerror=O}),Tn(m,"link",o),i.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=md.bind(t),s.addEventListener("load",i),s.addEventListener("error",i))}}var Cm=0;function MT(t,s){return t.stylesheets&&t.count===0&&gd(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var o=setTimeout(function(){if(t.stylesheets&&gd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Cm===0&&(Cm=62500*fT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&gd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Cm?50:800)+s);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var pd=null;function gd(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,pd=new Map,s.forEach(kT,t),pd=null,md.call(t))}function kT(t,s){if(!(s.state.loading&4)){var i=pd.get(t);if(i)var o=i.get(null);else{i=new Map,pd.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),o=b)}o&&i.set(null,o)}f=s.instance,b=f.getAttribute("data-precedence"),m=i.get(b)||o,m===o&&i.set(null,f),i.set(b,f),this.count++,o=md.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var oc={$$typeof:I,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function OT(t,s,i,o,f,m,b,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.hiddenUpdates=Ss(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Xx(t,s,i,o,f,m,b,T,O,Q,ne,ie){return t=new OT(t,s,i,b,O,Q,ne,ie,T),s=1,m===!0&&(s|=24),m=cs(3,null,null,s),t.current=m,m.stateNode=t,s=cf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:i,cache:s},ff(m),t}function Wx(t){return t?(t=pl,t):pl}function Jx(t,s,i,o,f,m){f=Wx(f),o.context===null?o.context=f:o.pendingContext=f,o=Nr(s),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=Ar(t,o,s),i!==null&&(ts(i,t,s),zo(i,t,s))}function Zx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<s?i:s}}function Im(t,s){Zx(t,s),(t=t.alternate)&&Zx(t,s)}function ev(t){if(t.tag===13||t.tag===31){var s=Si(t,67108864);s!==null&&ts(s,t,67108864),Im(t,67108864)}}function tv(t){if(t.tag===13||t.tag===31){var s=ms();s=be(s);var i=Si(t,s);i!==null&&ts(i,t,s),Im(t,s)}}var yd=!0;function VT(t,s,i,o){var f=Y.T;Y.T=null;var m=oe.p;try{oe.p=2,Dm(t,s,i,o)}finally{oe.p=m,Y.T=f}}function PT(t,s,i,o){var f=Y.T;Y.T=null;var m=oe.p;try{oe.p=8,Dm(t,s,i,o)}finally{oe.p=m,Y.T=f}}function Dm(t,s,i,o){if(yd){var f=Mm(o);if(f===null)xm(t,s,o,xd,i),sv(t,o);else if(UT(f,t,s,i,o))o.stopPropagation();else if(sv(t,o),s&4&&-1<LT.indexOf(t)){for(;f!==null;){var m=un(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Ts(m.pendingLanes);if(b!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var O=1<<31-kt(b);T.entanglements[1]|=O,b&=~O}ma(m),(dt&6)===0&&(ed=Jt()+500,nc(0))}}break;case 31:case 13:T=Si(m,2),T!==null&&ts(T,m,2),nd(),Im(m,2)}if(m=Mm(o),m===null&&xm(t,s,o,xd,i),m===f)break;f=m}f!==null&&o.stopPropagation()}else xm(t,s,o,null,i)}}function Mm(t){return t=As(t),km(t)}var xd=null;function km(t){if(xd=null,t=zt(t),t!==null){var s=u(t);if(s===null)t=null;else{var i=s.tag;if(i===13){if(t=h(s),t!==null)return t;t=null}else if(i===31){if(t=g(s),t!==null)return t;t=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return xd=t,null}function nv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case rs:return 2;case na:return 8;case ws:case yo:return 32;case dr:return 268435456;default:return 32}default:return 32}}var Om=!1,Lr=null,Ur=null,zr=null,cc=new Map,uc=new Map,Br=[],LT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sv(t,s){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":cc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(s.pointerId)}}function dc(t,s,i,o,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:i,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},s!==null&&(s=un(s),s!==null&&ev(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function UT(t,s,i,o,f){switch(s){case"focusin":return Lr=dc(Lr,t,s,i,o,f),!0;case"dragenter":return Ur=dc(Ur,t,s,i,o,f),!0;case"mouseover":return zr=dc(zr,t,s,i,o,f),!0;case"pointerover":var m=f.pointerId;return cc.set(m,dc(cc.get(m)||null,t,s,i,o,f)),!0;case"gotpointercapture":return m=f.pointerId,uc.set(m,dc(uc.get(m)||null,t,s,i,o,f)),!0}return!1}function av(t){var s=zt(t.target);if(s!==null){var i=u(s);if(i!==null){if(s=i.tag,s===13){if(s=h(i),s!==null){t.blockedOn=s,Re(t.priority,function(){tv(i)});return}}else if(s===31){if(s=g(i),s!==null){t.blockedOn=s,Re(t.priority,function(){tv(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var i=Mm(t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);To=o,i.target.dispatchEvent(o),To=null}else return s=un(i),s!==null&&ev(s),t.blockedOn=i,!1;s.shift()}return!0}function rv(t,s,i){vd(t)&&i.delete(s)}function zT(){Om=!1,Lr!==null&&vd(Lr)&&(Lr=null),Ur!==null&&vd(Ur)&&(Ur=null),zr!==null&&vd(zr)&&(zr=null),cc.forEach(rv),uc.forEach(rv)}function bd(t,s){t.blockedOn===s&&(t.blockedOn=null,Om||(Om=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zT)))}var _d=null;function iv(t){_d!==t&&(_d=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){_d===t&&(_d=null);for(var s=0;s<t.length;s+=3){var i=t[s],o=t[s+1],f=t[s+2];if(typeof o!="function"){if(km(o||i)===null)continue;break}var m=un(i);m!==null&&(t.splice(s,3),s-=3,Mf(m,{pending:!0,data:f,method:i.method,action:o},o,f))}}))}function Ul(t){function s(O){return bd(O,t)}Lr!==null&&bd(Lr,t),Ur!==null&&bd(Ur,t),zr!==null&&bd(zr,t),cc.forEach(s),uc.forEach(s);for(var i=0;i<Br.length;i++){var o=Br[i];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Br.length&&(i=Br[0],i.blockedOn===null);)av(i),i.blockedOn===null&&Br.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var f=i[o],m=i[o+1],b=f[Le]||null;if(typeof m=="function")b||iv(i);else if(b){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[Le]||null)T=b.formAction;else if(km(f)!==null)continue}else T=b.action;typeof T=="function"?i[o+1]=T:(i.splice(o,3),o-=3),iv(i)}}}function lv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Vm(t){this._internalRoot=t}wd.prototype.render=Vm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var i=s.current,o=ms();Jx(i,o,t,s,null,null)},wd.prototype.unmount=Vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Jx(t.current,2,null,t,null,null),nd(),s[Ke]=null}};function wd(t){this._internalRoot=t}wd.prototype.unstable_scheduleHydration=function(t){if(t){var s=Se();t={blockedOn:null,target:t,priority:s};for(var i=0;i<Br.length&&s!==0&&s<Br[i].priority;i++);Br.splice(i,0,t),i===0&&av(t)}};var ov=e.version;if(ov!=="19.2.3")throw Error(r(527,ov,"19.2.3"));oe.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var BT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{is=Ed.inject(BT),Zt=Ed}catch{}}return fc.createRoot=function(t,s){if(!l(t))throw Error(r(299));var i=!1,o="",f=py,m=gy,b=yy;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=Xx(t,1,!1,null,null,i,o,null,f,m,b,lv),t[Ke]=s.current,ym(t),new Vm(s)},fc.hydrateRoot=function(t,s,i){if(!l(t))throw Error(r(299));var o=!1,f="",m=py,b=gy,T=yy,O=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),s=Xx(t,1,!0,s,i??null,o,f,O,m,b,T,lv),s.context=Wx(null),i=s.current,o=ms(),o=be(o),f=Nr(o),f.callback=null,Ar(i,f,o),i=o,s.current.lanes=i,Na(s,i),ma(s),t[Ke]=s.current,ym(t),new wd(s)},fc.version="19.2.3",fc}var xv;function WT(){if(xv)return Um.exports;xv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Um.exports=XT(),Um.exports}var JT=WT();const ZT=f_(JT);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vv="popstate";function eS(a={}){function e(l,u){let{pathname:h="/",search:g="",hash:p=""}=Qi(l.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),ip("",{pathname:h,search:g,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let h=l.document.querySelector("base"),g="";if(h&&h.getAttribute("href")){let p=l.location.href,y=p.indexOf("#");g=y===-1?p:p.slice(0,y)}return g+"#"+(typeof u=="string"?u:Cc(u))}function r(l,u){vs(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return nS(e,n,r,a)}function Mt(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function vs(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tS(){return Math.random().toString(36).substring(2,10)}function bv(a,e){return{usr:a.state,key:a.key,idx:e}}function ip(a,e,n=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Qi(e):e,state:n,key:e&&e.key||r||tS()}}function Cc({pathname:a="/",search:e="",hash:n=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(a+=n.charAt(0)==="#"?n:"#"+n),a}function Qi(a){let e={};if(a){let n=a.indexOf("#");n>=0&&(e.hash=a.substring(n),a=a.substring(0,n));let r=a.indexOf("?");r>=0&&(e.search=a.substring(r),a=a.substring(0,r)),a&&(e.pathname=a)}return e}function nS(a,e,n,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,h=l.history,g="POP",p=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function w(){g="POP";let k=v(),B=k==null?null:k-y;y=k,p&&p({action:g,location:z.location,delta:B})}function E(k,B){g="PUSH";let $=ip(z.location,k,B);n&&n($,k),y=v()+1;let I=bv($,y),X=z.createHref($);try{h.pushState(I,"",X)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;l.location.assign(X)}u&&p&&p({action:g,location:z.location,delta:1})}function C(k,B){g="REPLACE";let $=ip(z.location,k,B);n&&n($,k),y=v();let I=bv($,y),X=z.createHref($);h.replaceState(I,"",X),u&&p&&p({action:g,location:z.location,delta:0})}function L(k){return sS(k)}let z={get action(){return g},get location(){return a(l,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(vv,w),p=k,()=>{l.removeEventListener(vv,w),p=null}},createHref(k){return e(l,k)},createURL:L,encodeLocation(k){let B=L(k);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:C,go(k){return h.go(k)}};return z}function sS(a,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(n,"No window.location.(origin|href) available to create URL");let r=typeof a=="string"?a:Cc(a);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function p_(a,e,n="/"){return aS(a,e,n,!1)}function aS(a,e,n,r){let l=typeof e=="string"?Qi(e):e,u=Ja(l.pathname||"/",n);if(u==null)return null;let h=g_(a);rS(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let y=gS(u);g=mS(h[p],y,r)}return g}function g_(a,e=[],n=[],r="",l=!1){let u=(h,g,p=l,y)=>{let v={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&p)return;Mt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let w=Qa([r,v.relativePath]),E=n.concat(v);h.children&&h.children.length>0&&(Mt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),g_(h.children,e,E,w,p)),!(h.path==null&&!h.index)&&e.push({path:w,score:hS(w,h.index),routesMeta:E})};return a.forEach((h,g)=>{var p;if(h.path===""||!((p=h.path)!=null&&p.includes("?")))u(h,g);else for(let y of y_(h.path))u(h,g,!0,y)}),e}function y_(a){let e=a.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let h=y_(r.join("/")),g=[];return g.push(...h.map(p=>p===""?u:[u,p].join("/"))),l&&g.push(...h),g.map(p=>a.startsWith("/")&&p===""?"/":p)}function rS(a){a.sort((e,n)=>e.score!==n.score?n.score-e.score:fS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var iS=/^:[\w-]+$/,lS=3,oS=2,cS=1,uS=10,dS=-2,_v=a=>a==="*";function hS(a,e){let n=a.split("/"),r=n.length;return n.some(_v)&&(r+=dS),e&&(r+=oS),n.filter(l=>!_v(l)).reduce((l,u)=>l+(iS.test(u)?lS:u===""?cS:uS),r)}function fS(a,e){return a.length===e.length&&a.slice(0,-1).every((r,l)=>r===e[l])?a[a.length-1]-e[e.length-1]:0}function mS(a,e,n=!1){let{routesMeta:r}=a,l={},u="/",h=[];for(let g=0;g<r.length;++g){let p=r[g],y=g===r.length-1,v=u==="/"?e:e.slice(u.length)||"/",w=qd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),E=p.route;if(!w&&y&&n&&!r[r.length-1].route.index&&(w=qd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!w)return null;Object.assign(l,w.params),h.push({params:l,pathname:Qa([u,w.pathname]),pathnameBase:bS(Qa([u,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(u=Qa([u,w.pathnameBase]))}return h}function qd(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[n,r]=pS(a.path,a.caseSensitive,a.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),g=l.slice(1);return{params:r.reduce((y,{paramName:v,isOptional:w},E)=>{if(v==="*"){let L=g[E]||"";h=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}const C=g[E];return w&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:a}}function pS(a,e=!1,n=!0){vs(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(r.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(r.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function gS(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vs(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Ja(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=a.charAt(n);return r&&r!=="/"?null:a.slice(n)||"/"}var x_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yS=a=>x_.test(a);function xS(a,e="/"){let{pathname:n,search:r="",hash:l=""}=typeof a=="string"?Qi(a):a,u;if(n)if(yS(n))u=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),vs(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?u=wv(n.substring(1),"/"):u=wv(n,e)}else u=e;return{pathname:u,search:_S(r),hash:wS(l)}}function wv(a,e){let n=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function qm(a,e,n,r){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vS(a){return a.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vp(a){let e=vS(a);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Pp(a,e,n,r=!1){let l;typeof a=="string"?l=Qi(a):(l={...a},Mt(!l.pathname||!l.pathname.includes("?"),qm("?","pathname","search",l)),Mt(!l.pathname||!l.pathname.includes("#"),qm("#","pathname","hash",l)),Mt(!l.search||!l.search.includes("#"),qm("#","search","hash",l)));let u=a===""||l.pathname==="",h=u?"/":l.pathname,g;if(h==null)g=n;else{let w=e.length-1;if(!r&&h.startsWith("..")){let E=h.split("/");for(;E[0]==="..";)E.shift(),w-=1;l.pathname=E.join("/")}g=w>=0?e[w]:"/"}let p=xS(l,g),y=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var Qa=a=>a.join("/").replace(/\/\/+/g,"/"),bS=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),_S=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,wS=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,ES=class{constructor(a,e,n,r=!1){this.status=a,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function TS(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function SS(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var v_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function b_(a,e){let n=a;if(typeof n!="string"||!x_.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,l=!1;if(v_)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),g=Ja(h.pathname,e);h.origin===u.origin&&g!=null?n=g+h.search+h.hash:l=!0}catch{vs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var __=["POST","PUT","PATCH","DELETE"];new Set(__);var NS=["GET",...__];new Set(NS);var io=j.createContext(null);io.displayName="DataRouter";var gh=j.createContext(null);gh.displayName="DataRouterState";var AS=j.createContext(!1),w_=j.createContext({isTransitioning:!1});w_.displayName="ViewTransition";var jS=j.createContext(new Map);jS.displayName="Fetchers";var RS=j.createContext(null);RS.displayName="Await";var bs=j.createContext(null);bs.displayName="Navigation";var Gc=j.createContext(null);Gc.displayName="Location";var Ea=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ea.displayName="Route";var Lp=j.createContext(null);Lp.displayName="RouteError";var E_="REACT_ROUTER_ERROR",CS="REDIRECT",IS="ROUTE_ERROR_RESPONSE";function DS(a){if(a.startsWith(`${E_}:${CS}:{`))try{let e=JSON.parse(a.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function MS(a){if(a.startsWith(`${E_}:${IS}:{`))try{let e=JSON.parse(a.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ES(e.status,e.statusText,e.data)}catch{}}function kS(a,{relative:e}={}){Mt(lo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(bs),{hash:l,pathname:u,search:h}=$c(a,{relative:e}),g=u;return n!=="/"&&(g=u==="/"?n:Qa([n,u])),r.createHref({pathname:g,search:h,hash:l})}function lo(){return j.useContext(Gc)!=null}function sr(){return Mt(lo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Gc).location}var T_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function S_(a){j.useContext(bs).static||j.useLayoutEffect(a)}function yh(){let{isDataRoute:a}=j.useContext(Ea);return a?YS():OS()}function OS(){Mt(lo(),"useNavigate() may be used only in the context of a <Router> component.");let a=j.useContext(io),{basename:e,navigator:n}=j.useContext(bs),{matches:r}=j.useContext(Ea),{pathname:l}=sr(),u=JSON.stringify(Vp(r)),h=j.useRef(!1);return S_(()=>{h.current=!0}),j.useCallback((p,y={})=>{if(vs(h.current,T_),!h.current)return;if(typeof p=="number"){n.go(p);return}let v=Pp(p,JSON.parse(u),l,y.relative==="path");a==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Qa([e,v.pathname])),(y.replace?n.replace:n.push)(v,y.state,y)},[e,n,u,l,a])}j.createContext(null);function $c(a,{relative:e}={}){let{matches:n}=j.useContext(Ea),{pathname:r}=sr(),l=JSON.stringify(Vp(n));return j.useMemo(()=>Pp(a,JSON.parse(l),r,e==="path"),[a,l,r,e])}function VS(a,e){return N_(a,e)}function N_(a,e,n,r,l){var $;Mt(lo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(bs),{matches:h}=j.useContext(Ea),g=h[h.length-1],p=g?g.params:{},y=g?g.pathname:"/",v=g?g.pathnameBase:"/",w=g&&g.route;{let I=w&&w.path||"";j_(y,!w||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let E=sr(),C;if(e){let I=typeof e=="string"?Qi(e):e;Mt(v==="/"||(($=I.pathname)==null?void 0:$.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${I.pathname}" was given in the \`location\` prop.`),C=I}else C=E;let L=C.pathname||"/",z=L;if(v!=="/"){let I=v.replace(/^\//,"").split("/");z="/"+L.replace(/^\//,"").split("/").slice(I.length).join("/")}let k=p_(a,{pathname:z});vs(w||k!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),vs(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=BS(k&&k.map(I=>Object.assign({},I,{params:Object.assign({},p,I.params),pathname:Qa([v,u.encodeLocation?u.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?v:Qa([v,u.encodeLocation?u.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),h,n,r,l);return e&&B?j.createElement(Gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},B):B}function PS(){let a=$S(),e=TS(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),n=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",a),h=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:l},n):null,h)}var LS=j.createElement(PS,null),A_=class extends j.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const n=MS(a.digest);n&&(a=n)}let e=a!==void 0?j.createElement(Ea.Provider,{value:this.props.routeContext},j.createElement(Lp.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?j.createElement(US,{error:a},e):e}};A_.contextType=AS;var Fm=new WeakMap;function US({children:a,error:e}){let{basename:n}=j.useContext(bs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=DS(e.digest);if(r){let l=Fm.get(e);if(l)throw l;let u=b_(r.location,n);if(v_&&!Fm.get(e))if(u.isExternal||r.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:r.replace}));throw Fm.set(e,h),h}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return a}function zS({routeContext:a,match:e,children:n}){let r=j.useContext(io);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Ea.Provider,{value:a},n)}function BS(a,e=[],n=null,r=null,l=null){if(a==null){if(!n)return null;if(n.errors)a=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)a=n.matches;else return null}let u=a,h=n==null?void 0:n.errors;if(h!=null){let v=u.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);Mt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let g=!1,p=-1;if(n)for(let v=0;v<u.length;v++){let w=u[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=v),w.route.id){let{loaderData:E,errors:C}=n,L=w.route.loader&&!E.hasOwnProperty(w.route.id)&&(!C||C[w.route.id]===void 0);if(w.route.lazy||L){g=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let y=n&&r?(v,w)=>{var E,C;r(v,{location:n.location,params:((C=(E=n.matches)==null?void 0:E[0])==null?void 0:C.params)??{},unstable_pattern:SS(n.matches),errorInfo:w})}:void 0;return u.reduceRight((v,w,E)=>{let C,L=!1,z=null,k=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,z=w.route.errorElement||LS,g&&(p<0&&E===0?(j_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,k=null):p===E&&(L=!0,k=w.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,E+1)),$=()=>{let I;return C?I=z:L?I=k:w.route.Component?I=j.createElement(w.route.Component,null):w.route.element?I=w.route.element:I=v,j.createElement(zS,{match:w,routeContext:{outlet:v,matches:B,isDataRoute:n!=null},children:I})};return n&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?j.createElement(A_,{location:n.location,revalidation:n.revalidation,component:z,error:C,children:$(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:y}):$()},null)}function Up(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HS(a){let e=j.useContext(io);return Mt(e,Up(a)),e}function qS(a){let e=j.useContext(gh);return Mt(e,Up(a)),e}function FS(a){let e=j.useContext(Ea);return Mt(e,Up(a)),e}function zp(a){let e=FS(a),n=e.matches[e.matches.length-1];return Mt(n.route.id,`${a} can only be used on routes that contain a unique "id"`),n.route.id}function GS(){return zp("useRouteId")}function $S(){var r;let a=j.useContext(Lp),e=qS("useRouteError"),n=zp("useRouteError");return a!==void 0?a:(r=e.errors)==null?void 0:r[n]}function YS(){let{router:a}=HS("useNavigate"),e=zp("useNavigate"),n=j.useRef(!1);return S_(()=>{n.current=!0}),j.useCallback(async(l,u={})=>{vs(n.current,T_),n.current&&(typeof l=="number"?await a.navigate(l):await a.navigate(l,{fromRouteId:e,...u}))},[a,e])}var Ev={};function j_(a,e,n){!e&&!Ev[a]&&(Ev[a]=!0,vs(!1,n))}j.memo(KS);function KS({routes:a,future:e,state:n,onError:r}){return N_(a,void 0,n,r,e)}function lp({to:a,replace:e,state:n,relative:r}){Mt(lo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=j.useContext(bs);vs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(Ea),{pathname:h}=sr(),g=yh(),p=Pp(a,Vp(u),h,r==="path"),y=JSON.stringify(p);return j.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:r})},[g,y,r,e,n]),null}function ps(a){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QS({basename:a="/",children:e=null,location:n,navigationType:r="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){Mt(!lo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=a.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:g,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[g,l,u,h]);typeof n=="string"&&(n=Qi(n));let{pathname:y="/",search:v="",hash:w="",state:E=null,key:C="default"}=n,L=j.useMemo(()=>{let z=Ja(y,g);return z==null?null:{location:{pathname:z,search:v,hash:w,state:E,key:C},navigationType:r}},[g,y,v,w,E,C,r]);return vs(L!=null,`<Router basename="${g}"> is not able to match the URL "${y}${v}${w}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:j.createElement(bs.Provider,{value:p},j.createElement(Gc.Provider,{children:e,value:L}))}function XS({children:a,location:e}){return VS(op(a),e)}function op(a,e=[]){let n=[];return j.Children.forEach(a,(r,l)=>{if(!j.isValidElement(r))return;let u=[...e,l];if(r.type===j.Fragment){n.push.apply(n,op(r.props.children,u));return}Mt(r.type===ps,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=op(r.props.children,u)),n.push(h)}),n}var Id="get",Dd="application/x-www-form-urlencoded";function xh(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function WS(a){return xh(a)&&a.tagName.toLowerCase()==="button"}function JS(a){return xh(a)&&a.tagName.toLowerCase()==="form"}function ZS(a){return xh(a)&&a.tagName.toLowerCase()==="input"}function eN(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function tN(a,e){return a.button===0&&(!e||e==="_self")&&!eN(a)}var Td=null;function nN(){if(Td===null)try{new FormData(document.createElement("form"),0),Td=!1}catch{Td=!0}return Td}var sN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(a){return a!=null&&!sN.has(a)?(vs(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dd}"`),null):a}function aN(a,e){let n,r,l,u,h;if(JS(a)){let g=a.getAttribute("action");r=g?Ja(g,e):null,n=a.getAttribute("method")||Id,l=Gm(a.getAttribute("enctype"))||Dd,u=new FormData(a)}else if(WS(a)||ZS(a)&&(a.type==="submit"||a.type==="image")){let g=a.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=a.getAttribute("formaction")||g.getAttribute("action");if(r=p?Ja(p,e):null,n=a.getAttribute("formmethod")||g.getAttribute("method")||Id,l=Gm(a.getAttribute("formenctype"))||Gm(g.getAttribute("enctype"))||Dd,u=new FormData(g,a),!nN()){let{name:y,type:v,value:w}=a;if(v==="image"){let E=y?`${y}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else y&&u.append(y,w)}}else{if(xh(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Id,r=null,l=Dd,h=a}return u&&l==="text/plain"&&(h=u,u=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bp(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function rN(a,e,n){let r=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ja(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function iN(a,e){if(a.id in e)return e[a.id];try{let n=await import(a.module);return e[a.id]=n,n}catch(n){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lN(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function oN(a,e,n){let r=await Promise.all(a.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await iN(u,n);return h.links?h.links():[]}return[]}));return hN(r.flat(1).filter(lN).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Tv(a,e,n,r,l,u){let h=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>{var v;return n[y].pathname!==p.pathname||((v=n[y].route.path)==null?void 0:v.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,y)=>h(p,y)||g(p,y)):u==="data"?e.filter((p,y)=>{var w;let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(a,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function cN(a,e,{includeHydrateFallback:n}={}){return uN(a.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function uN(a){return[...new Set(a)]}function dN(a){let e={},n=Object.keys(a).sort();for(let r of n)e[r]=a[r];return e}function hN(a,e){let n=new Set;return new Set(e),a.reduce((r,l)=>{let u=JSON.stringify(dN(l));return n.has(u)||(n.add(u),r.push({key:u,link:l})),r},[])}function R_(){let a=j.useContext(io);return Bp(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function fN(){let a=j.useContext(gh);return Bp(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Hp=j.createContext(void 0);Hp.displayName="FrameworkContext";function C_(){let a=j.useContext(Hp);return Bp(a,"You must render this element inside a <HydratedRouter> element"),a}function mN(a,e){let n=j.useContext(Hp),[r,l]=j.useState(!1),[u,h]=j.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:w}=e,E=j.useRef(null);j.useEffect(()=>{if(a==="render"&&h(!0),a==="viewport"){let z=B=>{B.forEach($=>{h($.isIntersecting)})},k=new IntersectionObserver(z,{threshold:.5});return E.current&&k.observe(E.current),()=>{k.disconnect()}}},[a]),j.useEffect(()=>{if(r){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[r]);let C=()=>{l(!0)},L=()=>{l(!1),h(!1)};return n?a!=="intent"?[u,E,{}]:[u,E,{onFocus:mc(g,C),onBlur:mc(p,L),onMouseEnter:mc(y,C),onMouseLeave:mc(v,L),onTouchStart:mc(w,C)}]:[!1,E,{}]}function mc(a,e){return n=>{a&&a(n),n.defaultPrevented||e(n)}}function pN({page:a,...e}){let{router:n}=R_(),r=j.useMemo(()=>p_(n.routes,a,n.basename),[n.routes,a,n.basename]);return r?j.createElement(yN,{page:a,matches:r,...e}):null}function gN(a){let{manifest:e,routeModules:n}=C_(),[r,l]=j.useState([]);return j.useEffect(()=>{let u=!1;return oN(a,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[a,e,n]),r}function yN({page:a,matches:e,...n}){let r=sr(),{manifest:l,routeModules:u}=C_(),{basename:h}=R_(),{loaderData:g,matches:p}=fN(),y=j.useMemo(()=>Tv(a,e,p,l,r,"data"),[a,e,p,l,r]),v=j.useMemo(()=>Tv(a,e,p,l,r,"assets"),[a,e,p,l,r]),w=j.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let L=new Set,z=!1;if(e.forEach(B=>{var I;let $=l.routes[B.route.id];!$||!$.hasLoader||(!y.some(X=>X.route.id===B.route.id)&&B.route.id in g&&((I=u[B.route.id])!=null&&I.shouldRevalidate)||$.hasClientLoader?z=!0:L.add(B.route.id))}),L.size===0)return[];let k=rN(a,h,"data");return z&&L.size>0&&k.searchParams.set("_routes",e.filter(B=>L.has(B.route.id)).map(B=>B.route.id).join(",")),[k.pathname+k.search]},[h,g,r,l,y,e,a,u]),E=j.useMemo(()=>cN(v,l),[v,l]),C=gN(v);return j.createElement(j.Fragment,null,w.map(L=>j.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),E.map(L=>j.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),C.map(({key:L,link:z})=>j.createElement("link",{key:L,nonce:n.nonce,...z})))}function xN(...a){return e=>{a.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vN&&(window.__reactRouterVersion="7.11.0")}catch{}function bN({basename:a,children:e,unstable_useTransitions:n,window:r}){let l=j.useRef();l.current==null&&(l.current=eS({window:r,v5Compat:!0}));let u=l.current,[h,g]=j.useState({action:u.action,location:u.location}),p=j.useCallback(y=>{n===!1?g(y):j.startTransition(()=>g(y))},[n]);return j.useLayoutEffect(()=>u.listen(p),[u,p]),j.createElement(QS,{basename:a,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var I_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xs=j.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:l,reloadDocument:u,replace:h,state:g,target:p,to:y,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:E,...C},L){let{basename:z,unstable_useTransitions:k}=j.useContext(bs),B=typeof y=="string"&&I_.test(y),$=b_(y,z);y=$.to;let I=kS(y,{relative:l}),[X,te,se]=mN(r,C),A=TN(y,{replace:h,state:g,target:p,preventScrollReset:v,relative:l,viewTransition:w,unstable_defaultShouldRevalidate:E,unstable_useTransitions:k});function R(V){e&&e(V),V.defaultPrevented||A(V)}let D=j.createElement("a",{...C,...se,href:$.absoluteURL||I,onClick:$.isExternal||u?e:R,ref:xN(L,te),target:p,"data-discover":!B&&n==="render"?"true":void 0});return X&&!B?j.createElement(j.Fragment,null,D,j.createElement(pN,{page:I})):D});Xs.displayName="Link";var _N=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:l=!1,style:u,to:h,viewTransition:g,children:p,...y},v){let w=$c(h,{relative:y.relative}),E=sr(),C=j.useContext(gh),{navigator:L,basename:z}=j.useContext(bs),k=C!=null&&RN(w)&&g===!0,B=L.encodeLocation?L.encodeLocation(w).pathname:w.pathname,$=E.pathname,I=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||($=$.toLowerCase(),I=I?I.toLowerCase():null,B=B.toLowerCase()),I&&z&&(I=Ja(I,z)||I);const X=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let te=$===B||!l&&$.startsWith(B)&&$.charAt(X)==="/",se=I!=null&&(I===B||!l&&I.startsWith(B)&&I.charAt(B.length)==="/"),A={isActive:te,isPending:se,isTransitioning:k},R=te?e:void 0,D;typeof r=="function"?D=r(A):D=[r,te?"active":null,se?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(A):u;return j.createElement(Xs,{...y,"aria-current":R,className:D,ref:v,style:V,to:h,viewTransition:g},typeof p=="function"?p(A):p)});_N.displayName="NavLink";var wN=j.forwardRef(({discover:a="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:l,state:u,method:h=Id,action:g,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:E,...C},L)=>{let{unstable_useTransitions:z}=j.useContext(bs),k=AN(),B=jN(g,{relative:y}),$=h.toLowerCase()==="get"?"get":"post",I=typeof g=="string"&&I_.test(g),X=te=>{if(p&&p(te),te.defaultPrevented)return;te.preventDefault();let se=te.nativeEvent.submitter,A=(se==null?void 0:se.getAttribute("formmethod"))||h,R=()=>k(se||te.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:l,state:u,relative:y,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:E});z&&n!==!1?j.startTransition(()=>R()):R()};return j.createElement("form",{ref:L,method:$,action:B,onSubmit:r?p:X,...C,"data-discover":!I&&a==="render"?"true":void 0})});wN.displayName="Form";function EN(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D_(a){let e=j.useContext(io);return Mt(e,EN(a)),e}function TN(a,{target:e,replace:n,state:r,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:p}={}){let y=yh(),v=sr(),w=$c(a,{relative:u});return j.useCallback(E=>{if(tN(E,e)){E.preventDefault();let C=n!==void 0?n:Cc(v)===Cc(w),L=()=>y(a,{replace:C,state:r,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:g});p?j.startTransition(()=>L()):L()}},[v,y,w,n,r,e,a,l,u,h,g,p])}var SN=0,NN=()=>`__${String(++SN)}__`;function AN(){let{router:a}=D_("useSubmit"),{basename:e}=j.useContext(bs),n=GS(),r=a.fetch,l=a.navigate;return j.useCallback(async(u,h={})=>{let{action:g,method:p,encType:y,formData:v,body:w}=aN(u,e);if(h.navigate===!1){let E=h.fetcherKey||NN();await r(E,n,h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:v,body:w,formMethod:h.method||p,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:v,body:w,formMethod:h.method||p,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[r,l,e,n])}function jN(a,{relative:e}={}){let{basename:n}=j.useContext(bs),r=j.useContext(Ea);Mt(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...$c(a||".",{relative:e})},h=sr();if(a==null){u.search=h.search;let g=new URLSearchParams(u.search),p=g.getAll("index");if(p.some(v=>v==="")){g.delete("index"),p.filter(w=>w).forEach(w=>g.append("index",w));let v=g.toString();u.search=v?`?${v}`:""}}return(!a||a===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Qa([n,u.pathname])),Cc(u)}function RN(a,{relative:e}={}){let n=j.useContext(w_);Mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=D_("useViewTransitionState"),l=$c(a,{relative:e});if(!n.isTransitioning)return!1;let u=Ja(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=Ja(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qd(l.pathname,h)!=null||qd(l.pathname,u)!=null}var Ot=(a=>(a.ADMIN="ADMIN",a.TEACHER="TEACHER",a))(Ot||{});const CN=()=>{};var Sv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=function(a){const e=[];let n=0;for(let r=0;r<a.length;r++){let l=a.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},IN=function(a){const e=[];let n=0,r=0;for(;n<a.length;){const l=a[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[n++],h=a[n++],g=a[n++],p=((l&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=a[n++],h=a[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<a.length;l+=3){const u=a[l],h=l+1<a.length,g=h?a[l+1]:0,p=l+2<a.length,y=p?a[l+2]:0,v=u>>2,w=(u&3)<<4|g>>4;let E=(g&15)<<2|y>>6,C=y&63;p||(C=64,h||(E=64)),r.push(n[v],n[w],n[E],n[C])}return r.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(M_(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):IN(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<a.length;){const u=n[a.charAt(l++)],g=l<a.length?n[a.charAt(l)]:0;++l;const y=l<a.length?n[a.charAt(l)]:64;++l;const w=l<a.length?n[a.charAt(l)]:64;if(++l,u==null||g==null||y==null||w==null)throw new DN;const E=u<<2|g>>4;if(r.push(E),y!==64){const C=g<<4&240|y>>2;if(r.push(C),w!==64){const L=y<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class DN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MN=function(a){const e=M_(a);return k_.encodeByteArray(e,!0)},Fd=function(a){return MN(a).replace(/\./g,"")},O_=function(a){try{return k_.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=()=>kN().__FIREBASE_DEFAULTS__,VN=()=>{if(typeof process>"u"||typeof Sv>"u")return;const a=Sv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},PN=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&O_(a[1]);return e&&JSON.parse(e)},vh=()=>{try{return CN()||ON()||VN()||PN()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},V_=a=>{var e,n;return(n=(e=vh())==null?void 0:e.emulatorHosts)==null?void 0:n[a]},LN=a=>{const e=V_(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},P_=()=>{var a;return(a=vh())==null?void 0:a.config},L_=a=>{var e;return(e=vh())==null?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U_(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Fd(JSON.stringify(n)),Fd(JSON.stringify(h)),""].join(".")}const Ec={};function BN(){const a={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?a.emulator.push(e):a.prod.push(e);return a}function HN(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let Nv=!1;function z_(a,e){if(typeof window>"u"||typeof document>"u"||!oo(window.location.host)||Ec[a]===e||Ec[a]||Nv)return;Ec[a]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",u=BN().prod.length>0;function h(){const E=document.getElementById(r);E&&E.remove()}function g(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Nv=!0,h()},E}function v(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=HN(r),C=n("text"),L=document.getElementById(C)||document.createElement("span"),z=n("learnmore"),k=document.getElementById(z)||document.createElement("a"),B=n("preprendIcon"),$=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const I=E.element;g(I),v(k,z);const X=y();p($,B),I.append($,L,k,X),document.body.appendChild(I)}u?(L.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function FN(){var e;const a=(e=vh())==null?void 0:e.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $N(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function YN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KN(){const a=Ln();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function QN(){return!FN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XN(){try{return typeof indexedDB=="object"}catch{return!1}}function WN(){return new Promise((a,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),a(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JN,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?ZN(u,r):"Error",g=`${this.serviceName}: ${h} (${l}).`;return new ar(l,g,r)}}function ZN(a,e){return a.replace(eA,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const eA=/\{\$([^}]+)}/g;function tA(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function qi(a,e){if(a===e)return!0;const n=Object.keys(a),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=a[l],h=e[l];if(Av(u)&&Av(h)){if(!qi(u,h))return!1}else if(u!==h)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function Av(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(a){const e=[];for(const[n,r]of Object.entries(a))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function yc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function nA(a,e){const n=new sA(a,e);return n.subscribe.bind(n)}class sA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=$m),l.error===void 0&&(l.error=$m),l.complete===void 0&&(l.complete=$m);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(a){return a&&a._delegate?a._delegate:a}let Gd=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lA(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&h.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iA(a){return a===Li?void 0:a}function lA(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Rt||(Rt={}));const cA={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},uA=Rt.INFO,dA={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},hA=(a,e,...n)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),l=dA[e];if(l)console[l](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let fA=class{constructor(e){this.name=e,this._logLevel=uA,this._logHandler=hA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}};const mA=(a,e)=>e.some(n=>a instanceof n);let jv,Rv;function pA(){return jv||(jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gA(){return Rv||(Rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,cp=new WeakMap,H_=new WeakMap,Ym=new WeakMap,qp=new WeakMap;function yA(a){const e=new Promise((n,r)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",h)},u=()=>{n(Xr(a.result)),l()},h=()=>{r(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&B_.set(n,a)}).catch(()=>{}),qp.set(e,a),e}function xA(a){if(cp.has(a))return;const e=new Promise((n,r)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",h),a.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{r(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",h),a.addEventListener("abort",h)});cp.set(a,e)}let up={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return cp.get(a);if(e==="objectStoreNames")return a.objectStoreNames||H_.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function vA(a){up=a(up)}function bA(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=a.call(Km(this),e,...n);return H_.set(r,e.sort?e.sort():[e]),Xr(r)}:gA().includes(a)?function(...e){return a.apply(Km(this),e),Xr(B_.get(this))}:function(...e){return Xr(a.apply(Km(this),e))}}function _A(a){return typeof a=="function"?bA(a):(a instanceof IDBTransaction&&xA(a),mA(a,pA())?new Proxy(a,up):a)}function Xr(a){if(a instanceof IDBRequest)return yA(a);if(Ym.has(a))return Ym.get(a);const e=_A(a);return e!==a&&(Ym.set(a,e),qp.set(e,a)),e}const Km=a=>qp.get(a);function wA(a,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const h=indexedDB.open(a,e),g=Xr(h);return r&&h.addEventListener("upgradeneeded",p=>{r(Xr(h.result),p.oldVersion,p.newVersion,Xr(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const EA=["get","getKey","getAll","getAllKeys","count"],TA=["put","add","delete","clear"],Qm=new Map;function Cv(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Qm.get(e))return Qm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=TA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||EA.includes(n)))return;const u=async function(h,...g){const p=this.transaction(h,l?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return Qm.set(e,u),u}vA(a=>({...a,get:(e,n,r)=>Cv(e,n)||a.get(e,n,r),has:(e,n)=>!!Cv(e,n)||a.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NA(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",Iv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new fA("@firebase/app"),AA="@firebase/app-compat",jA="@firebase/analytics-compat",RA="@firebase/analytics",CA="@firebase/app-check-compat",IA="@firebase/app-check",DA="@firebase/auth",MA="@firebase/auth-compat",kA="@firebase/database",OA="@firebase/data-connect",VA="@firebase/database-compat",PA="@firebase/functions",LA="@firebase/functions-compat",UA="@firebase/installations",zA="@firebase/installations-compat",BA="@firebase/messaging",HA="@firebase/messaging-compat",qA="@firebase/performance",FA="@firebase/performance-compat",GA="@firebase/remote-config",$A="@firebase/remote-config-compat",YA="@firebase/storage",KA="@firebase/storage-compat",QA="@firebase/firestore",XA="@firebase/ai",WA="@firebase/firestore-compat",JA="firebase",ZA="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]",e2={[dp]:"fire-core",[AA]:"fire-core-compat",[RA]:"fire-analytics",[jA]:"fire-analytics-compat",[IA]:"fire-app-check",[CA]:"fire-app-check-compat",[DA]:"fire-auth",[MA]:"fire-auth-compat",[kA]:"fire-rtdb",[OA]:"fire-data-connect",[VA]:"fire-rtdb-compat",[PA]:"fire-fn",[LA]:"fire-fn-compat",[UA]:"fire-iid",[zA]:"fire-iid-compat",[BA]:"fire-fcm",[HA]:"fire-fcm-compat",[qA]:"fire-perf",[FA]:"fire-perf-compat",[GA]:"fire-rc",[$A]:"fire-rc-compat",[YA]:"fire-gcs",[KA]:"fire-gcs-compat",[QA]:"fire-fst",[WA]:"fire-fst-compat",[XA]:"fire-vertex","fire-js":"fire-js",[JA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,fp=new Map,mp=new Map;function Dv(a,e){try{a.container.addComponent(e)}catch(n){Za.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Zl(a){const e=a.name;if(mp.has(e))return Za.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,a);for(const n of Jl.values())Dv(n,a);for(const n of fp.values())Dv(n,a);return!0}function Fp(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function Us(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Yc("app","Firebase",t2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=ZA;function Gp(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const r={name:hp,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Wr.create("bad-app-name",{appName:String(l)});if(n||(n=P_()),!n)throw Wr.create("no-options");const u=Jl.get(l);if(u){if(qi(n,u.options)&&qi(r,u.config))return u;throw Wr.create("duplicate-app",{appName:l})}const h=new oA(l);for(const p of mp.values())h.addComponent(p);const g=new n2(n,r,h);return Jl.set(l,g),g}function q_(a=hp){const e=Jl.get(a);if(!e&&a===hp&&P_())return Gp();if(!e)throw Wr.create("no-app",{appName:a});return e}async function s2(a){let e=!1;const n=a.name;Jl.has(n)?(e=!0,Jl.delete(n)):fp.has(n)&&a.decRefCount()<=0&&(fp.delete(n),e=!0),e&&(await Promise.all(a.container.getProviders().map(r=>r.delete())),a.isDeleted=!0)}function Jr(a,e,n){let r=e2[a]??a;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${r}" with version "${e}":`];l&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Za.warn(h.join(" "));return}Zl(new Gd(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebase-heartbeat-database",r2=1,Ic="firebase-heartbeat-store";let Xm=null;function F_(){return Xm||(Xm=wA(a2,r2,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(a=>{throw Wr.create("idb-open",{originalErrorMessage:a.message})})),Xm}async function i2(a){try{const n=(await F_()).transaction(Ic),r=await n.objectStore(Ic).get(G_(a));return await n.done,r}catch(e){if(e instanceof ar)Za.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Za.warn(n.message)}}}async function Mv(a,e){try{const r=(await F_()).transaction(Ic,"readwrite");await r.objectStore(Ic).put(e,G_(a)),await r.done}catch(n){if(n instanceof ar)Za.warn(n.message);else{const r=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Za.warn(r.message)}}}function G_(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=1024,o2=30;class c2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=kv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>o2){const h=h2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Za.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kv(),{heartbeatsToSend:r,unsentEntries:l}=u2(this._heartbeatsCache.heartbeats),u=Fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Za.warn(n),""}}}function kv(){return new Date().toISOString().substring(0,10)}function u2(a,e=l2){const n=[];let r=a.slice();for(const l of a){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),Ov(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Ov(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XN()?WN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ov(a){return Fd(JSON.stringify({version:2,heartbeats:a})).length}function h2(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let r=1;r<a.length;r++)a[r].date<n&&(n=a[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(a){Zl(new Gd("platform-logger",e=>new SA(e),"PRIVATE")),Zl(new Gd("heartbeat",e=>new c2(e),"PRIVATE")),Jr(dp,Iv,a),Jr(dp,Iv,"esm2020"),Jr("fire-js","")}f2("");var m2="firebase",p2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(m2,p2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(wt||(wt={}));const g2={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},y2=wt.INFO,x2={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},v2=(a,e,...n)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),l=x2[e];if(l)console[l](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let b2=class{constructor(e){this.name=e,this._logLevel=y2,this._logHandler=v2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}},Vv=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};function $_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _2=$_,Y_=new Yc("auth","Firebase",$_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new b2("@firebase/auth");function w2(a,...e){$d.logLevel<=wt.WARN&&$d.warn(`Auth (${co}): ${a}`,...e)}function Md(a,...e){$d.logLevel<=wt.ERROR&&$d.error(`Auth (${co}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(a,...e){throw $p(a,...e)}function ga(a,...e){return $p(a,...e)}function K_(a,e,n){const r={..._2(),[e]:n};return new Yc("auth","Firebase",r).create(e,{appName:a.name})}function Xa(a){return K_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(a,...e){if(typeof a!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(n,...r)}return Y_.create(a,...e)}function Ie(a,e,...n){if(!a)throw $p(e,...n)}function Ya(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Md(e),new Error(e)}function er(a,e){a||Ya(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.href)||""}function E2(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E2()||$N()||"connection"in navigator)?navigator.onLine:!0}function S2(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=qN()||YN()}get(){return T2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(a,e){er(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j2=new Qc(3e4,6e4);function rr(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function ir(a,e,n,r,l={}){return X_(a,l,async()=>{let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});const g=Kc({key:a.config.apiKey,...h}).slice(1),p=await a._getAdditionalHeaders();p["Content-Type"]="application/json",a.languageCode&&(p["X-Firebase-Locale"]=a.languageCode);const y={method:e,headers:p,...u};return GN()||(y.referrerPolicy="no-referrer"),a.emulatorConfig&&oo(a.emulatorConfig.host)&&(y.credentials="include"),Q_.fetch()(await W_(a,a.config.apiHost,n,g),y)})}async function X_(a,e,n){a._canInitEmulator=!1;const r={...N2,...e};try{const l=new C2(a),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Sd(a,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(a,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Sd(a,"email-already-in-use",h);if(p==="USER_DISABLED")throw Sd(a,"user-disabled",h);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw K_(a,v,y);ea(a,v)}}catch(l){if(l instanceof ar)throw l;ea(a,"network-request-failed",{message:String(l)})}}async function Xc(a,e,n,r,l={}){const u=await ir(a,e,n,r,l);return"mfaPendingCredential"in u&&ea(a,"multi-factor-auth-required",{_serverResponse:u}),u}async function W_(a,e,n,r){const l=`${e}${n}?${r}`,u=a,h=u.config.emulator?Yp(a.config,l):`${a.config.apiScheme}://${l}`;return A2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function R2(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ga(this.auth,"network-request-failed")),j2.get())})}}function Sd(a,e,n){const r={appName:a.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=ga(a,e,r);return l.customData._tokenResponse=n,l}function Lv(a){return a!==void 0&&a.enterprise!==void 0}class I2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return R2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D2(a,e){return ir(a,"GET","/v2/recaptchaConfig",rr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(a,e){return ir(a,"POST","/v1/accounts:delete",e)}async function Yd(a,e){return ir(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k2(a,e=!1){const n=pn(a),r=await n.getIdToken(e),l=Kp(r);Ie(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:l,token:r,authTime:Tc(Wm(l.auth_time)),issuedAtTime:Tc(Wm(l.iat)),expirationTime:Tc(Wm(l.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Wm(a){return Number(a)*1e3}function Kp(a){const[e,n,r]=a.split(".");if(e===void 0||n===void 0||r===void 0)return Md("JWT malformed, contained fewer than 3 sections"),null;try{const l=O_(n);return l?JSON.parse(l):(Md("Failed to decode base64 JWT payload"),null)}catch(l){return Md("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Uv(a){const e=Kp(a);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(a,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&O2(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function O2({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(a){var w;const e=a.auth,n=await a.getIdToken(),r=await Dc(a,Yd(e,{idToken:n}));Ie(r==null?void 0:r.users.length,e,"internal-error");const l=r.users[0];a._notifyReloadListener(l);const u=(w=l.providerUserInfo)!=null&&w.length?J_(l.providerUserInfo):[],h=L2(a.providerData,u),g=a.isAnonymous,p=!(a.email&&l.passwordHash)&&!(h!=null&&h.length),y=g?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new gp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(a,v)}async function P2(a){const e=pn(a);await Kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L2(a,e){return[...a.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function J_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(a,e){const n=await X_(a,{},async()=>{const r=Kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=a.config,h=await W_(a,l,"/v1/token",`key=${u}`),g=await a._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return a.emulatorConfig&&oo(a.emulatorConfig.host)&&(p.credentials="include"),Q_.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function z2(a,e){return ir(a,"POST","/v2/accounts:revokeToken",rr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=Uv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await U2(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,h=new Yl;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),l&&(Ie(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Ie(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return Ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(a,e){Ie(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class Ws{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new V2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k2(this,e)}reload(){return P2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ws({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Us(this.auth.app))return Promise.reject(Xa(this.auth));const e=await this.getIdToken();return await Dc(this,M2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:C,providerData:L,stsTokenManager:z}=n;Ie(w&&z,e,"internal-error");const k=Yl.fromJSON(this.name,z);Ie(typeof w=="string",e,"internal-error"),qr(r,e.name),qr(l,e.name),Ie(typeof E=="boolean",e,"internal-error"),Ie(typeof C=="boolean",e,"internal-error"),qr(u,e.name),qr(h,e.name),qr(g,e.name),qr(p,e.name),qr(y,e.name),qr(v,e.name);const B=new Ws({uid:w,auth:e,email:l,emailVerified:E,displayName:r,isAnonymous:C,photoURL:h,phoneNumber:u,tenantId:g,stsTokenManager:k,createdAt:y,lastLoginAt:v});return L&&Array.isArray(L)&&(B.providerData=L.map($=>({...$}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,r=!1){const l=new Yl;l.updateFromServerResponse(n);const u=new Ws({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Kd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Ie(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?J_(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),g=new Yl;g.updateFromIdToken(r);const p=new Ws({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new gp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function Ka(a){er(a instanceof Function,"Expected a class definition");let e=zv.get(a);return e?(er(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,zv.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Z_.type="NONE";const Bv=Z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(a,e,n){return`firebase:${a}:${e}:${n}`}class Kl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=kd(this.userKey,l.apiKey,u),this.fullPersistenceKey=kd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yd(this.auth,{idToken:e}).catch(()=>{});return n?Ws._fromGetAccountInfoResponse(this.auth,n,e):null}return Ws._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Kl(Ka(Bv),e,r);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Ka(Bv);const h=kd(r,e.config.apiKey,e.name);let g=null;for(const y of n)try{const v=await y._get(h);if(v){let w;if(typeof v=="string"){const E=await Yd(e,{idToken:v}).catch(()=>{});if(!E)break;w=await Ws._fromGetAccountInfoResponse(e,E,v)}else w=Ws._fromJSON(e,v);y!==u&&(g=w),u=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Kl(u,e,r):(u=p[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Kl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r1(e))return"Blackberry";if(i1(e))return"Webos";if(t1(e))return"Safari";if((e.includes("chrome/")||n1(e))&&!e.includes("edge/"))return"Chrome";if(a1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function e1(a=Ln()){return/firefox\//i.test(a)}function t1(a=Ln()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n1(a=Ln()){return/crios\//i.test(a)}function s1(a=Ln()){return/iemobile/i.test(a)}function a1(a=Ln()){return/android/i.test(a)}function r1(a=Ln()){return/blackberry/i.test(a)}function i1(a=Ln()){return/webos/i.test(a)}function Qp(a=Ln()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function B2(a=Ln()){var e;return Qp(a)&&!!((e=window.navigator)!=null&&e.standalone)}function H2(){return KN()&&document.documentMode===10}function l1(a=Ln()){return Qp(a)||a1(a)||i1(a)||r1(a)||/windows phone/i.test(a)||s1(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(a,e=[]){let n;switch(a){case"Browser":n=Hv(Ln());break;case"Worker":n=`${Hv(Ln())}-${a}`;break;default:n=a}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((h,g)=>{try{const p=e(u);h(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(a,e={}){return ir(a,"GET","/v2/passwordPolicy",rr(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=6;class $2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??G2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ka(n)),this._initializationPromise=this.queue(async()=>{var r,l,u;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yd(this,{idToken:e}),r=await Ws._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Us(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===g)&&(p!=null&&p.user)&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Us(this.app))return Promise.reject(Xa(this));const n=e?pn(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Us(this.app)?Promise.reject(Xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Us(this.app)?Promise.reject(Xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ka(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F2(this),n=new $2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await z2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ka(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[Ka(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,l);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Us(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&w2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ci(a){return pn(a)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=nA(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K2(a){bh=a}function c1(a){return bh.loadJS(a)}function Q2(){return bh.recaptchaEnterpriseScript}function X2(){return bh.gapiScript}function W2(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class J2{constructor(){this.enterprise=new Z2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Z2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ej="recaptcha-enterprise",u1="NO_RECAPTCHA";class tj{constructor(e){this.type=ej,this.auth=ci(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{D2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new I2(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(p=>{g(p)})})}function l(u,h,g){const p=window.grecaptcha;Lv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(u1)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J2().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{r(this.auth).then(g=>{if(!n&&Lv(window.grecaptcha))l(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Q2();p.length!==0&&(p+=g),c1(p).then(()=>{l(g,u,h)}).catch(y=>{h(y)})}}).catch(g=>{h(g)})})}}async function Fv(a,e,n,r=!1,l=!1){const u=new tj(a);let h;if(l)h=u1;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Qd(a,e,n,r,l){var u;if((u=a._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Fv(a,e,n,n==="getOobCode");return r(a,h)}else return r(a,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Fv(a,e,n,n==="getOobCode");return r(a,g)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(a,e){const n=Fp(a,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(qi(u,e??{}))return l;ea(l,"already-initialized")}return n.initialize({options:e})}function sj(a,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ka);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aj(a,e,n){const r=ci(a);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=d1(e),{host:h,port:g}=rj(e),p=g===null?"":`:${g}`,y={url:`${u}//${h}${p}/`},v=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(qi(y,r.config.emulator)&&qi(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,oo(h)?(U_(`${u}//${h}${p}`),z_("Auth",!0)):ij()}function d1(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function rj(a){const e=d1(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:Gv(r.substr(u.length+1))}}else{const[u,h]=r.split(":");return{host:u,port:Gv(h)}}}function Gv(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function ij(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ya("not implemented")}_getIdTokenResponse(e){return Ya("not implemented")}_linkToIdToken(e,n){return Ya("not implemented")}_getReauthenticationResolver(e){return Ya("not implemented")}}async function lj(a,e){return ir(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(a,e){return Xc(a,"POST","/v1/accounts:signInWithPassword",rr(a,e))}async function cj(a,e){return ir(a,"POST","/v1/accounts:sendOobCode",rr(a,e))}async function uj(a,e){return cj(a,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(a,e){return Xc(a,"POST","/v1/accounts:signInWithEmailLink",rr(a,e))}async function hj(a,e){return Xc(a,"POST","/v1/accounts:signInWithEmailLink",rr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Xp{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Mc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qd(e,n,"signInWithPassword",oj);case"emailLink":return dj(e,{email:this._email,oobCode:this._password});default:ea(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qd(e,r,"signUpPassword",lj);case"emailLink":return hj(e,{idToken:n,email:this._email,oobCode:this._password});default:ea(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(a,e){return Xc(a,"POST","/v1/accounts:signInWithIdp",rr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="http://localhost";class Fi extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ea("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const h=new Fi(r,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Ql(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ql(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ql(e,n)}buildRequest(){const e={requestUri:fj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pj(a){const e=gc(yc(a)).link,n=e?gc(yc(e)).deep_link_id:null,r=gc(yc(a)).deep_link_id;return(r?gc(yc(r)).link:null)||r||n||e||a}class Wp{constructor(e){const n=gc(yc(e)),r=n.apiKey??null,l=n.oobCode??null,u=mj(n.mode??null);Ie(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pj(e);try{return new Wp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return Mc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Wp.parseLink(n);return Ie(r,"argument-error"),Mc._fromEmailAndCode(e,r.code,r.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends h1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Wc{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fi._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Wc{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Wc{constructor(){super("twitter.com")}static credential(e,n){return Fi._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(a,e){return Xc(a,"POST","/v1/accounts:signUp",rr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await Ws._fromIdTokenResponse(e,r,l),h=$v(r);return new Gi({user:u,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=$v(r);return new Gi({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function $v(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends ar{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Xd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new Xd(e,n,r,l)}}function f1(a,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Xd._fromErrorAndOperation(a,u,e,r):u})}async function yj(a,e,n=!1){const r=await Dc(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return Gi._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(a,e,n=!1){const{auth:r}=a;if(Us(r.app))return Promise.reject(Xa(r));const l="reauthenticate";try{const u=await Dc(a,f1(r,l,e,a),n);Ie(u.idToken,r,"internal-error");const h=Kp(u.idToken);Ie(h,r,"internal-error");const{sub:g}=h;return Ie(a.uid===g,r,"user-mismatch"),Gi._forOperation(a,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ea(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(a,e,n=!1){if(Us(a.app))return Promise.reject(Xa(a));const r="signIn",l=await f1(a,r,e),u=await Gi._fromIdTokenResponse(a,r,l);return n||await a._updateCurrentUser(u.user),u}async function vj(a,e){return m1(ci(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(a){const e=ci(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bj(a,e,n){const r=ci(a);await Qd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uj)}async function _j(a,e,n){if(Us(a.app))return Promise.reject(Xa(a));const r=ci(a),h=await Qd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gj).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&p1(a),p}),g=await Gi._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(g.user),g}function wj(a,e,n){return Us(a.app)?Promise.reject(Xa(a)):vj(pn(a),uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&p1(a),r})}function Ej(a,e,n,r){return pn(a).onIdTokenChanged(e,n,r)}function Tj(a,e,n){return pn(a).beforeAuthStateChanged(e,n)}function Sj(a,e,n,r){return pn(a).onAuthStateChanged(e,n,r)}function g1(a){return pn(a).signOut()}const Wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=1e3,Aj=10;class x1 extends y1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},u=this.storage.getItem(r);H2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Aj):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Nj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}x1.type="LOCAL";const jj=x1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1 extends y1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}v1.type="SESSION";const b1=v1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(h).map(async y=>y(n.origin,u)),p=await Rj(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(a="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((g,p)=>{const y=Jp("",20);l.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);h={messageChannel:l,onMessage(w){const E=w;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(E.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(){return window}function Ij(a){ya().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){return typeof ya().WorkerGlobalScope<"u"&&typeof ya().importScripts=="function"}async function Dj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mj(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)==null?void 0:a.controller)||null}function kj(){return _1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebaseLocalStorageDb",Oj=1,Jd="firebaseLocalStorage",E1="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wh(a,e){return a.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function Vj(){const a=indexedDB.deleteDatabase(w1);return new Jc(a).toPromise()}function yp(){const a=indexedDB.open(w1,Oj);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(Jd,{keyPath:E1})}catch(l){n(l)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(Jd)?e(r):(r.close(),await Vj(),e(await yp()))})})}async function Yv(a,e,n){const r=wh(a,!0).put({[E1]:e,value:n});return new Jc(r).toPromise()}async function Pj(a,e){const n=wh(a,!1).get(e),r=await new Jc(n).toPromise();return r===void 0?null:r.value}function Kv(a,e){const n=wh(a,!0).delete(e);return new Jc(n).toPromise()}const Lj=800,Uj=3;class T1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Uj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(kj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Dj(),!this.activeServiceWorker)return;this.sender=new Cj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await Yv(e,Wd,"1"),await Kv(e,Wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Pj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=wh(l,!1).getAll();return new Jc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}T1.type="LOCAL";const zj=T1;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(a,e){return e?Ka(e):(Ie(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Hj(a){return m1(a.auth,new Zp(a),a.bypassAuthState)}function qj(a){const{auth:e,user:n}=a;return Ie(n,e,"internal-error"),xj(n,new Zp(a),a.bypassAuthState)}async function Fj(a){const{auth:e,user:n}=a;return Ie(n,e,"internal-error"),yj(n,new Zp(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hj;case"linkViaPopup":case"linkViaRedirect":return Fj;case"reauthViaPopup":case"reauthViaRedirect":return qj;default:ea(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new Qc(2e3,1e4);class $l extends S1{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,$l.currentPopupAction&&$l.currentPopupAction.cancel(),$l.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=Jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ga(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ga(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$l.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ga(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gj.get())};e()}}$l.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="pendingRedirect",Od=new Map;class Yj extends S1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const r=await Kj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kj(a,e){const n=Wj(e),r=Xj(a);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function Qj(a,e){Od.set(a._key(),e)}function Xj(a){return Ka(a._redirectPersistence)}function Wj(a){return kd($j,a.config.apiKey,a.name)}async function Jj(a,e,n=!1){if(Us(a.app))return Promise.reject(Xa(a));const r=ci(a),l=Bj(r,e),h=await new Yj(r,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=600*1e3;class eR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!N1(e)){const l=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ga(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qv(e))}saveEventToCache(e){this.cachedEventUids.add(Qv(e)),this.lastProcessedEventTime=Date.now()}}function Qv(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function N1({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tR(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N1(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(a,e={}){return ir(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;async function rR(a){if(a.config.emulator)return;const{authorizedDomains:e}=await nR(a);for(const n of e)try{if(iR(n))return}catch{}ea(a,"unauthorized-domain")}function iR(a){const e=pp(),{protocol:n,hostname:r}=new URL(e);if(a.startsWith("chrome-extension://")){const h=new URL(a);return h.hostname===""&&r===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!aR.test(n))return!1;if(sR.test(a))return r===a;const l=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new Qc(3e4,6e4);function Xv(){const a=ya().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function oR(a){return new Promise((e,n)=>{var l,u,h;function r(){Xv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xv(),n(ga(a,"network-request-failed"))},timeout:lR.get()})}if((u=(l=ya().gapi)==null?void 0:l.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=ya().gapi)!=null&&h.load)r();else{const g=W2("iframefcb");return ya()[g]=()=>{gapi.load?r():n(ga(a,"network-request-failed"))},c1(`${X2()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw Vd=null,e})}let Vd=null;function cR(a){return Vd=Vd||oR(a),Vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Qc(5e3,15e3),dR="__/auth/iframe",hR="emulator/auth/iframe",fR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pR(a){const e=a.config;Ie(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?Yp(e,hR):`https://${a.config.authDomain}/${dR}`,r={apiKey:e.apiKey,appName:a.name,v:co},l=mR.get(a.config.apiHost);l&&(r.eid=l);const u=a._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Kc(r).slice(1)}`}async function gR(a){const e=await cR(a),n=ya().gapi;return Ie(n,a,"internal-error"),e.open({where:document.body,url:pR(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fR,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const h=ga(a,"network-request-failed"),g=ya().setTimeout(()=>{u(h)},uR.get());function p(){ya().clearTimeout(g),l(r)}r.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xR=500,vR=600,bR="_blank",_R="http://localhost";class Wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wR(a,e,n,r=xR,l=vR){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...yR,width:r.toString(),height:l.toString(),top:u,left:h},y=Ln().toLowerCase();n&&(g=n1(y)?bR:n),e1(y)&&(e=e||_R,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[C,L])=>`${E}${C}=${L},`,"");if(B2(y)&&g!=="_self")return ER(e||"",g),new Wv(null);const w=window.open(e||"",g,v);Ie(w,a,"popup-blocked");try{w.focus()}catch{}return new Wv(w)}function ER(a,e){const n=document.createElement("a");n.href=a,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="__/auth/handler",SR="emulator/auth/handler",NR=encodeURIComponent("fac");async function Jv(a,e,n,r,l,u){Ie(a.config.authDomain,a,"auth-domain-config-required"),Ie(a.config.apiKey,a,"invalid-api-key");const h={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:r,v:co,eventId:l};if(e instanceof h1){e.setDefaultLanguage(a.languageCode),h.providerId=e.providerId||"",tA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))h[v]=w}if(e instanceof Wc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(h.scopes=v.join(","))}a.tenantId&&(h.tid=a.tenantId);const g=h;for(const v of Object.keys(g))g[v]===void 0&&delete g[v];const p=await a._getAppCheckToken(),y=p?`#${NR}=${encodeURIComponent(p)}`:"";return`${AR(a)}?${Kc(g).slice(1)}${y}`}function AR({config:a}){return a.emulator?Yp(a,SR):`https://${a.authDomain}/${TR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="webStorageSupport";class jR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b1,this._completeRedirectFn=Jj,this._overrideRedirectResult=Qj}async _openPopup(e,n,r,l){var h;er((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await Jv(e,n,r,pp(),l);return wR(e,u,Jp())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await Jv(e,n,r,pp(),l);return Ij(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(er(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gR(e),r=new eR(e);return n.register("authEvent",l=>(Ie(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jm,{type:Jm},l=>{var h;const u=(h=l==null?void 0:l[0])==null?void 0:h[Jm];u!==void 0&&n(!!u),ea(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return l1()||t1()||Qp()}}const RR=jR;var Zv="@firebase/auth",eb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DR(a){Zl(new Vv("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=r.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:h,authDomain:g,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o1(a)},y=new Y2(r,l,u,p);return sj(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zl(new Vv("auth-internal",e=>{const n=ci(e.getProvider("auth").getImmediate());return(r=>new CR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(Zv,eb,IR(a)),Jr(Zv,eb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=300,kR=L_("authIdTokenMaxAge")||MR;let tb=null;const OR=a=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kR)return;const l=n==null?void 0:n.token;tb!==l&&(tb=l,await fetch(a,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function A1(a=q_()){const e=Fp(a,"auth");if(e.isInitialized())return e.getImmediate();const n=nj(a,{popupRedirectResolver:RR,persistence:[zj,jj,b1]}),r=L_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const h=OR(u.toString());Tj(n,h,()=>h(n.currentUser)),Ej(n,g=>h(g))}}const l=V_("auth");return l&&aj(n,`http://${l}`),n}function VR(){var a;return((a=document.getElementsByTagName("head"))==null?void 0:a[0])??document}K2({loadJS(a){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=e,r.onerror=l=>{const u=ga("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",VR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DR("Browser");class PR{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(it||(it={}));const LR={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},UR=it.INFO,zR={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},BR=(a,e,...n)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),l=zR[e];if(l)console[l](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HR{constructor(e){this.name=e,this._logLevel=UR,this._logHandler=BR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}var nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,j1;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function D(){}D.prototype=R.prototype,A.F=R.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(V,P,M){for(var N=Array(arguments.length-2),je=2;je<arguments.length;je++)N[je-2]=arguments[je];return R.prototype[P].apply(V,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(A,R,D){D||(D=0);const V=Array(16);if(typeof R=="string")for(var P=0;P<16;++P)V[P]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(P=0;P<16;++P)V[P]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=A.g[0],D=A.g[1],P=A.g[2];let M=A.g[3],N;N=R+(M^D&(P^M))+V[0]+3614090360&4294967295,R=D+(N<<7&4294967295|N>>>25),N=M+(P^R&(D^P))+V[1]+3905402710&4294967295,M=R+(N<<12&4294967295|N>>>20),N=P+(D^M&(R^D))+V[2]+606105819&4294967295,P=M+(N<<17&4294967295|N>>>15),N=D+(R^P&(M^R))+V[3]+3250441966&4294967295,D=P+(N<<22&4294967295|N>>>10),N=R+(M^D&(P^M))+V[4]+4118548399&4294967295,R=D+(N<<7&4294967295|N>>>25),N=M+(P^R&(D^P))+V[5]+1200080426&4294967295,M=R+(N<<12&4294967295|N>>>20),N=P+(D^M&(R^D))+V[6]+2821735955&4294967295,P=M+(N<<17&4294967295|N>>>15),N=D+(R^P&(M^R))+V[7]+4249261313&4294967295,D=P+(N<<22&4294967295|N>>>10),N=R+(M^D&(P^M))+V[8]+1770035416&4294967295,R=D+(N<<7&4294967295|N>>>25),N=M+(P^R&(D^P))+V[9]+2336552879&4294967295,M=R+(N<<12&4294967295|N>>>20),N=P+(D^M&(R^D))+V[10]+4294925233&4294967295,P=M+(N<<17&4294967295|N>>>15),N=D+(R^P&(M^R))+V[11]+2304563134&4294967295,D=P+(N<<22&4294967295|N>>>10),N=R+(M^D&(P^M))+V[12]+1804603682&4294967295,R=D+(N<<7&4294967295|N>>>25),N=M+(P^R&(D^P))+V[13]+4254626195&4294967295,M=R+(N<<12&4294967295|N>>>20),N=P+(D^M&(R^D))+V[14]+2792965006&4294967295,P=M+(N<<17&4294967295|N>>>15),N=D+(R^P&(M^R))+V[15]+1236535329&4294967295,D=P+(N<<22&4294967295|N>>>10),N=R+(P^M&(D^P))+V[1]+4129170786&4294967295,R=D+(N<<5&4294967295|N>>>27),N=M+(D^P&(R^D))+V[6]+3225465664&4294967295,M=R+(N<<9&4294967295|N>>>23),N=P+(R^D&(M^R))+V[11]+643717713&4294967295,P=M+(N<<14&4294967295|N>>>18),N=D+(M^R&(P^M))+V[0]+3921069994&4294967295,D=P+(N<<20&4294967295|N>>>12),N=R+(P^M&(D^P))+V[5]+3593408605&4294967295,R=D+(N<<5&4294967295|N>>>27),N=M+(D^P&(R^D))+V[10]+38016083&4294967295,M=R+(N<<9&4294967295|N>>>23),N=P+(R^D&(M^R))+V[15]+3634488961&4294967295,P=M+(N<<14&4294967295|N>>>18),N=D+(M^R&(P^M))+V[4]+3889429448&4294967295,D=P+(N<<20&4294967295|N>>>12),N=R+(P^M&(D^P))+V[9]+568446438&4294967295,R=D+(N<<5&4294967295|N>>>27),N=M+(D^P&(R^D))+V[14]+3275163606&4294967295,M=R+(N<<9&4294967295|N>>>23),N=P+(R^D&(M^R))+V[3]+4107603335&4294967295,P=M+(N<<14&4294967295|N>>>18),N=D+(M^R&(P^M))+V[8]+1163531501&4294967295,D=P+(N<<20&4294967295|N>>>12),N=R+(P^M&(D^P))+V[13]+2850285829&4294967295,R=D+(N<<5&4294967295|N>>>27),N=M+(D^P&(R^D))+V[2]+4243563512&4294967295,M=R+(N<<9&4294967295|N>>>23),N=P+(R^D&(M^R))+V[7]+1735328473&4294967295,P=M+(N<<14&4294967295|N>>>18),N=D+(M^R&(P^M))+V[12]+2368359562&4294967295,D=P+(N<<20&4294967295|N>>>12),N=R+(D^P^M)+V[5]+4294588738&4294967295,R=D+(N<<4&4294967295|N>>>28),N=M+(R^D^P)+V[8]+2272392833&4294967295,M=R+(N<<11&4294967295|N>>>21),N=P+(M^R^D)+V[11]+1839030562&4294967295,P=M+(N<<16&4294967295|N>>>16),N=D+(P^M^R)+V[14]+4259657740&4294967295,D=P+(N<<23&4294967295|N>>>9),N=R+(D^P^M)+V[1]+2763975236&4294967295,R=D+(N<<4&4294967295|N>>>28),N=M+(R^D^P)+V[4]+1272893353&4294967295,M=R+(N<<11&4294967295|N>>>21),N=P+(M^R^D)+V[7]+4139469664&4294967295,P=M+(N<<16&4294967295|N>>>16),N=D+(P^M^R)+V[10]+3200236656&4294967295,D=P+(N<<23&4294967295|N>>>9),N=R+(D^P^M)+V[13]+681279174&4294967295,R=D+(N<<4&4294967295|N>>>28),N=M+(R^D^P)+V[0]+3936430074&4294967295,M=R+(N<<11&4294967295|N>>>21),N=P+(M^R^D)+V[3]+3572445317&4294967295,P=M+(N<<16&4294967295|N>>>16),N=D+(P^M^R)+V[6]+76029189&4294967295,D=P+(N<<23&4294967295|N>>>9),N=R+(D^P^M)+V[9]+3654602809&4294967295,R=D+(N<<4&4294967295|N>>>28),N=M+(R^D^P)+V[12]+3873151461&4294967295,M=R+(N<<11&4294967295|N>>>21),N=P+(M^R^D)+V[15]+530742520&4294967295,P=M+(N<<16&4294967295|N>>>16),N=D+(P^M^R)+V[2]+3299628645&4294967295,D=P+(N<<23&4294967295|N>>>9),N=R+(P^(D|~M))+V[0]+4096336452&4294967295,R=D+(N<<6&4294967295|N>>>26),N=M+(D^(R|~P))+V[7]+1126891415&4294967295,M=R+(N<<10&4294967295|N>>>22),N=P+(R^(M|~D))+V[14]+2878612391&4294967295,P=M+(N<<15&4294967295|N>>>17),N=D+(M^(P|~R))+V[5]+4237533241&4294967295,D=P+(N<<21&4294967295|N>>>11),N=R+(P^(D|~M))+V[12]+1700485571&4294967295,R=D+(N<<6&4294967295|N>>>26),N=M+(D^(R|~P))+V[3]+2399980690&4294967295,M=R+(N<<10&4294967295|N>>>22),N=P+(R^(M|~D))+V[10]+4293915773&4294967295,P=M+(N<<15&4294967295|N>>>17),N=D+(M^(P|~R))+V[1]+2240044497&4294967295,D=P+(N<<21&4294967295|N>>>11),N=R+(P^(D|~M))+V[8]+1873313359&4294967295,R=D+(N<<6&4294967295|N>>>26),N=M+(D^(R|~P))+V[15]+4264355552&4294967295,M=R+(N<<10&4294967295|N>>>22),N=P+(R^(M|~D))+V[6]+2734768916&4294967295,P=M+(N<<15&4294967295|N>>>17),N=D+(M^(P|~R))+V[13]+1309151649&4294967295,D=P+(N<<21&4294967295|N>>>11),N=R+(P^(D|~M))+V[4]+4149444226&4294967295,R=D+(N<<6&4294967295|N>>>26),N=M+(D^(R|~P))+V[11]+3174756917&4294967295,M=R+(N<<10&4294967295|N>>>22),N=P+(R^(M|~D))+V[2]+718787259&4294967295,P=M+(N<<15&4294967295|N>>>17),N=D+(M^(P|~R))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.v=function(A,R){R===void 0&&(R=A.length);const D=R-this.blockSize,V=this.C;let P=this.h,M=0;for(;M<R;){if(P==0)for(;M<=D;)l(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<R;)if(V[P++]=A.charCodeAt(M++),P==this.blockSize){l(this,V),P=0;break}}else for(;M<R;)if(V[P++]=A[M++],P==this.blockSize){l(this,V),P=0;break}}this.h=P,this.o+=R},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,D=0;D<4;++D)for(let V=0;V<32;V+=8)A[R++]=this.g[D]>>>V&255;return A};function u(A,R){var D=g;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=R(A)}function h(A,R){this.h=R;const D=[];let V=!0;for(let P=A.length-1;P>=0;P--){const M=A[P]|0;V&&M==R||(D[P]=M,V=!1)}this.g=D}var g={};function p(A){return-128<=A&&A<128?u(A,function(R){return new h([R|0],R<0?-1:0)}):new h([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return w;if(A<0)return k(y(-A));const R=[];let D=1;for(let V=0;A>=D;V++)R[V]=A/D|0,D*=4294967296;return new h(R,0)}function v(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return k(v(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(R,8));let V=w;for(let M=0;M<A.length;M+=8){var P=Math.min(8,A.length-M);const N=parseInt(A.substring(M,M+P),R);P<8?(P=y(Math.pow(R,P)),V=V.j(P).add(y(N))):(V=V.j(D),V=V.add(y(N)))}return V}var w=p(0),E=p(1),C=p(16777216);a=h.prototype,a.m=function(){if(z(this))return-k(this).m();let A=0,R=1;for(let D=0;D<this.g.length;D++){const V=this.i(D);A+=(V>=0?V:4294967296+V)*R,R*=4294967296}return A},a.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(L(this))return"0";if(z(this))return"-"+k(this).toString(A);const R=y(Math.pow(A,6));var D=this;let V="";for(;;){const P=X(D,R).g;D=B(D,P.j(R));let M=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=P,L(D))return M+V;for(;M.length<6;)M="0"+M;V=M+V}},a.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function L(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function z(A){return A.h==-1}a.l=function(A){return A=B(this,A),z(A)?-1:L(A)?0:1};function k(A){const R=A.g.length,D=[];for(let V=0;V<R;V++)D[V]=~A.g[V];return new h(D,~A.h).add(E)}a.abs=function(){return z(this)?k(this):this},a.add=function(A){const R=Math.max(this.g.length,A.g.length),D=[];let V=0;for(let P=0;P<=R;P++){let M=V+(this.i(P)&65535)+(A.i(P)&65535),N=(M>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);V=N>>>16,M&=65535,N&=65535,D[P]=N<<16|M}return new h(D,D[D.length-1]&-2147483648?-1:0)};function B(A,R){return A.add(k(R))}a.j=function(A){if(L(this)||L(A))return w;if(z(this))return z(A)?k(this).j(k(A)):k(k(this).j(A));if(z(A))return k(this.j(k(A)));if(this.l(C)<0&&A.l(C)<0)return y(this.m()*A.m());const R=this.g.length+A.g.length,D=[];for(var V=0;V<2*R;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(let P=0;P<A.g.length;P++){const M=this.i(V)>>>16,N=this.i(V)&65535,je=A.i(P)>>>16,ce=A.i(P)&65535;D[2*V+2*P]+=N*ce,$(D,2*V+2*P),D[2*V+2*P+1]+=M*ce,$(D,2*V+2*P+1),D[2*V+2*P+1]+=N*je,$(D,2*V+2*P+1),D[2*V+2*P+2]+=M*je,$(D,2*V+2*P+2)}for(A=0;A<R;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=R;A<2*R;A++)D[A]=0;return new h(D,0)};function $(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function I(A,R){this.g=A,this.h=R}function X(A,R){if(L(R))throw Error("division by zero");if(L(A))return new I(w,w);if(z(A))return R=X(k(A),R),new I(k(R.g),k(R.h));if(z(R))return R=X(A,k(R)),new I(k(R.g),R.h);if(A.g.length>30){if(z(A)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var D=E,V=R;V.l(A)<=0;)D=te(D),V=te(V);var P=se(D,1),M=se(V,1);for(V=se(V,2),D=se(D,2);!L(V);){var N=M.add(V);N.l(A)<=0&&(P=P.add(D),M=N),V=se(V,1),D=se(D,1)}return R=B(A,P.j(R)),new I(P,R)}for(P=w;A.l(R)>=0;){for(D=Math.max(1,Math.floor(A.m()/R.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),M=y(D),N=M.j(R);z(N)||N.l(A)>0;)D-=V,M=y(D),N=M.j(R);L(M)&&(M=E),P=P.add(M),A=B(A,N)}return new I(P,A)}a.B=function(A){return X(this,A).h},a.and=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)&A.i(V);return new h(D,this.h&A.h)},a.or=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)|A.i(V);return new h(D,this.h|A.h)},a.xor=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)^A.i(V);return new h(D,this.h^A.h)};function te(A){const R=A.g.length+1,D=[];for(let V=0;V<R;V++)D[V]=A.i(V)<<1|A.i(V-1)>>>31;return new h(D,A.h)}function se(A,R){const D=R>>5;R%=32;const V=A.g.length-D,P=[];for(let M=0;M<V;M++)P[M]=R>0?A.i(M+D)>>>R|A.i(M+D+1)<<32-R:A.i(M+D);return new h(P,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,j1=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Zr=h}).apply(typeof nb<"u"?nb:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R1,xc,C1,Pd,xp,I1,D1,M1;(function(){var a,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var x=0;x<d.length;++x){var _=d[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function l(d,x){if(x)e:{var _=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var G=d[S];if(!(G in _))break e;_=_[G]}d=d[d.length-1],S=_[d],x=x(S),x!=S&&x!=null&&e(_,d,{configurable:!0,writable:!0,value:x})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(x){var _=[],S;for(S in x)Object.prototype.hasOwnProperty.call(x,S)&&_.push([S,x[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function g(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function p(d,x,_){return d.call.apply(d.bind,arguments)}function y(d,x,_){return y=p,y.apply(null,arguments)}function v(d,x){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function w(d,x){function _(){}_.prototype=x.prototype,d.Z=x.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(S,G,J){for(var he=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)he[qe-2]=arguments[qe];return x.prototype[G].apply(S,he)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const x=d.length;if(x>0){const _=Array(x);for(let S=0;S<x;S++)_[S]=d[S];return _}return[]}function L(d,x){for(let S=1;S<arguments.length;S++){const G=arguments[S];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=d.length||0;const J=G.length||0;d.length=_+J;for(let he=0;he<J;he++)d[_+he]=G[he]}else d.push(G)}}class z{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function k(d){h.setTimeout(()=>{throw d},0)}function B(){var d=A;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class ${constructor(){this.h=this.g=null}add(x,_){const S=I.get();S.set(x,_),this.h?this.h.next=S:this.g=S,this.h=S}}var I=new z(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let te,se=!1,A=new $,R=()=>{const d=Promise.resolve(void 0);te=()=>{d.then(D)}};function D(){for(var d;d=B();){try{d.h.call(d.g)}catch(_){k(_)}var x=I;x.j(d),x.h<100&&(x.h++,d.next=x.g,x.g=d)}se=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,x),h.removeEventListener("test",_,x)}catch{}return d})();function N(d){return/^[\s\xa0]*$/.test(d)}function je(d,x){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,x)}w(je,P),je.prototype.init=function(d,x){const _=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget,x||(_=="mouseover"?x=d.fromElement:_=="mouseout"&&(x=d.toElement)),this.relatedTarget=x,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),Y=0;function oe(d,x,_,S,G){this.listener=d,this.proxy=null,this.src=x,this.type=_,this.capture=!!S,this.ha=G,this.key=++Y,this.da=this.fa=!1}function de(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d,x,_){for(const S in d)x.call(_,d[S],S,d)}function $e(d,x){for(const _ in d)x.call(void 0,d[_],_,d)}function U(d){const x={};for(const _ in d)x[_]=d[_];return x}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,x){let _,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(_ in S)d[_]=S[_];for(let J=0;J<ee.length;J++)_=ee[J],Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])}}function me(d){this.src=d,this.g={},this.h=0}me.prototype.add=function(d,x,_,S,G){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const he=Me(d,x,S,G);return he>-1?(x=d[he],_||(x.fa=!1)):(x=new oe(x,this.src,J,!!S,G),x.fa=_,d.push(x)),x};function Te(d,x){const _=x.type;if(_ in d.g){var S=d.g[_],G=Array.prototype.indexOf.call(S,x,void 0),J;(J=G>=0)&&Array.prototype.splice.call(S,G,1),J&&(de(x),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Me(d,x,_,S){for(let G=0;G<d.length;++G){const J=d[G];if(!J.da&&J.listener==x&&J.capture==!!_&&J.ha==S)return G}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Et={};function tt(d,x,_,S,G){if(Array.isArray(x)){for(let J=0;J<x.length;J++)tt(d,x[J],_,S,G);return null}return _=Ta(_),d&&d[ce]?d.J(x,_,g(S)?!!S.capture:!1,G):jn(d,x,_,!1,S,G)}function jn(d,x,_,S,G,J){if(!x)throw Error("Invalid event type");const he=g(G)?!!G.capture:!!G;let qe=_s(d);if(qe||(d[ze]=qe=new me(d)),_=qe.add(x,_,S,he,J),_.proxy)return _;if(S=Un(),_.proxy=S,S.src=d,S.listener=_,d.addEventListener)M||(G=he),G===void 0&&(G=!1),d.addEventListener(x.toString(),S,G);else if(d.attachEvent)d.attachEvent(Rn(x.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Un(){function d(_){return x.call(d.src,d.listener,_)}const x=or;return d}function Gn(d,x,_,S,G){if(Array.isArray(x))for(var J=0;J<x.length;J++)Gn(d,x[J],_,S,G);else S=g(S)?!!S.capture:!!S,_=Ta(_),d&&d[ce]?(d=d.i,J=String(x).toString(),J in d.g&&(x=d.g[J],_=Me(x,_,S,G),_>-1&&(de(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete d.g[J],d.h--)))):d&&(d=_s(d))&&(x=d.g[x.toString()],d=-1,x&&(d=Me(x,_,S,G)),(_=d>-1?x[d]:null)&&as(_))}function as(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[ce])Te(x.i,d);else{var _=d.type,S=d.proxy;x.removeEventListener?x.removeEventListener(_,S,d.capture):x.detachEvent?x.detachEvent(Rn(_),S):x.addListener&&x.removeListener&&x.removeListener(S),(_=_s(x))?(Te(_,d),_.h==0&&(_.src=null,x[ze]=null)):de(d)}}}function Rn(d){return d in Et?Et[d]:Et[d]="on"+d}function or(d,x){if(d.da)d=!0;else{x=new je(x,this);const _=d.listener,S=d.ha||d.src;d.fa&&as(d),d=_.call(S,x)}return d}function _s(d){return d=d[ze],d instanceof me?d:null}var cr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ta(d){return typeof d=="function"?d:(d[cr]||(d[cr]=function(x){return d.handleEvent(x)}),d[cr])}function gt(){V.call(this),this.i=new me(this),this.M=this,this.G=null}w(gt,V),gt.prototype[ce]=!0,gt.prototype.removeEventListener=function(d,x,_,S){Gn(this,d,x,_,S)};function Pt(d,x){var _,S=d.G;if(S)for(_=[];S;S=S.G)_.push(S);if(d=d.M,S=x.type||x,typeof x=="string")x=new P(x,d);else if(x instanceof P)x.target=x.target||d;else{var G=x;x=new P(S,d),ue(x,G)}G=!0;let J,he;if(_)for(he=_.length-1;he>=0;he--)J=x.g=_[he],G=Cn(J,S,!0,x)&&G;if(J=x.g=d,G=Cn(J,S,!0,x)&&G,G=Cn(J,S,!1,x)&&G,_)for(he=0;he<_.length;he++)J=x.g=_[he],G=Cn(J,S,!1,x)&&G}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var d=this.i;for(const x in d.g){const _=d.g[x];for(let S=0;S<_.length;S++)de(_[S]);delete d.g[x],d.h--}}this.G=null},gt.prototype.J=function(d,x,_,S){return this.i.add(String(d),x,!1,_,S)},gt.prototype.K=function(d,x,_,S){return this.i.add(String(d),x,!0,_,S)};function Cn(d,x,_,S){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();let G=!0;for(let J=0;J<x.length;++J){const he=x[J];if(he&&!he.da&&he.capture==_){const qe=he.listener,Kt=he.ha||he.src;he.fa&&Te(d.i,he),G=qe.call(Kt,S)!==!1&&G}}return G&&!S.defaultPrevented}function Ji(d,x){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:h.setTimeout(d,x||0)}function ur(d){d.g=Ji(()=>{d.g=null,d.i&&(d.i=!1,ur(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class Jt extends V{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ur(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(d){V.call(this),this.h=d,this.g={}}w(Lt,V);var rs=[];function na(d){xe(d.g,function(x,_){this.g.hasOwnProperty(_)&&as(x)},d),d.g={}}Lt.prototype.N=function(){Lt.Z.N.call(this),na(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ws=h.JSON.stringify,yo=h.JSON.parse,dr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function fi(){}function Zi(){}var is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){P.call(this,"d")}w(Zt,P);function $n(){P.call(this,"c")}w($n,P);var kt={},el=null;function In(){return el=el||new gt}kt.Ia="serverreachability";function tl(d){P.call(this,kt.Ia,d)}w(tl,P);function Es(d){const x=In();Pt(x,new tl(x))}kt.STAT_EVENT="statevent";function Sa(d,x){P.call(this,kt.STAT_EVENT,d),this.stat=x}w(Sa,P);function Ut(d){const x=In();Pt(x,new Sa(x,d))}kt.Ja="timingevent";function Ts(d,x){P.call(this,kt.Ja,d),this.size=x}w(Ts,P);function Yn(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},x)}function ls(){this.g=!0}ls.prototype.ua=function(){this.g=!1};function xo(d,x,_,S,G,J){d.info(function(){if(d.g)if(J){var he="",qe=J.split("&");for(let ut=0;ut<qe.length;ut++){var Kt=qe[ut].split("=");if(Kt.length>1){const It=Kt[0];Kt=Kt[1];const Rs=It.split("_");he=Rs.length>=2&&Rs[1]=="type"?he+(It+"="+Kt+"&"):he+(It+"=redacted&")}}}else he=null;else he=J;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+x+`
`+_+`
`+he})}function nl(d,x,_,S,G,J,he){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+x+`
`+_+`
`+J+" "+he})}function Ss(d,x,_,S){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+vo(d,_)+(S?" "+S:"")})}function Na(d,x){d.info(function(){return"TIMEOUT: "+x})}ls.prototype.info=function(){};function vo(d,x){if(!d.g)return x;if(!x)return null;try{const J=JSON.parse(x);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var _=J[d];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var G=S[0];if(G!="noop"&&G!="stop"&&G!="close")for(let he=1;he<S.length;he++)S[he]=""}}}}return ws(J)}catch{return x}}var sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},q={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fe;function be(){}w(be,fi),be.prototype.g=function(){return new XMLHttpRequest},fe=new be;function ye(d){return encodeURIComponent(String(d))}function Se(d){var x=1;d=d.split(":");const _=[];for(;x>0&&d.length;)_.push(d.shift()),x--;return d.length&&_.push(d.join(":")),_}function Re(d,x,_,S){this.j=d,this.i=x,this.l=_,this.S=S||1,this.V=new Lt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}var we={},Le={};function Ke(d,x,_){d.M=1,d.A=mi(Bt(x)),d.u=_,d.R=!0,Pe(d,null)}function Pe(d,x){d.F=Date.now(),en(d),d.B=Bt(d.A);var _=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),al(_.i,"t",S),d.C=0,_=d.j.L,d.h=new Oe,d.g=yu(d.j,_?x:null,!d.u),d.P>0&&(d.O=new Jt(y(d.Y,d,d.g),d.P)),x=d.V,_=d.g,S=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(rs[0]=G.toString()),G=rs);for(let J=0;J<G.length;J++){const he=tt(_,G[J],S||x.handleEvent,!1,x.h||x);if(!he)break;x.g[he.key]=he}x=d.J?U(d.J):{},d.u?(d.v||(d.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,x)):(d.v="GET",d.g.ea(d.B,d.v,null,x)),Es(),xo(d.i,d.v,d.B,d.l,d.S,d.u)}Re.prototype.ba=function(d){d=d.target;const x=this.O;x&&qs(d)==3?x.j():this.Y(d)},Re.prototype.Y=function(d){try{if(d==this.g)e:{const qe=qs(this.g),Kt=this.g.ya(),ut=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||bn(this.g)))){this.K||qe!=4||Kt==7||(Kt==8||ut<=0?Es(3):Es(2)),zt(this);var x=this.g.ca();this.X=x;var _=nt(this);if(this.o=x==200,nl(this.i,this.v,this.B,this.l,this.S,qe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var S,G=this.g;if((S=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(S)){var J=S;break t}}J=null}if(d=J)Ss(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zn(this,d);else{this.o=!1,this.m=3,Ut(12),$t(this),un(this);break e}}if(this.R){d=!0;let It;for(;!this.K&&this.C<_.length;)if(It=cn(this,_),It==Le){qe==4&&(this.m=4,Ut(14),d=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(It==we){this.m=4,Ut(15),Ss(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Ss(this.i,this.l,It,null),zn(this,It);if(Gt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||_.length!=0||this.h.h||(this.m=1,Ut(16),d=!1),this.o=this.o&&d,!d)Ss(this.i,this.l,_,"[Invalid Chunked Response]"),$t(this),un(this);else if(_.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ro(he),he.P=!0,Ut(11))}}else Ss(this.i,this.l,_,null),zn(this,_);qe==4&&$t(this),this.o&&!this.K&&(qe==4?fu(this.j,this):(this.o=!1,en(this)))}else Ca(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),$t(this),un(this)}}}catch{}finally{}};function nt(d){if(!Gt(d))return d.g.la();const x=bn(d.g);if(x==="")return"";let _="";const S=x.length,G=qs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return $t(d),un(d),"";d.h.i=new h.TextDecoder}for(let J=0;J<S;J++)d.h.h=!0,_+=d.h.i.decode(x[J],{stream:!(G&&J==S-1)});return x.length=0,d.h.g+=_,d.C=0,d.h.g}function Gt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function cn(d,x){var _=d.C,S=x.indexOf(`
`,_);return S==-1?Le:(_=Number(x.substring(_,S)),isNaN(_)?we:(S+=1,S+_>x.length?Le:(x=x.slice(S,S+_),d.C=S+_,x)))}Re.prototype.cancel=function(){this.K=!0,$t(this)};function en(d){d.T=Date.now()+d.H,vn(d,d.H)}function vn(d,x){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Yn(y(d.aa,d),x)}function zt(d){d.D&&(h.clearTimeout(d.D),d.D=null)}Re.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Na(this.i,this.B),this.M!=2&&(Es(),Ut(17)),$t(this),this.m=2,un(this)):vn(this,this.T-d)};function un(d){d.j.I==0||d.K||fu(d.j,d)}function $t(d){zt(d);var x=d.O;x&&typeof x.dispose=="function"&&x.dispose(),d.O=null,na(d.V),d.g&&(x=d.g,d.g=null,x.abort(),x.dispose())}function zn(d,x){try{var _=d.j;if(_.I!=0&&(_.g==d||lt(_.h,d))){if(!d.L&&lt(_.h,d)&&_.I==3){try{var S=_.Ba.g.parse(x)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)cl(_),vr(_);else break e;_i(_),Ut(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Yn(y(_.Va,_),6e3));ke(_.h)<=1&&_.ta&&(_.ta=void 0)}else ca(_,11)}else if((d.L||_.g==d)&&cl(_),!N(x))for(G=_.Ba.g.parse(x),x=0;x<G.length;x++){let ut=G[x];const It=ut[0];if(!(It<=_.K))if(_.K=It,ut=ut[1],_.I==2)if(ut[0]=="c"){_.M=ut[1],_.ba=ut[2];const Rs=ut[3];Rs!=null&&(_.ka=Rs,_.j.info("VER="+_.ka));const ua=ut[4];ua!=null&&(_.za=ua,_.j.info("SVER="+_.za));const Fs=ut[5];Fs!=null&&typeof Fs=="number"&&Fs>0&&(S=1.5*Fs,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Gs=d.g;if(Gs){const wi=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var J=S.h;J.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(dn(J,J.h),J.h=null))}if(S.G){const ul=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(S.wa=ul,ft(S.J,S.G,ul))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var he=d;if(S.na=gu(S,S.L?S.ba:null,S.W),he.L){Yt(S.h,he);var qe=he,Kt=S.O;Kt&&(qe.H=Kt),qe.D&&(zt(qe),en(qe)),S.g=he}else du(S);_.i.length>0&&oa(_)}else ut[0]!="stop"&&ut[0]!="close"||ca(_,7);else _.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?ca(_,7):Ao(_):ut[0]!="noop"&&_.l&&_.l.qa(ut),_.A=0)}}Es(4)}catch{}}var Tt=class{constructor(d,x){this.g=d,this.map=x}};function Aa(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ja(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ke(d){return d.h?1:d.g?d.g.size:0}function lt(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function dn(d,x){d.g?d.g.add(x):d.h=x}function Yt(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}Aa.prototype.cancel=function(){if(this.i=Bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const _ of d.g.values())x=x.concat(_.G);return x}return C(d.i)}var Ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(d,x){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const S=d[_].indexOf("=");let G,J=null;S>=0?(G=d[_].substring(0,S),J=d[_].substring(S+1)):G=d[_],x(G,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Dn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;d instanceof Dn?(this.l=d.l,gn(this,d.j),this.o=d.o,this.g=d.g,hr(this,d.u),this.h=d.h,bo(this,cu(d.i)),this.m=d.m):d&&(x=String(d).match(Ns))?(this.l=!1,gn(this,x[1]||"",!0),this.o=aa(x[2]||""),this.g=aa(x[3]||"",!0),hr(this,x[4]),this.h=aa(x[5]||"",!0),bo(this,x[6]||"",!0),this.m=aa(x[7]||"")):(this.l=!1,this.i=new mr(null,this.l))}Dn.prototype.toString=function(){const d=[];var x=this.j;x&&d.push(pi(x,sl,!0),":");var _=this.g;return(_||x=="file")&&(d.push("//"),(x=this.o)&&d.push(pi(x,sl,!0),"@"),d.push(ye(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(pi(_,_.charAt(0)=="/"?_o:iu,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",pi(_,lu)),d.join("")},Dn.prototype.resolve=function(d){const x=Bt(this);let _=!!d.j;_?gn(x,d.j):_=!!d.o,_?x.o=d.o:_=!!d.g,_?x.g=d.g:_=d.u!=null;var S=d.h;if(_)hr(x,d.u);else if(_=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var G=x.h.lastIndexOf("/");G!=-1&&(S=x.h.slice(0,G+1)+S)}if(G=S,G==".."||G==".")S="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){S=G.lastIndexOf("/",0)==0,G=G.split("/");const J=[];for(let he=0;he<G.length;){const qe=G[he++];qe=="."?S&&he==G.length&&J.push(""):qe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&he==G.length&&J.push("")):(J.push(qe),S=!0)}S=J.join("/")}else S=G}return _?x.h=S:_=d.i.toString()!=="",_?bo(x,cu(d.i)):_=!!d.m,_&&(x.m=d.m),x};function Bt(d){return new Dn(d)}function gn(d,x,_){d.j=_?aa(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function hr(d,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);d.u=x}else d.u=null}function bo(d,x,_){x instanceof mr?(d.i=x,rl(d.i,d.l)):(_||(x=pi(x,fr)),d.i=new mr(x,d.l))}function ft(d,x,_){d.i.set(x,_)}function mi(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function aa(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function pi(d,x,_){return typeof d=="string"?(d=encodeURI(d).replace(x,Qn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Qn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var sl=/[#\/\?@]/g,iu=/[#\?:]/g,_o=/[#\?]/g,fr=/[#\?@]/g,lu=/#/g;function mr(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function Xn(d){d.g||(d.g=new Map,d.h=0,d.i&&Kn(d.i,function(x,_){d.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}a=mr.prototype,a.add=function(d,x){Xn(this),this.i=null,d=pr(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(x),this.h+=1,this};function ou(d,x){Xn(d),x=pr(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function wo(d,x){return Xn(d),x=pr(d,x),d.g.has(x)}a.forEach=function(d,x){Xn(this),this.g.forEach(function(_,S){_.forEach(function(G){d.call(x,G,S,this)},this)},this)};function Eo(d,x){Xn(d);let _=[];if(typeof x=="string")wo(d,x)&&(_=_.concat(d.g.get(pr(d,x))));else for(d=Array.from(d.g.values()),x=0;x<d.length;x++)_=_.concat(d[x]);return _}a.set=function(d,x){return Xn(this),this.i=null,d=pr(this,d),wo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},a.get=function(d,x){return d?(d=Eo(this,d),d.length>0?String(d[0]):x):x};function al(d,x,_){ou(d,x),_.length>0&&(d.i=null,d.g.set(pr(d,x),C(_)),d.h+=_.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(let S=0;S<x.length;S++){var _=x[S];const G=ye(_);_=Eo(this,_);for(let J=0;J<_.length;J++){let he=G;_[J]!==""&&(he+="="+ye(_[J])),d.push(he)}}return this.i=d.join("&")};function cu(d){const x=new mr;return x.i=d.i,d.g&&(x.g=new Map(d.g),x.h=d.h),x}function pr(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function rl(d,x){x&&!d.j&&(Xn(d),d.i=null,d.g.forEach(function(_,S){const G=S.toLowerCase();S!=G&&(ou(this,S),al(this,G,_))},d)),d.j=x}function Bs(d,x){const _=new ls;if(h.Image){const S=new Image;S.onload=v(As,_,"TestLoadImage: loaded",!0,x,S),S.onerror=v(As,_,"TestLoadImage: error",!1,x,S),S.onabort=v(As,_,"TestLoadImage: abort",!1,x,S),S.ontimeout=v(As,_,"TestLoadImage: timeout",!1,x,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else x(!1)}function To(d,x){const _=new ls,S=new AbortController,G=setTimeout(()=>{S.abort(),As(_,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:S.signal}).then(J=>{clearTimeout(G),J.ok?As(_,"TestPingServer: ok",!0,x):As(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(G),As(_,"TestPingServer: error",!1,x)})}function As(d,x,_,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(_)}catch{}}function gr(){this.g=new dr}function ra(d){this.i=d.Sb||null,this.h=d.ab||!1}w(ra,fi),ra.prototype.g=function(){return new gi(this.i,this.h)};function gi(d,x){gt.call(this),this.H=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(gi,gt),a=gi.prototype,a.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=x,this.readyState=1,Hs(this)},a.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(x.body=d),(this.H||h).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},a.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;il(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function il(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}a.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?yr(this):Hs(this),this.readyState==3&&il(this)}},a.Oa=function(d){this.g&&(this.response=this.responseText=d,yr(this))},a.Na=function(d){this.g&&(this.response=d,yr(this))},a.ga=function(){this.g&&yr(this)};function yr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Hs(d)}a.setRequestHeader=function(d,x){this.A.append(d,x)},a.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=x.next();return d.join(`\r
`)};function Hs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function js(d){let x="";return xe(d,function(_,S){x+=S,x+=":",x+=_,x+=`\r
`}),x}function yi(d,x,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=js(_),typeof d=="string"?_!=null&&ye(_):ft(d,x,_))}function yt(d){gt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(yt,gt);var ia=/^https?$/i,So=["POST","PUT"];a=yt.prototype,a.Fa=function(d){this.H=d},a.ea=function(d,x,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fe.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(J){xi(this,J);return}if(d=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)_.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())_.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),G=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(So,x,void 0)>=0)||S||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of _)this.g.setRequestHeader(J,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){xi(this,J)}};function xi(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.o=5,No(d),Ra(d)}function No(d){d.A||(d.A=!0,Pt(d,"complete"),Pt(d,"error"))}a.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Pt(this,"complete"),Pt(this,"abort"),Ra(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),yt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?vi(this):this.Xa())},a.Xa=function(){vi(this)};function vi(d){if(d.h&&typeof u<"u"){if(d.v&&qs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Pt(d,"readystatechange"),qs(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var S;if(S=J===0){let he=String(d.D).match(Ns)[1]||null;!he&&h.self&&h.self.location&&(he=h.self.location.protocol.slice(0,-1)),S=!ia.test(he?he.toLowerCase():"")}_=S}if(_)Pt(d,"complete"),Pt(d,"success");else{d.o=6;try{var G=qs(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",No(d)}}finally{Ra(d)}}}}function Ra(d,x){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,x||Pt(d,"ready");try{_.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function qs(d){return d.g?d.g.readyState:0}a.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),yo(x)}};function bn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ca(d){const x={};d=(d.g&&qs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(N(d[S]))continue;var _=Se(d[S]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=x[G]||[];x[G]=J,J.push(_)}$e(x,function(S){return S.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(d,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||x}function xr(d){this.za=0,this.i=[],this.j=new ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=la("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=la("baseRetryDelayMs",5e3,d),this.Za=la("retryDelaySeedMs",1e4,d),this.Ta=la("forwardChannelMaxRetries",2,d),this.va=la("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Aa(d&&d.concurrentRequestLimit),this.Ba=new gr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=xr.prototype,a.ka=8,a.I=1,a.connect=function(d,x,_,S){Ut(0),this.W=d,this.H=x||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=gu(this,null,this.W),oa(this)};function Ao(d){if(ll(d),d.I==3){var x=d.V++,_=Bt(d.J);if(ft(_,"SID",d.M),ft(_,"RID",x),ft(_,"TYPE","terminate"),bi(d,_),x=new Re(d,d.j,x),x.M=2,x.A=mi(Bt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=x.A,_=!0),_||(x.g=yu(x.j,null),x.g.ea(x.A)),x.F=Date.now(),en(x)}pu(d)}function vr(d){d.g&&(Ro(d),d.g.cancel(),d.g=null)}function ll(d){vr(d),d.v&&(h.clearTimeout(d.v),d.v=null),cl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function oa(d){if(!ja(d.h)&&!d.m){d.m=!0;var x=d.Ea;te||R(),se||(te(),se=!0),A.add(x,d),d.D=0}}function ol(d,x){return ke(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=x.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Yn(y(d.Ea,d,x),mu(d,d.D)),d.D++,!0)}a.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new Re(this,this.j,d);let J=this.o;if(this.U&&(J?(J=U(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(G.J=J,J=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(x+=S,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=uu(this,G,x),_=Bt(this.J),ft(_,"RID",d),ft(_,"CVER",22),this.G&&ft(_,"X-HTTP-Session-Id",this.G),bi(this,_),J&&(this.R?x="headers="+ye(js(J))+"&"+x:this.u&&yi(_,this.u,J)),dn(this.h,G),this.Ra&&ft(_,"TYPE","init"),this.S?(ft(_,"$req",x),ft(_,"SID","null"),G.U=!0,Ke(G,_,null)):Ke(G,_,x),this.I=2}}else this.I==3&&(d?jo(this,d):this.i.length==0||ja(this.h)||jo(this))};function jo(d,x){var _;x?_=x.l:_=d.V++;const S=Bt(d.J);ft(S,"SID",d.M),ft(S,"RID",_),ft(S,"AID",d.K),bi(d,S),d.u&&d.o&&yi(S,d.u,d.o),_=new Re(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),x&&(d.i=x.G.concat(d.i)),x=uu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),dn(d.h,_),Ke(_,S,x)}function bi(d,x){d.H&&xe(d.H,function(_,S){ft(x,S,_)}),d.l&&xe({},function(_,S){ft(x,S,_)})}function uu(d,x,_){_=Math.min(d.i.length,_);const S=d.l?y(d.l.Ka,d.l,d):null;e:{var G=d.i;let qe=-1;for(;;){const Kt=["count="+_];qe==-1?_>0?(qe=G[0].g,Kt.push("ofs="+qe)):qe=0:Kt.push("ofs="+qe);let ut=!0;for(let It=0;It<_;It++){var J=G[It].g;const Rs=G[It].map;if(J-=qe,J<0)qe=Math.max(0,G[It].g-100),ut=!1;else try{J="req"+J+"_"||"";try{var he=Rs instanceof Map?Rs:Object.entries(Rs);for(const[ua,Fs]of he){let Gs=Fs;g(Fs)&&(Gs=ws(Fs)),Kt.push(J+ua+"="+encodeURIComponent(Gs))}}catch(ua){throw Kt.push(J+"type="+encodeURIComponent("_badmap")),ua}}catch{S&&S(Rs)}}if(ut){he=Kt.join("&");break e}}he=void 0}return d=d.i.splice(0,_),x.G=d,he}function du(d){if(!d.g&&!d.v){d.Y=1;var x=d.Da;te||R(),se||(te(),se=!0),A.add(x,d),d.A=0}}function _i(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Yn(y(d.Da,d),mu(d,d.A)),d.A++,!0)}a.Da=function(){if(this.v=null,hu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Yn(y(this.Wa,this),d)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),vr(this),hu(this))};function Ro(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function hu(d){d.g=new Re(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var x=Bt(d.na);ft(x,"RID","rpc"),ft(x,"SID",d.M),ft(x,"AID",d.K),ft(x,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(x,"TO",d.ia),ft(x,"TYPE","xmlhttp"),bi(d,x),d.u&&d.o&&yi(x,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=mi(Bt(x)),_.u=null,_.R=!0,Pe(_,d)}a.Va=function(){this.C!=null&&(this.C=null,vr(this),_i(this),Ut(19))};function cl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function fu(d,x){var _=null;if(d.g==x){cl(d),Ro(d),d.g=null;var S=2}else if(lt(d.h,x))_=x.G,Yt(d.h,x),S=1;else return;if(d.I!=0){if(x.o)if(S==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var G=d.D;S=In(),Pt(S,new Ts(S,_)),oa(d)}else du(d);else if(G=x.m,G==3||G==0&&x.X>0||!(S==1&&ol(d,x)||S==2&&_i(d)))switch(_&&_.length>0&&(x=d.h,x.i=x.i.concat(_)),G){case 1:ca(d,5);break;case 4:ca(d,10);break;case 3:ca(d,6);break;default:ca(d,2)}}}function mu(d,x){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*x}function ca(d,x){if(d.j.info("Error code "+x),x==2){var _=y(d.bb,d),S=d.Ua;const G=!S;S=new Dn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||gn(S,"https"),mi(S),G?Bs(S.toString(),_):To(S.toString(),_)}else Ut(2);d.I=0,d.l&&d.l.pa(x),pu(d),ll(d)}a.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function pu(d){if(d.I=0,d.ja=[],d.l){const x=Bn(d.h);(x.length!=0||d.i.length!=0)&&(L(d.ja,x),L(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function gu(d,x,_){var S=_ instanceof Dn?Bt(_):new Dn(_);if(S.g!="")x&&(S.g=x+"."+S.g),hr(S,S.u);else{var G=h.location;S=G.protocol,x=x?x+"."+G.hostname:G.hostname,G=+G.port;const J=new Dn(null);S&&gn(J,S),x&&(J.g=x),G&&hr(J,G),_&&(J.h=_),S=J}return _=d.G,x=d.wa,_&&x&&ft(S,_,x),ft(S,"VER",d.ka),bi(d,S),S}function yu(d,x,_){if(x&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Aa&&!d.ma?new yt(new ra({ab:_})):new yt(d.ma),x.Fa(d.L),x}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}a=xu.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function br(){}br.prototype.g=function(d,x){return new Hn(d,x)};function Hn(d,x){gt.call(this),this.g=new xr(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(d?d["X-WebChannel-Client-Profile"]=x.sa:d={"X-WebChannel-Client-Profile":x.sa}),this.g.U=d,(d=x&&x.Qb)&&!N(d)&&(this.g.u=d),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!N(x)&&(this.g.G=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new Ia(this)}w(Hn,gt),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Ao(this.g)},Hn.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=ws(d),d=_);x.i.push(new Tt(x.Ya++,d)),x.I==3&&oa(x)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Ao(this.g),delete this.g,Hn.Z.N.call(this)};function vu(d){Zt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const _ in x){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}w(vu,Zt);function bu(){$n.call(this),this.status=1}w(bu,$n);function Ia(d){this.g=d}w(Ia,xu),Ia.prototype.ra=function(){Pt(this.g,"a")},Ia.prototype.qa=function(d){Pt(this.g,new vu(d))},Ia.prototype.pa=function(d){Pt(this.g,new bu)},Ia.prototype.oa=function(){Pt(this.g,"b")},br.prototype.createWebChannel=br.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,M1=function(){return new br},D1=function(){return In()},I1=kt,xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,Pd=sa,q.COMPLETE="complete",C1=q,Zi.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",gt.prototype.listen=gt.prototype.J,xc=Zi,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,R1=yt}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});const sb="@firebase/firestore",ab="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new HR("@firebase/firestore");function Bl(){return $i.logLevel}function ve(a,...e){if($i.logLevel<=it.DEBUG){const n=e.map(eg);$i.debug(`Firestore (${ho}): ${a}`,...n)}}function tr(a,...e){if($i.logLevel<=it.ERROR){const n=e.map(eg);$i.error(`Firestore (${ho}): ${a}`,...n)}}function eo(a,...e){if($i.logLevel<=it.WARN){const n=e.map(eg);$i.warn(`Firestore (${ho}): ${a}`,...n)}}function eg(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(a,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,k1(a,r,n)}function k1(a,e,n){let r=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw tr(r),new Error(r)}function ht(a,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,a||k1(e,l,r)}function He(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(On.UNAUTHENTICATED)))}shutdown(){}}class FR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class GR{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0,42304);let r=this.i;const l=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new Wa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Wa,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Wa)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new O1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class $R{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Us(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ht(this.o===void 0,3512);const r=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=QR(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function Ze(a,e){return a<e?-1:a>e?1:0}function vp(a,e){const n=Math.min(a.length,e.length);for(let r=0;r<n;r++){const l=a.charAt(r),u=e.charAt(r);if(l!==u)return Zm(l)===Zm(u)?Ze(l,u):Zm(l)?1:-1}return Ze(a.length,e.length)}const XR=55296,WR=57343;function Zm(a){const e=a.charCodeAt(0);return e>=XR&&e<=WR}function to(a,e,n){return a.length===e.length&&a.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="__name__";class pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&De(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=pa.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Ze(e.length,n.length)}static compareSegments(e,n){const r=pa.isNumericId(e),l=pa.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?pa.extractNumericId(e).compare(pa.extractNumericId(n)):vp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class Nt extends pa{construct(e,n,r){return new Nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new Nt(n)}static emptyPath(){return new Nt([])}}const JR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends pa{construct(e,n,r){return new Nn(e,n,r)}static isValidIdentifier(e){return JR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ib}static keyField(){return new Nn([ib])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,l+=2}else g==="`"?(h=!h,l++):g!=="."||h?(r+=g,l++):(u(),l++)}if(u(),h)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(n)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Nt.fromString(e))}static fromName(e){return new Ae(Nt.fromString(e).popFirst(5))}static empty(){return new Ae(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(a,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function ZR(a,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function lb(a){if(!Ae.isDocumentKey(a))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ob(a){if(Ae.isDocumentKey(a))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function P1(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Eh(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":De(12329,{type:typeof a})}function xs(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eh(a);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(a,e){const n={typeString:a};return e&&(n.value=e),n}function Zc(a,e){if(!P1(a))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in a)){n=`JSON missing required field: '${r}'`;break}const h=a[r];if(l&&typeof h!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ge(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=-62135596800,ub=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ub);return new Ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cb)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ub}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:on("string",Ct._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Ct(0,0))}static max(){return new Ue(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;function eC(a,e){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,l=Ue.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new ti(l,Ae.empty(),e)}function tC(a){return new ti(a.readTime,a.key,kc)}class ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ti(Ue.min(),Ae.empty(),kc)}static max(){return new ti(Ue.max(),Ae.empty(),kc)}}function nC(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(a.documentKey,e.documentKey),n!==0?n:Ze(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(a){if(a.code!==re.FAILED_PRECONDITION||a.message!==sC)throw a;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,r)=>{n(e)}))}static reject(e){return new le(((n,r)=>{r(e)}))}static waitFor(e){return new le(((n,r)=>{let l=0,u=0,h=!1;e.forEach((g=>{++l,g.next((()=>{++u,h&&u===l&&n()}),(p=>r(p)))})),h=!0,u===l&&n()}))}static or(e){let n=le.resolve(!1);for(const r of e)n=n.next((l=>l?le.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new le(((r,l)=>{const u=e.length,h=new Array(u);let g=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((v=>{h[y]=v,++g,g===u&&r(h)}),(v=>l(v)))}}))}static doWhile(e,n){return new le(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function rC(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mo(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function Sh(a){return a==null}function Zd(a){return a===0&&1/a==-1/0}function iC(a){return typeof a=="number"&&Number.isInteger(a)&&!Zd(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="";function lC(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=db(e)),e=oC(a.get(n),e);return db(e)}function oC(a,e){let n=e;const r=a.length;for(let l=0;l<r;l++){const u=a.charAt(l);switch(u){case"\0":n+="";break;case L1:n+="";break;default:n+=u}}return n}function db(a){return a+L1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function ui(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function U1(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ad(this.root,e,this.comparator,!0)}}class Ad{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??Sn.RED,this.left=l??Sn.EMPTY,this.right=u??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new Sn(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Sn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fb(this.data.getIterator())}getIteratorFrom(e){return new fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new mn(this.comparator);return n.data=e,n}}class fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new ys([])}unionWith(e){let n=new mn(Nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ys(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new z1("Invalid base64 string: "+u):u}})(e);return new An(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new An(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const cC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(a){if(ht(!!a,39018),typeof a=="string"){let e=0;const n=cC.exec(a);if(ht(!!n,46558,{timestamp:a}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(a.seconds),nanos:Wt(a.nanos)}}function Wt(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function si(a){return typeof a=="string"?An.fromBase64String(a):An.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="server_timestamp",H1="__type__",q1="__previous_value__",F1="__local_write_time__";function sg(a){var n,r;return((r=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[H1])==null?void 0:r.stringValue)===B1}function Nh(a){const e=a.mapValue.fields[q1];return sg(e)?Nh(e):e}function Oc(a){const e=ni(a.mapValue.fields[F1].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,l,u,h,g,p,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const eh="(default)";class Vc{constructor(e,n){this.projectId=e,this.database=n||eh}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===eh}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="__type__",dC="__max__",jd={mapValue:{}},$1="__vector__",th="value";function ai(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?sg(a)?4:fC(a)?9007199254740991:hC(a)?10:11:De(28295,{value:a})}function wa(a,e){if(a===e)return!0;const n=ai(a);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Oc(a).isEqual(Oc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=ni(l.timestampValue),g=ni(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(l,u){return si(l.bytesValue).isEqual(si(u.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(l,u){return Wt(l.geoPointValue.latitude)===Wt(u.geoPointValue.latitude)&&Wt(l.geoPointValue.longitude)===Wt(u.geoPointValue.longitude)})(a,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Wt(l.integerValue)===Wt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=Wt(l.doubleValue),g=Wt(u.doubleValue);return h===g?Zd(h)===Zd(g):isNaN(h)&&isNaN(g)}return!1})(a,e);case 9:return to(a.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},g=u.mapValue.fields||{};if(hb(h)!==hb(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!wa(h[p],g[p])))return!1;return!0})(a,e);default:return De(52216,{left:a})}}function Pc(a,e){return(a.values||[]).find((n=>wa(n,e)))!==void 0}function no(a,e){if(a===e)return 0;const n=ai(a),r=ai(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(a.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=Wt(u.integerValue||u.doubleValue),p=Wt(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(a,e);case 3:return mb(a.timestampValue,e.timestampValue);case 4:return mb(Oc(a),Oc(e));case 5:return vp(a.stringValue,e.stringValue);case 6:return(function(u,h){const g=si(u),p=si(h);return g.compareTo(p)})(a.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),p=h.split("/");for(let y=0;y<g.length&&y<p.length;y++){const v=Ze(g[y],p[y]);if(v!==0)return v}return Ze(g.length,p.length)})(a.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=Ze(Wt(u.latitude),Wt(h.latitude));return g!==0?g:Ze(Wt(u.longitude),Wt(h.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return pb(a.arrayValue,e.arrayValue);case 10:return(function(u,h){var E,C,L,z;const g=u.fields||{},p=h.fields||{},y=(E=g[th])==null?void 0:E.arrayValue,v=(C=p[th])==null?void 0:C.arrayValue,w=Ze(((L=y==null?void 0:y.values)==null?void 0:L.length)||0,((z=v==null?void 0:v.values)==null?void 0:z.length)||0);return w!==0?w:pb(y,v)})(a.mapValue,e.mapValue);case 11:return(function(u,h){if(u===jd.mapValue&&h===jd.mapValue)return 0;if(u===jd.mapValue)return 1;if(h===jd.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),y=h.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const E=vp(p[w],v[w]);if(E!==0)return E;const C=no(g[p[w]],y[v[w]]);if(C!==0)return C}return Ze(p.length,v.length)})(a.mapValue,e.mapValue);default:throw De(23264,{he:n})}}function mb(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Ze(a,e);const n=ni(a),r=ni(e),l=Ze(n.seconds,r.seconds);return l!==0?l:Ze(n.nanos,r.nanos)}function pb(a,e){const n=a.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=no(n[l],r[l]);if(u)return u}return Ze(n.length,r.length)}function so(a){return bp(a)}function bp(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const r=ni(n);return`time(${r.seconds},${r.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return si(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return Ae.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=bp(u);return r+"]"})(a.arrayValue):"mapValue"in a?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of r)u?u=!1:l+=",",l+=`${h}:${bp(n.fields[h])}`;return l+"}"})(a.mapValue):De(61005,{value:a})}function Ld(a){switch(ai(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(a);return e?16+Ld(e):16;case 5:return 2*a.stringValue.length;case 6:return si(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Ld(u)),0)})(a.arrayValue);case 10:case 11:return(function(r){let l=0;return ui(r.fields,((u,h)=>{l+=u.length+Ld(h)})),l})(a.mapValue);default:throw De(13486,{value:a})}}function gb(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function _p(a){return!!a&&"integerValue"in a}function ag(a){return!!a&&"arrayValue"in a}function yb(a){return!!a&&"nullValue"in a}function xb(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Ud(a){return!!a&&"mapValue"in a}function hC(a){var n,r;return((r=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[G1])==null?void 0:r.stringValue)===$1}function Sc(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return ui(a.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Sc(r))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sc(a.arrayValue.values[n]);return e}return{...a}}function fC(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===dC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(n)}setAll(e){let n=Nn.emptyPath(),r={},l=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,l),r={},l=[],n=g.popLast()}h?r[g.lastSegment()]=Sc(h):l.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];Ud(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){ui(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new ss(Sc(this.value))}}function Y1(a){const e=[];return ui(a.fields,((n,r)=>{const l=new Nn([n]);if(Ud(r)){const u=Y1(r.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new ys(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r,l,u,h,g){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Vn(e,0,Ue.min(),Ue.min(),Ue.min(),ss.empty(),0)}static newFoundDocument(e,n,r,l){return new Vn(e,1,n,Ue.min(),r,l,0)}static newNoDocument(e,n){return new Vn(e,2,n,Ue.min(),Ue.min(),ss.empty(),0)}static newUnknownDocument(e,n){return new Vn(e,3,n,Ue.min(),Ue.min(),ss.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.position=e,this.inclusive=n}}function vb(a,e,n){let r=0;for(let l=0;l<a.position.length;l++){const u=e[l],h=a.position[l];if(u.field.isKeyField()?r=Ae.comparator(Ae.fromName(h.referenceValue),n.key):r=no(h,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function bb(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!wa(a.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mC(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class ln extends K1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gC(e,n,r):n==="array-contains"?new vC(e,r):n==="in"?new bC(e,r):n==="not-in"?new _C(e,r):n==="array-contains-any"?new wC(e,r):new ln(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yC(e,r):new xC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(no(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends K1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ta(e,n)}matches(e){return Q1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Q1(a){return a.op==="and"}function X1(a){return pC(a)&&Q1(a)}function pC(a){for(const e of a.filters)if(e instanceof ta)return!1;return!0}function wp(a){if(a instanceof ln)return a.field.canonicalString()+a.op.toString()+so(a.value);if(X1(a))return a.filters.map((e=>wp(e))).join(",");{const e=a.filters.map((n=>wp(n))).join(",");return`${a.op}(${e})`}}function W1(a,e){return a instanceof ln?(function(r,l){return l instanceof ln&&r.op===l.op&&r.field.isEqual(l.field)&&wa(r.value,l.value)})(a,e):a instanceof ta?(function(r,l){return l instanceof ta&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,h,g)=>u&&W1(h,l.filters[g])),!0):!1})(a,e):void De(19439)}function J1(a){return a instanceof ln?(function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`})(a):a instanceof ta?(function(n){return n.op.toString()+" {"+n.getFilters().map(J1).join(" ,")+"}"})(a):"Filter"}class gC extends ln{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class yC extends ln{constructor(e,n){super(e,"in",n),this.keys=Z1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xC extends ln{constructor(e,n){super(e,"not-in",n),this.keys=Z1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Z1(a,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class vC extends ln{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&Pc(n.arrayValue,this.value)}}class bC extends ln{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pc(this.value.arrayValue,n)}}class _C extends ln{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pc(this.value.arrayValue,n)}}class wC extends ln{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Pc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n=null,r=[],l=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function _b(a,e=null,n=[],r=[],l=null,u=null,h=null){return new EC(a,e,n,r,l,u,h)}function rg(a){const e=He(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>wp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>so(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>so(r))).join(",")),e.Te=n}return e.Te}function ig(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!mC(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!W1(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!bb(a.startAt,e.startAt)&&bb(a.endAt,e.endAt)}function Ep(a){return Ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n=null,r=[],l=[],u=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TC(a,e,n,r,l,u,h,g){return new po(a,e,n,r,l,u,h,g)}function Ah(a){return new po(a)}function wb(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function ew(a){return a.collectionGroup!==null}function Nc(a){const e=He(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new mn(Nn.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Lc(u,r))})),n.has(Nn.keyField().canonicalString())||e.Ie.push(new Lc(Nn.keyField(),r))}return e.Ie}function xa(a){const e=He(a);return e.Ee||(e.Ee=SC(e,Nc(a))),e.Ee}function SC(a,e){if(a.limitType==="F")return _b(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Lc(l.field,u)}));const n=a.endAt?new nh(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new nh(a.startAt.position,a.startAt.inclusive):null;return _b(a.path,a.collectionGroup,e,a.filters,a.limit,n,r)}}function Tp(a,e){const n=a.filters.concat([e]);return new po(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function sh(a,e,n){return new po(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function jh(a,e){return ig(xa(a),xa(e))&&a.limitType===e.limitType}function tw(a){return`${rg(xa(a))}|lt:${a.limitType}`}function Hl(a){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>J1(l))).join(", ")}]`),Sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>so(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>so(l))).join(",")),`Target(${r})`})(xa(a))}; limitType=${a.limitType})`}function Rh(a,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ae.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(a,e)&&(function(r,l){for(const u of Nc(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(a,e)&&(function(r,l){return!(r.startAt&&!(function(h,g,p){const y=vb(h,g,p);return h.inclusive?y<=0:y<0})(r.startAt,Nc(r),l)||r.endAt&&!(function(h,g,p){const y=vb(h,g,p);return h.inclusive?y>=0:y>0})(r.endAt,Nc(r),l))})(a,e)}function NC(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function nw(a){return(e,n)=>{let r=!1;for(const l of Nc(a)){const u=AC(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function AC(a,e,n){const r=a.field.isKeyField()?Ae.comparator(e.key,n.key):(function(u,h,g){const p=h.data.field(u),y=g.data.field(u);return p!==null&&y!==null?no(p,y):De(42886)})(a.field,e,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return U1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Vt(Ae.comparator);function nr(){return jC}const sw=new Vt(Ae.comparator);function vc(...a){let e=sw;for(const n of a)e=e.insert(n.key,n);return e}function aw(a){let e=sw;return a.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ui(){return Ac()}function rw(){return Ac()}function Ac(){return new Xi((a=>a.toString()),((a,e)=>a.isEqual(e)))}const RC=new Vt(Ae.comparator),CC=new mn(Ae.comparator);function et(...a){let e=CC;for(const n of a)e=e.add(n);return e}const IC=new mn(Ze);function DC(){return IC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(e)?"-0":e}}function iw(a){return{integerValue:""+a}}function MC(a,e){return iC(e)?iw(e):lg(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this._=void 0}}function kC(a,e,n){return a instanceof ah?(function(l,u){const h={fields:{[H1]:{stringValue:B1},[F1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&sg(u)&&(u=Nh(u)),u&&(h.fields[q1]=u),{mapValue:h}})(n,e):a instanceof Uc?ow(a,e):a instanceof zc?cw(a,e):(function(l,u){const h=lw(l,u),g=Eb(h)+Eb(l.Ae);return _p(h)&&_p(l.Ae)?iw(g):lg(l.serializer,g)})(a,e)}function OC(a,e,n){return a instanceof Uc?ow(a,e):a instanceof zc?cw(a,e):n}function lw(a,e){return a instanceof rh?(function(r){return _p(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class ah extends Ch{}class Uc extends Ch{constructor(e){super(),this.elements=e}}function ow(a,e){const n=uw(e);for(const r of a.elements)n.some((l=>wa(l,r)))||n.push(r);return{arrayValue:{values:n}}}class zc extends Ch{constructor(e){super(),this.elements=e}}function cw(a,e){let n=uw(e);for(const r of a.elements)n=n.filter((l=>!wa(l,r)));return{arrayValue:{values:n}}}class rh extends Ch{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Eb(a){return Wt(a.integerValue||a.doubleValue)}function uw(a){return ag(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function VC(a,e){return a.field.isEqual(e.field)&&(function(r,l){return r instanceof Uc&&l instanceof Uc||r instanceof zc&&l instanceof zc?to(r.elements,l.elements,wa):r instanceof rh&&l instanceof rh?wa(r.Ae,l.Ae):r instanceof ah&&l instanceof ah})(a.transform,e.transform)}class PC{constructor(e,n){this.version=e,this.transformResults=n}}class Zs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zs}static exists(e){return new Zs(void 0,e)}static updateTime(e){return new Zs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Ih{}function dw(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new og(a.key,Zs.none()):new eu(a.key,a.data,Zs.none());{const n=a.data,r=ss.empty();let l=new mn(Nn.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?r.delete(u):r.set(u,h),l=l.add(u)}return new di(a.key,r,new ys(l.toArray()),Zs.none())}}function LC(a,e,n){a instanceof eu?(function(l,u,h){const g=l.value.clone(),p=Sb(l.fieldTransforms,u,h.transformResults);g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(a,e,n):a instanceof di?(function(l,u,h){if(!zd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const g=Sb(l.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(hw(l)),p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(a,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function jc(a,e,n,r){return a instanceof eu?(function(u,h,g,p){if(!zd(u.precondition,h))return g;const y=u.value.clone(),v=Nb(u.fieldTransforms,p,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(a,e,n,r):a instanceof di?(function(u,h,g,p){if(!zd(u.precondition,h))return g;const y=Nb(u.fieldTransforms,p,h),v=h.data;return v.setAll(hw(u)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(a,e,n,r):(function(u,h,g){return zd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(a,e,n)}function UC(a,e){let n=null;for(const r of a.fieldTransforms){const l=e.data.field(r.field),u=lw(r.transform,l||null);u!=null&&(n===null&&(n=ss.empty()),n.set(r.field,u))}return n||null}function Tb(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&to(r,l,((u,h)=>VC(u,h)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class eu extends Ih{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class di extends Ih{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function hw(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=a.data.field(n);e.set(n,r)}})),e}function Sb(a,e,n){const r=new Map;ht(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let l=0;l<n.length;l++){const u=a[l],h=u.transform,g=e.data.field(u.field);r.set(u.field,OC(h,g,n[l]))}return r}function Nb(a,e,n){const r=new Map;for(const l of a){const u=l.transform,h=n.data.field(l.field);r.set(l.field,kC(u,h,e))}return r}class og extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zC extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&LC(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rw();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(l.key)?null:g;const p=dw(h,g);p!==null&&r.set(l.key,p),h.isValidDocument()||h.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),et())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((n,r)=>Tb(n,r)))&&to(this.baseMutations,e.baseMutations,((n,r)=>Tb(n,r)))}}class cg{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){ht(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return RC})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,r[h].version);return new cg(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,at;function FC(a){switch(a){case re.OK:return De(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De(15467,{code:a})}}function fw(a){if(a===void 0)return tr("GRPC error has no .code"),re.UNKNOWN;switch(a){case rn.OK:return re.OK;case rn.CANCELLED:return re.CANCELLED;case rn.UNKNOWN:return re.UNKNOWN;case rn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case rn.INTERNAL:return re.INTERNAL;case rn.UNAVAILABLE:return re.UNAVAILABLE;case rn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case rn.NOT_FOUND:return re.NOT_FOUND;case rn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case rn.ABORTED:return re.ABORTED;case rn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case rn.DATA_LOSS:return re.DATA_LOSS;default:return De(39323,{code:a})}}(at=rn||(rn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new Zr([4294967295,4294967295],0);function Ab(a){const e=GC().encode(a),n=new j1;return n.update(e),new Uint8Array(n.digest())}function jb(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([l,u],0)]}class ug{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bc(`Invalid padding: ${n}`);if(r<0)throw new bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Zr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Zr.fromNumber(r)));return l.compare($C)===1&&(l=new Zr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ab(e),[r,l]=jb(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,l,u);if(!this.we(h))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ug(u,l,n);return r.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=Ab(e),[r,l]=jb(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,l,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dh(Ue.min(),l,new Vt(Ze),nr(),et())}}class tu{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tu(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class mw{constructor(e,n){this.targetId=e,this.Ce=n}}class pw{constructor(e,n,r=An.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Rb{constructor(){this.ve=0,this.Fe=Cb(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),r=et();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:De(38017,{changeType:u})}})),new tu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Cb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YC{constructor(e){this.Ge=e,this.ze=new Map,this.je=nr(),this.Je=Rd(),this.He=Rd(),this.Ye=new Vt(Ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Ep(u))if(r===0){const h=new Ae(u.path);this.et(n,h,Vn.newNoDocument(h,Ue.min()))}else ht(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let h,g;try{h=si(r).toUint8Array()}catch(p){if(p instanceof z1)return eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new ug(h,l,u)}catch(p){return eo(p instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Ep(g.target)){const p=new Ae(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Vn.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let r=et();this.He.forEach(((u,h)=>{let g=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new Dh(e,n,this.Ye,this.je,r);return this.je=nr(),this.Je=Rd(),this.He=Rd(),this.Ye=new Vt(Ze),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new mn(Ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new mn(Ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rd(){return new Vt(Ae.comparator)}function Cb(){return new Vt(Ae.comparator)}const KC={asc:"ASCENDING",desc:"DESCENDING"},QC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XC={and:"AND",or:"OR"};class WC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sp(a,e){return a.useProto3Json||Sh(e)?e:{value:e}}function ih(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gw(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function JC(a,e){return ih(a,e.toTimestamp())}function va(a){return ht(!!a,49232),Ue.fromTimestamp((function(n){const r=ni(n);return new Ct(r.seconds,r.nanos)})(a))}function dg(a,e){return Np(a,e).canonicalString()}function Np(a,e){const n=(function(l){return new Nt(["projects",l.projectId,"databases",l.database])})(a).child("documents");return e===void 0?n:n.child(e)}function yw(a){const e=Nt.fromString(a);return ht(ww(e),10190,{key:e.toString()}),e}function Ap(a,e){return dg(a.databaseId,e.path)}function ep(a,e){const n=yw(e);if(n.get(1)!==a.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Ae(vw(n))}function xw(a,e){return dg(a.databaseId,e)}function ZC(a){const e=yw(a);return e.length===4?Nt.emptyPath():vw(e)}function jp(a){return new Nt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function vw(a){return ht(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Ib(a,e,n){return{name:Ap(a,e),fields:n.value.mapValue.fields}}function eI(a,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:De(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,v){return y.useProto3Json?(ht(v===void 0||typeof v=="string",58123),An.fromBase64String(v||"")):(ht(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),An.fromUint8Array(v||new Uint8Array))})(a,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(y){const v=y.code===void 0?re.UNKNOWN:fw(y.code);return new ge(v,y.message||"")})(h);n=new pw(r,l,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=ep(a,r.document.name),u=va(r.document.updateTime),h=r.document.createTime?va(r.document.createTime):Ue.min(),g=new ss({mapValue:{fields:r.document.fields}}),p=Vn.newFoundDocument(l,u,h,g),y=r.targetIds||[],v=r.removedTargetIds||[];n=new Bd(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=ep(a,r.document),u=r.readTime?va(r.readTime):Ue.min(),h=Vn.newNoDocument(l,u),g=r.removedTargetIds||[];n=new Bd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=ep(a,r.document),u=r.removedTargetIds||[];n=new Bd([],u,l,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,h=new qC(l,u),g=r.targetId;n=new mw(g,h)}}return n}function tI(a,e){let n;if(e instanceof eu)n={update:Ib(a,e.key,e.value)};else if(e instanceof og)n={delete:Ap(a,e.key)};else if(e instanceof di)n={update:Ib(a,e.key,e.data),updateMask:uI(e.fieldMask)};else{if(!(e instanceof zC))return De(16599,{Vt:e.type});n={verify:Ap(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,h){const g=h.transform;if(g instanceof ah)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Uc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof zc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof rh)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw De(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:JC(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:De(27497)})(a,e.precondition)),n}function nI(a,e){return a&&a.length>0?(ht(e!==void 0,14353),a.map((n=>(function(l,u){let h=l.updateTime?va(l.updateTime):va(u);return h.isEqual(Ue.min())&&(h=va(u)),new PC(h,l.transformResults||[])})(n,e)))):[]}function sI(a,e){return{documents:[xw(a,e.path)]}}function aI(a,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xw(a,l);const u=(function(y){if(y.length!==0)return _w(ta.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((v=>(function(E){return{field:ql(E.field),direction:lI(E.dir)}})(v)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Sp(a,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function rI(a){let e=ZC(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){ht(r===1,65062);const v=n.from[0];v.allDescendants?l=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(w){const E=bw(w);return E instanceof ta&&X1(E)?E.getFilters():[E]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((E=>(function(L){return new Lc(Fl(L.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(E)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let E;return E=typeof w=="object"?w.value:w,Sh(E)?null:E})(n.limit));let p=null;n.startAt&&(p=(function(w){const E=!!w.before,C=w.values||[];return new nh(C,E)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const E=!w.before,C=w.values||[];return new nh(C,E)})(n.endAt)),TC(e,l,h,u,g,"F",p,y)}function iI(a,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bw(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fl(n.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Fl(n.unaryFilter.field);return ln.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Fl(n.unaryFilter.field);return ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Fl(n.unaryFilter.field);return ln.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(a):a.fieldFilter!==void 0?(function(n){return ln.create(Fl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return ta.create(n.compositeFilter.filters.map((r=>bw(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(n.compositeFilter.op))})(a):De(30097,{filter:a})}function lI(a){return KC[a]}function oI(a){return QC[a]}function cI(a){return XC[a]}function ql(a){return{fieldPath:a.canonicalString()}}function Fl(a){return Nn.fromServerFormat(a.fieldPath)}function _w(a){return a instanceof ln?(function(n){if(n.op==="=="){if(xb(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NAN"}};if(yb(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xb(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NAN"}};if(yb(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(n.field),op:oI(n.op),value:n.value}}})(a):a instanceof ta?(function(n){const r=n.getFilters().map((l=>_w(l)));return r.length===1?r[0]:{compositeFilter:{op:cI(n.op),filters:r}}})(a):De(54877,{filter:a})}function uI(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ww(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,l,u=Ue.min(),h=Ue.min(),g=An.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.yt=e}}function hI(a){const e=rI({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.Cn=new mI}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(ti.min())}updateCollectionGroup(e,n,r){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class mI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new mn(Nt.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new mn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ew=41943040;class ns{static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(Ew,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ao(0)}static cr(){return new ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="LruGarbageCollector",pI=1048576;function kb([a,e],[n,r]){const l=Ze(a,n);return l===0?Ze(e,r):l}class gI{constructor(e){this.Ir=e,this.buffer=new mn(kb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Mb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?ve(Mb,"Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Vr(3e5)}))}}class xI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Th.ce);const r=new gI(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Db)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Db):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,u,h,g,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,h=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(r=w,g=Date.now(),this.removeTargets(e,r,n)))).next((w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),Bl()<=it.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${l} in `+(g-h)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function vI(a,e){return new xI(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.changes=new Xi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&jc(r.mutation,l,ys.empty(),Ct.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,et()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=et()){const l=Ui();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let h=vc();return u.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=Ui();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,et())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,r,l){let u=nr();const h=Ac(),g=(function(){return Ac()})();return n.forEach(((p,y)=>{const v=r.get(y.key);l.has(y.key)&&(v===void 0||v.mutation instanceof di)?u=u.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),jc(v.mutation,y,v.mutation.getFieldMask(),Ct.now())):h.set(y.key,ys.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,v)=>h.set(y,v))),n.forEach(((y,v)=>g.set(y,new _I(v,h.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=Ac();let l=new Vt(((h,g)=>h-g)),u=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let v=r.get(p)||ys.empty();v=g.applyToLocalView(y,v),r.set(p,v);const w=(l.get(g.batchId)||et()).add(p);l=l.insert(g.batchId,w)}))})).next((()=>{const h=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,v=p.value,w=rw();v.forEach((E=>{if(!u.has(E)){const C=dw(n.get(E),r.get(E));C!==null&&w.set(E,C),u=u.add(E)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return le.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(h){return Ae.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ew(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):le.resolve(Ui());let g=kc,p=u;return h.next((y=>le.forEach(y,((v,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{p=p.insert(v,E)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,et()))).next((v=>({batchId:g,changes:aw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((r=>{let l=vc();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let h=vc();return this.indexManager.getCollectionParents(e,u).next((g=>le.forEach(g,(p=>{const y=(function(w,E){return new po(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,l).next((v=>{v.forEach(((w,E)=>{h=h.insert(w,E)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((h=>{u.forEach(((p,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Vn.newInvalidDocument(v)))}));let g=vc();return h.forEach(((p,y)=>{const v=u.get(p);v!==void 0&&jc(v.mutation,y,ys.empty(),Ct.now()),Rh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:va(l.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:hI(l.bundledQuery),readTime:va(l.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.overlays=new Vt(Ae.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ui();return le.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.St(e,n,u)})),le.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),le.resolve()}getOverlaysForCollection(e,n,r){const l=Ui(),u=n.length+1,h=new Ae(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>r&&l.set(p.getKey(),p)}return le.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Vt(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let v=u.get(y.largestBatchId);v===null&&(v=Ui(),u=u.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const g=Ui(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>g.set(y,v))),!(g.size()>=l)););return le.resolve(g)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const h=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new HC(n,r));let u=this.qr.get(n);u===void 0&&(u=et(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new mn(xn.$r),this.Ur=new mn(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new xn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ae(new Nt([])),r=new xn(n,e),l=new xn(n,e+1),u=[];return this.Ur.forEachInRange([r,l],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ae(new Nt([])),r=new xn(n,e),l=new xn(n,e+1);let u=et();return this.Ur.forEachInRange([r,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new xn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ae.comparator(e.key,n.key)||Ze(e.Yr,n.Yr)}static Kr(e,n){return Ze(e.Yr,n.Yr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new mn(xn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new BC(u,n,r,l);this.mutationQueue.push(h);for(const g of l)this.Zr=this.Zr.add(new xn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(h)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?ng:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xn(n,0),l=new xn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(h=>{const g=this.Xr(h.Yr);u.push(g)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mn(Ze);return n.forEach((l=>{const u=new xn(l,0),h=new xn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(g=>{r=r.add(g.Yr)}))})),le.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;Ae.isDocumentKey(u)||(u=u.child(""));const h=new xn(new Ae(u),0);let g=new mn(Ze);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Yr)),!0)}),h),le.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return le.forEach(n.mutations,(l=>{const u=new xn(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new xn(n,0),l=this.Zr.firstAfterOrEqual(r);return le.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.ri=e,this.docs=(function(){return new Vt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return le.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():Vn.newInvalidDocument(l))})),le.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=nr();const h=n.path,g=new Ae(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||nC(tC(v),r)<=0||(l.has(v.key)||Rh(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,r,l){De(9500)}ii(e,n){return le.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jI(this)}getSize(e){return le.resolve(this.size)}}class jI extends bI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.persistence=e,this.si=new Xi((n=>rg(n)),ig),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=ao.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ao(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),le.waitFor(u).next((()=>l))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return le.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),le.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return le.resolve(r)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Th(0),this.li=!1,this.li=!0,this.hi=new SI,this.referenceDelegate=e(this),this.Pi=new RI(this),this.indexManager=new fI,this.remoteDocumentCache=(function(l){return new AI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dI(n),this.Ii=new EI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new NI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const l=new CI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return le.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class CI extends aC{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),le.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(r=>{const l=Ae.fromPath(r);return this.gi(e,l).next((u=>{u||n.removeEntry(l,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lh{constructor(e,n){this.persistence=e,this.pi=new Xi((r=>lC(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=vI(this,n)}static mi(e,n){return new lh(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?le.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(h=>this.br(e,h,n).next((g=>{g||(r++,u.removeEntry(h,Ue.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ld(e.data.value)),n}br(e,n,r){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return le.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=et(),l=et();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new mg(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QN()?8:rC(Ln())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,l,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new II;return this.Ss(e,n,h).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>u.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(Bl()<=it.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(Bl()<=it.DEBUG&&ve("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Bl()<=it.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xa(n))):le.resolve())}ys(e,n){if(wb(n))return le.resolve(null);let r=xa(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=sh(n,null,"F"),r=xa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const h=et(...u);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,h,p.readTime)?this.ys(e,sh(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,r,l){return wb(n)||l.isEqual(Ue.min())?le.resolve(null):this.ps.getDocuments(e,r).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,r,l)?le.resolve(null):(Bl()<=it.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Hl(n)),this.vs(e,h,n,eC(l,kc)).next((g=>g)))}))}Ds(e,n){let r=new mn(nw(e));return n.forEach(((l,u)=>{Rh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,r){return Bl()<=it.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.ps.getDocumentsMatchingQuery(e,n,ti.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="LocalStore",MI=3e8;class kI{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Vt(Ze),this.xs=new Xi((u=>rg(u)),ig),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function OI(a,e,n,r){return new kI(a,e,n,r)}async function Sw(a,e){const n=He(a);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],g=[];let p=et();for(const y of l){h.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of u){g.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(r,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:g})))}))}))}function VI(a,e){const n=He(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,v){const w=y.batch,E=w.keys();let C=le.resolve();return E.forEach((L=>{C=C.next((()=>v.getEntry(p,L))).next((z=>{const k=y.docVersions.get(L);ht(k!==null,48541),z.version.compareTo(k)<0&&(w.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),v.addEntry(z)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(p,w)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=et();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function Nw(a){const e=He(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function PI(a,e){const n=He(a),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];e.targetChanges.forEach(((v,w)=>{const E=l.get(w);if(!E)return;g.push(n.Pi.removeMatchingKeys(u,v.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,v.addedDocuments,w))));let C=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(An.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),l=l.insert(w,C),(function(z,k,B){return z.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=MI?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(E,C,v)&&g.push(n.Pi.updateTargetData(u,C))}));let p=nr(),y=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),g.push(LI(u,h,e.documentUpdates).next((v=>{p=v.ks,y=v.qs}))),!r.isEqual(Ue.min())){const v=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(v)}return le.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=l,u)))}function LI(a,e,n){let r=et(),l=et();return n.forEach((u=>r=r.add(u))),e.getEntries(a,r).next((u=>{let h=nr();return n.forEach(((g,p)=>{const y=u.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):ve(pg,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:l}}))}function UI(a,e){const n=He(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ng),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zI(a,e){const n=He(a);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((u=>u?(l=u,le.resolve(l)):n.Pi.allocateTargetId(r).next((h=>(l=new Qr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Rp(a,e,n){const r=He(a),l=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!mo(h))throw h;ve(pg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Ob(a,e,n){const r=He(a);let l=Ue.min(),u=et();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,v){const w=He(p),E=w.xs.get(v);return E!==void 0?le.resolve(w.Ms.get(E)):w.Pi.getTargetData(y,v)})(r,h,xa(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?l:Ue.min(),n?u:et()))).next((g=>(BI(r,NC(e),g),{documents:g,Qs:u})))))}function BI(a,e,n){let r=a.Os.get(e)||Ue.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),a.Os.set(e,r)}class Vb{constructor(){this.activeTargetIds=DC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HI{constructor(){this.Mo=new Vb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="ConnectivityMonitor";class Lb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Pb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Pb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd=null;function Cp(){return Cd===null?Cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cd++,"0x"+Cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",FI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===eh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,u){const h=Cp(),g=this.zo(e,n.toUriEncodedString());ve(tp,`Sending RPC '${e}' ${h}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,u);const{host:y}=new URL(g),v=oo(y);return this.Jo(e,g,p,r,v).then((w=>(ve(tp,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw eo(tp,`RPC '${e}' ${h} failed with error: `,w,"url: ",g,"request:",r),w}))}Ho(e,n,r,l,u,h){return this.Go(e,n,r,l,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const r=FI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class YI extends GI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const h=Cp();return new Promise(((g,p)=>{const y=new R1;y.setWithCredentials(!0),y.listenOnce(C1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Pd.NO_ERROR:const w=y.getResponseJson();ve(kn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),g(w);break;case Pd.TIMEOUT:ve(kn,`RPC '${e}' ${h} timed out`),p(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Pd.HTTP_ERROR:const E=y.getStatus();if(ve(kn,`RPC '${e}' ${h} failed with status:`,E,"response text:",y.getResponseText()),E>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C==null?void 0:C.error;if(L&&L.status&&L.message){const z=(function(B){const $=B.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf($)>=0?$:re.UNKNOWN})(L.status);p(new ge(z,L.message))}else p(new ge(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ge(re.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(kn,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(l);ve(kn,`RPC '${e}' ${h} sending request:`,l),y.send(n,"POST",v,r,15)}))}T_(e,n,r){const l=Cp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=M1(),g=D1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const v=u.join("");ve(kn,`Creating RPC '${e}' stream ${l}: ${v}`,p);const w=h.createWebChannel(v,p);this.I_(w);let E=!1,C=!1;const L=new $I({Yo:k=>{C?ve(kn,`Not sending because RPC '${e}' stream ${l} is closed:`,k):(E||(ve(kn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),E=!0),ve(kn,`RPC '${e}' stream ${l} sending:`,k),w.send(k))},Zo:()=>w.close()}),z=(k,B,$)=>{k.listen(B,(I=>{try{$(I)}catch(X){setTimeout((()=>{throw X}),0)}}))};return z(w,xc.EventType.OPEN,(()=>{C||(ve(kn,`RPC '${e}' stream ${l} transport opened.`),L.o_())})),z(w,xc.EventType.CLOSE,(()=>{C||(C=!0,ve(kn,`RPC '${e}' stream ${l} transport closed`),L.a_(),this.E_(w))})),z(w,xc.EventType.ERROR,(k=>{C||(C=!0,eo(kn,`RPC '${e}' stream ${l} transport errored. Name:`,k.name,"Message:",k.message),L.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),z(w,xc.EventType.MESSAGE,(k=>{var B;if(!C){const $=k.data[0];ht(!!$,16349);const I=$,X=(I==null?void 0:I.error)||((B=I[0])==null?void 0:B.error);if(X){ve(kn,`RPC '${e}' stream ${l} received error:`,X);const te=X.status;let se=(function(D){const V=rn[D];if(V!==void 0)return fw(V)})(te),A=X.message;se===void 0&&(se=re.INTERNAL,A="Unknown error status: "+te+" with message "+X.message),C=!0,L.a_(new ge(se,A)),w.close()}else ve(kn,`RPC '${e}' stream ${l} received:`,$),L.u_($)}})),z(g,I1.STAT_EVENT,(k=>{k.stat===xp.PROXY?ve(kn,`RPC '${e}' stream ${l} detected buffering proxy`):k.stat===xp.NOPROXY&&ve(kn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(a){return new WC(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ve("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="PersistentStream";class jw{constructor(e,n,r,l,u,h,g,p){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Aw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Ub,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(Ub,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KI extends jw{constructor(e,n,r,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eI(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ue.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ue.min():h.readTime?va(h.readTime):Ue.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jp(this.serializer),n.addTarget=(function(u,h){let g;const p=h.target;if(g=Ep(p)?{documents:sI(u,p)}:{query:aI(u,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=gw(u,h.resumeToken);const y=Sp(u,h.expectedCount);y!==null&&(g.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ue.min())>0){g.readTime=ih(u,h.snapshotVersion.toTimestamp());const y=Sp(u,h.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const r=iI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jp(this.serializer),n.removeTarget=e,this.q_(n)}}class QI extends jw{constructor(e,n,r,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nI(e.writeResults,e.commitTime),r=va(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>tI(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{}class WI extends XI{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,Np(n,r),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(re.UNKNOWN,u.toString())}))}Ho(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Np(n,r),l,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(re.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class JI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="RemoteStore";class ZI{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{Wi(this)&&(ve(Yi,"Restarting streams for network reachability change."),await(async function(p){const y=He(p);y.Ea.add(4),await nu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await kh(y)})(this))}))})),this.Ra=new JI(r,l)}}async function kh(a){if(Wi(a))for(const e of a.da)await e(!0)}async function nu(a){for(const e of a.da)await e(!1)}function Rw(a,e){const n=He(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vg(n)?xg(n):go(n).O_()&&yg(n,e))}function gg(a,e){const n=He(a),r=go(n);n.Ia.delete(e),r.O_()&&Cw(n,e),n.Ia.size===0&&(r.O_()?r.L_():Wi(n)&&n.Ra.set("Unknown"))}function yg(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(a).Y_(e)}function Cw(a,e){a.Va.Ue(e),go(a).Z_(e)}function xg(a){a.Va=new YC({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),go(a).start(),a.Ra.ua()}function vg(a){return Wi(a)&&!go(a).x_()&&a.Ia.size>0}function Wi(a){return He(a).Ea.size===0}function Iw(a){a.Va=void 0}async function e4(a){a.Ra.set("Online")}async function t4(a){a.Ia.forEach(((e,n)=>{yg(a,e)}))}async function n4(a,e){Iw(a),vg(a)?(a.Ra.ha(e),xg(a)):a.Ra.set("Unknown")}async function s4(a,e,n){if(a.Ra.set("Online"),e instanceof pw&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const g of u.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,h),l.Ia.delete(g),l.Va.removeTarget(g))})(a,e)}catch(r){ve(Yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oh(a,r)}else if(e instanceof Bd?a.Va.Ze(e):e instanceof mw?a.Va.st(e):a.Va.tt(e),!n.isEqual(Ue.min()))try{const r=await Nw(a.localStore);n.compareTo(r)>=0&&await(function(u,h){const g=u.Va.Tt(h);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(y);v&&u.Ia.set(y,v.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,y)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(An.EMPTY_BYTE_STRING,v.snapshotVersion)),Cw(u,p);const w=new Qr(v.target,p,y,v.sequenceNumber);yg(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(a,n)}catch(r){ve(Yi,"Failed to raise snapshot:",r),await oh(a,r)}}async function oh(a,e,n){if(!mo(e))throw e;a.Ea.add(1),await nu(a),a.Ra.set("Offline"),n||(n=()=>Nw(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{ve(Yi,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await kh(a)}))}function Dw(a,e){return e().catch((n=>oh(a,n,e)))}async function Oh(a){const e=He(a),n=ri(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ng;for(;a4(e);)try{const l=await UI(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,r4(e,l)}catch(l){await oh(e,l)}Mw(e)&&kw(e)}function a4(a){return Wi(a)&&a.Ta.length<10}function r4(a,e){a.Ta.push(e);const n=ri(a);n.O_()&&n.X_&&n.ea(e.mutations)}function Mw(a){return Wi(a)&&!ri(a).x_()&&a.Ta.length>0}function kw(a){ri(a).start()}async function i4(a){ri(a).ra()}async function l4(a){const e=ri(a);for(const n of a.Ta)e.ea(n.mutations)}async function o4(a,e,n){const r=a.Ta.shift(),l=cg.from(r,e,n);await Dw(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await Oh(a)}async function c4(a,e){e&&ri(a).X_&&await(async function(r,l){if((function(h){return FC(h)&&h!==re.ABORTED})(l.code)){const u=r.Ta.shift();ri(r).B_(),await Dw(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Oh(r)}})(a,e),Mw(a)&&kw(a)}async function zb(a,e){const n=He(a);n.asyncQueue.verifyOperationInProgress(),ve(Yi,"RemoteStore received new credentials");const r=Wi(n);n.Ea.add(3),await nu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await kh(n)}async function u4(a,e){const n=He(a);e?(n.Ea.delete(2),await kh(n)):e||(n.Ea.add(2),await nu(n),n.Ra.set("Unknown"))}function go(a){return a.ma||(a.ma=(function(n,r,l){const u=He(n);return u.sa(),new KI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:e4.bind(null,a),t_:t4.bind(null,a),r_:n4.bind(null,a),H_:s4.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),vg(a)?xg(a):a.Ra.set("Unknown")):(await a.ma.stop(),Iw(a))}))),a.ma}function ri(a){return a.fa||(a.fa=(function(n,r,l){const u=He(n);return u.sa(),new QI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:i4.bind(null,a),r_:c4.bind(null,a),ta:l4.bind(null,a),na:o4.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Oh(a)):(await a.fa.stop(),a.Ta.length>0&&(ve(Yi,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const h=Date.now()+r,g=new bg(e,n,h,l,u);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(a,e){if(tr("AsyncQueue",`${e}: ${a}`),mo(a))return new ge(re.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{static emptySet(e){return new Xl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=vc(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.ga=new Vt(Ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ro{constructor(e,n,r,l,u,h,g,p,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,l,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new ro(e,n,Xl.emptySet(n),h,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class h4{constructor(){this.queries=Hb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=He(n),u=l.queries;l.queries=Hb(),u.forEach(((h,g)=>{for(const p of g.Sa)p.onError(r)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function Hb(){return new Xi((a=>tw(a)),jh)}async function wg(a,e){const n=He(a);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new d4,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const g=_g(h,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Tg(n)}async function Eg(a,e){const n=He(a),r=e.query;let l=3;const u=n.queries.get(r);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function f4(a,e){const n=He(a);let r=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const g of h.Sa)g.Fa(l)&&(r=!0);h.wa=l}}r&&Tg(n)}function m4(a,e,n){const r=He(a),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(e)}function Tg(a){a.Ca.forEach((e=>{e.next()}))}var Ip,qb;(qb=Ip||(Ip={})).Ma="default",qb.Cache="cache";class Sg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.key=e}}class Vw{constructor(e){this.key=e}}class p4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=nw(e),this.tu=new Xl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Bb,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((v,w)=>{const E=l.get(v),C=Rh(this.query,w)?w:null,L=!!E&&this.mutatedKeys.has(E.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let k=!1;E&&C?E.data.isEqual(C.data)?L!==z&&(r.track({type:3,doc:C}),k=!0):this.su(E,C)||(r.track({type:2,doc:C}),k=!0,(p&&this.eu(C,p)>0||y&&this.eu(C,y)<0)&&(g=!0)):!E&&C?(r.track({type:0,doc:C}),k=!0):E&&!C&&(r.track({type:1,doc:E}),k=!0,(p||y)&&(g=!0)),k&&(C?(h=h.add(C),u=z?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),r.track({type:1,doc:v})}return{tu:h,iu:r,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,w)=>(function(C,L){const z=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:k})}};return z(C)-z(L)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(r),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new ro(this.query,e.tu,u,h,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Vw(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Ow(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ng="SyncEngine";class g4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class y4{constructor(e){this.key=e,this.hu=!1}}class x4{constructor(e,n,r,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Xi((g=>tw(g)),jh),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Ae.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v4(a,e,n=!0){const r=Hw(a);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Pw(r,e,n,!0),l}async function b4(a,e){const n=Hw(a);await Pw(n,e,!0,!1)}async function Pw(a,e,n,r){const l=await zI(a.localStore,xa(e)),u=l.targetId,h=a.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await _4(a,e,u,h==="current",l.resumeToken)),a.isPrimaryClient&&n&&Rw(a.remoteStore,l),g}async function _4(a,e,n,r,l){a.pu=(w,E,C)=>(async function(z,k,B,$){let I=k.view.ru(B);I.Cs&&(I=await Ob(z.localStore,k.query,!1).then((({documents:A})=>k.view.ru(A,I))));const X=$&&$.targetChanges.get(k.targetId),te=$&&$.targetMismatches.get(k.targetId)!=null,se=k.view.applyChanges(I,z.isPrimaryClient,X,te);return Gb(z,k.targetId,se.au),se.snapshot})(a,w,E,C);const u=await Ob(a.localStore,e,!0),h=new p4(e,u.Qs),g=h.ru(u.documents),p=tu.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",l),y=h.applyChanges(g,a.isPrimaryClient,p);Gb(a,n,y.au);const v=new g4(e,n,h);return a.Tu.set(e,v),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),y.snapshot}async function w4(a,e,n){const r=He(a),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((h=>!jh(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Rp(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&gg(r.remoteStore,l.targetId),Dp(r,l.targetId)})).catch(fo)):(Dp(r,l.targetId),await Rp(r.localStore,l.targetId,!0))}async function E4(a,e){const n=He(a),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gg(n.remoteStore,r.targetId))}async function T4(a,e,n){const r=I4(a);try{const l=await(function(h,g){const p=He(h),y=Ct.now(),v=g.reduce(((C,L)=>C.add(L.key)),et());let w,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=nr(),z=et();return p.Ns.getEntries(C,v).next((k=>{L=k,L.forEach(((B,$)=>{$.isValidDocument()||(z=z.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,L))).next((k=>{w=k;const B=[];for(const $ of g){const I=UC($,w.get($.key).overlayedDocument);I!=null&&B.push(new di($.key,I,Y1(I.value.mapValue),Zs.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,B,g)})).next((k=>{E=k;const B=k.applyToLocalDocumentSet(w,z);return p.documentOverlayCache.saveOverlays(C,k.batchId,B)}))})).then((()=>({batchId:E.batchId,changes:aw(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(h,g,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new Vt(Ze)),y=y.insert(g,p),h.Vu[h.currentUser.toKey()]=y})(r,l.batchId,n),await su(r,l.changes),await Oh(r.remoteStore)}catch(l){const u=_g(l,"Failed to persist write");n.reject(u)}}async function Lw(a,e){const n=He(a);try{const r=await PI(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(ht(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?ht(h.hu,14607):l.removedDocuments.size>0&&(ht(h.hu,42227),h.hu=!1))})),await su(n,r,e)}catch(r){await fo(r)}}function Fb(a,e,n){const r=He(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(h,g){const p=He(h);p.onlineState=g;let y=!1;p.queries.forEach(((v,w)=>{for(const E of w.Sa)E.va(g)&&(y=!0)})),y&&Tg(p)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function S4(a,e,n){const r=He(a);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let h=new Vt(Ae.comparator);h=h.insert(u,Vn.newNoDocument(u,Ue.min()));const g=et().add(u),p=new Dh(Ue.min(),new Map,new Vt(Ze),h,g);await Lw(r,p),r.du=r.du.remove(u),r.Au.delete(e),Ag(r)}else await Rp(r.localStore,e,!1).then((()=>Dp(r,e,n))).catch(fo)}async function N4(a,e){const n=He(a),r=e.batch.batchId;try{const l=await VI(n.localStore,e);zw(n,r,null),Uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await su(n,l)}catch(l){await fo(l)}}async function A4(a,e,n){const r=He(a);try{const l=await(function(h,g){const p=He(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,g).next((w=>(ht(w!==null,37113),v=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);zw(r,e,n),Uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await su(r,l)}catch(l){await fo(l)}}function Uw(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function zw(a,e,n){const r=He(a);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function Dp(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const r of a.Iu.get(e))a.Tu.delete(r),n&&a.Pu.yu(r,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((r=>{a.Ru.containsKey(r)||Bw(a,r)}))}function Bw(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(gg(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),Ag(a))}function Gb(a,e,n){for(const r of n)r instanceof Ow?(a.Ru.addReference(r.key,e),j4(a,r)):r instanceof Vw?(ve(Ng,"Document no longer in limbo: "+r.key),a.Ru.removeReference(r.key,e),a.Ru.containsKey(r.key)||Bw(a,r.key)):De(19791,{wu:r})}function j4(a,e){const n=e.key,r=n.path.canonicalString();a.du.get(n)||a.Eu.has(r)||(ve(Ng,"New document in limbo: "+n),a.Eu.add(r),Ag(a))}function Ag(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new Ae(Nt.fromString(e)),r=a.fu.next();a.Au.set(r,new y4(n)),a.du=a.du.insert(n,r),Rw(a.remoteStore,new Qr(xa(Ah(n.path)),r,"TargetPurposeLimboResolution",Th.ce))}}async function su(a,e,n){const r=He(a),l=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{h.push(r.pu(p,e,n).then((y=>{var v;if((y||n)&&r.isPrimaryClient){const w=y?!y.fromCache:(v=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){l.push(y);const w=mg.As(p.targetId,y);u.push(w)}})))})),await Promise.all(h),r.Pu.H_(l),await(async function(p,y){const v=He(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>le.forEach(y,(E=>le.forEach(E.Es,(C=>v.persistence.referenceDelegate.addReference(w,E.targetId,C))).next((()=>le.forEach(E.ds,(C=>v.persistence.referenceDelegate.removeReference(w,E.targetId,C)))))))))}catch(w){if(!mo(w))throw w;ve(pg,"Failed to update sequence numbers: "+w)}for(const w of y){const E=w.targetId;if(!w.fromCache){const C=v.Ms.get(E),L=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(E,z)}}})(r.localStore,u))}async function R4(a,e){const n=He(a);if(!n.currentUser.isEqual(e)){ve(Ng,"User change. New user:",e.toKey());const r=await Sw(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new ge(re.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await su(n,r.Ls)}}function C4(a,e){const n=He(a),r=n.Au.get(e);if(r&&r.hu)return et().add(r.key);{let l=et();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const g=n.Tu.get(h);l=l.unionWith(g.view.nu)}return l}}function Hw(a){const e=He(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S4.bind(null,e),e.Pu.H_=f4.bind(null,e.eventManager),e.Pu.yu=m4.bind(null,e.eventManager),e}function I4(a){const e=He(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A4.bind(null,e),e}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return OI(this.persistence,new DI,e.initialUser,this.serializer)}Cu(e){return new Tw(fg.mi,this.serializer)}Du(e){return new HI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class D4 extends ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ht(this.persistence.referenceDelegate instanceof lh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new Tw((r=>lh.mi(r,n)),this.serializer)}}class Mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R4.bind(null,this.syncEngine),await u4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new h4})()}createDatastore(e){const n=Mh(e.databaseInfo.databaseId),r=(function(u){return new YI(u)})(e.databaseInfo);return(function(u,h,g,p){return new WI(u,h,g,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,h,g){return new ZI(r,l,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Fb(this.syncEngine,n,0)),(function(){return Lb.v()?new Lb:new qI})())}createSyncEngine(e,n){return(function(l,u,h,g,p,y,v){const w=new x4(l,u,h,g,p,y);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const u=He(l);ve(Yi,"RemoteStore shutting down."),u.Ea.add(5),await nu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Mp.provider={build:()=>new Mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="FirestoreClient";class M4{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=On.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{ve(ii,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(ve(ii,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_g(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function sp(a,e){a.asyncQueue.verifyOperationInProgress(),ve(ii,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let r=n.initialUser;a.setCredentialChangeListener((async l=>{r.isEqual(l)||(await Sw(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function $b(a,e){a.asyncQueue.verifyOperationInProgress();const n=await k4(a);ve(ii,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((r=>zb(e.remoteStore,r))),a.setAppCheckTokenChangeListener(((r,l)=>zb(e.remoteStore,l))),a._onlineComponents=e}async function k4(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ve(ii,"Using user provided OfflineComponentProvider");try{await sp(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===re.FAILED_PRECONDITION||l.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await sp(a,new ch)}}else ve(ii,"Using default OfflineComponentProvider"),await sp(a,new D4(void 0));return a._offlineComponents}async function qw(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ve(ii,"Using user provided OnlineComponentProvider"),await $b(a,a._uninitializedComponentsProvider._online)):(ve(ii,"Using default OnlineComponentProvider"),await $b(a,new Mp))),a._onlineComponents}function O4(a){return qw(a).then((e=>e.syncEngine))}async function uh(a){const e=await qw(a),n=e.eventManager;return n.onListen=v4.bind(null,e.syncEngine),n.onUnlisten=w4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E4.bind(null,e.syncEngine),n}function V4(a,e,n={}){const r=new Wa;return a.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,y){const v=new jg({next:E=>{v.Nu(),h.enqueueAndForget((()=>Eg(u,w)));const C=E.docs.has(g);!C&&E.fromCache?y.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&p&&p.source==="server"?y.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),w=new Sg(Ah(g.path),v,{includeMetadataChanges:!0,qa:!0});return wg(u,w)})(await uh(a),a.asyncQueue,e,n,r))),r.promise}function P4(a,e,n={}){const r=new Wa;return a.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,y){const v=new jg({next:E=>{v.Nu(),h.enqueueAndForget((()=>Eg(u,w))),E.fromCache&&p.source==="server"?y.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),w=new Sg(g,v,{includeMetadataChanges:!0,qa:!0});return wg(u,w)})(await uh(a),a.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="firestore.googleapis.com",Kb=!0;class Qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gw,this.ssl=Kb}else this.host=e.host,this.ssl=e.ssl??Kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ew;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pI)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qR;switch(r.type){case"firstParty":return new YR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Yb.get(n);r&&(ve("ComponentProvider","Removing Datastore"),Yb.delete(n),r.terminate())})(this),Promise.resolve()}}function L4(a,e,n,r={}){var y;a=xs(a,Vh);const l=oo(e),u=a._getSettings(),h={...u,emulatorOptions:a._getEmulatorOptions()},g=`${e}:${n}`;l&&(U_(`https://${g}`),z_("Firestore",!0)),u.host!==Gw&&u.host!==g&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:l,emulatorOptions:r};if(!qi(p,h)&&(a._setSettings(p),r.mockUserToken)){let v,w;if(typeof r.mockUserToken=="string")v=r.mockUserToken,w=On.MOCK_USER;else{v=zN(r.mockUserToken,(y=a._app)==null?void 0:y.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new On(E)}a._authCredentials=new FR(new O1(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lr(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zc(n,Ft._jsonSchema))return new Ft(e,r||null,new Ae(Nt.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:on("string",Ft._jsonSchemaVersion),referencePath:on("string")};class ei extends lr{constructor(e,n,r){super(e,n,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Ae(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function gs(a,e,...n){if(a=pn(a),V1("collection","path",e),a instanceof Vh){const r=Nt.fromString(e,...n);return ob(r),new ei(a,null,r)}{if(!(a instanceof Ft||a instanceof ei))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(Nt.fromString(e,...n));return ob(r),new ei(a.firestore,null,r)}}function St(a,e,...n){if(a=pn(a),arguments.length===1&&(e=tg.newId()),V1("doc","path",e),a instanceof Vh){const r=Nt.fromString(e,...n);return lb(r),new Ft(a,null,new Ae(r))}{if(!(a instanceof Ft||a instanceof ei))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(Nt.fromString(e,...n));return lb(r),new Ft(a.firestore,a instanceof ei?a.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="AsyncQueue";class Wb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Aw(this,"async_queue_retry"),this._c=()=>{const r=np();r&&ve(Xb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=np();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mo(e))throw e;ve(Xb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",Jb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=bg.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&De(47125,{Pc:Jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jb(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(a){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(a,["next","error","complete"])}class li extends Vh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new Wb,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wb(e),this._firestoreClient=void 0,await e}}}function U4(a,e){const n=typeof a=="object"?a:q_(),r=typeof a=="string"?a:eh,l=Fp(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=LN("firestore");u&&L4(l,...u)}return l}function Ph(a){if(a._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||z4(a),a._firestoreClient}function z4(a){var r,l,u;const e=a._freezeSettings(),n=(function(g,p,y,v){return new uC(g,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Fw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(a._databaseId,((r=a._app)==null?void 0:r.options.appId)||"",a._persistenceKey,e);a._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new M4(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(An.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,zs._jsonSchema))return zs.fromBase64String(e.bytes)}}zs._jsonSchemaVersion="firestore/bytes/1.0",zs._jsonSchema={type:on("string",zs._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ba._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,ba._jsonSchema))return new ba(e.latitude,e.longitude)}}ba._jsonSchemaVersion="firestore/geoPoint/1.0",ba._jsonSchema={type:on("string",ba._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_a._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,_a._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _a(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_a._jsonSchemaVersion="firestore/vectorValue/1.0",_a._jsonSchema={type:on("string",_a._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=/^__.*__$/;class H4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,n,this.fieldTransforms):new eu(e,this.data,n,this.fieldTransforms)}}class $w{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yw(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:a})}}class Cg{constructor(e,n,r,l,u,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Yw(this.Ac)&&B4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mh(e)}Cc(e,n,r,l=!1){return new Cg({Ac:e,methodName:n,Dc:r,path:Nn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(a){const e=a._freezeSettings(),n=Mh(a._databaseId);return new q4(a._databaseId,!!e.ignoreUndefinedProperties,n)}function F4(a,e,n,r,l,u={}){const h=a.Cc(u.merge||u.mergeFields?2:0,e,n,l);Dg("Data must be an object, but it was:",h,r);const g=Kw(r,h);let p,y;if(u.merge)p=new ys(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const w of u.mergeFields){const E=kp(e,w,n);if(!h.contains(E))throw new ge(re.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Xw(v,E)||v.push(E)}p=new ys(v),y=h.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=h.fieldTransforms;return new H4(new ss(g),p,y)}class Uh extends Rg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}function G4(a,e,n,r){const l=a.Cc(1,e,n);Dg("Data must be an object, but it was:",l,r);const u=[],h=ss.empty();ui(r,((p,y)=>{const v=Mg(e,p,n);y=pn(y);const w=l.yc(v);if(y instanceof Uh)u.push(v);else{const E=au(y,w);E!=null&&(u.push(v),h.set(v,E))}}));const g=new ys(u);return new $w(h,g,l.fieldTransforms)}function $4(a,e,n,r,l,u){const h=a.Cc(1,e,n),g=[kp(e,r,n)],p=[l];if(u.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)g.push(kp(e,u[E])),p.push(u[E+1]);const y=[],v=ss.empty();for(let E=g.length-1;E>=0;--E)if(!Xw(y,g[E])){const C=g[E];let L=p[E];L=pn(L);const z=h.yc(C);if(L instanceof Uh)y.push(C);else{const k=au(L,z);k!=null&&(y.push(C),v.set(C,k))}}const w=new ys(y);return new $w(v,w,h.fieldTransforms)}function Y4(a,e,n,r=!1){return au(n,a.Cc(r?4:3,e))}function au(a,e){if(Qw(a=pn(a)))return Dg("Unsupported field value:",e,a),Kw(a,e);if(a instanceof Rg)return(function(r,l){if(!Yw(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let h=0;for(const g of r){let p=au(g,l.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(a,e)}return(function(r,l){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MC(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Ct.fromDate(r);return{timestampValue:ih(l.serializer,u)}}if(r instanceof Ct){const u=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ih(l.serializer,u)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zs)return{bytesValue:gw(l.serializer,r._byteString)};if(r instanceof Ft){const u=l.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw l.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:dg(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof _a)return(function(h,g){return{mapValue:{fields:{[G1]:{stringValue:$1},[th]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return lg(g.serializer,y)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Eh(r)}`)})(a,e)}function Kw(a,e){const n={};return U1(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(a,((r,l)=>{const u=au(l,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function Qw(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Ct||a instanceof ba||a instanceof zs||a instanceof Ft||a instanceof Rg||a instanceof _a)}function Dg(a,e,n){if(!Qw(n)||!P1(n)){const r=Eh(n);throw r==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+r)}}function kp(a,e,n){if((e=pn(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return Mg(a,e);throw dh("Field path arguments must be of type string or ",a,!1,void 0,n)}const K4=new RegExp("[~\\*/\\[\\]]");function Mg(a,e,n){if(e.search(K4)>=0)throw dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function dh(a,e,n,r,l){const u=r&&!r.isEmpty(),h=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${r}`),h&&(p+=` in document ${l}`),p+=")"),new ge(re.INVALID_ARGUMENT,g+a+p)}function Xw(a,e){return a.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q4 extends Ww{data(){return super.data()}}function zh(a,e){return typeof e=="string"?Mg(a,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class Og extends kg{}function Fr(a,e,...n){let r=[];e instanceof kg&&r.push(e),r=r.concat(n),(function(u){const h=u.filter((p=>p instanceof Vg)).length,g=u.filter((p=>p instanceof Bh)).length;if(h>1||h>0&&g>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)a=l._apply(a);return a}class Bh extends Og{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bh(e,n,r)}_apply(e){const n=this._parse(e);return Zw(e._query,n),new lr(e.firestore,e.converter,Tp(e._query,n))}_parse(e){const n=Ig(e.firestore);return(function(u,h,g,p,y,v,w){let E;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){t_(w,v);const L=[];for(const z of w)L.push(e_(p,u,z));E={arrayValue:{values:L}}}else E=e_(p,u,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||t_(w,v),E=Y4(g,h,w,v==="in"||v==="not-in");return ln.create(y,v,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zl(a,e,n){const r=e,l=zh("where",a);return Bh._create(l,r,n)}class Vg extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ta.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const g=u.getFlattenedFilters();for(const p of g)Zw(h,p),h=Tp(h,p)})(e._query,n),new lr(e.firestore,e.converter,Tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pg extends Og{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pg(e,n)}_apply(e){const n=(function(l,u,h){if(l.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(u,h)})(e._query,this._field,this._direction);return new lr(e.firestore,e.converter,(function(l,u){const h=l.explicitOrderBy.concat([u]);return new po(l.path,l.collectionGroup,h,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function X4(a,e="asc"){const n=e,r=zh("orderBy",a);return Pg._create(r,n)}class Lg extends Og{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lg(e,n,r)}_apply(e){return new lr(e.firestore,e.converter,sh(e._query,this._limit,this._limitType))}}function W4(a){return Lg._create("limit",a,"F")}function e_(a,e,n){if(typeof(n=pn(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ew(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Nt.fromString(n));if(!Ae.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gb(a,new Ae(r))}if(n instanceof Ft)return gb(a,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eh(n)}.`)}function t_(a,e){if(!Array.isArray(a)||a.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zw(a,e){const n=(function(l,u){for(const h of l)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class J4{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ui(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,l,u;const n=(u=(l=(r=e.fields)==null?void 0:r[th].arrayValue)==null?void 0:l.values)==null?void 0:u.map((h=>Wt(h.doubleValue)));return new _a(n)}convertGeoPoint(e){return new ba(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=ni(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Nt.fromString(e);ht(ww(r),9688,{name:e});const l=new Vc(r.get(1),r.get(3)),u=new Ae(r.popFirst(5));return l.isEqual(n)||tr(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(a,e,n){let r;return r=a?a.toFirestore(e):e,r}class _c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zi extends Ww{constructor(e,n,r,l,u,h){super(e,n,r,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",zi._jsonSchema={type:on("string",zi._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Hd extends zi{data(e={}){return super.data(e)}}class Bi{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new _c(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Hd(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((g=>{const p=new Hd(l._firestore,l._userDataWriter,g.doc.key,g.doc,new _c(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Hd(l._firestore,l._userDataWriter,g.doc.key,g.doc,new _c(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,v=-1;return g.type!==0&&(y=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),v=h.indexOf(g.doc.key)),{type:eD(g.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eD(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(a){a=xs(a,Ft);const e=xs(a.firestore,li);return V4(Ph(e),a._key).then((n=>eE(e,a,n)))}Bi._jsonSchemaVersion="firestore/querySnapshot/1.0",Bi._jsonSchema={type:on("string",Bi._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class Ug extends J4{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function Ls(a){a=xs(a,lr);const e=xs(a.firestore,li),n=Ph(e),r=new Ug(e);return Jw(a._query),P4(n,a._query).then((l=>new Bi(e,r,a,l)))}function Fn(a,e,n){a=xs(a,Ft);const r=xs(a.firestore,li),l=Z4(a.converter,e);return zg(r,[F4(Ig(r),"setDoc",a._key,l,a.converter!==null,n).toMutation(a._key,Zs.none())])}function n_(a,e,n,...r){a=xs(a,Ft);const l=xs(a.firestore,li),u=Ig(l);let h;return h=typeof(e=pn(e))=="string"||e instanceof Lh?$4(u,"updateDoc",a._key,e,n,r):G4(u,"updateDoc",a._key,e),zg(l,[h.toMutation(a._key,Zs.exists(!0))])}function pc(a){return zg(xs(a.firestore,li),[new og(a._key,Zs.none())])}function tD(a,...e){var p,y,v;a=pn(a);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Zb(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Zb(e[r])){const w=e[r];e[r]=(p=w.next)==null?void 0:p.bind(w),e[r+1]=(y=w.error)==null?void 0:y.bind(w),e[r+2]=(v=w.complete)==null?void 0:v.bind(w)}let u,h,g;if(a instanceof Ft)h=xs(a.firestore,li),g=Ah(a._key.path),u={next:w=>{e[r]&&e[r](eE(h,a,w))},error:e[r+1],complete:e[r+2]};else{const w=xs(a,lr);h=xs(w.firestore,li),g=w._query;const E=new Ug(h);u={next:C=>{e[r]&&e[r](new Bi(h,E,w,C))},error:e[r+1],complete:e[r+2]},Jw(a._query)}return(function(E,C,L,z){const k=new jg(z),B=new Sg(C,k,L);return E.asyncQueue.enqueueAndForget((async()=>wg(await uh(E),B))),()=>{k.Nu(),E.asyncQueue.enqueueAndForget((async()=>Eg(await uh(E),B)))}})(Ph(h),g,l,u)}function zg(a,e){return(function(r,l){const u=new Wa;return r.asyncQueue.enqueueAndForget((async()=>T4(await O4(r),l,u))),u.promise})(Ph(a),e)}function eE(a,e,n){const r=n.docs.get(e._key),l=new Ug(a);return new zi(a,l,e._key,r,new _c(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){ho=l})(co),Zl(new PR("firestore",((r,{instanceIdentifier:l,options:u})=>{const h=r.getProvider("app").getImmediate(),g=new li(new GR(r.getProvider("auth-internal")),new KR(h,r.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(y.options.projectId,v)})(h,l),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Jr(sb,ab,e),Jr(sb,ab,"esm2020")})();const tE={apiKey:"AIzaSyCHlCLhumJn50nw2JBgJTGeIH_6GKzjFbA",authDomain:"noble-care-management-system.firebaseapp.com",projectId:"noble-care-management-system",storageBucket:"noble-care-management-system.firebasestorage.app",messagingSenderId:"573085015524",appId:"1:573085015524:web:29ae8a509813ec1199fbf1"},nE=Gp(tE),hh=A1(nE),Ye=U4(nE),sE=j.createContext(void 0),nD=({children:a})=>{const[e,n]=j.useState(null),[r,l]=j.useState(!0),[u,h]=j.useState(null),g="JHaUOR3vlYQiaPKLTGlGtav1uYa2";j.useEffect(()=>{const y=Sj(hh,async v=>{var w;if(l(!0),v){h(null);try{const E=St(Ye,"users",v.uid),C=await Gl(E);if(C.exists()){const L=C.data();n({id:v.uid,name:L.name||v.displayName||"User",email:v.email||"",role:L.role,assignedClassIds:L.assignedClassIds||[]})}else{console.log("Setting up new user profile in Firestore...");const L=v.uid===g,z=v.email==="admin@school.com"||v.email==="isaacskikrams@gmail.com",k=L||z?Ot.ADMIN:Ot.TEACHER,B={id:v.uid,name:v.displayName||((w=v.email)==null?void 0:w.split("@")[0])||"New User",email:v.email||"",role:k,assignedClassIds:[]};await Fn(E,{name:B.name,email:B.email,role:B.role,assignedClassIds:[]}),n(B)}}catch(E){console.error("Error fetching user profile:",E),n(null);const C=E.message||E.toString();C.includes("Cloud Firestore API has not been used")?h("CRITICAL ERROR: The Firestore Database is not enabled. Go to Firebase Console > Build > Firestore Database > Create Database."):C.includes("permission-denied")||C.includes("Missing or insufficient permissions")?h("PERMISSION DENIED: Database access blocked. Go to Firebase Console > Firestore Database > Rules and change 'allow read, write: if false;' to 'allow read, write: if true;' (for testing)."):C.includes("client is offline")||C.includes("offline")?h("Network Error: Could not connect to the database. Check your internet connection."):h("Failed to load user profile. Please try refreshing the page. Error: "+C)}}else n(null),h(null);l(!1)});return()=>y()},[]);const p=async()=>{try{await g1(hh),n(null),h(null)}catch(y){console.error("Logout failed",y)}};return c.jsx(sE.Provider,{value:{user:e,loading:r,error:u,logout:p,isAuthenticated:!!e},children:a})},hi=()=>{const a=j.useContext(sE);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aD=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),s_=a=>{const e=aD(a);return e.charAt(0).toUpperCase()+e.slice(1)},aE=(...a)=>a.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),rD=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=j.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:h,...g},p)=>j.createElement("svg",{ref:p,...iD,width:e,height:e,stroke:a,strokeWidth:r?Number(n)*24/Number(e):n,className:aE("lucide",l),...!u&&!rD(g)&&{"aria-hidden":"true"},...g},[...h.map(([y,v])=>j.createElement(y,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(a,e)=>{const n=j.forwardRef(({className:r,...l},u)=>j.createElement(lD,{ref:u,iconNode:e,className:aE(`lucide-${sD(s_(a))}`,`lucide-${a}`,r),...l}));return n.displayName=s_(a),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cD=Ve("arrow-left",oD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],dD=Ve("arrow-up-right",uD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],fh=Ve("bell",hD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Bc=Ve("book-open",fD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],pD=Ve("book",mD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],yD=Ve("calendar-days",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oi=Ve("calendar",xD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],bD=Ve("chart-no-axes-column-increasing",vD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ap=Ve("chart-no-axes-column",_D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rE=Ve("check",wD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],a_=Ve("circle-alert",ED);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rc=Ve("circle-check-big",TD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],r_=Ve("circle-x",SD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],mh=Ve("clipboard-check",ND);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bg=Ve("clock",AD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],RD=Ve("coffee",jD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],ID=Ve("door-open",CD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],MD=Ve("download",DD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],OD=Ve("ellipsis",kD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iE=Ve("eye",VD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],lE=Ve("graduation-cap",PD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],i_=Ve("layout-dashboard",LD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zD=Ve("loader-circle",UD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],HD=Ve("lock",BD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],FD=Ve("log-out",qD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$D=Ve("mail",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],KD=Ve("megaphone",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],XD=Ve("menu",QD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M5 12h14",key:"1ays0h"}]],l_=Ve("minus",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],o_=Ve("octagon-alert",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hc=Ve("plus",ZD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],c_=Ve("refresh-cw",e6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ru=Ve("save",t6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oE=Ve("settings",n6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],a6=Ve("sparkles",s6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],i6=Ve("square-check-big",r6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Hg=Ve("square-pen",l6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],c6=Ve("square",o6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qc=Ve("trash-2",u6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],u_=Ve("trending-down",d6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ph=Ve("trending-up",h6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ki=Ve("triangle-alert",f6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],p6=Ve("trophy",m6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cE=Ve("user-plus",g6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],uE=Ve("user",y6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wc=Ve("users",x6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hi=Ve("x",v6),b6=()=>{const{isAuthenticated:a,loading:e,error:n}=hi(),r=yh(),[l,u]=j.useState(""),[h,g]=j.useState(""),[p,y]=j.useState(!1),[v,w]=j.useState(""),[E,C]=j.useState(!1),[L,z]=j.useState("");j.useEffect(()=>{a&&!e&&r("/",{replace:!0})},[a,e,r]);const k=async I=>{I.preventDefault(),y(!0),w("");try{await wj(hh,l,h)}catch(X){console.error(X);let te="Failed to sign in.";X.code==="auth/invalid-credential"||X.code==="auth/user-not-found"||X.code==="auth/wrong-password"?te="Invalid email or password.":X.code==="auth/too-many-requests"&&(te="Too many failed attempts. Please try again later."),w(te),y(!1)}},B=async I=>{if(I.preventDefault(),y(!0),w(""),z(""),!l){w("Please enter your email address to reset password."),y(!1);return}try{await bj(hh,l),z("Password reset link has been sent to your email."),w("")}catch(X){console.error(X);let te="Failed to send reset email.";X.code==="auth/user-not-found"?te="No account found with this email address.":X.code==="auth/invalid-email"&&(te="Please enter a valid email address."),w(te)}finally{y(!1)}},$=()=>{C(!E),w(""),z(""),g("")};return e?c.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:c.jsx("div",{className:"text-red-900 animate-pulse font-semibold",children:"Loading Noble Care System..."})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-amber-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-xl p-8 border-t-8 border-red-900",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"mx-auto w-28 h-28 mb-4 relative p-2 bg-white rounded-full shadow-sm border border-amber-100",children:c.jsx("img",{src:"https://scontent.facc5-1.fna.fbcdn.net/v/t39.30808-6/277561581_380661664069143_4955839060397865014_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeFJNGCSI96CBW1S8R2sOotMrM2NNo5aPtOszY02jlo-04y0fL8D99GjvJaBXuzqH8OYrZRdn_DgSU4Kgwvj36D2&_nc_ohc=GeYOZj7SI8AQ7kNvwFo1QMy&_nc_oc=AdnCfyquuglPpsQYtG1zbC9KAOmrLOH7MKUJTuoVKPm7FdxXjqnrHmzUSj4b3hioGUo&_nc_zt=23&_nc_ht=scontent.facc5-1.fna&_nc_gid=DdsLMQJFSMTnkkiquIQTNQ&oh=00_Afo5zCyNS0kVyQ6p_ArT53WNpaTgIKDpPQScqRwUn3HyKA&oe=695CE41D",alt:"Noble Care Academy Logo",className:"w-full h-full object-contain rounded-full",onError:I=>{I.currentTarget.style.display="none",I.currentTarget.parentElement.innerHTML='<div class="w-24 h-24 bg-red-900 rounded-full flex items-center justify-center text-amber-400 font-bold border-4 border-amber-500 text-xs text-center p-1">NOBLE CARE</div>'}})}),c.jsx("h1",{className:"text-2xl font-bold text-red-900 font-serif",children:"Noble Care Academy"}),c.jsx("p",{className:"text-slate-500 mt-2 text-sm",children:E?"Reset your password":"Sign in to manage the system"})]}),n&&c.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-800 text-sm rounded-lg border border-red-200 flex items-start",children:[c.jsx(a_,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold block mb-1",children:"System Error"}),n]})]}),v&&c.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-center",children:[c.jsx(a_,{size:16,className:"mr-2 flex-shrink-0"}),v]}),L&&c.jsxs("div",{className:"mb-4 p-3 bg-emerald-50 text-emerald-700 text-sm rounded-lg border border-emerald-100 flex items-center",children:[c.jsx(Rc,{size:16,className:"mr-2 flex-shrink-0"}),L]}),E?c.jsxs("form",{onSubmit:B,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),c.jsx("input",{type:"email",value:l,onChange:I=>u(I.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"Enter your registered email",required:!0}),c.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"We'll send you a link to reset your password."})]}),c.jsx("button",{type:"submit",disabled:p,className:`w-full py-3 px-4 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg transition-colors shadow-md flex justify-center items-center ${p?"opacity-70 cursor-not-allowed":""}`,children:p?"Sending...":"Send Reset Link"}),c.jsxs("button",{type:"button",onClick:$,className:"w-full text-center text-sm text-slate-600 hover:text-red-900 font-medium flex items-center justify-center mt-4",children:[c.jsx(cD,{size:16,className:"mr-1"})," Back to Sign In"]})]}):c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),c.jsx("input",{type:"email",value:l,onChange:I=>u(I.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"e.g., admin@school.com",required:!0})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Password"}),c.jsx("button",{type:"button",onClick:$,className:"text-xs text-amber-600 hover:text-amber-800 font-medium",children:"Forgot Password?"})]}),c.jsx("input",{type:"password",value:h,onChange:I=>g(I.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"Enter your password",required:!0})]}),c.jsx("button",{type:"submit",disabled:p,className:`w-full py-3 px-4 bg-red-900 hover:bg-red-950 text-white font-bold rounded-lg transition-colors shadow-md flex justify-center items-center ${p?"opacity-70 cursor-not-allowed":""}`,children:p?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:c.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," Noble Care Academy  Empowering Excellence"]})})]})})},Wl="2023-2024",Js=1,rt=[{id:"c_n1",name:"Nursery 1",level:"NURSERY"},{id:"c_n2",name:"Nursery 2",level:"NURSERY"},{id:"c_kg1",name:"KG 1",level:"KG"},{id:"c_kg2",name:"KG 2",level:"KG"},{id:"c_p1",name:"Class 1",level:"PRIMARY"},{id:"c_p2",name:"Class 2",level:"PRIMARY"},{id:"c_p3",name:"Class 3",level:"PRIMARY"},{id:"c_p4",name:"Class 4",level:"PRIMARY"},{id:"c_p5",name:"Class 5",level:"PRIMARY"},{id:"c_p6",name:"Class 6",level:"PRIMARY"},{id:"c_jhs1",name:"JHS 1",level:"JHS"},{id:"c_jhs2",name:"JHS 2",level:"JHS"},{id:"c_jhs3",name:"JHS 3",level:"JHS"}],d_=["Mathematics","English Language","Integrated Science","Social Studies","ICT","RME","Ghanaian Language","Creative Arts"],Fc=a=>a>=80?{total:a,grade:"A",remark:"Excellent"}:a>=70?{total:a,grade:"B",remark:"Very Good"}:a>=60?{total:a,grade:"C",remark:"Good"}:a>=45?{total:a,grade:"D",remark:"Pass"}:{total:a,grade:"F",remark:"Fail"},Hh=a=>{switch(a){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";default:return"text-red-600 bg-red-100"}};class _6{async getCollection(e){return(await Ls(gs(Ye,e))).docs.map(r=>r.data())}async getSchoolConfig(){const e=St(Ye,"settings","schoolConfig"),n=await Gl(e);return n.exists()?n.data():{schoolName:"Noble Care Academy",academicYear:Wl,currentTerm:`Term ${Js}`}}async updateSchoolConfig(e){await Fn(St(Ye,"settings","schoolConfig"),e)}async getUsers(){return this.getCollection("users")}async addUser(e){await Fn(St(Ye,"users",e.id),e)}async deleteUser(e){await pc(St(Ye,"users",e))}async getStudents(e){const n=gs(Ye,"students");if(e){const r=Fr(n,zl("classId","==",e));return(await Ls(r)).docs.map(u=>u.data())}return this.getCollection("students")}async addStudent(e){await Fn(St(Ye,"students",e.id),e)}async updateStudent(e){await n_(St(Ye,"students",e.id),{...e})}async deleteStudent(e){await pc(St(Ye,"students",e))}async getSubjects(){const e=St(Ye,"settings","subjects"),n=await Gl(e);return n.exists()?n.data().list:(await Fn(e,{list:d_}),d_)}async addSubject(e){const n=await this.getSubjects();n.includes(e)||await Fn(St(Ye,"settings","subjects"),{list:[...n,e]})}async updateSubject(e,n){const r=await this.getSubjects(),l=r.indexOf(e);l!==-1&&(r[l]=n,await Fn(St(Ye,"settings","subjects"),{list:r}))}async deleteSubject(e){const r=(await this.getSubjects()).filter(l=>l!==e);await Fn(St(Ye,"settings","subjects"),{list:r})}async getAttendance(e,n){const r=`${e}_${n}`,l=await Gl(St(Ye,"attendance",r));return l.exists()?l.data():void 0}async getClassAttendance(e){const n=Fr(gs(Ye,"attendance"),zl("classId","==",e));return(await Ls(n)).docs.map(l=>l.data())}async saveAttendance(e){await Fn(St(Ye,"attendance",e.id),e)}async getAssessments(e,n){const r=Fr(gs(Ye,"assessments"),zl("classId","==",e));return(await Ls(r)).docs.map(h=>h.data()).filter(h=>h.subject===n)}async getAllAssessments(){return this.getCollection("assessments")}async saveAssessment(e){await Fn(St(Ye,"assessments",e.id),e)}async resetAssessmentsForClass(e,n=!1){const r=Fr(gs(Ye,"assessments"),zl("classId","==",e)),u=(await Ls(r)).docs.map(h=>pc(St(Ye,"assessments",h.id)));if(await Promise.all(u),n){const h=await this.getStudents(e),g=await this.getSubjects(),p=[];for(const y of h)for(const v of g){const w=`${y.id}_${v}_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,E={id:w,studentId:y.id,classId:e,term:Js,academicYear:Wl,subject:v,testScore:0,homeworkScore:0,projectScore:0,examScore:0,total:0};p.push(Fn(St(Ye,"assessments",w),E))}await Promise.all(p)}}async getNotices(){const e=Fr(gs(Ye,"notices"));return(await Ls(e)).docs.map(r=>r.data())}async addNotice(e){await Fn(St(Ye,"notices",e.id),e)}async deleteNotice(e){await pc(St(Ye,"notices",e))}async addSystemNotification(e,n){const r=Date.now().toString(),l={id:r,message:e,createdAt:Date.now(),isRead:!1,type:n};await Fn(St(Ye,"admin_notifications",r),l)}async getSystemNotifications(){const e=Fr(gs(Ye,"admin_notifications"),X4("createdAt","desc"),W4(20));return(await Ls(e)).docs.map(r=>r.data())}async markNotificationAsRead(e){await n_(St(Ye,"admin_notifications",e),{isRead:!0})}async deleteSystemNotification(e){await pc(St(Ye,"admin_notifications",e))}async getTimetable(e){const n=await Gl(St(Ye,"timetables",e));return n.exists()?n.data():void 0}async saveTimetable(e){await Fn(St(Ye,"timetables",e.classId),e)}async getStudentPerformance(e,n){const r=await this.getClassAttendance(n),l=r.length,u=r.filter(L=>L.presentStudentIds.includes(e)).length,h=l===0?0:Math.round(u/l*100),g=r.map(L=>L.date).sort(),p=r.filter(L=>L.presentStudentIds.includes(e)).map(L=>L.date).sort(),y=Fr(gs(Ye,"assessments"),zl("studentId","==",e)),w=(await Ls(y)).docs.map(L=>L.data()).filter(L=>L.term===Js),C=(await this.getSubjects()).map(L=>{const z=w.find(k=>k.subject===L);return z||{subject:L,total:0}});return{attendance:{total:l,present:u,percentage:h,schoolDates:g,presentDates:p},grades:C}}async getDashboardStats(){const[e,n,r]=await Promise.all([Ls(gs(Ye,"students")),Ls(gs(Ye,"users")),Ls(gs(Ye,"attendance"))]),l=e.docs.map(v=>v.data()),u=n.docs.map(v=>v.data()),h=r.docs.map(v=>v.data()),g=l.filter(v=>v.gender==="Male").length,p=l.filter(v=>v.gender==="Female").length,y=rt.map(v=>{const w=h.filter(C=>C.classId===v.id),E=l.filter(C=>C.classId===v.id);if(w.length>0&&E.length>0){const C=w.length*E.length,L=w.reduce((k,B)=>k+B.presentStudentIds.length,0),z=Math.round(L/C*100);return{className:v.name,percentage:z,id:v.id}}return{className:v.name,percentage:0,id:v.id}});return{studentsCount:l.length,teachersCount:u.filter(v=>v.role===Ot.TEACHER).length,gender:{male:g,female:p},classAttendance:y}}async getTeacherAttendance(e,n){const r=`${e}_${n}`,l=await Gl(St(Ye,"teacher_attendance",r));return l.exists()?l.data():void 0}async getAllTeacherAttendance(e){const n=Fr(gs(Ye,"teacher_attendance"),zl("date","==",e));return(await Ls(n)).docs.map(l=>l.data())}async saveTeacherAttendance(e){await Fn(St(Ye,"teacher_attendance",e.id),e)}async getAllTeacherAttendanceRecords(){return this.getCollection("teacher_attendance")}async getTeacherAttendanceAnalytics(e,n){const l=(await this.getUsers()).filter(y=>y.role===Ot.TEACHER),u=await this.getAllTeacherAttendanceRecords(),h=e||`${Wl.split("-")[0]}-09-01`,g=n||new Date().toISOString().split("T")[0],p=[];for(const y of l){const w=u.filter(B=>B.teacherId===y.id).filter(B=>B.date>=h&&B.date<=g),E={};w.forEach(B=>{const $=new Date(B.date),I=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`;E[I]||(E[I]={total:0,present:0}),E[I].total+=1,B.status==="present"&&(E[I].present+=1)});const C=Object.entries(E).map(([B,$])=>{const[I,X]=B.split("-"),te=$.total>0?Math.round($.present/$.total*100):0;return{teacherId:y.id,teacherName:y.name,month:B,year:parseInt(I),totalWorkingDays:$.total,presentDays:$.present,absentDays:$.total-$.present,attendanceRate:te,trend:"stable"}}).sort((B,$)=>B.month.localeCompare($.month));for(let B=0;B<C.length;B++)if(B>0){const $=C[B].attendanceRate,I=C[B-1].attendanceRate;$>I+5?C[B].trend="improving":$<I-5?C[B].trend="declining":C[B].trend="stable"}const L=C.reduce((B,$)=>B+$.totalWorkingDays,0),z=C.reduce((B,$)=>B+$.presentDays,0),k=L>0?Math.round(z/L*100):0;p.push({teacherId:y.id,teacherName:y.name,overallAttendance:k,monthlyBreakdown:C,termStartDate:h,vacationDate:g!==new Date().toISOString().split("T")[0]?g:void 0})}return p}}const pe=new _6,w6=({toast:a,onClose:e})=>{j.useEffect(()=>{const r=setTimeout(()=>e(a.id),a.duration);return()=>clearTimeout(r)},[a,e]);const n=a.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-800":a.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-slate-50 border-slate-200 text-slate-800";return c.jsx("div",{className:`max-w-sm w-full px-4 py-3 rounded-lg border shadow-md ${n} transform transition-all`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-1 text-sm leading-tight",children:a.message}),c.jsx("button",{onClick:()=>e(a.id),className:"text-slate-400 hover:text-slate-600 ml-2",children:""})]})})},E6=()=>{const[a,e]=j.useState([]);j.useEffect(()=>{let r=1;const l=u=>{const{message:h,type:g,duration:p}=u.detail||{},y=r++;e(v=>[{id:y,message:h,type:g,duration:p},...v])};return window.addEventListener("app-toast",l),()=>window.removeEventListener("app-toast",l)},[]);const n=r=>e(l=>l.filter(u=>u.id!==r));return a.length===0?null:c.jsx("div",{className:"fixed right-4 top-20 z-60 flex flex-col gap-3",children:a.map(r=>c.jsx(w6,{toast:r,onClose:n},r.id))})},Pn=({children:a,title:e})=>{const{user:n,logout:r}=hi(),[l,u]=j.useState(!1),h=sr(),[g,p]=j.useState("Noble Care"),[y,v]=j.useState([]),[w,E]=j.useState(!1),[C,L]=j.useState(0),z=(n==null?void 0:n.role)===Ot.ADMIN;j.useEffect(()=>{(async()=>{try{const X=await pe.getSchoolConfig();X&&X.schoolName&&p(X.schoolName)}catch(X){console.error("Failed to load school config",X)}})()},[]),j.useEffect(()=>{if(z){const I=async()=>{try{const te=await pe.getSystemNotifications();v(te),L(te.filter(se=>!se.isRead).length)}catch(te){console.error("Failed to fetch notifications",te)}};I();const X=setInterval(I,3e4);return()=>clearInterval(X)}},[z]);const k=async(I,X)=>{X.stopPropagation(),await pe.markNotificationAsRead(I),v(te=>te.map(se=>se.id===I?{...se,isRead:!0}:se)),L(te=>Math.max(0,te-1))},B=async(I,X)=>{X.stopPropagation();try{await pe.deleteSystemNotification(I),v(te=>te.filter(se=>se.id!==I)),L(te=>y.find(A=>A.id===I&&!A.isRead)?Math.max(0,te-1):te)}catch(te){console.error("Failed to delete notification",te)}},$=({href:I,icon:X,label:te})=>{const se=h.pathname===I;return c.jsxs(Xs,{to:I,className:`flex items-center px-4 py-3 transition-colors ${se?"bg-red-950 text-amber-400 border-r-4 border-amber-500":"text-red-100 hover:bg-red-800 hover:text-white"}`,onClick:()=>u(!1),children:[c.jsx(X,{className:`w-5 h-5 mr-3 ${se?"text-amber-400":"text-red-300"}`}),c.jsx("span",{className:"font-medium",children:te})]})};return c.jsxs("div",{className:"min-h-screen bg-[#fafafa] flex",children:[l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:()=>u(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-30 w-64 bg-red-900 text-white transform transition-transform duration-200 ease-in-out
        ${l?"translate-x-0":"-translate-x-full"}
        md:relative md:translate-x-0 flex flex-col shadow-xl border-r border-red-800
      `,children:[c.jsxs("div",{className:"p-6 border-b border-red-800 bg-red-900 flex flex-col items-center justify-center relative",children:[c.jsx("button",{onClick:()=>u(!1),className:"md:hidden absolute top-4 right-4 text-red-200 hover:text-white",children:c.jsx(Hi,{size:24})}),c.jsx("div",{className:"w-20 h-20 mb-3 bg-white rounded-full p-1 shadow-lg border-2 border-amber-500",children:c.jsx("img",{src:"https://scontent.facc5-1.fna.fbcdn.net/v/t39.30808-6/277561581_380661664069143_4955839060397865014_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeFJNGCSI96CBW1S8R2sOotMrM2NNo5aPtOszY02jlo-04y0fL8D99GjvJaBXuzqH8OYrZRdn_DgSU4Kgwvj36D2&_nc_ohc=GeYOZj7SI8AQ7kNvwFo1QMy&_nc_oc=AdnCfyquuglPpsQYtG1zbC9KAOmrLOH7MKUJTuoVKPm7FdxXjqnrHmzUSj4b3hioGUo&_nc_zt=23&_nc_ht=scontent.facc5-1.fna&_nc_gid=DdsLMQJFSMTnkkiquIQTNQ&oh=00_Afo5zCyNS0kVyQ6p_ArT53WNpaTgIKDpPQScqRwUn3HyKA&oe=695CE41D",alt:"Noble Care Academy",className:"w-full h-full object-contain rounded-full",onError:I=>{I.currentTarget.style.display="none",I.currentTarget.parentElement.innerHTML='<div class="w-full h-full rounded-full bg-red-800 flex items-center justify-center text-amber-400 font-bold text-xs">NCA</div>'}})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-xl font-bold text-amber-400 leading-tight tracking-wide font-serif break-words px-2",children:g}),c.jsx("p",{className:"text-xs text-red-200 mt-1 uppercase tracking-wider",children:"Management System"})]})]}),c.jsx("nav",{className:"flex-1 py-6 space-y-1",children:z?c.jsxs(c.Fragment,{children:[c.jsx($,{href:"/",icon:i_,label:"Dashboard"}),c.jsx($,{href:"/admin/students",icon:lE,label:"Students"}),c.jsx($,{href:"/admin/teachers",icon:wc,label:"Teachers"}),c.jsx($,{href:"/admin/attendance",icon:bD,label:"Student Attendance"}),c.jsx($,{href:"/admin/teacher-attendance",icon:mh,label:"Teacher Attendance"}),c.jsx($,{href:"/admin/reports",icon:Bc,label:"Reports"}),c.jsx($,{href:"/admin/timetable",icon:yD,label:"Timetable"}),c.jsx($,{href:"/admin/settings",icon:oE,label:"Settings"})]}):c.jsxs(c.Fragment,{children:[c.jsx($,{href:"/",icon:i_,label:"Dashboard"}),c.jsx($,{href:"/teacher/attendance",icon:mh,label:"Attendance"}),c.jsx($,{href:"/teacher/assessment",icon:Bc,label:"Assessment"})]})}),c.jsxs("div",{className:"p-4 border-t border-red-800 bg-red-900",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 border-2 border-amber-300 flex items-center justify-center text-sm font-bold shadow-lg text-red-900",children:n==null?void 0:n.name.charAt(0)}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium text-white",children:n==null?void 0:n.name}),c.jsx("p",{className:"text-xs text-amber-400 capitalize",children:n==null?void 0:n.role.toLowerCase()})]})]}),c.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center px-4 py-2 text-sm text-red-200 hover:text-white hover:bg-red-800 rounded-md transition-colors",children:[c.jsx(FD,{size:16,className:"mr-2"}),"Sign Out"]})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[c.jsxs("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-4 md:px-8 z-10 border-b border-amber-100",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{onClick:()=>u(!0),className:"md:hidden p-2 -ml-2 text-red-900 hover:text-red-700",children:c.jsx(XD,{size:24})}),c.jsx("h2",{className:"text-xl font-bold text-red-900 ml-2 md:ml-0",children:e})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[z&&c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>E(!w),className:`relative p-2 transition-colors ${w?"text-red-700 bg-red-50 rounded-full":"text-slate-400 hover:text-red-700"}`,children:[c.jsx(fh,{size:20}),C>0&&c.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-600 rounded-full border-2 border-white"})]}),w&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>E(!1)}),c.jsxs("div",{className:"fixed right-4 top-16 w-80 sm:w-96 bg-white bg-opacity-100 rounded-xl shadow-2xl border border-slate-200 z-50 overflow-hidden",children:[c.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[c.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Notifications"}),c.jsxs("span",{className:"text-xs text-slate-500",children:[C," unread"]})]}),c.jsx("div",{className:"max-h-80 overflow-y-auto bg-white",children:y.length===0?c.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No new activity."}):y.map(I=>c.jsx("div",{className:`p-3 border-b border-slate-100 hover:bg-slate-50 transition-colors ${I.isRead?"bg-slate-50":"bg-white border-l-4 border-l-red-500"}`,children:c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:`text-sm leading-snug mb-1 ${I.isRead?"text-slate-500":"text-slate-800 font-medium"}`,children:I.message}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide ${I.isRead?"bg-slate-200 text-slate-500":"bg-red-100 text-red-600"}`,children:I.isRead?"Read":"Unread"}),c.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(I.createdAt).toLocaleString()})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!I.isRead&&c.jsx("button",{onClick:X=>k(I.id,X),className:"text-emerald-500 hover:text-emerald-700 p-1 hover:bg-emerald-50 rounded transition-colors shrink-0",title:"Mark as read",children:c.jsx(rE,{size:16})}),c.jsx("button",{onClick:X=>B(I.id,X),className:"text-slate-400 hover:text-red-600 p-1 hover:bg-red-50 rounded transition-colors shrink-0",title:"Delete notification",children:c.jsx(Hi,{size:16})})]})]})},I.id))})]})]})]}),c.jsx("div",{className:"h-6 w-px bg-slate-200 mx-2 hidden sm:block"}),c.jsx("div",{className:"text-sm text-slate-500 hidden sm:block font-medium",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),c.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 md:p-8",children:a}),c.jsx(E6,{})]})]})},fn=(a,e)=>{const n={message:a,type:(e==null?void 0:e.type)||"info",duration:(e==null?void 0:e.duration)??4e3};window.dispatchEvent(new CustomEvent("app-toast",{detail:n}))},T6=()=>{var sa;yh();const[a,e]=j.useState({students:0,teachers:0,classes:rt.length,maleStudents:0,femaleStudents:0,classAttendance:[]}),[n,r]=j.useState([]),[l,u]=j.useState([]),[h,g]=j.useState(!0),[p,y]=j.useState(null),[v,w]=j.useState(null),[E,C]=j.useState([]),[L,z]=j.useState([]),[k,B]=j.useState([]),[$,I]=j.useState(!1),[X,te]=j.useState(null),se=m_.useRef(null),[A,R]=j.useState(Date.now()),[D,V]=j.useState(0),[P,M]=j.useState(0),[N,je]=j.useState(0),[ce,Y]=j.useState(null),[oe,de]=j.useState(null),[xe,$e]=j.useState({academicYear:"...",currentTerm:"...",schoolReopenDate:""}),[U,ee]=j.useState(null),[ue,me]=j.useState({A:0,B:0,C:0,D:0,F:0}),[Te,Me]=j.useState([]),[ze,Et]=j.useState({A:[],B:[],C:[],D:[],F:[]}),[tt,jn]=j.useState(null),[Un,Gn]=j.useState({}),[as,Rn]=j.useState([]),[or,_s]=j.useState({}),[cr,Ta]=j.useState({}),[gt,Pt]=j.useState(null),[Cn,Ji]=j.useState(null),[ur,Jt]=j.useState(null),[Lt,rs]=j.useState({}),na=async()=>{var q;g(!0),y(null);try{const fe=await pe.getDashboardStats(),be=await pe.getStudents(),ye=await pe.getNotices(),Se=await pe.getSchoolConfig(),Re=new Date().toISOString().split("T")[0],Oe=await pe.getUsers(),we=await pe.getAllTeacherAttendance(Re),Le=await pe.getAllTeacherAttendanceRecords(),Ke=new Date(Date.now()-1440*60*1e3).toISOString().split("T")[0],Pe=[],nt=new Date,Gt=Se.schoolReopenDate?new Date(Se.schoolReopenDate):null;if((!Gt||nt>=Gt)&&Ke>=(Se.schoolReopenDate||Ke))for(const ke of Oe.filter(lt=>lt.role==="TEACHER"))await pe.getTeacherAttendance(ke.id,Ke)||Pe.push({teacherId:ke.id,teacherName:ke.name,date:Ke,classes:((q=ke.assignedClassIds)==null?void 0:q.map(dn=>{var Yt;return(Yt=rt.find(Bn=>Bn.id===dn))==null?void 0:Yt.name}).join(", "))||"Not Assigned"});const en=Oe.filter(ke=>ke.role==="TEACHER").map(ke=>{var Ns;const lt=Le.filter(Kn=>Kn.teacherId===ke.id),dn=lt.filter(Kn=>Kn.status==="present").length,Yt=lt.length,Bn=Yt>0?Math.round(dn/Yt*100):0;return{id:ke.id,name:ke.name,classes:((Ns=ke.assignedClassIds)==null?void 0:Ns.map(Kn=>{var Dn;return(Dn=rt.find(Bt=>Bt.id===Kn))==null?void 0:Dn.name}).join(", "))||"Not Assigned",presentDays:dn,totalDays:Yt,attendanceRate:Bn}}),vn=we.map(ke=>{var dn;const lt=Oe.find(Yt=>Yt.id===ke.teacherId);return{...ke,teacherName:(lt==null?void 0:lt.name)||"Unknown",teacherClasses:((dn=lt==null?void 0:lt.assignedClassIds)==null?void 0:dn.map(Yt=>{var Bn;return(Bn=rt.find(Ns=>Ns.id===Yt))==null?void 0:Bn.name}).join(", "))||"Not Assigned"}});$e({academicYear:Se.academicYear,currentTerm:Se.currentTerm,schoolReopenDate:Se.schoolReopenDate||""});let zt=Js;if(Se.currentTerm){const ke=Se.currentTerm.match(/\d+/);ke&&(zt=parseInt(ke[0]))}const un=await pe.getAllAssessments(),$t={},zn=new Map(be.map(ke=>[ke.id,ke]));un.forEach(ke=>{if(ke.term===zt&&zn.has(ke.studentId)){if(!$t[ke.studentId]){const dn=zn.get(ke.studentId);$t[ke.studentId]={total:0,count:0,name:dn.name,classId:dn.classId}}const lt=ke.total||(ke.testScore||0)+(ke.homeworkScore||0)+(ke.projectScore||0)+(ke.examScore||0);$t[ke.studentId].total+=lt,$t[ke.studentId].count+=1}});const Tt={A:0,B:0,C:0,D:0,F:0},Aa=[],ja={A:[],B:[],C:[],D:[],F:[]};Object.entries($t).forEach(([ke,lt])=>{var Ns;const dn=lt.count>0?lt.total/lt.count:0,{grade:Yt}=Fc(dn);Tt[Yt]!==void 0&&Tt[Yt]++;const Bn={id:ke,name:lt.name,class:((Ns=rt.find(Kn=>Kn.id===lt.classId))==null?void 0:Ns.name)||"N/A",avg:parseFloat(dn.toFixed(1))};Aa.push(Bn),ja[Yt]&&ja[Yt].push(Bn)}),Aa.sort((ke,lt)=>lt.avg-ke.avg),e({students:fe.studentsCount,teachers:fe.teachersCount,classes:rt.length,maleStudents:fe.gender.male,femaleStudents:fe.gender.female,classAttendance:fe.classAttendance}),r(ye),u(be.slice(-5).reverse()),C(vn),z(en),B(Pe),me(Tt),Me(Aa.slice(0,5)),Et(ja),te(new Date)}catch(fe){console.error("Dashboard fetch error:",fe),y("Failed to load dashboard data. Please check your internet connection or database permissions.")}finally{g(!1)}},ws=async()=>{try{const q=await pe.getDashboardStats(),fe=(q.classAttendance||[]).map(ye=>ye.percentage||0),be=fe.length>0?Math.round(fe.reduce((ye,Se)=>ye+Se,0)/fe.length):0;e(ye=>({...ye,students:q.studentsCount,teachers:q.teachersCount,classes:rt.length,maleStudents:q.gender.male,femaleStudents:q.gender.female,classAttendance:q.classAttendance})),te(new Date),dr(V,q.studentsCount,600),dr(M,be,600);try{const ye=await pe.getAllAssessments(),Se={};ye.forEach(we=>{Se[we.studentId]||(Se[we.studentId]={total:0,count:0});const Le=we.total??(we.testScore||0)+(we.homeworkScore||0)+(we.projectScore||0)+(we.examScore||0);Se[we.studentId].total+=Le,Se[we.studentId].count+=1});const Re=Object.values(Se).map(we=>we.count>0?we.total/we.count:0),Oe=Re.length>0?Math.round(Re.reduce((we,Le)=>we+Le,0)/Re.length):0;dr(je,Oe,600)}catch(ye){console.error("Failed to compute grade avg",ye)}Zi().catch(ye=>console.error(ye)),yo().catch(ye=>console.error("Failed to compute visuals",ye))}catch(q){console.error("Failed to fetch live stats",q)}},yo=async()=>{try{const q=await pe.getAllAssessments(),fe=await pe.getStudents(),be={},ye={},Se={},Re={},Oe=new Map(fe.map(Pe=>[Pe.id,Pe.classId]));q.forEach(Pe=>{const nt=Pe.classId||Oe.get(Pe.studentId)||"unknown",Gt=Pe.subject||"General",cn=Pe.total??(Pe.testScore||0)+(Pe.homeworkScore||0)+(Pe.projectScore||0)+(Pe.examScore||0);be[nt]||(be[nt]={}),be[nt][Gt]||(be[nt][Gt]={total:0,count:0}),be[nt][Gt].total+=cn,be[nt][Gt].count+=1,ye[nt]||(ye[nt]={total:0,count:0}),ye[nt].total+=cn,ye[nt].count+=1;const en=cn,vn=en>=80?"A":en>=65?"B":en>=50?"C":en>=35?"D":"F";Se[nt]||(Se[nt]={A:0,B:0,C:0,D:0,F:0}),Se[nt][vn]=(Se[nt][vn]||0)+1;const zt=Pe.date?new Date(Pe.date).getTime():Pe.createdAt?new Date(Pe.createdAt).getTime():Date.now();Re[nt]||(Re[nt]=[]),Re[nt].push({date:zt,avg:cn})});const we={};Object.entries(be).forEach(([Pe,nt])=>{we[Pe]={},Object.entries(nt).forEach(([Gt,cn])=>{we[Pe][Gt]=Math.round(cn.total/Math.max(1,cn.count))})});const Le=Object.entries(ye).map(([Pe,nt])=>{var Gt;return{className:((Gt=rt.find(cn=>cn.id===Pe))==null?void 0:Gt.name)||Pe,avg:Math.round(nt.total/Math.max(1,nt.count))}}).sort((Pe,nt)=>nt.avg-Pe.avg),Ke={};Object.entries(Re).forEach(([Pe,nt])=>{const Gt=nt.sort((zt,un)=>zt.date-un.date),cn=8,en=Math.max(1,Math.ceil(Gt.length/cn)),vn=[];for(let zt=0;zt<Gt.length;zt+=en){const un=Gt.slice(zt,zt+en),$t=Math.round(un.reduce((zn,Tt)=>zn+Tt.avg,0)/un.length);vn.push($t)}for(;vn.length<cn;)vn.unshift(vn[0]??0);Ke[Pe]=vn.slice(-cn)}),Gn(we),Rn(Le),_s(Se),Ta(Ke)}catch(q){console.error("Error fetching visualizations",q)}},dr=(q,fe,be=500)=>{const ye=Date.now(),Se=0,Re=()=>{const Oe=Math.min(1,(Date.now()-ye)/be),we=Math.round(Se+(fe-Se)*Oe);q(we),Oe<1&&requestAnimationFrame(Re)};requestAnimationFrame(Re)},fi=async(q,fe)=>{const be=[];for(const ye of rt)try{const Re=(await pe.getClassAttendance(ye.id)).filter(we=>{const Le=we.date.split("-");if(Le.length!==3)return!1;const Ke=new Date(parseInt(Le[0]),parseInt(Le[1])-1,parseInt(Le[2]));return Ke>=q&&Ke<=fe}),Oe=(await pe.getStudents(ye.id)).length||0;if(Re.length>0&&Oe>0){const we=Re.length*Oe,Le=Re.reduce((Ke,Pe)=>{var nt;return Ke+(((nt=Pe.presentStudentIds)==null?void 0:nt.length)||0)},0);be.push(Math.round(Le/we*100))}}catch(Se){console.error("Error computing class attendance for",ye.id,Se)}return be.length===0?null:Math.round(be.reduce((ye,Se)=>ye+Se,0)/be.length)},Zi=async()=>{const q=U||new Date,{monday:fe}=In(q),be=fe,ye=new Date(fe);ye.setDate(fe.getDate()+4);const Se=new Date(fe);Se.setDate(fe.getDate()-7);const Re=new Date(Se);Re.setDate(Se.getDate()+4);const Oe=await fi(be,ye),we=await fi(Se,Re);Y(Oe),de(we)};j.useEffect(()=>{na()},[]),j.useEffect(()=>{const q=gs(Ye,"attendance"),fe=tD(q,()=>{ws().catch(be=>console.error("Error refreshing stats on attendance change",be))});return()=>fe()},[]),j.useEffect(()=>{if(!$){se.current&&(clearInterval(se.current),se.current=null);return}return ws(),se.current=window.setInterval(ws,15e3),()=>{se.current&&(clearInterval(se.current),se.current=null)}},[$]),j.useEffect(()=>{if(!X)return;R(Date.now());const q=window.setInterval(()=>R(Date.now()),1e3);return()=>clearInterval(q)},[X]),j.useEffect(()=>{if(xe.schoolReopenDate){const q=xe.schoolReopenDate.split("-"),fe=q.length===3?new Date(parseInt(q[0]),parseInt(q[1])-1,parseInt(q[2])):new Date(xe.schoolReopenDate);if(fe>new Date){ee(In(fe).monday);return}}ee(In(new Date).monday)},[xe.schoolReopenDate]),j.useEffect(()=>{const q=()=>w(null);return v&&window.addEventListener("click",q),()=>window.removeEventListener("click",q)},[v]);const is=(q,fe)=>{q.stopPropagation(),w(v===fe?null:fe)},Zt=async q=>{w(null),Pt(q),Ji(null);try{const fe=await pe.getStudentPerformance(q.id,q.classId);Ji(fe)}catch(fe){console.error(fe)}},$n=q=>{w(null),Jt(q),rs({...q})},kt=async q=>{if(q.preventDefault(),!(!ur||!Lt.name))try{const fe={...ur,...Lt};await pe.updateStudent(fe),na(),Jt(null)}catch{fn("Failed to update student",{type:"error"})}},el=async q=>{jn(null);try{const be=(await pe.getStudents()).find(ye=>ye.id===q);be?Zt(be):fn("Student not found",{type:"error"})}catch(fe){console.error(fe),fn("Failed to fetch student",{type:"error"})}},In=q=>{const fe=new Date(q),be=fe.getDay(),ye=new Date(fe);ye.setDate(fe.getDate()-(be===0?6:be-1));const Se=new Date(ye);return Se.setDate(ye.getDate()+4),{monday:ye,friday:Se}},tl=()=>{if(xe.schoolReopenDate){const q=xe.schoolReopenDate.split("-"),fe=q.length===3?new Date(parseInt(q[0]),parseInt(q[1])-1,parseInt(q[2])):new Date(xe.schoolReopenDate);if(fe>new Date)return In(fe).monday}return In(new Date).monday},Es=()=>{if(U===null)return;const q=new Date(U);if(q.setDate(q.getDate()-7),xe.schoolReopenDate){const fe=xe.schoolReopenDate.split("-"),be=fe.length===3?new Date(parseInt(fe[0]),parseInt(fe[1])-1,parseInt(fe[2])):new Date(xe.schoolReopenDate),ye=In(be).monday;if(q<ye){fn("Cannot view weeks before school re-opens",{type:"info"});return}}ee(q)},Sa=()=>{if(U===null)return;const q=new Date(U);q.setDate(q.getDate()+7),ee(q)},Ut=()=>{if(xe.schoolReopenDate){const q=xe.schoolReopenDate.split("-"),fe=q.length===3?new Date(parseInt(q[0]),parseInt(q[1])-1,parseInt(q[2])):new Date(xe.schoolReopenDate);if(fe>new Date){ee(In(fe).monday);return}}ee(In(new Date).monday)},Ts=({title:q,value:fe,subtext:be,icon:ye,colorClass:Se,iconColorClass:Re})=>c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between relative overflow-hidden group hover:shadow-md transition-shadow min-h-[140px]",children:[c.jsx("div",{className:"flex justify-between items-start z-10",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-slate-500 text-sm font-semibold uppercase tracking-wider",children:q}),c.jsx("h3",{className:"text-3xl font-bold text-slate-800 mt-2",children:fe}),be&&c.jsx("p",{className:"text-xs text-slate-400 mt-1",children:be})]})}),c.jsx("div",{className:`absolute -right-4 -bottom-4 opacity-10 pointer-events-none transform group-hover:scale-110 transition-transform ${Re}`,children:c.jsx(ye,{size:100})})]}),Yn=({title:q,value:fe,suffix:be,delta:ye,deltaPositive:Se})=>c.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-400 uppercase font-semibold",children:q}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("span",{className:"text-2xl font-bold text-slate-800",children:fe}),be&&c.jsx("span",{className:"text-sm text-slate-500",children:be})]})]}),c.jsx("div",{className:`text-sm font-semibold px-2 py-1 rounded ${Se?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"}`,children:ye??"--"})]})}),ls=()=>c.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(Yn,{title:"Students Enrolled",value:D,suffix:"total",delta:null,deltaPositive:!0}),c.jsx(Yn,{title:"Attendance Now",value:`${P}%`,suffix:null,delta:ce!==null&&oe!==null?`${ce-oe}% vs last week`:"No comparison",deltaPositive:ce!==null&&oe!==null?ce-oe>=0:!0}),c.jsx(Yn,{title:"Avg Grade",value:`${N}%`,suffix:null,delta:null,deltaPositive:!0})]})}),xo=()=>c.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-2xl shadow-md border border-amber-200 flex flex-col justify-between min-h-[140px]",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold uppercase text-amber-700",children:"Students Enrolled"}),c.jsx("h3",{className:"text-3xl sm:text-4xl font-extrabold text-amber-900 mt-2",children:a.students}),c.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:[a.classes," classes  ",a.teachers," teachers"]})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm hidden sm:flex",children:c.jsx(lE,{className:"text-amber-600",size:28})})})]}),c.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-slate-500",children:"Female"}),c.jsx("div",{className:"text-lg font-bold text-red-800",children:a.femaleStudents})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-slate-500",children:"Male"}),c.jsx("div",{className:"text-lg font-bold text-amber-600",children:a.maleStudents})]})]}),c.jsx("div",{className:"hidden sm:flex items-end gap-2 flex-1 max-w-[55%]",children:a.classAttendance.slice(0,8).map(q=>c.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[c.jsx("div",{className:"w-full rounded-sm",title:`${q.className}: ${q.percentage}%`,style:{background:q.percentage>=80?"#16a34a":q.percentage<50?"#dc2626":"#f59e0b",height:`${Math.max(6,Math.round(q.percentage/2))}px`}}),c.jsx("div",{className:"text-[10px] text-slate-500 mt-1 truncate text-center",children:q.className.replace("Primary ","P").replace("Class ","P").replace("Nursery ","N")})]},q.id))})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs("div",{className:"text-xs text-slate-500",children:["Updated ",X?`${Math.floor((A-X.getTime())/1e3)}s ago`:""]}),c.jsx("div",{className:"text-xs text-slate-400 hidden sm:block",children:"Responsive  Clean  Insightful"})]})]}),nl=()=>{const q=a.teachers>0?Math.round(a.students/a.teachers):"";return c.jsxs("div",{className:"bg-gradient-to-br from-sky-50 to-sky-100 p-6 rounded-2xl shadow-md border border-sky-200 flex flex-col justify-between min-h-[140px]",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold uppercase text-sky-700",children:"Teachers & Staff"}),c.jsx("h3",{className:"text-3xl sm:text-4xl font-extrabold text-sky-900 mt-2",children:a.teachers}),c.jsxs("p",{className:"text-sm text-sky-700 mt-1",children:["Teaching across ",a.classes," classes"]})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm hidden sm:flex",children:c.jsx(wc,{className:"text-sky-600",size:28})})})]}),c.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-slate-500",children:"Avg Students / Teacher"}),c.jsx("div",{className:"text-lg font-bold text-sky-800",children:q})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-slate-500",children:"Classes"}),c.jsx("div",{className:"text-lg font-bold text-sky-800",children:a.classes})]})]}),c.jsx("div",{className:"hidden sm:flex items-center gap-3",children:c.jsx(Xs,{to:"/admin/teachers",className:"text-xs bg-white px-3 py-1 rounded-md font-medium text-sky-700 shadow-sm hover:underline",children:"Manage Staff"})})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs("div",{className:"text-xs text-slate-500",children:["Updated ",X?`${Math.floor((A-X.getTime())/1e3)}s ago`:""]}),c.jsx("div",{className:"text-xs text-slate-400 hidden sm:block",children:"Professional  Accessible  Responsive"})]})]})},Ss=()=>{if(U===null)return c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-slate-100 h-full flex flex-col items-center justify-center",children:[c.jsx("div",{className:"relative w-12 h-12 border-3 border-slate-100 border-t-red-900 rounded-full animate-spin"}),c.jsx("p",{className:"text-slate-400 text-sm mt-4",children:"Loading attendance data..."})]});const q=a.classAttendance,{monday:fe,friday:be}=In(U),Se=tl().toDateString()===fe.toDateString(),Re=Ke=>{const Pe=Ke.split("-");return Pe.length===3?new Date(parseInt(Pe[0]),parseInt(Pe[1])-1,parseInt(Pe[2])):new Date(Ke)};let Oe="",we=null;xe.schoolReopenDate&&(we=Re(xe.schoolReopenDate),we>new Date?Oe="School Closed":Oe="School Open");const Le=Ke=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(Ke);return c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-slate-100 h-full flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Class Attendance"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Weekly participation overview"})]}),Oe&&c.jsx("div",{className:`text-xs font-bold px-3 py-1 rounded-full ${Oe==="School Closed"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:Oe})]}),c.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-amber-50 rounded-xl border border-red-100",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:Es,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-white border border-slate-200 hover:bg-slate-50 hover:border-red-400 transition-colors shadow-sm text-slate-600 hover:text-red-700 font-semibold",title:"Previous week",children:""}),c.jsx("div",{className:"flex-1 mx-4 text-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:[Le(fe),"  ",Le(be)]}),c.jsx("p",{className:"text-xs text-slate-500 font-medium",children:fe.getFullYear()}),Se&&c.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-100 text-red-700 text-[10px] font-bold rounded-full mt-1 uppercase tracking-wide",children:"Current Week"})]})}),c.jsx("button",{onClick:Sa,disabled:Se,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-white border border-slate-200 hover:bg-slate-50 hover:border-red-400 transition-colors shadow-sm text-slate-600 hover:text-red-700 font-semibold disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-200 disabled:hover:text-slate-600",title:Se?"You are viewing the current week":"Next week",children:""})]}),!Se&&c.jsx("div",{className:"mt-3 text-center",children:c.jsx("button",{onClick:Ut,className:"text-xs text-red-700 hover:text-red-800 font-semibold bg-white border border-red-200 px-3 py-1.5 rounded-md hover:bg-red-50 transition-colors",children:"Return to Current Week"})})]}),Oe==="School Closed"&&we&&c.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-red-800 font-semibold",children:["School is currently closed. Attendance records will begin from ",Le(we)]})}),c.jsx("div",{className:"flex-1 flex items-end justify-between gap-1 sm:gap-2 px-1 pb-2 h-96 w-full overflow-x-auto",children:q.map(Ke=>{let Pe="bg-amber-500";return Ke.percentage<50?Pe="bg-red-600":Ke.percentage>=80&&(Pe="bg-emerald-500"),c.jsxs("div",{className:"flex flex-col items-center flex-1 group h-full justify-end min-w-[20px]",children:[c.jsxs("div",{className:"w-full max-w-[30px] bg-slate-50 rounded-t-sm relative flex items-end h-full hover:bg-slate-100 transition-colors",children:[c.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 pointer-events-none",children:[Ke.className,": ",Ke.percentage,"%"]}),c.jsx("div",{className:`w-full ${Pe} rounded-t-sm transition-all duration-1000 ease-out relative`,style:{height:`${Ke.percentage}%`}})]}),c.jsx("span",{className:"text-[10px] text-slate-400 mt-2 font-medium truncate w-full text-center",children:Ke.className.replace("Nursery ","N").replace("Class ","P").replace("Primary ","P").replace("KG ","K").replace("JHS ","J")})]},Ke.id)})})]})},Na=()=>{const q=a.maleStudents+a.femaleStudents||1,fe=Math.round(a.maleStudents/q*100),be=Math.round(a.femaleStudents/q*100);return c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-full flex flex-col justify-center items-center",children:[c.jsx("h3",{className:"font-bold text-slate-800 w-full mb-6",children:"Demographics"}),c.jsxs("div",{className:"relative w-48 h-48",children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-slate-50"}),c.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(#7f1d1d 0% ${be}%, #f59e0b ${be}% 100%)`,mask:"radial-gradient(transparent 60%, black 61%)",WebkitMask:"radial-gradient(transparent 60%, black 61%)"}}),c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[c.jsx("span",{className:"text-3xl font-bold text-slate-800",children:a.students}),c.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Total"})]})]}),c.jsxs("div",{className:"flex w-full justify-between px-6 mt-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Female"}),c.jsxs("p",{className:"text-xl font-bold text-red-900",children:[be,"%"]}),c.jsx("p",{className:"text-lg font-bold text-red-700 mt-1",children:a.femaleStudents})]}),c.jsx("div",{className:"w-px bg-slate-100"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Male"}),c.jsxs("p",{className:"text-xl font-bold text-amber-500",children:[fe,"%"]}),c.jsx("p",{className:"text-lg font-bold text-amber-600 mt-1",children:a.maleStudents})]})]})]})},vo=()=>{const q=Object.keys(ue).reduce((Re,Oe)=>Re+ue[Oe],0)||0,fe={A:4,B:3,C:2,D:1,F:0},be=Object.entries(ue).reduce((Re,[Oe,we])=>{const Le=fe[Oe]??0;return Re+Le*we},0),ye=q>0?be/q:0,Se=ye>=3.5?"A":ye>=2.5?"B":ye>=1.5?"C":ye>=.5?"D":"F";return c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-md border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:c.jsx(ap,{className:"w-6 h-6 text-red-700"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800",children:"Academic Performance Rate"}),c.jsx("p",{className:"text-xs text-slate-500",children:xe.currentTerm})]}),c.jsxs("div",{className:"ml-6 hidden sm:block",children:[c.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Graded Students"}),c.jsx("p",{className:"text-2xl font-bold text-slate-800",children:q})]}),c.jsxs("div",{className:"ml-6 hidden sm:block",children:[c.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Average Grade"}),c.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[Se," ",c.jsxs("span",{className:"text-sm text-slate-500",children:["(",ye.toFixed(2),")"]})]})]})]}),c.jsxs("button",{onClick:na,disabled:h,className:"flex items-center px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Refresh performance data",children:[c.jsx(c_,{size:14,className:`mr-1 ${h?"animate-spin":""}`}),"Refresh"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"space-y-3",children:Object.entries(ue).map(([Re,Oe])=>{const we=q>0?Math.round(Oe/q*100):0;let Le="from-emerald-400 to-emerald-600";return Re==="B"&&(Le="from-blue-400 to-blue-600"),Re==="C"&&(Le="from-amber-300 to-amber-500"),Re==="D"&&(Le="from-orange-300 to-orange-500"),Re==="F"&&(Le="from-red-400 to-red-600"),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 font-bold text-slate-700",children:Re}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"relative h-4 bg-slate-100 rounded-full overflow-hidden",children:c.jsx("div",{className:`absolute left-0 top-0 h-full rounded-full bg-gradient-to-r ${Le} transition-all duration-1000`,style:{width:`${we}%`},title:`${Oe} students  ${we}%`})}),c.jsxs("div",{className:"mt-2 flex justify-between text-xs text-slate-500",children:[c.jsxs("span",{children:[Oe," ",Oe===1?"student":"students"]}),c.jsxs("span",{className:"font-semibold text-slate-700",children:[we,"%"]})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx("button",{onClick:()=>jn(Re),className:"text-xs text-red-700 hover:underline font-medium",children:"View"})})]},Re)})}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-emerald-400 to-emerald-600","aria-hidden":!0}),c.jsx("span",{className:"text-xs text-slate-600",children:"A  Excellent"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-blue-400 to-blue-600","aria-hidden":!0}),c.jsx("span",{className:"text-xs text-slate-600",children:"B  Very Good"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-amber-300 to-amber-500","aria-hidden":!0}),c.jsx("span",{className:"text-xs text-slate-600",children:"C  Satisfactory"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-orange-300 to-orange-500","aria-hidden":!0}),c.jsx("span",{className:"text-xs text-slate-600",children:"D  Needs Support"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-red-400 to-red-600","aria-hidden":!0}),c.jsx("span",{className:"text-xs text-slate-600",children:"F  Intervention Required"})]})]}),q===0&&c.jsxs("div",{className:"text-center text-slate-400 py-4 text-sm",children:["No academic data available for ",xe.currentTerm,"."]}),c.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg text-sm text-slate-700 border border-slate-100",children:[c.jsx("div",{className:"font-semibold text-slate-800 mb-1",children:"What this chart shows"}),c.jsx("div",{className:"text-sm",children:"Each bar represents the number of students who received that grade during the selected term. Percentages are calculated against the total number of graded students. Use the counts and percentages to identify strengths (high A/B) and areas for intervention (high D/F). Hover a bar to see the exact count."})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[c.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[c.jsx(p6,{className:"w-5 h-5 mr-2 text-amber-500"})," Top Performers"]}),c.jsx("div",{className:"space-y-4",children:Te.length===0?c.jsx("p",{className:"text-sm text-slate-400 italic",children:"No data yet."}):Te.map((Re,Oe)=>c.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-2 last:border-0 last:pb-0",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${Oe===0?"bg-amber-500":"bg-slate-300"}`,children:Oe+1}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Re.name}),c.jsx("p",{className:"text-xs text-slate-400",children:Re.class})]})]}),c.jsx("span",{className:"text-sm font-bold text-red-900",children:Re.avg})]},Oe))})]})]})};return h?c.jsx(Pn,{title:"Dashboard",children:c.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-8rem)]",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-amber-100 rounded-full blur-xl opacity-50 animate-pulse"}),c.jsx("div",{className:"relative w-16 h-16 border-4 border-slate-100 border-t-red-900 rounded-full animate-spin shadow-sm"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-red-900 rounded-full"})})]}),c.jsxs("div",{className:"mt-8 text-center space-y-2",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Noble Care Academy"}),c.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),c.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),c.jsx("div",{className:"w-2 h-2 bg-red-800 rounded-full animate-bounce"})]})]})]})}):p?c.jsx(Pn,{title:"Dashboard",children:c.jsxs("div",{className:"flex items-center justify-center h-96 flex-col p-8",children:[c.jsx(o_,{size:48,className:"text-red-400 mb-4"}),c.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"Unable to load dashboard"}),c.jsx("p",{className:"text-slate-500 text-center max-w-md mb-6",children:p}),c.jsxs("button",{onClick:na,className:"flex items-center px-4 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900 transition-colors",children:[c.jsx(c_,{size:16,className:"mr-2"})," Retry"]})]})}):c.jsxs(Pn,{title:"Dashboard",children:[c.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Welcome, Headmistress"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"Here is what's happening in your school today."})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-right mr-2 hidden sm:block",children:[c.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Academic Period"}),c.jsxs("p",{className:"text-sm font-bold text-red-900",children:[xe.currentTerm,"  ",xe.academicYear]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs(Xs,{to:"/admin/students",className:"flex items-center px-4 py-2 bg-red-900 text-white rounded-lg hover:bg-red-950 transition-colors shadow-sm text-sm font-medium",children:[c.jsx(cE,{size:16,className:"mr-2"}),"Add Student"]}),c.jsxs(Xs,{to:"/admin/teachers",className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors shadow-sm text-sm font-medium",children:[c.jsx(wc,{size:16,className:"mr-2"}),"Add Staff"]})]}),c.jsxs("div",{className:"ml-4 flex flex-col items-end text-right",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`w-3 h-3 rounded-full ${$?"bg-emerald-500":"bg-slate-300"}`,"aria-hidden":!0}),c.jsx("button",{onClick:()=>I(q=>!q),className:"text-xs text-slate-600 hover:underline",title:"Toggle live metrics polling",children:$?"Live Metrics On":"Enable Live Metrics"})]}),c.jsx("div",{className:"text-xs text-slate-400 mt-1",children:X?`Updated ${Math.floor((A-X.getTime())/1e3)}s ago`:"Not updated"})]})]})]}),k.length>0&&c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:c.jsx(o_,{className:"text-red-600",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-red-900 text-lg",children:"Attendance Alerts"}),c.jsxs("p",{className:"text-red-700 text-sm",children:[k.length," teacher",k.length!==1?"s":""," missed attendance yesterday"]})]})]}),c.jsx("div",{className:"space-y-3",children:k.map(q=>c.jsx("div",{className:"bg-white p-4 rounded-lg border border-red-100 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-bold text-red-600",children:q.teacherName.charAt(0)})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800",children:q.teacherName}),c.jsx("p",{className:"text-sm text-slate-500",children:q.classes})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-sm font-medium text-red-700",children:["Missed: ",new Date(q.date).toLocaleDateString()]}),c.jsx("p",{className:"text-xs text-slate-400",children:"Please follow up"})]})]})},q.teacherId))})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[c.jsx(xo,{}),c.jsx(nl,{}),c.jsx(Ts,{title:"Notices",value:n.length,subtext:"Active Announcements",icon:fh,colorClass:"bg-blue-50",iconColorClass:"text-blue-600"})]}),c.jsx("div",{className:"mb-8",children:c.jsx(ls,{})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[c.jsx("div",{className:"lg:col-span-2 h-[550px]",children:c.jsx(Ss,{})}),c.jsx("div",{className:"h-96",children:c.jsx(Na,{})})]}),c.jsx(vo,{}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 overflow-visible",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800",children:"New Admissions"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Recently added students"})]}),c.jsx(Xs,{to:"/admin/students",className:"text-sm text-red-700 hover:text-red-800 font-medium bg-red-50 px-3 py-1 rounded-full transition-colors",children:"View All"})]}),c.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:c.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Student Name"}),c.jsx("th",{className:"px-6 py-3",children:"Assigned Class"}),c.jsx("th",{className:"px-6 py-3",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Action"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:l.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-6 text-center text-slate-400",children:"No students yet."})}):l.map((q,fe)=>{var be;return c.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-medium text-slate-800 flex items-center",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs text-white mr-3 shadow-sm ${q.gender==="Male"?"bg-amber-400":"bg-red-800"}`,children:q.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{children:q.name}),c.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:q.gender})]})]}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"px-2.5 py-1 rounded-md bg-slate-100 text-slate-600 text-xs font-semibold border border-slate-200",children:(be=rt.find(ye=>ye.id===q.classId))==null?void 0:be.name})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"inline-flex items-center text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mr-1.5"}),"Active"]})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:ye=>is(ye,q.id),className:`transition-colors p-1.5 rounded-full hover:bg-slate-200 ${v===q.id?"text-red-600 bg-slate-100":"text-slate-400"}`,children:c.jsx(OD,{size:18})}),v===q.id&&c.jsxs("div",{className:"absolute right-0 mt-1 w-40 bg-white rounded-lg shadow-xl border border-slate-100 z-50 py-1 text-left animate-in fade-in zoom-in-95 duration-100 origin-top-right",children:[c.jsxs("button",{onClick:()=>Zt(q),className:"flex items-center w-full px-4 py-2.5 text-xs text-slate-700 hover:bg-slate-50 hover:text-red-600 font-medium transition-colors",children:[c.jsx(iE,{size:14,className:"mr-2"})," View Details"]}),c.jsxs("button",{onClick:()=>$n(q),className:"flex items-center w-full px-4 py-2.5 text-xs text-slate-700 hover:bg-slate-50 hover:text-blue-600 font-medium transition-colors",children:[c.jsx(Hg,{size:14,className:"mr-2"})," Edit Student"]})]})]})})]},q.id)})})]})})]}),c.jsxs("div",{className:"bg-gradient-to-br from-red-900 to-slate-900 rounded-2xl shadow-lg border border-red-800 overflow-hidden flex flex-col text-white self-start",children:[c.jsxs("div",{className:"p-6 border-b border-red-800 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-amber-400",children:"Notice Board"}),c.jsx("p",{className:"text-xs text-slate-300",children:"School announcements"})]}),c.jsx(Xs,{to:"/admin/settings",className:"p-2 rounded-lg hover:bg-white/10 text-slate-300 transition-colors",children:c.jsx(oE,{size:18})})]}),c.jsx("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto max-h-[400px]",children:n.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-400",children:[c.jsx(oi,{size:40,className:"mb-2 opacity-20"}),c.jsx("p",{className:"text-sm",children:"No new notices"})]}):n.map((q,fe)=>c.jsxs("div",{className:"group relative pl-4 pb-4 border-l border-slate-700 last:pb-0",children:[c.jsx("div",{className:`absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full border-2 border-slate-800 ${q.type==="urgent"?"bg-red-500":"bg-amber-500"}`}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-900 px-1.5 py-0.5 rounded",children:q.date}),q.type==="urgent"&&c.jsx("span",{className:"text-[10px] text-red-400 font-bold uppercase tracking-wider",children:"Urgent"})]}),c.jsx("p",{className:"text-sm font-medium text-slate-200 group-hover:text-white transition-colors",children:q.message})]})]},q.id))}),c.jsx("div",{className:"p-4 bg-slate-900/50 text-center",children:c.jsxs(Xs,{to:"/admin/timetable",className:"text-xs font-semibold text-amber-400 hover:text-amber-300 uppercase tracking-wide flex items-center justify-center w-full",children:["View Calendar ",c.jsx(dD,{size:12,className:"ml-1"})]})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 rounded-2xl shadow-lg border border-emerald-200 flex flex-col min-h-[300px] hover:shadow-xl transition-shadow duration-300",children:[c.jsxs("div",{className:"p-4 sm:p-6 border-b border-emerald-200 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-emerald-900 text-lg",children:"Teacher Attendance Today"}),c.jsx("p",{className:"text-xs text-emerald-700 mt-1",children:"Current day's staff presence overview"})]}),c.jsx("div",{className:"bg-emerald-100 p-2 rounded-full",children:c.jsx(wc,{className:"text-emerald-600",size:20})})]}),c.jsx("div",{className:"p-4 space-y-3 flex-1 overflow-y-auto max-h-[400px]",children:E.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-emerald-500",children:[c.jsx("div",{className:"bg-emerald-100 p-4 rounded-full mb-3",children:c.jsx(wc,{size:32,className:"text-emerald-400"})}),c.jsx("p",{className:"text-sm font-medium text-center",children:"No attendance marked yet today"}),c.jsx("p",{className:"text-xs text-emerald-400 mt-1",children:"Teachers will appear here once they mark attendance"})]}):c.jsxs("div",{className:"space-y-3",children:[E.map(q=>c.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-emerald-100 hover:shadow-md transition-all duration-200 hover:border-emerald-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c.jsx("div",{className:`w-4 h-4 rounded-full flex-shrink-0 ${q.status==="present"?"bg-emerald-500":"bg-red-500"} shadow-sm`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:q.teacherName}),c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${q.status==="present"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:q.status==="present"?"Present":"Absent"})]}),c.jsx("p",{className:"text-xs text-slate-500 truncate",children:q.teacherClasses||"No classes assigned"}),c.jsx("p",{className:"text-xs text-slate-400 mt-1",children:q.date})]})]}),c.jsx("div",{className:"ml-3 flex-shrink-0",children:c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${q.status==="present"?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:q.status==="present"?c.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):c.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})},q.id)),c.jsx("div",{className:"text-center mt-4 pt-3 border-t border-emerald-100",children:c.jsxs("p",{className:"text-xs text-emerald-600 font-medium",children:[E.length," teacher",E.length!==1?"s":""," marked attendance today"]})})]})})]}),c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-2xl shadow-lg border border-blue-200 flex flex-col min-h-[300px] hover:shadow-xl transition-shadow duration-300",children:[c.jsxs("div",{className:"p-4 sm:p-6 border-b border-blue-200 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-blue-900 text-lg",children:"Teacher Attendance Summary"}),c.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Term-wide staff attendance statistics"})]}),c.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:c.jsx(ap,{className:"text-blue-600",size:20})})]}),c.jsx("div",{className:"p-4 space-y-3 flex-1 overflow-y-auto max-h-[400px]",children:L.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-blue-500",children:[c.jsx("div",{className:"bg-blue-100 p-4 rounded-full mb-3",children:c.jsx(ap,{size:32,className:"text-blue-400"})}),c.jsx("p",{className:"text-sm font-medium text-center",children:"No attendance data available"}),c.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Term statistics will appear as teachers mark attendance"})]}):c.jsxs("div",{className:"space-y-3",children:[L.map(q=>c.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-blue-100 hover:shadow-md transition-all duration-200 hover:border-blue-200",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[q.attendanceRate,"%"]})}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-white rounded-full flex items-center justify-center",children:c.jsx("div",{className:`w-3 h-3 rounded-full ${q.attendanceRate>=80?"bg-emerald-500":q.attendanceRate>=70?"bg-amber-500":"bg-red-500"}`})})]})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:q.name}),c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${q.attendanceRate>=80?"bg-emerald-100 text-emerald-700":q.attendanceRate>=70?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:q.attendanceRate>=80?"Excellent":q.attendanceRate>=70?"Good":"Needs Attention"})]}),c.jsx("p",{className:"text-xs text-slate-500 truncate",children:q.classes||"No classes assigned"}),c.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[q.presentDays," present / ",q.totalDays," total days"]})]})]})})},q.id)),c.jsx("div",{className:"text-center mt-4 pt-3 border-t border-blue-100",children:c.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["Average attendance: ",L.length>0?Math.round(L.reduce((q,fe)=>q+fe.attendanceRate,0)/L.length):0,"%"]})})]})})]})]})]}),gt&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-2xl font-bold text-slate-500 shadow-inner",children:gt.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-900",children:gt.name}),c.jsxs("div",{className:"flex gap-2 text-sm text-slate-500 mt-1",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx(uE,{size:14,className:"mr-1"})," ",gt.gender]}),c.jsx("span",{children:""}),c.jsx("span",{children:(sa=rt.find(q=>q.id===gt.classId))==null?void 0:sa.name})]})]})]}),c.jsx("button",{onClick:()=>Pt(null),className:"text-slate-400 hover:text-slate-700 transition-colors bg-white p-2 rounded-full shadow-sm hover:shadow",children:c.jsx(Hi,{size:20})})]}),c.jsxs("div",{className:"p-6 space-y-8",children:[c.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-5 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-amber-100 rounded-full text-amber-600",children:c.jsx(oi,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-amber-900",children:"Attendance Overview"}),c.jsx("p",{className:"text-sm text-amber-700",children:"Current Term Participation"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-3xl font-bold text-amber-600",children:Cn?`${Cn.attendance.percentage}%`:"..."}),c.jsx("p",{className:"text-xs text-amber-700 font-medium mt-1",children:Cn?`${Cn.attendance.present}/${Cn.attendance.total} Days`:"Loading"})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[c.jsx(Bc,{size:20,className:"mr-2 text-red-800"})," Academic Performance (",xe.currentTerm,")"]}),c.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Subject"}),c.jsx("th",{className:"px-4 py-3 text-center",children:"Score"}),c.jsx("th",{className:"px-4 py-3 text-center",children:"Grade"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Remark"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:Cn?Cn.grades.map((q,fe)=>{const be=q.total||(q.testScore||0)+(q.homeworkScore||0)+(q.projectScore||0)+(q.examScore||0),{grade:ye,remark:Se}=Fc(be);return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:q.subject}),c.jsx("td",{className:"px-4 py-3 text-center",children:be>0?be:"-"}),c.jsx("td",{className:"px-4 py-3 text-center",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Hh(ye)}`,children:be>0?ye:"-"})}),c.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:be>0?Se:"N/A"})]},fe)}):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-4 text-center text-slate-400 italic",children:"Fetching academic records..."})})})]})})]})]})]})}),ur&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-2",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Edit Student Details"}),c.jsx("button",{onClick:()=>Jt(null),className:"text-slate-400 hover:text-slate-700",children:c.jsx(Hi,{size:20})})]}),c.jsxs("form",{onSubmit:kt,className:"space-y-5",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-xs font-bold text-red-800 uppercase tracking-wide",children:"Personal Information"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none transition-all placeholder-slate-400",value:Lt.name||"",onChange:q=>rs({...Lt,name:q.target.value})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Gender"}),c.jsxs("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none bg-white text-slate-900",value:Lt.gender,onChange:q=>rs({...Lt,gender:q.target.value}),children:[c.jsx("option",{value:"Male",children:"Male"}),c.jsx("option",{value:"Female",children:"Female"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Date of Birth"}),c.jsx("input",{type:"date",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none",value:Lt.dob||"",onChange:q=>rs({...Lt,dob:q.target.value})})]})]})]}),c.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-50 mt-2",children:[c.jsx("h4",{className:"text-xs font-bold text-red-800 uppercase tracking-wide",children:"Academic Info"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Assigned Class"}),c.jsx("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none bg-white text-slate-900",value:Lt.classId,onChange:q=>rs({...Lt,classId:q.target.value}),children:rt.map(q=>c.jsx("option",{value:q.id,children:q.name},q.id))})]})]}),c.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-50 mt-2",children:[c.jsx("h4",{className:"text-xs font-bold text-red-800 uppercase tracking-wide",children:"Guardian Information"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Guardian Name"}),c.jsx("input",{type:"text",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none placeholder-slate-400",value:Lt.guardianName||"",onChange:q=>rs({...Lt,guardianName:q.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Phone Number"}),c.jsx("input",{type:"tel",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none placeholder-slate-400",value:Lt.guardianPhone||"",onChange:q=>rs({...Lt,guardianPhone:q.target.value})})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[c.jsx("button",{type:"button",onClick:()=>Jt(null),className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),c.jsxs("button",{type:"submit",className:"flex items-center px-5 py-2.5 bg-red-800 text-white rounded-lg hover:bg-red-900 font-medium shadow-sm transition-colors",children:[c.jsx(ru,{size:18,className:"mr-2"})," Save Changes"]})]})]})]})}),tt&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Students with grade ",tt]}),c.jsxs("p",{className:"text-sm text-slate-500",children:[(ze[tt]||[]).length," students"]})]}),c.jsx("button",{onClick:()=>jn(null),className:"text-slate-400 hover:text-slate-700 transition-colors bg-white p-2 rounded-full shadow-sm hover:shadow",children:c.jsx(Hi,{size:20})})]}),c.jsx("div",{className:"p-6 space-y-4",children:!ze[tt]||ze[tt].length===0?c.jsx("div",{className:"text-center text-slate-400 py-8",children:"No students in this grade for the selected term."}):c.jsx("div",{className:"space-y-3",children:ze[tt].map((q,fe)=>c.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-3 last:pb-0",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800",children:q.name}),c.jsxs("p",{className:"text-xs text-slate-400",children:[q.class,"  Avg: ",q.avg]})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("button",{onClick:()=>el(q.id),className:"text-xs text-red-700 hover:underline",children:"View"})})]},q.id))})})]})})]})},S6=()=>{var N,je;const[a,e]=j.useState([]),[n,r]=j.useState("all"),[l,u]=j.useState(!1),[h,g]=j.useState(null),[p,y]=j.useState({gender:"Male",classId:"c_p1",dob:""}),[v,w]=j.useState(null),[E,C]=j.useState(null),[L,z]=j.useState(null),[k,B]=j.useState(!1),$=async()=>{const ce=await pe.getStudents();e(ce)};j.useEffect(()=>{$()},[]);const I=async ce=>{C(null),w(ce);const Y=await pe.getStudentPerformance(ce.id,ce.classId);C(Y)},X=()=>{w(null),C(null)},te=a.filter(ce=>n==="all"?!0:ce.classId===n).sort((ce,Y)=>ce.name.localeCompare(Y.name)),se=()=>{C(null),y({gender:"Male",classId:n!=="all"?n:"c_p1",dob:""}),g(null),u(!0)},A=async ce=>{y(ce),g(ce.id),u(!0),C(null);const Y=await pe.getStudentPerformance(ce.id,ce.classId);C(Y)},R=()=>{u(!1),y({gender:"Male",classId:"c_p1",dob:""}),g(null),C(null)},D=(ce,Y)=>{Y.stopPropagation(),z(ce)},V=async()=>{if(!L)return;const ce=L;z(null);const Y=[...a];e(oe=>oe.filter(de=>de.id!==ce));try{await pe.deleteStudent(ce)}catch(oe){console.error("Delete failed",oe),e(Y),fn("Failed to delete student. Please try again.",{type:"error"})}},P=async ce=>{if(ce.preventDefault(),!(!p.name||!p.classId)){B(!0);try{if(h){const Y={...p,id:h};await pe.updateStudent(Y),fn("Student updated successfully.",{type:"success"})}else{const Y={id:Math.random().toString(36).substr(2,9),name:p.name,gender:p.gender,dob:p.dob||"2015-01-01",classId:p.classId,guardianName:p.guardianName||"",guardianPhone:p.guardianPhone||""};await pe.addStudent(Y),fn("Student added successfully.",{type:"success"})}await $(),R()}catch(Y){console.error("Save failed",Y),fn("Failed to save student. Please try again.",{type:"error"})}finally{B(!1)}}},M=()=>{if(!E||!E.attendance||!E.attendance.schoolDates)return null;const{schoolDates:ce,presentDates:Y}=E.attendance;if(ce.length===0)return c.jsx("div",{className:"text-center text-slate-400 py-4 italic",children:"No attendance records found for this term."});const oe=ee=>(typeof ee=="string"?new Date(ee):ee).toISOString().split("T")[0],de=new Set(ce.map(ee=>oe(ee))),xe=new Set(Y.map(ee=>oe(ee))),$e={};ce.forEach(ee=>{const ue=new Date(ee),me=`${ue.getFullYear()}-${ue.getMonth()}`;$e[me]||($e[me]={label:ue.toLocaleString("default",{month:"long",year:"numeric"}),year:ue.getFullYear(),month:ue.getMonth()})});const U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:Object.entries($e).map(([ee,ue])=>{const{year:me,month:Te,label:Me}=ue,ze=new Date(me,Te,1).getDay(),Et=new Date(me,Te+1,0).getDate(),tt=Math.ceil((ze+Et)/7)*7;return c.jsxs("div",{className:"border border-slate-200 rounded-lg p-3 bg-white",children:[c.jsx("h5",{className:"font-bold text-slate-700 text-sm mb-2 text-center border-b border-slate-100 pb-2",children:Me}),c.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[U.map((jn,Un)=>c.jsx("div",{className:"text-[11px] text-slate-400 font-bold",children:jn},Un)),Array.from({length:tt}).map((jn,Un)=>{const Gn=Un-ze+1;if(Gn<1||Gn>Et)return c.jsx("div",{className:"h-8"},Un);const as=new Date(me,Te,Gn),Rn=oe(as),or=de.has(Rn),_s=xe.has(Rn),cr=as.getDay()===0||as.getDay()===6,Ta="h-8 w-8 mx-auto flex items-center justify-center rounded-full text-sm font-semibold",gt=cr?"text-slate-300 bg-slate-50":"";return or?c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("div",{title:`${Rn}: ${_s?"Present":"Absent"}`,className:`${Ta} ${gt} ${_s?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"}`,children:Gn})},Un):c.jsx("div",{className:"h-8 flex items-center justify-center text-[12px] text-slate-200"},Un)})]}),c.jsxs("div",{className:"mt-3 flex justify-center gap-4 text-xs text-slate-500",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-emerald-100 rounded-full border border-emerald-200"})," Present"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-red-100 rounded-full border border-red-200"})," Absent"]})]})]},ee)})})};return c.jsxs(Pn,{title:"Manage Students",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{className:"flex gap-2",children:c.jsxs("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm bg-slate-800 text-white",value:n,onChange:ce=>r(ce.target.value),children:[c.jsx("option",{value:"all",children:"All Classes"}),rt.map(ce=>c.jsx("option",{value:ce.id,children:ce.name},ce.id))]})}),c.jsxs("button",{onClick:se,className:"flex items-center justify-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors text-sm font-medium",children:[c.jsx(Hc,{size:16,className:"mr-2"}),"Add Student"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Name"}),c.jsx("th",{className:"px-6 py-3",children:"Class"}),c.jsx("th",{className:"px-6 py-3",children:"Gender"}),c.jsx("th",{className:"px-6 py-3",children:"Guardian"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:te.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-400",children:"No students found."})}):te.map(ce=>{var oe;const Y=((oe=rt.find(de=>de.id===ce.classId))==null?void 0:oe.name)||ce.classId;return c.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:ce.name}),c.jsx("td",{className:"px-6 py-3",children:Y}),c.jsx("td",{className:"px-6 py-3",children:ce.gender}),c.jsx("td",{className:"px-6 py-3",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{children:ce.guardianName}),c.jsx("span",{className:"text-xs text-slate-400",children:ce.guardianPhone})]})}),c.jsxs("td",{className:"px-6 py-3 text-right whitespace-nowrap",children:[c.jsx("button",{type:"button",onClick:()=>I(ce),className:"text-emerald-500 hover:text-emerald-700 p-2 hover:bg-emerald-50 rounded-full transition-colors mr-1",title:"View Performance",children:c.jsx(iE,{size:16})}),c.jsx("button",{type:"button",onClick:()=>A(ce),className:"text-blue-500 hover:text-blue-700 p-2 hover:bg-blue-50 rounded-full transition-colors mr-1",title:"Edit Details",children:c.jsx(Hg,{size:16})}),c.jsx("button",{type:"button",onClick:de=>D(ce.id,de),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-full transition-colors cursor-pointer",title:"Delete Student",children:c.jsx(qc,{size:16,className:"pointer-events-none"})})]})]},ce.id)})})]})})]}),L&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:c.jsx("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl transform transition-all",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(Ki,{className:"text-red-600 w-6 h-6"})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Delete Student?"}),c.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this student? This action cannot be undone."}),c.jsxs("div",{className:"flex gap-3 w-full",children:[c.jsx("button",{onClick:()=>z(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Cancel"}),c.jsx("button",{onClick:V,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors shadow-sm",children:"Delete"})]})]})})}),l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsx("h3",{className:"text-lg font-bold mb-6 text-slate-900 border-b pb-2",children:h?"Edit Student Details":"Add New Student"}),h&&c.jsxs("div",{className:"mb-6 bg-slate-50 border border-slate-200 rounded-lg p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-bold text-slate-700",children:"Attendance Summary"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Current Term Performance"})]}),c.jsx("div",{className:"text-right",children:E?c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"text-xl font-bold text-emerald-600",children:[E.attendance.percentage,"%"]}),c.jsxs("p",{className:"text-xs text-slate-500",children:[E.attendance.present,"/",E.attendance.total," Days"]})]}):c.jsx("span",{className:"text-xs text-slate-400",children:"Loading data..."})})]}),c.jsxs("form",{onSubmit:P,className:"space-y-5",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Personal Information"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none transition-all placeholder-slate-400",value:p.name||"",onChange:ce=>y({...p,name:ce.target.value}),placeholder:"e.g. Kwame Nkrumah Jnr"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Gender"}),c.jsxs("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",value:p.gender,onChange:ce=>y({...p,gender:ce.target.value}),children:[c.jsx("option",{value:"Male",children:"Male"}),c.jsx("option",{value:"Female",children:"Female"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Date of Birth"}),c.jsx("input",{type:"date",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",value:p.dob||"",onChange:ce=>y({...p,dob:ce.target.value})})]})]})]}),c.jsxs("div",{className:"space-y-4 pt-2",children:[c.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Academic Info"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Assigned Class"}),c.jsx("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",value:p.classId,onChange:ce=>y({...p,classId:ce.target.value}),children:rt.map(ce=>c.jsx("option",{value:ce.id,children:ce.name},ce.id))})]})]}),c.jsxs("div",{className:"space-y-4 pt-2",children:[c.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Guardian Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Guardian Name"}),c.jsx("input",{type:"text",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:p.guardianName||"",onChange:ce=>y({...p,guardianName:ce.target.value}),placeholder:"e.g. Mr. John Doe"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Phone Number"}),c.jsx("input",{type:"tel",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:p.guardianPhone||"",onChange:ce=>y({...p,guardianPhone:ce.target.value}),placeholder:"e.g. 024 123 4567"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[c.jsx("button",{type:"button",onClick:R,className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:k,className:`px-5 py-2.5 bg-emerald-600 text-white rounded-lg font-medium shadow-sm transition-colors ${k?"opacity-60 cursor-not-allowed hover:bg-emerald-600":"hover:bg-emerald-700"}`,children:k?c.jsxs("span",{className:"flex items-center",children:[c.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),h?"Updating...":"Saving..."]}):h?"Update Student":"Save Student"})]})]})]})}),v&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl w-full max-w-3xl max-h-[95vh] overflow-y-auto shadow-2xl flex flex-col",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50 sticky top-0 z-10",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-2xl font-bold text-slate-500",children:v.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-900",children:v.name}),c.jsxs("div",{className:"flex gap-2 text-sm text-slate-500 mt-1",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx(uE,{size:14,className:"mr-1"})," ",v.gender]}),c.jsx("span",{children:""}),c.jsx("span",{children:(N=rt.find(ce=>ce.id===v.classId))==null?void 0:N.name})]})]})]}),c.jsx("button",{onClick:X,className:"text-slate-400 hover:text-slate-700 bg-white p-2 rounded-full shadow-sm",children:c.jsx(Hi,{size:24})})]}),c.jsxs("div",{className:"p-6 space-y-8",children:[c.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:c.jsx(oi,{size:20})}),c.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"Attendance Record"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center",children:[c.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:"Total School Days"}),c.jsx("span",{className:"text-2xl font-bold text-slate-800",children:E?E.attendance.total:"-"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center",children:[c.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:"Days Present"}),c.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:E?E.attendance.present:"-"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center",children:[c.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:"Attendance Rate"}),c.jsx("span",{className:`text-2xl font-bold ${((je=E==null?void 0:E.attendance)==null?void 0:je.percentage)<50?"text-red-500":"text-blue-600"}`,children:E?`${E.attendance.percentage}%`:"-"})]})]}),c.jsxs("div",{className:"flex justify-center gap-6 text-xs text-slate-500 mb-2",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-emerald-100 border border-emerald-200 rounded-full mr-2"})," Present"]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-red-100 border border-red-200 rounded-full mr-2"})," Absent"]})]}),M()]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[c.jsx(Bc,{size:20,className:"mr-2 text-blue-600"})," Academic Performance"]}),c.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Subject"}),c.jsx("th",{className:"px-4 py-3 text-center",children:"Score"}),c.jsx("th",{className:"px-4 py-3 text-center",children:"Grade"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Remark"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:E?E.grades.map((ce,Y)=>{const oe=ce.total||(ce.testScore||0)+(ce.homeworkScore||0)+(ce.projectScore||0)+(ce.examScore||0),{grade:de,remark:xe}=Fc(oe);return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:ce.subject}),c.jsx("td",{className:"px-4 py-3 text-center",children:oe>0?oe:"-"}),c.jsx("td",{className:"px-4 py-3 text-center",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Hh(de)}`,children:oe>0?de:"-"})}),c.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:oe>0?xe:"N/A"})]},Y)}):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Loading grades..."})})})]})})]})]}),c.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center",children:c.jsx("p",{className:"text-xs text-slate-400",children:"Generated automatically by Noble Care Academy System"})})]})})]})},N6=()=>{const[a,e]=j.useState([]),[n,r]=j.useState(!1),[l,u]=j.useState(!1),[h,g]=j.useState({role:Ot.TEACHER,assignedClassIds:[],password:""}),[p,y]=j.useState(null),v=async()=>{const z=await pe.getUsers();e(z.filter(k=>k.role===Ot.TEACHER))};j.useEffect(()=>{v()},[]);const w=async z=>{if(z.preventDefault(),!h.name||!h.email||!h.password){fn("Please fill in all fields including password.",{type:"error"});return}if(h.password.length<6){fn("Password must be at least 6 characters.",{type:"error"});return}u(!0);let k;try{k=Gp(tE,"SecondaryApp");const B=A1(k),X={id:(await _j(B,h.email,h.password)).user.uid,name:h.name,email:h.email,role:Ot.TEACHER,assignedClassIds:h.assignedClassIds||[]};await pe.addUser(X),await g1(B),r(!1),g({role:Ot.TEACHER,assignedClassIds:[],password:""}),v(),fn(`Teacher created successfully! Email: ${X.email}`,{type:"success",duration:6e3})}catch(B){console.error("Error creating teacher:",B),B.code==="auth/email-already-in-use"?fn("This email is already registered.",{type:"error"}):fn("Failed to create teacher. "+B.message,{type:"error"})}finally{k&&await s2(k),u(!1)}},E=z=>{y(z)},C=async()=>{if(!p)return;const z=p;y(null);const k=[...a];e(B=>B.filter($=>$.id!==z));try{await pe.deleteUser(z)}catch(B){console.error("Failed to delete teacher",B),e(k),fn("Failed to delete teacher profile. Please try again.",{type:"error"})}},L=z=>{g(k=>{const B=k.assignedClassIds||[];return B.includes(z)?{...k,assignedClassIds:B.filter($=>$!==z)}:{...k,assignedClassIds:[...B,z]}})};return c.jsxs(Pn,{title:"Manage Teachers",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[c.jsx("h2",{className:"font-semibold text-slate-800",children:"Staff List"}),c.jsxs("button",{onClick:()=>r(!0),className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors text-sm font-medium",children:[c.jsx(Hc,{size:16,className:"mr-2"}),"Add Teacher"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Name"}),c.jsx("th",{className:"px-6 py-3",children:"Email"}),c.jsx("th",{className:"px-6 py-3",children:"Assigned Classes"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:a.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-400",children:"No teachers found."})}):a.map(z=>{const B=(z.assignedClassIds||[]).map($=>{var I;return(I=rt.find(X=>X.id===$))==null?void 0:I.name}).filter(Boolean);return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:z.name}),c.jsxs("td",{className:"px-6 py-3 flex items-center",children:[c.jsx($D,{size:14,className:"mr-2 text-slate-400"}),z.email]}),c.jsx("td",{className:"px-6 py-3",children:c.jsx("div",{className:"flex flex-wrap gap-1",children:B.length>0?B.map($=>c.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:$},$)):c.jsx("span",{className:"text-slate-400 italic text-xs",children:"No classes"})})}),c.jsx("td",{className:"px-6 py-3 text-right",children:c.jsx("button",{onClick:()=>E(z.id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-full transition-colors",title:"Remove Teacher",children:c.jsx(qc,{size:16,className:"pointer-events-none"})})})]},z.id)})})]})})]}),p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:c.jsx("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl transform transition-all",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(Ki,{className:"text-red-600 w-6 h-6"})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Remove Teacher?"}),c.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["This removes their profile from the system. ",c.jsx("br",{}),c.jsx("span",{className:"text-xs text-red-500 font-bold",children:"Note: You must manually disable their account in Firebase Console to stop login."})]}),c.jsxs("div",{className:"flex gap-3 w-full",children:[c.jsx("button",{onClick:()=>y(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Cancel"}),c.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors shadow-sm",children:"Remove"})]})]})})}),n&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center text-slate-900 border-b pb-2",children:[c.jsx(cE,{className:"mr-2 text-emerald-600",size:20})," Add New Teacher"]}),c.jsxs("form",{onSubmit:w,className:"space-y-4 pt-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400 text-white bg-slate-800",value:h.name||"",onChange:z=>g({...h,name:z.target.value}),placeholder:"e.g. Mr. John Doe"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),c.jsx("input",{type:"email",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400 text-white bg-slate-800",value:h.email||"",onChange:z=>g({...h,email:z.target.value}),placeholder:"teacher@school.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Set Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(HD,{className:"absolute left-3 top-3 text-slate-400 w-4 h-4"}),c.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 pl-9 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400 text-white bg-slate-800",value:h.password||"",onChange:z=>g({...h,password:z.target.value}),placeholder:"Min 6 chars",minLength:6})]}),c.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Teacher will use this email & password to log in."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Assign Classes"}),c.jsx("div",{className:"border border-slate-300 rounded-lg p-3 max-h-56 overflow-y-auto bg-slate-50",children:c.jsx("div",{className:"grid grid-cols-2 gap-3",children:rt.map(z=>{var B;const k=(B=h.assignedClassIds)==null?void 0:B.includes(z.id);return c.jsxs("button",{type:"button",onClick:()=>L(z.id),className:`
                                        flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium border transition-all duration-200
                                        ${k?"bg-emerald-600 border-emerald-600 text-white shadow-md transform scale-[1.02]":"bg-white border-slate-200 text-slate-600 hover:border-emerald-300 hover:shadow-sm"}
                                    `,children:[c.jsx("span",{children:z.name}),k?c.jsx(i6,{size:16,className:"text-white ml-2"}):c.jsx(c6,{size:16,className:"text-slate-300 ml-2"})]},z.id)})})}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"Click classes to select/deselect them."})]}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[c.jsx("button",{type:"button",onClick:()=>r(!1),disabled:l,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:l,className:"flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium shadow-sm transition-colors disabled:opacity-70",children:l?c.jsxs(c.Fragment,{children:[c.jsx(zD,{size:16,className:"mr-2 animate-spin"})," Creating..."]}):"Create Teacher"})]})]})]})})]})},A6=()=>{const[a,e]=j.useState(rt[0].id),[n,r]=j.useState([]),[l,u]=j.useState(!1),[h,g]=j.useState(0);return j.useEffect(()=>{(async()=>{u(!0);try{const y=await pe.getStudents(a),v=await pe.getClassAttendance(a),w=v.length;g(w);const E=y.map(C=>{const L=v.filter(k=>k.presentStudentIds.includes(C.id)).length,z=w===0?0:Math.round(L/w*100);return{id:C.id,name:C.name,gender:C.gender,presentDays:L,totalDays:w,percentage:z}});E.sort((C,L)=>C.name.localeCompare(L.name)),r(E)}catch(y){console.error("Error fetching attendance stats:",y)}finally{u(!1)}})()},[a]),c.jsx(Pn,{title:"Attendance Statistics",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col xl:flex-row justify-between xl:items-center gap-4 bg-slate-50",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Class"}),c.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-48 bg-white text-slate-900",value:a,onChange:p=>e(p.target.value),children:rt.map(p=>c.jsx("option",{value:p.id,children:p.name},p.id))})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-md px-4 py-1.5 shadow-sm",children:[c.jsx("span",{className:"block text-xs text-slate-400 uppercase",children:"Term Total Days"}),c.jsx("span",{className:"font-bold text-lg text-slate-800",children:h})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500"})," Excellent (90%+)"]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-400"})," Average (50-89%)"]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-red-700 bg-red-50 px-3 py-1.5 rounded-full border border-red-200 shadow-sm",children:[c.jsx(Ki,{size:12,className:"text-red-600"})," Critical (","<","50%)"]})]})]}),c.jsx("div",{className:"flex-1 overflow-auto p-0",children:l?c.jsx("div",{className:"text-center py-20 text-slate-400",children:"Calculating Attendance Data..."}):c.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4",children:"Student Name"}),c.jsx("th",{className:"px-6 py-4 text-center",children:"Days Present"}),c.jsx("th",{className:"px-6 py-4 text-center",children:"Total School Days"}),c.jsx("th",{className:"px-6 py-4 w-1/3",children:"Attendance Rate"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:n.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"No students found in this class."})}):n.map(p=>{let y="bg-emerald-500",v="text-emerald-700 bg-emerald-50 border-emerald-200",w="hover:bg-slate-50",E=null;return p.percentage<50?(y="bg-red-500",v="text-red-700 bg-red-50 border-red-200",w="bg-red-50/40 hover:bg-red-50/60",E=c.jsx("span",{title:"Critical Attendance",children:c.jsx(Ki,{size:14,className:"text-red-500 ml-2"})})):p.percentage<90&&(y="bg-amber-400",v="text-amber-700 bg-amber-50 border-amber-200"),c.jsxs("tr",{className:`${w} transition-colors border-b border-slate-100 last:border-0`,children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold text-white mr-3 shadow-sm ${p.gender==="Male"?"bg-blue-500":"bg-pink-500"}`,children:p.name.charAt(0)}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-800 flex items-center",children:[p.name,E]}),c.jsx("p",{className:"text-xs text-slate-500",children:p.gender})]})]})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"font-bold text-slate-800 text-lg",children:p.presentDays})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-slate-500",children:p.totalDays})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-1 h-2.5 bg-slate-200 rounded-full overflow-hidden shadow-inner",children:c.jsx("div",{className:`h-full ${y} transition-all duration-500 rounded-full`,style:{width:`${p.percentage}%`}})}),c.jsxs("span",{className:`text-xs font-bold px-2.5 py-1 rounded border ${v} min-w-[3.5rem] text-center shadow-sm`,children:[p.percentage,"%"]})]})})]},p.id)})})]})})]})})},j6=()=>{const[a,e]=j.useState([]),[n,r]=j.useState(!1),[l,u]=j.useState(""),[h,g]=j.useState("");j.useEffect(()=>{(async()=>{r(!0);try{const w=await pe.getTeacherAttendanceAnalytics(l||void 0,h||void 0);e(w)}catch(w){console.error("Error fetching teacher attendance analytics:",w)}finally{r(!1)}})()},[l,h]);const p=v=>{switch(v){case"improving":return c.jsx(ph,{className:"text-emerald-600",size:16});case"declining":return c.jsx(u_,{className:"text-red-600",size:16});default:return c.jsx(l_,{className:"text-slate-400",size:16})}},y=v=>{switch(v){case"improving":return"text-emerald-700 bg-emerald-50 border-emerald-200";case"declining":return"text-red-700 bg-red-50 border-red-200";default:return"text-slate-600 bg-slate-50 border-slate-200"}};return c.jsx(Pn,{title:"Teacher Attendance Analytics",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col xl:flex-row justify-between xl:items-center gap-4 bg-slate-50",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Teacher Attendance Overview"}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Term Start Date"}),c.jsx("input",{type:"date",className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-40 bg-white text-slate-900",value:l,onChange:v=>u(v.target.value)})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Vacation Date"}),c.jsx("input",{type:"date",className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-40 bg-white text-slate-900",value:h,onChange:v=>g(v.target.value)})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[c.jsx(ph,{size:12,className:"text-emerald-600"})," Improving"]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[c.jsx(l_,{size:12,className:"text-slate-400"})," Stable"]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-red-700 bg-red-50 px-3 py-1.5 rounded-full border border-red-200 shadow-sm",children:[c.jsx(u_,{size:12,className:"text-red-600"})," Declining"]})]})]}),c.jsx("div",{className:"flex-1 overflow-auto p-0",children:n?c.jsx("div",{className:"text-center py-20 text-slate-400",children:"Analyzing Teacher Attendance Data..."}):c.jsx("div",{className:"p-6 space-y-6",children:a.length===0?c.jsx("div",{className:"text-center py-20 text-slate-400",children:"No teacher attendance data found."}):a.map(v=>c.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 border-2 border-blue-300 flex items-center justify-center text-white font-bold text-lg shadow-lg",children:v.teacherName.charAt(0)}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:v.teacherName}),c.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(oi,{size:14,className:"text-slate-500"}),c.jsxs("span",{className:"text-sm text-slate-600",children:[v.termStartDate," - ",v.vacationDate||"Present"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rc,{size:14,className:"text-emerald-600"}),c.jsxs("span",{className:"text-sm font-semibold text-emerald-700",children:[v.overallAttendance,"% Overall Attendance"]})]})]})]})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Monthly Attendance Breakdown"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.monthlyBreakdown.map(w=>c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"font-semibold text-slate-800",children:w.month}),p(w.trend)]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-slate-600",children:"Working Days:"}),c.jsx("span",{className:"font-medium",children:w.totalWorkingDays})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-slate-600",children:"Present:"}),c.jsx("span",{className:"font-medium text-emerald-700",children:w.presentDays})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-slate-600",children:"Absent:"}),c.jsx("span",{className:"font-medium text-red-700",children:w.absentDays})]}),c.jsxs("div",{className:"mt-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Attendance Rate"}),c.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${y(w.trend)}`,children:[w.attendanceRate,"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${w.attendanceRate>=90?"bg-emerald-500":w.attendanceRate>=70?"bg-amber-400":"bg-red-500"}`,style:{width:`${w.attendanceRate}%`}})})]})]})]},w.month))})]}),v.overallAttendance<70&&c.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[c.jsx(Ki,{className:"text-red-600",size:20}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-red-800",children:"Critical Attendance Alert"}),c.jsx("p",{className:"text-xs text-red-700",children:"This teacher has below 70% overall attendance and may need intervention."})]})]})]},v.teacherId))})})]})})},R6=()=>{var y;const[a,e]=j.useState(rt[0].id),[n,r]=j.useState([]),[l,u]=j.useState([]),[h,g]=j.useState(!1);j.useEffect(()=>{(async()=>{const w=await pe.getSubjects();u(w)})()},[]),j.useEffect(()=>{const v=async()=>{if(l.length===0)return;g(!0);const w=await pe.getStudents(a),E=await Promise.all(w.map(async C=>{let L=0,z=0;const k={};for(const $ of l){const X=(await pe.getAssessments(a,$)).find(te=>te.studentId===C.id&&te.term===Js);if(X){const te=X.total||(X.testScore||0)+(X.homeworkScore||0)+(X.projectScore||0)+(X.examScore||0);k[$]=te,L+=te,z++}else k[$]="-"}const B=z>0?(L/z).toFixed(1):0;return{student:C,scores:k,totalScore:L,average:B}}));E.sort((C,L)=>L.totalScore-C.totalScore),r(E),g(!1)};l.length>0&&v()},[a,l]);const p=()=>{var $;if(n.length===0)return;const v=["Position","Student Name",...l,"Total Score","Average Grade"],w=n.map((I,X)=>{const te=l.map(se=>I.scores[se]);return[X+1,`"${I.student.name}"`,...te,I.totalScore,I.average]}),E=[v.join(","),...w.map(I=>I.join(","))].join(`
`),C=new Blob([E],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(C),z=document.createElement("a"),B=`${(($=rt.find(I=>I.id===a))==null?void 0:$.name)||"Class"}_Report_Term${Js}.csv`;z.setAttribute("href",L),z.setAttribute("download",B),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)};return c.jsxs(Pn,{title:"Academic Reports",children:[c.jsx("style",{children:`
                @media print {
                    @page { size: landscape; margin: 10mm; }
                    body * {
                        visibility: hidden;
                    }
                    #report-content, #report-content * {
                        visibility: visible;
                    }
                    #report-content {
                        position: fixed;
                        left: 0;
                        top: 0;
                        width: 100%;
                        height: 100%;
                        margin: 0;
                        padding: 0;
                        background: white;
                        z-index: 9999;
                    }
                    .no-print {
                        display: none !important;
                    }
                    /* Ensure table expands fully and isn't cut off by scroll areas */
                    #table-container {
                        overflow: visible !important;
                        height: auto !important;
                    }
                }
            `}),c.jsxs("div",{id:"report-content",className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)] print:h-auto print:border-none print:shadow-none",children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 print:bg-white print:border-none",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm bg-white text-black no-print",value:a,onChange:v=>e(v.target.value),children:rt.map(v=>c.jsx("option",{value:v.id,children:v.name},v.id))}),c.jsxs("div",{className:"hidden print:block text-2xl font-bold text-slate-900",children:[(y=rt.find(v=>v.id===a))==null?void 0:y.name," Report"]}),c.jsxs("div",{className:"text-sm text-slate-500 print:text-slate-900 print:font-semibold",children:["Term ",Js," | ",Wl]})]}),c.jsxs("button",{onClick:p,disabled:h||n.length===0,className:"flex items-center text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 px-4 py-2 rounded-lg transition-colors no-print font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(MD,{size:18,className:"mr-2"})," Export CSV"]})]}),c.jsx("div",{id:"table-container",className:"flex-1 overflow-auto p-4 print:overflow-visible print:p-0",children:h?c.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Report Data..."}):c.jsx("div",{className:"overflow-x-auto print:overflow-visible",children:c.jsxs("table",{className:"w-full text-left text-sm border-collapse text-black",children:[c.jsx("thead",{className:"bg-slate-100 text-black font-bold print:bg-slate-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 border border-slate-200 w-10",children:"Pos"}),c.jsx("th",{className:"px-4 py-3 border border-slate-200 min-w-[200px]",children:"Student Name"}),l.map(v=>c.jsx("th",{className:"px-2 py-3 border border-slate-200 w-24 text-center text-xs",children:v.substring(0,3)},v)),c.jsx("th",{className:"px-4 py-3 border border-slate-200 text-center w-20 bg-emerald-50 text-emerald-900 print:bg-slate-100",children:"Total"}),c.jsx("th",{className:"px-4 py-3 border border-slate-200 text-center w-20 bg-blue-50 text-blue-900 print:bg-slate-100",children:"Avg"})]})}),c.jsxs("tbody",{children:[n.map((v,w)=>c.jsxs("tr",{className:"hover:bg-slate-50 print:hover:bg-transparent",children:[c.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-medium",children:w+1}),c.jsx("td",{className:"px-4 py-2 border border-slate-200 font-medium",children:v.student.name}),l.map(E=>{const C=v.scores[E],L=typeof C=="number"?Fc(C).grade:"-";return c.jsx("td",{className:"px-2 py-2 border border-slate-200 text-center",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{children:C}),typeof C=="number"&&c.jsx("span",{className:`text-[10px] font-bold ${Hh(L).split(" ")[0]}`,children:L})]})},E)}),c.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-bold bg-emerald-50 text-emerald-900 print:bg-transparent",children:v.totalScore}),c.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-bold bg-blue-50 text-blue-900 print:bg-transparent",children:v.average})]},v.student.id)),n.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:l.length+4,className:"p-8 text-center text-slate-400",children:"No students found."})})]})]})})})]})]})},C6=()=>{const[a,e]=j.useState([]),[n,r]=j.useState(""),[l,u]=j.useState(new Date().toISOString().split("T")[0]),[h,g]=j.useState("info"),[p,y]=j.useState([]),[v,w]=j.useState(""),[E,C]=j.useState(null),[L,z]=j.useState({schoolName:"",academicYear:"",currentTerm:"",schoolReopenDate:""}),[k,B]=j.useState(!1),$=async()=>{const M=await pe.getNotices();e(M)},I=async()=>{const M=await pe.getSubjects();y(M)},X=async()=>{const M=await pe.getSchoolConfig();z(M)};j.useEffect(()=>{$(),I(),X()},[]);const te=async()=>{B(!0),await pe.updateSchoolConfig(L),B(!1),fn("Configuration saved successfully!",{type:"success"})},se=async M=>{if(M.preventDefault(),!n.trim()||!l)return;const[N,je,ce]=l.split("-").map(Number),oe=new Date(N,je-1,ce).toLocaleDateString("en-GB",{day:"numeric",month:"short"});await pe.addNotice({id:Math.random().toString(36).substr(2,9),message:n,date:oe,type:h}),r(""),$()},A=async M=>{await pe.deleteNotice(M),$()},R=async M=>{M.preventDefault(),v.trim()&&(await pe.addSubject(v.trim()),w(""),I())},D=async M=>{window.confirm(`Are you sure you want to delete "${M}"? This might hide scores associated with this subject.`)&&(await pe.deleteSubject(M),I())},V=M=>{C({original:M,current:M})},P=async()=>{!E||!E.current.trim()||(await pe.updateSubject(E.original,E.current.trim()),C(null),I())};return c.jsx(Pn,{title:"System Settings",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"General Configuration"}),c.jsxs("button",{onClick:te,disabled:k,className:"flex items-center text-xs font-bold text-white bg-emerald-600 hover:bg-emerald-700 px-3 py-1.5 rounded-lg transition-colors",children:[c.jsx(ru,{size:14,className:"mr-1"})," ",k?"Saving...":"Save Changes"]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Academic Year"}),c.jsx("input",{type:"text",value:L.academicYear,onChange:M=>z({...L,academicYear:M.target.value}),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Current Term"}),c.jsxs("select",{value:L.currentTerm,onChange:M=>z({...L,currentTerm:M.target.value}),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none",children:[c.jsx("option",{value:"Term 1",children:"Term 1"}),c.jsx("option",{value:"Term 2",children:"Term 2"}),c.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),c.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[c.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"School Information"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"School Name"}),c.jsx("input",{type:"text",value:L.schoolName,onChange:M=>z({...L,schoolName:M.target.value}),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"School Re-open Date"}),c.jsxs("div",{className:"relative",children:[c.jsx(oi,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400 pointer-events-none"}),c.jsx("input",{type:"date",value:L.schoolReopenDate,onChange:M=>z({...L,schoolReopenDate:M.target.value}),className:"w-full border border-slate-300 pl-10 pr-3 py-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[c.jsx(pD,{className:"mr-2 text-blue-600",size:24}),"Manage Subjects"]}),c.jsxs("form",{onSubmit:R,className:"flex gap-2 mb-6",children:[c.jsx("input",{type:"text",required:!0,className:"flex-1 border border-slate-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",placeholder:"New subject name...",value:v,onChange:M=>w(M.target.value)}),c.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:c.jsx(Hc,{size:20})})]}),c.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:p.map(M=>c.jsx("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg border border-slate-100 group",children:(E==null?void 0:E.original)===M?c.jsxs("div",{className:"flex items-center flex-1 gap-2",children:[c.jsx("input",{type:"text",className:"flex-1 border border-slate-300 p-1 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:E.current,onChange:N=>C({...E,current:N.target.value}),autoFocus:!0}),c.jsx("button",{onClick:P,className:"text-emerald-600 hover:bg-emerald-50 p-1 rounded",children:c.jsx(rE,{size:16})}),c.jsx("button",{onClick:()=>C(null),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:c.jsx(Hi,{size:16})})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-sm font-medium text-slate-700",children:M}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>V(M),className:"text-slate-400 hover:text-blue-600 p-1.5 hover:bg-blue-50 rounded-md transition-colors",children:c.jsx(Hg,{size:14})}),c.jsx("button",{onClick:()=>D(M),className:"text-slate-400 hover:text-red-600 p-1.5 hover:bg-red-50 rounded-md transition-colors",children:c.jsx(qc,{size:14})})]})]})},M))})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 flex flex-col h-full",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[c.jsx(KD,{className:"mr-2 text-emerald-600",size:24}),"School Notices"]}),c.jsxs("form",{onSubmit:se,className:"mb-6 bg-slate-50 p-4 rounded-lg border border-slate-200",children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),c.jsxs("div",{className:"relative",children:[c.jsx(oi,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-slate-300 pl-10 pr-3 py-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none text-sm",value:l,onChange:M=>u(M.target.value)})]})]}),c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notice Message"}),c.jsx("textarea",{required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none text-sm",placeholder:"Type notice here...",rows:2,value:n,onChange:M=>r(M.target.value)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center text-sm cursor-pointer",children:[c.jsx("input",{type:"radio",name:"type",className:"mr-2 text-emerald-600 focus:ring-emerald-500",checked:h==="info",onChange:()=>g("info")}),"Info"]}),c.jsxs("label",{className:"flex items-center text-sm cursor-pointer",children:[c.jsx("input",{type:"radio",name:"type",className:"mr-2 text-blue-600 focus:ring-blue-500",checked:h==="urgent",onChange:()=>g("urgent")}),"Urgent"]})]}),c.jsxs("button",{type:"submit",className:"bg-emerald-600 text-white px-3 py-1.5 rounded-md text-sm font-medium hover:bg-emerald-700 transition-colors flex items-center",children:[c.jsx(Hc,{size:16,className:"mr-1"})," Add Notice"]})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[c.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-3",children:"Active Notices"}),c.jsx("div",{className:"space-y-3",children:a.length===0?c.jsx("p",{className:"text-slate-400 text-sm text-center italic",children:"No notices posted."}):a.map(M=>c.jsxs("div",{className:"flex justify-between items-start group p-3 border border-slate-100 rounded-lg hover:bg-slate-50 transition-colors",children:[c.jsxs("div",{className:`border-l-2 pl-3 ${M.type==="urgent"?"border-blue-500":"border-emerald-500"}`,children:[c.jsx("p",{className:"text-sm text-slate-800 font-medium",children:M.message}),c.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[M.date,"  ",M.type==="urgent"?"Urgent":"General Info"]})]}),c.jsx("button",{onClick:()=>A(M.id),className:"text-slate-300 hover:text-red-500 transition-colors p-1",title:"Delete Notice",children:c.jsx(qc,{size:16})})]},M.id))})]})]})]})})},rp=["Monday","Tuesday","Wednesday","Thursday","Friday"],I6=()=>{var B,$;const[a,e]=j.useState(rt[0].id),[n,r]=j.useState({}),[l,u]=j.useState(!1),[h,g]=j.useState(rp[0]),[p,y]=j.useState([]),[v,w]=j.useState({startTime:"08:00",endTime:"09:00",subject:"",type:"lesson"});j.useEffect(()=>{(async()=>{const X=await pe.getSubjects();y(X),X.length>0&&w(te=>({...te,subject:X[0]}))})()},[]),j.useEffect(()=>{(async()=>{u(!0);const X=await pe.getTimetable(a),te=(X==null?void 0:X.schedule)||{};rp.forEach(se=>{te[se]||(te[se]=[])}),r(te),u(!1)})()},[a]);const E=()=>{if(!v.startTime||!v.endTime||!v.subject)return;if(v.startTime>=v.endTime){fn("End time must be after start time",{type:"error"});return}const I={id:Math.random().toString(36).substr(2,9),startTime:v.startTime,endTime:v.endTime,subject:v.subject,type:v.type},X={...n};X[h]=[...X[h],I].sort((te,se)=>te.startTime.localeCompare(se.startTime)),r(X)},C=I=>{const X={...n};X[h]=X[h].filter(te=>te.id!==I),r(X)},L=async()=>{u(!0);const I={classId:a,schedule:n};await pe.saveTimetable(I),u(!1),fn("Timetable saved successfully!",{type:"success"})},z=I=>{const X=n[I];return!X||X.length===0?"N/A":X[X.length-1].endTime},k=I=>{switch(I){case"break":return{bg:"bg-amber-50",border:"border-amber-100",icon:RD,iconColor:"text-amber-600",badge:"text-amber-600 border-amber-200"};case"worship":return{bg:"bg-purple-50",border:"border-purple-100",icon:a6,iconColor:"text-purple-600",badge:"text-purple-600 border-purple-200"};case"closing":return{bg:"bg-slate-100",border:"border-slate-200",icon:ID,iconColor:"text-slate-600",badge:"text-slate-600 border-slate-300"};default:return{bg:"bg-white",border:"border-slate-100",icon:Bg,iconColor:"text-emerald-600",badge:"text-slate-600 border-slate-200"}}};return c.jsx(Pn,{title:"Manage Timetable",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col md:flex-row justify-between md:items-center gap-4 bg-slate-50",children:[c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Class"}),c.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-48",value:a,onChange:I=>e(I.target.value),children:rt.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))})]})}),c.jsxs("button",{onClick:L,disabled:l,className:"flex items-center bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50",children:[c.jsx(ru,{size:18,className:"mr-2"}),l?"Saving...":"Save Schedule"]})]}),c.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[c.jsx("div",{className:"w-40 border-r border-slate-100 bg-white flex flex-col overflow-y-auto",children:rp.map(I=>{var te;const X=((te=n[I])==null?void 0:te.length)||0;return c.jsxs("button",{onClick:()=>g(I),className:`p-4 text-left border-l-4 transition-colors hover:bg-slate-50 ${h===I?"border-emerald-500 bg-emerald-50 text-emerald-800 font-medium":"border-transparent text-slate-600"}`,children:[c.jsx("span",{className:"block",children:I}),c.jsxs("span",{className:"text-xs text-slate-400",children:[X," Slots"]})]},I)})}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-slate-50/50",children:[c.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-white",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[h," Schedule"]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Closing Time: ",c.jsx("span",{className:"font-semibold text-slate-800",children:z(h)})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:((B=n[h])==null?void 0:B.length)===0?c.jsxs("div",{className:"text-center py-10 text-slate-400 border-2 border-dashed border-slate-200 rounded-xl",children:["No classes or breaks scheduled for ",h,"."]}):($=n[h])==null?void 0:$.map(I=>{const X=k(I.type),te=X.icon;return c.jsxs("div",{className:`flex items-center p-4 rounded-lg border shadow-sm ${X.bg} ${X.border}`,children:[c.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full mr-4 bg-white shadow-sm text-slate-500",children:c.jsx(te,{size:20,className:X.iconColor})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"font-mono text-sm font-semibold text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:[I.startTime," - ",I.endTime]}),I.type!=="lesson"&&c.jsx("span",{className:`text-[10px] uppercase font-bold border px-1 rounded ${X.badge}`,children:I.type})]}),c.jsx("p",{className:"text-lg font-bold text-slate-800",children:I.subject})]}),c.jsx("button",{onClick:()=>C(I.id),className:"text-slate-300 hover:text-red-500 p-2 transition-colors",children:c.jsx(qc,{size:18})})]},I.id)})}),c.jsxs("div",{className:"p-4 bg-white border-t border-slate-200",children:[c.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3",children:"Add Time Slot"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Start"}),c.jsx("input",{type:"time",className:"w-full border p-2 rounded text-sm",value:v.startTime,onChange:I=>w({...v,startTime:I.target.value})})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"End"}),c.jsx("input",{type:"time",className:"w-full border p-2 rounded text-sm",value:v.endTime,onChange:I=>w({...v,endTime:I.target.value})})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Type"}),c.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:v.type,onChange:I=>{const X=I.target.value;let te="";X==="break"?te="Break":X==="worship"?te="Worship":X==="closing"?te="Closing":te=p[0]||"",w({...v,type:X,subject:te})},children:[c.jsx("option",{value:"lesson",children:"Lesson"}),c.jsx("option",{value:"break",children:"Break"}),c.jsx("option",{value:"worship",children:"Worship"}),c.jsx("option",{value:"closing",children:"Closing"})]})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Activity/Subject"}),v.type==="lesson"?c.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:v.subject,onChange:I=>w({...v,subject:I.target.value}),children:[p.map(I=>c.jsx("option",{value:I,children:I},I)),p.length===0&&c.jsx("option",{value:"",children:"No Subjects Found"})]}):c.jsx("input",{type:"text",className:"w-full border p-2 rounded text-sm",value:v.subject,onChange:I=>w({...v,subject:I.target.value})})]}),c.jsx("div",{className:"md:col-span-2",children:c.jsxs("button",{onClick:E,className:"w-full bg-blue-600 text-white p-2 rounded text-sm font-medium hover:bg-blue-700",children:[c.jsx(Hc,{size:16,className:"inline mr-1"})," Add"]})})]})]})]})]})]})})},D6=()=>{const{user:a}=hi(),[e,n]=j.useState({}),[r,l]=j.useState(!0),[u,h]=j.useState({}),[g,p]=j.useState(null),[y,v]=j.useState(null),w=new Date().toISOString().split("T")[0],E=new Date(Date.now()-1440*60*1e3).toISOString().split("T")[0],C=async()=>{try{const I=await pe.getSchoolConfig();return p(I),I.schoolReopenDate}catch(I){return console.error("Error fetching school config:",I),null}},L=async()=>{if(!(a!=null&&a.id))return;const I=await C();if(!I)return;const X=new Date,te=new Date(I);if(!(X<te))try{!await pe.getTeacherAttendance(a.id,E)&&E>=I&&v(E)}catch(se){console.error("Error checking missed attendance:",se)}};j.useEffect(()=>{(async()=>{if(!(a!=null&&a.id)){l(!1);return}l(!0);try{const X={},te=[E,w];for(const se of te){const A=await pe.getTeacherAttendance(a.id,se);A&&(X[se]=A)}n(X),await L()}catch(X){console.error("Error fetching attendance:",X)}finally{l(!1)}})()},[a==null?void 0:a.id]);const z=async(I,X)=>{if(a!=null&&a.id){h(te=>({...te,[I]:!0}));try{const te={id:`${a.id}_${I}`,date:I,teacherId:a.id,status:X};await pe.saveTeacherAttendance(te),n(se=>({...se,[I]:te})),I===y&&v(null),await pe.addSystemNotification(`${a.name} marked attendance as ${X} for ${I}`,"attendance")}catch(te){console.error("Error saving attendance:",te)}finally{h(te=>({...te,[I]:!1}))}}},k=I=>new Date(I).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),B=I=>new Date(I).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),$=()=>g!=null&&g.schoolReopenDate?new Date().toISOString().split("T")[0]>=g.schoolReopenDate:!0;return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Daily Attendance"}),c.jsx("p",{className:"text-slate-600",children:"Mark your attendance for today and catch up on missed days"})]}),y&&c.jsx("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ki,{className:"text-amber-600 mt-0.5",size:20}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-amber-900",children:"Missed Attendance Alert"}),c.jsxs("p",{className:"text-sm text-amber-800 mt-1",children:["You haven't marked your attendance for ",B(y),". Please mark it below to keep your records up to date."]})]})]})}),!$()&&(g==null?void 0:g.schoolReopenDate)&&c.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Bg,{className:"text-blue-600",size:20}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-blue-900",children:"School Not Yet Open"}),c.jsxs("p",{className:"text-sm text-blue-800",children:["Attendance marking will be available starting from ",k(g.schoolReopenDate)]})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden mb-6",children:r?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-500",children:"Loading attendance..."})]}):c.jsxs("div",{className:"divide-y divide-slate-100",children:[c.jsx("div",{className:"p-6 bg-blue-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-blue-100 text-blue-600",children:c.jsx(oi,{size:20})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-slate-800",children:[k(w),c.jsx("span",{className:"ml-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full",children:"Today"})]}),e[w]?c.jsxs("p",{className:"text-sm text-slate-500",children:["Marked as ",c.jsx("span",{className:`font-medium ${e[w].status==="present"?"text-emerald-600":"text-red-600"}`,children:e[w].status.toUpperCase()})]}):c.jsx("p",{className:"text-sm text-slate-400",children:"Not marked yet"})]})]}),c.jsxs("div",{className:"flex gap-3",children:[$()&&!e[w]&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>z(w,"present"),disabled:u[w],className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:[u[w]?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(Rc,{size:16}),"Present"]}),c.jsxs("button",{onClick:()=>z(w,"absent"),disabled:u[w],className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:[u[w]?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(r_,{size:16}),"Absent"]})]}),e[w]&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[c.jsx(Rc,{size:16,className:e[w].status==="present"?"text-emerald-500":"text-red-500"}),"Marked"]})]})]})}),y&&c.jsx("div",{className:"p-6 bg-amber-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-amber-100 text-amber-600",children:c.jsx(Ki,{size:20})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-slate-800",children:[k(E),c.jsx("span",{className:"ml-2 text-xs bg-amber-600 text-white px-2 py-1 rounded-full",children:"Yesterday"})]}),c.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"Missed - Please mark now"})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>z(E,"present"),disabled:u[E],className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:[u[E]?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(Rc,{size:16}),"Present"]}),c.jsxs("button",{onClick:()=>z(E,"absent"),disabled:u[E],className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:[u[E]?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(r_,{size:16}),"Absent"]})]})]})})]})}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"How it works:"}),c.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[c.jsx("li",{children:" Mark your attendance daily when you arrive at school"}),c.jsx("li",{children:" If you forget to mark attendance, you'll be reminded the next day"}),c.jsx("li",{children:" The admin will be notified of any missed attendance"}),c.jsx("li",{children:" Attendance dates start from the school's re-opening date"})]})]})]})},h_=["Monday","Tuesday","Wednesday","Thursday","Friday"],dE=()=>{const{user:a}=hi();if(!a)return c.jsx(Pn,{title:"Teacher Dashboard",children:c.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-8rem)]",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-500",children:"Loading dashboard..."})]})});const e=(a==null?void 0:a.assignedClassIds)||[],[n,r]=j.useState(""),[l,u]=j.useState("Term 1");j.useEffect(()=>{e.length>0&&r(e[0])},[a]);const h=rt.find(N=>N.id===n),g=e.map(N=>{var je;return(je=rt.find(ce=>ce.id===N))==null?void 0:je.name}).join(", "),[p,y]=j.useState([]),[v,w]=j.useState(null),[E,C]=j.useState(!1),[L,z]=j.useState(!1),[k,B]=j.useState({show:!1,date:""}),$=()=>{const N=new Date().toLocaleDateString("en-US",{weekday:"long"});return h_.includes(N)?N:"Monday"},[I,X]=j.useState(null),[te,se]=j.useState($()),[A,R]=j.useState([]),[D,V]=j.useState([]),P=()=>{const N=new Date,je=N.getDay(),ce=je===0?-6:1-je,Y=new Date(N);Y.setDate(N.getDate()+ce);const oe=[];for(let de=0;de<5;de++){const xe=new Date(Y);xe.setDate(Y.getDate()+de);const $e=xe.getFullYear(),U=String(xe.getMonth()+1).padStart(2,"0"),ee=String(xe.getDate()).padStart(2,"0");oe.push(`${$e}-${U}-${ee}`)}return oe};j.useEffect(()=>{L||a&&(async()=>{const je=new Date().toISOString().split("T")[0],ce=new Date(Date.now()-1440*60*1e3).toISOString().split("T")[0];await pe.getTeacherAttendance((a==null?void 0:a.id)||"",je);try{const Y=await pe.getSchoolConfig();if(Y.schoolReopenDate&&ce>=Y.schoolReopenDate){const de=await pe.getTeacherAttendance((a==null?void 0:a.id)||"",ce);B(de?{show:!1,date:""}:{show:!0,date:ce})}}catch(Y){console.error("Error re-checking missed attendance:",Y)}})()},[L,a]),j.useEffect(()=>{(async()=>{try{const de=await pe.getSchoolConfig();de&&de.currentTerm&&u(de.currentTerm)}catch(de){console.error(de)}const je=await pe.getNotices();y(je);const ce=new Date().toISOString().split("T")[0],Y=await pe.getTeacherAttendance((a==null?void 0:a.id)||"",ce);w(Y);const oe=new Date(Date.now()-1440*60*1e3).toISOString().split("T")[0];try{const de=await pe.getSchoolConfig();de.schoolReopenDate&&oe>=de.schoolReopenDate&&(await pe.getTeacherAttendance((a==null?void 0:a.id)||"",oe)||B({show:!0,date:oe}))}catch(de){console.error("Error checking missed attendance:",de)}if(n){const de=await pe.getTimetable(n);X(de||null),se($());try{const[xe,$e]=await Promise.all([pe.getClassAttendance(n),pe.getStudents(n)]),U=$e.length||1,ee=P(),ue=xe.filter(Te=>ee.includes(Te.date)),me=ee.map(Te=>{const Me=ue.find(as=>as.date===Te),ze=Me?Math.round(Me.presentStudentIds.length/U*100):0,[Et,tt,jn]=Te.split("-").map(Number);return{day:new Date(Et,tt-1,jn).toLocaleDateString("en-US",{weekday:"short"}),percentage:ze}});V(me)}catch(xe){console.error("Error calculating attendance trend:",xe)}}})()},[n]),j.useEffect(()=>{if(I&&I.schedule&&te){const N=I.schedule[te]||[];R(N)}else R([])},[I,te]);const M=N=>{switch(N){case"break":return{border:"border-amber-400",bgHover:"group-hover:bg-amber-50",text:"text-amber-700 italic",badge:"text-amber-600"};case"worship":return{border:"border-purple-400",bgHover:"group-hover:bg-purple-50",text:"text-purple-700 font-semibold",badge:"text-purple-600"};case"closing":return{border:"border-slate-400",bgHover:"group-hover:bg-slate-50",text:"text-slate-700 font-bold",badge:"text-slate-600"};default:return{border:"border-red-500",bgHover:"group-hover:bg-red-50",text:"text-slate-800",badge:"text-red-600"}}};return L?c.jsxs("div",{children:[c.jsx("button",{onClick:()=>z(!1),className:"mb-4 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:" Back to Dashboard"}),c.jsx(D6,{})]}):c.jsxs(Pn,{title:"Teacher Dashboard",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-800",children:["Welcome back, ",a==null?void 0:a.name]}),c.jsxs("p",{className:"text-slate-500 mt-1",children:[c.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-red-600 mr-2"}),"Class Teacher for: ",c.jsx("span",{className:"font-semibold text-slate-800",children:g||"Not Assigned"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-end sm:items-center",children:[e.length>1&&c.jsxs("div",{className:"flex items-center bg-white border border-slate-200 rounded-lg px-3 py-1.5 shadow-sm",children:[c.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase mr-2",children:"Viewing:"}),c.jsx("select",{value:n,onChange:N=>r(N.target.value),className:"text-sm font-semibold text-slate-800 bg-transparent outline-none cursor-pointer",children:e.map(N=>{const je=rt.find(ce=>ce.id===N);return c.jsx("option",{value:N,children:je==null?void 0:je.name},N)})})]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-100 uppercase tracking-wide",children:[l," Active"]})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs(Xs,{to:"/teacher/attendance",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-red-500 transition-all relative overflow-hidden",children:[c.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-red-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-red-800 transition-colors",children:c.jsx(mh,{className:"w-6 h-6 text-red-700 group-hover:text-white"})}),c.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Take Attendance"}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Record daily register for ",(h==null?void 0:h.name)||"your class","."]})]})]}),c.jsxs(Xs,{to:"/teacher/assessment",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-amber-500 transition-all relative overflow-hidden",children:[c.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-amber-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-amber-500 transition-colors",children:c.jsx(Bc,{className:"w-6 h-6 text-amber-600 group-hover:text-white"})}),c.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Gradebook"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Record marks for tests, homework & exams."})]})]}),c.jsxs("button",{onClick:()=>z(!0),className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-green-500 transition-all relative overflow-hidden w-full text-left",children:[c.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-green-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-green-500 transition-colors",children:c.jsx(mh,{className:"w-6 h-6 text-green-600 group-hover:text-white"})}),c.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"My Attendance"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Mark weekly attendance & view records"}),v&&c.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Last marked: ",v.date]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[c.jsx(ph,{className:"w-5 h-5 mr-2 text-red-700"})," Weekly Attendance Trend"]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-red-600 text-white",children:"This Week"})})]}),c.jsx("div",{className:"flex items-end justify-between h-40 gap-2 px-2",children:D.length===0?c.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-300",children:[c.jsx(ph,{className:"w-8 h-8 mb-2 opacity-30"}),c.jsx("p",{className:"text-sm italic",children:"No attendance records found."})]}):D.map((N,je)=>c.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[c.jsxs("div",{className:"relative w-full flex justify-center",children:[c.jsx("div",{className:"w-full max-w-[40px] bg-slate-100 rounded-t-lg transition-all duration-500 group-hover:bg-red-100 relative overflow-hidden",style:{height:"140px"},children:c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-600 rounded-t-lg transition-all duration-1000",style:{height:`${N.percentage}%`}})}),c.jsxs("div",{className:"absolute -top-8 bg-slate-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[N.percentage,"%"]})]}),c.jsx("span",{className:"text-xs text-slate-500 mt-2 font-medium",children:N.day})]},je))})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[c.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[c.jsx(fh,{className:"w-5 h-5 mr-2 text-red-700"})," Notice Board"]}),c.jsx("div",{className:"space-y-4 max-h-[350px] overflow-y-auto pr-1",children:p.length===0?c.jsx("div",{className:"text-center py-6 text-slate-400 italic text-sm",children:"No announcements at this time."}):p.map(N=>c.jsxs("div",{className:"group relative pl-4 pb-2 border-l-2 border-slate-200 hover:border-red-400 transition-colors",children:[c.jsx("div",{className:`absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white ${N.type==="urgent"?"bg-red-500":"bg-amber-400"} shadow-sm`}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:N.date}),N.type==="urgent"&&c.jsx("span",{className:"text-[10px] text-red-500 font-bold px-1.5 py-0.5 bg-red-50 rounded",children:"URGENT"})]}),c.jsx("p",{className:"text-sm font-medium text-slate-800 leading-snug",children:N.message})]})]},N.id))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[c.jsx(Bg,{className:"w-5 h-5 mr-2 text-red-700"})," Class Schedule"]}),c.jsx("select",{value:te,onChange:N=>se(N.target.value),className:"text-xs font-bold text-red-700 bg-red-50 px-2 py-1 rounded uppercase border-none outline-none cursor-pointer hover:bg-red-100 transition-colors",children:h_.map(N=>c.jsx("option",{value:N,children:N},N))})]}),n?c.jsx("div",{className:"space-y-4 relative min-h-[150px]",children:A.length===0?c.jsxs("div",{className:"text-center py-10 text-slate-400 text-sm italic border-2 border-dashed border-slate-100 rounded-lg",children:["No schedule set for ",te,"."]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute left-2.5 top-2 bottom-2 w-0.5 bg-slate-200"}),A.map(N=>{const je=M(N.type);return c.jsxs("div",{className:"relative pl-8 group",children:[c.jsx("div",{className:`absolute left-0 top-1.5 w-5 h-5 bg-white border-2 rounded-full z-10 transition-colors ${je.border} ${je.bgHover}`}),c.jsxs("div",{className:"flex items-baseline justify-between",children:[c.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[N.startTime," - ",N.endTime]}),N.type!=="lesson"&&c.jsx("span",{className:`text-[10px] font-bold uppercase ${je.badge}`,children:N.type})]}),c.jsx("p",{className:`text-sm ${je.text}`,children:N.subject})]},N.id)})]})}):c.jsx("div",{className:"text-center py-10 text-slate-400",children:"Select a class to view schedule."})]})]})]}),k.show&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[c.jsx("div",{className:"p-6 border-b border-slate-100",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-amber-100 rounded-full",children:c.jsx(fh,{className:"text-amber-600",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-900",children:"Attendance Reminder"}),c.jsx("p",{className:"text-sm text-slate-500",children:"You missed marking attendance yesterday"})]})]})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-amber-800",children:["Please mark your attendance for ",c.jsx("strong",{children:new Date(k.date).toLocaleDateString()})," to keep your records accurate."]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>B({show:!1,date:""}),className:"flex-1 px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Remind Me Later"}),c.jsx("button",{onClick:()=>{B({show:!1,date:""}),z(!0)},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Mark Attendance"})]})]})]})})]})},M6=()=>{const{user:a}=hi(),e=(a==null?void 0:a.assignedClassIds)||[],[n,r]=j.useState(""),[l,u]=j.useState([]),[h,g]=j.useState(new Date().toISOString().split("T")[0]),[p,y]=j.useState(new Set),[v,w]=j.useState(!1),[E,C]=j.useState("");j.useEffect(()=>{e.length>0&&!n&&r(e[0])},[e]),j.useEffect(()=>{if(!n)return;(async()=>{w(!0);try{const B=await pe.getStudents(n);u(B);const $=await pe.getAttendance(n,h);y($?new Set($.presentStudentIds):new Set(B.map(I=>I.id)))}catch(B){console.error(B)}finally{w(!1)}})()},[n,h]);const L=k=>{const B=new Set(p);B.has(k)?B.delete(k):B.add(k),y(B)},z=async()=>{var k;if(n){w(!0);try{await pe.saveAttendance({id:`${n}_${h}`,classId:n,date:h,presentStudentIds:Array.from(p)});const B=((k=rt.find($=>$.id===n))==null?void 0:k.name)||n;await pe.addSystemNotification(`${a==null?void 0:a.name} marked attendance for ${B} on ${h}. (${p.size} Present)`,"attendance"),C("Attendance saved successfully!"),setTimeout(()=>C(""),3e3)}catch(B){console.error(B)}finally{w(!1)}}};return e.length===0?c.jsx(Pn,{title:"Attendance",children:c.jsx("div",{className:"p-8 text-center text-slate-500",children:"You are not assigned to any class. Contact Admin."})}):c.jsx(Pn,{title:"Mark Attendance",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex flex-col gap-6 mb-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[c.jsxs("div",{className:"w-full sm:w-auto",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Class"}),c.jsx("select",{value:n,onChange:k=>r(k.target.value),className:"w-full sm:w-48 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-black",children:e.map(k=>{const B=rt.find($=>$.id===k);return c.jsx("option",{value:k,children:B==null?void 0:B.name},k)})})]}),c.jsxs("div",{className:"w-full sm:w-auto",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Date"}),c.jsxs("div",{className:"relative",children:[c.jsx(oi,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),c.jsx("input",{type:"date",value:h,onChange:k=>g(k.target.value),className:"w-full sm:w-auto pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-4 border-t border-slate-50",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-bold text-emerald-600 text-lg mr-1",children:p.size})," Present",c.jsx("span",{className:"mx-2 text-slate-300",children:"|"}),c.jsx("span",{className:"font-bold text-red-500 text-lg mr-1",children:l.length-p.size})," Absent"]}),c.jsxs("button",{onClick:z,disabled:v||!n,className:"w-full sm:w-auto flex justify-center items-center bg-emerald-600 text-white px-6 py-2.5 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 font-medium shadow-sm",children:[c.jsx(ru,{size:18,className:"mr-2"}),v?"Saving...":"Save Register"]})]})]}),E&&c.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded text-center text-sm",children:E}),c.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[l.map(k=>{const B=p.has(k.id);return c.jsxs("div",{className:`flex items-center justify-between p-4 border-b last:border-b-0 cursor-pointer transition-colors ${B?"bg-white":"bg-red-50"}`,onClick:()=>L(k.id),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-4 ${B?"bg-slate-100 text-slate-600":"bg-red-100 text-red-600"}`,children:k.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:`font-medium ${B?"text-slate-800":"text-red-700"}`,children:k.name}),c.jsx("p",{className:"text-xs text-slate-400",children:k.gender})]})]}),c.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold border ${B?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:B?"PRESENT":"ABSENT"})]},k.id)}),l.length===0&&c.jsx("div",{className:"p-8 text-center text-slate-500",children:n?"No students found in this class.":"Select a class to view students."})]})]})})},k6=()=>{const{user:a}=hi(),e=(a==null?void 0:a.assignedClassIds)||[],[n,r]=j.useState(""),[l,u]=j.useState([]),[h,g]=j.useState([]),[p,y]=j.useState(""),[v,w]=j.useState({}),[E,C]=j.useState(!1),[L,z]=j.useState(!1),[k,B]=j.useState({currentTerm:`Term ${Js}`,academicYear:Wl}),$={testScore:15,homeworkScore:15,projectScore:20,examScore:100};j.useEffect(()=>{e.length>0&&!n&&r(e[0])},[e]),j.useEffect(()=>{(async()=>{try{const A=await pe.getSchoolConfig();B({currentTerm:A.currentTerm||`Term ${Js}`,academicYear:A.academicYear||Wl})}catch(A){console.error("Failed to load school config",A)}})()},[]),j.useEffect(()=>{(async()=>{const A=await pe.getSubjects();g(A),A.length>0&&y(A[0])})()},[]),j.useEffect(()=>{if(!n||!p)return;(async()=>{C(!0);const A=await pe.getStudents(n);u(A);const R=await pe.getAssessments(n,p);let D=Js;if(k.currentTerm){const P=k.currentTerm.match(/\d+/);P&&(D=parseInt(P[0],10))}const V={};A.forEach(P=>{const M=R.find(N=>N.studentId===P.id&&N.term===D);V[P.id]=M||{studentId:P.id,classId:n,term:D,academicYear:k.academicYear,subject:p,testScore:0,homeworkScore:0,projectScore:0,examScore:0}}),w(V),C(!1)})()},[n,p,k.currentTerm,k.academicYear]);const I=(se,A,R)=>{let D=R===""?0:parseFloat(R);const V=$[A];D>V&&(D=V),D<0&&(D=0),w(P=>{const M=P[se]||{};return{...P,[se]:{...M,[A]:D}}})},X=se=>{const A=(se.testScore||0)+(se.homeworkScore||0)+(se.projectScore||0),R=(se.examScore||0)*.5;return Math.round(A+R)},te=async()=>{var se;if(n){z(!0);try{let A=Js;if(k.currentTerm){const V=k.currentTerm.match(/\d+/);V&&(A=parseInt(V[0],10))}const R=Object.values(v).map(async V=>{if(!V.studentId)return;const P=X(V),M={...V,id:V.id||Math.random().toString(36),total:P,studentId:V.studentId,classId:n,subject:p,term:A,academicYear:k.academicYear,testScore:V.testScore||0,homeworkScore:V.homeworkScore||0,projectScore:V.projectScore||0,examScore:V.examScore||0};return pe.saveAssessment(M)});await Promise.all(R);const D=((se=rt.find(V=>V.id===n))==null?void 0:se.name)||n;await pe.addSystemNotification(`${a==null?void 0:a.name} updated assessments for ${D} in ${p}.`,"assessment"),fn("Saved Successfully",{type:"success"})}catch(A){console.error(A),fn("Error saving data",{type:"error"})}finally{z(!1)}}};return e.length===0?c.jsx(Pn,{title:"Assessment",children:c.jsx("div",{className:"p-8 text-center text-slate-500",children:"No class assigned."})}):c.jsx(Pn,{title:"Assessment Sheet",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Class"}),c.jsx("select",{value:n,onChange:se=>r(se.target.value),className:"p-2 border border-slate-300 rounded-md shadow-sm w-full md:w-64 bg-white text-black",children:e.map(se=>{const A=rt.find(R=>R.id===se);return c.jsx("option",{value:se,children:A==null?void 0:A.name},se)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Subject"}),c.jsxs("select",{value:p,onChange:se=>y(se.target.value),className:"p-2 border border-slate-300 rounded-md shadow-sm w-full md:w-64",disabled:h.length===0,children:[h.length===0&&c.jsx("option",{children:"Loading subjects..."}),h.map(se=>c.jsx("option",{value:se,children:se},se))]})]})]}),c.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[c.jsx("div",{className:"hidden sm:block",children:c.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[k.currentTerm,"  ",k.academicYear]})}),c.jsxs("button",{onClick:te,disabled:L||!p||!n,className:"flex items-center bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ml-auto",children:[c.jsx(ru,{size:18,className:"mr-2"}),L?"Saving...":"Save Scores"]})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left text-sm",children:[c.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold uppercase text-xs tracking-wider",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 sticky left-0 bg-slate-100 z-10 w-48",children:"Student Name"}),c.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Class Test",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(15)"})]}),c.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Homework",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(15)"})]}),c.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Project",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(20)"})]}),c.jsxs("th",{className:"px-2 py-3 w-28 text-center border-l border-slate-200 bg-blue-50/50",children:["Exam",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] normal-case font-bold text-blue-600",children:"(100)"})]}),c.jsxs("th",{className:"px-4 py-3 w-24 text-center bg-slate-200",children:["Total",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] normal-case",children:"(100%)"})]}),c.jsx("th",{className:"px-4 py-3 w-20 text-center bg-slate-200",children:"Grade"})]})}),c.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(se=>{const A=v[se.id]||{},R=X(A),{grade:D,remark:V}=Fc(R),P=Hh(D);return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-800 sticky left-0 bg-white border-r border-slate-100",children:se.name}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"0",max:$.testScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:A.testScore||0,onChange:M=>I(se.id,"testScore",M.target.value),onFocus:M=>M.target.select()})}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"0",max:$.homeworkScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:A.homeworkScore||0,onChange:M=>I(se.id,"homeworkScore",M.target.value),onFocus:M=>M.target.select()})}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"0",max:$.projectScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:A.projectScore||0,onChange:M=>I(se.id,"projectScore",M.target.value),onFocus:M=>M.target.select()})}),c.jsx("td",{className:"px-2 py-2 border-l border-slate-200 bg-blue-50/20",children:c.jsx("input",{type:"number",min:"0",max:$.examScore,className:"w-full text-center border border-blue-500 rounded p-1 focus:ring-2 focus:ring-blue-300 outline-none font-bold text-white bg-blue-600 shadow-sm",value:A.examScore||0,onChange:M=>I(se.id,"examScore",M.target.value),onFocus:M=>M.target.select()})}),c.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-800 bg-slate-50",children:R}),c.jsx("td",{className:"px-4 py-3 text-center bg-slate-50",children:c.jsx("span",{className:`inline-block w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${P}`,children:D})})]},se.id)}),l.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:n?"No students found in this class.":"Select a class above."})})]})]})})]})})},Qs=({children:a,allowedRoles:e})=>{const{user:n,isAuthenticated:r}=hi();return r?e&&n&&!e.includes(n.role)?c.jsx(lp,{to:n.role===Ot.ADMIN?"/":"/teacher",replace:!0}):a:c.jsx(lp,{to:"/login",replace:!0})},O6=()=>{const{user:a}=hi();return(a==null?void 0:a.role)===Ot.ADMIN?c.jsx(T6,{}):(a==null?void 0:a.role)===Ot.TEACHER?c.jsx(dE,{}):c.jsx(lp,{to:"/login"})},V6=()=>c.jsxs(XS,{children:[c.jsx(ps,{path:"/login",element:c.jsx(b6,{})}),c.jsx(ps,{path:"/",element:c.jsx(Qs,{children:c.jsx(O6,{})})}),c.jsx(ps,{path:"/admin/students",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(S6,{})})}),c.jsx(ps,{path:"/admin/teachers",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(N6,{})})}),c.jsx(ps,{path:"/admin/attendance",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(A6,{})})}),c.jsx(ps,{path:"/admin/teacher-attendance",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(j6,{})})}),c.jsx(ps,{path:"/admin/reports",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(R6,{})})}),c.jsx(ps,{path:"/admin/timetable",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(I6,{})})}),c.jsx(ps,{path:"/admin/settings",element:c.jsx(Qs,{allowedRoles:[Ot.ADMIN],children:c.jsx(C6,{})})}),c.jsx(ps,{path:"/teacher",element:c.jsx(Qs,{allowedRoles:[Ot.TEACHER],children:c.jsx(dE,{})})}),c.jsx(ps,{path:"/teacher/attendance",element:c.jsx(Qs,{allowedRoles:[Ot.TEACHER],children:c.jsx(M6,{})})}),c.jsx(ps,{path:"/teacher/assessment",element:c.jsx(Qs,{allowedRoles:[Ot.TEACHER],children:c.jsx(k6,{})})})]}),P6=()=>c.jsx(nD,{children:c.jsx(bN,{children:c.jsx(V6,{})})}),hE=document.getElementById("root");if(!hE)throw new Error("Could not find root element to mount to");const L6=ZT.createRoot(hE);L6.render(c.jsx(m_.StrictMode,{children:c.jsx(P6,{})}));
