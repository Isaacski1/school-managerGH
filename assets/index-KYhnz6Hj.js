var A6=Object.defineProperty;var c6=(s,e,t)=>e in s?A6(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Gr=(s,e,t)=>c6(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var Gj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function u6(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var Ey={exports:{}},wp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function d6(){if($j)return wp;$j=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:s,type:n,key:c,ref:r!==void 0?r:null,props:o}}return wp.Fragment=e,wp.jsx=t,wp.jsxs=t,wp}var Yj;function h6(){return Yj||(Yj=1,Ey.exports=d6()),Ey.exports}var i=h6(),Ty={exports:{}},jn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wj;function f6(){if(Wj)return jn;Wj=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function g(ee){return ee===null||typeof ee!="object"?null:(ee=x&&ee[x]||ee["@@iterator"],typeof ee=="function"?ee:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,N={};function C(ee,M,J){this.props=ee,this.context=M,this.refs=N,this.updater=J||b}C.prototype.isReactComponent={},C.prototype.setState=function(ee,M){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,M,"setState")},C.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function E(){}E.prototype=C.prototype;function F(ee,M,J){this.props=ee,this.context=M,this.refs=N,this.updater=J||b}var L=F.prototype=new E;L.constructor=F,I(L,C.prototype),L.isPureReactComponent=!0;var O=Array.isArray;function H(){}var Q={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function R(ee,M,J){var ie=J.ref;return{$$typeof:s,type:ee,key:M,ref:ie!==void 0?ie:null,props:J}}function $(ee,M){return R(ee.type,M,ee.props)}function P(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===s}function V(ee){var M={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(J){return M[J]})}var G=/\/+/g;function ae(ee,M){return typeof ee=="object"&&ee!==null&&ee.key!=null?V(""+ee.key):M.toString(36)}function ue(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(H,H):(ee.status="pending",ee.then(function(M){ee.status==="pending"&&(ee.status="fulfilled",ee.value=M)},function(M){ee.status==="pending"&&(ee.status="rejected",ee.reason=M)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function oe(ee,M,J,ie,le){var ce=typeof ee;(ce==="undefined"||ce==="boolean")&&(ee=null);var ve=!1;if(ee===null)ve=!0;else switch(ce){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(ee.$$typeof){case s:case e:ve=!0;break;case A:return ve=ee._init,oe(ve(ee._payload),M,J,ie,le)}}if(ve)return le=le(ee),ve=ie===""?"."+ae(ee,0):ie,O(le)?(J="",ve!=null&&(J=ve.replace(G,"$&/")+"/"),oe(le,M,J,"",function(Be){return Be})):le!=null&&(P(le)&&(le=$(le,J+(le.key==null||ee&&ee.key===le.key?"":(""+le.key).replace(G,"$&/")+"/")+ve)),M.push(le)),1;ve=0;var Se=ie===""?".":ie+":";if(O(ee))for(var ge=0;ge<ee.length;ge++)ie=ee[ge],ce=Se+ae(ie,ge),ve+=oe(ie,M,J,ce,le);else if(ge=g(ee),typeof ge=="function")for(ee=ge.call(ee),ge=0;!(ie=ee.next()).done;)ie=ie.value,ce=Se+ae(ie,ge++),ve+=oe(ie,M,J,ce,le);else if(ce==="object"){if(typeof ee.then=="function")return oe(ue(ee),M,J,ie,le);throw M=String(ee),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ve}function X(ee,M,J){if(ee==null)return ee;var ie=[],le=0;return oe(ee,ie,"","",function(ce){return M.call(J,ce,le++)}),ie}function Y(ee){if(ee._status===-1){var M=ee._result;M=M(),M.then(function(J){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=J)},function(J){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=J)}),ee._status===-1&&(ee._status=0,ee._result=M)}if(ee._status===1)return ee._result.default;throw ee._result}var re=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)},pe={map:X,forEach:function(ee,M,J){X(ee,function(){M.apply(this,arguments)},J)},count:function(ee){var M=0;return X(ee,function(){M++}),M},toArray:function(ee){return X(ee,function(M){return M})||[]},only:function(ee){if(!P(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}};return jn.Activity=m,jn.Children=pe,jn.Component=C,jn.Fragment=t,jn.Profiler=r,jn.PureComponent=F,jn.StrictMode=n,jn.Suspense=u,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,jn.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return Q.H.useMemoCache(ee)}},jn.cache=function(ee){return function(){return ee.apply(null,arguments)}},jn.cacheSignal=function(){return null},jn.cloneElement=function(ee,M,J){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var ie=I({},ee.props),le=ee.key;if(M!=null)for(ce in M.key!==void 0&&(le=""+M.key),M)!U.call(M,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&M.ref===void 0||(ie[ce]=M[ce]);var ce=arguments.length-2;if(ce===1)ie.children=J;else if(1<ce){for(var ve=Array(ce),Se=0;Se<ce;Se++)ve[Se]=arguments[Se+2];ie.children=ve}return R(ee.type,le,ie)},jn.createContext=function(ee){return ee={$$typeof:c,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:o,_context:ee},ee},jn.createElement=function(ee,M,J){var ie,le={},ce=null;if(M!=null)for(ie in M.key!==void 0&&(ce=""+M.key),M)U.call(M,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(le[ie]=M[ie]);var ve=arguments.length-2;if(ve===1)le.children=J;else if(1<ve){for(var Se=Array(ve),ge=0;ge<ve;ge++)Se[ge]=arguments[ge+2];le.children=Se}if(ee&&ee.defaultProps)for(ie in ve=ee.defaultProps,ve)le[ie]===void 0&&(le[ie]=ve[ie]);return R(ee,ce,le)},jn.createRef=function(){return{current:null}},jn.forwardRef=function(ee){return{$$typeof:h,render:ee}},jn.isValidElement=P,jn.lazy=function(ee){return{$$typeof:A,_payload:{_status:-1,_result:ee},_init:Y}},jn.memo=function(ee,M){return{$$typeof:f,type:ee,compare:M===void 0?null:M}},jn.startTransition=function(ee){var M=Q.T,J={};Q.T=J;try{var ie=ee(),le=Q.S;le!==null&&le(J,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(H,re)}catch(ce){re(ce)}finally{M!==null&&J.types!==null&&(M.types=J.types),Q.T=M}},jn.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},jn.use=function(ee){return Q.H.use(ee)},jn.useActionState=function(ee,M,J){return Q.H.useActionState(ee,M,J)},jn.useCallback=function(ee,M){return Q.H.useCallback(ee,M)},jn.useContext=function(ee){return Q.H.useContext(ee)},jn.useDebugValue=function(){},jn.useDeferredValue=function(ee,M){return Q.H.useDeferredValue(ee,M)},jn.useEffect=function(ee,M){return Q.H.useEffect(ee,M)},jn.useEffectEvent=function(ee){return Q.H.useEffectEvent(ee)},jn.useId=function(){return Q.H.useId()},jn.useImperativeHandle=function(ee,M,J){return Q.H.useImperativeHandle(ee,M,J)},jn.useInsertionEffect=function(ee,M){return Q.H.useInsertionEffect(ee,M)},jn.useLayoutEffect=function(ee,M){return Q.H.useLayoutEffect(ee,M)},jn.useMemo=function(ee,M){return Q.H.useMemo(ee,M)},jn.useOptimistic=function(ee,M){return Q.H.useOptimistic(ee,M)},jn.useReducer=function(ee,M,J){return Q.H.useReducer(ee,M,J)},jn.useRef=function(ee){return Q.H.useRef(ee)},jn.useState=function(ee){return Q.H.useState(ee)},jn.useSyncExternalStore=function(ee,M,J){return Q.H.useSyncExternalStore(ee,M,J)},jn.useTransition=function(){return Q.H.useTransition()},jn.version="19.2.3",jn}var Xj;function Zb(){return Xj||(Xj=1,Ty.exports=f6()),Ty.exports}var Z=Zb();const Ph=qb(Z);var Iy={exports:{}},jp={},_y={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jj;function m6(){return Jj||(Jj=1,(function(s){function e(oe,X){var Y=oe.length;oe.push(X);e:for(;0<Y;){var re=Y-1>>>1,pe=oe[re];if(0<r(pe,X))oe[re]=X,oe[Y]=pe,Y=re;else break e}}function t(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var X=oe[0],Y=oe.pop();if(Y!==X){oe[0]=Y;e:for(var re=0,pe=oe.length,ee=pe>>>1;re<ee;){var M=2*(re+1)-1,J=oe[M],ie=M+1,le=oe[ie];if(0>r(J,Y))ie<pe&&0>r(le,J)?(oe[re]=le,oe[ie]=Y,re=ie):(oe[re]=J,oe[M]=Y,re=M);else if(ie<pe&&0>r(le,Y))oe[re]=le,oe[ie]=Y,re=ie;else break e}}return X}function r(oe,X){var Y=oe.sortIndex-X.sortIndex;return Y!==0?Y:oe.id-X.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();s.unstable_now=function(){return c.now()-h}}var u=[],f=[],A=1,m=null,x=3,g=!1,b=!1,I=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function L(oe){for(var X=t(f);X!==null;){if(X.callback===null)n(f);else if(X.startTime<=oe)n(f),X.sortIndex=X.expirationTime,e(u,X);else break;X=t(f)}}function O(oe){if(I=!1,L(oe),!b)if(t(u)!==null)b=!0,H||(H=!0,V());else{var X=t(f);X!==null&&ue(O,X.startTime-oe)}}var H=!1,Q=-1,U=5,R=-1;function $(){return N?!0:!(s.unstable_now()-R<U)}function P(){if(N=!1,H){var oe=s.unstable_now();R=oe;var X=!0;try{e:{b=!1,I&&(I=!1,E(Q),Q=-1),g=!0;var Y=x;try{t:{for(L(oe),m=t(u);m!==null&&!(m.expirationTime>oe&&$());){var re=m.callback;if(typeof re=="function"){m.callback=null,x=m.priorityLevel;var pe=re(m.expirationTime<=oe);if(oe=s.unstable_now(),typeof pe=="function"){m.callback=pe,L(oe),X=!0;break t}m===t(u)&&n(u),L(oe)}else n(u);m=t(u)}if(m!==null)X=!0;else{var ee=t(f);ee!==null&&ue(O,ee.startTime-oe),X=!1}}break e}finally{m=null,x=Y,g=!1}X=void 0}}finally{X?V():H=!1}}}var V;if(typeof F=="function")V=function(){F(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ae=G.port2;G.port1.onmessage=P,V=function(){ae.postMessage(null)}}else V=function(){C(P,0)};function ue(oe,X){Q=C(function(){oe(s.unstable_now())},X)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(oe){oe.callback=null},s.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<oe?Math.floor(1e3/oe):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(oe){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var Y=x;x=X;try{return oe()}finally{x=Y}},s.unstable_requestPaint=function(){N=!0},s.unstable_runWithPriority=function(oe,X){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Y=x;x=oe;try{return X()}finally{x=Y}},s.unstable_scheduleCallback=function(oe,X,Y){var re=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,oe){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Y+pe,oe={id:A++,callback:X,priorityLevel:oe,startTime:Y,expirationTime:pe,sortIndex:-1},Y>re?(oe.sortIndex=Y,e(f,oe),t(u)===null&&oe===t(f)&&(I?(E(Q),Q=-1):I=!0,ue(O,Y-re))):(oe.sortIndex=pe,e(u,oe),b||g||(b=!0,H||(H=!0,V()))),oe},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(oe){var X=x;return function(){var Y=x;x=X;try{return oe.apply(this,arguments)}finally{x=Y}}}})(Fy)),Fy}var qj;function p6(){return qj||(qj=1,_y.exports=m6()),_y.exports}var Uy={exports:{}},qo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zj;function g6(){if(Zj)return qo;Zj=1;var s=Zb();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)f+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(u,f,A){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:u,containerInfo:f,implementation:A}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return qo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,qo.createPortal=function(u,f){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(u,f,null,A)},qo.flushSync=function(u){var f=c.T,A=n.p;try{if(c.T=null,n.p=2,u)return u()}finally{c.T=f,n.p=A,n.d.f()}},qo.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(u,f))},qo.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},qo.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var A=f.as,m=h(A,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;A==="style"?n.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:g}):A==="script"&&n.d.X(u,{crossOrigin:m,integrity:x,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},qo.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var A=h(f.as,f.crossOrigin);n.d.M(u,{crossOrigin:A,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(u)},qo.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var A=f.as,m=h(A,f.crossOrigin);n.d.L(u,A,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},qo.preloadModule=function(u,f){if(typeof u=="string")if(f){var A=h(f.as,f.crossOrigin);n.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:A,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(u)},qo.requestFormReset=function(u){n.d.r(u)},qo.unstable_batchedUpdates=function(u,f){return u(f)},qo.useFormState=function(u,f,A){return c.H.useFormState(u,f,A)},qo.useFormStatus=function(){return c.H.useHostTransitionStatus()},qo.version="19.2.3",qo}var eB;function x6(){if(eB)return Uy.exports;eB=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Uy.exports=g6(),Uy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tB;function v6(){if(tB)return jp;tB=1;var s=p6(),e=Zb(),t=x6();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function c(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function h(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(n(188))}function f(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(n(188));return l!==a?null:a}for(var d=a,p=l;;){var T=d.return;if(T===null)break;var D=T.alternate;if(D===null){if(p=T.return,p!==null){d=p;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===d)return u(T),a;if(D===p)return u(T),l;D=D.sibling}throw Error(n(188))}if(d.return!==p.return)d=T,p=D;else{for(var te=!1,ye=T.child;ye;){if(ye===d){te=!0,d=T,p=D;break}if(ye===p){te=!0,p=T,d=D;break}ye=ye.sibling}if(!te){for(ye=D.child;ye;){if(ye===d){te=!0,d=D,p=T;break}if(ye===p){te=!0,p=D,d=T;break}ye=ye.sibling}if(!te)throw Error(n(189))}}if(d.alternate!==p)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:l}function A(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=A(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),F=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=P&&a[P]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function ae(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case I:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case H:return"SuspenseList";case R:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case F:return a.displayName||"Context";case E:return(a._context.displayName||"Context")+".Consumer";case L:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Q:return l=a.displayName||null,l!==null?l:ae(a.type)||"Memo";case U:l=a._payload,a=a._init;try{return ae(a(l))}catch{}}return null}var ue=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},re=[],pe=-1;function ee(a){return{current:a}}function M(a){0>pe||(a.current=re[pe],re[pe]=null,pe--)}function J(a,l){pe++,re[pe]=a.current,a.current=l}var ie=ee(null),le=ee(null),ce=ee(null),ve=ee(null);function Se(a,l){switch(J(ce,l),J(le,a),J(ie,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?mj(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=mj(l),a=pj(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}M(ie),J(ie,a)}function ge(){M(ie),M(le),M(ce)}function Be(a){a.memoizedState!==null&&J(ve,a);var l=ie.current,d=pj(l,a.type);l!==d&&(J(le,a),J(ie,d))}function Fe(a){le.current===a&&(M(ie),M(le)),ve.current===a&&(M(ve),xp._currentValue=Y)}var Qe,Ze;function Pe(a){if(Qe===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Qe=l&&l[1]||"",Ze=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+a+Ze}var me=!1;function nt(a,l){if(!a||me)return"";me=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(ct){var rt=ct}Reflect.construct(a,[],Tt)}else{try{Tt.call()}catch(ct){rt=ct}a.call(Tt.prototype)}}else{try{throw Error()}catch(ct){rt=ct}(Tt=a())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(ct){if(ct&&rt&&typeof ct.stack=="string")return[ct.stack,rt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=p.DetermineComponentFrameRoot(),te=D[0],ye=D[1];if(te&&ye){var Re=te.split(`
`),tt=ye.split(`
`);for(T=p=0;p<Re.length&&!Re[p].includes("DetermineComponentFrameRoot");)p++;for(;T<tt.length&&!tt[T].includes("DetermineComponentFrameRoot");)T++;if(p===Re.length||T===tt.length)for(p=Re.length-1,T=tt.length-1;1<=p&&0<=T&&Re[p]!==tt[T];)T--;for(;1<=p&&0<=T;p--,T--)if(Re[p]!==tt[T]){if(p!==1||T!==1)do if(p--,T--,0>T||Re[p]!==tt[T]){var yt=`
`+Re[p].replace(" at new "," at ");return a.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",a.displayName)),yt}while(1<=p&&0<=T);break}}}finally{me=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?Pe(d):""}function It(a,l){switch(a.tag){case 26:case 27:case 5:return Pe(a.type);case 16:return Pe("Lazy");case 13:return a.child!==l&&l!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return nt(a.type,!1);case 11:return nt(a.type.render,!1);case 1:return nt(a.type,!0);case 31:return Pe("Activity");default:return""}}function ut(a){try{var l="",d=null;do l+=It(a,d),d=a,a=a.return;while(a);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var ze=Object.prototype.hasOwnProperty,Ft=s.unstable_scheduleCallback,Qt=s.unstable_cancelCallback,Ct=s.unstable_shouldYield,Jt=s.unstable_requestPaint,ts=s.unstable_now,as=s.unstable_getCurrentPriorityLevel,Xe=s.unstable_ImmediatePriority,Vt=s.unstable_UserBlockingPriority,Kt=s.unstable_NormalPriority,Mt=s.unstable_LowPriority,mt=s.unstable_IdlePriority,Dt=s.log,Ns=s.unstable_setDisableYieldValue,$t=null,Wt=null;function lt(a){if(typeof Dt=="function"&&Ns(a),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode($t,a)}catch{}}var Ot=Math.clz32?Math.clz32:at,De=Math.log,dt=Math.LN2;function at(a){return a>>>=0,a===0?32:31-(De(a)/dt|0)|0}var Et=256,Xt=262144,vt=4194304;function it(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Rt(a,l,d){var p=a.pendingLanes;if(p===0)return 0;var T=0,D=a.suspendedLanes,te=a.pingedLanes;a=a.warmLanes;var ye=p&134217727;return ye!==0?(p=ye&~D,p!==0?T=it(p):(te&=ye,te!==0?T=it(te):d||(d=ye&~a,d!==0&&(T=it(d))))):(ye=p&~D,ye!==0?T=it(ye):te!==0?T=it(te):d||(d=p&~a,d!==0&&(T=it(d)))),T===0?0:l!==0&&l!==T&&(l&D)===0&&(D=T&-T,d=l&-l,D>=d||D===32&&(d&4194048)!==0)?l:T}function qt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function cs(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xs(){var a=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),a}function Ls(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Yt(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function hn(a,l,d,p,T,D){var te=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var ye=a.entanglements,Re=a.expirationTimes,tt=a.hiddenUpdates;for(d=te&~d;0<d;){var yt=31-Ot(d),Tt=1<<yt;ye[yt]=0,Re[yt]=-1;var rt=tt[yt];if(rt!==null)for(tt[yt]=null,yt=0;yt<rt.length;yt++){var ct=rt[yt];ct!==null&&(ct.lane&=-536870913)}d&=~Tt}p!==0&&Tr(a,p,0),D!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=D&~(te&~l))}function Tr(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var p=31-Ot(l);a.entangledLanes|=l,a.entanglements[p]=a.entanglements[p]|1073741824|d&261930}function dr(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var p=31-Ot(d),T=1<<p;T&l|a[p]&l&&(a[p]|=l),d&=~T}}function hr(a,l){var d=l&-l;return d=(d&42)!==0?1:Zt(d),(d&(a.suspendedLanes|l))!==0?0:d}function Zt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function mn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pn(){var a=X.p;return a!==0?a:(a=window.event,a===void 0?32:Pj(a.type))}function Nn(a,l){var d=X.p;try{return X.p=a,l()}finally{X.p=d}}var Fs=Math.random().toString(36).slice(2),En="__reactFiber$"+Fs,An="__reactProps$"+Fs,Ir="__reactContainer$"+Fs,ya="__reactEvents$"+Fs,ai="__reactListeners$"+Fs,ii="__reactHandles$"+Fs,yn="__reactResources$"+Fs,_r="__reactMarker$"+Fs;function ea(a){delete a[En],delete a[An],delete a[ya],delete a[ai],delete a[ii]}function xr(a){var l=a[En];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Ir]||d[En]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=jj(a);a!==null;){if(d=a[En])return d;a=jj(a)}return l}a=d,d=a.parentNode}return null}function Fr(a){if(a=a[En]||a[Ir]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function da(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function La(a){var l=a[yn];return l||(l=a[yn]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function zn(a){a[_r]=!0}var Qa=new Set,ha={};function Ur(a,l){Ti(a,l),Ti(a+"Capture",l)}function Ti(a,l){for(ha[a]=l,a=0;a<l.length;a++)Qa.add(l[a])}var Ji=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wl={},jl={};function Ao(a){return ze.call(jl,a)?!0:ze.call(wl,a)?!1:Ji.test(a)?jl[a]=!0:(wl[a]=!0,!1)}function ba(a,l,d){if(Ao(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function Oa(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function Yr(a,l,d,p){if(p===null)a.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+p)}}function Sn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ii(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Wr(a,l,d){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,D=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return T.call(this)},set:function(te){d=""+te,D.call(this,te)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return d},setValue:function(te){d=""+te},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function gn(a){if(!a._valueTracker){var l=Ii(a)?"checked":"value";a._valueTracker=Wr(a,l,""+a[l])}}function Ee(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return a&&(p=Ii(a)?a.checked?"true":"false":a.value),a=p,a!==d?(l.setValue(a),!0):!1}function Je(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var xt=/[\n"\\]/g;function _t(a){return a.replace(xt,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function fs(a,l,d,p,T,D,te,ye){a.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?a.type=te:a.removeAttribute("type"),l!=null?te==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Sn(l)):a.value!==""+Sn(l)&&(a.value=""+Sn(l)):te!=="submit"&&te!=="reset"||a.removeAttribute("value"),l!=null?zs(a,te,Sn(l)):d!=null?zs(a,te,Sn(d)):p!=null&&a.removeAttribute("value"),T==null&&D!=null&&(a.defaultChecked=!!D),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?a.name=""+Sn(ye):a.removeAttribute("name")}function ms(a,l,d,p,T,D,te,ye){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.type=D),l!=null||d!=null){if(!(D!=="submit"&&D!=="reset"||l!=null)){gn(a);return}d=d!=null?""+Sn(d):"",l=l!=null?""+Sn(l):d,ye||l===a.value||(a.value=l),a.defaultValue=l}p=p??T,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=ye?a.checked:!!p,a.defaultChecked=!!p,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(a.name=te),gn(a)}function zs(a,l,d){l==="number"&&Je(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Gs(a,l,d,p){if(a=a.options,l){l={};for(var T=0;T<d.length;T++)l["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=l.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&p&&(a[d].defaultSelected=!0)}else{for(d=""+Sn(d),l=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,p&&(a[T].defaultSelected=!0);return}l!==null||a[T].disabled||(l=a[T])}l!==null&&(l.selected=!0)}}function Lt(a,l,d){if(l!=null&&(l=""+Sn(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Sn(d):""}function Js(a,l,d,p){if(l==null){if(p!=null){if(d!=null)throw Error(n(92));if(ue(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),l=d}d=Sn(l),a.defaultValue=d,p=a.textContent,p===d&&p!==""&&p!==null&&(a.value=p),gn(a)}function Bs(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nr(a,l,d){var p=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":p?a.setProperty(l,d):typeof d!="number"||d===0||Zs.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function wr(a,l,d){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var T in l)p=l[T],l.hasOwnProperty(T)&&d[T]!==p&&nr(a,T,p)}else for(var D in l)l.hasOwnProperty(D)&&nr(a,D,l[D])}function ta(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gn(a){return Qr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function fa(){}var _i=null;function ja(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Fi=null,Ts=null;function ll(a){var l=Fr(a);if(l&&(a=l.stateNode)){var d=a[An]||null;e:switch(a=l.stateNode,l.type){case"input":if(fs(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+_t(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==a&&p.form===a.form){var T=p[An]||null;if(!T)throw Error(n(90));fs(p,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(l=0;l<d.length;l++)p=d[l],p.form===a.form&&Ee(p)}break e;case"textarea":Lt(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Gs(a,!!d.multiple,l,!1)}}}var Bl=!1;function Do(a,l,d){if(Bl)return a(l,d);Bl=!0;try{var p=a(l);return p}finally{if(Bl=!1,(Fi!==null||Ts!==null)&&(ao(),Fi&&(l=Fi,a=Ts,Ts=Fi=null,ll(l),a)))for(l=0;l<a.length;l++)ll(a[l])}}function Ba(a,l){var d=a.stateNode;if(d===null)return null;var p=d[An]||null;if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=!1;if(sa)try{var $n={};Object.defineProperty($n,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{Pa=!1}var oi=null,Ro=null,pi=null;function Sl(){if(pi)return pi;var a,l=Ro,d=l.length,p,T="value"in oi?oi.value:oi.textContent,D=T.length;for(a=0;a<d&&l[a]===T[a];a++);var te=d-a;for(p=1;p<=te&&l[d-p]===T[D-p];p++);return pi=T.slice(a,1<p?1-p:void 0)}function Sa(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function qi(){return!0}function gi(){return!1}function jr(a){function l(d,p,T,D,te){this._reactName=d,this._targetInst=T,this.type=p,this.nativeEvent=D,this.target=te,this.currentTarget=null;for(var ye in a)a.hasOwnProperty(ye)&&(d=a[ye],this[ye]=d?d(D):D[ye]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?qi:gi,this.isPropagationStopped=gi,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),l}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},na=jr(xi),Yn=m({},xi,{view:0,detail:0}),po=jr(Yn),ka,Ht,bs,cn=m({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==bs&&(bs&&a.type==="mousemove"?(ka=a.screenX-bs.screenX,Ht=a.screenY-bs.screenY):Ht=ka=0,bs=a),ka)},movementY:function(a){return"movementY"in a?a.movementY:Ht}}),In=jr(cn),ks=m({},cn,{dataTransfer:0}),ss=jr(ks),rr=m({},Yn,{relatedTarget:0}),Or=jr(rr),Ca=m({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),k=jr(Ca),Ae=m({},xi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Te=jr(Ae),Ue=m({},xi,{data:0}),Me=jr(Ue),ht={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},St={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ds={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xs(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=ds[a])?!!l[a]:!1}function Ms(){return xs}var Us=m({},Yn,{key:function(a){if(a.key){var l=ht[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Sa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?St[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(a){return a.type==="keypress"?Sa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Sa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Fn=jr(Us),Dr=m({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vr=jr(Dr),w=m({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),W=jr(w),ne=m({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),we=jr(ne),$e=m({},cn,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),st=jr($e),zt=m({},xi,{newState:0,oldState:0}),sn=jr(zt),Rr=[9,13,27,32],bn=sa&&"CompositionEvent"in window,ar=null;sa&&"documentMode"in document&&(ar=document.documentMode);var Za=sa&&"TextEvent"in window&&!ar,Na=sa&&(!bn||ar&&8<ar&&11>=ar),Wn=" ",on=!1;function go(a,l){switch(a){case"keyup":return Rr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Al=!1;function Ma(a,l){switch(a){case"compositionend":return Lo(l);case"keypress":return l.which!==32?null:(on=!0,Wn);case"textInput":return a=l.data,a===Wn&&on?null:a;default:return null}}function li(a,l){if(Al)return a==="compositionend"||!bn&&go(a,l)?(a=Sl(),pi=Ro=oi=null,Al=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Na&&l.locale!=="ko"?null:l.data;default:return null}}var mc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qo(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!mc[a.type]:l==="textarea"}function Xn(a,l,d,p){Fi?Ts?Ts.push(p):Ts=[p]:Fi=p,l=C0(l,"onChange"),0<l.length&&(d=new na("onChange","change",null,d,p),a.push({event:d,listeners:l}))}var Oo=null,Pr=null;function OA(a){Aj(a,0)}function Ai(a){var l=da(a);if(Ee(l))return a}function Po(a,l){if(a==="change")return l}var Cn=!1;if(sa){var Ui;if(sa){var cl="oninput"in document;if(!cl){var ul=document.createElement("div");ul.setAttribute("oninput","return;"),cl=typeof ul.oninput=="function"}Ui=cl}else Ui=!1;Cn=Ui&&(!document.documentMode||9<document.documentMode)}function Cl(){Oo&&(Oo.detachEvent("onpropertychange",$l),Pr=Oo=null)}function $l(a){if(a.propertyName==="value"&&Ai(Pr)){var l=[];Xn(l,Pr,a,ja(a)),Do(OA,l)}}function PA(a,l,d){a==="focusin"?(Cl(),Oo=l,Pr=d,Oo.attachEvent("onpropertychange",$l)):a==="focusout"&&Cl()}function ma(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ai(Pr)}function Zi(a,l){if(a==="click")return Ai(l)}function vi(a,l){if(a==="input"||a==="change")return Ai(l)}function yi(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Qn=typeof Object.is=="function"?Object.is:yi;function Di(a,l){if(Qn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var T=d[p];if(!ze.call(l,T)||!Qn(a[T],l[T]))return!1}return!0}function kA(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function MA(a,l){var d=kA(a);a=0;for(var p;d;){if(d.nodeType===3){if(p=a+d.textContent.length,a<=l&&p>=l)return{node:d,offset:l-a};a=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=kA(d)}}function dl(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?dl(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Nl(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Je(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=Je(a.document)}return l}function El(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var hl=sa&&"documentMode"in document&&11>=document.documentMode,Ea=null,Yl=null,Ri=null,eo=!1;function Jn(a,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;eo||Ea==null||Ea!==Je(p)||(p=Ea,"selectionStart"in p&&El(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ri&&Di(Ri,p)||(Ri=p,p=C0(Yl,"onSelect"),0<p.length&&(l=new na("onSelect","select",null,l,d),a.push({event:l,listeners:p}),l.target=Ea)))}function Hn(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var Lr={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},ir={},fl={};sa&&(fl=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function ml(a){if(ir[a])return ir[a];if(!Lr[a])return a;var l=Lr[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in fl)return ir[a]=l[d];return a}var HA=ml("animationend"),dA=ml("animationiteration"),nh=ml("animationstart"),rh=ml("transitionrun"),ah=ml("transitionstart"),ih=ml("transitioncancel"),Qu=ml("transitionend"),Ou=new Map,hA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hA.push("scrollEnd");function xo(a,l){Ou.set(a,l),Ur(l,[a])}var pc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},vo=[],Tl=0,Pu=0;function su(){for(var a=Tl,l=Pu=Tl=0;l<a;){var d=vo[l];vo[l++]=null;var p=vo[l];vo[l++]=null;var T=vo[l];vo[l++]=null;var D=vo[l];if(vo[l++]=null,p!==null&&T!==null){var te=p.pending;te===null?T.next=T:(T.next=te.next,te.next=T),p.pending=T}D!==0&&nu(d,T,D)}}function VA(a,l,d,p){vo[Tl++]=a,vo[Tl++]=l,vo[Tl++]=d,vo[Tl++]=p,Pu|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function ku(a,l,d,p){return VA(a,l,d,p),Li(a)}function Il(a,l){return VA(a,null,null,l),Li(a)}function nu(a,l,d){a.lanes|=d;var p=a.alternate;p!==null&&(p.lanes|=d);for(var T=!1,D=a.return;D!==null;)D.childLanes|=d,p=D.alternate,p!==null&&(p.childLanes|=d),D.tag===22&&(a=D.stateNode,a===null||a._visibility&1||(T=!0)),a=D,D=D.return;return a.tag===3?(D=a.stateNode,T&&l!==null&&(T=31-Ot(d),a=D.hiddenUpdates,p=a[T],p===null?a[T]=[l]:p.push(l),l.lane=d|536870912),D):null}function Li(a){if(50<Dn)throw Dn=0,Mn=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var bi={};function Mu(a,l,d,p){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(a,l,d,p){return new Mu(a,l,d,p)}function Wl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ko(a,l){var d=a.alternate;return d===null?(d=Qi(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function ru(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Xl(a,l,d,p,T,D){var te=0;if(p=a,typeof a=="function")Wl(a)&&(te=1);else if(typeof a=="string")te=J_(a,d,ie.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case R:return a=Qi(31,d,l,T),a.elementType=R,a.lanes=D,a;case I:return fA(d.children,T,D,l);case N:te=8,T|=24;break;case C:return a=Qi(12,d,l,T|2),a.elementType=C,a.lanes=D,a;case O:return a=Qi(13,d,l,T),a.elementType=O,a.lanes=D,a;case H:return a=Qi(19,d,l,T),a.elementType=H,a.lanes=D,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case F:te=10;break e;case E:te=9;break e;case L:te=11;break e;case Q:te=14;break e;case U:te=16,p=null;break e}te=29,d=Error(n(130,a===null?"null":typeof a,"")),p=null}return l=Qi(te,d,l,T),l.elementType=a,l.type=p,l.lanes=D,l}function fA(a,l,d,p){return a=Qi(7,a,p,l),a.lanes=d,a}function au(a,l,d){return a=Qi(6,a,null,l),a.lanes=d,a}function Hu(a){var l=Qi(18,null,null,0);return l.stateNode=a,l}function gc(a,l,d){return l=Qi(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var KA=new WeakMap;function Mo(a,l){if(typeof a=="object"&&a!==null){var d=KA.get(a);return d!==void 0?d:(l={value:a,source:l,stack:ut(l)},KA.set(a,l),l)}return{value:a,source:l,stack:ut(l)}}var xc=[],zA=0,Vu=null,mA=0,Ho=[],Vo=0,pA=null,Ko=1,to="";function yo(a,l){xc[zA++]=mA,xc[zA++]=Vu,Vu=a,mA=l}function hf(a,l,d){Ho[Vo++]=Ko,Ho[Vo++]=to,Ho[Vo++]=pA,pA=a;var p=Ko;a=to;var T=32-Ot(p)-1;p&=~(1<<T),d+=1;var D=32-Ot(l)+T;if(30<D){var te=T-T%5;D=(p&(1<<te)-1).toString(32),p>>=te,T-=te,Ko=1<<32-Ot(l)+T|d<<T|p,to=D+a}else Ko=1<<D|d<<T|p,to=a}function oh(a){a.return!==null&&(yo(a,1),hf(a,1,0))}function Ku(a){for(;a===Vu;)Vu=xc[--zA],xc[zA]=null,mA=xc[--zA],xc[zA]=null;for(;a===pA;)pA=Ho[--Vo],Ho[Vo]=null,to=Ho[--Vo],Ho[Vo]=null,Ko=Ho[--Vo],Ho[Vo]=null}function ff(a,l){Ho[Vo++]=Ko,Ho[Vo++]=to,Ho[Vo++]=pA,Ko=l.id,to=l.overflow,pA=a}var wi=null,kr=null,Rn=!1,so=null,pa=!1,co=Error(n(519));function gA(a){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(Mo(l,a)),co}function lh(a){var l=a.stateNode,d=a.type,p=a.memoizedProps;switch(l[En]=a,l[An]=p,d){case"dialog":Kn("cancel",l),Kn("close",l);break;case"iframe":case"object":case"embed":Kn("load",l);break;case"video":case"audio":for(d=0;d<hp.length;d++)Kn(hp[d],l);break;case"source":Kn("error",l);break;case"img":case"image":case"link":Kn("error",l),Kn("load",l);break;case"details":Kn("toggle",l);break;case"input":Kn("invalid",l),ms(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Kn("invalid",l);break;case"textarea":Kn("invalid",l),Js(l,p.value,p.defaultValue,p.children)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||p.suppressHydrationWarning===!0||hj(l.textContent,d)?(p.popover!=null&&(Kn("beforetoggle",l),Kn("toggle",l)),p.onScroll!=null&&Kn("scroll",l),p.onScrollEnd!=null&&Kn("scrollend",l),p.onClick!=null&&(l.onclick=fa),l=!0):l=!1,l||gA(a,!0)}function _l(a){for(wi=a.return;wi;)switch(wi.tag){case 5:case 31:case 13:pa=!1;return;case 27:case 3:pa=!0;return;default:wi=wi.return}}function ji(a){if(a!==wi)return!1;if(!Rn)return _l(a),Rn=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||hy(a.type,a.memoizedProps)),d=!d),d&&kr&&gA(a),_l(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));kr=wj(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));kr=wj(a)}else l===27?(l=kr,dd(a.type)?(a=xy,xy=null,kr=a):kr=l):kr=wi?NA(a.stateNode.nextSibling):null;return!0}function GA(){kr=wi=null,Rn=!1}function iu(){var a=so;return a!==null&&(Le===null?Le=a:Le.push.apply(Le,a),so=null),a}function Jl(a){so===null?so=[a]:so.push(a)}var zu=ee(null),xA=null,Fl=null;function vA(a,l,d){J(zu,l._currentValue),l._currentValue=d}function zo(a){a._currentValue=zu.current,M(zu)}function vc(a,l,d){for(;a!==null;){var p=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),a===d)break;a=a.return}}function Ul(a,l,d,p){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var D=T.dependencies;if(D!==null){var te=T.child;D=D.firstContext;e:for(;D!==null;){var ye=D;D=T;for(var Re=0;Re<l.length;Re++)if(ye.context===l[Re]){D.lanes|=d,ye=D.alternate,ye!==null&&(ye.lanes|=d),vc(D.return,d,a),p||(te=null);break e}D=ye.next}}else if(T.tag===18){if(te=T.return,te===null)throw Error(n(341));te.lanes|=d,D=te.alternate,D!==null&&(D.lanes|=d),vc(te,d,a),te=null}else te=T.child;if(te!==null)te.return=T;else for(te=T;te!==null;){if(te===a){te=null;break}if(T=te.sibling,T!==null){T.return=te.return,te=T;break}te=te.return}T=te}}function yA(a,l,d,p){a=null;for(var T=l,D=!1;T!==null;){if(!D){if((T.flags&524288)!==0)D=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var te=T.alternate;if(te===null)throw Error(n(387));if(te=te.memoizedProps,te!==null){var ye=T.type;Qn(T.pendingProps.value,te.value)||(a!==null?a.push(ye):a=[ye])}}else if(T===ve.current){if(te=T.alternate,te===null)throw Error(n(387));te.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(xp):a=[xp])}T=T.return}a!==null&&Ul(l,a,d,p),l.flags|=262144}function Gu(a){for(a=a.firstContext;a!==null;){if(!Qn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function bA(a){xA=a,Fl=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Bi(a){return mf(xA,a)}function $u(a,l){return xA===null&&bA(a),mf(a,l)}function mf(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Fl===null){if(a===null)throw Error(n(308));Fl=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Fl=Fl.next=l;return d}var Dm=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,p){a.push(p)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},Rm=s.unstable_scheduleCallback,Lm=s.unstable_NormalPriority,Ta={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yc(){return{controller:new Dm,data:new Map,refCount:0}}function ou(a){a.refCount--,a.refCount===0&&Rm(Lm,function(){a.controller.abort()})}var bc=null,Yu=0,y=0,_=null;function K(a,l){if(bc===null){var d=bc=[];Yu=0,y=ry(),_={status:"pending",value:void 0,then:function(p){d.push(p)}}}return Yu++,l.then(q,q),l}function q(){if(--Yu===0&&bc!==null){_!==null&&(_.status="fulfilled");var a=bc;bc=null,y=0,_=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function de(a,l){var d=[],p={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){p.status="fulfilled",p.value=l;for(var T=0;T<d.length;T++)(0,d[T])(l)},function(T){for(p.status="rejected",p.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),p}var fe=oe.S;oe.S=function(a,l){gt=ts(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&K(a,l),fe!==null&&fe(a,l)};var xe=ee(null);function be(){var a=xe.current;return a!==null?a:Vr.pooledCache}function je(a,l){l===null?J(xe,xe.current):J(xe,l.pool)}function _e(){var a=be();return a===null?null:{parent:Ta._currentValue,pool:a}}var Oe=Error(n(460)),qe=Error(n(474)),Ie=Error(n(542)),He={then:function(){}};function Ve(a){return a=a.status,a==="fulfilled"||a==="rejected"}function pt(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(fa,fa),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,kt(a),a;default:if(typeof l.status=="string")l.then(fa,fa);else{if(a=Vr,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(p){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=p}},function(p){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,kt(a),a}throw ft=l,Oe}}function We(a){try{var l=a._init;return l(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(ft=d,Oe):d}}var ft=null;function bt(){if(ft===null)throw Error(n(459));var a=ft;return ft=null,a}function kt(a){if(a===Oe||a===Ie)throw Error(n(483))}var Nt=null,js=0;function hs(a){var l=js;return js+=1,Nt===null&&(Nt=[]),pt(Nt,a,l)}function nn(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function vs(a,l){throw l.$$typeof===x?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function Un(a){function l(Ge,ke){if(a){var et=Ge.deletions;et===null?(Ge.deletions=[ke],Ge.flags|=16):et.push(ke)}}function d(Ge,ke){if(!a)return null;for(;ke!==null;)l(Ge,ke),ke=ke.sibling;return null}function p(Ge){for(var ke=new Map;Ge!==null;)Ge.key!==null?ke.set(Ge.key,Ge):ke.set(Ge.index,Ge),Ge=Ge.sibling;return ke}function T(Ge,ke){return Ge=ko(Ge,ke),Ge.index=0,Ge.sibling=null,Ge}function D(Ge,ke,et){return Ge.index=et,a?(et=Ge.alternate,et!==null?(et=et.index,et<ke?(Ge.flags|=67108866,ke):et):(Ge.flags|=67108866,ke)):(Ge.flags|=1048576,ke)}function te(Ge){return a&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function ye(Ge,ke,et,Bt){return ke===null||ke.tag!==6?(ke=au(et,Ge.mode,Bt),ke.return=Ge,ke):(ke=T(ke,et),ke.return=Ge,ke)}function Re(Ge,ke,et,Bt){var $s=et.type;return $s===I?yt(Ge,ke,et.props.children,Bt,et.key):ke!==null&&(ke.elementType===$s||typeof $s=="object"&&$s!==null&&$s.$$typeof===U&&We($s)===ke.type)?(ke=T(ke,et.props),nn(ke,et),ke.return=Ge,ke):(ke=Xl(et.type,et.key,et.props,null,Ge.mode,Bt),nn(ke,et),ke.return=Ge,ke)}function tt(Ge,ke,et,Bt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==et.containerInfo||ke.stateNode.implementation!==et.implementation?(ke=gc(et,Ge.mode,Bt),ke.return=Ge,ke):(ke=T(ke,et.children||[]),ke.return=Ge,ke)}function yt(Ge,ke,et,Bt,$s){return ke===null||ke.tag!==7?(ke=fA(et,Ge.mode,Bt,$s),ke.return=Ge,ke):(ke=T(ke,et),ke.return=Ge,ke)}function Tt(Ge,ke,et){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ke=au(""+ke,Ge.mode,et),ke.return=Ge,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:return et=Xl(ke.type,ke.key,ke.props,null,Ge.mode,et),nn(et,ke),et.return=Ge,et;case b:return ke=gc(ke,Ge.mode,et),ke.return=Ge,ke;case U:return ke=We(ke),Tt(Ge,ke,et)}if(ue(ke)||V(ke))return ke=fA(ke,Ge.mode,et,null),ke.return=Ge,ke;if(typeof ke.then=="function")return Tt(Ge,hs(ke),et);if(ke.$$typeof===F)return Tt(Ge,$u(Ge,ke),et);vs(Ge,ke)}return null}function rt(Ge,ke,et,Bt){var $s=ke!==null?ke.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return $s!==null?null:ye(Ge,ke,""+et,Bt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case g:return et.key===$s?Re(Ge,ke,et,Bt):null;case b:return et.key===$s?tt(Ge,ke,et,Bt):null;case U:return et=We(et),rt(Ge,ke,et,Bt)}if(ue(et)||V(et))return $s!==null?null:yt(Ge,ke,et,Bt,null);if(typeof et.then=="function")return rt(Ge,ke,hs(et),Bt);if(et.$$typeof===F)return rt(Ge,ke,$u(Ge,et),Bt);vs(Ge,et)}return null}function ct(Ge,ke,et,Bt,$s){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number"||typeof Bt=="bigint")return Ge=Ge.get(et)||null,ye(ke,Ge,""+Bt,$s);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case g:return Ge=Ge.get(Bt.key===null?et:Bt.key)||null,Re(ke,Ge,Bt,$s);case b:return Ge=Ge.get(Bt.key===null?et:Bt.key)||null,tt(ke,Ge,Bt,$s);case U:return Bt=We(Bt),ct(Ge,ke,et,Bt,$s)}if(ue(Bt)||V(Bt))return Ge=Ge.get(et)||null,yt(ke,Ge,Bt,$s,null);if(typeof Bt.then=="function")return ct(Ge,ke,et,hs(Bt),$s);if(Bt.$$typeof===F)return ct(Ge,ke,et,$u(ke,Bt),$s);vs(ke,Bt)}return null}function Ss(Ge,ke,et,Bt){for(var $s=null,yr=null,_s=ke,_n=ke=0,Zn=null;_s!==null&&_n<et.length;_n++){_s.index>_n?(Zn=_s,_s=null):Zn=_s.sibling;var br=rt(Ge,_s,et[_n],Bt);if(br===null){_s===null&&(_s=Zn);break}a&&_s&&br.alternate===null&&l(Ge,_s),ke=D(br,ke,_n),yr===null?$s=br:yr.sibling=br,yr=br,_s=Zn}if(_n===et.length)return d(Ge,_s),Rn&&yo(Ge,_n),$s;if(_s===null){for(;_n<et.length;_n++)_s=Tt(Ge,et[_n],Bt),_s!==null&&(ke=D(_s,ke,_n),yr===null?$s=_s:yr.sibling=_s,yr=_s);return Rn&&yo(Ge,_n),$s}for(_s=p(_s);_n<et.length;_n++)Zn=ct(_s,Ge,_n,et[_n],Bt),Zn!==null&&(a&&Zn.alternate!==null&&_s.delete(Zn.key===null?_n:Zn.key),ke=D(Zn,ke,_n),yr===null?$s=Zn:yr.sibling=Zn,yr=Zn);return a&&_s.forEach(function(gd){return l(Ge,gd)}),Rn&&yo(Ge,_n),$s}function tn(Ge,ke,et,Bt){if(et==null)throw Error(n(151));for(var $s=null,yr=null,_s=ke,_n=ke=0,Zn=null,br=et.next();_s!==null&&!br.done;_n++,br=et.next()){_s.index>_n?(Zn=_s,_s=null):Zn=_s.sibling;var gd=rt(Ge,_s,br.value,Bt);if(gd===null){_s===null&&(_s=Zn);break}a&&_s&&gd.alternate===null&&l(Ge,_s),ke=D(gd,ke,_n),yr===null?$s=gd:yr.sibling=gd,yr=gd,_s=Zn}if(br.done)return d(Ge,_s),Rn&&yo(Ge,_n),$s;if(_s===null){for(;!br.done;_n++,br=et.next())br=Tt(Ge,br.value,Bt),br!==null&&(ke=D(br,ke,_n),yr===null?$s=br:yr.sibling=br,yr=br);return Rn&&yo(Ge,_n),$s}for(_s=p(_s);!br.done;_n++,br=et.next())br=ct(_s,Ge,_n,br.value,Bt),br!==null&&(a&&br.alternate!==null&&_s.delete(br.key===null?_n:br.key),ke=D(br,ke,_n),yr===null?$s=br:yr.sibling=br,yr=br);return a&&_s.forEach(function(l6){return l(Ge,l6)}),Rn&&yo(Ge,_n),$s}function Zr(Ge,ke,et,Bt){if(typeof et=="object"&&et!==null&&et.type===I&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case g:e:{for(var $s=et.key;ke!==null;){if(ke.key===$s){if($s=et.type,$s===I){if(ke.tag===7){d(Ge,ke.sibling),Bt=T(ke,et.props.children),Bt.return=Ge,Ge=Bt;break e}}else if(ke.elementType===$s||typeof $s=="object"&&$s!==null&&$s.$$typeof===U&&We($s)===ke.type){d(Ge,ke.sibling),Bt=T(ke,et.props),nn(Bt,et),Bt.return=Ge,Ge=Bt;break e}d(Ge,ke);break}else l(Ge,ke);ke=ke.sibling}et.type===I?(Bt=fA(et.props.children,Ge.mode,Bt,et.key),Bt.return=Ge,Ge=Bt):(Bt=Xl(et.type,et.key,et.props,null,Ge.mode,Bt),nn(Bt,et),Bt.return=Ge,Ge=Bt)}return te(Ge);case b:e:{for($s=et.key;ke!==null;){if(ke.key===$s)if(ke.tag===4&&ke.stateNode.containerInfo===et.containerInfo&&ke.stateNode.implementation===et.implementation){d(Ge,ke.sibling),Bt=T(ke,et.children||[]),Bt.return=Ge,Ge=Bt;break e}else{d(Ge,ke);break}else l(Ge,ke);ke=ke.sibling}Bt=gc(et,Ge.mode,Bt),Bt.return=Ge,Ge=Bt}return te(Ge);case U:return et=We(et),Zr(Ge,ke,et,Bt)}if(ue(et))return Ss(Ge,ke,et,Bt);if(V(et)){if($s=V(et),typeof $s!="function")throw Error(n(150));return et=$s.call(et),tn(Ge,ke,et,Bt)}if(typeof et.then=="function")return Zr(Ge,ke,hs(et),Bt);if(et.$$typeof===F)return Zr(Ge,ke,$u(Ge,et),Bt);vs(Ge,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,ke!==null&&ke.tag===6?(d(Ge,ke.sibling),Bt=T(ke,et),Bt.return=Ge,Ge=Bt):(d(Ge,ke),Bt=au(et,Ge.mode,Bt),Bt.return=Ge,Ge=Bt),te(Ge)):d(Ge,ke)}return function(Ge,ke,et,Bt){try{js=0;var $s=Zr(Ge,ke,et,Bt);return Nt=null,$s}catch(_s){if(_s===Oe||_s===Ie)throw _s;var yr=Qi(29,_s,null,Ge.mode);return yr.lanes=Bt,yr.return=Ge,yr}finally{}}}var Mr=Un(!0),un=Un(!1),At=!1;function es(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ra(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Vs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ws(a,l,d){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(gr&2)!==0){var T=p.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),p.pending=l,l=Li(a),nu(a,null,d),l}return VA(a,p,l,d),Li(a)}function fr(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,dr(a,d)}}function Ha(a,l){var d=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var T=null,D=null;if(d=d.firstBaseUpdate,d!==null){do{var te={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};D===null?T=D=te:D=D.next=te,d=d.next}while(d!==null);D===null?T=D=l:D=D.next=l}else T=D=l;d={baseState:p.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:p.shared,callbacks:p.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var Ia=!1;function mr(){if(Ia){var a=_;if(a!==null)throw a}}function Va(a,l,d,p){Ia=!1;var T=a.updateQueue;At=!1;var D=T.firstBaseUpdate,te=T.lastBaseUpdate,ye=T.shared.pending;if(ye!==null){T.shared.pending=null;var Re=ye,tt=Re.next;Re.next=null,te===null?D=tt:te.next=tt,te=Re;var yt=a.alternate;yt!==null&&(yt=yt.updateQueue,ye=yt.lastBaseUpdate,ye!==te&&(ye===null?yt.firstBaseUpdate=tt:ye.next=tt,yt.lastBaseUpdate=Re))}if(D!==null){var Tt=T.baseState;te=0,yt=tt=Re=null,ye=D;do{var rt=ye.lane&-536870913,ct=rt!==ye.lane;if(ct?(kn&rt)===rt:(p&rt)===rt){rt!==0&&rt===y&&(Ia=!0),yt!==null&&(yt=yt.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Ss=a,tn=ye;rt=l;var Zr=d;switch(tn.tag){case 1:if(Ss=tn.payload,typeof Ss=="function"){Tt=Ss.call(Zr,Tt,rt);break e}Tt=Ss;break e;case 3:Ss.flags=Ss.flags&-65537|128;case 0:if(Ss=tn.payload,rt=typeof Ss=="function"?Ss.call(Zr,Tt,rt):Ss,rt==null)break e;Tt=m({},Tt,rt);break e;case 2:At=!0}}rt=ye.callback,rt!==null&&(a.flags|=64,ct&&(a.flags|=8192),ct=T.callbacks,ct===null?T.callbacks=[rt]:ct.push(rt))}else ct={lane:rt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},yt===null?(tt=yt=ct,Re=Tt):yt=yt.next=ct,te|=rt;if(ye=ye.next,ye===null){if(ye=T.shared.pending,ye===null)break;ct=ye,ye=ct.next,ct.next=null,T.lastBaseUpdate=ct,T.shared.pending=null}}while(!0);yt===null&&(Re=Tt),T.baseState=Re,T.firstBaseUpdate=tt,T.lastBaseUpdate=yt,D===null&&(T.shared.lanes=0),B|=te,a.lanes=te,a.memoizedState=Tt}}function Oi(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function Ka(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Oi(d[a],l)}var ln=ee(null),On=ee(0);function Hr(a,l){a=v,J(On,a),J(ln,l),v=a|l.baseLanes}function or(){J(On,v),J(ln,ln.current)}function za(){v=On.current,M(ln),M(On)}var aa=ee(null),Pn=null;function _a(a){var l=a.alternate;J(Vn,Vn.current&1),J(aa,a),Pn===null&&(l===null||ln.current!==null||l.memoizedState!==null)&&(Pn=a)}function pr(a){J(Vn,Vn.current),J(aa,a),Pn===null&&(Pn=a)}function Ga(a){a.tag===22?(J(Vn,Vn.current),J(aa,a),Pn===null&&(Pn=a)):$a()}function $a(){J(Vn,Vn.current),J(aa,aa.current)}function Br(a){M(aa),Pn===a&&(Pn=null),M(Vn)}var Vn=ee(0);function Pi(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||py(d)||gy(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ga=0,Qs=null,Hs=null,qn=null,uo=!1,bo=!1,no=!1,ia=0,wA=0,Dl=null,wc=0;function Sr(){throw Error(n(321))}function Wu(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Qn(a[d],l[d]))return!1;return!0}function Ah(a,l,d,p,T,D){return ga=D,Qs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,oe.H=a===null||a.memoizedState===null?t0:jf,no=!1,D=d(p,T),no=!1,bo&&(D=pl(l,d,p,T)),lu(a),D}function lu(a){oe.H=xh;var l=Hs!==null&&Hs.next!==null;if(ga=0,qn=Hs=Qs=null,uo=!1,wA=0,Dl=null,l)throw Error(n(300));a===null||oa||(a=a.dependencies,a!==null&&Gu(a)&&(oa=!0))}function pl(a,l,d,p){Qs=a;var T=0;do{if(bo&&(Dl=null),wA=0,bo=!1,25<=T)throw Error(n(301));if(T+=1,qn=Hs=null,a.updateQueue!=null){var D=a.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}oe.H=Bf,D=l(d,p)}while(bo);return D}function ch(){var a=oe.H,l=a.useState()[0];return l=typeof l.then=="function"?jA(l):l,a=a.useState()[0],(Hs!==null?Hs.memoizedState:null)!==a&&(Qs.flags|=1024),l}function Xu(){var a=ia!==0;return ia=0,a}function Ju(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function Au(a){if(uo){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}uo=!1}ga=0,qn=Hs=Qs=null,bo=!1,wA=ia=0,Dl=null}function ei(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?Qs.memoizedState=qn=a:qn=qn.next=a,qn}function Xr(){if(Hs===null){var a=Qs.alternate;a=a!==null?a.memoizedState:null}else a=Hs.next;var l=qn===null?Qs.memoizedState:qn.next;if(l!==null)qn=l,Hs=a;else{if(a===null)throw Qs.alternate===null?Error(n(467)):Error(n(310));Hs=a,a={memoizedState:Hs.memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},qn===null?Qs.memoizedState=qn=a:qn=qn.next=a}return qn}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jA(a){var l=wA;return wA+=1,Dl===null&&(Dl=[]),a=pt(Dl,a,l),l=Qs,(qn===null?l.memoizedState:qn.next)===null&&(l=l.alternate,oe.H=l===null||l.memoizedState===null?t0:jf),a}function jc(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return jA(a);if(a.$$typeof===F)return Bi(a)}throw Error(n(438,String(a)))}function ci(a){var l=null,d=Qs.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var p=Qs.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=cu(),Qs.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),p=0;p<a;p++)d[p]=$;return l.index++,d}function Go(a,l){return typeof l=="function"?l(a):l}function qu(a){var l=Xr();return Bc(l,Hs,a)}function Bc(a,l,d){var p=a.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=d;var T=a.baseQueue,D=p.pending;if(D!==null){if(T!==null){var te=T.next;T.next=D.next,D.next=te}l.baseQueue=T=D,p.pending=null}if(D=a.baseState,T===null)a.memoizedState=D;else{l=T.next;var ye=te=null,Re=null,tt=l,yt=!1;do{var Tt=tt.lane&-536870913;if(Tt!==tt.lane?(kn&Tt)===Tt:(ga&Tt)===Tt){var rt=tt.revertLane;if(rt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),Tt===y&&(yt=!0);else if((ga&rt)===rt){tt=tt.next,rt===y&&(yt=!0);continue}else Tt={lane:0,revertLane:tt.revertLane,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},Re===null?(ye=Re=Tt,te=D):Re=Re.next=Tt,Qs.lanes|=rt,B|=rt;Tt=tt.action,no&&d(D,Tt),D=tt.hasEagerState?tt.eagerState:d(D,Tt)}else rt={lane:Tt,revertLane:tt.revertLane,gesture:tt.gesture,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},Re===null?(ye=Re=rt,te=D):Re=Re.next=rt,Qs.lanes|=Tt,B|=Tt;tt=tt.next}while(tt!==null&&tt!==l);if(Re===null?te=D:Re.next=ye,!Qn(D,a.memoizedState)&&(oa=!0,yt&&(d=_,d!==null)))throw d;a.memoizedState=D,a.baseState=te,a.baseQueue=Re,p.lastRenderedState=D}return T===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function Zu(a){var l=Xr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var p=d.dispatch,T=d.pending,D=l.memoizedState;if(T!==null){d.pending=null;var te=T=T.next;do D=a(D,te.action),te=te.next;while(te!==T);Qn(D,l.memoizedState)||(oa=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),d.lastRenderedState=D}return[D,p]}function ed(a,l,d){var p=Qs,T=Xr(),D=Rn;if(D){if(d===void 0)throw Error(n(407));d=d()}else d=l();var te=!Qn((Hs||T).memoizedState,d);if(te&&(T.memoizedState=d,oa=!0),T=T.queue,vf(dh.bind(null,p,T,a),[a]),T.getSnapshot!==l||te||qn!==null&&qn.memoizedState.tag&1){if(p.flags|=2048,YA(9,{destroy:void 0},uh.bind(null,p,T,d,l),null),Vr===null)throw Error(n(349));D||(ga&127)!==0||ql(p,l,d)}return d}function ql(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Qs.updateQueue,l===null?(l=cu(),Qs.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function uh(a,l,d,p){l.value=d,l.getSnapshot=p,pf(l)&&hh(a)}function dh(a,l,d){return d(function(){pf(l)&&hh(a)})}function pf(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Qn(a,d)}catch{return!0}}function hh(a){var l=Il(a,2);l!==null&&Kr(l,a,2)}function Zl(a){var l=ei();if(typeof a=="function"){var d=a;if(a=d(),no){lt(!0);try{d()}finally{lt(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:a},l}function gf(a,l,d,p){return a.baseState=d,Bc(a,Hs,typeof p=="function"?p:Go)}function td(a,l,d,p,T){if(uu(a))throw Error(n(485));if(a=l.action,a!==null){var D={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){D.listeners.push(te)}};oe.T!==null?d(!0):D.isTransition=!1,p(D),d=l.pending,d===null?(D.next=l.pending=D,fh(l,D)):(D.next=d.next,l.pending=d.next=D)}}function fh(a,l){var d=l.action,p=l.payload,T=a.state;if(l.isTransition){var D=oe.T,te={};oe.T=te;try{var ye=d(T,p),Re=oe.S;Re!==null&&Re(te,ye),ti(a,l,ye)}catch(tt){$A(a,l,tt)}finally{D!==null&&te.types!==null&&(D.types=te.types),oe.T=D}}else try{D=d(T,p),ti(a,l,D)}catch(tt){$A(a,l,tt)}}function ti(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){Sc(a,l,p)},function(p){return $A(a,l,p)}):Sc(a,l,d)}function Sc(a,l,d){l.status="fulfilled",l.value=d,sd(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,fh(a,d)))}function $A(a,l,d){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=d,sd(l),l=l.next;while(l!==p)}a.action=null}function sd(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Cc(a,l){return l}function $o(a,l){if(Rn){var d=Vr.formState;if(d!==null){e:{var p=Qs;if(Rn){if(kr){t:{for(var T=kr,D=pa;T.nodeType!==8;){if(!D){T=null;break t}if(T=NA(T.nextSibling),T===null){T=null;break t}}D=T.data,T=D==="F!"||D==="F"?T:null}if(T){kr=NA(T.nextSibling),p=T.data==="F!";break e}}gA(p)}p=!1}p&&(l=d[0])}}return d=ei(),d.memoizedState=d.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:l},d.queue=p,d=zm.bind(null,Qs,p),p.dispatch=d,p=Zl(!1),D=gh.bind(null,Qs,!1,p.queue),p=ei(),T={state:l,dispatch:null,action:a,pending:null},p.queue=T,d=td.bind(null,Qs,T,D,d),T.dispatch=d,p.memoizedState=a,[l,d,!1]}function eA(a){var l=Xr();return tA(l,Hs,a)}function tA(a,l,d){if(l=Bc(a,l,Cc)[0],a=qu(Go)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=jA(l)}catch(te){throw te===Oe?Ie:te}else p=l;l=Xr();var T=l.queue,D=T.dispatch;return d!==l.memoizedState&&(Qs.flags|=2048,YA(9,{destroy:void 0},nd.bind(null,T,d),null)),[p,D,a]}function nd(a,l){a.action=l}function rd(a){var l=Xr(),d=Hs;if(d!==null)return tA(l,d,a);Xr(),l=l.memoizedState,d=Xr();var p=d.queue.dispatch;return d.memoizedState=a,[l,p,!1]}function YA(a,l,d,p){return a={tag:a,create:d,deps:p,inst:l,next:null},l=Qs.updateQueue,l===null&&(l=cu(),Qs.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(p=d.next,d.next=a,a.next=p,l.lastEffect=a),a}function xf(){return Xr().memoizedState}function Nc(a,l,d,p){var T=ei();Qs.flags|=a,T.memoizedState=YA(1|l,{destroy:void 0},d,p===void 0?null:p)}function Ec(a,l,d,p){var T=Xr();p=p===void 0?null:p;var D=T.memoizedState.inst;Hs!==null&&p!==null&&Wu(p,Hs.memoizedState.deps)?T.memoizedState=YA(l,D,d,p):(Qs.flags|=a,T.memoizedState=YA(1|l,D,d,p))}function Qm(a,l){Nc(8390656,8,a,l)}function vf(a,l){Ec(2048,8,a,l)}function $g(a){Qs.flags|=4;var l=Qs.updateQueue;if(l===null)l=cu(),Qs.updateQueue=l,l.events=[a];else{var d=l.events;d===null?l.events=[a]:d.push(a)}}function Om(a){var l=Xr().memoizedState;return $g({ref:l,nextImpl:a}),function(){if((gr&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function yf(a,l){return Ec(4,2,a,l)}function Yg(a,l){return Ec(4,4,a,l)}function Wg(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Xg(a,l,d){d=d!=null?d.concat([a]):null,Ec(4,4,Wg.bind(null,l,a),d)}function Pm(){}function mh(a,l){var d=Xr();l=l===void 0?null:l;var p=d.memoizedState;return l!==null&&Wu(l,p[1])?p[0]:(d.memoizedState=[a,l],a)}function ph(a,l){var d=Xr();l=l===void 0?null:l;var p=d.memoizedState;if(l!==null&&Wu(l,p[1]))return p[0];if(p=a(),no){lt(!0);try{a()}finally{lt(!1)}}return d.memoizedState=[p,l],p}function km(a,l,d){return d===void 0||(ga&1073741824)!==0&&(kn&261930)===0?a.memoizedState=l:(a.memoizedState=d,a=si(),Qs.lanes|=a,B|=a,d)}function Mm(a,l,d,p){return Qn(d,l)?d:ln.current!==null?(a=km(a,d,p),Qn(a,l)||(oa=!0),a):(ga&42)===0||(ga&1073741824)!==0&&(kn&261930)===0?(oa=!0,a.memoizedState=d):(a=si(),Qs.lanes|=a,B|=a,l)}function bf(a,l,d,p,T){var D=X.p;X.p=D!==0&&8>D?D:8;var te=oe.T,ye={};oe.T=ye,gh(a,!1,l,d);try{var Re=T(),tt=oe.S;if(tt!==null&&tt(ye,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var yt=de(Re,p);BA(a,l,yt,Ds(a))}else BA(a,l,p,Ds(a))}catch(Tt){BA(a,l,{then:function(){},status:"rejected",reason:Tt},Ds())}finally{X.p=D,te!==null&&ye.types!==null&&(te.types=ye.types),oe.T=te}}function Jg(){}function wf(a,l,d,p){if(a.tag!==5)throw Error(n(476));var T=Hm(a).queue;bf(a,T,l,Y,d===null?Jg:function(){return qg(a),d(p)})}function Hm(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:Y},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function qg(a){var l=Hm(a);l.next===null&&(l=a.alternate.memoizedState),BA(a,l.next.queue,{},Ds())}function ad(){return Bi(xp)}function Vm(){return Xr().memoizedState}function Km(){return Xr().memoizedState}function Yv(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=Ds();a=Vs(d);var p=Ws(l,a,d);p!==null&&(Kr(p,l,d),fr(p,l,d)),l={cache:yc()},a.payload=l;return}l=l.return}}function Wv(a,l,d){var p=Ds();d={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},uu(a)?Zg(l,d):(d=ku(a,l,d,p),d!==null&&(Kr(d,a,p),e0(d,l,p)))}function zm(a,l,d){var p=Ds();BA(a,l,d,p)}function BA(a,l,d,p){var T={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(uu(a))Zg(l,T);else{var D=a.alternate;if(a.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var te=l.lastRenderedState,ye=D(te,d);if(T.hasEagerState=!0,T.eagerState=ye,Qn(ye,te))return VA(a,l,T,0),Vr===null&&su(),!1}catch{}finally{}if(d=ku(a,l,T,p),d!==null)return Kr(d,a,p),e0(d,l,p),!0}return!1}function gh(a,l,d,p){if(p={lane:2,revertLane:ry(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},uu(a)){if(l)throw Error(n(479))}else l=ku(a,d,p,2),l!==null&&Kr(l,a,2)}function uu(a){var l=a.alternate;return a===Qs||l!==null&&l===Qs}function Zg(a,l){bo=uo=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function e0(a,l,d){if((d&4194048)!==0){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,dr(a,d)}}var xh={readContext:Bi,use:jc,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useLayoutEffect:Sr,useInsertionEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useSyncExternalStore:Sr,useId:Sr,useHostTransitionStatus:Sr,useFormState:Sr,useActionState:Sr,useOptimistic:Sr,useMemoCache:Sr,useCacheRefresh:Sr};xh.useEffectEvent=Sr;var t0={readContext:Bi,use:jc,useCallback:function(a,l){return ei().memoizedState=[a,l===void 0?null:l],a},useContext:Bi,useEffect:Qm,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,Nc(4194308,4,Wg.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Nc(4194308,4,a,l)},useInsertionEffect:function(a,l){Nc(4,2,a,l)},useMemo:function(a,l){var d=ei();l=l===void 0?null:l;var p=a();if(no){lt(!0);try{a()}finally{lt(!1)}}return d.memoizedState=[p,l],p},useReducer:function(a,l,d){var p=ei();if(d!==void 0){var T=d(l);if(no){lt(!0);try{d(l)}finally{lt(!1)}}}else T=l;return p.memoizedState=p.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},p.queue=a,a=a.dispatch=Wv.bind(null,Qs,a),[p.memoizedState,a]},useRef:function(a){var l=ei();return a={current:a},l.memoizedState=a},useState:function(a){a=Zl(a);var l=a.queue,d=zm.bind(null,Qs,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:Pm,useDeferredValue:function(a,l){var d=ei();return km(d,a,l)},useTransition:function(){var a=Zl(!1);return a=bf.bind(null,Qs,a.queue,!0,!1),ei().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var p=Qs,T=ei();if(Rn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Vr===null)throw Error(n(349));(kn&127)!==0||ql(p,l,d)}T.memoizedState=d;var D={value:d,getSnapshot:l};return T.queue=D,Qm(dh.bind(null,p,D,a),[a]),p.flags|=2048,YA(9,{destroy:void 0},uh.bind(null,p,D,d,l),null),d},useId:function(){var a=ei(),l=Vr.identifierPrefix;if(Rn){var d=to,p=Ko;d=(p&~(1<<32-Ot(p)-1)).toString(32)+d,l="_"+l+"R_"+d,d=ia++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=wc++,l="_"+l+"r_"+d.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:ad,useFormState:$o,useActionState:$o,useOptimistic:function(a){var l=ei();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=gh.bind(null,Qs,!0,d),d.dispatch=l,[a,l]},useMemoCache:ci,useCacheRefresh:function(){return ei().memoizedState=Yv.bind(null,Qs)},useEffectEvent:function(a){var l=ei(),d={impl:a};return l.memoizedState=d,function(){if((gr&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}},jf={readContext:Bi,use:jc,useCallback:mh,useContext:Bi,useEffect:vf,useImperativeHandle:Xg,useInsertionEffect:yf,useLayoutEffect:Yg,useMemo:ph,useReducer:qu,useRef:xf,useState:function(){return qu(Go)},useDebugValue:Pm,useDeferredValue:function(a,l){var d=Xr();return Mm(d,Hs.memoizedState,a,l)},useTransition:function(){var a=qu(Go)[0],l=Xr().memoizedState;return[typeof a=="boolean"?a:jA(a),l]},useSyncExternalStore:ed,useId:Vm,useHostTransitionStatus:ad,useFormState:eA,useActionState:eA,useOptimistic:function(a,l){var d=Xr();return gf(d,Hs,a,l)},useMemoCache:ci,useCacheRefresh:Km};jf.useEffectEvent=Om;var Bf={readContext:Bi,use:jc,useCallback:mh,useContext:Bi,useEffect:vf,useImperativeHandle:Xg,useInsertionEffect:yf,useLayoutEffect:Yg,useMemo:ph,useReducer:Zu,useRef:xf,useState:function(){return Zu(Go)},useDebugValue:Pm,useDeferredValue:function(a,l){var d=Xr();return Hs===null?km(d,a,l):Mm(d,Hs.memoizedState,a,l)},useTransition:function(){var a=Zu(Go)[0],l=Xr().memoizedState;return[typeof a=="boolean"?a:jA(a),l]},useSyncExternalStore:ed,useId:Vm,useHostTransitionStatus:ad,useFormState:rd,useActionState:rd,useOptimistic:function(a,l){var d=Xr();return Hs!==null?gf(d,Hs,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:ci,useCacheRefresh:Km};Bf.useEffectEvent=Om;function Sf(a,l,d,p){l=a.memoizedState,d=d(p,l),d=d==null?l:m({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Cf={enqueueSetState:function(a,l,d){a=a._reactInternals;var p=Ds(),T=Vs(p);T.payload=l,d!=null&&(T.callback=d),l=Ws(a,T,p),l!==null&&(Kr(l,a,p),fr(l,a,p))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var p=Ds(),T=Vs(p);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=Ws(a,T,p),l!==null&&(Kr(l,a,p),fr(l,a,p))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Ds(),p=Vs(d);p.tag=2,l!=null&&(p.callback=l),l=Ws(a,p,d),l!==null&&(Kr(l,a,d),fr(l,a,d))}};function Nf(a,l,d,p,T,D,te){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,D,te):l.prototype&&l.prototype.isPureReactComponent?!Di(d,p)||!Di(T,D):!0}function Gm(a,l,d,p){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==a&&Cf.enqueueReplaceState(l,l.state,null)}function Tc(a,l){var d=l;if("ref"in l){d={};for(var p in l)p!=="ref"&&(d[p]=l[p])}if(a=a.defaultProps){d===l&&(d=m({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}function s0(a){pc(a)}function vh(a){console.error(a)}function yh(a){pc(a)}function bh(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function $m(a,l,d){try{var p=a.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Ym(a,l,d){return d=Vs(d),d.tag=3,d.payload={element:null},d.callback=function(){bh(a,l)},d}function Wm(a){return a=Vs(a),a.tag=3,a}function Xm(a,l,d,p){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var D=p.value;a.payload=function(){return T(D)},a.callback=function(){$m(l,d,p)}}var te=d.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(a.callback=function(){$m(l,d,p),typeof T!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var ye=p.stack;this.componentDidCatch(p.value,{componentStack:ye!==null?ye:""})})}function Xv(a,l,d,p,T){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=d.alternate,l!==null&&yA(l,d,T,!0),d=aa.current,d!==null){switch(d.tag){case 31:case 13:return Pn===null?kl():d.alternate===null&&S===0&&(S=3),d.flags&=-257,d.flags|=65536,d.lanes=T,p===He?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([p]):l.add(p),ty(a,p,T)),!1;case 22:return d.flags|=65536,p===He?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([p]):d.add(p)),ty(a,p,T)),!1}throw Error(n(435,d.tag))}return ty(a,p,T),kl(),!1}if(Rn)return l=aa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,p!==co&&(a=Error(n(422),{cause:p}),Jl(Mo(a,d)))):(p!==co&&(l=Error(n(423),{cause:p}),Jl(Mo(l,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,p=Mo(p,d),T=Ym(a.stateNode,p,T),Ha(a,T),S!==4&&(S=2)),!1;var D=Error(n(520),{cause:p});if(D=Mo(D,d),Ne===null?Ne=[D]:Ne.push(D),S!==4&&(S=2),l===null)return!0;p=Mo(p,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=Ym(d.stateNode,p,a),Ha(d,a),!1;case 1:if(l=d.type,D=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(ns===null||!ns.has(D))))return d.flags|=65536,T&=-T,d.lanes|=T,T=Wm(T),Xm(T,a,d,p),Ha(d,T),!1}d=d.return}while(d!==null);return!1}var Jm=Error(n(461)),oa=!1;function ki(a,l,d,p){l.child=a===null?un(l,null,d,p):Mr(l,a.child,d,p)}function Ya(a,l,d,p,T){d=d.render;var D=l.ref;if("ref"in p){var te={};for(var ye in p)ye!=="ref"&&(te[ye]=p[ye])}else te=p;return bA(l),p=Ah(a,l,d,te,D,T),ye=Xu(),a!==null&&!oa?(Ju(a,l,T),XA(a,l,T)):(Rn&&ye&&oh(l),l.flags|=1,ki(a,l,p,T),l.child)}function Ic(a,l,d,p,T){if(a===null){var D=d.type;return typeof D=="function"&&!Wl(D)&&D.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=D,du(a,l,D,p,T)):(a=Xl(d.type,null,p,l,l.mode,T),a.ref=l.ref,a.return=l,l.child=a)}if(D=a.child,!ap(a,T)){var te=D.memoizedProps;if(d=d.compare,d=d!==null?d:Di,d(te,p)&&a.ref===l.ref)return XA(a,l,T)}return l.flags|=1,a=ko(D,p),a.ref=l.ref,a.return=l,l.child=a}function du(a,l,d,p,T){if(a!==null){var D=a.memoizedProps;if(Di(D,p)&&a.ref===l.ref)if(oa=!1,l.pendingProps=p=D,ap(a,T))(a.flags&131072)!==0&&(oa=!0);else return l.lanes=a.lanes,XA(a,l,T)}return jh(a,l,d,p,T)}function WA(a,l,d,p){var T=p.children,D=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(D=D!==null?D.baseLanes|d:d,a!==null){for(p=l.child=a.child,T=0;p!==null;)T=T|p.lanes|p.childLanes,p=p.sibling;p=T&~D}else p=0,l.child=null;return id(a,l,D,d,p)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&je(l,D!==null?D.cachePool:null),D!==null?Hr(l,D):or(),Ga(l);else return p=l.lanes=536870912,id(a,l,D!==null?D.baseLanes|d:d,d,p)}else D!==null?(je(l,D.cachePool),Hr(l,D),$a(),l.memoizedState=null):(a!==null&&je(l,null),or(),$a());return ki(a,l,T,d),l.child}function Rl(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function id(a,l,d,p,T){var D=be();return D=D===null?null:{parent:Ta._currentValue,pool:D},l.memoizedState={baseLanes:d,cachePool:D},a!==null&&je(l,null),or(),Ga(l),a!==null&&yA(a,l,p,!0),l.childLanes=T,null}function Ll(a,l){return l=Ef({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function qm(a,l,d){return Mr(l,a.child,null,d),a=Ll(l,l.pendingProps),a.flags|=2,Br(l),l.memoizedState=null,a}function n0(a,l,d){var p=l.pendingProps,T=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(Rn){if(p.mode==="hidden")return a=Ll(l,p),l.lanes=536870912,Rl(null,a);if(pr(l),(a=kr)?(a=bj(a,pa),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:pA!==null?{id:Ko,overflow:to}:null,retryLane:536870912,hydrationErrors:null},d=Hu(a),d.return=l,l.child=d,wi=l,kr=null)):a=null,a===null)throw gA(l);return l.lanes=536870912,null}return Ll(l,p)}var D=a.memoizedState;if(D!==null){var te=D.dehydrated;if(pr(l),T)if(l.flags&256)l.flags&=-257,l=qm(a,l,d);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(n(558));else if(oa||yA(a,l,d,!1),T=(d&a.childLanes)!==0,oa||T){if(p=Vr,p!==null&&(te=hr(p,d),te!==0&&te!==D.retryLane))throw D.retryLane=te,Il(a,te),Kr(p,a,te),Jm;kl(),l=qm(a,l,d)}else a=D.treeContext,kr=NA(te.nextSibling),wi=l,Rn=!0,so=null,pa=!1,a!==null&&ff(l,a),l=Ll(l,p),l.flags|=4096;return l}return a=ko(a.child,{mode:p.mode,children:p.children}),a.ref=l.ref,l.child=a,a.return=l,a}function wh(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function jh(a,l,d,p,T){return bA(l),d=Ah(a,l,d,p,void 0,T),p=Xu(),a!==null&&!oa?(Ju(a,l,T),XA(a,l,T)):(Rn&&p&&oh(l),l.flags|=1,ki(a,l,d,T),l.child)}function od(a,l,d,p,T,D){return bA(l),l.updateQueue=null,d=pl(l,p,d,T),lu(a),p=Xu(),a!==null&&!oa?(Ju(a,l,D),XA(a,l,D)):(Rn&&p&&oh(l),l.flags|=1,ki(a,l,d,D),l.child)}function Zm(a,l,d,p,T){if(bA(l),l.stateNode===null){var D=bi,te=d.contextType;typeof te=="object"&&te!==null&&(D=Bi(te)),D=new d(p,D),l.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Cf,l.stateNode=D,D._reactInternals=l,D=l.stateNode,D.props=p,D.state=l.memoizedState,D.refs={},es(l),te=d.contextType,D.context=typeof te=="object"&&te!==null?Bi(te):bi,D.state=l.memoizedState,te=d.getDerivedStateFromProps,typeof te=="function"&&(Sf(l,d,te,p),D.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(te=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),te!==D.state&&Cf.enqueueReplaceState(D,D.state,null),Va(l,p,D,T),mr(),D.state=l.memoizedState),typeof D.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(a===null){D=l.stateNode;var ye=l.memoizedProps,Re=Tc(d,ye);D.props=Re;var tt=D.context,yt=d.contextType;te=bi,typeof yt=="object"&&yt!==null&&(te=Bi(yt));var Tt=d.getDerivedStateFromProps;yt=typeof Tt=="function"||typeof D.getSnapshotBeforeUpdate=="function",ye=l.pendingProps!==ye,yt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ye||tt!==te)&&Gm(l,D,p,te),At=!1;var rt=l.memoizedState;D.state=rt,Va(l,p,D,T),mr(),tt=l.memoizedState,ye||rt!==tt||At?(typeof Tt=="function"&&(Sf(l,d,Tt,p),tt=l.memoizedState),(Re=At||Nf(l,d,Re,p,rt,tt,te))?(yt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=tt),D.props=p,D.state=tt,D.context=te,p=Re):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{D=l.stateNode,ra(a,l),te=l.memoizedProps,yt=Tc(d,te),D.props=yt,Tt=l.pendingProps,rt=D.context,tt=d.contextType,Re=bi,typeof tt=="object"&&tt!==null&&(Re=Bi(tt)),ye=d.getDerivedStateFromProps,(tt=typeof ye=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(te!==Tt||rt!==Re)&&Gm(l,D,p,Re),At=!1,rt=l.memoizedState,D.state=rt,Va(l,p,D,T),mr();var ct=l.memoizedState;te!==Tt||rt!==ct||At||a!==null&&a.dependencies!==null&&Gu(a.dependencies)?(typeof ye=="function"&&(Sf(l,d,ye,p),ct=l.memoizedState),(yt=At||Nf(l,d,yt,p,rt,ct,Re)||a!==null&&a.dependencies!==null&&Gu(a.dependencies))?(tt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,ct,Re),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,ct,Re)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||te===a.memoizedProps&&rt===a.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||te===a.memoizedProps&&rt===a.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ct),D.props=p,D.state=ct,D.context=Re,p=yt):(typeof D.componentDidUpdate!="function"||te===a.memoizedProps&&rt===a.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||te===a.memoizedProps&&rt===a.memoizedState||(l.flags|=1024),p=!1)}return D=p,wh(a,l),p=(l.flags&128)!==0,D||p?(D=l.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:D.render(),l.flags|=1,a!==null&&p?(l.child=Mr(l,a.child,null,T),l.child=Mr(l,null,d,T)):ki(a,l,d,T),l.memoizedState=D.state,a=l.child):a=XA(a,l,T),a}function ep(a,l,d,p){return GA(),l.flags|=256,ki(a,l,d,p),l.child}var hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(a){return{baseLanes:a,cachePool:_e()}}function sp(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=he),a}function r0(a,l,d){var p=l.pendingProps,T=!1,D=(l.flags&128)!==0,te;if((te=D)||(te=a!==null&&a.memoizedState===null?!1:(Vn.current&2)!==0),te&&(T=!0,l.flags&=-129),te=(l.flags&32)!==0,l.flags&=-33,a===null){if(Rn){if(T?_a(l):$a(),(a=kr)?(a=bj(a,pa),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:pA!==null?{id:Ko,overflow:to}:null,retryLane:536870912,hydrationErrors:null},d=Hu(a),d.return=l,l.child=d,wi=l,kr=null)):a=null,a===null)throw gA(l);return gy(a)?l.lanes=32:l.lanes=536870912,null}var ye=p.children;return p=p.fallback,T?($a(),T=l.mode,ye=Ef({mode:"hidden",children:ye},T),p=fA(p,T,d,null),ye.return=l,p.return=l,ye.sibling=p,l.child=ye,p=l.child,p.memoizedState=tp(d),p.childLanes=sp(a,te,d),l.memoizedState=hu,Rl(null,p)):(_a(l),np(l,ye))}var Re=a.memoizedState;if(Re!==null&&(ye=Re.dehydrated,ye!==null)){if(D)l.flags&256?(_a(l),l.flags&=-257,l=Bh(a,l,d)):l.memoizedState!==null?($a(),l.child=a.child,l.flags|=128,l=null):($a(),ye=p.fallback,T=l.mode,p=Ef({mode:"visible",children:p.children},T),ye=fA(ye,T,d,null),ye.flags|=2,p.return=l,ye.return=l,p.sibling=ye,l.child=p,Mr(l,a.child,null,d),p=l.child,p.memoizedState=tp(d),p.childLanes=sp(a,te,d),l.memoizedState=hu,l=Rl(null,p));else if(_a(l),gy(ye)){if(te=ye.nextSibling&&ye.nextSibling.dataset,te)var tt=te.dgst;te=tt,p=Error(n(419)),p.stack="",p.digest=te,Jl({value:p,source:null,stack:null}),l=Bh(a,l,d)}else if(oa||yA(a,l,d,!1),te=(d&a.childLanes)!==0,oa||te){if(te=Vr,te!==null&&(p=hr(te,d),p!==0&&p!==Re.retryLane))throw Re.retryLane=p,Il(a,p),Kr(te,a,p),Jm;py(ye)||kl(),l=Bh(a,l,d)}else py(ye)?(l.flags|=192,l.child=a.child,l=null):(a=Re.treeContext,kr=NA(ye.nextSibling),wi=l,Rn=!0,so=null,pa=!1,a!==null&&ff(l,a),l=np(l,p.children),l.flags|=4096);return l}return T?($a(),ye=p.fallback,T=l.mode,Re=a.child,tt=Re.sibling,p=ko(Re,{mode:"hidden",children:p.children}),p.subtreeFlags=Re.subtreeFlags&65011712,tt!==null?ye=ko(tt,ye):(ye=fA(ye,T,d,null),ye.flags|=2),ye.return=l,p.return=l,p.sibling=ye,l.child=p,Rl(null,p),p=l.child,ye=a.child.memoizedState,ye===null?ye=tp(d):(T=ye.cachePool,T!==null?(Re=Ta._currentValue,T=T.parent!==Re?{parent:Re,pool:Re}:T):T=_e(),ye={baseLanes:ye.baseLanes|d,cachePool:T}),p.memoizedState=ye,p.childLanes=sp(a,te,d),l.memoizedState=hu,Rl(a.child,p)):(_a(l),d=a.child,a=d.sibling,d=ko(d,{mode:"visible",children:p.children}),d.return=l,d.sibling=null,a!==null&&(te=l.deletions,te===null?(l.deletions=[a],l.flags|=16):te.push(a)),l.child=d,l.memoizedState=null,d)}function np(a,l){return l=Ef({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Ef(a,l){return a=Qi(22,a,null,l),a.lanes=0,a}function Bh(a,l,d){return Mr(l,a.child,null,d),a=np(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function a0(a,l,d){a.lanes|=l;var p=a.alternate;p!==null&&(p.lanes|=l),vc(a.return,l,d)}function rp(a,l,d,p,T,D){var te=a.memoizedState;te===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:T,treeForkCount:D}:(te.isBackwards=l,te.rendering=null,te.renderingStartTime=0,te.last=p,te.tail=d,te.tailMode=T,te.treeForkCount=D)}function i0(a,l,d){var p=l.pendingProps,T=p.revealOrder,D=p.tail;p=p.children;var te=Vn.current,ye=(te&2)!==0;if(ye?(te=te&1|2,l.flags|=128):te&=1,J(Vn,te),ki(a,l,p,d),p=Rn?mA:0,!ye&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&a0(a,d,l);else if(a.tag===19)a0(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(T){case"forwards":for(d=l.child,T=null;d!==null;)a=d.alternate,a!==null&&Pi(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=l.child,l.child=null):(T=d.sibling,d.sibling=null),rp(l,!1,T,d,D,p);break;case"backwards":case"unstable_legacy-backwards":for(d=null,T=l.child,l.child=null;T!==null;){if(a=T.alternate,a!==null&&Pi(a)===null){l.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}rp(l,!0,d,null,D,p);break;case"together":rp(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function XA(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),B|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(yA(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,d=ko(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=ko(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function ap(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Gu(a)))}function ip(a,l,d){switch(l.tag){case 3:Se(l,l.stateNode.containerInfo),vA(l,Ta,a.memoizedState.cache),GA();break;case 27:case 5:Be(l);break;case 4:Se(l,l.stateNode.containerInfo);break;case 10:vA(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,pr(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(_a(l),l.flags|=128,null):(d&l.child.childLanes)!==0?r0(a,l,d):(_a(l),a=XA(a,l,d),a!==null?a.sibling:null);_a(l);break;case 19:var T=(a.flags&128)!==0;if(p=(d&l.childLanes)!==0,p||(yA(a,l,d,!1),p=(d&l.childLanes)!==0),T){if(p)return i0(a,l,d);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),J(Vn,Vn.current),p)break;return null;case 22:return l.lanes=0,WA(a,l,d,l.pendingProps);case 24:vA(l,Ta,a.memoizedState.cache)}return XA(a,l,d)}function Tf(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)oa=!0;else{if(!ap(a,d)&&(l.flags&128)===0)return oa=!1,ip(a,l,d);oa=(a.flags&131072)!==0}else oa=!1,Rn&&(l.flags&1048576)!==0&&hf(l,mA,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(a=We(l.elementType),l.type=a,typeof a=="function")Wl(a)?(p=Tc(a,p),l.tag=1,l=Zm(null,l,a,p,d)):(l.tag=0,l=jh(null,l,a,p,d));else{if(a!=null){var T=a.$$typeof;if(T===L){l.tag=11,l=Ya(null,l,a,p,d);break e}else if(T===Q){l.tag=14,l=Ic(null,l,a,p,d);break e}}throw l=ae(a)||a,Error(n(306,l,""))}}return l;case 0:return jh(a,l,l.type,l.pendingProps,d);case 1:return p=l.type,T=Tc(p,l.pendingProps),Zm(a,l,p,T,d);case 3:e:{if(Se(l,l.stateNode.containerInfo),a===null)throw Error(n(387));p=l.pendingProps;var D=l.memoizedState;T=D.element,ra(a,l),Va(l,p,null,d);var te=l.memoizedState;if(p=te.cache,vA(l,Ta,p),p!==D.cache&&Ul(l,[Ta],d,!0),mr(),p=te.element,D.isDehydrated)if(D={element:p,isDehydrated:!1,cache:te.cache},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){l=ep(a,l,p,d);break e}else if(p!==T){T=Mo(Error(n(424)),l),Jl(T),l=ep(a,l,p,d);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(kr=NA(a.firstChild),wi=l,Rn=!0,so=null,pa=!0,d=un(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(GA(),p===T){l=XA(a,l,d);break e}ki(a,l,p,d)}l=l.child}return l;case 26:return wh(a,l),a===null?(d=Nj(l.type,null,l.pendingProps,null))?l.memoizedState=d:Rn||(d=l.type,a=l.pendingProps,p=N0(ce.current).createElement(d),p[En]=l,p[An]=a,So(p,d,a),zn(p),l.stateNode=p):l.memoizedState=Nj(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Be(l),a===null&&Rn&&(p=l.stateNode=Bj(l.type,l.pendingProps,ce.current),wi=l,pa=!0,T=kr,dd(l.type)?(xy=T,kr=NA(p.firstChild)):kr=T),ki(a,l,l.pendingProps.children,d),wh(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&Rn&&((T=p=kr)&&(p=O_(p,l.type,l.pendingProps,pa),p!==null?(l.stateNode=p,wi=l,kr=NA(p.firstChild),pa=!1,T=!0):T=!1),T||gA(l)),Be(l),T=l.type,D=l.pendingProps,te=a!==null?a.memoizedProps:null,p=D.children,hy(T,D)?p=null:te!==null&&hy(T,te)&&(l.flags|=32),l.memoizedState!==null&&(T=Ah(a,l,ch,null,null,d),xp._currentValue=T),wh(a,l),ki(a,l,p,d),l.child;case 6:return a===null&&Rn&&((a=d=kr)&&(d=P_(d,l.pendingProps,pa),d!==null?(l.stateNode=d,wi=l,kr=null,a=!0):a=!1),a||gA(l)),null;case 13:return r0(a,l,d);case 4:return Se(l,l.stateNode.containerInfo),p=l.pendingProps,a===null?l.child=Mr(l,null,p,d):ki(a,l,p,d),l.child;case 11:return Ya(a,l,l.type,l.pendingProps,d);case 7:return ki(a,l,l.pendingProps,d),l.child;case 8:return ki(a,l,l.pendingProps.children,d),l.child;case 12:return ki(a,l,l.pendingProps.children,d),l.child;case 10:return p=l.pendingProps,vA(l,l.type,p.value),ki(a,l,p.children,d),l.child;case 9:return T=l.type._context,p=l.pendingProps.children,bA(l),T=Bi(T),p=p(T),l.flags|=1,ki(a,l,p,d),l.child;case 14:return Ic(a,l,l.type,l.pendingProps,d);case 15:return du(a,l,l.type,l.pendingProps,d);case 19:return i0(a,l,d);case 31:return n0(a,l,d);case 22:return WA(a,l,d,l.pendingProps);case 24:return bA(l),p=Bi(Ta),a===null?(T=be(),T===null&&(T=Vr,D=yc(),T.pooledCache=D,D.refCount++,D!==null&&(T.pooledCacheLanes|=d),T=D),l.memoizedState={parent:p,cache:T},es(l),vA(l,Ta,T)):((a.lanes&d)!==0&&(ra(a,l),Va(l,null,null,d),mr()),T=a.memoizedState,D=l.memoizedState,T.parent!==p?(T={parent:p,cache:p},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),vA(l,Ta,p)):(p=D.cache,vA(l,Ta,p),p!==T.cache&&Ul(l,[Ta],d,!0))),ki(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function SA(a){a.flags|=4}function op(a,l,d,p,T){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(T&335544128)===T)if(a.stateNode.complete)a.flags|=8192;else if(qA())a.flags|=8192;else throw ft=He,qe}else a.flags&=-16777217}function o0(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Fj(l))if(qA())a.flags|=8192;else throw ft=He,qe}function Sh(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Xs():536870912,a.lanes|=l,Ce|=l)}function Ch(a,l){if(!Rn)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function la(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,p=0;if(l)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,p|=T.subtreeFlags&65011712,p|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,p|=T.subtreeFlags,p|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=p,a.childLanes=d,l}function Jv(a,l,d){var p=l.pendingProps;switch(Ku(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return la(l),null;case 1:return la(l),null;case 3:return d=l.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),zo(Ta),ge(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(ji(l)?SA(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,iu())),la(l),null;case 26:var T=l.type,D=l.memoizedState;return a===null?(SA(l),D!==null?(la(l),o0(l,D)):(la(l),op(l,T,null,p,d))):D?D!==a.memoizedState?(SA(l),la(l),o0(l,D)):(la(l),l.flags&=-16777217):(a=a.memoizedProps,a!==p&&SA(l),la(l),op(l,T,a,p,d)),null;case 27:if(Fe(l),d=ce.current,T=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==p&&SA(l);else{if(!p){if(l.stateNode===null)throw Error(n(166));return la(l),null}a=ie.current,ji(l)?lh(l):(a=Bj(T,p,d),l.stateNode=a,SA(l))}return la(l),null;case 5:if(Fe(l),T=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==p&&SA(l);else{if(!p){if(l.stateNode===null)throw Error(n(166));return la(l),null}if(D=ie.current,ji(l))lh(l);else{var te=N0(ce.current);switch(D){case 1:D=te.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:D=te.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":D=te.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":D=te.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":D=te.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof p.is=="string"?te.createElement("select",{is:p.is}):te.createElement("select"),p.multiple?D.multiple=!0:p.size&&(D.size=p.size);break;default:D=typeof p.is=="string"?te.createElement(T,{is:p.is}):te.createElement(T)}}D[En]=l,D[An]=p;e:for(te=l.child;te!==null;){if(te.tag===5||te.tag===6)D.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===l)break e;for(;te.sibling===null;){if(te.return===null||te.return===l)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}l.stateNode=D;e:switch(So(D,T,p),T){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&SA(l)}}return la(l),op(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,d),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==p&&SA(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(a=ce.current,ji(l)){if(a=l.stateNode,d=l.memoizedProps,p=null,T=wi,T!==null)switch(T.tag){case 27:case 5:p=T.memoizedProps}a[En]=l,a=!!(a.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||hj(a.nodeValue,d)),a||gA(l,!0)}else a=N0(a).createTextNode(p),a[En]=l,l.stateNode=a}return la(l),null;case 31:if(d=l.memoizedState,a===null||a.memoizedState!==null){if(p=ji(l),d!==null){if(a===null){if(!p)throw Error(n(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[En]=l}else GA(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;la(l),a=!1}else d=iu(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return l.flags&256?(Br(l),l):(Br(l),null);if((l.flags&128)!==0)throw Error(n(558))}return la(l),null;case 13:if(p=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=ji(l),p!==null&&p.dehydrated!==null){if(a===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[En]=l}else GA(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;la(l),T=!1}else T=iu(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(Br(l),l):(Br(l),null)}return Br(l),(l.flags&128)!==0?(l.lanes=d,l):(d=p!==null,a=a!==null&&a.memoizedState!==null,d&&(p=l.child,T=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(T=p.alternate.memoizedState.cachePool.pool),D=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(D=p.memoizedState.cachePool.pool),D!==T&&(p.flags|=2048)),d!==a&&d&&(l.child.flags|=8192),Sh(l,l.updateQueue),la(l),null);case 4:return ge(),a===null&&ly(l.stateNode.containerInfo),la(l),null;case 10:return zo(l.type),la(l),null;case 19:if(M(Vn),p=l.memoizedState,p===null)return la(l),null;if(T=(l.flags&128)!==0,D=p.rendering,D===null)if(T)Ch(p,!1);else{if(S!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(D=Pi(a),D!==null){for(l.flags|=128,Ch(p,!1),a=D.updateQueue,l.updateQueue=a,Sh(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)ru(d,a),d=d.sibling;return J(Vn,Vn.current&1|2),Rn&&yo(l,p.treeForkCount),l.child}a=a.sibling}p.tail!==null&&ts()>As&&(l.flags|=128,T=!0,Ch(p,!1),l.lanes=4194304)}else{if(!T)if(a=Pi(D),a!==null){if(l.flags|=128,T=!0,a=a.updateQueue,l.updateQueue=a,Sh(l,a),Ch(p,!0),p.tail===null&&p.tailMode==="hidden"&&!D.alternate&&!Rn)return la(l),null}else 2*ts()-p.renderingStartTime>As&&d!==536870912&&(l.flags|=128,T=!0,Ch(p,!1),l.lanes=4194304);p.isBackwards?(D.sibling=l.child,l.child=D):(a=p.last,a!==null?a.sibling=D:l.child=D,p.last=D)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=ts(),a.sibling=null,d=Vn.current,J(Vn,T?d&1|2:d&1),Rn&&yo(l,p.treeForkCount),a):(la(l),null);case 22:case 23:return Br(l),za(),p=l.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(d&536870912)!==0&&(l.flags&128)===0&&(la(l),l.subtreeFlags&6&&(l.flags|=8192)):la(l),d=l.updateQueue,d!==null&&Sh(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048),a!==null&&M(xe),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),zo(Ta),la(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function qv(a,l){switch(Ku(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return zo(Ta),ge(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Fe(l),null;case 31:if(l.memoizedState!==null){if(Br(l),l.alternate===null)throw Error(n(340));GA()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(Br(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));GA()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return M(Vn),null;case 4:return ge(),null;case 10:return zo(l.type),null;case 22:case 23:return Br(l),za(),a!==null&&M(xe),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return zo(Ta),null;case 25:return null;default:return null}}function l0(a,l){switch(Ku(l),l.tag){case 3:zo(Ta),ge();break;case 26:case 27:case 5:Fe(l);break;case 4:ge();break;case 31:l.memoizedState!==null&&Br(l);break;case 13:Br(l);break;case 19:M(Vn);break;case 10:zo(l.type);break;case 22:case 23:Br(l),za(),a!==null&&M(xe);break;case 24:zo(Ta)}}function fu(a,l){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var T=p.next;d=T;do{if((d.tag&a)===a){p=void 0;var D=d.create,te=d.inst;p=D(),te.destroy=p}d=d.next}while(d!==T)}}catch(ye){zr(l,l.return,ye)}}function _c(a,l,d){try{var p=l.updateQueue,T=p!==null?p.lastEffect:null;if(T!==null){var D=T.next;p=D;do{if((p.tag&a)===a){var te=p.inst,ye=te.destroy;if(ye!==void 0){te.destroy=void 0,T=l;var Re=d,tt=ye;try{tt()}catch(yt){zr(T,Re,yt)}}}p=p.next}while(p!==D)}}catch(yt){zr(l,l.return,yt)}}function If(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{Ka(l,d)}catch(p){zr(a,a.return,p)}}}function A0(a,l,d){d.props=Tc(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(p){zr(a,l,p)}}function is(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof d=="function"?a.refCleanup=d(p):d.current=p}}catch(T){zr(a,l,T)}}function wo(a,l){var d=a.ref,p=a.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(T){zr(a,l,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){zr(a,l,T)}else d.current=null}function Nh(a){var l=a.type,d=a.memoizedProps,p=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(T){zr(a,a.return,T)}}function Yo(a,l,d){try{var p=a.stateNode;F_(p,a.type,d,l),p[An]=l}catch(T){zr(a,a.return,T)}}function c0(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&dd(a.type)||a.tag===4}function Ar(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||c0(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&dd(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Jr(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=fa));else if(p!==4&&(p===27&&dd(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(Jr(a,l,d),a=a.sibling;a!==null;)Jr(a,l,d),a=a.sibling}function mu(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(p!==4&&(p===27&&dd(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(mu(a,l,d),a=a.sibling;a!==null;)mu(a,l,d),a=a.sibling}function u0(a){var l=a.stateNode,d=a.memoizedProps;try{for(var p=a.type,T=l.attributes;T.length;)l.removeAttributeNode(T[0]);So(l,p,d),l[En]=a,l[An]=d}catch(D){zr(a,a.return,D)}}var Ql=!1,ui=!1,ld=!1,d0=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function h0(a,l){if(a=a.containerInfo,uy=D0,a=Nl(a),El(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var T=p.anchorOffset,D=p.focusNode;p=p.focusOffset;try{d.nodeType,D.nodeType}catch{d=null;break e}var te=0,ye=-1,Re=-1,tt=0,yt=0,Tt=a,rt=null;t:for(;;){for(var ct;Tt!==d||T!==0&&Tt.nodeType!==3||(ye=te+T),Tt!==D||p!==0&&Tt.nodeType!==3||(Re=te+p),Tt.nodeType===3&&(te+=Tt.nodeValue.length),(ct=Tt.firstChild)!==null;)rt=Tt,Tt=ct;for(;;){if(Tt===a)break t;if(rt===d&&++tt===T&&(ye=te),rt===D&&++yt===p&&(Re=te),(ct=Tt.nextSibling)!==null)break;Tt=rt,rt=Tt.parentNode}Tt=ct}d=ye===-1||Re===-1?null:{start:ye,end:Re}}else d=null}d=d||{start:0,end:0}}else d=null;for(dy={focusedElem:a,selectionRange:d},D0=!1,Mi=l;Mi!==null;)if(l=Mi,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Mi=a;else for(;Mi!==null;){switch(l=Mi,D=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)T=a[d],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&D!==null){a=void 0,d=l,T=D.memoizedProps,D=D.memoizedState,p=d.stateNode;try{var Ss=Tc(d.type,T);a=p.getSnapshotBeforeUpdate(Ss,D),p.__reactInternalSnapshotBeforeUpdate=a}catch(tn){zr(d,d.return,tn)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)my(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":my(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,Mi=a;break}Mi=l.return}}function f0(a,l,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:Ol(a,d),p&4&&fu(5,d);break;case 1:if(Ol(a,d),p&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(te){zr(d,d.return,te)}else{var T=Tc(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(T,l,a.__reactInternalSnapshotBeforeUpdate)}catch(te){zr(d,d.return,te)}}p&64&&If(d),p&512&&is(d,d.return);break;case 3:if(Ol(a,d),p&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Ka(a,l)}catch(te){zr(d,d.return,te)}}break;case 27:l===null&&p&4&&u0(d);case 26:case 5:Ol(a,d),l===null&&p&4&&Nh(d),p&512&&is(d,d.return);break;case 12:Ol(a,d);break;case 31:Ol(a,d),p&4&&Ap(a,d);break;case 13:Ol(a,d),p&4&&m0(a,d),p&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=y_.bind(null,d),k_(a,d))));break;case 22:if(p=d.memoizedState!==null||Ql,!p){l=l!==null&&l.memoizedState!==null||ui,T=Ql;var D=ui;Ql=p,(ui=l)&&!D?JA(a,d,(d.subtreeFlags&8772)!==0):Ol(a,d),Ql=T,ui=D}break;case 30:break;default:Ol(a,d)}}function lp(a){var l=a.alternate;l!==null&&(a.alternate=null,lp(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&ea(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var xa=null,jo=!1;function CA(a,l,d){for(d=d.child;d!==null;)_f(a,l,d),d=d.sibling}function _f(a,l,d){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount($t,d)}catch{}switch(d.tag){case 26:ui||wo(d,l),CA(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ui||wo(d,l);var p=xa,T=jo;dd(d.type)&&(xa=d.stateNode,jo=!1),CA(a,l,d),mp(d.stateNode),xa=p,jo=T;break;case 5:ui||wo(d,l);case 6:if(p=xa,T=jo,xa=null,CA(a,l,d),xa=p,jo=T,xa!==null)if(jo)try{(xa.nodeType===9?xa.body:xa.nodeName==="HTML"?xa.ownerDocument.body:xa).removeChild(d.stateNode)}catch(D){zr(d,l,D)}else try{xa.removeChild(d.stateNode)}catch(D){zr(d,l,D)}break;case 18:xa!==null&&(jo?(a=xa,vj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Pf(a)):vj(xa,d.stateNode));break;case 4:p=xa,T=jo,xa=d.stateNode.containerInfo,jo=!0,CA(a,l,d),xa=p,jo=T;break;case 0:case 11:case 14:case 15:_c(2,d,l),ui||_c(4,d,l),CA(a,l,d);break;case 1:ui||(wo(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"&&A0(d,l,p)),CA(a,l,d);break;case 21:CA(a,l,d);break;case 22:ui=(p=ui)||d.memoizedState!==null,CA(a,l,d),ui=p;break;default:CA(a,l,d)}}function Ap(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Pf(a)}catch(d){zr(l,l.return,d)}}}function m0(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Pf(a)}catch(d){zr(l,l.return,d)}}function p0(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new d0),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new d0),l;default:throw Error(n(435,a.tag))}}function Ff(a,l){var d=p0(a);l.forEach(function(p){if(!d.has(p)){d.add(p);var T=b_.bind(null,a,p);p.then(T,T)}})}function Wo(a,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var T=d[p],D=a,te=l,ye=te;e:for(;ye!==null;){switch(ye.tag){case 27:if(dd(ye.type)){xa=ye.stateNode,jo=!1;break e}break;case 5:xa=ye.stateNode,jo=!1;break e;case 3:case 4:xa=ye.stateNode.containerInfo,jo=!0;break e}ye=ye.return}if(xa===null)throw Error(n(160));_f(D,te,T),xa=null,jo=!1,D=T.alternate,D!==null&&(D.return=null),T.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Eh(l,a),l=l.sibling}var sA=null;function Eh(a,l){var d=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Wo(l,a),Aa(a),p&4&&(_c(3,a,a.return),fu(3,a),_c(5,a,a.return));break;case 1:Wo(l,a),Aa(a),p&512&&(ui||d===null||wo(d,d.return)),p&64&&Ql&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var T=sA;if(Wo(l,a),Aa(a),p&512&&(ui||d===null||wo(d,d.return)),p&4){var D=d!==null?d.memoizedState:null;if(p=a.memoizedState,d===null)if(p===null)if(a.stateNode===null){e:{p=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(p){case"title":D=T.getElementsByTagName("title")[0],(!D||D[_r]||D[En]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=T.createElement(p),T.head.insertBefore(D,T.querySelector("head > title"))),So(D,p,d),D[En]=a,zn(D),p=D;break e;case"link":var te=Ij("link","href",T).get(p+(d.href||""));if(te){for(var ye=0;ye<te.length;ye++)if(D=te[ye],D.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&D.getAttribute("rel")===(d.rel==null?null:d.rel)&&D.getAttribute("title")===(d.title==null?null:d.title)&&D.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){te.splice(ye,1);break t}}D=T.createElement(p),So(D,p,d),T.head.appendChild(D);break;case"meta":if(te=Ij("meta","content",T).get(p+(d.content||""))){for(ye=0;ye<te.length;ye++)if(D=te[ye],D.getAttribute("content")===(d.content==null?null:""+d.content)&&D.getAttribute("name")===(d.name==null?null:d.name)&&D.getAttribute("property")===(d.property==null?null:d.property)&&D.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&D.getAttribute("charset")===(d.charSet==null?null:d.charSet)){te.splice(ye,1);break t}}D=T.createElement(p),So(D,p,d),T.head.appendChild(D);break;default:throw Error(n(468,p))}D[En]=a,zn(D),p=D}a.stateNode=p}else _j(T,a.type,a.stateNode);else a.stateNode=Tj(T,p,a.memoizedProps);else D!==p?(D===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):D.count--,p===null?_j(T,a.type,a.stateNode):Tj(T,p,a.memoizedProps)):p===null&&a.stateNode!==null&&Yo(a,a.memoizedProps,d.memoizedProps)}break;case 27:Wo(l,a),Aa(a),p&512&&(ui||d===null||wo(d,d.return)),d!==null&&p&4&&Yo(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Wo(l,a),Aa(a),p&512&&(ui||d===null||wo(d,d.return)),a.flags&32){T=a.stateNode;try{Bs(T,"")}catch(Ss){zr(a,a.return,Ss)}}p&4&&a.stateNode!=null&&(T=a.memoizedProps,Yo(a,T,d!==null?d.memoizedProps:T)),p&1024&&(ld=!0);break;case 6:if(Wo(l,a),Aa(a),p&4){if(a.stateNode===null)throw Error(n(162));p=a.memoizedProps,d=a.stateNode;try{d.nodeValue=p}catch(Ss){zr(a,a.return,Ss)}}break;case 3:if(I0=null,T=sA,sA=E0(l.containerInfo),Wo(l,a),sA=T,Aa(a),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Pf(l.containerInfo)}catch(Ss){zr(a,a.return,Ss)}ld&&(ld=!1,cp(a));break;case 4:p=sA,sA=E0(a.stateNode.containerInfo),Wo(l,a),Aa(a),sA=p;break;case 12:Wo(l,a),Aa(a);break;case 31:Wo(l,a),Aa(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Ff(a,p)));break;case 13:Wo(l,a),Aa(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Ye=ts()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Ff(a,p)));break;case 22:T=a.memoizedState!==null;var Re=d!==null&&d.memoizedState!==null,tt=Ql,yt=ui;if(Ql=tt||T,ui=yt||Re,Wo(l,a),ui=yt,Ql=tt,Aa(a),p&8192)e:for(l=a.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(d===null||Re||Ql||ui||pu(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){Re=d=l;try{if(D=Re.stateNode,T)te=D.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{ye=Re.stateNode;var Tt=Re.memoizedProps.style,rt=Tt!=null&&Tt.hasOwnProperty("display")?Tt.display:null;ye.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Ss){zr(Re,Re.return,Ss)}}}else if(l.tag===6){if(d===null){Re=l;try{Re.stateNode.nodeValue=T?"":Re.memoizedProps}catch(Ss){zr(Re,Re.return,Ss)}}}else if(l.tag===18){if(d===null){Re=l;try{var ct=Re.stateNode;T?yj(ct,!0):yj(Re.stateNode,!1)}catch(Ss){zr(Re,Re.return,Ss)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=a.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,Ff(a,d))));break;case 19:Wo(l,a),Aa(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Ff(a,p)));break;case 30:break;case 21:break;default:Wo(l,a),Aa(a)}}function Aa(a){var l=a.flags;if(l&2){try{for(var d,p=a.return;p!==null;){if(c0(p)){d=p;break}p=p.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var T=d.stateNode,D=Ar(a);mu(a,D,T);break;case 5:var te=d.stateNode;d.flags&32&&(Bs(te,""),d.flags&=-33);var ye=Ar(a);mu(a,ye,te);break;case 3:case 4:var Re=d.stateNode.containerInfo,tt=Ar(a);Jr(a,tt,Re);break;default:throw Error(n(161))}}catch(yt){zr(a,a.return,yt)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function cp(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;cp(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Ol(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)f0(a,l.alternate,l),l=l.sibling}function pu(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:_c(4,l,l.return),pu(l);break;case 1:wo(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&A0(l,l.return,d),pu(l);break;case 27:mp(l.stateNode);case 26:case 5:wo(l,l.return),pu(l);break;case 22:l.memoizedState===null&&pu(l);break;case 30:pu(l);break;default:pu(l)}a=a.sibling}}function JA(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,T=a,D=l,te=D.flags;switch(D.tag){case 0:case 11:case 15:JA(T,D,d),fu(4,D);break;case 1:if(JA(T,D,d),p=D,T=p.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(tt){zr(p,p.return,tt)}if(p=D,T=p.updateQueue,T!==null){var ye=p.stateNode;try{var Re=T.shared.hiddenCallbacks;if(Re!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Re.length;T++)Oi(Re[T],ye)}catch(tt){zr(p,p.return,tt)}}d&&te&64&&If(D),is(D,D.return);break;case 27:u0(D);case 26:case 5:JA(T,D,d),d&&p===null&&te&4&&Nh(D),is(D,D.return);break;case 12:JA(T,D,d);break;case 31:JA(T,D,d),d&&te&4&&Ap(T,D);break;case 13:JA(T,D,d),d&&te&4&&m0(T,D);break;case 22:D.memoizedState===null&&JA(T,D,d),is(D,D.return);break;case 30:break;default:JA(T,D,d)}l=l.sibling}}function Th(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&ou(d))}function Fc(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&ou(a))}function Xo(a,l,d,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)g0(a,l,d,p),l=l.sibling}function g0(a,l,d,p){var T=l.flags;switch(l.tag){case 0:case 11:case 15:Xo(a,l,d,p),T&2048&&fu(9,l);break;case 1:Xo(a,l,d,p);break;case 3:Xo(a,l,d,p),T&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&ou(a)));break;case 12:if(T&2048){Xo(a,l,d,p),a=l.stateNode;try{var D=l.memoizedProps,te=D.id,ye=D.onPostCommit;typeof ye=="function"&&ye(te,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Re){zr(l,l.return,Re)}}else Xo(a,l,d,p);break;case 31:Xo(a,l,d,p);break;case 13:Xo(a,l,d,p);break;case 23:break;case 22:D=l.stateNode,te=l.alternate,l.memoizedState!==null?D._visibility&2?Xo(a,l,d,p):Ih(a,l):D._visibility&2?Xo(a,l,d,p):(D._visibility|=2,nA(a,l,d,p,(l.subtreeFlags&10256)!==0||!1)),T&2048&&Th(te,l);break;case 24:Xo(a,l,d,p),T&2048&&Fc(l.alternate,l);break;default:Xo(a,l,d,p)}}function nA(a,l,d,p,T){for(T=T&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var D=a,te=l,ye=d,Re=p,tt=te.flags;switch(te.tag){case 0:case 11:case 15:nA(D,te,ye,Re,T),fu(8,te);break;case 23:break;case 22:var yt=te.stateNode;te.memoizedState!==null?yt._visibility&2?nA(D,te,ye,Re,T):Ih(D,te):(yt._visibility|=2,nA(D,te,ye,Re,T)),T&&tt&2048&&Th(te.alternate,te);break;case 24:nA(D,te,ye,Re,T),T&&tt&2048&&Fc(te.alternate,te);break;default:nA(D,te,ye,Re,T)}l=l.sibling}}function Ih(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,p=l,T=p.flags;switch(p.tag){case 22:Ih(d,p),T&2048&&Th(p.alternate,p);break;case 24:Ih(d,p),T&2048&&Fc(p.alternate,p);break;default:Ih(d,p)}l=l.sibling}}var _h=8192;function gu(a,l,d){if(a.subtreeFlags&_h)for(a=a.child;a!==null;)x0(a,l,d),a=a.sibling}function x0(a,l,d){switch(a.tag){case 26:gu(a,l,d),a.flags&_h&&a.memoizedState!==null&&q_(d,sA,a.memoizedState,a.memoizedProps);break;case 5:gu(a,l,d);break;case 3:case 4:var p=sA;sA=E0(a.stateNode.containerInfo),gu(a,l,d),sA=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=_h,_h=16777216,gu(a,l,d),_h=p):gu(a,l,d));break;default:gu(a,l,d)}}function up(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Fh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Mi=p,y0(p,a)}up(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)v0(a),a=a.sibling}function v0(a){switch(a.tag){case 0:case 11:case 15:Fh(a),a.flags&2048&&_c(9,a,a.return);break;case 3:Fh(a);break;case 12:Fh(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Uf(a)):Fh(a);break;default:Fh(a)}}function Uf(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Mi=p,y0(p,a)}up(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:_c(8,l,l.return),Uf(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Uf(l));break;default:Uf(l)}a=a.sibling}}function y0(a,l){for(;Mi!==null;){var d=Mi;switch(d.tag){case 0:case 11:case 15:_c(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:ou(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,Mi=p;else e:for(d=a;Mi!==null;){p=Mi;var T=p.sibling,D=p.return;if(lp(p),p===d){Mi=null;break e}if(T!==null){T.return=D,Mi=T;break e}Mi=D}}}var Zv={getCacheForType:function(a){var l=Bi(Ta),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d},cacheSignal:function(){return Bi(Ta).controller.signal}},ey=typeof WeakMap=="function"?WeakMap:Map,gr=0,Vr=null,Ln=null,kn=0,Cr=0,gl=null,Uc=!1,Ad=!1,j=!1,v=0,S=0,B=0,z=0,se=0,he=0,Ce=0,Ne=null,Le=null,Ke=!1,Ye=0,gt=0,As=1/0,Gt=null,ns=null,Is=0,gs=null,ps=null,Tn=0,wn=0,en=null,us=null,Dn=0,Mn=null;function Ds(){return(gr&2)!==0&&kn!==0?kn&-kn:oe.T!==null?ry():pn()}function si(){if(he===0)if((kn&536870912)===0||Rn){var a=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),he=a}else he=536870912;return a=aa.current,a!==null&&(a.flags|=32),he}function Kr(a,l,d){(a===Vr&&(Cr===2||Cr===9)||a.cancelPendingCommit!==null)&&(Pl(a,0),Bo(a,kn,he,!1)),Yt(a,d),((gr&2)===0||a!==Vr)&&(a===Vr&&((gr&2)===0&&(z|=d),S===4&&Bo(a,kn,he,!1)),Lc(a))}function Jo(a,l,d){if((gr&6)!==0)throw Error(n(327));var p=!d&&(l&127)===0&&(l&a.expiredLanes)===0||qt(a,l),T=p?cd(a,l):ZA(a,l,!0),D=p;do{if(T===0){Ad&&!p&&Bo(a,l,0,!1);break}else{if(d=a.current.alternate,D&&!ro(d)){T=ZA(a,l,!1),D=!1;continue}if(T===2){if(D=l,a.errorRecoveryDisabledLanes&D)var te=0;else te=a.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){l=te;e:{var ye=a;T=Ne;var Re=ye.current.memoizedState.isDehydrated;if(Re&&(Pl(ye,te).flags|=256),te=ZA(ye,te,!1),te!==2){if(j&&!Re){ye.errorRecoveryDisabledLanes|=D,z|=D,T=4;break e}D=Le,Le=T,D!==null&&(Le===null?Le=D:Le.push.apply(Le,D))}T=te}if(D=!1,T!==2)continue}}if(T===1){Pl(a,0),Bo(a,l,0,!0);break}e:{switch(p=a,D=T,D){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Bo(p,l,he,!Uc);break e;case 2:Le=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(T=Ye+300-ts(),10<T)){if(Bo(p,l,he,!Uc),Rt(p,0,!0)!==0)break e;Tn=l,p.timeoutHandle=gj(Nr.bind(null,p,d,Le,Gt,Ke,l,he,z,Ce,Uc,D,"Throttled",-0,0),T);break e}Nr(p,d,Le,Gt,Ke,l,he,z,Ce,Uc,D,null,-0,0)}}break}while(!0);Lc(a)}function Nr(a,l,d,p,T,D,te,ye,Re,tt,yt,Tt,rt,ct){if(a.timeoutHandle=-1,Tt=l.subtreeFlags,Tt&8192||(Tt&16785408)===16785408){Tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fa},x0(l,D,Tt);var Ss=(D&62914560)===D?Ye-ts():(D&4194048)===D?gt-ts():0;if(Ss=Z_(Tt,Ss),Ss!==null){Tn=D,a.cancelPendingCommit=Ss(W2.bind(null,a,l,D,d,p,T,te,ye,Re,yt,Tt,null,rt,ct)),Bo(a,D,te,!tt);return}}W2(a,l,D,d,p,T,te,ye,Re)}function ro(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var T=d[p],D=T.getSnapshot;T=T.value;try{if(!Qn(D(),T))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Bo(a,l,d,p){l&=~se,l&=~z,a.suspendedLanes|=l,a.pingedLanes&=~l,p&&(a.warmLanes|=l),p=a.expirationTimes;for(var T=l;0<T;){var D=31-Ot(T),te=1<<D;p[D]=-1,T&=~te}d!==0&&Tr(a,d,l)}function ao(){return(gr&6)===0?(dp(0),!1):!0}function ho(){if(Ln!==null){if(Cr===0)var a=Ln.return;else a=Ln,Fl=xA=null,Au(a),Nt=null,js=0,a=Ln;for(;a!==null;)l0(a.alternate,a),a=a.return;Ln=null}}function Pl(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,R_(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),Tn=0,ho(),Vr=a,Ln=d=ko(a.current,null),kn=l,Cr=0,gl=null,Uc=!1,Ad=qt(a,l),j=!1,Ce=he=se=z=B=S=0,Le=Ne=null,Ke=!1,(l&8)!==0&&(l|=l&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=l;0<p;){var T=31-Ot(p),D=1<<T;l|=a[T],p&=~D}return v=l,su(),d}function rA(a,l){Qs=null,oe.H=xh,l===Oe||l===Ie?(l=bt(),Cr=3):l===qe?(l=bt(),Cr=4):Cr=l===Jm?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,gl=l,Ln===null&&(S=1,bh(a,Mo(l,a.current)))}function qA(){var a=aa.current;return a===null?!0:(kn&4194048)===kn?Pn===null:(kn&62914560)===kn||(kn&536870912)!==0?a===Pn:!1}function Dc(){var a=oe.H;return oe.H=xh,a===null?xh:a}function Rc(){var a=oe.A;return oe.A=Zv,a}function kl(){S=4,Uc||(kn&4194048)!==kn&&aa.current!==null||(Ad=!0),(B&134217727)===0&&(z&134217727)===0||Vr===null||Bo(Vr,kn,he,!1)}function ZA(a,l,d){var p=gr;gr|=2;var T=Dc(),D=Rc();(Vr!==a||kn!==l)&&(Gt=null,Pl(a,l)),l=!1;var te=S;e:do try{if(Cr!==0&&Ln!==null){var ye=Ln,Re=gl;switch(Cr){case 8:ho(),te=6;break e;case 3:case 2:case 9:case 6:aa.current===null&&(l=!0);var tt=Cr;if(Cr=0,gl=null,Df(a,ye,Re,tt),d&&Ad){te=0;break e}break;default:tt=Cr,Cr=0,gl=null,Df(a,ye,Re,tt)}}ec(),te=S;break}catch(yt){rA(a,yt)}while(!0);return l&&a.shellSuspendCounter++,Fl=xA=null,gr=p,oe.H=T,oe.A=D,Ln===null&&(Vr=null,kn=0,su()),te}function ec(){for(;Ln!==null;)G2(Ln)}function cd(a,l){var d=gr;gr|=2;var p=Dc(),T=Rc();Vr!==a||kn!==l?(Gt=null,As=ts()+500,Pl(a,l)):Ad=qt(a,l);e:do try{if(Cr!==0&&Ln!==null){l=Ln;var D=gl;t:switch(Cr){case 1:Cr=0,gl=null,Df(a,l,D,1);break;case 2:case 9:if(Ve(D)){Cr=0,gl=null,$2(l);break}l=function(){Cr!==2&&Cr!==9||Vr!==a||(Cr=7),Lc(a)},D.then(l,l);break e;case 3:Cr=7;break e;case 4:Cr=5;break e;case 7:Ve(D)?(Cr=0,gl=null,$2(l)):(Cr=0,gl=null,Df(a,l,D,7));break;case 5:var te=null;switch(Ln.tag){case 26:te=Ln.memoizedState;case 5:case 27:var ye=Ln;if(te?Fj(te):ye.stateNode.complete){Cr=0,gl=null;var Re=ye.sibling;if(Re!==null)Ln=Re;else{var tt=ye.return;tt!==null?(Ln=tt,b0(tt)):Ln=null}break t}}Cr=0,gl=null,Df(a,l,D,5);break;case 6:Cr=0,gl=null,Df(a,l,D,6);break;case 8:ho(),S=6;break e;default:throw Error(n(462))}}Uh();break}catch(yt){rA(a,yt)}while(!0);return Fl=xA=null,oe.H=p,oe.A=T,gr=d,Ln!==null?0:(Vr=null,kn=0,su(),S)}function Uh(){for(;Ln!==null&&!Ct();)G2(Ln)}function G2(a){var l=Tf(a.alternate,a,v);a.memoizedProps=a.pendingProps,l===null?b0(a):Ln=l}function $2(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=od(d,l,l.pendingProps,l.type,void 0,kn);break;case 11:l=od(d,l,l.pendingProps,l.type.render,l.ref,kn);break;case 5:Au(l);default:l0(d,l),l=Ln=ru(l,v),l=Tf(d,l,v)}a.memoizedProps=a.pendingProps,l===null?b0(a):Ln=l}function Df(a,l,d,p){Fl=xA=null,Au(l),Nt=null,js=0;var T=l.return;try{if(Xv(a,T,l,d,kn)){S=1,bh(a,Mo(d,a.current)),Ln=null;return}}catch(D){if(T!==null)throw Ln=T,D;S=1,bh(a,Mo(d,a.current)),Ln=null;return}l.flags&32768?(Rn||p===1?a=!0:Ad||(kn&536870912)!==0?a=!1:(Uc=a=!0,(p===2||p===9||p===3||p===6)&&(p=aa.current,p!==null&&p.tag===13&&(p.flags|=16384))),Y2(l,a)):b0(l)}function b0(a){var l=a;do{if((l.flags&32768)!==0){Y2(l,Uc);return}a=l.return;var d=Jv(l.alternate,l,v);if(d!==null){Ln=d;return}if(l=l.sibling,l!==null){Ln=l;return}Ln=l=a}while(l!==null);S===0&&(S=5)}function Y2(a,l){do{var d=qv(a.alternate,a);if(d!==null){d.flags&=32767,Ln=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){Ln=a;return}Ln=a=d}while(a!==null);S=6,Ln=null}function W2(a,l,d,p,T,D,te,ye,Re){a.cancelPendingCommit=null;do w0();while(Is!==0);if((gr&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(D=l.lanes|l.childLanes,D|=Pu,hn(a,d,D,te,ye,Re),a===Vr&&(Ln=Vr=null,kn=0),ps=l,gs=a,Tn=d,wn=D,en=T,us=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,w_(Kt,function(){return ej(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=oe.T,oe.T=null,T=X.p,X.p=2,te=gr,gr|=4;try{h0(a,l,d)}finally{gr=te,X.p=T,oe.T=p}}Is=1,X2(),J2(),q2()}}function X2(){if(Is===1){Is=0;var a=gs,l=ps,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=oe.T,oe.T=null;var p=X.p;X.p=2;var T=gr;gr|=4;try{Eh(l,a);var D=dy,te=Nl(a.containerInfo),ye=D.focusedElem,Re=D.selectionRange;if(te!==ye&&ye&&ye.ownerDocument&&dl(ye.ownerDocument.documentElement,ye)){if(Re!==null&&El(ye)){var tt=Re.start,yt=Re.end;if(yt===void 0&&(yt=tt),"selectionStart"in ye)ye.selectionStart=tt,ye.selectionEnd=Math.min(yt,ye.value.length);else{var Tt=ye.ownerDocument||document,rt=Tt&&Tt.defaultView||window;if(rt.getSelection){var ct=rt.getSelection(),Ss=ye.textContent.length,tn=Math.min(Re.start,Ss),Zr=Re.end===void 0?tn:Math.min(Re.end,Ss);!ct.extend&&tn>Zr&&(te=Zr,Zr=tn,tn=te);var Ge=MA(ye,tn),ke=MA(ye,Zr);if(Ge&&ke&&(ct.rangeCount!==1||ct.anchorNode!==Ge.node||ct.anchorOffset!==Ge.offset||ct.focusNode!==ke.node||ct.focusOffset!==ke.offset)){var et=Tt.createRange();et.setStart(Ge.node,Ge.offset),ct.removeAllRanges(),tn>Zr?(ct.addRange(et),ct.extend(ke.node,ke.offset)):(et.setEnd(ke.node,ke.offset),ct.addRange(et))}}}}for(Tt=[],ct=ye;ct=ct.parentNode;)ct.nodeType===1&&Tt.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<Tt.length;ye++){var Bt=Tt[ye];Bt.element.scrollLeft=Bt.left,Bt.element.scrollTop=Bt.top}}D0=!!uy,dy=uy=null}finally{gr=T,X.p=p,oe.T=d}}a.current=l,Is=2}}function J2(){if(Is===2){Is=0;var a=gs,l=ps,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=oe.T,oe.T=null;var p=X.p;X.p=2;var T=gr;gr|=4;try{f0(a,l.alternate,l)}finally{gr=T,X.p=p,oe.T=d}}Is=3}}function q2(){if(Is===4||Is===3){Is=0,Jt();var a=gs,l=ps,d=Tn,p=us;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Is=5:(Is=0,ps=gs=null,Z2(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(ns=null),mn(d),l=l.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot($t,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=oe.T,T=X.p,X.p=2,oe.T=null;try{for(var D=a.onRecoverableError,te=0;te<p.length;te++){var ye=p[te];D(ye.value,{componentStack:ye.stack})}}finally{oe.T=l,X.p=T}}(Tn&3)!==0&&w0(),Lc(a),T=a.pendingLanes,(d&261930)!==0&&(T&42)!==0?a===Mn?Dn++:(Dn=0,Mn=a):Dn=0,dp(0)}}function Z2(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,ou(l)))}function w0(){return X2(),J2(),q2(),ej()}function ej(){if(Is!==5)return!1;var a=gs,l=wn;wn=0;var d=mn(Tn),p=oe.T,T=X.p;try{X.p=32>d?32:d,oe.T=null,d=en,en=null;var D=gs,te=Tn;if(Is=0,ps=gs=null,Tn=0,(gr&6)!==0)throw Error(n(331));var ye=gr;if(gr|=4,v0(D.current),g0(D,D.current,te,d),gr=ye,dp(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot($t,D)}catch{}return!0}finally{X.p=T,oe.T=p,Z2(a,l)}}function tj(a,l,d){l=Mo(d,l),l=Ym(a.stateNode,l,2),a=Ws(a,l,2),a!==null&&(Yt(a,2),Lc(a))}function zr(a,l,d){if(a.tag===3)tj(a,a,d);else for(;l!==null;){if(l.tag===3){tj(l,a,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ns===null||!ns.has(p))){a=Mo(d,a),d=Wm(2),p=Ws(l,d,2),p!==null&&(Xm(d,p,l,a),Yt(p,2),Lc(p));break}}l=l.return}}function ty(a,l,d){var p=a.pingCache;if(p===null){p=a.pingCache=new ey;var T=new Set;p.set(l,T)}else T=p.get(l),T===void 0&&(T=new Set,p.set(l,T));T.has(d)||(j=!0,T.add(d),a=v_.bind(null,a,l,d),l.then(a,a))}function v_(a,l,d){var p=a.pingCache;p!==null&&p.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Vr===a&&(kn&d)===d&&(S===4||S===3&&(kn&62914560)===kn&&300>ts()-Ye?(gr&2)===0&&Pl(a,0):se|=d,Ce===kn&&(Ce=0)),Lc(a)}function sj(a,l){l===0&&(l=Xs()),a=Il(a,l),a!==null&&(Yt(a,l),Lc(a))}function y_(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),sj(a,d)}function b_(a,l){var d=0;switch(a.tag){case 31:case 13:var p=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(l),sj(a,d)}function w_(a,l){return Ft(a,l)}var j0=null,Rf=null,sy=!1,B0=!1,ny=!1,ud=0;function Lc(a){a!==Rf&&a.next===null&&(Rf===null?j0=Rf=a:Rf=Rf.next=a),B0=!0,sy||(sy=!0,B_())}function dp(a,l){if(!ny&&B0){ny=!0;do for(var d=!1,p=j0;p!==null;){if(a!==0){var T=p.pendingLanes;if(T===0)var D=0;else{var te=p.suspendedLanes,ye=p.pingedLanes;D=(1<<31-Ot(42|a)+1)-1,D&=T&~(te&~ye),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(d=!0,ij(p,D))}else D=kn,D=Rt(p,p===Vr?D:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(D&3)===0||qt(p,D)||(d=!0,ij(p,D));p=p.next}while(d);ny=!1}}function j_(){nj()}function nj(){B0=sy=!1;var a=0;ud!==0&&D_()&&(a=ud);for(var l=ts(),d=null,p=j0;p!==null;){var T=p.next,D=rj(p,l);D===0?(p.next=null,d===null?j0=T:d.next=T,T===null&&(Rf=d)):(d=p,(a!==0||(D&3)!==0)&&(B0=!0)),p=T}Is!==0&&Is!==5||dp(a),ud!==0&&(ud=0)}function rj(a,l){for(var d=a.suspendedLanes,p=a.pingedLanes,T=a.expirationTimes,D=a.pendingLanes&-62914561;0<D;){var te=31-Ot(D),ye=1<<te,Re=T[te];Re===-1?((ye&d)===0||(ye&p)!==0)&&(T[te]=cs(ye,l)):Re<=l&&(a.expiredLanes|=ye),D&=~ye}if(l=Vr,d=kn,d=Rt(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,d===0||a===l&&(Cr===2||Cr===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&Qt(p),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||qt(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(p!==null&&Qt(p),mn(d)){case 2:case 8:d=Vt;break;case 32:d=Kt;break;case 268435456:d=mt;break;default:d=Kt}return p=aj.bind(null,a),d=Ft(d,p),a.callbackPriority=l,a.callbackNode=d,l}return p!==null&&p!==null&&Qt(p),a.callbackPriority=2,a.callbackNode=null,2}function aj(a,l){if(Is!==0&&Is!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(w0()&&a.callbackNode!==d)return null;var p=kn;return p=Rt(a,a===Vr?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(Jo(a,p,l),rj(a,ts()),a.callbackNode!=null&&a.callbackNode===d?aj.bind(null,a):null)}function ij(a,l){if(w0())return null;Jo(a,l,!0)}function B_(){L_(function(){(gr&6)!==0?Ft(Xe,j_):nj()})}function ry(){if(ud===0){var a=y;a===0&&(a=Et,Et<<=1,(Et&261888)===0&&(Et=256)),ud=a}return ud}function oj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Gn(""+a)}function lj(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function S_(a,l,d,p,T){if(l==="submit"&&d&&d.stateNode===T){var D=oj((T[An]||null).action),te=p.submitter;te&&(l=(l=te[An]||null)?oj(l.formAction):te.getAttribute("formAction"),l!==null&&(D=l,te=null));var ye=new na("action","action",null,p,T);a.push({event:ye,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ud!==0){var Re=te?lj(T,te):new FormData(T);wf(d,{pending:!0,data:Re,method:T.method,action:D},null,Re)}}else typeof D=="function"&&(ye.preventDefault(),Re=te?lj(T,te):new FormData(T),wf(d,{pending:!0,data:Re,method:T.method,action:D},D,Re))},currentTarget:T}]})}}for(var ay=0;ay<hA.length;ay++){var iy=hA[ay],C_=iy.toLowerCase(),N_=iy[0].toUpperCase()+iy.slice(1);xo(C_,"on"+N_)}xo(HA,"onAnimationEnd"),xo(dA,"onAnimationIteration"),xo(nh,"onAnimationStart"),xo("dblclick","onDoubleClick"),xo("focusin","onFocus"),xo("focusout","onBlur"),xo(rh,"onTransitionRun"),xo(ah,"onTransitionStart"),xo(ih,"onTransitionCancel"),xo(Qu,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hp));function Aj(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var p=a[d],T=p.event;p=p.listeners;e:{var D=void 0;if(l)for(var te=p.length-1;0<=te;te--){var ye=p[te],Re=ye.instance,tt=ye.currentTarget;if(ye=ye.listener,Re!==D&&T.isPropagationStopped())break e;D=ye,T.currentTarget=tt;try{D(T)}catch(yt){pc(yt)}T.currentTarget=null,D=Re}else for(te=0;te<p.length;te++){if(ye=p[te],Re=ye.instance,tt=ye.currentTarget,ye=ye.listener,Re!==D&&T.isPropagationStopped())break e;D=ye,T.currentTarget=tt;try{D(T)}catch(yt){pc(yt)}T.currentTarget=null,D=Re}}}}function Kn(a,l){var d=l[ya];d===void 0&&(d=l[ya]=new Set);var p=a+"__bubble";d.has(p)||(cj(l,a,2,!1),d.add(p))}function oy(a,l,d){var p=0;l&&(p|=4),cj(d,a,p,l)}var S0="_reactListening"+Math.random().toString(36).slice(2);function ly(a){if(!a[S0]){a[S0]=!0,Qa.forEach(function(d){d!=="selectionchange"&&(E_.has(d)||oy(d,!1,a),oy(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[S0]||(l[S0]=!0,oy("selectionchange",!1,l))}}function cj(a,l,d,p){switch(Pj(l)){case 2:var T=s6;break;case 8:T=n6;break;default:T=jy}d=T.bind(null,l,d,a),T=void 0,!Pa||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),p?T!==void 0?a.addEventListener(l,d,{capture:!0,passive:T}):a.addEventListener(l,d,!0):T!==void 0?a.addEventListener(l,d,{passive:T}):a.addEventListener(l,d,!1)}function Ay(a,l,d,p,T){var D=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var te=p.tag;if(te===3||te===4){var ye=p.stateNode.containerInfo;if(ye===T)break;if(te===4)for(te=p.return;te!==null;){var Re=te.tag;if((Re===3||Re===4)&&te.stateNode.containerInfo===T)return;te=te.return}for(;ye!==null;){if(te=xr(ye),te===null)return;if(Re=te.tag,Re===5||Re===6||Re===26||Re===27){p=D=te;continue e}ye=ye.parentNode}}p=p.return}Do(function(){var tt=D,yt=ja(d),Tt=[];e:{var rt=Ou.get(a);if(rt!==void 0){var ct=na,Ss=a;switch(a){case"keypress":if(Sa(d)===0)break e;case"keydown":case"keyup":ct=Fn;break;case"focusin":Ss="focus",ct=Or;break;case"focusout":Ss="blur",ct=Or;break;case"beforeblur":case"afterblur":ct=Or;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=In;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=ss;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=W;break;case HA:case dA:case nh:ct=k;break;case Qu:ct=we;break;case"scroll":case"scrollend":ct=po;break;case"wheel":ct=st;break;case"copy":case"cut":case"paste":ct=Te;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=vr;break;case"toggle":case"beforetoggle":ct=sn}var tn=(l&4)!==0,Zr=!tn&&(a==="scroll"||a==="scrollend"),Ge=tn?rt!==null?rt+"Capture":null:rt;tn=[];for(var ke=tt,et;ke!==null;){var Bt=ke;if(et=Bt.stateNode,Bt=Bt.tag,Bt!==5&&Bt!==26&&Bt!==27||et===null||Ge===null||(Bt=Ba(ke,Ge),Bt!=null&&tn.push(fp(ke,Bt,et))),Zr)break;ke=ke.return}0<tn.length&&(rt=new ct(rt,Ss,null,d,yt),Tt.push({event:rt,listeners:tn}))}}if((l&7)===0){e:{if(rt=a==="mouseover"||a==="pointerover",ct=a==="mouseout"||a==="pointerout",rt&&d!==_i&&(Ss=d.relatedTarget||d.fromElement)&&(xr(Ss)||Ss[Ir]))break e;if((ct||rt)&&(rt=yt.window===yt?yt:(rt=yt.ownerDocument)?rt.defaultView||rt.parentWindow:window,ct?(Ss=d.relatedTarget||d.toElement,ct=tt,Ss=Ss?xr(Ss):null,Ss!==null&&(Zr=o(Ss),tn=Ss.tag,Ss!==Zr||tn!==5&&tn!==27&&tn!==6)&&(Ss=null)):(ct=null,Ss=tt),ct!==Ss)){if(tn=In,Bt="onMouseLeave",Ge="onMouseEnter",ke="mouse",(a==="pointerout"||a==="pointerover")&&(tn=vr,Bt="onPointerLeave",Ge="onPointerEnter",ke="pointer"),Zr=ct==null?rt:da(ct),et=Ss==null?rt:da(Ss),rt=new tn(Bt,ke+"leave",ct,d,yt),rt.target=Zr,rt.relatedTarget=et,Bt=null,xr(yt)===tt&&(tn=new tn(Ge,ke+"enter",Ss,d,yt),tn.target=et,tn.relatedTarget=Zr,Bt=tn),Zr=Bt,ct&&Ss)t:{for(tn=T_,Ge=ct,ke=Ss,et=0,Bt=Ge;Bt;Bt=tn(Bt))et++;Bt=0;for(var $s=ke;$s;$s=tn($s))Bt++;for(;0<et-Bt;)Ge=tn(Ge),et--;for(;0<Bt-et;)ke=tn(ke),Bt--;for(;et--;){if(Ge===ke||ke!==null&&Ge===ke.alternate){tn=Ge;break t}Ge=tn(Ge),ke=tn(ke)}tn=null}else tn=null;ct!==null&&uj(Tt,rt,ct,tn,!1),Ss!==null&&Zr!==null&&uj(Tt,Zr,Ss,tn,!0)}}e:{if(rt=tt?da(tt):window,ct=rt.nodeName&&rt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&rt.type==="file")var yr=Po;else if(Qo(rt))if(Cn)yr=vi;else{yr=ma;var _s=PA}else ct=rt.nodeName,!ct||ct.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?tt&&ta(tt.elementType)&&(yr=Po):yr=Zi;if(yr&&(yr=yr(a,tt))){Xn(Tt,yr,d,yt);break e}_s&&_s(a,rt,tt),a==="focusout"&&tt&&rt.type==="number"&&tt.memoizedProps.value!=null&&zs(rt,"number",rt.value)}switch(_s=tt?da(tt):window,a){case"focusin":(Qo(_s)||_s.contentEditable==="true")&&(Ea=_s,Yl=tt,Ri=null);break;case"focusout":Ri=Yl=Ea=null;break;case"mousedown":eo=!0;break;case"contextmenu":case"mouseup":case"dragend":eo=!1,Jn(Tt,d,yt);break;case"selectionchange":if(hl)break;case"keydown":case"keyup":Jn(Tt,d,yt)}var _n;if(bn)e:{switch(a){case"compositionstart":var Zn="onCompositionStart";break e;case"compositionend":Zn="onCompositionEnd";break e;case"compositionupdate":Zn="onCompositionUpdate";break e}Zn=void 0}else Al?go(a,d)&&(Zn="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Zn="onCompositionStart");Zn&&(Na&&d.locale!=="ko"&&(Al||Zn!=="onCompositionStart"?Zn==="onCompositionEnd"&&Al&&(_n=Sl()):(oi=yt,Ro="value"in oi?oi.value:oi.textContent,Al=!0)),_s=C0(tt,Zn),0<_s.length&&(Zn=new Me(Zn,a,null,d,yt),Tt.push({event:Zn,listeners:_s}),_n?Zn.data=_n:(_n=Lo(d),_n!==null&&(Zn.data=_n)))),(_n=Za?Ma(a,d):li(a,d))&&(Zn=C0(tt,"onBeforeInput"),0<Zn.length&&(_s=new Me("onBeforeInput","beforeinput",null,d,yt),Tt.push({event:_s,listeners:Zn}),_s.data=_n)),S_(Tt,a,tt,d,yt)}Aj(Tt,l)})}function fp(a,l,d){return{instance:a,listener:l,currentTarget:d}}function C0(a,l){for(var d=l+"Capture",p=[];a!==null;){var T=a,D=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||D===null||(T=Ba(a,d),T!=null&&p.unshift(fp(a,T,D)),T=Ba(a,l),T!=null&&p.push(fp(a,T,D))),a.tag===3)return p;a=a.return}return[]}function T_(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function uj(a,l,d,p,T){for(var D=l._reactName,te=[];d!==null&&d!==p;){var ye=d,Re=ye.alternate,tt=ye.stateNode;if(ye=ye.tag,Re!==null&&Re===p)break;ye!==5&&ye!==26&&ye!==27||tt===null||(Re=tt,T?(tt=Ba(d,D),tt!=null&&te.unshift(fp(d,tt,Re))):T||(tt=Ba(d,D),tt!=null&&te.push(fp(d,tt,Re)))),d=d.return}te.length!==0&&a.push({event:l,listeners:te})}var I_=/\r\n?/g,__=/\u0000|\uFFFD/g;function dj(a){return(typeof a=="string"?a:""+a).replace(I_,`
`).replace(__,"")}function hj(a,l){return l=dj(l),dj(a)===l}function qr(a,l,d,p,T,D){switch(d){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Bs(a,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Bs(a,""+p);break;case"className":Oa(a,"class",p);break;case"tabIndex":Oa(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Oa(a,d,p);break;case"style":wr(a,p,D);break;case"data":if(l!=="object"){Oa(a,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=Gn(""+p),a.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(d==="formAction"?(l!=="input"&&qr(a,l,"name",T.name,T,null),qr(a,l,"formEncType",T.formEncType,T,null),qr(a,l,"formMethod",T.formMethod,T,null),qr(a,l,"formTarget",T.formTarget,T,null)):(qr(a,l,"encType",T.encType,T,null),qr(a,l,"method",T.method,T,null),qr(a,l,"target",T.target,T,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=Gn(""+p),a.setAttribute(d,p);break;case"onClick":p!=null&&(a.onclick=fa);break;case"onScroll":p!=null&&Kn("scroll",a);break;case"onScrollEnd":p!=null&&Kn("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(T.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}d=Gn(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""+p):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":p===!0?a.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,p):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(d,p):a.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(d):a.setAttribute(d,p);break;case"popover":Kn("beforetoggle",a),Kn("toggle",a),ba(a,"popover",p);break;case"xlinkActuate":Yr(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Yr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Yr(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Yr(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Yr(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Yr(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Yr(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Yr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Yr(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":ba(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=wa.get(d)||d,ba(a,d,p))}}function cy(a,l,d,p,T,D){switch(d){case"style":wr(a,p,D);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(T.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"children":typeof p=="string"?Bs(a,p):(typeof p=="number"||typeof p=="bigint")&&Bs(a,""+p);break;case"onScroll":p!=null&&Kn("scroll",a);break;case"onScrollEnd":p!=null&&Kn("scrollend",a);break;case"onClick":p!=null&&(a.onclick=fa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ha.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),l=d.slice(2,T?d.length-7:void 0),D=a[An]||null,D=D!=null?D[d]:null,typeof D=="function"&&a.removeEventListener(l,D,T),typeof p=="function")){typeof D!="function"&&D!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,p,T);break e}d in a?a[d]=p:p===!0?a.setAttribute(d,""):ba(a,d,p)}}}function So(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kn("error",a),Kn("load",a);var p=!1,T=!1,D;for(D in d)if(d.hasOwnProperty(D)){var te=d[D];if(te!=null)switch(D){case"src":p=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:qr(a,l,D,te,d,null)}}T&&qr(a,l,"srcSet",d.srcSet,d,null),p&&qr(a,l,"src",d.src,d,null);return;case"input":Kn("invalid",a);var ye=D=te=T=null,Re=null,tt=null;for(p in d)if(d.hasOwnProperty(p)){var yt=d[p];if(yt!=null)switch(p){case"name":T=yt;break;case"type":te=yt;break;case"checked":Re=yt;break;case"defaultChecked":tt=yt;break;case"value":D=yt;break;case"defaultValue":ye=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(n(137,l));break;default:qr(a,l,p,yt,d,null)}}ms(a,D,ye,Re,tt,te,T,!1);return;case"select":Kn("invalid",a),p=te=D=null;for(T in d)if(d.hasOwnProperty(T)&&(ye=d[T],ye!=null))switch(T){case"value":D=ye;break;case"defaultValue":te=ye;break;case"multiple":p=ye;default:qr(a,l,T,ye,d,null)}l=D,d=te,a.multiple=!!p,l!=null?Gs(a,!!p,l,!1):d!=null&&Gs(a,!!p,d,!0);return;case"textarea":Kn("invalid",a),D=T=p=null;for(te in d)if(d.hasOwnProperty(te)&&(ye=d[te],ye!=null))switch(te){case"value":p=ye;break;case"defaultValue":T=ye;break;case"children":D=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(91));break;default:qr(a,l,te,ye,d,null)}Js(a,p,T,D);return;case"option":for(Re in d)if(d.hasOwnProperty(Re)&&(p=d[Re],p!=null))switch(Re){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:qr(a,l,Re,p,d,null)}return;case"dialog":Kn("beforetoggle",a),Kn("toggle",a),Kn("cancel",a),Kn("close",a);break;case"iframe":case"object":Kn("load",a);break;case"video":case"audio":for(p=0;p<hp.length;p++)Kn(hp[p],a);break;case"image":Kn("error",a),Kn("load",a);break;case"details":Kn("toggle",a);break;case"embed":case"source":case"link":Kn("error",a),Kn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in d)if(d.hasOwnProperty(tt)&&(p=d[tt],p!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:qr(a,l,tt,p,d,null)}return;default:if(ta(l)){for(yt in d)d.hasOwnProperty(yt)&&(p=d[yt],p!==void 0&&cy(a,l,yt,p,d,void 0));return}}for(ye in d)d.hasOwnProperty(ye)&&(p=d[ye],p!=null&&qr(a,l,ye,p,d,null))}function F_(a,l,d,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,D=null,te=null,ye=null,Re=null,tt=null,yt=null;for(ct in d){var Tt=d[ct];if(d.hasOwnProperty(ct)&&Tt!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":Re=Tt;default:p.hasOwnProperty(ct)||qr(a,l,ct,null,p,Tt)}}for(var rt in p){var ct=p[rt];if(Tt=d[rt],p.hasOwnProperty(rt)&&(ct!=null||Tt!=null))switch(rt){case"type":D=ct;break;case"name":T=ct;break;case"checked":tt=ct;break;case"defaultChecked":yt=ct;break;case"value":te=ct;break;case"defaultValue":ye=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(n(137,l));break;default:ct!==Tt&&qr(a,l,rt,ct,p,Tt)}}fs(a,te,ye,Re,tt,yt,D,T);return;case"select":ct=te=ye=rt=null;for(D in d)if(Re=d[D],d.hasOwnProperty(D)&&Re!=null)switch(D){case"value":break;case"multiple":ct=Re;default:p.hasOwnProperty(D)||qr(a,l,D,null,p,Re)}for(T in p)if(D=p[T],Re=d[T],p.hasOwnProperty(T)&&(D!=null||Re!=null))switch(T){case"value":rt=D;break;case"defaultValue":ye=D;break;case"multiple":te=D;default:D!==Re&&qr(a,l,T,D,p,Re)}l=ye,d=te,p=ct,rt!=null?Gs(a,!!d,rt,!1):!!p!=!!d&&(l!=null?Gs(a,!!d,l,!0):Gs(a,!!d,d?[]:"",!1));return;case"textarea":ct=rt=null;for(ye in d)if(T=d[ye],d.hasOwnProperty(ye)&&T!=null&&!p.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:qr(a,l,ye,null,p,T)}for(te in p)if(T=p[te],D=d[te],p.hasOwnProperty(te)&&(T!=null||D!=null))switch(te){case"value":rt=T;break;case"defaultValue":ct=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==D&&qr(a,l,te,T,p,D)}Lt(a,rt,ct);return;case"option":for(var Ss in d)if(rt=d[Ss],d.hasOwnProperty(Ss)&&rt!=null&&!p.hasOwnProperty(Ss))switch(Ss){case"selected":a.selected=!1;break;default:qr(a,l,Ss,null,p,rt)}for(Re in p)if(rt=p[Re],ct=d[Re],p.hasOwnProperty(Re)&&rt!==ct&&(rt!=null||ct!=null))switch(Re){case"selected":a.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:qr(a,l,Re,rt,p,ct)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in d)rt=d[tn],d.hasOwnProperty(tn)&&rt!=null&&!p.hasOwnProperty(tn)&&qr(a,l,tn,null,p,rt);for(tt in p)if(rt=p[tt],ct=d[tt],p.hasOwnProperty(tt)&&rt!==ct&&(rt!=null||ct!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,l));break;default:qr(a,l,tt,rt,p,ct)}return;default:if(ta(l)){for(var Zr in d)rt=d[Zr],d.hasOwnProperty(Zr)&&rt!==void 0&&!p.hasOwnProperty(Zr)&&cy(a,l,Zr,void 0,p,rt);for(yt in p)rt=p[yt],ct=d[yt],!p.hasOwnProperty(yt)||rt===ct||rt===void 0&&ct===void 0||cy(a,l,yt,rt,p,ct);return}}for(var Ge in d)rt=d[Ge],d.hasOwnProperty(Ge)&&rt!=null&&!p.hasOwnProperty(Ge)&&qr(a,l,Ge,null,p,rt);for(Tt in p)rt=p[Tt],ct=d[Tt],!p.hasOwnProperty(Tt)||rt===ct||rt==null&&ct==null||qr(a,l,Tt,rt,p,ct)}function fj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function U_(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,d=performance.getEntriesByType("resource"),p=0;p<d.length;p++){var T=d[p],D=T.transferSize,te=T.initiatorType,ye=T.duration;if(D&&ye&&fj(te)){for(te=0,ye=T.responseEnd,p+=1;p<d.length;p++){var Re=d[p],tt=Re.startTime;if(tt>ye)break;var yt=Re.transferSize,Tt=Re.initiatorType;yt&&fj(Tt)&&(Re=Re.responseEnd,te+=yt*(Re<ye?1:(ye-tt)/(Re-tt)))}if(--p,l+=8*(D+te)/(T.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var uy=null,dy=null;function N0(a){return a.nodeType===9?a:a.ownerDocument}function mj(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pj(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function hy(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var fy=null;function D_(){var a=window.event;return a&&a.type==="popstate"?a===fy?!1:(fy=a,!0):(fy=null,!1)}var gj=typeof setTimeout=="function"?setTimeout:void 0,R_=typeof clearTimeout=="function"?clearTimeout:void 0,xj=typeof Promise=="function"?Promise:void 0,L_=typeof queueMicrotask=="function"?queueMicrotask:typeof xj<"u"?function(a){return xj.resolve(null).then(a).catch(Q_)}:gj;function Q_(a){setTimeout(function(){throw a})}function dd(a){return a==="head"}function vj(a,l){var d=l,p=0;do{var T=d.nextSibling;if(a.removeChild(d),T&&T.nodeType===8)if(d=T.data,d==="/$"||d==="/&"){if(p===0){a.removeChild(T),Pf(l);return}p--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")p++;else if(d==="html")mp(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,mp(d);for(var D=d.firstChild;D;){var te=D.nextSibling,ye=D.nodeName;D[_r]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&D.rel.toLowerCase()==="stylesheet"||d.removeChild(D),D=te}}else d==="body"&&mp(a.ownerDocument.body);d=T}while(d);Pf(l)}function yj(a,l){var d=a;a=0;do{var p=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),p&&p.nodeType===8)if(d=p.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=p}while(d)}function my(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":my(d),ea(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function O_(a,l,d,p){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[_r])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(D=a.getAttribute("rel"),D==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(D!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(D=a.getAttribute("src"),(D!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&D&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var D=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===D)return a}else return a;if(a=NA(a.nextSibling),a===null)break}return null}function P_(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=NA(a.nextSibling),a===null))return null;return a}function bj(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=NA(a.nextSibling),a===null))return null;return a}function py(a){return a.data==="$?"||a.data==="$~"}function gy(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function k_(a,l){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||d.readyState!=="loading")l();else{var p=function(){l(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function NA(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var xy=null;function wj(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(l===0)return NA(a.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}a=a.nextSibling}return null}function jj(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return a;l--}else d!=="/$"&&d!=="/&"||l++}a=a.previousSibling}return null}function Bj(a,l,d){switch(l=N0(d),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function mp(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);ea(a)}var EA=new Map,Sj=new Set;function E0(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var xu=X.d;X.d={f:M_,r:H_,D:V_,C:K_,L:z_,m:G_,X:Y_,S:$_,M:W_};function M_(){var a=xu.f(),l=ao();return a||l}function H_(a){var l=Fr(a);l!==null&&l.tag===5&&l.type==="form"?qg(l):xu.r(a)}var Lf=typeof document>"u"?null:document;function Cj(a,l,d){var p=Lf;if(p&&typeof l=="string"&&l){var T=_t(l);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),Sj.has(T)||(Sj.add(T),a={rel:a,crossOrigin:d,href:l},p.querySelector(T)===null&&(l=p.createElement("link"),So(l,"link",a),zn(l),p.head.appendChild(l)))}}function V_(a){xu.D(a),Cj("dns-prefetch",a,null)}function K_(a,l){xu.C(a,l),Cj("preconnect",a,l)}function z_(a,l,d){xu.L(a,l,d);var p=Lf;if(p&&a&&l){var T='link[rel="preload"][as="'+_t(l)+'"]';l==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+_t(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+_t(d.imageSizes)+'"]')):T+='[href="'+_t(a)+'"]';var D=T;switch(l){case"style":D=Qf(a);break;case"script":D=Of(a)}EA.has(D)||(a=m({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),EA.set(D,a),p.querySelector(T)!==null||l==="style"&&p.querySelector(pp(D))||l==="script"&&p.querySelector(gp(D))||(l=p.createElement("link"),So(l,"link",a),zn(l),p.head.appendChild(l)))}}function G_(a,l){xu.m(a,l);var d=Lf;if(d&&a){var p=l&&typeof l.as=="string"?l.as:"script",T='link[rel="modulepreload"][as="'+_t(p)+'"][href="'+_t(a)+'"]',D=T;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Of(a)}if(!EA.has(D)&&(a=m({rel:"modulepreload",href:a},l),EA.set(D,a),d.querySelector(T)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(gp(D)))return}p=d.createElement("link"),So(p,"link",a),zn(p),d.head.appendChild(p)}}}function $_(a,l,d){xu.S(a,l,d);var p=Lf;if(p&&a){var T=La(p).hoistableStyles,D=Qf(a);l=l||"default";var te=T.get(D);if(!te){var ye={loading:0,preload:null};if(te=p.querySelector(pp(D)))ye.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},d),(d=EA.get(D))&&vy(a,d);var Re=te=p.createElement("link");zn(Re),So(Re,"link",a),Re._p=new Promise(function(tt,yt){Re.onload=tt,Re.onerror=yt}),Re.addEventListener("load",function(){ye.loading|=1}),Re.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,T0(te,l,p)}te={type:"stylesheet",instance:te,count:1,state:ye},T.set(D,te)}}}function Y_(a,l){xu.X(a,l);var d=Lf;if(d&&a){var p=La(d).hoistableScripts,T=Of(a),D=p.get(T);D||(D=d.querySelector(gp(T)),D||(a=m({src:a,async:!0},l),(l=EA.get(T))&&yy(a,l),D=d.createElement("script"),zn(D),So(D,"link",a),d.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},p.set(T,D))}}function W_(a,l){xu.M(a,l);var d=Lf;if(d&&a){var p=La(d).hoistableScripts,T=Of(a),D=p.get(T);D||(D=d.querySelector(gp(T)),D||(a=m({src:a,async:!0,type:"module"},l),(l=EA.get(T))&&yy(a,l),D=d.createElement("script"),zn(D),So(D,"link",a),d.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},p.set(T,D))}}function Nj(a,l,d,p){var T=(T=ce.current)?E0(T):null;if(!T)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Qf(d.href),d=La(T).hoistableStyles,p=d.get(l),p||(p={type:"style",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Qf(d.href);var D=La(T).hoistableStyles,te=D.get(a);if(te||(T=T.ownerDocument||T,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(a,te),(D=T.querySelector(pp(a)))&&!D._p&&(te.instance=D,te.state.loading=5),EA.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},EA.set(a,d),D||X_(T,a,d,te.state))),l&&p===null)throw Error(n(528,""));return te}if(l&&p!==null)throw Error(n(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Of(d),d=La(T).hoistableScripts,p=d.get(l),p||(p={type:"script",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Qf(a){return'href="'+_t(a)+'"'}function pp(a){return'link[rel="stylesheet"]['+a+"]"}function Ej(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function X_(a,l,d,p){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=a.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),So(l,"link",d),zn(l),a.head.appendChild(l))}function Of(a){return'[src="'+_t(a)+'"]'}function gp(a){return"script[async]"+a}function Tj(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var p=a.querySelector('style[data-href~="'+_t(d.href)+'"]');if(p)return l.instance=p,zn(p),p;var T=m({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),zn(p),So(p,"style",T),T0(p,d.precedence,a),l.instance=p;case"stylesheet":T=Qf(d.href);var D=a.querySelector(pp(T));if(D)return l.state.loading|=4,l.instance=D,zn(D),D;p=Ej(d),(T=EA.get(T))&&vy(p,T),D=(a.ownerDocument||a).createElement("link"),zn(D);var te=D;return te._p=new Promise(function(ye,Re){te.onload=ye,te.onerror=Re}),So(D,"link",p),l.state.loading|=4,T0(D,d.precedence,a),l.instance=D;case"script":return D=Of(d.src),(T=a.querySelector(gp(D)))?(l.instance=T,zn(T),T):(p=d,(T=EA.get(D))&&(p=m({},d),yy(p,T)),a=a.ownerDocument||a,T=a.createElement("script"),zn(T),So(T,"link",p),a.head.appendChild(T),l.instance=T);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,T0(p,d.precedence,a));return l.instance}function T0(a,l,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=p.length?p[p.length-1]:null,D=T,te=0;te<p.length;te++){var ye=p[te];if(ye.dataset.precedence===l)D=ye;else if(D!==T)break}D?D.parentNode.insertBefore(a,D.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function vy(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function yy(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var I0=null;function Ij(a,l,d){if(I0===null){var p=new Map,T=I0=new Map;T.set(d,p)}else T=I0,p=T.get(d),p||(p=new Map,T.set(d,p));if(p.has(a))return p;for(p.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var D=d[T];if(!(D[_r]||D[En]||a==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var te=D.getAttribute(l)||"";te=a+te;var ye=p.get(te);ye?ye.push(D):p.set(te,[D])}}return p}function _j(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function J_(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Fj(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function q_(a,l,d,p){if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=Qf(p.href),D=l.querySelector(pp(T));if(D){l=D._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=_0.bind(a),l.then(a,a)),d.state.loading|=4,d.instance=D,zn(D);return}D=l.ownerDocument||l,p=Ej(p),(T=EA.get(T))&&vy(p,T),D=D.createElement("link"),zn(D);var te=D;te._p=new Promise(function(ye,Re){te.onload=ye,te.onerror=Re}),So(D,"link",p),d.instance=D}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=_0.bind(a),l.addEventListener("load",d),l.addEventListener("error",d))}}var by=0;function Z_(a,l){return a.stylesheets&&a.count===0&&U0(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var p=setTimeout(function(){if(a.stylesheets&&U0(a,a.stylesheets),a.unsuspend){var D=a.unsuspend;a.unsuspend=null,D()}},6e4+l);0<a.imgBytes&&by===0&&(by=62500*U_());var T=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&U0(a,a.stylesheets),a.unsuspend)){var D=a.unsuspend;a.unsuspend=null,D()}},(a.imgBytes>by?50:800)+l);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(T)}}:null}function _0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)U0(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var F0=null;function U0(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,F0=new Map,l.forEach(e6,a),F0=null,_0.call(a))}function e6(a,l){if(!(l.state.loading&4)){var d=F0.get(a);if(d)var p=d.get(null);else{d=new Map,F0.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<T.length;D++){var te=T[D];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(d.set(te.dataset.precedence,te),p=te)}p&&d.set(null,p)}T=l.instance,te=T.getAttribute("data-precedence"),D=d.get(te)||p,D===p&&d.set(null,T),d.set(te,T),this.count++,p=_0.bind(this),T.addEventListener("load",p),T.addEventListener("error",p),D?D.parentNode.insertBefore(T,D.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),l.state.loading|=4}}var xp={$$typeof:F,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function t6(a,l,d,p,T,D,te,ye,Re){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=p,this.onUncaughtError=T,this.onCaughtError=D,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function Uj(a,l,d,p,T,D,te,ye,Re,tt,yt,Tt){return a=new t6(a,l,d,te,Re,tt,yt,Tt,ye),l=1,D===!0&&(l|=24),D=Qi(3,null,null,l),a.current=D,D.stateNode=a,l=yc(),l.refCount++,a.pooledCache=l,l.refCount++,D.memoizedState={element:p,isDehydrated:d,cache:l},es(D),a}function Dj(a){return a?(a=bi,a):bi}function Rj(a,l,d,p,T,D){T=Dj(T),p.context===null?p.context=T:p.pendingContext=T,p=Vs(l),p.payload={element:d},D=D===void 0?null:D,D!==null&&(p.callback=D),d=Ws(a,p,l),d!==null&&(Kr(d,a,l),fr(d,a,l))}function Lj(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function wy(a,l){Lj(a,l),(a=a.alternate)&&Lj(a,l)}function Qj(a){if(a.tag===13||a.tag===31){var l=Il(a,67108864);l!==null&&Kr(l,a,67108864),wy(a,67108864)}}function Oj(a){if(a.tag===13||a.tag===31){var l=Ds();l=Zt(l);var d=Il(a,l);d!==null&&Kr(d,a,l),wy(a,l)}}var D0=!0;function s6(a,l,d,p){var T=oe.T;oe.T=null;var D=X.p;try{X.p=2,jy(a,l,d,p)}finally{X.p=D,oe.T=T}}function n6(a,l,d,p){var T=oe.T;oe.T=null;var D=X.p;try{X.p=8,jy(a,l,d,p)}finally{X.p=D,oe.T=T}}function jy(a,l,d,p){if(D0){var T=By(p);if(T===null)Ay(a,l,p,R0,d),kj(a,p);else if(a6(T,a,l,d,p))p.stopPropagation();else if(kj(a,p),l&4&&-1<r6.indexOf(a)){for(;T!==null;){var D=Fr(T);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var te=it(D.pendingLanes);if(te!==0){var ye=D;for(ye.pendingLanes|=2,ye.entangledLanes|=2;te;){var Re=1<<31-Ot(te);ye.entanglements[1]|=Re,te&=~Re}Lc(D),(gr&6)===0&&(As=ts()+500,dp(0))}}break;case 31:case 13:ye=Il(D,2),ye!==null&&Kr(ye,D,2),ao(),wy(D,2)}if(D=By(p),D===null&&Ay(a,l,p,R0,d),D===T)break;T=D}T!==null&&p.stopPropagation()}else Ay(a,l,p,null,d)}}function By(a){return a=ja(a),Sy(a)}var R0=null;function Sy(a){if(R0=null,a=xr(a),a!==null){var l=o(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=c(l),a!==null)return a;a=null}else if(d===31){if(a=h(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return R0=a,null}function Pj(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(as()){case Xe:return 2;case Vt:return 8;case Kt:case Mt:return 32;case mt:return 268435456;default:return 32}default:return 32}}var Cy=!1,hd=null,fd=null,md=null,vp=new Map,yp=new Map,pd=[],r6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kj(a,l){switch(a){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":md=null;break;case"pointerover":case"pointerout":vp.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(l.pointerId)}}function bp(a,l,d,p,T,D){return a===null||a.nativeEvent!==D?(a={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:D,targetContainers:[T]},l!==null&&(l=Fr(l),l!==null&&Qj(l)),a):(a.eventSystemFlags|=p,l=a.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),a)}function a6(a,l,d,p,T){switch(l){case"focusin":return hd=bp(hd,a,l,d,p,T),!0;case"dragenter":return fd=bp(fd,a,l,d,p,T),!0;case"mouseover":return md=bp(md,a,l,d,p,T),!0;case"pointerover":var D=T.pointerId;return vp.set(D,bp(vp.get(D)||null,a,l,d,p,T)),!0;case"gotpointercapture":return D=T.pointerId,yp.set(D,bp(yp.get(D)||null,a,l,d,p,T)),!0}return!1}function Mj(a){var l=xr(a.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){a.blockedOn=l,Nn(a.priority,function(){Oj(d)});return}}else if(l===31){if(l=h(d),l!==null){a.blockedOn=l,Nn(a.priority,function(){Oj(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function L0(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=By(a.nativeEvent);if(d===null){d=a.nativeEvent;var p=new d.constructor(d.type,d);_i=p,d.target.dispatchEvent(p),_i=null}else return l=Fr(d),l!==null&&Qj(l),a.blockedOn=d,!1;l.shift()}return!0}function Hj(a,l,d){L0(a)&&d.delete(l)}function i6(){Cy=!1,hd!==null&&L0(hd)&&(hd=null),fd!==null&&L0(fd)&&(fd=null),md!==null&&L0(md)&&(md=null),vp.forEach(Hj),yp.forEach(Hj)}function Q0(a,l){a.blockedOn===l&&(a.blockedOn=null,Cy||(Cy=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,i6)))}var O0=null;function Vj(a){O0!==a&&(O0=a,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){O0===a&&(O0=null);for(var l=0;l<a.length;l+=3){var d=a[l],p=a[l+1],T=a[l+2];if(typeof p!="function"){if(Sy(p||d)===null)continue;break}var D=Fr(d);D!==null&&(a.splice(l,3),l-=3,wf(D,{pending:!0,data:T,method:d.method,action:p},p,T))}}))}function Pf(a){function l(Re){return Q0(Re,a)}hd!==null&&Q0(hd,a),fd!==null&&Q0(fd,a),md!==null&&Q0(md,a),vp.forEach(l),yp.forEach(l);for(var d=0;d<pd.length;d++){var p=pd[d];p.blockedOn===a&&(p.blockedOn=null)}for(;0<pd.length&&(d=pd[0],d.blockedOn===null);)Mj(d),d.blockedOn===null&&pd.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var T=d[p],D=d[p+1],te=T[An]||null;if(typeof D=="function")te||Vj(d);else if(te){var ye=null;if(D&&D.hasAttribute("formAction")){if(T=D,te=D[An]||null)ye=te.formAction;else if(Sy(T)!==null)continue}else ye=te.action;typeof ye=="function"?d[p+1]=ye:(d.splice(p,3),p-=3),Vj(d)}}}function Kj(){function a(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(te){return T=te})},focusReset:"manual",scroll:"manual"})}function l(){T!==null&&(T(),T=null),p||setTimeout(d,20)}function d(){if(!p&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,T=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),T!==null&&(T(),T=null)}}}function Ny(a){this._internalRoot=a}P0.prototype.render=Ny.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var d=l.current,p=Ds();Rj(d,p,a,l,null,null)},P0.prototype.unmount=Ny.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Rj(a.current,2,null,a,null,null),ao(),l[Ir]=null}};function P0(a){this._internalRoot=a}P0.prototype.unstable_scheduleHydration=function(a){if(a){var l=pn();a={blockedOn:null,target:a,priority:l};for(var d=0;d<pd.length&&l!==0&&l<pd[d].priority;d++);pd.splice(d,0,a),d===0&&Mj(a)}};var zj=e.version;if(zj!=="19.2.3")throw Error(n(527,zj,"19.2.3"));X.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=f(l),a=a!==null?A(a):null,a=a===null?null:a.stateNode,a};var o6={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k0.isDisabled&&k0.supportsFiber)try{$t=k0.inject(o6),Wt=k0}catch{}}return jp.createRoot=function(a,l){if(!r(a))throw Error(n(299));var d=!1,p="",T=s0,D=vh,te=yh;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(te=l.onRecoverableError)),l=Uj(a,1,!1,null,null,d,p,null,T,D,te,Kj),a[Ir]=l.current,ly(a),new Ny(l)},jp.hydrateRoot=function(a,l,d){if(!r(a))throw Error(n(299));var p=!1,T="",D=s0,te=vh,ye=yh,Re=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(D=d.onUncaughtError),d.onCaughtError!==void 0&&(te=d.onCaughtError),d.onRecoverableError!==void 0&&(ye=d.onRecoverableError),d.formState!==void 0&&(Re=d.formState)),l=Uj(a,1,!0,l,d??null,p,T,Re,D,te,ye,Kj),l.context=Dj(null),d=l.current,p=Ds(),p=Zt(p),T=Vs(p),T.callback=null,Ws(d,T,p),d=p,l.current.lanes=d,Yt(l,d),Lc(l),a[Ir]=l.current,ly(a),new P0(l)},jp.version="19.2.3",jp}var sB;function y6(){if(sB)return Iy.exports;sB=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Iy.exports=v6(),Iy.exports}var b6=y6();const w6=qb(b6);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var nB="popstate";function j6(s={}){function e(r,o){let{pathname:c="/",search:h="",hash:u=""}=af(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),k1("",{pathname:c,search:h,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){let c=r.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let u=r.location.href,f=u.indexOf("#");h=f===-1?u:u.slice(0,f)}return h+"#"+(typeof o=="string"?o:rg(o))}function n(r,o){cA(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return S6(e,t,n,s)}function Ja(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function cA(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B6(){return Math.random().toString(36).substring(2,10)}function rB(s,e){return{usr:s.state,key:s.key,idx:e}}function k1(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?af(e):e,state:t,key:e&&e.key||n||B6()}}function rg({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function af(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function S6(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,c=r.history,h="POP",u=null,f=A();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function A(){return(c.state||{idx:null}).idx}function m(){h="POP";let N=A(),C=N==null?null:N-f;f=N,u&&u({action:h,location:I.location,delta:C})}function x(N,C){h="PUSH";let E=k1(I.location,N,C);t&&t(E,N),f=A()+1;let F=rB(E,f),L=I.createHref(E);try{c.pushState(F,"",L)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;r.location.assign(L)}o&&u&&u({action:h,location:I.location,delta:1})}function g(N,C){h="REPLACE";let E=k1(I.location,N,C);t&&t(E,N),f=A();let F=rB(E,f),L=I.createHref(E);c.replaceState(F,"",L),o&&u&&u({action:h,location:I.location,delta:0})}function b(N){return C6(N)}let I={get action(){return h},get location(){return s(r,c)},listen(N){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(nB,m),u=N,()=>{r.removeEventListener(nB,m),u=null}},createHref(N){return e(r,N)},createURL:b,encodeLocation(N){let C=b(N);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:g,go(N){return c.go(N)}};return I}function C6(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ja(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:rg(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function HN(s,e,t="/"){return N6(s,e,t,!1)}function N6(s,e,t,n){let r=typeof e=="string"?af(e):e,o=Nu(r.pathname||"/",t);if(o==null)return null;let c=VN(s);E6(c);let h=null;for(let u=0;h==null&&u<c.length;++u){let f=P6(o);h=Q6(c[u],f,n)}return h}function VN(s,e=[],t=[],n="",r=!1){let o=(c,h,u=r,f)=>{let A={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(n)&&u)return;Ja(A.relativePath.startsWith(n),`Absolute route path "${A.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(n.length)}let m=Su([n,A.relativePath]),x=t.concat(A);c.children&&c.children.length>0&&(Ja(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),VN(c.children,e,x,m,u)),!(c.path==null&&!c.index)&&e.push({path:m,score:R6(m,c.index),routesMeta:x})};return s.forEach((c,h)=>{var u;if(c.path===""||!((u=c.path)!=null&&u.includes("?")))o(c,h);else for(let f of KN(c.path))o(c,h,!0,f)}),e}function KN(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let c=KN(n.join("/")),h=[];return h.push(...c.map(u=>u===""?o:[o,u].join("/"))),r&&h.push(...c),h.map(u=>s.startsWith("/")&&u===""?"/":u)}function E6(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:L6(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var T6=/^:[\w-]+$/,I6=3,_6=2,F6=1,U6=10,D6=-2,aB=s=>s==="*";function R6(s,e){let t=s.split("/"),n=t.length;return t.some(aB)&&(n+=D6),e&&(n+=_6),t.filter(r=>!aB(r)).reduce((r,o)=>r+(T6.test(o)?I6:o===""?F6:U6),n)}function L6(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function Q6(s,e,t=!1){let{routesMeta:n}=s,r={},o="/",c=[];for(let h=0;h<n.length;++h){let u=n[h],f=h===n.length-1,A=o==="/"?e:e.slice(o.length)||"/",m=Ix({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},A),x=u.route;if(!m&&f&&t&&!n[n.length-1].route.index&&(m=Ix({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},A)),!m)return null;Object.assign(r,m.params),c.push({params:r,pathname:Su([o,m.pathname]),pathnameBase:V6(Su([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=Su([o,m.pathnameBase]))}return c}function Ix(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=O6(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:n.reduce((f,{paramName:A,isOptional:m},x)=>{if(A==="*"){let b=h[x]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const g=h[x];return m&&!g?f[A]=void 0:f[A]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:s}}function O6(s,e=!1,t=!0){cA(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,u)=>(n.push({paramName:h,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function P6(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cA(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Nu(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var zN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k6=s=>zN.test(s);function M6(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?af(s):s,o;if(t)if(k6(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),cA(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=iB(t.substring(1),"/"):o=iB(t,e)}else o=e;return{pathname:o,search:K6(n),hash:z6(r)}}function iB(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Dy(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H6(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ew(s){let e=H6(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function tw(s,e,t,n=!1){let r;typeof s=="string"?r=af(s):(r={...s},Ja(!r.pathname||!r.pathname.includes("?"),Dy("?","pathname","search",r)),Ja(!r.pathname||!r.pathname.includes("#"),Dy("#","pathname","hash",r)),Ja(!r.search||!r.search.includes("#"),Dy("#","search","hash",r)));let o=s===""||r.pathname==="",c=o?"/":r.pathname,h;if(c==null)h=t;else{let m=e.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),m-=1;r.pathname=x.join("/")}h=m>=0?e[m]:"/"}let u=M6(r,h),f=c&&c!=="/"&&c.endsWith("/"),A=(o||c===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(f||A)&&(u.pathname+="/"),u}var Su=s=>s.join("/").replace(/\/\/+/g,"/"),V6=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),K6=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,z6=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,G6=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function $6(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Y6(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var GN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $N(s,e){let t=s;if(typeof t!="string"||!zN.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if(GN)try{let o=new URL(window.location.href),c=t.startsWith("//")?new URL(o.protocol+t):new URL(t),h=Nu(c.pathname,e);c.origin===o.origin&&h!=null?t=h+c.search+c.hash:r=!0}catch{cA(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YN=["POST","PUT","PATCH","DELETE"];new Set(YN);var W6=["GET",...YN];new Set(W6);var vm=Z.createContext(null);vm.displayName="DataRouter";var fv=Z.createContext(null);fv.displayName="DataRouterState";var X6=Z.createContext(!1),WN=Z.createContext({isTransitioning:!1});WN.displayName="ViewTransition";var J6=Z.createContext(new Map);J6.displayName="Fetchers";var q6=Z.createContext(null);q6.displayName="Await";var uA=Z.createContext(null);uA.displayName="Navigation";var Sg=Z.createContext(null);Sg.displayName="Location";var cc=Z.createContext({outlet:null,matches:[],isDataRoute:!1});cc.displayName="Route";var sw=Z.createContext(null);sw.displayName="RouteError";var XN="REACT_ROUTER_ERROR",Z6="REDIRECT",eF="ROUTE_ERROR_RESPONSE";function tF(s){if(s.startsWith(`${XN}:${Z6}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sF(s){if(s.startsWith(`${XN}:${eF}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new G6(e.status,e.statusText,e.data)}catch{}}function nF(s,{relative:e}={}){Ja(ym(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Z.useContext(uA),{hash:r,pathname:o,search:c}=Cg(s,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Su([t,o])),n.createHref({pathname:h,search:c,hash:r})}function ym(){return Z.useContext(Sg)!=null}function Uu(){return Ja(ym(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Sg).location}var JN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qN(s){Z.useContext(uA).static||Z.useLayoutEffect(s)}function bm(){let{isDataRoute:s}=Z.useContext(cc);return s?gF():rF()}function rF(){Ja(ym(),"useNavigate() may be used only in the context of a <Router> component.");let s=Z.useContext(vm),{basename:e,navigator:t}=Z.useContext(uA),{matches:n}=Z.useContext(cc),{pathname:r}=Uu(),o=JSON.stringify(ew(n)),c=Z.useRef(!1);return qN(()=>{c.current=!0}),Z.useCallback((u,f={})=>{if(cA(c.current,JN),!c.current)return;if(typeof u=="number"){t.go(u);return}let A=tw(u,JSON.parse(o),r,f.relative==="path");s==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:Su([e,A.pathname])),(f.replace?t.replace:t.push)(A,f.state,f)},[e,t,o,r,s])}Z.createContext(null);function aF(){let{matches:s}=Z.useContext(cc),e=s[s.length-1];return e?e.params:{}}function Cg(s,{relative:e}={}){let{matches:t}=Z.useContext(cc),{pathname:n}=Uu(),r=JSON.stringify(ew(t));return Z.useMemo(()=>tw(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function iF(s,e){return ZN(s,e)}function ZN(s,e,t,n,r){var E;Ja(ym(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Z.useContext(uA),{matches:c}=Z.useContext(cc),h=c[c.length-1],u=h?h.params:{},f=h?h.pathname:"/",A=h?h.pathnameBase:"/",m=h&&h.route;{let F=m&&m.path||"";tE(f,!m||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let x=Uu(),g;if(e){let F=typeof e=="string"?af(e):e;Ja(A==="/"||((E=F.pathname)==null?void 0:E.startsWith(A)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${F.pathname}" was given in the \`location\` prop.`),g=F}else g=x;let b=g.pathname||"/",I=b;if(A!=="/"){let F=A.replace(/^\//,"").split("/");I="/"+b.replace(/^\//,"").split("/").slice(F.length).join("/")}let N=HN(s,{pathname:I});cA(m||N!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),cA(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=uF(N&&N.map(F=>Object.assign({},F,{params:Object.assign({},u,F.params),pathname:Su([A,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?A:Su([A,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,n,r);return e&&C?Z.createElement(Sg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function oF(){let s=pF(),e=$6(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:o},"ErrorBoundary")," or"," ",Z.createElement("code",{style:o},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),t?Z.createElement("pre",{style:r},t):null,c)}var lF=Z.createElement(oF,null),eE=class extends Z.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=sF(s.digest);t&&(s=t)}let e=s!==void 0?Z.createElement(cc.Provider,{value:this.props.routeContext},Z.createElement(sw.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?Z.createElement(AF,{error:s},e):e}};eE.contextType=X6;var Ry=new WeakMap;function AF({children:s,error:e}){let{basename:t}=Z.useContext(uA);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=tF(e.digest);if(n){let r=Ry.get(e);if(r)throw r;let o=$N(n.location,t);if(GN&&!Ry.get(e))if(o.isExternal||n.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:n.replace}));throw Ry.set(e,c),c}return Z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return s}function cF({routeContext:s,match:e,children:t}){let n=Z.useContext(vm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(cc.Provider,{value:s},t)}function uF(s,e=[],t=null,n=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,c=t==null?void 0:t.errors;if(c!=null){let A=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);Ja(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,A+1))}let h=!1,u=-1;if(t)for(let A=0;A<o.length;A++){let m=o[A];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=A),m.route.id){let{loaderData:x,errors:g}=t,b=m.route.loader&&!x.hasOwnProperty(m.route.id)&&(!g||g[m.route.id]===void 0);if(m.route.lazy||b){h=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}let f=t&&n?(A,m)=>{var x,g;n(A,{location:t.location,params:((g=(x=t.matches)==null?void 0:x[0])==null?void 0:g.params)??{},unstable_pattern:Y6(t.matches),errorInfo:m})}:void 0;return o.reduceRight((A,m,x)=>{let g,b=!1,I=null,N=null;t&&(g=c&&m.route.id?c[m.route.id]:void 0,I=m.route.errorElement||lF,h&&(u<0&&x===0?(tE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):u===x&&(b=!0,N=m.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,x+1)),E=()=>{let F;return g?F=I:b?F=N:m.route.Component?F=Z.createElement(m.route.Component,null):m.route.element?F=m.route.element:F=A,Z.createElement(cF,{match:m,routeContext:{outlet:A,matches:C,isDataRoute:t!=null},children:F})};return t&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?Z.createElement(eE,{location:t.location,revalidation:t.revalidation,component:I,error:g,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):E()},null)}function nw(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dF(s){let e=Z.useContext(vm);return Ja(e,nw(s)),e}function hF(s){let e=Z.useContext(fv);return Ja(e,nw(s)),e}function fF(s){let e=Z.useContext(cc);return Ja(e,nw(s)),e}function rw(s){let e=fF(s),t=e.matches[e.matches.length-1];return Ja(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function mF(){return rw("useRouteId")}function pF(){var n;let s=Z.useContext(sw),e=hF("useRouteError"),t=rw("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function gF(){let{router:s}=dF("useNavigate"),e=rw("useNavigate"),t=Z.useRef(!1);return qN(()=>{t.current=!0}),Z.useCallback(async(r,o={})=>{cA(t.current,JN),t.current&&(typeof r=="number"?await s.navigate(r):await s.navigate(r,{fromRouteId:e,...o}))},[s,e])}var oB={};function tE(s,e,t){!e&&!oB[s]&&(oB[s]=!0,cA(!1,t))}Z.memo(xF);function xF({routes:s,future:e,state:t,onError:n}){return ZN(s,void 0,t,n,e)}function M1({to:s,replace:e,state:t,relative:n}){Ja(ym(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=Z.useContext(uA);cA(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=Z.useContext(cc),{pathname:c}=Uu(),h=bm(),u=tw(s,ew(o),c,n==="path"),f=JSON.stringify(u);return Z.useEffect(()=>{h(JSON.parse(f),{replace:e,state:t,relative:n})},[h,f,n,e,t]),null}function Xa(s){Ja(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vF({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:o=!1,unstable_useTransitions:c}){Ja(!ym(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),u=Z.useMemo(()=>({basename:h,navigator:r,static:o,unstable_useTransitions:c,future:{}}),[h,r,o,c]);typeof t=="string"&&(t=af(t));let{pathname:f="/",search:A="",hash:m="",state:x=null,key:g="default"}=t,b=Z.useMemo(()=>{let I=Nu(f,h);return I==null?null:{location:{pathname:I,search:A,hash:m,state:x,key:g},navigationType:n}},[h,f,A,m,x,g,n]);return cA(b!=null,`<Router basename="${h}"> is not able to match the URL "${f}${A}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:Z.createElement(uA.Provider,{value:u},Z.createElement(Sg.Provider,{children:e,value:b}))}function yF({children:s,location:e}){return iF(H1(s),e)}function H1(s,e=[]){let t=[];return Z.Children.forEach(s,(n,r)=>{if(!Z.isValidElement(n))return;let o=[...e,r];if(n.type===Z.Fragment){t.push.apply(t,H1(n.props.children,o));return}Ja(n.type===Xa,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ja(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=H1(n.props.children,o)),t.push(c)}),t}var cx="get",ux="application/x-www-form-urlencoded";function mv(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function bF(s){return mv(s)&&s.tagName.toLowerCase()==="button"}function wF(s){return mv(s)&&s.tagName.toLowerCase()==="form"}function jF(s){return mv(s)&&s.tagName.toLowerCase()==="input"}function BF(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function SF(s,e){return s.button===0&&(!e||e==="_self")&&!BF(s)}var M0=null;function CF(){if(M0===null)try{new FormData(document.createElement("form"),0),M0=!1}catch{M0=!0}return M0}var NF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ly(s){return s!=null&&!NF.has(s)?(cA(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ux}"`),null):s}function EF(s,e){let t,n,r,o,c;if(wF(s)){let h=s.getAttribute("action");n=h?Nu(h,e):null,t=s.getAttribute("method")||cx,r=Ly(s.getAttribute("enctype"))||ux,o=new FormData(s)}else if(bF(s)||jF(s)&&(s.type==="submit"||s.type==="image")){let h=s.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=s.getAttribute("formaction")||h.getAttribute("action");if(n=u?Nu(u,e):null,t=s.getAttribute("formmethod")||h.getAttribute("method")||cx,r=Ly(s.getAttribute("formenctype"))||Ly(h.getAttribute("enctype"))||ux,o=new FormData(h,s),!CF()){let{name:f,type:A,value:m}=s;if(A==="image"){let x=f?`${f}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else f&&o.append(f,m)}}else{if(mv(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cx,n=null,r=ux,c=s}return o&&r==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function aw(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function TF(s,e,t){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Nu(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function IF(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _F(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function FF(s,e,t){let n=await Promise.all(s.map(async r=>{let o=e.routes[r.route.id];if(o){let c=await IF(o,t);return c.links?c.links():[]}return[]}));return LF(n.flat(1).filter(_F).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function lB(s,e,t,n,r,o){let c=(u,f)=>t[f]?u.route.id!==t[f].route.id:!0,h=(u,f)=>{var A;return t[f].pathname!==u.pathname||((A=t[f].route.path)==null?void 0:A.endsWith("*"))&&t[f].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,f)=>c(u,f)||h(u,f)):o==="data"?e.filter((u,f)=>{var m;let A=n.routes[u.route.id];if(!A||!A.hasLoader)return!1;if(c(u,f)||h(u,f))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(s,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function UF(s,e,{includeHydrateFallback:t}={}){return DF(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function DF(s){return[...new Set(s)]}function RF(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function LF(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let o=JSON.stringify(RF(r));return t.has(o)||(t.add(o),n.push({key:o,link:r})),n},[])}function sE(){let s=Z.useContext(vm);return aw(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function QF(){let s=Z.useContext(fv);return aw(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var iw=Z.createContext(void 0);iw.displayName="FrameworkContext";function nE(){let s=Z.useContext(iw);return aw(s,"You must render this element inside a <HydratedRouter> element"),s}function OF(s,e){let t=Z.useContext(iw),[n,r]=Z.useState(!1),[o,c]=Z.useState(!1),{onFocus:h,onBlur:u,onMouseEnter:f,onMouseLeave:A,onTouchStart:m}=e,x=Z.useRef(null);Z.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let I=C=>{C.forEach(E=>{c(E.isIntersecting)})},N=new IntersectionObserver(I,{threshold:.5});return x.current&&N.observe(x.current),()=>{N.disconnect()}}},[s]),Z.useEffect(()=>{if(n){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[n]);let g=()=>{r(!0)},b=()=>{r(!1),c(!1)};return t?s!=="intent"?[o,x,{}]:[o,x,{onFocus:Bp(h,g),onBlur:Bp(u,b),onMouseEnter:Bp(f,g),onMouseLeave:Bp(A,b),onTouchStart:Bp(m,g)}]:[!1,x,{}]}function Bp(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function PF({page:s,...e}){let{router:t}=sE(),n=Z.useMemo(()=>HN(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?Z.createElement(MF,{page:s,matches:n,...e}):null}function kF(s){let{manifest:e,routeModules:t}=nE(),[n,r]=Z.useState([]);return Z.useEffect(()=>{let o=!1;return FF(s,e,t).then(c=>{o||r(c)}),()=>{o=!0}},[s,e,t]),n}function MF({page:s,matches:e,...t}){let n=Uu(),{manifest:r,routeModules:o}=nE(),{basename:c}=sE(),{loaderData:h,matches:u}=QF(),f=Z.useMemo(()=>lB(s,e,u,r,n,"data"),[s,e,u,r,n]),A=Z.useMemo(()=>lB(s,e,u,r,n,"assets"),[s,e,u,r,n]),m=Z.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let b=new Set,I=!1;if(e.forEach(C=>{var F;let E=r.routes[C.route.id];!E||!E.hasLoader||(!f.some(L=>L.route.id===C.route.id)&&C.route.id in h&&((F=o[C.route.id])!=null&&F.shouldRevalidate)||E.hasClientLoader?I=!0:b.add(C.route.id))}),b.size===0)return[];let N=TF(s,c,"data");return I&&b.size>0&&N.searchParams.set("_routes",e.filter(C=>b.has(C.route.id)).map(C=>C.route.id).join(",")),[N.pathname+N.search]},[c,h,n,r,f,e,s,o]),x=Z.useMemo(()=>UF(A,r),[A,r]),g=kF(A);return Z.createElement(Z.Fragment,null,m.map(b=>Z.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),x.map(b=>Z.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),g.map(({key:b,link:I})=>Z.createElement("link",{key:b,nonce:t.nonce,...I})))}function HF(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var VF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VF&&(window.__reactRouterVersion="7.11.0")}catch{}function KF({basename:s,children:e,unstable_useTransitions:t,window:n}){let r=Z.useRef();r.current==null&&(r.current=j6({window:n,v5Compat:!0}));let o=r.current,[c,h]=Z.useState({action:o.action,location:o.location}),u=Z.useCallback(f=>{t===!1?h(f):Z.startTransition(()=>h(f))},[t]);return Z.useLayoutEffect(()=>o.listen(u),[o,u]),Z.createElement(vF,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t})}var rE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ua=Z.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:c,state:h,target:u,to:f,preventScrollReset:A,viewTransition:m,unstable_defaultShouldRevalidate:x,...g},b){let{basename:I,unstable_useTransitions:N}=Z.useContext(uA),C=typeof f=="string"&&rE.test(f),E=$N(f,I);f=E.to;let F=nF(f,{relative:r}),[L,O,H]=OF(n,g),Q=YF(f,{replace:c,state:h,target:u,preventScrollReset:A,relative:r,viewTransition:m,unstable_defaultShouldRevalidate:x,unstable_useTransitions:N});function U($){e&&e($),$.defaultPrevented||Q($)}let R=Z.createElement("a",{...g,...H,href:E.absoluteURL||F,onClick:E.isExternal||o?e:U,ref:HF(b,O),target:u,"data-discover":!C&&t==="render"?"true":void 0});return L&&!C?Z.createElement(Z.Fragment,null,R,Z.createElement(PF,{page:F})):R});Ua.displayName="Link";var zF=Z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:c,viewTransition:h,children:u,...f},A){let m=Cg(c,{relative:f.relative}),x=Uu(),g=Z.useContext(fv),{navigator:b,basename:I}=Z.useContext(uA),N=g!=null&&ZF(m)&&h===!0,C=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,E=x.pathname,F=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(E=E.toLowerCase(),F=F?F.toLowerCase():null,C=C.toLowerCase()),F&&I&&(F=Nu(F,I)||F);const L=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let O=E===C||!r&&E.startsWith(C)&&E.charAt(L)==="/",H=F!=null&&(F===C||!r&&F.startsWith(C)&&F.charAt(C.length)==="/"),Q={isActive:O,isPending:H,isTransitioning:N},U=O?e:void 0,R;typeof n=="function"?R=n(Q):R=[n,O?"active":null,H?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(Q):o;return Z.createElement(Ua,{...f,"aria-current":U,className:R,ref:A,style:$,to:c,viewTransition:h},typeof u=="function"?u(Q):u)});zF.displayName="NavLink";var GF=Z.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:o,method:c=cx,action:h,onSubmit:u,relative:f,preventScrollReset:A,viewTransition:m,unstable_defaultShouldRevalidate:x,...g},b)=>{let{unstable_useTransitions:I}=Z.useContext(uA),N=JF(),C=qF(h,{relative:f}),E=c.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&rE.test(h),L=O=>{if(u&&u(O),O.defaultPrevented)return;O.preventDefault();let H=O.nativeEvent.submitter,Q=(H==null?void 0:H.getAttribute("formmethod"))||c,U=()=>N(H||O.currentTarget,{fetcherKey:e,method:Q,navigate:t,replace:r,state:o,relative:f,preventScrollReset:A,viewTransition:m,unstable_defaultShouldRevalidate:x});I&&t!==!1?Z.startTransition(()=>U()):U()};return Z.createElement("form",{ref:b,method:E,action:C,onSubmit:n?u:L,...g,"data-discover":!F&&s==="render"?"true":void 0})});GF.displayName="Form";function $F(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aE(s){let e=Z.useContext(vm);return Ja(e,$F(s)),e}function YF(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:u}={}){let f=bm(),A=Uu(),m=Cg(s,{relative:o});return Z.useCallback(x=>{if(SF(x,e)){x.preventDefault();let g=t!==void 0?t:rg(A)===rg(m),b=()=>f(s,{replace:g,state:n,preventScrollReset:r,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:h});u?Z.startTransition(()=>b()):b()}},[A,f,m,t,n,e,s,r,o,c,h,u])}var WF=0,XF=()=>`__${String(++WF)}__`;function JF(){let{router:s}=aE("useSubmit"),{basename:e}=Z.useContext(uA),t=mF(),n=s.fetch,r=s.navigate;return Z.useCallback(async(o,c={})=>{let{action:h,method:u,encType:f,formData:A,body:m}=EF(o,e);if(c.navigate===!1){let x=c.fetcherKey||XF();await n(x,t,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:A,body:m,formMethod:c.method||u,formEncType:c.encType||f,flushSync:c.flushSync})}else await r(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:A,body:m,formMethod:c.method||u,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,r,e,t])}function qF(s,{relative:e}={}){let{basename:t}=Z.useContext(uA),n=Z.useContext(cc);Ja(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...Cg(s||".",{relative:e})},c=Uu();if(s==null){o.search=c.search;let h=new URLSearchParams(o.search),u=h.getAll("index");if(u.some(A=>A==="")){h.delete("index"),u.filter(m=>m).forEach(m=>h.append("index",m));let A=h.toString();o.search=A?`?${A}`:""}}return(!s||s===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Su([t,o.pathname])),rg(o)}function ZF(s,{relative:e}={}){let t=Z.useContext(WN);Ja(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=aE("useViewTransitionState"),r=Cg(s,{relative:e});if(!t.isTransitioning)return!1;let o=Nu(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=Nu(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Ix(r.pathname,c)!=null||Ix(r.pathname,o)!=null}const eU=()=>{};var AB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},tU=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const r=s[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const o=s[t++];e[n++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=s[t++],c=s[t++],h=s[t++],u=((r&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const o=s[t++],c=s[t++];e[n++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<s.length;r+=3){const o=s[r],c=r+1<s.length,h=c?s[r+1]:0,u=r+2<s.length,f=u?s[r+2]:0,A=o>>2,m=(o&3)<<4|h>>4;let x=(h&15)<<2|f>>6,g=f&63;u||(g=64,c||(x=64)),n.push(t[A],t[m],t[x],t[g])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(iE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):tU(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<s.length;){const o=t[s.charAt(r++)],h=r<s.length?t[s.charAt(r)]:0;++r;const f=r<s.length?t[s.charAt(r)]:64;++r;const m=r<s.length?t[s.charAt(r)]:64;if(++r,o==null||h==null||f==null||m==null)throw new sU;const x=o<<2|h>>4;if(n.push(x),f!==64){const g=h<<4&240|f>>2;if(n.push(g),m!==64){const b=f<<6&192|m;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class sU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nU=function(s){const e=iE(s);return oE.encodeByteArray(e,!0)},_x=function(s){return nU(s).replace(/\./g,"")},lE=function(s){try{return oE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=()=>rU().__FIREBASE_DEFAULTS__,iU=()=>{if(typeof process>"u"||typeof AB>"u")return;const s=AB.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},oU=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&lE(s[1]);return e&&JSON.parse(e)},pv=()=>{try{return eU()||aU()||iU()||oU()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},AE=s=>{var e,t;return(t=(e=pv())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},cE=s=>{const e=AE(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},uE=()=>{var s;return(s=pv())==null?void 0:s.config},dE=s=>{var e;return(e=pv())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ow(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=s.iat||0,o=s.sub||s.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...s};return[_x(JSON.stringify(t)),_x(JSON.stringify(c)),""].join(".")}const Pp={};function cU(){const s={prod:[],emulator:[]};for(const e of Object.keys(Pp))Pp[e]?s.emulator.push(e):s.prod.push(e);return s}function uU(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let cB=!1;function lw(s,e){if(typeof window>"u"||typeof document>"u"||!qd(window.location.host)||Pp[s]===e||Pp[s]||cB)return;Pp[s]=e;function t(x){return`__firebase__banner__${x}`}const n="__firebase__banner",o=cU().prod.length>0;function c(){const x=document.getElementById(n);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,g){x.setAttribute("width","24"),x.setAttribute("id",g),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{cB=!0,c()},x}function A(x,g){x.setAttribute("id",g),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function m(){const x=uU(n),g=t("text"),b=document.getElementById(g)||document.createElement("span"),I=t("learnmore"),N=document.getElementById(I)||document.createElement("a"),C=t("preprendIcon"),E=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const F=x.element;h(F),A(N,I);const L=f();u(E,C),F.append(E,b,N,L),document.body.appendChild(F)}o?(b.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ol())}function hU(){var e;const s=(e=pv())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mU(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function pU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gU(){const s=ol();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function xU(){return!hU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vU(){try{return typeof indexedDB=="object"}catch{return!1}}function yU(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU="FirebaseError";class uc extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=bU,Object.setPrototypeOf(this,uc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ng.prototype.create)}}class Ng{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],c=o?wU(o,n):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new uc(r,h,n)}}function wU(s,e){return s.replace(jU,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const jU=/\{\$([^}]+)}/g;function BU(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Zh(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const o=s[r],c=e[r];if(uB(o)&&uB(c)){if(!Zh(o,c))return!1}else if(o!==c)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function uB(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ip(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,o]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function _p(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function SU(s,e){const t=new CU(s,e);return t.subscribe.bind(t)}class CU{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");NU(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=Qy),r.error===void 0&&(r.error=Qy),r.complete===void 0&&(r.complete=Qy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NU(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Qy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(s){return s&&s._delegate?s._delegate:s}let Fx=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new lU;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IU(e))try{this.getOrInitializeService({instanceIdentifier:Rh})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});n.resolve(o)}catch{}}}}clearInstance(e=Rh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rh){return this.instances.has(e)}getOptions(e=Rh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);n===h&&c.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const o=this.instances.get(n);return o&&e(o,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:TU(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Rh){return this.component?this.component.multipleInstances?e:Rh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TU(s){return s===Rh?void 0:s}function IU(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new EU(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fa;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Fa||(Fa={}));const FU={debug:Fa.DEBUG,verbose:Fa.VERBOSE,info:Fa.INFO,warn:Fa.WARN,error:Fa.ERROR,silent:Fa.SILENT},UU=Fa.INFO,DU={[Fa.DEBUG]:"log",[Fa.VERBOSE]:"log",[Fa.INFO]:"info",[Fa.WARN]:"warn",[Fa.ERROR]:"error"},RU=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=DU[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let LU=class{constructor(e){this.name=e,this._logLevel=UU,this._logHandler=RU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fa))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fa.DEBUG,...e),this._logHandler(this,Fa.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fa.VERBOSE,...e),this._logHandler(this,Fa.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fa.INFO,...e),this._logHandler(this,Fa.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fa.WARN,...e),this._logHandler(this,Fa.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fa.ERROR,...e),this._logHandler(this,Fa.ERROR,...e)}};const QU=(s,e)=>e.some(t=>s instanceof t);let dB,hB;function OU(){return dB||(dB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PU(){return hB||(hB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,V1=new WeakMap,fE=new WeakMap,Oy=new WeakMap,Aw=new WeakMap;function kU(s){const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("success",o),s.removeEventListener("error",c)},o=()=>{t(Ld(s.result)),r()},c=()=>{n(s.error),r()};s.addEventListener("success",o),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&hE.set(t,s)}).catch(()=>{}),Aw.set(e,s),e}function MU(s){if(V1.has(s))return;const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("complete",o),s.removeEventListener("error",c),s.removeEventListener("abort",c)},o=()=>{t(),r()},c=()=>{n(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",o),s.addEventListener("error",c),s.addEventListener("abort",c)});V1.set(s,e)}let K1={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return V1.get(s);if(e==="objectStoreNames")return s.objectStoreNames||fE.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ld(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function HU(s){K1=s(K1)}function VU(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(Py(this),e,...t);return fE.set(n,e.sort?e.sort():[e]),Ld(n)}:PU().includes(s)?function(...e){return s.apply(Py(this),e),Ld(hE.get(this))}:function(...e){return Ld(s.apply(Py(this),e))}}function KU(s){return typeof s=="function"?VU(s):(s instanceof IDBTransaction&&MU(s),QU(s,OU())?new Proxy(s,K1):s)}function Ld(s){if(s instanceof IDBRequest)return kU(s);if(Oy.has(s))return Oy.get(s);const e=KU(s);return e!==s&&(Oy.set(s,e),Aw.set(e,s)),e}const Py=s=>Aw.get(s);function zU(s,e,{blocked:t,upgrade:n,blocking:r,terminated:o}={}){const c=indexedDB.open(s,e),h=Ld(c);return n&&c.addEventListener("upgradeneeded",u=>{n(Ld(c.result),u.oldVersion,u.newVersion,Ld(c.transaction),u)}),t&&c.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),h.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const GU=["get","getKey","getAll","getAllKeys","count"],$U=["put","add","delete","clear"],ky=new Map;function fB(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ky.get(e))return ky.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=$U.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||GU.includes(t)))return;const o=async function(c,...h){const u=this.transaction(c,r?"readwrite":"readonly");let f=u.store;return n&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),r&&u.done]))[0]};return ky.set(e,o),o}HU(s=>({...s,get:(e,t,n)=>fB(e,t)||s.get(e,t,n),has:(e,t)=>!!fB(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WU(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function WU(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const z1="@firebase/app",mB="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new LU("@firebase/app"),XU="@firebase/app-compat",JU="@firebase/analytics-compat",qU="@firebase/analytics",ZU="@firebase/app-check-compat",eD="@firebase/app-check",tD="@firebase/auth",sD="@firebase/auth-compat",nD="@firebase/database",rD="@firebase/data-connect",aD="@firebase/database-compat",iD="@firebase/functions",oD="@firebase/functions-compat",lD="@firebase/installations",AD="@firebase/installations-compat",cD="@firebase/messaging",uD="@firebase/messaging-compat",dD="@firebase/performance",hD="@firebase/performance-compat",fD="@firebase/remote-config",mD="@firebase/remote-config-compat",pD="@firebase/storage",gD="@firebase/storage-compat",xD="@firebase/firestore",vD="@firebase/ai",yD="@firebase/firestore-compat",bD="firebase",wD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="[DEFAULT]",jD={[z1]:"fire-core",[XU]:"fire-core-compat",[qU]:"fire-analytics",[JU]:"fire-analytics-compat",[eD]:"fire-app-check",[ZU]:"fire-app-check-compat",[tD]:"fire-auth",[sD]:"fire-auth-compat",[nD]:"fire-rtdb",[rD]:"fire-data-connect",[aD]:"fire-rtdb-compat",[iD]:"fire-fn",[oD]:"fire-fn-compat",[lD]:"fire-iid",[AD]:"fire-iid-compat",[cD]:"fire-fcm",[uD]:"fire-fcm-compat",[dD]:"fire-perf",[hD]:"fire-perf-compat",[fD]:"fire-rc",[mD]:"fire-rc-compat",[pD]:"fire-gcs",[gD]:"fire-gcs-compat",[xD]:"fire-fst",[yD]:"fire-fst-compat",[vD]:"fire-vertex","fire-js":"fire-js",[bD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map,BD=new Map,$1=new Map;function pB(s,e){try{s.container.addComponent(e)}catch(t){Eu.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Hd(s){const e=s.name;if($1.has(e))return Eu.debug(`There were multiple attempts to register component ${e}.`),!1;$1.set(e,s);for(const t of Ux.values())pB(t,s);for(const t of BD.values())pB(t,s);return!0}function gv(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function iA(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qd=new Ng("app","Firebase",SD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fx("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=wD;function mE(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:G1,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw Qd.create("bad-app-name",{appName:String(r)});if(t||(t=uE()),!t)throw Qd.create("no-options");const o=Ux.get(r);if(o){if(Zh(t,o.options)&&Zh(n,o.config))return o;throw Qd.create("duplicate-app",{appName:r})}const c=new _U(r);for(const u of $1.values())c.addComponent(u);const h=new CD(t,n,c);return Ux.set(r,h),h}function cw(s=G1){const e=Ux.get(s);if(!e&&s===G1&&uE())return mE();if(!e)throw Qd.create("no-app",{appName:s});return e}function UA(s,e,t){let n=jD[s]??s;t&&(n+=`-${t}`);const r=n.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const c=[`Unable to register library "${n}" with version "${e}":`];r&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Eu.warn(c.join(" "));return}Hd(new Fx(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="firebase-heartbeat-database",ED=1,ag="firebase-heartbeat-store";let My=null;function pE(){return My||(My=zU(ND,ED,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ag)}catch(t){console.warn(t)}}}}).catch(s=>{throw Qd.create("idb-open",{originalErrorMessage:s.message})})),My}async function TD(s){try{const t=(await pE()).transaction(ag),n=await t.objectStore(ag).get(gE(s));return await t.done,n}catch(e){if(e instanceof uc)Eu.warn(e.message);else{const t=Qd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Eu.warn(t.message)}}}async function gB(s,e){try{const n=(await pE()).transaction(ag,"readwrite");await n.objectStore(ag).put(e,gE(s)),await n.done}catch(t){if(t instanceof uc)Eu.warn(t.message);else{const n=Qd.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Eu.warn(n.message)}}}function gE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=1024,_D=30;class FD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DD(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xB();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>_D){const c=RD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Eu.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xB(),{heartbeatsToSend:n,unsentEntries:r}=UD(this._heartbeatsCache.heartbeats),o=_x(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Eu.warn(t),""}}}function xB(){return new Date().toISOString().substring(0,10)}function UD(s,e=ID){const t=[];let n=s.slice();for(const r of s){const o=t.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),vB(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),vB(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class DD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vU()?yU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return gB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return gB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function vB(s){return _x(JSON.stringify({version:2,heartbeats:s})).length}function RD(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(s){Hd(new Fx("platform-logger",e=>new YU(e),"PRIVATE")),Hd(new Fx("heartbeat",e=>new FD(e),"PRIVATE")),UA(z1,mB,s),UA(z1,mB,"esm2020"),UA("fire-js","")}LD("");var QD="firebase",OD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */UA(QD,OD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ua;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ua||(ua={}));const PD={debug:ua.DEBUG,verbose:ua.VERBOSE,info:ua.INFO,warn:ua.WARN,error:ua.ERROR,silent:ua.SILENT},kD=ua.INFO,MD={[ua.DEBUG]:"log",[ua.VERBOSE]:"log",[ua.INFO]:"info",[ua.WARN]:"warn",[ua.ERROR]:"error"},HD=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=MD[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let VD=class{constructor(e){this.name=e,this._logLevel=kD,this._logHandler=HD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ua))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ua.DEBUG,...e),this._logHandler(this,ua.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ua.VERBOSE,...e),this._logHandler(this,ua.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ua.INFO,...e),this._logHandler(this,ua.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ua.WARN,...e),this._logHandler(this,ua.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ua.ERROR,...e),this._logHandler(this,ua.ERROR,...e)}},yB=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KD=xE,vE=new Ng("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new VD("@firebase/auth");function zD(s,...e){Dx.logLevel<=ua.WARN&&Dx.warn(`Auth (${of}): ${s}`,...e)}function dx(s,...e){Dx.logLevel<=ua.ERROR&&Dx.error(`Auth (${of}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(s,...e){throw uw(s,...e)}function Hc(s,...e){return uw(s,...e)}function yE(s,e,t){const n={...KD(),[e]:t};return new Ng("auth","Firebase",n).create(e,{appName:s.name})}function Od(s){return yE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uw(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return vE.create(s,...e)}function rn(s,e,...t){if(!s)throw uw(e,...t)}function ju(s){const e="INTERNAL ASSERTION FAILED: "+s;throw dx(e),new Error(e)}function Tu(s,e){s||ju(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function GD(){return bB()==="http:"||bB()==="https:"}function bB(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GD()||mU()||"connection"in navigator)?navigator.onLine:!0}function YD(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tu(t>e,"Short delay should be less than long delay!"),this.isMobile=dU()||pU()}get(){return $D()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(s,e){Tu(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ju("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ju("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ju("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JD=new Tg(3e4,6e4);function Zd(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Du(s,e,t,n,r={}){return wE(s,r,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const h=Eg({key:s.config.apiKey,...c}).slice(1),u=await s._getAdditionalHeaders();u["Content-Type"]="application/json",s.languageCode&&(u["X-Firebase-Locale"]=s.languageCode);const f={method:e,headers:u,...o};return fU()||(f.referrerPolicy="no-referrer"),s.emulatorConfig&&qd(s.emulatorConfig.host)&&(f.credentials="include"),bE.fetch()(await jE(s,s.config.apiHost,t,h),f)})}async function wE(s,e,t){s._canInitEmulator=!1;const n={...WD,...e};try{const r=new ZD(s),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw H0(s,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[u,f]=h.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw H0(s,"credential-already-in-use",c);if(u==="EMAIL_EXISTS")throw H0(s,"email-already-in-use",c);if(u==="USER_DISABLED")throw H0(s,"user-disabled",c);const A=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw yE(s,A,f);oc(s,A)}}catch(r){if(r instanceof uc)throw r;oc(s,"network-request-failed",{message:String(r)})}}async function xv(s,e,t,n,r={}){const o=await Du(s,e,t,n,r);return"mfaPendingCredential"in o&&oc(s,"multi-factor-auth-required",{_serverResponse:o}),o}async function jE(s,e,t,n){const r=`${e}${t}?${n}`,o=s,c=o.config.emulator?dw(s.config,r):`${s.config.apiScheme}://${r}`;return XD.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function qD(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Hc(this.auth,"network-request-failed")),JD.get())})}}function H0(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Hc(s,e,n);return r.customData._tokenResponse=t,r}function wB(s){return s!==void 0&&s.enterprise!==void 0}class eR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tR(s,e){return Du(s,"GET","/v2/recaptchaConfig",Zd(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(s,e){return Du(s,"POST","/v1/accounts:delete",e)}async function Rx(s,e){return Du(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nR(s,e=!1){const t=qa(s),n=await t.getIdToken(e),r=hw(n);rn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:r,token:n,authTime:kp(Hy(r.auth_time)),issuedAtTime:kp(Hy(r.iat)),expirationTime:kp(Hy(r.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Hy(s){return Number(s)*1e3}function hw(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return dx("JWT malformed, contained fewer than 3 sections"),null;try{const r=lE(t);return r?JSON.parse(r):(dx("Failed to decode base64 JWT payload"),null)}catch(r){return dx("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function jB(s){const e=hw(s);return rn(e,"internal-error"),rn(typeof e.exp<"u","internal-error"),rn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ig(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof uc&&rR(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function rR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kp(this.lastLoginAt),this.creationTime=kp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(s){var m;const e=s.auth,t=await s.getIdToken(),n=await ig(s,Rx(e,{idToken:t}));rn(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];s._notifyReloadListener(r);const o=(m=r.providerUserInfo)!=null&&m.length?BE(r.providerUserInfo):[],c=oR(s.providerData,o),h=s.isAnonymous,u=!(s.email&&r.passwordHash)&&!(c!=null&&c.length),f=h?u:!1,A={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new W1(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(s,A)}async function iR(s){const e=qa(s);await Lx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oR(s,e){return[...s.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function BE(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(s,e){const t=await wE(s,{},async()=>{const n=Eg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=s.config,c=await jE(s,r,"/v1/token",`key=${o}`),h=await s._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:h,body:n};return s.emulatorConfig&&qd(s.emulatorConfig.host)&&(u.credentials="include"),bE.fetch()(c,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AR(s,e){return Du(s,"POST","/v2/accounts:revokeToken",Zd(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rn(e.idToken,"internal-error"),rn(typeof e.idToken<"u","internal-error"),rn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){rn(e.length!==0,"internal-error");const t=jB(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await lR(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,c=new tm;return n&&(rn(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),r&&(rn(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),o&&(rn(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tm,this.toJSON())}_performRefresh(){return ju("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(s,e){rn(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class rc{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new aR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new W1(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ig(this,this.stsTokenManager.getToken(this.auth,e));return rn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nR(this,e)}reload(){return iR(this)}_assign(e){this!==e&&(rn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Lx(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(iA(this.auth.app))return Promise.reject(Od(this.auth));const e=await this.getIdToken();return await ig(this,sR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,u=t._redirectEventId??void 0,f=t.createdAt??void 0,A=t.lastLoginAt??void 0,{uid:m,emailVerified:x,isAnonymous:g,providerData:b,stsTokenManager:I}=t;rn(m&&I,e,"internal-error");const N=tm.fromJSON(this.name,I);rn(typeof m=="string",e,"internal-error"),xd(n,e.name),xd(r,e.name),rn(typeof x=="boolean",e,"internal-error"),rn(typeof g=="boolean",e,"internal-error"),xd(o,e.name),xd(c,e.name),xd(h,e.name),xd(u,e.name),xd(f,e.name),xd(A,e.name);const C=new rc({uid:m,auth:e,email:r,emailVerified:x,displayName:n,isAnonymous:g,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:N,createdAt:f,lastLoginAt:A});return b&&Array.isArray(b)&&(C.providerData=b.map(E=>({...E}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(e,t,n=!1){const r=new tm;r.updateFromServerResponse(t);const o=new rc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Lx(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];rn(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?BE(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new tm;h.updateFromIdToken(n);const u=new rc({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new W1(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=new Map;function Bu(s){Tu(s instanceof Function,"Expected a class definition");let e=BB.get(s);return e?(Tu(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,BB.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SE.type="NONE";const SB=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(s,e,t){return`firebase:${s}:${e}:${t}`}class sm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=hx(this.userKey,r.apiKey,o),this.fullPersistenceKey=hx("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rx(this.auth,{idToken:e}).catch(()=>{});return t?rc._fromGetAccountInfoResponse(this.auth,t,e):null}return rc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new sm(Bu(SB),e,n);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Bu(SB);const c=hx(n,e.config.apiKey,e.name);let h=null;for(const f of t)try{const A=await f._get(c);if(A){let m;if(typeof A=="string"){const x=await Rx(e,{idToken:A}).catch(()=>{});if(!x)break;m=await rc._fromGetAccountInfoResponse(e,x,A)}else m=rc._fromJSON(e,A);f!==o&&(h=m),o=f;break}}catch{}const u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new sm(o,e,n):(o=u[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new sm(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(FE(e))return"Webos";if(NE(e))return"Safari";if((e.includes("chrome/")||EE(e))&&!e.includes("edge/"))return"Chrome";if(IE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function CE(s=ol()){return/firefox\//i.test(s)}function NE(s=ol()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EE(s=ol()){return/crios\//i.test(s)}function TE(s=ol()){return/iemobile/i.test(s)}function IE(s=ol()){return/android/i.test(s)}function _E(s=ol()){return/blackberry/i.test(s)}function FE(s=ol()){return/webos/i.test(s)}function fw(s=ol()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function cR(s=ol()){var e;return fw(s)&&!!((e=window.navigator)!=null&&e.standalone)}function uR(){return gU()&&document.documentMode===10}function UE(s=ol()){return fw(s)||IE(s)||FE(s)||_E(s)||/windows phone/i.test(s)||TE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(s,e=[]){let t;switch(s){case"Browser":t=CB(ol());break;case"Worker":t=`${CB(ol())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${of}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,h)=>{try{const u=e(o);c(u)}catch(u){h(u)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(s,e={}){return Du(s,"GET","/v2/passwordPolicy",Zd(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=6;class mR{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NB(this),this.idTokenSubscription=new NB(this),this.beforeStateQueue=new dR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bu(t)),this._initializationPromise=this.queue(async()=>{var n,r,o;if(!this._deleted&&(this.persistenceManager=await sm.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rx(this,{idToken:e}),n=await rc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(iA(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=n==null?void 0:n._redirectEventId,u=await this.tryRedirectSignIn(e);(!c||c===h)&&(u!=null&&u.user)&&(n=u.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lx(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(iA(this.app))return Promise.reject(Od(this));const t=e?qa(e):null;return t&&rn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&rn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return iA(this.app)?Promise.reject(Od(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return iA(this.app)?Promise.reject(Od(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hR(this),t=new mR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ng("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await AR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bu(e)||this._popupRedirectResolver;rn(t,this,"argument-error"),this.redirectPersistenceManager=await sm.create(this,[Bu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,n,r);return()=>{c=!0,u()}}else{const u=e.addObserver(t);return()=>{c=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(iA(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&zD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function lf(s){return qa(s)}class NB{constructor(e){this.auth=e,this.observer=null,this.addObserver=SU(t=>this.observer=t)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gR(s){vv=s}function RE(s){return vv.loadJS(s)}function xR(){return vv.recaptchaEnterpriseScript}function vR(){return vv.gapiScript}function yR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class bR{constructor(){this.enterprise=new wR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class wR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jR="recaptcha-enterprise",LE="NO_RECAPTCHA";class BR{constructor(e){this.type=jR,this.auth=lf(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{tR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new eR(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(u=>{h(u)})})}function r(o,c,h){const u=window.grecaptcha;wB(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(LE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bR().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(h=>{if(!t&&wB(window.grecaptcha))r(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xR();u.length!==0&&(u+=h),RE(u).then(()=>{r(h,o,c)}).catch(f=>{c(f)})}}).catch(h=>{c(h)})})}}async function EB(s,e,t,n=!1,r=!1){const o=new BR(s);let c;if(r)c=LE;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const u=h.phoneEnrollmentInfo.phoneNumber,f=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const u=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return n?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function X1(s,e,t,n,r){var o;if((o=s._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await EB(s,e,t,t==="getOobCode");return n(s,c)}else return n(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await EB(s,e,t,t==="getOobCode");return n(s,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(s,e){const t=gv(s,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(Zh(o,e??{}))return r;oc(r,"already-initialized")}return t.initialize({options:e})}function CR(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Bu);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function NR(s,e,t){const n=lf(s);rn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,o=QE(e),{host:c,port:h}=ER(e),u=h===null?"":`:${h}`,f={url:`${o}//${c}${u}/`},A=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){rn(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),rn(Zh(f,n.config.emulator)&&Zh(A,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=A,n.settings.appVerificationDisabledForTesting=!0,qd(c)?(ow(`${o}//${c}${u}`),lw("Auth",!0)):TR()}function QE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function ER(s){const e=QE(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const o=r[1];return{host:o,port:TB(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:TB(c)}}}function TB(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function TR(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ju("not implemented")}_getIdTokenResponse(e){return ju("not implemented")}_linkToIdToken(e,t){return ju("not implemented")}_getReauthenticationResolver(e){return ju("not implemented")}}async function IR(s,e){return Du(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(s,e){return xv(s,"POST","/v1/accounts:signInWithPassword",Zd(s,e))}async function FR(s,e){return Du(s,"POST","/v1/accounts:sendOobCode",Zd(s,e))}async function UR(s,e){return FR(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(s,e){return xv(s,"POST","/v1/accounts:signInWithEmailLink",Zd(s,e))}async function RR(s,e){return xv(s,"POST","/v1/accounts:signInWithEmailLink",Zd(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends mw{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new og(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new og(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X1(e,t,"signInWithPassword",_R);case"emailLink":return DR(e,{email:this._email,oobCode:this._password});default:oc(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X1(e,n,"signUpPassword",IR);case"emailLink":return RR(e,{idToken:t,email:this._email,oobCode:this._password});default:oc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(s,e){return xv(s,"POST","/v1/accounts:signInWithIdp",Zd(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="http://localhost";class ef extends mw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ef(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...o}=t;if(!n||!r)return null;const c=new ef(n,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return nm(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nm(e,t)}buildRequest(){const e={requestUri:LR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eg(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OR(s){const e=Ip(_p(s)).link,t=e?Ip(_p(e)).deep_link_id:null,n=Ip(_p(s)).deep_link_id;return(n?Ip(_p(n)).link:null)||n||t||e||s}class pw{constructor(e){const t=Ip(_p(e)),n=t.apiKey??null,r=t.oobCode??null,o=QR(t.mode??null);rn(n&&r&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=OR(e);try{return new pw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.providerId=wm.PROVIDER_ID}static credential(e,t){return og._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=pw.parseLink(t);return rn(n,"argument-error"),og._fromEmailAndCode(e,n.code,n.tenantId)}}wm.PROVIDER_ID="password";wm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends OE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Ig{constructor(){super("facebook.com")}static credential(e){return ef._fromParams({providerId:Bd.PROVIDER_ID,signInMethod:Bd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bd.credentialFromTaggedObject(e)}static credentialFromError(e){return Bd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bd.credential(e.oauthAccessToken)}catch{return null}}}Bd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Ig{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ef._fromParams({providerId:Sd.PROVIDER_ID,signInMethod:Sd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sd.credentialFromTaggedObject(e)}static credentialFromError(e){return Sd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Sd.credential(t,n)}catch{return null}}}Sd.GOOGLE_SIGN_IN_METHOD="google.com";Sd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends Ig{constructor(){super("github.com")}static credential(e){return ef._fromParams({providerId:Cd.PROVIDER_ID,signInMethod:Cd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cd.credentialFromTaggedObject(e)}static credentialFromError(e){return Cd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cd.credential(e.oauthAccessToken)}catch{return null}}}Cd.GITHUB_SIGN_IN_METHOD="github.com";Cd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends Ig{constructor(){super("twitter.com")}static credential(e,t){return ef._fromParams({providerId:Nd.PROVIDER_ID,signInMethod:Nd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Nd.credentialFromTaggedObject(e)}static credentialFromError(e){return Nd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Nd.credential(t,n)}catch{return null}}}Nd.TWITTER_SIGN_IN_METHOD="twitter.com";Nd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const o=await rc._fromIdTokenResponse(e,n,r),c=IB(n);return new om({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=IB(n);return new om({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function IB(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends uc{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Qx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Qx(e,t,n,r)}}function PE(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qx._fromErrorAndOperation(s,o,e,n):o})}async function PR(s,e,t=!1){const n=await ig(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return om._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(s,e,t=!1){const{auth:n}=s;if(iA(n.app))return Promise.reject(Od(n));const r="reauthenticate";try{const o=await ig(s,PE(n,r,e,s),t);rn(o.idToken,n,"internal-error");const c=hw(o.idToken);rn(c,n,"internal-error");const{sub:h}=c;return rn(s.uid===h,n,"user-mismatch"),om._forOperation(s,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&oc(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(s,e,t=!1){if(iA(s.app))return Promise.reject(Od(s));const n="signIn",r=await PE(s,n,e),o=await om._fromIdTokenResponse(s,n,r);return t||await s._updateCurrentUser(o.user),o}async function MR(s,e){return kE(lf(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(s){const e=lf(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VR(s,e,t){const n=lf(s);await X1(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",UR)}function KR(s,e,t){return iA(s.app)?Promise.reject(Od(s)):MR(qa(s),wm.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&HR(s),n})}function zR(s,e,t,n){return qa(s).onIdTokenChanged(e,t,n)}function GR(s,e,t){return qa(s).beforeAuthStateChanged(e,t)}function $R(s,e,t,n){return qa(s).onAuthStateChanged(e,t,n)}function Sp(s){return qa(s).signOut()}const Ox="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ox,"1"),this.storage.removeItem(Ox),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=1e3,WR=10;class HE extends ME{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,u)=>{this.notifyListeners(c,u)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);uR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,WR):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},YR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HE.type="LOCAL";const XR=HE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends ME{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VE.type="SESSION";const KE=VE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new yv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const h=Array.from(c).map(async f=>f(t.origin,o)),u=await JR(h);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((h,u)=>{const f=gw("",20);r.port1.start();const A=setTimeout(()=>{u(new Error("unsupported_event"))},n);c={messageChannel:r,onMessage(m){const x=m;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(A),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(A),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(){return window}function ZR(s){Vc().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){return typeof Vc().WorkerGlobalScope<"u"&&typeof Vc().importScripts=="function"}async function eL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tL(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function sL(){return zE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firebaseLocalStorageDb",nL=1,Px="firebaseLocalStorage",$E="fbase_key";class _g{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bv(s,e){return s.transaction([Px],e?"readwrite":"readonly").objectStore(Px)}function rL(){const s=indexedDB.deleteDatabase(GE);return new _g(s).toPromise()}function J1(){const s=indexedDB.open(GE,nL);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(Px,{keyPath:$E})}catch(r){t(r)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(Px)?e(n):(n.close(),await rL(),e(await J1()))})})}async function _B(s,e,t){const n=bv(s,!0).put({[$E]:e,value:t});return new _g(n).toPromise()}async function aL(s,e){const t=bv(s,!1).get(e),n=await new _g(t).toPromise();return n===void 0?null:n.value}function FB(s,e){const t=bv(s,!0).delete(e);return new _g(t).toPromise()}const iL=800,oL=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>oL)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yv._getInstance(sL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await eL(),!this.activeServiceWorker)return;this.sender=new qR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J1();return await _B(e,Ox,"1"),await FB(e,Ox),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_B(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>aL(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FB(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=bv(r,!1).getAll();return new _g(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const lL=YE;new Tg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(s,e){return e?Bu(e):(rn(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends mw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cL(s){return kE(s.auth,new xw(s),s.bypassAuthState)}function uL(s){const{auth:e,user:t}=s;return rn(t,e,"internal-error"),kR(t,new xw(s),s.bypassAuthState)}async function dL(s){const{auth:e,user:t}=s;return rn(t,e,"internal-error"),PR(t,new xw(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,n,r,o=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cL;case"linkViaPopup":case"linkViaRedirect":return dL;case"reauthViaPopup":case"reauthViaRedirect":return uL;default:oc(this.auth,"internal-error")}}resolve(e){Tu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Tg(2e3,1e4);class Wf extends WE{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,Wf.currentPopupAction&&Wf.currentPopupAction.cancel(),Wf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rn(e,this.auth,"internal-error"),e}async onExecution(){Tu(this.filter.length===1,"Popup operations only handle one event");const e=gw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Hc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hL.get())};e()}}Wf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="pendingRedirect",fx=new Map;class mL extends WE{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=fx.get(this.auth._key());if(!e){try{const n=await pL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}fx.set(this.auth._key(),e)}return this.bypassAuthState||fx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pL(s,e){const t=vL(e),n=xL(s);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function gL(s,e){fx.set(s._key(),e)}function xL(s){return Bu(s._redirectPersistence)}function vL(s){return hx(fL,s.config.apiKey,s.name)}async function yL(s,e,t=!1){if(iA(s.app))return Promise.reject(Od(s));const n=lf(s),r=AL(n,e),c=await new mL(n,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=600*1e3;class wL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!XE(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hc(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bL&&this.cachedEventUids.clear(),this.cachedEventUids.has(UB(e))}saveEventToCache(e){this.cachedEventUids.add(UB(e)),this.lastProcessedEventTime=Date.now()}}function UB(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function XE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jL(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(s,e={}){return Du(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CL=/^https?/;async function NL(s){if(s.config.emulator)return;const{authorizedDomains:e}=await BL(s);for(const t of e)try{if(EL(t))return}catch{}oc(s,"unauthorized-domain")}function EL(s){const e=Y1(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!CL.test(t))return!1;if(SL.test(s))return n===s;const r=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Tg(3e4,6e4);function DB(){const s=Vc().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function IL(s){return new Promise((e,t)=>{var r,o,c;function n(){DB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DB(),t(Hc(s,"network-request-failed"))},timeout:TL.get()})}if((o=(r=Vc().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Vc().gapi)!=null&&c.load)n();else{const h=yR("iframefcb");return Vc()[h]=()=>{gapi.load?n():t(Hc(s,"network-request-failed"))},RE(`${vR()}?onload=${h}`).catch(u=>t(u))}}).catch(e=>{throw mx=null,e})}let mx=null;function _L(s){return mx=mx||IL(s),mx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new Tg(5e3,15e3),UL="__/auth/iframe",DL="emulator/auth/iframe",RL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QL(s){const e=s.config;rn(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?dw(e,DL):`https://${s.config.authDomain}/${UL}`,n={apiKey:e.apiKey,appName:s.name,v:of},r=LL.get(s.config.apiHost);r&&(n.eid=r);const o=s._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Eg(n).slice(1)}`}async function OL(s){const e=await _L(s),t=Vc().gapi;return rn(t,s,"internal-error"),e.open({where:document.body,url:QL(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RL,dontclear:!0},n=>new Promise(async(r,o)=>{await n.restyle({setHideOnLeave:!1});const c=Hc(s,"network-request-failed"),h=Vc().setTimeout(()=>{o(c)},FL.get());function u(){Vc().clearTimeout(h),r(n)}n.ping(u).then(u,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kL=500,ML=600,HL="_blank",VL="http://localhost";class RB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KL(s,e,t,n=kL,r=ML){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let h="";const u={...PL,width:n.toString(),height:r.toString(),top:o,left:c},f=ol().toLowerCase();t&&(h=EE(f)?HL:t),CE(f)&&(e=e||VL,u.scrollbars="yes");const A=Object.entries(u).reduce((x,[g,b])=>`${x}${g}=${b},`,"");if(cR(f)&&h!=="_self")return zL(e||"",h),new RB(null);const m=window.open(e||"",h,A);rn(m,s,"popup-blocked");try{m.focus()}catch{}return new RB(m)}function zL(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="__/auth/handler",$L="emulator/auth/handler",YL=encodeURIComponent("fac");async function LB(s,e,t,n,r,o){rn(s.config.authDomain,s,"auth-domain-config-required"),rn(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:of,eventId:r};if(e instanceof OE){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",BU(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,m]of Object.entries({}))c[A]=m}if(e instanceof Ig){const A=e.getScopes().filter(m=>m!=="");A.length>0&&(c.scopes=A.join(","))}s.tenantId&&(c.tid=s.tenantId);const h=c;for(const A of Object.keys(h))h[A]===void 0&&delete h[A];const u=await s._getAppCheckToken(),f=u?`#${YL}=${encodeURIComponent(u)}`:"";return`${WL(s)}?${Eg(h).slice(1)}${f}`}function WL({config:s}){return s.emulator?dw(s,$L):`https://${s.authDomain}/${GL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="webStorageSupport";class XL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=yL,this._overrideRedirectResult=gL}async _openPopup(e,t,n,r){var c;Tu((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await LB(e,t,n,Y1(),r);return KL(e,o,gw())}async _openRedirect(e,t,n,r){await this._originValidation(e);const o=await LB(e,t,n,Y1(),r);return ZR(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Tu(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await OL(e),n=new wL(e);return t.register("authEvent",r=>(rn(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vy,{type:Vy},r=>{var c;const o=(c=r==null?void 0:r[0])==null?void 0:c[Vy];o!==void 0&&t(!!o),oc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UE()||NE()||fw()}}const JL=XL;var QB="@firebase/auth",OB="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e8(s){Hd(new yB("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=n.options;rn(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:c,authDomain:h,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DE(s)},f=new pR(n,r,o,u);return CR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Hd(new yB("auth-internal",e=>{const t=lf(e.getProvider("auth").getImmediate());return(n=>new qL(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),UA(QB,OB,ZL(s)),UA(QB,OB,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=300,s8=dE("authIdTokenMaxAge")||t8;let PB=null;const n8=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>s8)return;const r=t==null?void 0:t.token;PB!==r&&(PB=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function r8(s=cw()){const e=gv(s,"auth");if(e.isInitialized())return e.getImmediate();const t=SR(s,{popupRedirectResolver:JL,persistence:[lL,XR,KE]}),n=dE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=n8(o.toString());GR(t,c,()=>c(t.currentUser)),zR(t,h=>c(h))}}const r=AE("auth");return r&&NR(t,`http://${r}`),t}function a8(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}gR({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=r=>{const o=Hc("internal-error");o.customData=r,t(o)},n.type="text/javascript",n.charset="UTF-8",a8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e8("Browser");let i8=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ur;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ur||(ur={}));const o8={debug:ur.DEBUG,verbose:ur.VERBOSE,info:ur.INFO,warn:ur.WARN,error:ur.ERROR,silent:ur.SILENT},l8=ur.INFO,A8={[ur.DEBUG]:"log",[ur.VERBOSE]:"log",[ur.INFO]:"info",[ur.WARN]:"warn",[ur.ERROR]:"error"},c8=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=A8[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u8{constructor(e){this.name=e,this._logLevel=l8,this._logHandler=c8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ur))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ur.DEBUG,...e),this._logHandler(this,ur.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ur.VERBOSE,...e),this._logHandler(this,ur.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ur.INFO,...e),this._logHandler(this,ur.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ur.WARN,...e),this._logHandler(this,ur.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ur.ERROR,...e),this._logHandler(this,ur.ERROR,...e)}}var kB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pd,JE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Q,U){function R(){}R.prototype=U.prototype,Q.F=U.prototype,Q.prototype=new R,Q.prototype.constructor=Q,Q.D=function($,P,V){for(var G=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)G[ae-2]=arguments[ae];return U.prototype[P].apply($,G)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(Q,U,R){R||(R=0);const $=Array(16);if(typeof U=="string")for(var P=0;P<16;++P)$[P]=U.charCodeAt(R++)|U.charCodeAt(R++)<<8|U.charCodeAt(R++)<<16|U.charCodeAt(R++)<<24;else for(P=0;P<16;++P)$[P]=U[R++]|U[R++]<<8|U[R++]<<16|U[R++]<<24;U=Q.g[0],R=Q.g[1],P=Q.g[2];let V=Q.g[3],G;G=U+(V^R&(P^V))+$[0]+3614090360&4294967295,U=R+(G<<7&4294967295|G>>>25),G=V+(P^U&(R^P))+$[1]+3905402710&4294967295,V=U+(G<<12&4294967295|G>>>20),G=P+(R^V&(U^R))+$[2]+606105819&4294967295,P=V+(G<<17&4294967295|G>>>15),G=R+(U^P&(V^U))+$[3]+3250441966&4294967295,R=P+(G<<22&4294967295|G>>>10),G=U+(V^R&(P^V))+$[4]+4118548399&4294967295,U=R+(G<<7&4294967295|G>>>25),G=V+(P^U&(R^P))+$[5]+1200080426&4294967295,V=U+(G<<12&4294967295|G>>>20),G=P+(R^V&(U^R))+$[6]+2821735955&4294967295,P=V+(G<<17&4294967295|G>>>15),G=R+(U^P&(V^U))+$[7]+4249261313&4294967295,R=P+(G<<22&4294967295|G>>>10),G=U+(V^R&(P^V))+$[8]+1770035416&4294967295,U=R+(G<<7&4294967295|G>>>25),G=V+(P^U&(R^P))+$[9]+2336552879&4294967295,V=U+(G<<12&4294967295|G>>>20),G=P+(R^V&(U^R))+$[10]+4294925233&4294967295,P=V+(G<<17&4294967295|G>>>15),G=R+(U^P&(V^U))+$[11]+2304563134&4294967295,R=P+(G<<22&4294967295|G>>>10),G=U+(V^R&(P^V))+$[12]+1804603682&4294967295,U=R+(G<<7&4294967295|G>>>25),G=V+(P^U&(R^P))+$[13]+4254626195&4294967295,V=U+(G<<12&4294967295|G>>>20),G=P+(R^V&(U^R))+$[14]+2792965006&4294967295,P=V+(G<<17&4294967295|G>>>15),G=R+(U^P&(V^U))+$[15]+1236535329&4294967295,R=P+(G<<22&4294967295|G>>>10),G=U+(P^V&(R^P))+$[1]+4129170786&4294967295,U=R+(G<<5&4294967295|G>>>27),G=V+(R^P&(U^R))+$[6]+3225465664&4294967295,V=U+(G<<9&4294967295|G>>>23),G=P+(U^R&(V^U))+$[11]+643717713&4294967295,P=V+(G<<14&4294967295|G>>>18),G=R+(V^U&(P^V))+$[0]+3921069994&4294967295,R=P+(G<<20&4294967295|G>>>12),G=U+(P^V&(R^P))+$[5]+3593408605&4294967295,U=R+(G<<5&4294967295|G>>>27),G=V+(R^P&(U^R))+$[10]+38016083&4294967295,V=U+(G<<9&4294967295|G>>>23),G=P+(U^R&(V^U))+$[15]+3634488961&4294967295,P=V+(G<<14&4294967295|G>>>18),G=R+(V^U&(P^V))+$[4]+3889429448&4294967295,R=P+(G<<20&4294967295|G>>>12),G=U+(P^V&(R^P))+$[9]+568446438&4294967295,U=R+(G<<5&4294967295|G>>>27),G=V+(R^P&(U^R))+$[14]+3275163606&4294967295,V=U+(G<<9&4294967295|G>>>23),G=P+(U^R&(V^U))+$[3]+4107603335&4294967295,P=V+(G<<14&4294967295|G>>>18),G=R+(V^U&(P^V))+$[8]+1163531501&4294967295,R=P+(G<<20&4294967295|G>>>12),G=U+(P^V&(R^P))+$[13]+2850285829&4294967295,U=R+(G<<5&4294967295|G>>>27),G=V+(R^P&(U^R))+$[2]+4243563512&4294967295,V=U+(G<<9&4294967295|G>>>23),G=P+(U^R&(V^U))+$[7]+1735328473&4294967295,P=V+(G<<14&4294967295|G>>>18),G=R+(V^U&(P^V))+$[12]+2368359562&4294967295,R=P+(G<<20&4294967295|G>>>12),G=U+(R^P^V)+$[5]+4294588738&4294967295,U=R+(G<<4&4294967295|G>>>28),G=V+(U^R^P)+$[8]+2272392833&4294967295,V=U+(G<<11&4294967295|G>>>21),G=P+(V^U^R)+$[11]+1839030562&4294967295,P=V+(G<<16&4294967295|G>>>16),G=R+(P^V^U)+$[14]+4259657740&4294967295,R=P+(G<<23&4294967295|G>>>9),G=U+(R^P^V)+$[1]+2763975236&4294967295,U=R+(G<<4&4294967295|G>>>28),G=V+(U^R^P)+$[4]+1272893353&4294967295,V=U+(G<<11&4294967295|G>>>21),G=P+(V^U^R)+$[7]+4139469664&4294967295,P=V+(G<<16&4294967295|G>>>16),G=R+(P^V^U)+$[10]+3200236656&4294967295,R=P+(G<<23&4294967295|G>>>9),G=U+(R^P^V)+$[13]+681279174&4294967295,U=R+(G<<4&4294967295|G>>>28),G=V+(U^R^P)+$[0]+3936430074&4294967295,V=U+(G<<11&4294967295|G>>>21),G=P+(V^U^R)+$[3]+3572445317&4294967295,P=V+(G<<16&4294967295|G>>>16),G=R+(P^V^U)+$[6]+76029189&4294967295,R=P+(G<<23&4294967295|G>>>9),G=U+(R^P^V)+$[9]+3654602809&4294967295,U=R+(G<<4&4294967295|G>>>28),G=V+(U^R^P)+$[12]+3873151461&4294967295,V=U+(G<<11&4294967295|G>>>21),G=P+(V^U^R)+$[15]+530742520&4294967295,P=V+(G<<16&4294967295|G>>>16),G=R+(P^V^U)+$[2]+3299628645&4294967295,R=P+(G<<23&4294967295|G>>>9),G=U+(P^(R|~V))+$[0]+4096336452&4294967295,U=R+(G<<6&4294967295|G>>>26),G=V+(R^(U|~P))+$[7]+1126891415&4294967295,V=U+(G<<10&4294967295|G>>>22),G=P+(U^(V|~R))+$[14]+2878612391&4294967295,P=V+(G<<15&4294967295|G>>>17),G=R+(V^(P|~U))+$[5]+4237533241&4294967295,R=P+(G<<21&4294967295|G>>>11),G=U+(P^(R|~V))+$[12]+1700485571&4294967295,U=R+(G<<6&4294967295|G>>>26),G=V+(R^(U|~P))+$[3]+2399980690&4294967295,V=U+(G<<10&4294967295|G>>>22),G=P+(U^(V|~R))+$[10]+4293915773&4294967295,P=V+(G<<15&4294967295|G>>>17),G=R+(V^(P|~U))+$[1]+2240044497&4294967295,R=P+(G<<21&4294967295|G>>>11),G=U+(P^(R|~V))+$[8]+1873313359&4294967295,U=R+(G<<6&4294967295|G>>>26),G=V+(R^(U|~P))+$[15]+4264355552&4294967295,V=U+(G<<10&4294967295|G>>>22),G=P+(U^(V|~R))+$[6]+2734768916&4294967295,P=V+(G<<15&4294967295|G>>>17),G=R+(V^(P|~U))+$[13]+1309151649&4294967295,R=P+(G<<21&4294967295|G>>>11),G=U+(P^(R|~V))+$[4]+4149444226&4294967295,U=R+(G<<6&4294967295|G>>>26),G=V+(R^(U|~P))+$[11]+3174756917&4294967295,V=U+(G<<10&4294967295|G>>>22),G=P+(U^(V|~R))+$[2]+718787259&4294967295,P=V+(G<<15&4294967295|G>>>17),G=R+(V^(P|~U))+$[9]+3951481745&4294967295,Q.g[0]=Q.g[0]+U&4294967295,Q.g[1]=Q.g[1]+(P+(G<<21&4294967295|G>>>11))&4294967295,Q.g[2]=Q.g[2]+P&4294967295,Q.g[3]=Q.g[3]+V&4294967295}n.prototype.v=function(Q,U){U===void 0&&(U=Q.length);const R=U-this.blockSize,$=this.C;let P=this.h,V=0;for(;V<U;){if(P==0)for(;V<=R;)r(this,Q,V),V+=this.blockSize;if(typeof Q=="string"){for(;V<U;)if($[P++]=Q.charCodeAt(V++),P==this.blockSize){r(this,$),P=0;break}}else for(;V<U;)if($[P++]=Q[V++],P==this.blockSize){r(this,$),P=0;break}}this.h=P,this.o+=U},n.prototype.A=function(){var Q=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);Q[0]=128;for(var U=1;U<Q.length-8;++U)Q[U]=0;U=this.o*8;for(var R=Q.length-8;R<Q.length;++R)Q[R]=U&255,U/=256;for(this.v(Q),Q=Array(16),U=0,R=0;R<4;++R)for(let $=0;$<32;$+=8)Q[U++]=this.g[R]>>>$&255;return Q};function o(Q,U){var R=h;return Object.prototype.hasOwnProperty.call(R,Q)?R[Q]:R[Q]=U(Q)}function c(Q,U){this.h=U;const R=[];let $=!0;for(let P=Q.length-1;P>=0;P--){const V=Q[P]|0;$&&V==U||(R[P]=V,$=!1)}this.g=R}var h={};function u(Q){return-128<=Q&&Q<128?o(Q,function(U){return new c([U|0],U<0?-1:0)}):new c([Q|0],Q<0?-1:0)}function f(Q){if(isNaN(Q)||!isFinite(Q))return m;if(Q<0)return N(f(-Q));const U=[];let R=1;for(let $=0;Q>=R;$++)U[$]=Q/R|0,R*=4294967296;return new c(U,0)}function A(Q,U){if(Q.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(Q.charAt(0)=="-")return N(A(Q.substring(1),U));if(Q.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(U,8));let $=m;for(let V=0;V<Q.length;V+=8){var P=Math.min(8,Q.length-V);const G=parseInt(Q.substring(V,V+P),U);P<8?(P=f(Math.pow(U,P)),$=$.j(P).add(f(G))):($=$.j(R),$=$.add(f(G)))}return $}var m=u(0),x=u(1),g=u(16777216);s=c.prototype,s.m=function(){if(I(this))return-N(this).m();let Q=0,U=1;for(let R=0;R<this.g.length;R++){const $=this.i(R);Q+=($>=0?$:4294967296+$)*U,U*=4294967296}return Q},s.toString=function(Q){if(Q=Q||10,Q<2||36<Q)throw Error("radix out of range: "+Q);if(b(this))return"0";if(I(this))return"-"+N(this).toString(Q);const U=f(Math.pow(Q,6));var R=this;let $="";for(;;){const P=L(R,U).g;R=C(R,P.j(U));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(Q);if(R=P,b(R))return V+$;for(;V.length<6;)V="0"+V;$=V+$}},s.i=function(Q){return Q<0?0:Q<this.g.length?this.g[Q]:this.h};function b(Q){if(Q.h!=0)return!1;for(let U=0;U<Q.g.length;U++)if(Q.g[U]!=0)return!1;return!0}function I(Q){return Q.h==-1}s.l=function(Q){return Q=C(this,Q),I(Q)?-1:b(Q)?0:1};function N(Q){const U=Q.g.length,R=[];for(let $=0;$<U;$++)R[$]=~Q.g[$];return new c(R,~Q.h).add(x)}s.abs=function(){return I(this)?N(this):this},s.add=function(Q){const U=Math.max(this.g.length,Q.g.length),R=[];let $=0;for(let P=0;P<=U;P++){let V=$+(this.i(P)&65535)+(Q.i(P)&65535),G=(V>>>16)+(this.i(P)>>>16)+(Q.i(P)>>>16);$=G>>>16,V&=65535,G&=65535,R[P]=G<<16|V}return new c(R,R[R.length-1]&-2147483648?-1:0)};function C(Q,U){return Q.add(N(U))}s.j=function(Q){if(b(this)||b(Q))return m;if(I(this))return I(Q)?N(this).j(N(Q)):N(N(this).j(Q));if(I(Q))return N(this.j(N(Q)));if(this.l(g)<0&&Q.l(g)<0)return f(this.m()*Q.m());const U=this.g.length+Q.g.length,R=[];for(var $=0;$<2*U;$++)R[$]=0;for($=0;$<this.g.length;$++)for(let P=0;P<Q.g.length;P++){const V=this.i($)>>>16,G=this.i($)&65535,ae=Q.i(P)>>>16,ue=Q.i(P)&65535;R[2*$+2*P]+=G*ue,E(R,2*$+2*P),R[2*$+2*P+1]+=V*ue,E(R,2*$+2*P+1),R[2*$+2*P+1]+=G*ae,E(R,2*$+2*P+1),R[2*$+2*P+2]+=V*ae,E(R,2*$+2*P+2)}for(Q=0;Q<U;Q++)R[Q]=R[2*Q+1]<<16|R[2*Q];for(Q=U;Q<2*U;Q++)R[Q]=0;return new c(R,0)};function E(Q,U){for(;(Q[U]&65535)!=Q[U];)Q[U+1]+=Q[U]>>>16,Q[U]&=65535,U++}function F(Q,U){this.g=Q,this.h=U}function L(Q,U){if(b(U))throw Error("division by zero");if(b(Q))return new F(m,m);if(I(Q))return U=L(N(Q),U),new F(N(U.g),N(U.h));if(I(U))return U=L(Q,N(U)),new F(N(U.g),U.h);if(Q.g.length>30){if(I(Q)||I(U))throw Error("slowDivide_ only works with positive integers.");for(var R=x,$=U;$.l(Q)<=0;)R=O(R),$=O($);var P=H(R,1),V=H($,1);for($=H($,2),R=H(R,2);!b($);){var G=V.add($);G.l(Q)<=0&&(P=P.add(R),V=G),$=H($,1),R=H(R,1)}return U=C(Q,P.j(U)),new F(P,U)}for(P=m;Q.l(U)>=0;){for(R=Math.max(1,Math.floor(Q.m()/U.m())),$=Math.ceil(Math.log(R)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),V=f(R),G=V.j(U);I(G)||G.l(Q)>0;)R-=$,V=f(R),G=V.j(U);b(V)&&(V=x),P=P.add(V),Q=C(Q,G)}return new F(P,Q)}s.B=function(Q){return L(this,Q).h},s.and=function(Q){const U=Math.max(this.g.length,Q.g.length),R=[];for(let $=0;$<U;$++)R[$]=this.i($)&Q.i($);return new c(R,this.h&Q.h)},s.or=function(Q){const U=Math.max(this.g.length,Q.g.length),R=[];for(let $=0;$<U;$++)R[$]=this.i($)|Q.i($);return new c(R,this.h|Q.h)},s.xor=function(Q){const U=Math.max(this.g.length,Q.g.length),R=[];for(let $=0;$<U;$++)R[$]=this.i($)^Q.i($);return new c(R,this.h^Q.h)};function O(Q){const U=Q.g.length+1,R=[];for(let $=0;$<U;$++)R[$]=Q.i($)<<1|Q.i($-1)>>>31;return new c(R,Q.h)}function H(Q,U){const R=U>>5;U%=32;const $=Q.g.length-R,P=[];for(let V=0;V<$;V++)P[V]=U>0?Q.i(V+R)>>>U|Q.i(V+R+1)<<32-U:Q.i(V+R);return new c(P,Q.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,JE=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=A,Pd=c}).apply(typeof kB<"u"?kB:typeof self<"u"?self:typeof window<"u"?window:{});var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qE,Fp,ZE,px,q1,e4,t4,s4;(function(){var s,e=Object.defineProperty;function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof V0=="object"&&V0];for(var W=0;W<w.length;++W){var ne=w[W];if(ne&&ne.Math==Math)return ne}throw Error("Cannot find global object")}var n=t(this);function r(w,W){if(W)e:{var ne=n;w=w.split(".");for(var we=0;we<w.length-1;we++){var $e=w[we];if(!($e in ne))break e;ne=ne[$e]}w=w[w.length-1],we=ne[w],W=W(we),W!=we&&W!=null&&e(ne,w,{configurable:!0,writable:!0,value:W})}}r("Symbol.dispose",function(w){return w||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(w){return w||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(w){return w||function(W){var ne=[],we;for(we in W)Object.prototype.hasOwnProperty.call(W,we)&&ne.push([we,W[we]]);return ne}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function h(w){var W=typeof w;return W=="object"&&w!=null||W=="function"}function u(w,W,ne){return w.call.apply(w.bind,arguments)}function f(w,W,ne){return f=u,f.apply(null,arguments)}function A(w,W){var ne=Array.prototype.slice.call(arguments,1);return function(){var we=ne.slice();return we.push.apply(we,arguments),w.apply(this,we)}}function m(w,W){function ne(){}ne.prototype=W.prototype,w.Z=W.prototype,w.prototype=new ne,w.prototype.constructor=w,w.Ob=function(we,$e,st){for(var zt=Array(arguments.length-2),sn=2;sn<arguments.length;sn++)zt[sn-2]=arguments[sn];return W.prototype[$e].apply(we,zt)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?w=>w&&AsyncContext.Snapshot.wrap(w):w=>w;function g(w){const W=w.length;if(W>0){const ne=Array(W);for(let we=0;we<W;we++)ne[we]=w[we];return ne}return[]}function b(w,W){for(let we=1;we<arguments.length;we++){const $e=arguments[we];var ne=typeof $e;if(ne=ne!="object"?ne:$e?Array.isArray($e)?"array":ne:"null",ne=="array"||ne=="object"&&typeof $e.length=="number"){ne=w.length||0;const st=$e.length||0;w.length=ne+st;for(let zt=0;zt<st;zt++)w[ne+zt]=$e[zt]}else w.push($e)}}class I{constructor(W,ne){this.i=W,this.j=ne,this.h=0,this.g=null}get(){let W;return this.h>0?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function N(w){c.setTimeout(()=>{throw w},0)}function C(){var w=Q;let W=null;return w.g&&(W=w.g,w.g=w.g.next,w.g||(w.h=null),W.next=null),W}class E{constructor(){this.h=this.g=null}add(W,ne){const we=F.get();we.set(W,ne),this.h?this.h.next=we:this.g=we,this.h=we}}var F=new I(()=>new L,w=>w.reset());class L{constructor(){this.next=this.g=this.h=null}set(W,ne){this.h=W,this.g=ne,this.next=null}reset(){this.next=this.g=this.h=null}}let O,H=!1,Q=new E,U=()=>{const w=Promise.resolve(void 0);O=()=>{w.then(R)}};function R(){for(var w;w=C();){try{w.h.call(w.g)}catch(ne){N(ne)}var W=F;W.j(w),W.h<100&&(W.h++,w.next=W.g,W.g=w)}H=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(w,W){this.type=w,this.g=this.target=W,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var w=!1,W=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const ne=()=>{};c.addEventListener("test",ne,W),c.removeEventListener("test",ne,W)}catch{}return w})();function G(w){return/^[\s\xa0]*$/.test(w)}function ae(w,W){P.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w&&this.init(w,W)}m(ae,P),ae.prototype.init=function(w,W){const ne=this.type=w.type,we=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;this.target=w.target||w.srcElement,this.g=W,W=w.relatedTarget,W||(ne=="mouseover"?W=w.fromElement:ne=="mouseout"&&(W=w.toElement)),this.relatedTarget=W,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=w.pointerType,this.state=w.state,this.i=w,w.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),oe=0;function X(w,W,ne,we,$e){this.listener=w,this.proxy=null,this.src=W,this.type=ne,this.capture=!!we,this.ha=$e,this.key=++oe,this.da=this.fa=!1}function Y(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function re(w,W,ne){for(const we in w)W.call(ne,w[we],we,w)}function pe(w,W){for(const ne in w)W.call(void 0,w[ne],ne,w)}function ee(w){const W={};for(const ne in w)W[ne]=w[ne];return W}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(w,W){let ne,we;for(let $e=1;$e<arguments.length;$e++){we=arguments[$e];for(ne in we)w[ne]=we[ne];for(let st=0;st<M.length;st++)ne=M[st],Object.prototype.hasOwnProperty.call(we,ne)&&(w[ne]=we[ne])}}function ie(w){this.src=w,this.g={},this.h=0}ie.prototype.add=function(w,W,ne,we,$e){const st=w.toString();w=this.g[st],w||(w=this.g[st]=[],this.h++);const zt=ce(w,W,we,$e);return zt>-1?(W=w[zt],ne||(W.fa=!1)):(W=new X(W,this.src,st,!!we,$e),W.fa=ne,w.push(W)),W};function le(w,W){const ne=W.type;if(ne in w.g){var we=w.g[ne],$e=Array.prototype.indexOf.call(we,W,void 0),st;(st=$e>=0)&&Array.prototype.splice.call(we,$e,1),st&&(Y(W),w.g[ne].length==0&&(delete w.g[ne],w.h--))}}function ce(w,W,ne,we){for(let $e=0;$e<w.length;++$e){const st=w[$e];if(!st.da&&st.listener==W&&st.capture==!!ne&&st.ha==we)return $e}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Se={};function ge(w,W,ne,we,$e){if(Array.isArray(W)){for(let st=0;st<W.length;st++)ge(w,W[st],ne,we,$e);return null}return ne=ut(ne),w&&w[ue]?w.J(W,ne,h(we)?!!we.capture:!1,$e):Be(w,W,ne,!1,we,$e)}function Be(w,W,ne,we,$e,st){if(!W)throw Error("Invalid event type");const zt=h($e)?!!$e.capture:!!$e;let sn=nt(w);if(sn||(w[ve]=sn=new ie(w)),ne=sn.add(W,ne,we,zt,st),ne.proxy)return ne;if(we=Fe(),ne.proxy=we,we.src=w,we.listener=ne,w.addEventListener)V||($e=zt),$e===void 0&&($e=!1),w.addEventListener(W.toString(),we,$e);else if(w.attachEvent)w.attachEvent(Pe(W.toString()),we);else if(w.addListener&&w.removeListener)w.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return ne}function Fe(){function w(ne){return W.call(w.src,w.listener,ne)}const W=me;return w}function Qe(w,W,ne,we,$e){if(Array.isArray(W))for(var st=0;st<W.length;st++)Qe(w,W[st],ne,we,$e);else we=h(we)?!!we.capture:!!we,ne=ut(ne),w&&w[ue]?(w=w.i,st=String(W).toString(),st in w.g&&(W=w.g[st],ne=ce(W,ne,we,$e),ne>-1&&(Y(W[ne]),Array.prototype.splice.call(W,ne,1),W.length==0&&(delete w.g[st],w.h--)))):w&&(w=nt(w))&&(W=w.g[W.toString()],w=-1,W&&(w=ce(W,ne,we,$e)),(ne=w>-1?W[w]:null)&&Ze(ne))}function Ze(w){if(typeof w!="number"&&w&&!w.da){var W=w.src;if(W&&W[ue])le(W.i,w);else{var ne=w.type,we=w.proxy;W.removeEventListener?W.removeEventListener(ne,we,w.capture):W.detachEvent?W.detachEvent(Pe(ne),we):W.addListener&&W.removeListener&&W.removeListener(we),(ne=nt(W))?(le(ne,w),ne.h==0&&(ne.src=null,W[ve]=null)):Y(w)}}}function Pe(w){return w in Se?Se[w]:Se[w]="on"+w}function me(w,W){if(w.da)w=!0;else{W=new ae(W,this);const ne=w.listener,we=w.ha||w.src;w.fa&&Ze(w),w=ne.call(we,W)}return w}function nt(w){return w=w[ve],w instanceof ie?w:null}var It="__closure_events_fn_"+(Math.random()*1e9>>>0);function ut(w){return typeof w=="function"?w:(w[It]||(w[It]=function(W){return w.handleEvent(W)}),w[It])}function ze(){$.call(this),this.i=new ie(this),this.M=this,this.G=null}m(ze,$),ze.prototype[ue]=!0,ze.prototype.removeEventListener=function(w,W,ne,we){Qe(this,w,W,ne,we)};function Ft(w,W){var ne,we=w.G;if(we)for(ne=[];we;we=we.G)ne.push(we);if(w=w.M,we=W.type||W,typeof W=="string")W=new P(W,w);else if(W instanceof P)W.target=W.target||w;else{var $e=W;W=new P(we,w),J(W,$e)}$e=!0;let st,zt;if(ne)for(zt=ne.length-1;zt>=0;zt--)st=W.g=ne[zt],$e=Qt(st,we,!0,W)&&$e;if(st=W.g=w,$e=Qt(st,we,!0,W)&&$e,$e=Qt(st,we,!1,W)&&$e,ne)for(zt=0;zt<ne.length;zt++)st=W.g=ne[zt],$e=Qt(st,we,!1,W)&&$e}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var w=this.i;for(const W in w.g){const ne=w.g[W];for(let we=0;we<ne.length;we++)Y(ne[we]);delete w.g[W],w.h--}}this.G=null},ze.prototype.J=function(w,W,ne,we){return this.i.add(String(w),W,!1,ne,we)},ze.prototype.K=function(w,W,ne,we){return this.i.add(String(w),W,!0,ne,we)};function Qt(w,W,ne,we){if(W=w.i.g[String(W)],!W)return!0;W=W.concat();let $e=!0;for(let st=0;st<W.length;++st){const zt=W[st];if(zt&&!zt.da&&zt.capture==ne){const sn=zt.listener,Rr=zt.ha||zt.src;zt.fa&&le(w.i,zt),$e=sn.call(Rr,we)!==!1&&$e}}return $e&&!we.defaultPrevented}function Ct(w,W){if(typeof w!="function")if(w&&typeof w.handleEvent=="function")w=f(w.handleEvent,w);else throw Error("Invalid listener argument");return Number(W)>2147483647?-1:c.setTimeout(w,W||0)}function Jt(w){w.g=Ct(()=>{w.g=null,w.i&&(w.i=!1,Jt(w))},w.l);const W=w.h;w.h=null,w.m.apply(null,W)}class ts extends ${constructor(W,ne){super(),this.m=W,this.l=ne,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function as(w){$.call(this),this.h=w,this.g={}}m(as,$);var Xe=[];function Vt(w){re(w.g,function(W,ne){this.g.hasOwnProperty(ne)&&Ze(W)},w),w.g={}}as.prototype.N=function(){as.Z.N.call(this),Vt(this)},as.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=c.JSON.stringify,Mt=c.JSON.parse,mt=class{stringify(w){return c.JSON.stringify(w,void 0)}parse(w){return c.JSON.parse(w,void 0)}};function Dt(){}function Ns(){}var $t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){P.call(this,"d")}m(Wt,P);function lt(){P.call(this,"c")}m(lt,P);var Ot={},De=null;function dt(){return De=De||new ze}Ot.Ia="serverreachability";function at(w){P.call(this,Ot.Ia,w)}m(at,P);function Et(w){const W=dt();Ft(W,new at(W))}Ot.STAT_EVENT="statevent";function Xt(w,W){P.call(this,Ot.STAT_EVENT,w),this.stat=W}m(Xt,P);function vt(w){const W=dt();Ft(W,new Xt(W,w))}Ot.Ja="timingevent";function it(w,W){P.call(this,Ot.Ja,w),this.size=W}m(it,P);function Rt(w,W){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){w()},W)}function qt(){this.g=!0}qt.prototype.ua=function(){this.g=!1};function cs(w,W,ne,we,$e,st){w.info(function(){if(w.g)if(st){var zt="",sn=st.split("&");for(let bn=0;bn<sn.length;bn++){var Rr=sn[bn].split("=");if(Rr.length>1){const ar=Rr[0];Rr=Rr[1];const Za=ar.split("_");zt=Za.length>=2&&Za[1]=="type"?zt+(ar+"="+Rr+"&"):zt+(ar+"=redacted&")}}}else zt=null;else zt=st;return"XMLHTTP REQ ("+we+") [attempt "+$e+"]: "+W+`
`+ne+`
`+zt})}function Xs(w,W,ne,we,$e,st,zt){w.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+$e+"]: "+W+`
`+ne+`
`+st+" "+zt})}function Ls(w,W,ne,we){w.info(function(){return"XMLHTTP TEXT ("+W+"): "+hn(w,ne)+(we?" "+we:"")})}function Yt(w,W){w.info(function(){return"TIMEOUT: "+W})}qt.prototype.info=function(){};function hn(w,W){if(!w.g)return W;if(!W)return null;try{const st=JSON.parse(W);if(st){for(w=0;w<st.length;w++)if(Array.isArray(st[w])){var ne=st[w];if(!(ne.length<2)){var we=ne[1];if(Array.isArray(we)&&!(we.length<1)){var $e=we[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(let zt=1;zt<we.length;zt++)we[zt]=""}}}}return Kt(st)}catch{return W}}var Tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hr;function Zt(){}m(Zt,Dt),Zt.prototype.g=function(){return new XMLHttpRequest},hr=new Zt;function mn(w){return encodeURIComponent(String(w))}function pn(w){var W=1;w=w.split(":");const ne=[];for(;W>0&&w.length;)ne.push(w.shift()),W--;return w.length&&ne.push(w.join(":")),ne}function Nn(w,W,ne,we){this.j=w,this.i=W,this.l=ne,this.S=we||1,this.V=new as(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fs}function Fs(){this.i=null,this.g="",this.h=!1}var En={},An={};function Ir(w,W,ne){w.M=1,w.A=Ee(Yr(W)),w.u=ne,w.R=!0,ya(w,null)}function ya(w,W){w.F=Date.now(),_r(w),w.B=Yr(w.A);var ne=w.B,we=w.S;Array.isArray(we)||(we=[String(we)]),ta(ne.i,"t",we),w.C=0,ne=w.j.L,w.h=new Fs,w.g=ds(w.j,ne?W:null,!w.u),w.P>0&&(w.O=new ts(f(w.Y,w,w.g),w.P)),W=w.V,ne=w.g,we=w.ba;var $e="readystatechange";Array.isArray($e)||($e&&(Xe[0]=$e.toString()),$e=Xe);for(let st=0;st<$e.length;st++){const zt=ge(ne,$e[st],we||W.handleEvent,!1,W.h||W);if(!zt)break;W.g[zt.key]=zt}W=w.J?ee(w.J):{},w.u?(w.v||(w.v="POST"),W["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.B,w.v,w.u,W)):(w.v="GET",w.g.ea(w.B,w.v,null,W)),Et(),cs(w.i,w.v,w.B,w.l,w.S,w.u)}Nn.prototype.ba=function(w){w=w.target;const W=this.O;W&&gi(w)==3?W.j():this.Y(w)},Nn.prototype.Y=function(w){try{if(w==this.g)e:{const sn=gi(this.g),Rr=this.g.ya(),bn=this.g.ca();if(!(sn<3)&&(sn!=3||this.g&&(this.h.h||this.g.la()||jr(this.g)))){this.K||sn!=4||Rr==7||(Rr==8||bn<=0?Et(3):Et(2)),xr(this);var W=this.g.ca();this.X=W;var ne=ai(this);if(this.o=W==200,Xs(this.i,this.v,this.B,this.l,this.S,sn,W),this.o){if(this.U&&!this.L){t:{if(this.g){var we,$e=this.g;if((we=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(we)){var st=we;break t}}st=null}if(w=st)Ls(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,La(this,w);else{this.o=!1,this.m=3,vt(12),da(this),Fr(this);break e}}if(this.R){w=!0;let ar;for(;!this.K&&this.C<ne.length;)if(ar=yn(this,ne),ar==An){sn==4&&(this.m=4,vt(14),w=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==En){this.m=4,vt(15),Ls(this.i,this.l,ne,"[Invalid Chunk]"),w=!1;break}else Ls(this.i,this.l,ar,null),La(this,ar);if(ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||ne.length!=0||this.h.h||(this.m=1,vt(16),w=!1),this.o=this.o&&w,!w)Ls(this.i,this.l,ne,"[Invalid Chunked Response]"),da(this),Fr(this);else if(ne.length>0&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.aa&&!zt.P&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Ca(zt),zt.P=!0,vt(11))}}else Ls(this.i,this.l,ne,null),La(this,ne);sn==4&&da(this),this.o&&!this.K&&(sn==4?Te(this.j,this):(this.o=!1,_r(this)))}else xi(this.g),W==400&&ne.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),da(this),Fr(this)}}}catch{}finally{}};function ai(w){if(!ii(w))return w.g.la();const W=jr(w.g);if(W==="")return"";let ne="";const we=W.length,$e=gi(w.g)==4;if(!w.h.i){if(typeof TextDecoder>"u")return da(w),Fr(w),"";w.h.i=new c.TextDecoder}for(let st=0;st<we;st++)w.h.h=!0,ne+=w.h.i.decode(W[st],{stream:!($e&&st==we-1)});return W.length=0,w.h.g+=ne,w.C=0,w.h.g}function ii(w){return w.g?w.v=="GET"&&w.M!=2&&w.j.Aa:!1}function yn(w,W){var ne=w.C,we=W.indexOf(`
`,ne);return we==-1?An:(ne=Number(W.substring(ne,we)),isNaN(ne)?En:(we+=1,we+ne>W.length?An:(W=W.slice(we,we+ne),w.C=we+ne,W)))}Nn.prototype.cancel=function(){this.K=!0,da(this)};function _r(w){w.T=Date.now()+w.H,ea(w,w.H)}function ea(w,W){if(w.D!=null)throw Error("WatchDog timer not null");w.D=Rt(f(w.aa,w),W)}function xr(w){w.D&&(c.clearTimeout(w.D),w.D=null)}Nn.prototype.aa=function(){this.D=null;const w=Date.now();w-this.T>=0?(Yt(this.i,this.B),this.M!=2&&(Et(),vt(17)),da(this),this.m=2,Fr(this)):ea(this,this.T-w)};function Fr(w){w.j.I==0||w.K||Te(w.j,w)}function da(w){xr(w);var W=w.O;W&&typeof W.dispose=="function"&&W.dispose(),w.O=null,Vt(w.V),w.g&&(W=w.g,w.g=null,W.abort(),W.dispose())}function La(w,W){try{var ne=w.j;if(ne.I!=0&&(ne.g==w||Ti(ne.h,w))){if(!w.L&&Ti(ne.h,w)&&ne.I==3){try{var we=ne.Ba.g.parse(W)}catch{we=null}if(Array.isArray(we)&&we.length==3){var $e=we;if($e[0]==0){e:if(!ne.v){if(ne.g)if(ne.g.F+3e3<w.F)Ae(ne),ka(ne);else break e;Or(ne),vt(18)}}else ne.xa=$e[1],0<ne.xa-ne.K&&$e[2]<37500&&ne.F&&ne.A==0&&!ne.C&&(ne.C=Rt(f(ne.Va,ne),6e3));Ur(ne.h)<=1&&ne.ta&&(ne.ta=void 0)}else Me(ne,11)}else if((w.L||ne.g==w)&&Ae(ne),!G(W))for($e=ne.Ba.g.parse(W),W=0;W<$e.length;W++){let bn=$e[W];const ar=bn[0];if(!(ar<=ne.K))if(ne.K=ar,bn=bn[1],ne.I==2)if(bn[0]=="c"){ne.M=bn[1],ne.ba=bn[2];const Za=bn[3];Za!=null&&(ne.ka=Za,ne.j.info("VER="+ne.ka));const Na=bn[4];Na!=null&&(ne.za=Na,ne.j.info("SVER="+ne.za));const Wn=bn[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(we=1.5*Wn,ne.O=we,ne.j.info("backChannelRequestTimeoutMs_="+we)),we=ne;const on=w.g;if(on){const go=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var st=we.h;st.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(st.j=st.l,st.g=new Set,st.h&&(Ji(st,st.h),st.h=null))}if(we.G){const Lo=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(we.wa=Lo,gn(we.J,we.G,Lo))}}ne.I=3,ne.l&&ne.l.ra(),ne.aa&&(ne.T=Date.now()-w.F,ne.j.info("Handshake RTT: "+ne.T+"ms")),we=ne;var zt=w;if(we.na=St(we,we.L?we.ba:null,we.W),zt.L){wl(we.h,zt);var sn=zt,Rr=we.O;Rr&&(sn.H=Rr),sn.D&&(xr(sn),_r(sn)),we.g=zt}else rr(we);ne.i.length>0&&bs(ne)}else bn[0]!="stop"&&bn[0]!="close"||Me(ne,7);else ne.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?Me(ne,7):po(ne):bn[0]!="noop"&&ne.l&&ne.l.qa(bn),ne.A=0)}}Et(4)}catch{}}var zn=class{constructor(w,W){this.g=w,this.map=W}};function Qa(w){this.l=w||10,c.PerformanceNavigationTiming?(w=c.performance.getEntriesByType("navigation"),w=w.length>0&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function Ur(w){return w.h?1:w.g?w.g.size:0}function Ti(w,W){return w.h?w.h==W:w.g?w.g.has(W):!1}function Ji(w,W){w.g?w.g.add(W):w.h=W}function wl(w,W){w.h&&w.h==W?w.h=null:w.g&&w.g.has(W)&&w.g.delete(W)}Qa.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function jl(w){if(w.h!=null)return w.i.concat(w.h.G);if(w.g!=null&&w.g.size!==0){let W=w.i;for(const ne of w.g.values())W=W.concat(ne.G);return W}return g(w.i)}var Ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(w,W){if(w){w=w.split("&");for(let ne=0;ne<w.length;ne++){const we=w[ne].indexOf("=");let $e,st=null;we>=0?($e=w[ne].substring(0,we),st=w[ne].substring(we+1)):$e=w[ne],W($e,st?decodeURIComponent(st.replace(/\+/g," ")):"")}}}function Oa(w){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let W;w instanceof Oa?(this.l=w.l,Sn(this,w.j),this.o=w.o,this.g=w.g,Ii(this,w.u),this.h=w.h,Wr(this,wa(w.i)),this.m=w.m):w&&(W=String(w).match(Ao))?(this.l=!1,Sn(this,W[1]||"",!0),this.o=Je(W[2]||""),this.g=Je(W[3]||"",!0),Ii(this,W[4]),this.h=Je(W[5]||"",!0),Wr(this,W[6]||"",!0),this.m=Je(W[7]||"")):(this.l=!1,this.i=new Js(null,this.l))}Oa.prototype.toString=function(){const w=[];var W=this.j;W&&w.push(xt(W,fs,!0),":");var ne=this.g;return(ne||W=="file")&&(w.push("//"),(W=this.o)&&w.push(xt(W,fs,!0),"@"),w.push(mn(ne).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ne=this.u,ne!=null&&w.push(":",String(ne))),(ne=this.h)&&(this.g&&ne.charAt(0)!="/"&&w.push("/"),w.push(xt(ne,ne.charAt(0)=="/"?zs:ms,!0))),(ne=this.i.toString())&&w.push("?",ne),(ne=this.m)&&w.push("#",xt(ne,Lt)),w.join("")},Oa.prototype.resolve=function(w){const W=Yr(this);let ne=!!w.j;ne?Sn(W,w.j):ne=!!w.o,ne?W.o=w.o:ne=!!w.g,ne?W.g=w.g:ne=w.u!=null;var we=w.h;if(ne)Ii(W,w.u);else if(ne=!!w.h){if(we.charAt(0)!="/")if(this.g&&!this.h)we="/"+we;else{var $e=W.h.lastIndexOf("/");$e!=-1&&(we=W.h.slice(0,$e+1)+we)}if($e=we,$e==".."||$e==".")we="";else if($e.indexOf("./")!=-1||$e.indexOf("/.")!=-1){we=$e.lastIndexOf("/",0)==0,$e=$e.split("/");const st=[];for(let zt=0;zt<$e.length;){const sn=$e[zt++];sn=="."?we&&zt==$e.length&&st.push(""):sn==".."?((st.length>1||st.length==1&&st[0]!="")&&st.pop(),we&&zt==$e.length&&st.push("")):(st.push(sn),we=!0)}we=st.join("/")}else we=$e}return ne?W.h=we:ne=w.i.toString()!=="",ne?Wr(W,wa(w.i)):ne=!!w.m,ne&&(W.m=w.m),W};function Yr(w){return new Oa(w)}function Sn(w,W,ne){w.j=ne?Je(W,!0):W,w.j&&(w.j=w.j.replace(/:$/,""))}function Ii(w,W){if(W){if(W=Number(W),isNaN(W)||W<0)throw Error("Bad port number "+W);w.u=W}else w.u=null}function Wr(w,W,ne){W instanceof Js?(w.i=W,Gn(w.i,w.l)):(ne||(W=xt(W,Gs)),w.i=new Js(W,w.l))}function gn(w,W,ne){w.i.set(W,ne)}function Ee(w){return gn(w,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),w}function Je(w,W){return w?W?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function xt(w,W,ne){return typeof w=="string"?(w=encodeURI(w).replace(W,_t),ne&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function _t(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var fs=/[#\/\?@]/g,ms=/[#\?:]/g,zs=/[#\?]/g,Gs=/[#\?@]/g,Lt=/#/g;function Js(w,W){this.h=this.g=null,this.i=w||null,this.j=!!W}function Bs(w){w.g||(w.g=new Map,w.h=0,w.i&&ba(w.i,function(W,ne){w.add(decodeURIComponent(W.replace(/\+/g," ")),ne)}))}s=Js.prototype,s.add=function(w,W){Bs(this),this.i=null,w=Qr(this,w);let ne=this.g.get(w);return ne||this.g.set(w,ne=[]),ne.push(W),this.h+=1,this};function Zs(w,W){Bs(w),W=Qr(w,W),w.g.has(W)&&(w.i=null,w.h-=w.g.get(W).length,w.g.delete(W))}function nr(w,W){return Bs(w),W=Qr(w,W),w.g.has(W)}s.forEach=function(w,W){Bs(this),this.g.forEach(function(ne,we){ne.forEach(function($e){w.call(W,$e,we,this)},this)},this)};function wr(w,W){Bs(w);let ne=[];if(typeof W=="string")nr(w,W)&&(ne=ne.concat(w.g.get(Qr(w,W))));else for(w=Array.from(w.g.values()),W=0;W<w.length;W++)ne=ne.concat(w[W]);return ne}s.set=function(w,W){return Bs(this),this.i=null,w=Qr(this,w),nr(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[W]),this.h+=1,this},s.get=function(w,W){return w?(w=wr(this,w),w.length>0?String(w[0]):W):W};function ta(w,W,ne){Zs(w,W),ne.length>0&&(w.i=null,w.g.set(Qr(w,W),g(ne)),w.h+=ne.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],W=Array.from(this.g.keys());for(let we=0;we<W.length;we++){var ne=W[we];const $e=mn(ne);ne=wr(this,ne);for(let st=0;st<ne.length;st++){let zt=$e;ne[st]!==""&&(zt+="="+mn(ne[st])),w.push(zt)}}return this.i=w.join("&")};function wa(w){const W=new Js;return W.i=w.i,w.g&&(W.g=new Map(w.g),W.h=w.h),W}function Qr(w,W){return W=String(W),w.j&&(W=W.toLowerCase()),W}function Gn(w,W){W&&!w.j&&(Bs(w),w.i=null,w.g.forEach(function(ne,we){const $e=we.toLowerCase();we!=$e&&(Zs(this,we),ta(this,$e,ne))},w)),w.j=W}function fa(w,W){const ne=new qt;if(c.Image){const we=new Image;we.onload=A(ja,ne,"TestLoadImage: loaded",!0,W,we),we.onerror=A(ja,ne,"TestLoadImage: error",!1,W,we),we.onabort=A(ja,ne,"TestLoadImage: abort",!1,W,we),we.ontimeout=A(ja,ne,"TestLoadImage: timeout",!1,W,we),c.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=w}else W(!1)}function _i(w,W){const ne=new qt,we=new AbortController,$e=setTimeout(()=>{we.abort(),ja(ne,"TestPingServer: timeout",!1,W)},1e4);fetch(w,{signal:we.signal}).then(st=>{clearTimeout($e),st.ok?ja(ne,"TestPingServer: ok",!0,W):ja(ne,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout($e),ja(ne,"TestPingServer: error",!1,W)})}function ja(w,W,ne,we,$e){try{$e&&($e.onload=null,$e.onerror=null,$e.onabort=null,$e.ontimeout=null),we(ne)}catch{}}function Fi(){this.g=new mt}function Ts(w){this.i=w.Sb||null,this.h=w.ab||!1}m(Ts,Dt),Ts.prototype.g=function(){return new ll(this.i,this.h)};function ll(w,W){ze.call(this),this.H=w,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ll,ze),s=ll.prototype,s.open=function(w,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=w,this.D=W,this.readyState=1,Ba(this)},s.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const W={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};w&&(W.body=w),(this.H||c).fetch(new Request(this.D,W)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},s.Pa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Ba(this)),this.g&&(this.readyState=3,Ba(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bl(this)}else w.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bl(w){w.j.read().then(w.Ma.bind(w)).catch(w.ga.bind(w))}s.Ma=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var W=w.value?w.value:new Uint8Array(0);(W=this.B.decode(W,{stream:!w.done}))&&(this.response=this.responseText+=W)}w.done?Do(this):Ba(this),this.readyState==3&&Bl(this)}},s.Oa=function(w){this.g&&(this.response=this.responseText=w,Do(this))},s.Na=function(w){this.g&&(this.response=w,Do(this))},s.ga=function(){this.g&&Do(this)};function Do(w){w.readyState=4,w.l=null,w.j=null,w.B=null,Ba(w)}s.setRequestHeader=function(w,W){this.A.append(w,W)},s.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],W=this.h.entries();for(var ne=W.next();!ne.done;)ne=ne.value,w.push(ne[0]+": "+ne[1]),ne=W.next();return w.join(`\r
`)};function Ba(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function sa(w){let W="";return re(w,function(ne,we){W+=we,W+=":",W+=ne,W+=`\r
`}),W}function Pa(w,W,ne){e:{for(we in ne){var we=!1;break e}we=!0}we||(ne=sa(ne),typeof w=="string"?ne!=null&&mn(ne):gn(w,W,ne))}function $n(w){ze.call(this),this.headers=new Map,this.L=w||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m($n,ze);var oi=/^https?$/i,Ro=["POST","PUT"];s=$n.prototype,s.Fa=function(w){this.H=w},s.ea=function(w,W,ne,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);W=W?W.toUpperCase():"GET",this.D=w,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hr.g(),this.g.onreadystatechange=x(f(this.Ca,this));try{this.B=!0,this.g.open(W,String(w),!0),this.B=!1}catch(st){pi(this,st);return}if(w=ne||"",ne=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var $e in we)ne.set($e,we[$e]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const st of we.keys())ne.set(st,we.get(st));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(ne.keys()).find(st=>st.toLowerCase()=="content-type"),$e=c.FormData&&w instanceof c.FormData,!(Array.prototype.indexOf.call(Ro,W,void 0)>=0)||we||$e||ne.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[st,zt]of ne)this.g.setRequestHeader(st,zt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(w),this.v=!1}catch(st){pi(this,st)}};function pi(w,W){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=W,w.o=5,Sl(w),qi(w)}function Sl(w){w.A||(w.A=!0,Ft(w,"complete"),Ft(w,"error"))}s.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=w||7,Ft(this,"complete"),Ft(this,"abort"),qi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),$n.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Sa(this):this.Xa())},s.Xa=function(){Sa(this)};function Sa(w){if(w.h&&typeof o<"u"){if(w.v&&gi(w)==4)setTimeout(w.Ca.bind(w),0);else if(Ft(w,"readystatechange"),gi(w)==4){w.h=!1;try{const st=w.ca();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var ne;if(!(ne=W)){var we;if(we=st===0){let zt=String(w.D).match(Ao)[1]||null;!zt&&c.self&&c.self.location&&(zt=c.self.location.protocol.slice(0,-1)),we=!oi.test(zt?zt.toLowerCase():"")}ne=we}if(ne)Ft(w,"complete"),Ft(w,"success");else{w.o=6;try{var $e=gi(w)>2?w.g.statusText:""}catch{$e=""}w.l=$e+" ["+w.ca()+"]",Sl(w)}}finally{qi(w)}}}}function qi(w,W){if(w.g){w.m&&(clearTimeout(w.m),w.m=null);const ne=w.g;w.g=null,W||Ft(w,"ready");try{ne.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function gi(w){return w.g?w.g.readyState:0}s.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(w){if(this.g){var W=this.g.responseText;return w&&W.indexOf(w)==0&&(W=W.substring(w.length)),Mt(W)}};function jr(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.F){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function xi(w){const W={};w=(w.g&&gi(w)>=2&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<w.length;we++){if(G(w[we]))continue;var ne=pn(w[we]);const $e=ne[0];if(ne=ne[1],typeof ne!="string")continue;ne=ne.trim();const st=W[$e]||[];W[$e]=st,st.push(ne)}pe(W,function(we){return we.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(w,W,ne){return ne&&ne.internalChannelParams&&ne.internalChannelParams[w]||W}function Yn(w){this.za=0,this.i=[],this.j=new qt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=na("failFast",!1,w),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=na("baseRetryDelayMs",5e3,w),this.Za=na("retryDelaySeedMs",1e4,w),this.Ta=na("forwardChannelMaxRetries",2,w),this.va=na("forwardChannelRequestTimeoutMs",2e4,w),this.ma=w&&w.xmlHttpFactory||void 0,this.Ua=w&&w.Rb||void 0,this.Aa=w&&w.useFetchStreams||!1,this.O=void 0,this.L=w&&w.supportsCrossDomainXhr||!1,this.M="",this.h=new Qa(w&&w.concurrentRequestLimit),this.Ba=new Fi,this.S=w&&w.fastHandshake||!1,this.R=w&&w.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=w&&w.Pb||!1,w&&w.ua&&this.j.ua(),w&&w.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&w&&w.detectBufferingProxy||!1,this.ia=void 0,w&&w.longPollingTimeout&&w.longPollingTimeout>0&&(this.ia=w.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Yn.prototype,s.ka=8,s.I=1,s.connect=function(w,W,ne,we){vt(0),this.W=w,this.H=W||{},ne&&we!==void 0&&(this.H.OSID=ne,this.H.OAID=we),this.F=this.X,this.J=St(this,null,this.W),bs(this)};function po(w){if(Ht(w),w.I==3){var W=w.V++,ne=Yr(w.J);if(gn(ne,"SID",w.M),gn(ne,"RID",W),gn(ne,"TYPE","terminate"),ks(w,ne),W=new Nn(w,w.j,W),W.M=2,W.A=Ee(Yr(ne)),ne=!1,c.navigator&&c.navigator.sendBeacon)try{ne=c.navigator.sendBeacon(W.A.toString(),"")}catch{}!ne&&c.Image&&(new Image().src=W.A,ne=!0),ne||(W.g=ds(W.j,null),W.g.ea(W.A)),W.F=Date.now(),_r(W)}ht(w)}function ka(w){w.g&&(Ca(w),w.g.cancel(),w.g=null)}function Ht(w){ka(w),w.v&&(c.clearTimeout(w.v),w.v=null),Ae(w),w.h.cancel(),w.m&&(typeof w.m=="number"&&c.clearTimeout(w.m),w.m=null)}function bs(w){if(!ha(w.h)&&!w.m){w.m=!0;var W=w.Ea;O||U(),H||(O(),H=!0),Q.add(W,w),w.D=0}}function cn(w,W){return Ur(w.h)>=w.h.j-(w.m?1:0)?!1:w.m?(w.i=W.G.concat(w.i),!0):w.I==1||w.I==2||w.D>=(w.Sa?0:w.Ta)?!1:(w.m=Rt(f(w.Ea,w,W),Ue(w,w.D)),w.D++,!0)}s.Ea=function(w){if(this.m)if(this.m=null,this.I==1){if(!w){this.V=Math.floor(Math.random()*1e5),w=this.V++;const $e=new Nn(this,this.j,w);let st=this.o;if(this.U&&(st?(st=ee(st),J(st,this.U)):st=this.U),this.u!==null||this.R||($e.J=st,st=null),this.S)e:{for(var W=0,ne=0;ne<this.i.length;ne++){t:{var we=this.i[ne];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(W+=we,W>4096){W=ne;break e}if(W===4096||ne===this.i.length-1){W=ne+1;break e}}W=1e3}else W=1e3;W=ss(this,$e,W),ne=Yr(this.J),gn(ne,"RID",w),gn(ne,"CVER",22),this.G&&gn(ne,"X-HTTP-Session-Id",this.G),ks(this,ne),st&&(this.R?W="headers="+mn(sa(st))+"&"+W:this.u&&Pa(ne,this.u,st)),Ji(this.h,$e),this.Ra&&gn(ne,"TYPE","init"),this.S?(gn(ne,"$req",W),gn(ne,"SID","null"),$e.U=!0,Ir($e,ne,null)):Ir($e,ne,W),this.I=2}}else this.I==3&&(w?In(this,w):this.i.length==0||ha(this.h)||In(this))};function In(w,W){var ne;W?ne=W.l:ne=w.V++;const we=Yr(w.J);gn(we,"SID",w.M),gn(we,"RID",ne),gn(we,"AID",w.K),ks(w,we),w.u&&w.o&&Pa(we,w.u,w.o),ne=new Nn(w,w.j,ne,w.D+1),w.u===null&&(ne.J=w.o),W&&(w.i=W.G.concat(w.i)),W=ss(w,ne,1e3),ne.H=Math.round(w.va*.5)+Math.round(w.va*.5*Math.random()),Ji(w.h,ne),Ir(ne,we,W)}function ks(w,W){w.H&&re(w.H,function(ne,we){gn(W,we,ne)}),w.l&&re({},function(ne,we){gn(W,we,ne)})}function ss(w,W,ne){ne=Math.min(w.i.length,ne);const we=w.l?f(w.l.Ka,w.l,w):null;e:{var $e=w.i;let sn=-1;for(;;){const Rr=["count="+ne];sn==-1?ne>0?(sn=$e[0].g,Rr.push("ofs="+sn)):sn=0:Rr.push("ofs="+sn);let bn=!0;for(let ar=0;ar<ne;ar++){var st=$e[ar].g;const Za=$e[ar].map;if(st-=sn,st<0)sn=Math.max(0,$e[ar].g-100),bn=!1;else try{st="req"+st+"_"||"";try{var zt=Za instanceof Map?Za:Object.entries(Za);for(const[Na,Wn]of zt){let on=Wn;h(Wn)&&(on=Kt(Wn)),Rr.push(st+Na+"="+encodeURIComponent(on))}}catch(Na){throw Rr.push(st+"type="+encodeURIComponent("_badmap")),Na}}catch{we&&we(Za)}}if(bn){zt=Rr.join("&");break e}}zt=void 0}return w=w.i.splice(0,ne),W.G=w,zt}function rr(w){if(!w.g&&!w.v){w.Y=1;var W=w.Da;O||U(),H||(O(),H=!0),Q.add(W,w),w.A=0}}function Or(w){return w.g||w.v||w.A>=3?!1:(w.Y++,w.v=Rt(f(w.Da,w),Ue(w,w.A)),w.A++,!0)}s.Da=function(){if(this.v=null,k(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var w=4*this.T;this.j.info("BP detection timer enabled: "+w),this.B=Rt(f(this.Wa,this),w)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),ka(this),k(this))};function Ca(w){w.B!=null&&(c.clearTimeout(w.B),w.B=null)}function k(w){w.g=new Nn(w,w.j,"rpc",w.Y),w.u===null&&(w.g.J=w.o),w.g.P=0;var W=Yr(w.na);gn(W,"RID","rpc"),gn(W,"SID",w.M),gn(W,"AID",w.K),gn(W,"CI",w.F?"0":"1"),!w.F&&w.ia&&gn(W,"TO",w.ia),gn(W,"TYPE","xmlhttp"),ks(w,W),w.u&&w.o&&Pa(W,w.u,w.o),w.O&&(w.g.H=w.O);var ne=w.g;w=w.ba,ne.M=1,ne.A=Ee(Yr(W)),ne.u=null,ne.R=!0,ya(ne,w)}s.Va=function(){this.C!=null&&(this.C=null,ka(this),Or(this),vt(19))};function Ae(w){w.C!=null&&(c.clearTimeout(w.C),w.C=null)}function Te(w,W){var ne=null;if(w.g==W){Ae(w),Ca(w),w.g=null;var we=2}else if(Ti(w.h,W))ne=W.G,wl(w.h,W),we=1;else return;if(w.I!=0){if(W.o)if(we==1){ne=W.u?W.u.length:0,W=Date.now()-W.F;var $e=w.D;we=dt(),Ft(we,new it(we,ne)),bs(w)}else rr(w);else if($e=W.m,$e==3||$e==0&&W.X>0||!(we==1&&cn(w,W)||we==2&&Or(w)))switch(ne&&ne.length>0&&(W=w.h,W.i=W.i.concat(ne)),$e){case 1:Me(w,5);break;case 4:Me(w,10);break;case 3:Me(w,6);break;default:Me(w,2)}}}function Ue(w,W){let ne=w.Qa+Math.floor(Math.random()*w.Za);return w.isActive()||(ne*=2),ne*W}function Me(w,W){if(w.j.info("Error code "+W),W==2){var ne=f(w.bb,w),we=w.Ua;const $e=!we;we=new Oa(we||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Sn(we,"https"),Ee(we),$e?fa(we.toString(),ne):_i(we.toString(),ne)}else vt(2);w.I=0,w.l&&w.l.pa(W),ht(w),Ht(w)}s.bb=function(w){w?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function ht(w){if(w.I=0,w.ja=[],w.l){const W=jl(w.h);(W.length!=0||w.i.length!=0)&&(b(w.ja,W),b(w.ja,w.i),w.h.i.length=0,g(w.i),w.i.length=0),w.l.oa()}}function St(w,W,ne){var we=ne instanceof Oa?Yr(ne):new Oa(ne);if(we.g!="")W&&(we.g=W+"."+we.g),Ii(we,we.u);else{var $e=c.location;we=$e.protocol,W=W?W+"."+$e.hostname:$e.hostname,$e=+$e.port;const st=new Oa(null);we&&Sn(st,we),W&&(st.g=W),$e&&Ii(st,$e),ne&&(st.h=ne),we=st}return ne=w.G,W=w.wa,ne&&W&&gn(we,ne,W),gn(we,"VER",w.ka),ks(w,we),we}function ds(w,W,ne){if(W&&!w.L)throw Error("Can't create secondary domain capable XhrIo object.");return W=w.Aa&&!w.ma?new $n(new Ts({ab:ne})):new $n(w.ma),W.Fa(w.L),W}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function xs(){}s=xs.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ms(){}Ms.prototype.g=function(w,W){return new Us(w,W)};function Us(w,W){ze.call(this),this.g=new Yn(W),this.l=w,this.h=W&&W.messageUrlParams||null,w=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(w?w["X-WebChannel-Content-Type"]=W.messageContentType:w={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.sa&&(w?w["X-WebChannel-Client-Profile"]=W.sa:w={"X-WebChannel-Client-Profile":W.sa}),this.g.U=w,(w=W&&W.Qb)&&!G(w)&&(this.g.u=w),this.A=W&&W.supportsCrossDomainXhr||!1,this.v=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!G(W)&&(this.g.G=W,w=this.h,w!==null&&W in w&&(w=this.h,W in w&&delete w[W])),this.j=new vr(this)}m(Us,ze),Us.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Us.prototype.close=function(){po(this.g)},Us.prototype.o=function(w){var W=this.g;if(typeof w=="string"){var ne={};ne.__data__=w,w=ne}else this.v&&(ne={},ne.__data__=Kt(w),w=ne);W.i.push(new zn(W.Ya++,w)),W.I==3&&bs(W)},Us.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,Us.Z.N.call(this)};function Fn(w){Wt.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var W=w.__sm__;if(W){e:{for(const ne in W){w=ne;break e}w=void 0}(this.i=w)&&(w=this.i,W=W!==null&&w in W?W[w]:void 0),this.data=W}else this.data=w}m(Fn,Wt);function Dr(){lt.call(this),this.status=1}m(Dr,lt);function vr(w){this.g=w}m(vr,xs),vr.prototype.ra=function(){Ft(this.g,"a")},vr.prototype.qa=function(w){Ft(this.g,new Fn(w))},vr.prototype.pa=function(w){Ft(this.g,new Dr)},vr.prototype.oa=function(){Ft(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Us.prototype.send=Us.prototype.o,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,s4=function(){return new Ms},t4=function(){return dt()},e4=Ot,q1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tr.NO_ERROR=0,Tr.TIMEOUT=8,Tr.HTTP_ERROR=6,px=Tr,dr.COMPLETE="complete",ZE=dr,Ns.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",ze.prototype.listen=ze.prototype.J,Fp=Ns,$n.prototype.listenOnce=$n.prototype.K,$n.prototype.getLastError=$n.prototype.Ha,$n.prototype.getLastErrorCode=$n.prototype.ya,$n.prototype.getStatus=$n.prototype.ca,$n.prototype.getResponseJson=$n.prototype.La,$n.prototype.getResponseText=$n.prototype.la,$n.prototype.send=$n.prototype.ea,$n.prototype.setWithCredentials=$n.prototype.Fa,qE=$n}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});const MB="@firebase/firestore",HB="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rl.UNAUTHENTICATED=new rl(null),rl.GOOGLE_CREDENTIALS=new rl("google-credentials-uid"),rl.FIRST_PARTY=new rl("first-party-uid"),rl.MOCK_USER=new rl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new u8("@firebase/firestore");function Kf(){return tf.logLevel}function ys(s,...e){if(tf.logLevel<=ur.DEBUG){const t=e.map(vw);tf.debug(`Firestore (${jm}): ${s}`,...t)}}function Iu(s,...e){if(tf.logLevel<=ur.ERROR){const t=e.map(vw);tf.error(`Firestore (${jm}): ${s}`,...t)}}function lm(s,...e){if(tf.logLevel<=ur.WARN){const t=e.map(vw);tf.warn(`Firestore (${jm}): ${s}`,...t)}}function vw(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,n4(s,n,t)}function n4(s,e,t){let n=`FIRESTORE (${jm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Iu(n),new Error(n)}function Er(s,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,s||n4(e,r,n)}function fn(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ls extends uc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rl.UNAUTHENTICATED)))}shutdown(){}}class h8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class f8{constructor(e){this.t=e,this.currentUser=rl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Er(this.o===void 0,42304);let n=this.i;const r=u=>this.i!==n?(n=this.i,t(u)):Promise.resolve();let o=new Kc;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kc,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const u=o;e.enqueueRetryable((async()=>{await u.promise,await r(this.currentUser)}))},h=u=>{ys("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((u=>h(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?h(u):(ys("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kc)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ys("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Er(typeof n.accessToken=="string",31837,{l:n}),new r4(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Er(e===null||typeof e=="string",2055,{h:e}),new rl(e)}}class m8{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=rl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class p8{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new m8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,iA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Er(this.o===void 0,3512);const n=o=>{o.error!=null&&ys("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ys("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const r=o=>{ys("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ys("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Er(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new VB(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=x8(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<t&&(n+=e.charAt(r[o]%62))}return n}}function er(s,e){return s<e?-1:s>e?1:0}function Z1(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const r=s.charAt(n),o=e.charAt(n);if(r!==o)return Ky(r)===Ky(o)?er(r,o):Ky(r)?1:-1}return er(s.length,e.length)}const v8=55296,y8=57343;function Ky(s){const e=s.charCodeAt(0);return e>=v8&&e<=y8}function Am(s,e,t){return s.length===e.length&&s.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="__name__";class Pc{constructor(e,t,n){t===void 0?t=0:t>e.length&&an(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&an(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Pc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pc?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const o=Pc.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return er(e.length,t.length)}static compareSegments(e,t){const n=Pc.isNumericId(e),r=Pc.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Pc.extractNumericId(e).compare(Pc.extractNumericId(t)):Z1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pd.fromString(e.substring(4,e.length-2))}}class va extends Pc{construct(e,t,n){return new va(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ls(jt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new va(t)}static emptyPath(){return new va([])}}const b8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class To extends Pc{construct(e,t,n){return new To(e,t,n)}static isValidIdentifier(e){return b8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),To.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KB}static keyField(){return new To([KB])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(n.length===0)throw new ls(jt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ls(jt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ls(jt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(n+=h,r++):(o(),r++)}if(o(),c)throw new ls(jt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new To(t)}static emptyPath(){return new To([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.path=e}static fromPath(e){return new Ys(va.fromString(e))}static fromName(e){return new Ys(va.fromString(e).popFirst(5))}static empty(){return new Ys(va.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&va.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return va.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ys(new va(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(s,e,t){if(!t)throw new ls(jt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function w8(s,e,t,n){if(e===!0&&n===!0)throw new ls(jt.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function zB(s){if(!Ys.isDocumentKey(s))throw new ls(jt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function GB(s){if(Ys.isDocumentKey(s))throw new ls(jt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function i4(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function wv(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":an(12329,{type:typeof s})}function bl(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ls(jt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wv(s);throw new ls(jt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function j8(s,e){if(e<=0)throw new ls(jt.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(s,e){const t={typeString:s};return e&&(t.value=e),t}function Fg(s,e){if(!i4(s))throw new ls(jt.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const c=s[n];if(r&&typeof c!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ls(jt.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=-62135596800,YB=1e6;class tr{static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*YB);return new tr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ls(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ls(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$B)throw new ls(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ls(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YB}_compareTo(e){return this.seconds===e.seconds?er(this.nanoseconds,e.nanoseconds):er(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fg(e,tr._jsonSchema))return new tr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$B;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tr._jsonSchemaVersion="firestore/timestamp/1.0",tr._jsonSchema={type:Yi("string",tr._jsonSchemaVersion),seconds:Yi("number"),nanoseconds:Yi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{static fromTimestamp(e){return new vn(e)}static min(){return new vn(new tr(0,0))}static max(){return new vn(new tr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function B8(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,r=vn.fromTimestamp(n===1e9?new tr(t+1,0):new tr(t,n));return new Vd(r,Ys.empty(),e)}function S8(s){return new Vd(s.readTime,s.key,lg)}class Vd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vd(vn.min(),Ys.empty(),lg)}static max(){return new Vd(vn.max(),Ys.empty(),lg)}}function C8(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ys.comparator(s.documentKey,e.documentKey),t!==0?t:er(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(s){if(s.code!==jt.FAILED_PRECONDITION||s.message!==N8)throw s;ys("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&an(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ut(((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ut?t:Ut.resolve(t)}catch(t){return Ut.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ut.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ut.reject(t)}static resolve(e){return new Ut(((t,n)=>{t(e)}))}static reject(e){return new Ut(((t,n)=>{n(e)}))}static waitFor(e){return new Ut(((t,n)=>{let r=0,o=0,c=!1;e.forEach((h=>{++r,h.next((()=>{++o,c&&o===r&&t()}),(u=>n(u)))})),c=!0,o===r&&t()}))}static or(e){let t=Ut.resolve(!1);for(const n of e)t=t.next((r=>r?Ut.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,o)=>{n.push(t.call(this,r,o))})),this.waitFor(n)}static mapArray(e,t){return new Ut(((n,r)=>{const o=e.length,c=new Array(o);let h=0;for(let u=0;u<o;u++){const f=u;t(e[f]).next((A=>{c[f]=A,++h,h===o&&n(c)}),(A=>r(A)))}}))}static doWhile(e,t){return new Ut(((n,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):n()};o()}))}}function T8(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sm(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jv.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=-1;function Bv(s){return s==null}function kx(s){return s===0&&1/s==-1/0}function I8(s){return typeof s=="number"&&Number.isInteger(s)&&!kx(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="";function _8(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=WB(e)),e=F8(s.get(t),e);return WB(e)}function F8(s,e){let t=e;const n=s.length;for(let r=0;r<n;r++){const o=s.charAt(r);switch(o){case"\0":t+="";break;case o4:t+="";break;default:t+=o}}return t}function WB(s){return s+o4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function eh(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function U8(s,e){const t=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.push(e(s[n],n,s));return t}function l4(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t){this.comparator=e,this.root=t||Eo.EMPTY}insert(e,t){return new ri(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(e){return new ri(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new K0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new K0(this.root,e,this.comparator,!1)}getReverseIterator(){return new K0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new K0(this.root,e,this.comparator,!0)}}class K0{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Eo{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=n??Eo.RED,this.left=r??Eo.EMPTY,this.right=o??Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new Eo(e??this.key,t??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Eo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw an(43730,{key:this.key,value:this.value});if(this.right.isRed())throw an(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw an(27949);return e+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1;Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw an(57766)}get value(){throw an(16141)}get color(){throw an(16727)}get left(){throw an(29726)}get right(){throw an(36894)}copy(e,t,n,r,o){return this}insert(e,t,n){return new Eo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.comparator=e,this.data=new ri(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JB(this.data.getIterator())}getIteratorFrom(e){return new JB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lo(this.comparator);return t.data=e,t}}class JB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.fields=e,e.sort(To.comparator)}static empty(){return new oA([])}unionWith(e){let t=new lo(To.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new oA(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Am(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new A4("Invalid base64 string: "+o):o}})(e);return new Fo(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(e);return new Fo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return er(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fo.EMPTY_BYTE_STRING=new Fo("");const D8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kd(s){if(Er(!!s,39018),typeof s=="string"){let e=0;const t=D8.exec(s);if(Er(!!t,46558,{timestamp:s}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Si(s.seconds),nanos:Si(s.nanos)}}function Si(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function zd(s){return typeof s=="string"?Fo.fromBase64String(s):Fo.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="server_timestamp",u4="__type__",d4="__previous_value__",h4="__local_write_time__";function ww(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[u4])==null?void 0:n.stringValue)===c4}function Sv(s){const e=s.mapValue.fields[d4];return ww(e)?Sv(e):e}function Ag(s){const e=Kd(s.mapValue.fields[h4].timestampValue);return new tr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,t,n,r,o,c,h,u,f,A){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=A}}const Mx="(default)";class cg{constructor(e,t){this.projectId=e,this.database=t||Mx}static empty(){return new cg("","")}get isDefaultDatabase(){return this.database===Mx}isEqual(e){return e instanceof cg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="__type__",L8="__max__",z0={mapValue:{}},m4="__vector__",Hx="value";function Gd(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ww(s)?4:O8(s)?9007199254740991:Q8(s)?10:11:an(28295,{value:s})}function Xc(s,e){if(s===e)return!0;const t=Gd(s);if(t!==Gd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ag(s).isEqual(Ag(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Kd(r.timestampValue),h=Kd(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(r,o){return zd(r.bytesValue).isEqual(zd(o.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(r,o){return Si(r.geoPointValue.latitude)===Si(o.geoPointValue.latitude)&&Si(r.geoPointValue.longitude)===Si(o.geoPointValue.longitude)})(s,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Si(r.integerValue)===Si(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Si(r.doubleValue),h=Si(o.doubleValue);return c===h?kx(c)===kx(h):isNaN(c)&&isNaN(h)}return!1})(s,e);case 9:return Am(s.arrayValue.values||[],e.arrayValue.values||[],Xc);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(XB(c)!==XB(h))return!1;for(const u in c)if(c.hasOwnProperty(u)&&(h[u]===void 0||!Xc(c[u],h[u])))return!1;return!0})(s,e);default:return an(52216,{left:s})}}function ug(s,e){return(s.values||[]).find((t=>Xc(t,e)))!==void 0}function cm(s,e){if(s===e)return 0;const t=Gd(s),n=Gd(e);if(t!==n)return er(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return er(s.booleanValue,e.booleanValue);case 2:return(function(o,c){const h=Si(o.integerValue||o.doubleValue),u=Si(c.integerValue||c.doubleValue);return h<u?-1:h>u?1:h===u?0:isNaN(h)?isNaN(u)?0:-1:1})(s,e);case 3:return qB(s.timestampValue,e.timestampValue);case 4:return qB(Ag(s),Ag(e));case 5:return Z1(s.stringValue,e.stringValue);case 6:return(function(o,c){const h=zd(o),u=zd(c);return h.compareTo(u)})(s.bytesValue,e.bytesValue);case 7:return(function(o,c){const h=o.split("/"),u=c.split("/");for(let f=0;f<h.length&&f<u.length;f++){const A=er(h[f],u[f]);if(A!==0)return A}return er(h.length,u.length)})(s.referenceValue,e.referenceValue);case 8:return(function(o,c){const h=er(Si(o.latitude),Si(c.latitude));return h!==0?h:er(Si(o.longitude),Si(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return ZB(s.arrayValue,e.arrayValue);case 10:return(function(o,c){var x,g,b,I;const h=o.fields||{},u=c.fields||{},f=(x=h[Hx])==null?void 0:x.arrayValue,A=(g=u[Hx])==null?void 0:g.arrayValue,m=er(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((I=A==null?void 0:A.values)==null?void 0:I.length)||0);return m!==0?m:ZB(f,A)})(s.mapValue,e.mapValue);case 11:return(function(o,c){if(o===z0.mapValue&&c===z0.mapValue)return 0;if(o===z0.mapValue)return 1;if(c===z0.mapValue)return-1;const h=o.fields||{},u=Object.keys(h),f=c.fields||{},A=Object.keys(f);u.sort(),A.sort();for(let m=0;m<u.length&&m<A.length;++m){const x=Z1(u[m],A[m]);if(x!==0)return x;const g=cm(h[u[m]],f[A[m]]);if(g!==0)return g}return er(u.length,A.length)})(s.mapValue,e.mapValue);default:throw an(23264,{he:t})}}function qB(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return er(s,e);const t=Kd(s),n=Kd(e),r=er(t.seconds,n.seconds);return r!==0?r:er(t.nanos,n.nanos)}function ZB(s,e){const t=s.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const o=cm(t[r],n[r]);if(o)return o}return er(t.length,n.length)}function um(s){return eb(s)}function eb(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const n=Kd(t);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return zd(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ys.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let n="[",r=!0;for(const o of t.values||[])r?r=!1:n+=",",n+=eb(o);return n+"]"})(s.arrayValue):"mapValue"in s?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const c of n)o?o=!1:r+=",",r+=`${c}:${eb(t.fields[c])}`;return r+"}"})(s.mapValue):an(61005,{value:s})}function gx(s){switch(Gd(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sv(s);return e?16+gx(e):16;case 5:return 2*s.stringValue.length;case 6:return zd(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,o)=>r+gx(o)),0)})(s.arrayValue);case 10:case 11:return(function(n){let r=0;return eh(n.fields,((o,c)=>{r+=o.length+gx(c)})),r})(s.mapValue);default:throw an(13486,{value:s})}}function e5(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function tb(s){return!!s&&"integerValue"in s}function jw(s){return!!s&&"arrayValue"in s}function t5(s){return!!s&&"nullValue"in s}function s5(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function xx(s){return!!s&&"mapValue"in s}function Q8(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[f4])==null?void 0:n.stringValue)===m4}function Mp(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return eh(s.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Mp(n))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mp(s.arrayValue.values[t]);return e}return{...s}}function O8(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===L8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.value=e}static empty(){return new Hl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mp(t)}setAll(e){let t=To.emptyPath(),n={},r=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const u=this.getFieldsMap(t);this.applyChanges(u,n,r),n={},r=[],t=h.popLast()}c?n[h.lastSegment()]=Mp(c):r.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());xx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];xx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){eh(t,((r,o)=>e[r]=o));for(const r of n)delete e[r]}clone(){return new Hl(Mp(this.value))}}function p4(s){const e=[];return eh(s.fields,((t,n)=>{const r=new To([t]);if(xx(n)){const o=p4(n.mapValue).fields;if(o.length===0)e.push(r);else for(const c of o)e.push(r.child(c))}else e.push(r)})),new oA(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t,n,r,o,c,h){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new al(e,0,vn.min(),vn.min(),vn.min(),Hl.empty(),0)}static newFoundDocument(e,t,n,r){return new al(e,1,t,vn.min(),n,r,0)}static newNoDocument(e,t){return new al(e,2,t,vn.min(),vn.min(),Hl.empty(),0)}static newUnknownDocument(e,t){return new al(e,3,t,vn.min(),vn.min(),Hl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof al&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new al(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.position=e,this.inclusive=t}}function n5(s,e,t){let n=0;for(let r=0;r<s.position.length;r++){const o=e[r],c=s.position[r];if(o.field.isKeyField()?n=Ys.comparator(Ys.fromName(c.referenceValue),t.key):n=cm(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function r5(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Xc(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t="asc"){this.field=e,this.dir=t}}function P8(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{}class $i extends g4{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new M8(e,t,n):t==="array-contains"?new K8(e,n):t==="in"?new z8(e,n):t==="not-in"?new G8(e,n):t==="array-contains-any"?new $8(e,n):new $i(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new H8(e,n):new V8(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cm(t,this.value)):t!==null&&Gd(this.value)===Gd(t)&&this.matchesComparison(cm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return an(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lc extends g4{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new lc(e,t)}matches(e){return x4(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function x4(s){return s.op==="and"}function v4(s){return k8(s)&&x4(s)}function k8(s){for(const e of s.filters)if(e instanceof lc)return!1;return!0}function sb(s){if(s instanceof $i)return s.field.canonicalString()+s.op.toString()+um(s.value);if(v4(s))return s.filters.map((e=>sb(e))).join(",");{const e=s.filters.map((t=>sb(t))).join(",");return`${s.op}(${e})`}}function y4(s,e){return s instanceof $i?(function(n,r){return r instanceof $i&&n.op===r.op&&n.field.isEqual(r.field)&&Xc(n.value,r.value)})(s,e):s instanceof lc?(function(n,r){return r instanceof lc&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((o,c,h)=>o&&y4(c,r.filters[h])),!0):!1})(s,e):void an(19439)}function b4(s){return s instanceof $i?(function(t){return`${t.field.canonicalString()} ${t.op} ${um(t.value)}`})(s):s instanceof lc?(function(t){return t.op.toString()+" {"+t.getFilters().map(b4).join(" ,")+"}"})(s):"Filter"}class M8 extends $i{constructor(e,t,n){super(e,t,n),this.key=Ys.fromName(n.referenceValue)}matches(e){const t=Ys.comparator(e.key,this.key);return this.matchesComparison(t)}}class H8 extends $i{constructor(e,t){super(e,"in",t),this.keys=w4("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class V8 extends $i{constructor(e,t){super(e,"not-in",t),this.keys=w4("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function w4(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Ys.fromName(n.referenceValue)))}class K8 extends $i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jw(t)&&ug(t.arrayValue,this.value)}}class z8 extends $i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ug(this.value.arrayValue,t)}}class G8 extends $i{constructor(e,t){super(e,"not-in",t)}matches(e){if(ug(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ug(this.value.arrayValue,t)}}class $8 extends $i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jw(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>ug(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,t=null,n=[],r=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function a5(s,e=null,t=[],n=[],r=null,o=null,c=null){return new Y8(s,e,t,n,r,o,c)}function Bw(s){const e=fn(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>sb(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Bv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>um(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>um(n))).join(",")),e.Te=t}return e.Te}function Sw(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!P8(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!y4(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!r5(s.startAt,e.startAt)&&r5(s.endAt,e.endAt)}function nb(s){return Ys.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t=null,n=[],r=[],o=null,c="F",h=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W8(s,e,t,n,r,o,c,h){return new Cm(s,e,t,n,r,o,c,h)}function Cv(s){return new Cm(s)}function i5(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function j4(s){return s.collectionGroup!==null}function Hp(s){const e=fn(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new lo(To.comparator);return c.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new dg(o,n))})),t.has(To.keyField().canonicalString())||e.Ie.push(new dg(To.keyField(),n))}return e.Ie}function zc(s){const e=fn(s);return e.Ee||(e.Ee=B4(e,Hp(s))),e.Ee}function X8(s){const e=fn(s);return e.de||(e.de=B4(e,s.explicitOrderBy)),e.de}function B4(s,e){if(s.limitType==="F")return a5(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new dg(r.field,o)}));const t=s.endAt?new Vx(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new Vx(s.startAt.position,s.startAt.inclusive):null;return a5(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function rb(s,e){const t=s.filters.concat([e]);return new Cm(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Kx(s,e,t){return new Cm(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Nv(s,e){return Sw(zc(s),zc(e))&&s.limitType===e.limitType}function S4(s){return`${Bw(zc(s))}|lt:${s.limitType}`}function zf(s){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>b4(r))).join(", ")}]`),Bv(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>um(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>um(r))).join(",")),`Target(${n})`})(zc(s))}; limitType=${s.limitType})`}function Ev(s,e){return e.isFoundDocument()&&(function(n,r){const o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):Ys.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(s,e)&&(function(n,r){for(const o of Hp(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(s,e)&&(function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0})(s,e)&&(function(n,r){return!(n.startAt&&!(function(c,h,u){const f=n5(c,h,u);return c.inclusive?f<=0:f<0})(n.startAt,Hp(n),r)||n.endAt&&!(function(c,h,u){const f=n5(c,h,u);return c.inclusive?f>=0:f>0})(n.endAt,Hp(n),r))})(s,e)}function J8(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function C4(s){return(e,t)=>{let n=!1;for(const r of Hp(s)){const o=q8(r,e,t);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function q8(s,e,t){const n=s.field.isKeyField()?Ys.comparator(e.key,t.key):(function(o,c,h){const u=c.data.field(o),f=h.data.field(o);return u!==null&&f!==null?cm(u,f):an(42886)})(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return an(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,o]of n)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){eh(this.inner,((t,n)=>{for(const[r,o]of n)e(r,o)}))}isEmpty(){return l4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=new ri(Ys.comparator);function _u(){return Z8}const N4=new ri(Ys.comparator);function Up(...s){let e=N4;for(const t of s)e=e.insert(t.key,t);return e}function E4(s){let e=N4;return s.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function kh(){return Vp()}function T4(){return Vp()}function Vp(){return new Af((s=>s.toString()),((s,e)=>s.isEqual(e)))}const eQ=new ri(Ys.comparator),tQ=new lo(Ys.comparator);function sr(...s){let e=tQ;for(const t of s)e=e.add(t);return e}const sQ=new lo(er);function nQ(){return sQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kx(e)?"-0":e}}function I4(s){return{integerValue:""+s}}function rQ(s,e){return I8(e)?I4(e):Cw(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this._=void 0}}function aQ(s,e,t){return s instanceof zx?(function(r,o){const c={fields:{[u4]:{stringValue:c4},[h4]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ww(o)&&(o=Sv(o)),o&&(c.fields[d4]=o),{mapValue:c}})(t,e):s instanceof hg?F4(s,e):s instanceof fg?U4(s,e):(function(r,o){const c=_4(r,o),h=o5(c)+o5(r.Ae);return tb(c)&&tb(r.Ae)?I4(h):Cw(r.serializer,h)})(s,e)}function iQ(s,e,t){return s instanceof hg?F4(s,e):s instanceof fg?U4(s,e):t}function _4(s,e){return s instanceof Gx?(function(n){return tb(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class zx extends Tv{}class hg extends Tv{constructor(e){super(),this.elements=e}}function F4(s,e){const t=D4(e);for(const n of s.elements)t.some((r=>Xc(r,n)))||t.push(n);return{arrayValue:{values:t}}}class fg extends Tv{constructor(e){super(),this.elements=e}}function U4(s,e){let t=D4(e);for(const n of s.elements)t=t.filter((r=>!Xc(r,n)));return{arrayValue:{values:t}}}class Gx extends Tv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o5(s){return Si(s.integerValue||s.doubleValue)}function D4(s){return jw(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function oQ(s,e){return s.field.isEqual(e.field)&&(function(n,r){return n instanceof hg&&r instanceof hg||n instanceof fg&&r instanceof fg?Am(n.elements,r.elements,Xc):n instanceof Gx&&r instanceof Gx?Xc(n.Ae,r.Ae):n instanceof zx&&r instanceof zx})(s.transform,e.transform)}class lQ{constructor(e,t){this.version=e,this.transformResults=t}}class Kl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kl}static exists(e){return new Kl(void 0,e)}static updateTime(e){return new Kl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vx(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Iv{}function R4(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new _v(s.key,Kl.none()):new Ug(s.key,s.data,Kl.none());{const t=s.data,n=Hl.empty();let r=new lo(To.comparator);for(let o of e.fields)if(!r.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),r=r.add(o)}return new th(s.key,n,new oA(r.toArray()),Kl.none())}}function AQ(s,e,t){s instanceof Ug?(function(r,o,c){const h=r.value.clone(),u=A5(r.fieldTransforms,o,c.transformResults);h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(s,e,t):s instanceof th?(function(r,o,c){if(!vx(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=A5(r.fieldTransforms,o,c.transformResults),u=o.data;u.setAll(L4(r)),u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(s,e,t):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Kp(s,e,t,n){return s instanceof Ug?(function(o,c,h,u){if(!vx(o.precondition,c))return h;const f=o.value.clone(),A=c5(o.fieldTransforms,u,c);return f.setAll(A),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(s,e,t,n):s instanceof th?(function(o,c,h,u){if(!vx(o.precondition,c))return h;const f=c5(o.fieldTransforms,u,c),A=c.data;return A.setAll(L4(o)),A.setAll(f),c.convertToFoundDocument(c.version,A).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((m=>m.field)))})(s,e,t,n):(function(o,c,h){return vx(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(s,e,t)}function cQ(s,e){let t=null;for(const n of s.fieldTransforms){const r=e.data.field(n.field),o=_4(n.transform,r||null);o!=null&&(t===null&&(t=Hl.empty()),t.set(n.field,o))}return t||null}function l5(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Am(n,r,((o,c)=>oQ(o,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ug extends Iv{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class th extends Iv{constructor(e,t,n,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function L4(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}})),e}function A5(s,e,t){const n=new Map;Er(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let r=0;r<t.length;r++){const o=s[r],c=o.transform,h=e.data.field(o.field);n.set(o.field,iQ(c,h,t[r]))}return n}function c5(s,e,t){const n=new Map;for(const r of s){const o=r.transform,c=t.data.field(r.field);n.set(r.field,aQ(o,c,e))}return n}class _v extends Iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uQ extends Iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&AQ(o,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=T4();return this.mutations.forEach((r=>{const o=e.get(r.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(r.key)?null:h;const u=R4(c,h);u!==null&&n.set(r.key,u),c.isValidDocument()||c.convertToNoDocument(vn.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),sr())}isEqual(e){return this.batchId===e.batchId&&Am(this.mutations,e.mutations,((t,n)=>l5(t,n)))&&Am(this.baseMutations,e.baseMutations,((t,n)=>l5(t,n)))}}class Nw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Er(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return eQ})();const o=e.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,n[c].version);return new Nw(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki,cr;function pQ(s){switch(s){case jt.OK:return an(64938);case jt.CANCELLED:case jt.UNKNOWN:case jt.DEADLINE_EXCEEDED:case jt.RESOURCE_EXHAUSTED:case jt.INTERNAL:case jt.UNAVAILABLE:case jt.UNAUTHENTICATED:return!1;case jt.INVALID_ARGUMENT:case jt.NOT_FOUND:case jt.ALREADY_EXISTS:case jt.PERMISSION_DENIED:case jt.FAILED_PRECONDITION:case jt.ABORTED:case jt.OUT_OF_RANGE:case jt.UNIMPLEMENTED:case jt.DATA_LOSS:return!0;default:return an(15467,{code:s})}}function Q4(s){if(s===void 0)return Iu("GRPC error has no .code"),jt.UNKNOWN;switch(s){case Ki.OK:return jt.OK;case Ki.CANCELLED:return jt.CANCELLED;case Ki.UNKNOWN:return jt.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return jt.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return jt.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return jt.INTERNAL;case Ki.UNAVAILABLE:return jt.UNAVAILABLE;case Ki.UNAUTHENTICATED:return jt.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return jt.INVALID_ARGUMENT;case Ki.NOT_FOUND:return jt.NOT_FOUND;case Ki.ALREADY_EXISTS:return jt.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return jt.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return jt.FAILED_PRECONDITION;case Ki.ABORTED:return jt.ABORTED;case Ki.OUT_OF_RANGE:return jt.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return jt.UNIMPLEMENTED;case Ki.DATA_LOSS:return jt.DATA_LOSS;default:return an(39323,{code:s})}}(cr=Ki||(Ki={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=new Pd([4294967295,4294967295],0);function u5(s){const e=gQ().encode(s),t=new JE;return t.update(e),new Uint8Array(t.digest())}function d5(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pd([t,n],0),new Pd([r,o],0)]}class Ew{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dp(`Invalid padding: ${t}`);if(n<0)throw new Dp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dp(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Dp(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Pd.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Pd.fromNumber(n)));return r.compare(xQ)===1&&(r=new Pd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=u5(e),[n,r]=d5(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,r,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Ew(o,r,t);return n.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=u5(e),[n,r]=d5(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,r,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Dg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fv(vn.min(),r,new ri(er),_u(),sr())}}class Dg{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Dg(n,t,sr(),sr(),sr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class O4{constructor(e,t){this.targetId=e,this.Ce=t}}class P4{constructor(e,t,n=Fo.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class h5{constructor(){this.ve=0,this.Fe=f5(),this.Me=Fo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=sr(),t=sr(),n=sr();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:an(38017,{changeType:o})}})),new Dg(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=f5()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Er(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vQ{constructor(e){this.Ge=e,this.ze=new Map,this.je=_u(),this.Je=G0(),this.He=G0(),this.Ye=new ri(er)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:an(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(nb(o))if(n===0){const c=new Ys(o.path);this.et(t,c,al.newNoDocument(c,vn.min()))}else Er(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const h=this.ut(e),u=h?this.ct(h,e,c):1;if(u!==0){this.it(t);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=t;let c,h;try{c=zd(n).toUint8Array()}catch(u){if(u instanceof A4)return lm("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{h=new Ew(c,r,o)}catch(u){return lm(u instanceof Dp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return h.ge===0?null:h}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&nb(h.target)){const u=new Ys(h.target.path);this.It(u).has(c)||this.Et(c,u)||this.et(c,u,al.newNoDocument(u,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=sr();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const r=new Fv(e,t,this.Ye,this.je,n);return this.je=_u(),this.Je=G0(),this.He=G0(),this.Ye=new ri(er),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new h5,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new lo(er),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new lo(er),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ys("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new h5),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function G0(){return new ri(Ys.comparator)}function f5(){return new ri(Ys.comparator)}const yQ={asc:"ASCENDING",desc:"DESCENDING"},bQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wQ={and:"AND",or:"OR"};class jQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ab(s,e){return s.useProto3Json||Bv(e)?e:{value:e}}function $x(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k4(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function BQ(s,e){return $x(s,e.toTimestamp())}function Gc(s){return Er(!!s,49232),vn.fromTimestamp((function(t){const n=Kd(t);return new tr(n.seconds,n.nanos)})(s))}function Tw(s,e){return ib(s,e).canonicalString()}function ib(s,e){const t=(function(r){return new va(["projects",r.projectId,"databases",r.database])})(s).child("documents");return e===void 0?t:t.child(e)}function M4(s){const e=va.fromString(s);return Er($4(e),10190,{key:e.toString()}),e}function ob(s,e){return Tw(s.databaseId,e.path)}function zy(s,e){const t=M4(e);if(t.get(1)!==s.databaseId.projectId)throw new ls(jt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ls(jt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ys(V4(t))}function H4(s,e){return Tw(s.databaseId,e)}function SQ(s){const e=M4(s);return e.length===4?va.emptyPath():V4(e)}function lb(s){return new va(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function V4(s){return Er(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function m5(s,e,t){return{name:ob(s,e),fields:t.value.mapValue.fields}}function CQ(s,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:an(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,A){return f.useProto3Json?(Er(A===void 0||typeof A=="string",58123),Fo.fromBase64String(A||"")):(Er(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Fo.fromUint8Array(A||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(f){const A=f.code===void 0?jt.UNKNOWN:Q4(f.code);return new ls(A,f.message||"")})(c);t=new P4(n,r,o,h||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=zy(s,n.document.name),o=Gc(n.document.updateTime),c=n.document.createTime?Gc(n.document.createTime):vn.min(),h=new Hl({mapValue:{fields:n.document.fields}}),u=al.newFoundDocument(r,o,c,h),f=n.targetIds||[],A=n.removedTargetIds||[];t=new yx(f,A,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=zy(s,n.document),o=n.readTime?Gc(n.readTime):vn.min(),c=al.newNoDocument(r,o),h=n.removedTargetIds||[];t=new yx([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=zy(s,n.document),o=n.removedTargetIds||[];t=new yx([],o,r,null)}else{if(!("filter"in e))return an(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:o}=n,c=new mQ(r,o),h=n.targetId;t=new O4(h,c)}}return t}function NQ(s,e){let t;if(e instanceof Ug)t={update:m5(s,e.key,e.value)};else if(e instanceof _v)t={delete:ob(s,e.key)};else if(e instanceof th)t={update:m5(s,e.key,e.data),updateMask:LQ(e.fieldMask)};else{if(!(e instanceof uQ))return an(16599,{Vt:e.type});t={verify:ob(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const h=c.transform;if(h instanceof zx)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hg)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fg)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gx)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw an(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:BQ(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:an(27497)})(s,e.precondition)),t}function EQ(s,e){return s&&s.length>0?(Er(e!==void 0,14353),s.map((t=>(function(r,o){let c=r.updateTime?Gc(r.updateTime):Gc(o);return c.isEqual(vn.min())&&(c=Gc(o)),new lQ(c,r.transformResults||[])})(t,e)))):[]}function TQ(s,e){return{documents:[H4(s,e.path)]}}function K4(s,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=H4(s,r);const o=(function(f){if(f.length!==0)return G4(lc.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((A=>(function(x){return{field:Ed(x.field),direction:UQ(x.dir)}})(A)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=ab(s,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function IQ(s,e,t,n){const{ft:r,parent:o}=K4(s,e),c={},h=[];let u=0;return t.forEach((f=>{const A="aggregate_"+u++;c[A]=f.alias,f.aggregateType==="count"?h.push({alias:A,count:{}}):f.aggregateType==="avg"?h.push({alias:A,avg:{field:Ed(f.fieldPath)}}):f.aggregateType==="sum"&&h.push({alias:A,sum:{field:Ed(f.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:h,structuredQuery:r.structuredQuery},parent:r.parent},gt:c,parent:o}}function _Q(s){let e=SQ(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){Er(n===1,65062);const A=t.from[0];A.allDescendants?r=A.collectionId:e=e.child(A.collectionId)}let o=[];t.where&&(o=(function(m){const x=z4(m);return x instanceof lc&&v4(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(m){return m.map((x=>(function(b){return new dg(Gf(b.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(m){let x;return x=typeof m=="object"?m.value:m,Bv(x)?null:x})(t.limit));let u=null;t.startAt&&(u=(function(m){const x=!!m.before,g=m.values||[];return new Vx(g,x)})(t.startAt));let f=null;return t.endAt&&(f=(function(m){const x=!m.before,g=m.values||[];return new Vx(g,x)})(t.endAt)),W8(e,r,c,o,h,"F",u,f)}function FQ(s,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function z4(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Gf(t.unaryFilter.field);return $i.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Gf(t.unaryFilter.field);return $i.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gf(t.unaryFilter.field);return $i.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gf(t.unaryFilter.field);return $i.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return an(61313);default:return an(60726)}})(s):s.fieldFilter!==void 0?(function(t){return $i.create(Gf(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return an(58110);default:return an(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return lc.create(t.compositeFilter.filters.map((n=>z4(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return an(1026)}})(t.compositeFilter.op))})(s):an(30097,{filter:s})}function UQ(s){return yQ[s]}function DQ(s){return bQ[s]}function RQ(s){return wQ[s]}function Ed(s){return{fieldPath:s.canonicalString()}}function Gf(s){return To.fromServerFormat(s.fieldPath)}function G4(s){return s instanceof $i?(function(t){if(t.op==="=="){if(s5(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NAN"}};if(t5(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(s5(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NOT_NAN"}};if(t5(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(t.field),op:DQ(t.op),value:t.value}}})(s):s instanceof lc?(function(t){const n=t.getFilters().map((r=>G4(r)));return n.length===1?n[0]:{compositeFilter:{op:RQ(t.op),filters:n}}})(s):an(54877,{filter:s})}function LQ(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $4(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t,n,r,o=vn.min(),c=vn.min(),h=Fo.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=u}withSequenceNumber(e){return new Id(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.yt=e}}function OQ(s){const e=_Q({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Kx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(){this.Cn=new kQ}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ut.resolve()}getCollectionParents(e,t){return Ut.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ut.resolve()}deleteFieldIndex(e,t){return Ut.resolve()}deleteAllFieldIndexes(e){return Ut.resolve()}createTargetIndexes(e,t){return Ut.resolve()}getDocumentsMatchingTarget(e,t){return Ut.resolve(null)}getIndexType(e,t){return Ut.resolve(0)}getFieldIndexes(e,t){return Ut.resolve([])}getNextCollectionGroupToUpdate(e){return Ut.resolve(null)}getMinOffset(e,t){return Ut.resolve(Vd.min())}getMinOffsetFromCollectionGroup(e,t){return Ut.resolve(Vd.min())}updateCollectionGroup(e,t,n){return Ut.resolve()}updateIndexEntries(e,t){return Ut.resolve()}}class kQ{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lo(va.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new lo(va.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y4=41943040;class Ml{static withCacheSize(e){return new Ml(e,Ml.DEFAULT_COLLECTION_PERCENTILE,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml.DEFAULT_COLLECTION_PERCENTILE=10,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ml.DEFAULT=new Ml(Y4,Ml.DEFAULT_COLLECTION_PERCENTILE,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ml.DISABLED=new Ml(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new dm(0)}static cr(){return new dm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="LruGarbageCollector",MQ=1048576;function x5([s,e],[t,n]){const r=er(s,t);return r===0?er(e,n):r}class HQ{constructor(e){this.Ir=e,this.buffer=new lo(x5),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();x5(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VQ{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ys(g5,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sm(t)?ys(g5,"Ignoring IndexedDB error during garbage collection: ",t):await Bm(t)}await this.Vr(3e5)}))}}class KQ{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Ut.resolve(jv.ce);const n=new HQ(t);return this.mr.forEachTarget(e,(r=>n.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>n.Ar(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ys("LruGarbageCollector","Garbage collection skipped; disabled"),Ut.resolve(p5)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ys("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p5):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,o,c,h,u,f;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(ys("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,c=Date.now(),this.nthSequenceNumber(e,r)))).next((m=>(n=m,h=Date.now(),this.removeTargets(e,n,t)))).next((m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(f=Date.now(),Kf()<=ur.DEBUG&&ys("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-A}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${o} targets in `+(u-h)+`ms
	Removed ${m} documents in `+(f-u)+`ms
Total Duration: ${f-A}ms`),Ut.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:m}))))}}function zQ(s,e){return new KQ(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(){this.changes=new Af((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,al.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ut.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&Kp(n.mutation,r,oA.empty(),tr.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,sr()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=sr()){const r=kh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((o=>{let c=Up();return o.forEach(((h,u)=>{c=c.insert(h,u.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=kh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,sr())))}populateOverlays(e,t,n){const r=[];return n.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,n,r){let o=_u();const c=Vp(),h=(function(){return Vp()})();return t.forEach(((u,f)=>{const A=n.get(f.key);r.has(f.key)&&(A===void 0||A.mutation instanceof th)?o=o.insert(f.key,f):A!==void 0?(c.set(f.key,A.mutation.getFieldMask()),Kp(A.mutation,f,A.mutation.getFieldMask(),tr.now())):c.set(f.key,oA.empty())})),this.recalculateAndSaveOverlays(e,o).next((u=>(u.forEach(((f,A)=>c.set(f,A))),t.forEach(((f,A)=>h.set(f,new $Q(A,c.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const n=Vp();let r=new ri(((c,h)=>c-h)),o=sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((u=>{const f=t.get(u);if(f===null)return;let A=n.get(u)||oA.empty();A=h.applyToLocalView(f,A),n.set(u,A);const m=(r.get(h.batchId)||sr()).add(u);r=r.insert(h.batchId,m)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const u=h.getNext(),f=u.key,A=u.value,m=T4();A.forEach((x=>{if(!o.has(x)){const g=R4(t.get(x),n.get(x));g!==null&&m.set(x,g),o=o.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,m))}return Ut.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return(function(c){return Ys.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):j4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):Ut.resolve(kh());let h=lg,u=o;return c.next((f=>Ut.forEach(f,((A,m)=>(h<m.largestBatchId&&(h=m.largestBatchId),o.get(A)?Ut.resolve():this.remoteDocumentCache.getEntry(e,A).next((x=>{u=u.insert(A,x)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,u,f,sr()))).next((A=>({batchId:h,changes:E4(A)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ys(t)).next((n=>{let r=Up();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let c=Up();return this.indexManager.getCollectionParents(e,o).next((h=>Ut.forEach(h,(u=>{const f=(function(m,x){return new Cm(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,r).next((A=>{A.forEach(((m,x)=>{c=c.insert(m,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r)))).next((c=>{o.forEach(((u,f)=>{const A=f.getKey();c.get(A)===null&&(c=c.insert(A,al.newInvalidDocument(A)))}));let h=Up();return c.forEach(((u,f)=>{const A=o.get(u);A!==void 0&&Kp(A.mutation,f,oA.empty(),tr.now()),Ev(t,f)&&(h=h.insert(u,f))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ut.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Gc(r.createTime)}})(t)),Ut.resolve()}getNamedQuery(e,t){return Ut.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:OQ(r.bundledQuery),readTime:Gc(r.readTime)}})(t)),Ut.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(){this.overlays=new ri(Ys.comparator),this.qr=new Map}getOverlay(e,t){return Ut.resolve(this.overlays.get(t))}getOverlays(e,t){const n=kh();return Ut.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&n.set(r,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,o)=>{this.St(e,t,o)})),Ut.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),Ut.resolve()}getOverlaysForCollection(e,t,n){const r=kh(),o=t.length+1,c=new Ys(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const u=h.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ut.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new ri(((f,A)=>f-A));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let A=o.get(f.largestBatchId);A===null&&(A=kh(),o=o.insert(f.largestBatchId,A)),A.set(f.getKey(),f)}}const h=kh(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,A)=>h.set(f,A))),!(h.size()>=r)););return Ut.resolve(h)}St(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new hQ(t,n));let o=this.qr.get(t);o===void 0&&(o=sr(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(){this.sessionToken=Fo.EMPTY_BYTE_STRING}getSessionToken(e){return Ut.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ut.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.Qr=new lo(fo.$r),this.Ur=new lo(fo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new fo(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new fo(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new Ys(new va([])),n=new fo(t,e),r=new fo(t,e+1),o=[];return this.Ur.forEachInRange([n,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ys(new va([])),n=new fo(t,e),r=new fo(t,e+1);let o=sr();return this.Ur.forEachInRange([n,r],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new fo(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class fo{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ys.comparator(e.key,t.key)||er(e.Yr,t.Yr)}static Kr(e,t){return er(e.Yr,t.Yr)||Ys.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lo(fo.$r)}checkEmpty(e){return Ut.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new dQ(o,t,n,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new fo(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Ut.resolve(c)}lookupMutationBatch(e,t){return Ut.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),o=r<0?0:r;return Ut.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ut.resolve(this.mutationQueue.length===0?bw:this.tr-1)}getAllMutationBatches(e){return Ut.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fo(t,0),r=new fo(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,r],(c=>{const h=this.Xr(c.Yr);o.push(h)})),Ut.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lo(er);return t.forEach((r=>{const o=new fo(r,0),c=new fo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{n=n.add(h.Yr)}))})),Ut.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;Ys.isDocumentKey(o)||(o=o.child(""));const c=new fo(new Ys(o),0);let h=new lo(er);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!n.isPrefixOf(f)&&(f.length===r&&(h=h.add(u.Yr)),!0)}),c),Ut.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((n=>{const r=this.Xr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Er(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ut.forEach(t.mutations,(r=>{const o=new fo(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new fo(t,0),r=this.Zr.firstAfterOrEqual(n);return Ut.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ut.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e){this.ri=e,this.docs=(function(){return new ri(Ys.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ut.resolve(n?n.document.mutableCopy():al.newInvalidDocument(t))}getEntries(e,t){let n=_u();return t.forEach((r=>{const o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():al.newInvalidDocument(r))})),Ut.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=_u();const c=t.path,h=new Ys(c.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(h);for(;u.hasNext();){const{key:f,value:{document:A}}=u.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||C8(S8(A),n)<=0||(r.has(A.key)||Ev(t,A))&&(o=o.insert(A.key,A.mutableCopy()))}return Ut.resolve(o)}getAllFromCollectionGroup(e,t,n,r){an(9500)}ii(e,t){return Ut.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new eO(this)}getSize(e){return Ut.resolve(this.size)}}class eO extends GQ{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),Ut.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.persistence=e,this.si=new Af((t=>Bw(t)),Sw),this.lastRemoteSnapshotVersion=vn.min(),this.highestTargetId=0,this.oi=0,this._i=new Iw,this.targetCount=0,this.ai=dm.ur()}forEachTarget(e,t){return this.si.forEach(((n,r)=>t(r))),Ut.resolve()}getLastRemoteSnapshotVersion(e){return Ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ut.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ut.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ut.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new dm(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ut.resolve()}updateTargetData(e,t){return this.Pr(t),Ut.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ut.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&n.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),Ut.waitFor(o).next((()=>r))}getTargetCount(e){return Ut.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ut.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ut.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((c=>{o.push(r.markPotentiallyOrphaned(e,c))})),Ut.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ut.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ut.resolve(n)}containsKey(e,t){return Ut.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t){this.ui={},this.overlays={},this.ci=new jv(0),this.li=!1,this.li=!0,this.hi=new JQ,this.referenceDelegate=e(this),this.Pi=new tO(this),this.indexManager=new PQ,this.remoteDocumentCache=(function(r){return new ZQ(r)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new QQ(t),this.Ii=new WQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new qQ(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ys("MemoryPersistence","Starting transaction:",e);const r=new sO(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return Ut.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class sO extends E8{constructor(e){super(),this.currentSequenceNumber=e}}class _w{constructor(e){this.persistence=e,this.Ri=new Iw,this.Vi=null}static mi(e){return new _w(e)}get fi(){if(this.Vi)return this.Vi;throw an(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ut.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ut.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ut.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ut.forEach(this.fi,(n=>{const r=Ys.fromPath(n);return this.gi(e,r).next((o=>{o||t.removeEntry(r,vn.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ut.or([()=>Ut.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yx{constructor(e,t){this.persistence=e,this.pi=new Af((n=>_8(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=zQ(this,t)}static mi(e,t){return new Yx(e,t)}Ei(){}di(e){return Ut.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Ut.forEach(this.pi,((n,r)=>this.br(e,n,r).next((o=>o?Ut.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((h=>{h||(n++,o.removeEntry(c,vn.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ut.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ut.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ut.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ut.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gx(e.data.value)),t}br(e,t,n){return Ut.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return Ut.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=sr(),r=sr();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Fw(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xU()?8:T8(ol())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,r,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new nO;return this.Ss(e,t,c).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>o.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Kf()<=ur.DEBUG&&ys("QueryEngine","SDK will not create cache indexes for query:",zf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ut.resolve()):(Kf()<=ur.DEBUG&&ys("QueryEngine","Query:",zf(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Kf()<=ur.DEBUG&&ys("QueryEngine","The SDK decides to create cache indexes for query:",zf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zc(t))):Ut.resolve())}ys(e,t){if(i5(t))return Ut.resolve(null);let n=zc(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Kx(t,null,"F"),n=zc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=sr(...o);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,n).next((u=>{const f=this.Ds(t,h);return this.Cs(t,f,c,u.readTime)?this.ys(e,Kx(t,null,"F")):this.vs(e,f,t,u)}))))})))))}ws(e,t,n,r){return i5(t)||r.isEqual(vn.min())?Ut.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,r)?Ut.resolve(null):(Kf()<=ur.DEBUG&&ys("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zf(t)),this.vs(e,c,t,B8(r,lg)).next((h=>h)))}))}Ds(e,t){let n=new lo(C4(e));return t.forEach(((r,o)=>{Ev(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,n){return Kf()<=ur.DEBUG&&ys("QueryEngine","Using full collection scan to execute query:",zf(t)),this.ps.getDocumentsMatchingQuery(e,t,Vd.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="LocalStore",aO=3e8;class iO{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ri(er),this.xs=new Af((o=>Bw(o)),Sw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YQ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function oO(s,e,t,n){return new iO(s,e,t,n)}async function X4(s,e){const t=fn(s);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],h=[];let u=sr();for(const f of r){c.push(f.batchId);for(const A of f.mutations)u=u.add(A.key)}for(const f of o){h.push(f.batchId);for(const A of f.mutations)u=u.add(A.key)}return t.localDocuments.getDocuments(n,u).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:h})))}))}))}function lO(s,e){const t=fn(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,u,f,A){const m=f.batch,x=m.keys();let g=Ut.resolve();return x.forEach((b=>{g=g.next((()=>A.getEntry(u,b))).next((I=>{const N=f.docVersions.get(b);Er(N!==null,48541),I.version.compareTo(N)<0&&(m.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),A.addEntry(I)))}))})),g.next((()=>h.mutationQueue.removeMutationBatch(u,m)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(h){let u=sr();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(u=u.add(h.batch.mutations[f].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function J4(s){const e=fn(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function AO(s,e){const t=fn(s),n=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((A,m)=>{const x=r.get(m);if(!x)return;h.push(t.Pi.removeMatchingKeys(o,A.removedDocuments,m).next((()=>t.Pi.addMatchingKeys(o,A.addedDocuments,m))));let g=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(Fo.EMPTY_BYTE_STRING,vn.min()).withLastLimboFreeSnapshotVersion(vn.min()):A.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(A.resumeToken,n)),r=r.insert(m,g),(function(I,N,C){return I.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=aO?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(x,g,A)&&h.push(t.Pi.updateTargetData(o,g))}));let u=_u(),f=sr();if(e.documentUpdates.forEach((A=>{e.resolvedLimboDocuments.has(A)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,A))})),h.push(cO(o,c,e.documentUpdates).next((A=>{u=A.ks,f=A.qs}))),!n.isEqual(vn.min())){const A=t.Pi.getLastRemoteSnapshotVersion(o).next((m=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));h.push(A)}return Ut.waitFor(h).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,u,f))).next((()=>u))})).then((o=>(t.Ms=r,o)))}function cO(s,e,t){let n=sr(),r=sr();return t.forEach((o=>n=n.add(o))),e.getEntries(s,n).next((o=>{let c=_u();return t.forEach(((h,u)=>{const f=o.get(h);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(h)),u.isNoDocument()&&u.version.isEqual(vn.min())?(e.removeEntry(h,u.readTime),c=c.insert(h,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),c=c.insert(h,u)):ys(Uw,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",u.version)})),{ks:c,qs:r}}))}function uO(s,e){const t=fn(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=bw),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function dO(s,e){const t=fn(s);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.Pi.getTargetData(n,e).next((o=>o?(r=o,Ut.resolve(r)):t.Pi.allocateTargetId(n).next((c=>(r=new Id(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.Ms.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function Ab(s,e,t){const n=fn(s),r=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Sm(c))throw c;ys(Uw,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(r.target)}function v5(s,e,t){const n=fn(s);let r=vn.min(),o=sr();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(u,f,A){const m=fn(u),x=m.xs.get(A);return x!==void 0?Ut.resolve(m.Ms.get(x)):m.Pi.getTargetData(f,A)})(n,c,zc(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,h.targetId).next((u=>{o=u}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?r:vn.min(),t?o:sr()))).next((h=>(hO(n,J8(e),h),{documents:h,Qs:o})))))}function hO(s,e,t){let n=s.Os.get(e)||vn.min();t.forEach(((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),s.Os.set(e,n)}class y5{constructor(){this.activeTargetIds=nQ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fO{constructor(){this.Mo=new y5,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y5,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5="ConnectivityMonitor";class w5{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ys(b5,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ys(b5,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0=null;function cb(){return $0===null?$0=(function(){return 268435456+Math.round(2147483648*Math.random())})():$0++,"0x"+$0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="RestConnection",pO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Mx?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,o){const c=cb(),h=this.zo(e,t.toUriEncodedString());ys(Gy,`Sending RPC '${e}' ${c}:`,h,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,o);const{host:f}=new URL(h),A=qd(f);return this.Jo(e,h,u,n,A).then((m=>(ys(Gy,`Received RPC '${e}' ${c}: `,m),m)),(m=>{throw lm(Gy,`RPC '${e}' ${c} failed with error: `,m,"url: ",h,"request:",n),m}))}Ho(e,t,n,r,o,c){return this.Go(e,t,n,r,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),n&&n.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const n=pO[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="WebChannelConnection";class vO extends gO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,o){const c=cb();return new Promise(((h,u)=>{const f=new qE;f.setWithCredentials(!0),f.listenOnce(ZE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case px.NO_ERROR:const m=f.getResponseJson();ys(Zo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(m)),h(m);break;case px.TIMEOUT:ys(Zo,`RPC '${e}' ${c} timed out`),u(new ls(jt.DEADLINE_EXCEEDED,"Request time out"));break;case px.HTTP_ERROR:const x=f.getStatus();if(ys(Zo,`RPC '${e}' ${c} failed with status:`,x,"response text:",f.getResponseText()),x>0){let g=f.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const I=(function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(jt).indexOf(E)>=0?E:jt.UNKNOWN})(b.status);u(new ls(I,b.message))}else u(new ls(jt.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new ls(jt.UNAVAILABLE,"Connection failed."));break;default:an(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ys(Zo,`RPC '${e}' ${c} completed.`)}}));const A=JSON.stringify(r);ys(Zo,`RPC '${e}' ${c} sending request:`,r),f.send(t,"POST",A,n,15)}))}T_(e,t,n){const r=cb(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=s4(),h=t4(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const A=o.join("");ys(Zo,`Creating RPC '${e}' stream ${r}: ${A}`,u);const m=c.createWebChannel(A,u);this.I_(m);let x=!1,g=!1;const b=new xO({Yo:N=>{g?ys(Zo,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(x||(ys(Zo,`Opening RPC '${e}' stream ${r} transport.`),m.open(),x=!0),ys(Zo,`RPC '${e}' stream ${r} sending:`,N),m.send(N))},Zo:()=>m.close()}),I=(N,C,E)=>{N.listen(C,(F=>{try{E(F)}catch(L){setTimeout((()=>{throw L}),0)}}))};return I(m,Fp.EventType.OPEN,(()=>{g||(ys(Zo,`RPC '${e}' stream ${r} transport opened.`),b.o_())})),I(m,Fp.EventType.CLOSE,(()=>{g||(g=!0,ys(Zo,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(m))})),I(m,Fp.EventType.ERROR,(N=>{g||(g=!0,lm(Zo,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),b.a_(new ls(jt.UNAVAILABLE,"The operation could not be completed")))})),I(m,Fp.EventType.MESSAGE,(N=>{var C;if(!g){const E=N.data[0];Er(!!E,16349);const F=E,L=(F==null?void 0:F.error)||((C=F[0])==null?void 0:C.error);if(L){ys(Zo,`RPC '${e}' stream ${r} received error:`,L);const O=L.status;let H=(function(R){const $=Ki[R];if($!==void 0)return Q4($)})(O),Q=L.message;H===void 0&&(H=jt.INTERNAL,Q="Unknown error status: "+O+" with message "+L.message),g=!0,b.a_(new ls(H,Q)),m.close()}else ys(Zo,`RPC '${e}' stream ${r} received:`,E),b.u_(E)}})),I(h,e4.STAT_EVENT,(N=>{N.stat===q1.PROXY?ys(Zo,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===q1.NOPROXY&&ys(Zo,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function $y(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(s){return new jQ(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,t,n=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ys("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="PersistentStream";class Z4{constructor(e,t,n,r,o,c,h,u){this.Mi=e,this.S_=n,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new q4(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===jt.RESOURCE_EXHAUSTED?(Iu(t.toString()),Iu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===jt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new ls(jt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ys(j5,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ys(j5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yO extends Z4{constructor(e,t,n,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CQ(this.serializer,e),n=(function(o){if(!("targetChange"in o))return vn.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?vn.min():c.readTime?Gc(c.readTime):vn.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=lb(this.serializer),t.addTarget=(function(o,c){let h;const u=c.target;if(h=nb(u)?{documents:TQ(o,u)}:{query:K4(o,u).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=k4(o,c.resumeToken);const f=ab(o,c.expectedCount);f!==null&&(h.expectedCount=f)}else if(c.snapshotVersion.compareTo(vn.min())>0){h.readTime=$x(o,c.snapshotVersion.toTimestamp());const f=ab(o,c.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const n=FQ(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=lb(this.serializer),t.removeTarget=e,this.q_(t)}}class bO extends Z4{constructor(e,t,n,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Er(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Er(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Er(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EQ(e.writeResults,e.commitTime),n=Gc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=lb(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>NQ(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{}class jO extends wO{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ls(jt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,ib(t,n),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ls(jt.UNKNOWN,o.toString())}))}Ho(e,t,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,ib(t,n),r,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ls(jt.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class BO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Iu(t),this.aa=!1):ys("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="RemoteStore";class SO{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{cf(this)&&(ys(sf,"Restarting streams for network reachability change."),await(async function(u){const f=fn(u);f.Ea.add(4),await Rg(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Dv(f)})(this))}))})),this.Ra=new BO(n,r)}}async function Dv(s){if(cf(s))for(const e of s.da)await e(!0)}async function Rg(s){for(const e of s.da)await e(!1)}function eT(s,e){const t=fn(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Qw(t)?Lw(t):Nm(t).O_()&&Rw(t,e))}function Dw(s,e){const t=fn(s),n=Nm(t);t.Ia.delete(e),n.O_()&&tT(t,e),t.Ia.size===0&&(n.O_()?n.L_():cf(t)&&t.Ra.set("Unknown"))}function Rw(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vn.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nm(s).Y_(e)}function tT(s,e){s.Va.Ue(e),Nm(s).Z_(e)}function Lw(s){s.Va=new vQ({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Nm(s).start(),s.Ra.ua()}function Qw(s){return cf(s)&&!Nm(s).x_()&&s.Ia.size>0}function cf(s){return fn(s).Ea.size===0}function sT(s){s.Va=void 0}async function CO(s){s.Ra.set("Online")}async function NO(s){s.Ia.forEach(((e,t)=>{Rw(s,e)}))}async function EO(s,e){sT(s),Qw(s)?(s.Ra.ha(e),Lw(s)):s.Ra.set("Unknown")}async function TO(s,e,t){if(s.Ra.set("Online"),e instanceof P4&&e.state===2&&e.cause)try{await(async function(r,o){const c=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))})(s,e)}catch(n){ys(sf,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wx(s,n)}else if(e instanceof yx?s.Va.Ze(e):e instanceof O4?s.Va.st(e):s.Va.tt(e),!t.isEqual(vn.min()))try{const n=await J4(s.localStore);t.compareTo(n)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const A=o.Ia.get(f);A&&o.Ia.set(f,A.withResumeToken(u.resumeToken,c))}})),h.targetMismatches.forEach(((u,f)=>{const A=o.Ia.get(u);if(!A)return;o.Ia.set(u,A.withResumeToken(Fo.EMPTY_BYTE_STRING,A.snapshotVersion)),tT(o,u);const m=new Id(A.target,u,f,A.sequenceNumber);Rw(o,m)})),o.remoteSyncer.applyRemoteEvent(h)})(s,t)}catch(n){ys(sf,"Failed to raise snapshot:",n),await Wx(s,n)}}async function Wx(s,e,t){if(!Sm(e))throw e;s.Ea.add(1),await Rg(s),s.Ra.set("Offline"),t||(t=()=>J4(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ys(sf,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Dv(s)}))}function nT(s,e){return e().catch((t=>Wx(s,t,e)))}async function Rv(s){const e=fn(s),t=$d(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bw;for(;IO(e);)try{const r=await uO(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,_O(e,r)}catch(r){await Wx(e,r)}rT(e)&&aT(e)}function IO(s){return cf(s)&&s.Ta.length<10}function _O(s,e){s.Ta.push(e);const t=$d(s);t.O_()&&t.X_&&t.ea(e.mutations)}function rT(s){return cf(s)&&!$d(s).x_()&&s.Ta.length>0}function aT(s){$d(s).start()}async function FO(s){$d(s).ra()}async function UO(s){const e=$d(s);for(const t of s.Ta)e.ea(t.mutations)}async function DO(s,e,t){const n=s.Ta.shift(),r=Nw.from(n,e,t);await nT(s,(()=>s.remoteSyncer.applySuccessfulWrite(r))),await Rv(s)}async function RO(s,e){e&&$d(s).X_&&await(async function(n,r){if((function(c){return pQ(c)&&c!==jt.ABORTED})(r.code)){const o=n.Ta.shift();$d(n).B_(),await nT(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Rv(n)}})(s,e),rT(s)&&aT(s)}async function B5(s,e){const t=fn(s);t.asyncQueue.verifyOperationInProgress(),ys(sf,"RemoteStore received new credentials");const n=cf(t);t.Ea.add(3),await Rg(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dv(t)}async function LO(s,e){const t=fn(s);e?(t.Ea.delete(2),await Dv(t)):e||(t.Ea.add(2),await Rg(t),t.Ra.set("Unknown"))}function Nm(s){return s.ma||(s.ma=(function(t,n,r){const o=fn(t);return o.sa(),new yO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(s.datastore,s.asyncQueue,{Xo:CO.bind(null,s),t_:NO.bind(null,s),r_:EO.bind(null,s),H_:TO.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Qw(s)?Lw(s):s.Ra.set("Unknown")):(await s.ma.stop(),sT(s))}))),s.ma}function $d(s){return s.fa||(s.fa=(function(t,n,r){const o=fn(t);return o.sa(),new bO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:FO.bind(null,s),r_:RO.bind(null,s),ta:UO.bind(null,s),na:DO.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Rv(s)):(await s.fa.stop(),s.Ta.length>0&&(ys(sf,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Kc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const c=Date.now()+n,h=new Ow(e,t,c,r,o);return h.start(n),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ls(jt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pw(s,e){if(Iu("AsyncQueue",`${e}: ${s}`),Sm(s))return new ls(jt.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{static emptySet(e){return new rm(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ys.comparator(t.key,n.key):(t,n)=>Ys.comparator(t.key,n.key),this.keyedMap=Up(),this.sortedSet=new ri(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new rm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(){this.ga=new ri(Ys.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):an(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class hm{constructor(e,t,n,r,o,c,h,u,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,r,o){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new hm(e,t,rm.emptySet(t),c,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OO{constructor(){this.queries=C5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=fn(t),o=r.queries;r.queries=C5(),o.forEach(((c,h)=>{for(const u of h.Sa)u.onError(n)}))})(this,new ls(jt.ABORTED,"Firestore shutting down"))}}function C5(){return new Af((s=>S4(s)),Nv)}async function kw(s,e){const t=fn(s);let n=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(n=2):(o=new QO,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const h=Pw(c,`Initialization of query '${zf(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Hw(t)}async function Mw(s,e){const t=fn(s),n=e.query;let r=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function PO(s,e){const t=fn(s);let n=!1;for(const r of e){const o=r.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(r)&&(n=!0);c.wa=r}}n&&Hw(t)}function kO(s,e,t){const n=fn(s),r=n.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);n.queries.delete(e)}function Hw(s){s.Ca.forEach((e=>{e.next()}))}var ub,N5;(N5=ub||(ub={})).Ma="default",N5.Cache="cache";class Vw{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new hm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ub.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.key=e}}class oT{constructor(e){this.key=e}}class MO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=sr(),this.mutatedKeys=sr(),this.eu=C4(e),this.tu=new rm(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new S5,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((A,m)=>{const x=r.get(A),g=Ev(this.query,m)?m:null,b=!!x&&this.mutatedKeys.has(x.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let N=!1;x&&g?x.data.isEqual(g.data)?b!==I&&(n.track({type:3,doc:g}),N=!0):this.su(x,g)||(n.track({type:2,doc:g}),N=!0,(u&&this.eu(g,u)>0||f&&this.eu(g,f)<0)&&(h=!0)):!x&&g?(n.track({type:0,doc:g}),N=!0):x&&!g&&(n.track({type:1,doc:x}),N=!0,(u||f)&&(h=!0)),N&&(g?(c=c.add(g),o=I?o.add(A):o.delete(A)):(c=c.delete(A),o=o.delete(A)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const A=this.query.limitType==="F"?c.last():c.first();c=c.delete(A.key),o=o.delete(A.key),n.track({type:1,doc:A})}return{tu:c,iu:n,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((A,m)=>(function(g,b){const I=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an(20277,{Rt:N})}};return I(g)-I(b)})(A.type,m.type)||this.eu(A.doc,m.doc))),this.ou(n),r=r??!1;const h=t&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,f=u!==this.Za;return this.Za=u,c.length!==0||f?{snapshot:new hm(this.query,e.tu,o,c,e.mutatedKeys,u===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S5,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=sr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new oT(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new iT(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=sr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kw="SyncEngine";class HO{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class VO{constructor(e){this.key=e,this.hu=!1}}class KO{constructor(e,t,n,r,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Af((h=>S4(h)),Nv),this.Iu=new Map,this.Eu=new Set,this.du=new ri(Ys.comparator),this.Au=new Map,this.Ru=new Iw,this.Vu={},this.mu=new Map,this.fu=dm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zO(s,e,t=!0){const n=hT(s);let r;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await lT(n,e,t,!0),r}async function GO(s,e){const t=hT(s);await lT(t,e,!0,!1)}async function lT(s,e,t,n){const r=await dO(s.localStore,zc(e)),o=r.targetId,c=s.sharedClientState.addLocalQueryTarget(o,t);let h;return n&&(h=await $O(s,e,o,c==="current",r.resumeToken)),s.isPrimaryClient&&t&&eT(s.remoteStore,r),h}async function $O(s,e,t,n,r){s.pu=(m,x,g)=>(async function(I,N,C,E){let F=N.view.ru(C);F.Cs&&(F=await v5(I.localStore,N.query,!1).then((({documents:Q})=>N.view.ru(Q,F))));const L=E&&E.targetChanges.get(N.targetId),O=E&&E.targetMismatches.get(N.targetId)!=null,H=N.view.applyChanges(F,I.isPrimaryClient,L,O);return T5(I,N.targetId,H.au),H.snapshot})(s,m,x,g);const o=await v5(s.localStore,e,!0),c=new MO(e,o.Qs),h=c.ru(o.documents),u=Dg.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",r),f=c.applyChanges(h,s.isPrimaryClient,u);T5(s,t,f.au);const A=new HO(e,t,c);return s.Tu.set(e,A),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),f.snapshot}async function YO(s,e,t){const n=fn(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);if(o.length>1)return n.Iu.set(r.targetId,o.filter((c=>!Nv(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ab(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&Dw(n.remoteStore,r.targetId),db(n,r.targetId)})).catch(Bm)):(db(n,r.targetId),await Ab(n.localStore,r.targetId,!0))}async function WO(s,e){const t=fn(s),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Dw(t.remoteStore,n.targetId))}async function XO(s,e,t){const n=nP(s);try{const r=await(function(c,h){const u=fn(c),f=tr.now(),A=h.reduce(((g,b)=>g.add(b.key)),sr());let m,x;return u.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let b=_u(),I=sr();return u.Ns.getEntries(g,A).next((N=>{b=N,b.forEach(((C,E)=>{E.isValidDocument()||(I=I.add(C))}))})).next((()=>u.localDocuments.getOverlayedDocuments(g,b))).next((N=>{m=N;const C=[];for(const E of h){const F=cQ(E,m.get(E.key).overlayedDocument);F!=null&&C.push(new th(E.key,F,p4(F.value.mapValue),Kl.exists(!0)))}return u.mutationQueue.addMutationBatch(g,f,C,h)})).next((N=>{x=N;const C=N.applyToLocalDocumentSet(m,I);return u.documentOverlayCache.saveOverlays(g,N.batchId,C)}))})).then((()=>({batchId:x.batchId,changes:E4(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(c,h,u){let f=c.Vu[c.currentUser.toKey()];f||(f=new ri(er)),f=f.insert(h,u),c.Vu[c.currentUser.toKey()]=f})(n,r.batchId,t),await Lg(n,r.changes),await Rv(n.remoteStore)}catch(r){const o=Pw(r,"Failed to persist write");t.reject(o)}}async function AT(s,e){const t=fn(s);try{const n=await AO(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const c=t.Au.get(o);c&&(Er(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Er(c.hu,14607):r.removedDocuments.size>0&&(Er(c.hu,42227),c.hu=!1))})),await Lg(t,n,e)}catch(n){await Bm(n)}}function E5(s,e,t){const n=fn(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((o,c)=>{const h=c.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const u=fn(c);u.onlineState=h;let f=!1;u.queries.forEach(((A,m)=>{for(const x of m.Sa)x.va(h)&&(f=!0)})),f&&Hw(u)})(n.eventManager,e),r.length&&n.Pu.H_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function JO(s,e,t){const n=fn(s);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),o=r&&r.key;if(o){let c=new ri(Ys.comparator);c=c.insert(o,al.newNoDocument(o,vn.min()));const h=sr().add(o),u=new Fv(vn.min(),new Map,new ri(er),c,h);await AT(n,u),n.du=n.du.remove(o),n.Au.delete(e),zw(n)}else await Ab(n.localStore,e,!1).then((()=>db(n,e,t))).catch(Bm)}async function qO(s,e){const t=fn(s),n=e.batch.batchId;try{const r=await lO(t.localStore,e);uT(t,n,null),cT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Lg(t,r)}catch(r){await Bm(r)}}async function ZO(s,e,t){const n=fn(s);try{const r=await(function(c,h){const u=fn(c);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let A;return u.mutationQueue.lookupMutationBatch(f,h).next((m=>(Er(m!==null,37113),A=m.keys(),u.mutationQueue.removeMutationBatch(f,m)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,A,h))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,A))).next((()=>u.localDocuments.getDocuments(f,A)))}))})(n.localStore,e);uT(n,e,t),cT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Lg(n,r)}catch(r){await Bm(r)}}function cT(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function uT(s,e,t){const n=fn(s);let r=n.Vu[n.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),n.Vu[n.currentUser.toKey()]=r}}function db(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((n=>{s.Ru.containsKey(n)||dT(s,n)}))}function dT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Dw(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),zw(s))}function T5(s,e,t){for(const n of t)n instanceof iT?(s.Ru.addReference(n.key,e),eP(s,n)):n instanceof oT?(ys(Kw,"Document no longer in limbo: "+n.key),s.Ru.removeReference(n.key,e),s.Ru.containsKey(n.key)||dT(s,n.key)):an(19791,{wu:n})}function eP(s,e){const t=e.key,n=t.path.canonicalString();s.du.get(t)||s.Eu.has(n)||(ys(Kw,"New document in limbo: "+t),s.Eu.add(n),zw(s))}function zw(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ys(va.fromString(e)),n=s.fu.next();s.Au.set(n,new VO(t)),s.du=s.du.insert(t,n),eT(s.remoteStore,new Id(zc(Cv(t.path)),n,"TargetPurposeLimboResolution",jv.ce))}}async function Lg(s,e,t){const n=fn(s),r=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((h,u)=>{c.push(n.pu(u,e,t).then((f=>{var A;if((f||t)&&n.isPrimaryClient){const m=f?!f.fromCache:(A=t==null?void 0:t.targetChanges.get(u.targetId))==null?void 0:A.current;n.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){r.push(f);const m=Fw.As(u.targetId,f);o.push(m)}})))})),await Promise.all(c),n.Pu.H_(r),await(async function(u,f){const A=fn(u);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ut.forEach(f,(x=>Ut.forEach(x.Es,(g=>A.persistence.referenceDelegate.addReference(m,x.targetId,g))).next((()=>Ut.forEach(x.ds,(g=>A.persistence.referenceDelegate.removeReference(m,x.targetId,g)))))))))}catch(m){if(!Sm(m))throw m;ys(Uw,"Failed to update sequence numbers: "+m)}for(const m of f){const x=m.targetId;if(!m.fromCache){const g=A.Ms.get(x),b=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(b);A.Ms=A.Ms.insert(x,I)}}})(n.localStore,o))}async function tP(s,e){const t=fn(s);if(!t.currentUser.isEqual(e)){ys(Kw,"User change. New user:",e.toKey());const n=await X4(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((h=>{h.forEach((u=>{u.reject(new ls(jt.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Lg(t,n.Ls)}}function sP(s,e){const t=fn(s),n=t.Au.get(e);if(n&&n.hu)return sr().add(n.key);{let r=sr();const o=t.Iu.get(e);if(!o)return r;for(const c of o){const h=t.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function hT(s){const e=fn(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JO.bind(null,e),e.Pu.H_=PO.bind(null,e.eventManager),e.Pu.yu=kO.bind(null,e.eventManager),e}function nP(s){const e=fn(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZO.bind(null,e),e}class Xx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oO(this.persistence,new rO,e.initialUser,this.serializer)}Cu(e){return new W4(_w.mi,this.serializer)}Du(e){return new fO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xx.provider={build:()=>new Xx};class rP extends Xx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Er(this.persistence.referenceDelegate instanceof Yx,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new VQ(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ml.withCacheSize(this.cacheSizeBytes):Ml.DEFAULT;return new W4((n=>Yx.mi(n,t)),this.serializer)}}class hb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>E5(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=tP.bind(null,this.syncEngine),await LO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OO})()}createDatastore(e){const t=Uv(e.databaseInfo.databaseId),n=(function(o){return new vO(o)})(e.databaseInfo);return(function(o,c,h,u){return new jO(o,c,h,u)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,o,c,h){return new SO(n,r,o,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>E5(this.syncEngine,t,0)),(function(){return w5.v()?new w5:new mO})())}createSyncEngine(e,t){return(function(r,o,c,h,u,f,A){const m=new KO(r,o,c,h,u,f);return A&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=fn(r);ys(sf,"RemoteStore shutting down."),o.Ea.add(5),await Rg(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hb.provider={build:()=>new hb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Iu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="FirestoreClient";class aP{constructor(e,t,n,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=rl.UNAUTHENTICATED,this.clientId=yw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{ys(Yd,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ys(Yd,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Pw(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Yy(s,e){s.asyncQueue.verifyOperationInProgress(),ys(Yd,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener((async r=>{n.isEqual(r)||(await X4(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function I5(s,e){s.asyncQueue.verifyOperationInProgress();const t=await iP(s);ys(Yd,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((n=>B5(e.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,r)=>B5(e.remoteStore,r))),s._onlineComponents=e}async function iP(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ys(Yd,"Using user provided OfflineComponentProvider");try{await Yy(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===jt.FAILED_PRECONDITION||r.code===jt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;lm("Error using user provided cache. Falling back to memory cache: "+t),await Yy(s,new Xx)}}else ys(Yd,"Using default OfflineComponentProvider"),await Yy(s,new rP(void 0));return s._offlineComponents}async function $w(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ys(Yd,"Using user provided OnlineComponentProvider"),await I5(s,s._uninitializedComponentsProvider._online)):(ys(Yd,"Using default OnlineComponentProvider"),await I5(s,new hb))),s._onlineComponents}function oP(s){return $w(s).then((e=>e.syncEngine))}function lP(s){return $w(s).then((e=>e.datastore))}async function Jx(s){const e=await $w(s),t=e.eventManager;return t.onListen=zO.bind(null,e.syncEngine),t.onUnlisten=YO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WO.bind(null,e.syncEngine),t}function AP(s,e,t={}){const n=new Kc;return s.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,u,f){const A=new Gw({next:x=>{A.Nu(),c.enqueueAndForget((()=>Mw(o,m)));const g=x.docs.has(h);!g&&x.fromCache?f.reject(new ls(jt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&x.fromCache&&u&&u.source==="server"?f.reject(new ls(jt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),m=new Vw(Cv(h.path),A,{includeMetadataChanges:!0,qa:!0});return kw(o,m)})(await Jx(s),s.asyncQueue,e,t,n))),n.promise}function cP(s,e,t={}){const n=new Kc;return s.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,u,f){const A=new Gw({next:x=>{A.Nu(),c.enqueueAndForget((()=>Mw(o,m))),x.fromCache&&u.source==="server"?f.reject(new ls(jt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),m=new Vw(h,A,{includeMetadataChanges:!0,qa:!0});return kw(o,m)})(await Jx(s),s.asyncQueue,e,t,n))),n.promise}function uP(s,e,t){const n=new Kc;return s.asyncQueue.enqueueAndForget((async()=>{try{const r=await lP(s);n.resolve((async function(c,h,u){var I;const f=fn(c),{request:A,gt:m,parent:x}=IQ(f.serializer,X8(h),u);f.connection.$o||delete A.parent;const g=(await f.Ho("RunAggregationQuery",f.serializer.databaseId,x,A,1)).filter((N=>!!N.result));Er(g.length===1,64727);const b=(I=g[0].result)==null?void 0:I.aggregateFields;return Object.keys(b).reduce(((N,C)=>(N[m[C]]=b[C],N)),{})})(r,e,t))}catch(r){n.reject(r)}})),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="firestore.googleapis.com",F5=!0;class U5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ls(jt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mT,this.ssl=F5}else this.host=e.host,this.ssl=e.ssl??F5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Y4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MQ)throw new ls(jt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ls(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ls(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ls(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ls(jt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ls(jt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new d8;switch(n.type){case"firstParty":return new p8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ls(jt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=_5.get(t);n&&(ys("ComponentProvider","Removing Datastore"),_5.delete(t),n.terminate())})(this),Promise.resolve()}}function dP(s,e,t,n={}){var f;s=bl(s,Lv);const r=qd(e),o=s._getSettings(),c={...o,emulatorOptions:s._getEmulatorOptions()},h=`${e}:${t}`;r&&(ow(`https://${h}`),lw("Firestore",!0)),o.host!==mT&&o.host!==h&&lm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:h,ssl:r,emulatorOptions:n};if(!Zh(u,c)&&(s._setSettings(u),n.mockUserToken)){let A,m;if(typeof n.mockUserToken=="string")A=n.mockUserToken,m=rl.MOCK_USER;else{A=AU(n.mockUserToken,(f=s._app)==null?void 0:f.options.projectId);const x=n.mockUserToken.sub||n.mockUserToken.user_id;if(!x)throw new ls(jt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new rl(x)}s._authCredentials=new h8(new r4(A,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ru(this.firestore,e,this._query)}}class mi{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mi(this.firestore,e,this._key)}toJSON(){return{type:mi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Fg(t,mi._jsonSchema))return new mi(e,n||null,new Ys(va.fromString(t.referencePath)))}}mi._jsonSchemaVersion="firestore/documentReference/1.0",mi._jsonSchema={type:Yi("string",mi._jsonSchemaVersion),referencePath:Yi("string")};class kd extends Ru{constructor(e,t,n){super(e,t,Cv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mi(this.firestore,null,new Ys(e))}withConverter(e){return new kd(this.firestore,e,this._path)}}function Rs(s,e,...t){if(s=qa(s),a4("collection","path",e),s instanceof Lv){const n=va.fromString(e,...t);return GB(n),new kd(s,null,n)}{if(!(s instanceof mi||s instanceof kd))throw new ls(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(va.fromString(e,...t));return GB(n),new kd(s.firestore,null,n)}}function Os(s,e,...t){if(s=qa(s),arguments.length===1&&(e=yw.newId()),a4("doc","path",e),s instanceof Lv){const n=va.fromString(e,...t);return zB(n),new mi(s,null,new Ys(n))}{if(!(s instanceof mi||s instanceof kd))throw new ls(jt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(va.fromString(e,...t));return zB(n),new mi(s.firestore,s instanceof kd?s.converter:null,new Ys(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="AsyncQueue";class R5{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new q4(this,"async_queue_retry"),this._c=()=>{const n=$y();n&&ys(D5,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=$y();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$y();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Kc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sm(e))throw e;ys(D5,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Iu("INTERNAL UNHANDLED ERROR: ",L5(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ow.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&an(47125,{Pc:L5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function L5(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(s){return(function(t,n){if(typeof t!="object"||t===null)return!1;const r=t;for(const o of n)if(o in r&&typeof r[o]=="function")return!0;return!1})(s,["next","error","complete"])}class Jc extends Lv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new R5,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R5(e),this._firestoreClient=void 0,await e}}}function hP(s,e){const t=typeof s=="object"?s:cw(),n=typeof s=="string"?s:Mx,r=gv(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const o=cE("firestore");o&&dP(r,...o)}return r}function Em(s){if(s._terminated)throw new ls(jt.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fP(s),s._firestoreClient}function fP(s){var n,r,o;const e=s._freezeSettings(),t=(function(h,u,f,A){return new R8(h,u,f,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,fT(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)})(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new aP(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(h){const u=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class pP{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new IA(Fo.fromBase64String(e))}catch(t){throw new ls(jt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new IA(Fo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:IA._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fg(e,IA._jsonSchema))return IA.fromBase64String(e.bytes)}}IA._jsonSchemaVersion="firestore/bytes/1.0",IA._jsonSchema={type:Yi("string",IA._jsonSchemaVersion),bytes:Yi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ls(jt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new To(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ls(jt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ls(jt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return er(this._lat,e._lat)||er(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$c._jsonSchemaVersion}}static fromJSON(e){if(Fg(e,$c._jsonSchema))return new $c(e.latitude,e.longitude)}}$c._jsonSchemaVersion="firestore/geoPoint/1.0",$c._jsonSchema={type:Yi("string",$c._jsonSchemaVersion),latitude:Yi("number"),longitude:Yi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fg(e,Yc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yc(e.vectorValues);throw new ls(jt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yc._jsonSchemaVersion="firestore/vectorValue/1.0",Yc._jsonSchema={type:Yi("string",Yc._jsonSchemaVersion),vectorValues:Yi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=/^__.*__$/;class xP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new th(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ug(e,this.data,t,this.fieldTransforms)}}class pT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new th(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an(40011,{Ac:s})}}class Ww{constructor(e,t,n,r,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ww({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gT(this.Ac)&&gP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Uv(e)}Cc(e,t,n,r=!1){return new Ww({Ac:e,methodName:t,Dc:n,path:To.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qv(s){const e=s._freezeSettings(),t=Uv(s._databaseId);return new vP(s._databaseId,!!e.ignoreUndefinedProperties,t)}function xT(s,e,t,n,r,o={}){const c=s.Cc(o.merge||o.mergeFields?2:0,e,t,r);Xw("Data must be an object, but it was:",c,n);const h=bT(n,c);let u,f;if(o.merge)u=new oA(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const A=[];for(const m of o.mergeFields){const x=fb(e,m,t);if(!c.contains(x))throw new ls(jt.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);jT(A,x)||A.push(x)}u=new oA(A),f=c.fieldTransforms.filter((m=>u.covers(m.field)))}else u=null,f=c.fieldTransforms;return new xP(new Hl(h),u,f)}class Ov extends Yw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ov}}function vT(s,e,t,n){const r=s.Cc(1,e,t);Xw("Data must be an object, but it was:",r,n);const o=[],c=Hl.empty();eh(n,((u,f)=>{const A=Jw(e,u,t);f=qa(f);const m=r.yc(A);if(f instanceof Ov)o.push(A);else{const x=Og(f,m);x!=null&&(o.push(A),c.set(A,x))}}));const h=new oA(o);return new pT(c,h,r.fieldTransforms)}function yT(s,e,t,n,r,o){const c=s.Cc(1,e,t),h=[fb(e,n,t)],u=[r];if(o.length%2!=0)throw new ls(jt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(fb(e,o[x])),u.push(o[x+1]);const f=[],A=Hl.empty();for(let x=h.length-1;x>=0;--x)if(!jT(f,h[x])){const g=h[x];let b=u[x];b=qa(b);const I=c.yc(g);if(b instanceof Ov)f.push(g);else{const N=Og(b,I);N!=null&&(f.push(g),A.set(g,N))}}const m=new oA(f);return new pT(A,m,c.fieldTransforms)}function yP(s,e,t,n=!1){return Og(t,s.Cc(n?4:3,e))}function Og(s,e){if(wT(s=qa(s)))return Xw("Unsupported field value:",e,s),bT(s,e);if(s instanceof Yw)return(function(n,r){if(!gT(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,r){const o=[];let c=0;for(const h of n){let u=Og(h,r.wc(c));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),c++}return{arrayValue:{values:o}}})(s,e)}return(function(n,r){if((n=qa(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rQ(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=tr.fromDate(n);return{timestampValue:$x(r.serializer,o)}}if(n instanceof tr){const o=new tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$x(r.serializer,o)}}if(n instanceof $c)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof IA)return{bytesValue:k4(r.serializer,n._byteString)};if(n instanceof mi){const o=r.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tw(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Yc)return(function(c,h){return{mapValue:{fields:{[f4]:{stringValue:m4},[Hx]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return Cw(h.serializer,f)}))}}}}}})(n,r);throw r.Sc(`Unsupported field value: ${wv(n)}`)})(s,e)}function bT(s,e){const t={};return l4(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eh(s,((n,r)=>{const o=Og(r,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function wT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof tr||s instanceof $c||s instanceof IA||s instanceof mi||s instanceof Yw||s instanceof Yc)}function Xw(s,e,t){if(!wT(t)||!i4(t)){const n=wv(t);throw n==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+n)}}function fb(s,e,t){if((e=qa(e))instanceof Qg)return e._internalPath;if(typeof e=="string")return Jw(s,e);throw qx("Field path arguments must be of type string or ",s,!1,void 0,t)}const bP=new RegExp("[~\\*/\\[\\]]");function Jw(s,e,t){if(e.search(bP)>=0)throw qx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Qg(...e.split("."))._internalPath}catch{throw qx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function qx(s,e,t,n,r){const o=n&&!n.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let u="";return(o||c)&&(u+=" (found",o&&(u+=` in field ${n}`),c&&(u+=` in document ${r}`),u+=")"),new ls(jt.INVALID_ARGUMENT,h+s+u)}function jT(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wP extends BT{data(){return super.data()}}function Pv(s,e){return typeof e=="string"?Jw(s,e):e instanceof Qg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ls(jt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qw{}class Zw extends qw{}function Ks(s,e,...t){let n=[];e instanceof qw&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((u=>u instanceof e2)).length,h=o.filter((u=>u instanceof kv)).length;if(c>1||c>0&&h>0)throw new ls(jt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)s=r._apply(s);return s}class kv extends Zw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new kv(e,t,n)}_apply(e){const t=this._parse(e);return CT(e._query,t),new Ru(e.firestore,e.converter,rb(e._query,t))}_parse(e){const t=Qv(e.firestore);return(function(o,c,h,u,f,A,m){let x;if(f.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new ls(jt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){P5(m,A);const b=[];for(const I of m)b.push(O5(u,o,I));x={arrayValue:{values:b}}}else x=O5(u,o,m)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||P5(m,A),x=yP(h,c,m,A==="in"||A==="not-in");return $i.create(f,A,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rs(s,e,t){const n=e,r=Pv("where",s);return kv._create(r,n,t)}class e2 extends qw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new e2(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:lc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let c=r;const h=o.getFlattenedFilters();for(const u of h)CT(c,u),c=rb(c,u)})(e._query,t),new Ru(e.firestore,e.converter,rb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t2 extends Zw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new t2(e,t)}_apply(e){const t=(function(r,o,c){if(r.startAt!==null)throw new ls(jt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ls(jt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dg(o,c)})(e._query,this._field,this._direction);return new Ru(e.firestore,e.converter,(function(r,o){const c=r.explicitOrderBy.concat([o]);return new Cm(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function Zx(s,e="asc"){const t=e,n=Pv("orderBy",s);return t2._create(n,t)}class s2 extends Zw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new s2(e,t,n)}_apply(e){return new Ru(e.firestore,e.converter,Kx(e._query,this._limit,this._limitType))}}function am(s){return j8("limit",s),s2._create("limit",s,"F")}function O5(s,e,t){if(typeof(t=qa(t))=="string"){if(t==="")throw new ls(jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j4(e)&&t.indexOf("/")!==-1)throw new ls(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(va.fromString(t));if(!Ys.isDocumentKey(n))throw new ls(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return e5(s,new Ys(n))}if(t instanceof mi)return e5(s,t._key);throw new ls(jt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wv(t)}.`)}function P5(s,e){if(!Array.isArray(s)||s.length===0)throw new ls(jt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(s,e){const t=(function(r,o){for(const c of r)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(s.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ls(jt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ls(jt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jP{convertValue(e,t="none"){switch(Gd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw an(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return eh(e,((r,o)=>{n[r]=this.convertValue(o,t)})),n}convertVectorValue(e){var n,r,o;const t=(o=(r=(n=e.fields)==null?void 0:n[Hx].arrayValue)==null?void 0:r.values)==null?void 0:o.map((c=>Si(c.doubleValue)));return new Yc(t)}convertGeoPoint(e){return new $c(Si(e.latitude),Si(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sv(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ag(e));default:return null}}convertTimestamp(e){const t=Kd(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=va.fromString(e);Er($4(n),9688,{name:e});const r=new cg(n.get(1),n.get(3)),o=new Ys(n.popFirst(5));return r.isEqual(t)||Iu(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(s,e,t){let n;return n=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,n}function BP(){return new mP("count")}class Rp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kh extends BT{constructor(e,t,n,r,o,c){super(e,t,n,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Pv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ls(jt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Kh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Kh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kh._jsonSchema={type:Yi("string",Kh._jsonSchemaVersion),bundleSource:Yi("string","DocumentSnapshot"),bundleName:Yi("string"),bundle:Yi("string")};class bx extends Kh{data(e={}){return super.data(e)}}class zh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Rp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bx(this._firestore,this._userDataWriter,n.key,n,new Rp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ls(jt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const u=new bx(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Rp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:u,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const u=new bx(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Rp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,A=-1;return h.type!==0&&(f=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),A=c.indexOf(h.doc.key)),{type:SP(h.type),doc:u,oldIndex:f,newIndex:A}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ls(jt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SP(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(s){s=bl(s,mi);const e=bl(s.firestore,Jc);return AP(Em(e),s._key).then((t=>ET(e,s,t)))}zh._jsonSchemaVersion="firestore/querySnapshot/1.0",zh._jsonSchema={type:Yi("string",zh._jsonSchemaVersion),bundleSource:Yi("string","QuerySnapshot"),bundleName:Yi("string"),bundle:Yi("string")};class Mv extends jP{constructor(e){super(),this.firestore=e}convertBytes(e){return new IA(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mi(this.firestore,null,t)}}function qs(s){s=bl(s,Ru);const e=bl(s.firestore,Jc),t=Em(e),n=new Mv(e);return ST(s._query),cP(t,s._query).then((r=>new zh(e,n,s,r)))}function Vi(s,e,t){s=bl(s,mi);const n=bl(s.firestore,Jc),r=NT(s.converter,e,t);return Hv(n,[xT(Qv(n),"setDoc",s._key,r,s.converter!==null,t).toMutation(s._key,Kl.none())])}function Oh(s,e,t,...n){s=bl(s,mi);const r=bl(s.firestore,Jc),o=Qv(r);let c;return c=typeof(e=qa(e))=="string"||e instanceof Qg?yT(o,"updateDoc",s._key,e,t,n):vT(o,"updateDoc",s._key,e),Hv(r,[c.toMutation(s._key,Kl.exists(!0))])}function zi(s){return Hv(bl(s.firestore,Jc),[new _v(s._key,Kl.none())])}function _d(s,...e){var u,f,A;s=qa(s);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Q5(e[n])||(t=e[n++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Q5(e[n])){const m=e[n];e[n]=(u=m.next)==null?void 0:u.bind(m),e[n+1]=(f=m.error)==null?void 0:f.bind(m),e[n+2]=(A=m.complete)==null?void 0:A.bind(m)}let o,c,h;if(s instanceof mi)c=bl(s.firestore,Jc),h=Cv(s._key.path),o={next:m=>{e[n]&&e[n](ET(c,s,m))},error:e[n+1],complete:e[n+2]};else{const m=bl(s,Ru);c=bl(m.firestore,Jc),h=m._query;const x=new Mv(c);o={next:g=>{e[n]&&e[n](new zh(c,x,m,g))},error:e[n+1],complete:e[n+2]},ST(s._query)}return(function(x,g,b,I){const N=new Gw(I),C=new Vw(g,N,b);return x.asyncQueue.enqueueAndForget((async()=>kw(await Jx(x),C))),()=>{N.Nu(),x.asyncQueue.enqueueAndForget((async()=>Mw(await Jx(x),C)))}})(Em(c),h,r,o)}function Hv(s,e){return(function(n,r){const o=new Kc;return n.asyncQueue.enqueueAndForget((async()=>XO(await oP(n),r,o))),o.promise})(Em(s),e)}function ET(s,e,t){const n=t.docs.get(e._key),r=new Mv(s);return new Kh(s,r,e._key,n,new Rp(t.hasPendingWrites,t.fromCache),e.converter)}function k5(s){return CP(s,{count:BP()})}function CP(s,e){const t=bl(s.firestore,Jc),n=Em(t),r=U8(e,((o,c)=>new fQ(c,o.aggregateType,o._internalFieldPath)));return uP(n,s._query,r).then((o=>(function(h,u,f){const A=new Mv(h);return new pP(u,A,f)})(t,s,o)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qv(e)}set(e,t,n){this._verifyNotCommitted();const r=Wy(e,this._firestore),o=NT(r.converter,t,n),c=xT(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,n);return this._mutations.push(c.toMutation(r._key,Kl.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const o=Wy(e,this._firestore);let c;return c=typeof(t=qa(t))=="string"||t instanceof Qg?yT(this._dataReader,"WriteBatch.update",o._key,t,n,r):vT(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Kl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wy(e,this._firestore);return this._mutations=this._mutations.concat(new _v(t._key,Kl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ls(jt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wy(s,e){if((s=qa(s)).firestore!==e)throw new ls(jt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(s){return Em(s=bl(s,Jc)),new NP(s,(e=>Hv(s,e)))}(function(e,t=!0){(function(r){jm=r})(of),Hd(new i8("firestore",((n,{instanceIdentifier:r,options:o})=>{const c=n.getProvider("app").getImmediate(),h=new Jc(new f8(n.getProvider("auth-internal")),new g8(c,n.getProvider("app-check-internal")),(function(f,A){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ls(jt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cg(f.options.projectId,A)})(c,r),c);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),UA(MB,HB,e),UA(MB,HB,"esm2020")})();let EP=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="type.googleapis.com/google.protobuf.Int64Value",IP="type.googleapis.com/google.protobuf.UInt64Value";function TT(s,e){const t={};for(const n in s)s.hasOwnProperty(n)&&(t[n]=e(s[n]));return t}function ev(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>ev(e));if(typeof s=="function"||typeof s=="object")return TT(s,e=>ev(e));throw new Error("Data cannot be encoded in JSON: "+s)}function fm(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case TP:case IP:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>fm(e)):typeof s=="function"||typeof s=="object"?TT(s,e=>fm(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vl extends uc{constructor(e,t,n){super(`${n2}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,Vl.prototype)}}function _P(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function tv(s,e){let t=_P(s),n=t,r;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!H5[c])return new Vl("internal","internal");t=H5[c],n=c}const h=o.message;typeof h=="string"&&(n=h),r=o.details,r!==void 0&&(r=fm(r))}}catch{}return t==="ok"?null:new Vl(t,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,iA(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="us-central1",UP=/^data: (.*?)(?:\n|$)/;function DP(s){let e=null;return{promise:new Promise((t,n)=>{e=setTimeout(()=>{n(new Vl("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class RP{constructor(e,t,n,r,o=mb,c=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new FP(e,t,n,r),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(o);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=mb}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function LP(s,e,t){const n=qd(e);s.emulatorOrigin=`http${n?"s":""}://${e}:${t}`,n&&(ow(s.emulatorOrigin+"/backends"),lw("Functions",!0))}function QP(s,e,t){const n=r=>PP(s,e,r,{});return n.stream=(r,o)=>MP(s,e,r,o),n}function IT(s){return s.emulatorOrigin&&qd(s.emulatorOrigin)?"include":void 0}async function OP(s,e,t,n,r){t["Content-Type"]="application/json";let o;try{o=await n(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:IT(r)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function _T(s,e){const t={},n=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(t.Authorization="Bearer "+n.authToken),n.messagingToken&&(t["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=n.appCheckToken),t}function PP(s,e,t,n){const r=s._url(e);return kP(s,r,t,n)}async function kP(s,e,t,n){t=ev(t);const r={data:t},o=await _T(s,n),c=n.timeout||7e4,h=DP(c),u=await Promise.race([OP(e,r,o,s.fetchImpl,s),h.promise,s.cancelAllRequests]);if(h.cancel(),!u)throw new Vl("cancelled","Firebase Functions instance was deleted.");const f=tv(u.status,u.json);if(f)throw f;if(!u.json)throw new Vl("internal","Response is not valid JSON object.");let A=u.json.data;if(typeof A>"u"&&(A=u.json.result),typeof A>"u")throw new Vl("internal","Response is missing data field.");return{data:fm(A)}}function MP(s,e,t,n){const r=s._url(e);return HP(s,r,t,n||{})}async function HP(s,e,t,n){var x;t=ev(t);const r={data:t},o=await _T(s,n);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(r),headers:o,signal:n==null?void 0:n.signal,credentials:IT(s)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const I=new Vl("cancelled","Request was cancelled.");return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}const b=tv(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let h,u;const f=new Promise((g,b)=>{h=g,u=b});(x=n==null?void 0:n.signal)==null||x.addEventListener("abort",()=>{const g=new Vl("cancelled","Request was cancelled.");u(g)});const A=c.body.getReader(),m=VP(A,h,u,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const g=m.getReader();return{async next(){const{value:b,done:I}=await g.read();return{value:b,done:I}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:f}}function VP(s,e,t,n){const r=(c,h)=>{const u=c.match(UP);if(!u)return;const f=u[1];try{const A=JSON.parse(f);if("result"in A){e(fm(A.result));return}if("message"in A){h.enqueue(fm(A.message));return}if("error"in A){const m=tv(0,A);h.error(m),t(m);return}}catch(A){if(A instanceof Vl){h.error(A),t(A);return}}},o=new TextDecoder;return new ReadableStream({start(c){let h="";return u();async function u(){if(n!=null&&n.aborted){const f=new Vl("cancelled","Request was cancelled");return c.error(f),t(f),Promise.resolve()}try{const{value:f,done:A}=await s.read();if(A){h.trim()&&r(h.trim(),c),c.close();return}if(n!=null&&n.aborted){const x=new Vl("cancelled","Request was cancelled");c.error(x),t(x),await s.cancel();return}h+=o.decode(f,{stream:!0});const m=h.split(`
`);h=m.pop()||"";for(const x of m)x.trim()&&r(x.trim(),c);return u()}catch(f){const A=f instanceof Vl?f:tv(0,null);c.error(A),t(A)}}},cancel(){return s.cancel()}})}const V5="@firebase/functions",K5="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="auth-internal",zP="app-check-internal",GP="messaging-internal";function $P(s){const e=(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider(KP),c=t.getProvider(GP),h=t.getProvider(zP);return new RP(r,o,c,h,n)};Hd(new EP(n2,e,"PUBLIC").setMultipleInstances(!0)),UA(V5,K5,s),UA(V5,K5,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(s=cw(),e=mb){const n=gv(qa(s),n2).getImmediate({identifier:e}),r=cE("functions");return r&&WP(n,...r),n}function WP(s,e,t){LP(qa(s),e,t)}function Pg(s,e,t){return QP(qa(s),e)}$P();const XP={apiKey:"AIzaSyCHlCLhumJn50nw2JBgJTGeIH_6GKzjFbA",authDomain:"noble-care-management-system.firebaseapp.com",projectId:"noble-care-management-system",storageBucket:"noble-care-management-system.firebasestorage.app",messagingSenderId:"573085015524",appId:"1:573085015524:web:29ae8a509813ec1199fbf1"},r2=mE(XP),bu=r8(r2),wt=hP(r2),kg=YP(r2);var xn=(s=>(s.SUPER_ADMIN="super_admin",s.SCHOOL_ADMIN="school_admin",s.TEACHER="teacher",s))(xn||{});async function JP(s){var n;const e=Os(wt,"users",s.uid),t=await kc(e);if(t.exists()){const r=t.data(),o=r.status||"active";if(o!=="active")throw new Error("ACCOUNT_INACTIVE");const c=r.role,h=r.schoolId||null,u=Array.isArray(r.assignedClassIds)?r.assignedClassIds:[];if((c==="school_admin"||c==="teacher")&&!h)throw console.warn(`[AUTH] ${c==="teacher"?"Teacher":"School Admin"} account incomplete - missing schoolId`,{uid:s.uid,email:s.email,role:c,hasSchoolId:!!h}),new Error(`${c==="teacher"?"Teacher":"School Admin"} account is incomplete: missing schoolId. Please contact your administrator.`);if(c==="school_admin"&&h){const f=Os(wt,"schools",h),A=await kc(f);if(!A.exists())throw new Error("SCHOOL_NOT_FOUND");const m=A.data();if((m==null?void 0:m.status)!=="active")throw new Error("SCHOOL_INACTIVE")}if(c==="teacher"&&h){const f=Os(wt,"schools",h),A=await kc(f);if(!A.exists())throw new Error("SCHOOL_NOT_FOUND");const m=A.data();if((m==null?void 0:m.status)!=="active")throw new Error("SCHOOL_INACTIVE")}return{id:s.uid,fullName:r.fullName||s.displayName||"User",email:s.email||"",role:c,schoolId:h,assignedClassIds:u,status:o,createdAt:((n=r.createdAt)==null?void 0:n.toDate())||new Date}}else throw new Error("ACCOUNT_NOT_PROVISIONED")}function FT(s){if(!s)throw new Error("Authentication required");if(s.role===xn.SUPER_ADMIN)throw new Error("Super admin does not belong to a school");if(!s.schoolId)throw new Error("School access required. Please contact your administrator.");return s.schoolId}const UT=Z.createContext(void 0),qP=({children:s})=>{const[e,t]=Z.useState(null),[n,r]=Z.useState(!0),[o,c]=Z.useState(!0),[h,u]=Z.useState(null);Z.useEffect(()=>{const A=$R(bu,async m=>{if(c(!0),m){u(null),r(!0);try{const x=await JP(m);t(x)}catch(x){console.error("Error fetching user profile:",x),t(null);const g=x.message||x.toString();g==="ACCOUNT_NOT_PROVISIONED"?(u("Your account is not set up yet. Please contact your administrator for access."),await Sp(bu)):g==="ACCOUNT_INACTIVE"?(u("Your account has been deactivated. Please contact your administrator for access."),await Sp(bu)):g==="SCHOOL_NOT_FOUND"?(u("Your school could not be found. Please contact your administrator."),await Sp(bu)):g==="SCHOOL_INACTIVE"?(u("Your school has been deactivated. Please contact your administrator."),await Sp(bu)):g.includes("Cloud Firestore API has not been used")?u("CRITICAL ERROR: The Firestore Database is not enabled. Go to Firebase Console > Build > Firestore Database > Create Database."):g.includes("permission-denied")||g.includes("Missing or insufficient permissions")?u("PERMISSION DENIED: Database access blocked. Go to Firebase Console > Firestore Database > Rules and change 'allow read, write: if false;' to 'allow read, write: if true;' (for testing)."):g.includes("client is offline")||g.includes("offline")?u("Network Error: Could not connect to the database. Check your internet connection."):u("Failed to load user profile. Please try refreshing the page. Error: "+g)}}else t(null),u(null);c(!1),r(!1)});return()=>A()},[]);const f=async()=>{try{await Sp(bu),t(null),u(null)}catch(A){console.error("Logout failed",A)}};return i.jsx(UT.Provider,{value:{user:e,loading:n,authLoading:o,error:h,logout:f,isAuthenticated:!!e},children:s})},Uo=()=>{const s=Z.useContext(UT);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},DT=Z.createContext(void 0),ZP=({children:s})=>{const{user:e,isAuthenticated:t}=Uo(),[n,r]=Z.useState(null),[o,c]=Z.useState(!1),[h,u]=Z.useState(null);return Z.useEffect(()=>{let f=!1;const m=(()=>{if(r(null),u(null),!t||!e||e.role==="super_admin"){c(!1);return}if(!e.schoolId){c(!1),u("No school assigned to your account");return}c(!0);const x=`school_${e.schoolId}`,g=localStorage.getItem(x);if(g)try{const b=JSON.parse(g);b.status==="active"&&(f||r(b))}catch{localStorage.removeItem(x)}try{const b=Os(wt,"schools",e.schoolId),I=_d(b,N=>{if(!N.exists()){f||u("School not found. Please contact your administrator."),f||r(null);return}const C={id:N.id,...N.data()};if(C.status!=="active"){f||u("Your school is currently inactive. Please contact your administrator."),f||r(null);return}localStorage.setItem(x,JSON.stringify(C)),f||r(C)},N=>{console.error("Error loading school data:",N),f||u("Failed to load school information. Please try refreshing the page."),f||r(null)});return()=>I()}finally{f||c(!1)}})();return()=>{f=!0,m&&m()}},[t,e==null?void 0:e.id,e==null?void 0:e.schoolId,e==null?void 0:e.role]),i.jsx(DT.Provider,{value:{school:n,schoolLoading:o,schoolError:h},children:s})},dc=()=>{const s=Z.useContext(DT);if(!s)throw new Error("useSchool must be used within a SchoolProvider");return s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tk=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),z5=s=>{const e=tk(s);return e.charAt(0).toUpperCase()+e.slice(1)},RT=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),sk=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=Z.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:c,...h},u)=>Z.createElement("svg",{ref:u,...nk,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:RT("lucide",r),...!o&&!sk(h)&&{"aria-hidden":"true"},...h},[...c.map(([f,A])=>Z.createElement(f,A)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=(s,e)=>{const t=Z.forwardRef(({className:n,...r},o)=>Z.createElement(rk,{ref:o,iconNode:e,className:RT(`lucide-${ek(z5(s))}`,`lucide-${s}`,n),...r}));return t.displayName=z5(s),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ik=os("activity",ak);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],lk=os("arrow-down-right",ok);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],LT=os("arrow-left",Ak);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uk=os("arrow-right",ck);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],QT=os("arrow-up-right",dk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],fk=os("badge-dollar-sign",hk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],zp=os("bell",mk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],zl=os("book-open",pk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],xk=os("book",gk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],yk=os("building-2",vk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Gp=os("building",bk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],jk=os("calendar-days",wk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mo=os("calendar",Bk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Ck=os("chart-no-axes-column-increasing",Sk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],wx=os("chart-no-axes-column",Nk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Tk=os("chart-pie",Ek);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$p=os("check",Ik);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],OT=os("chevron-right",_k);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pb=os("circle-alert",Fk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DA=os("circle-check-big",Uk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Fd=os("circle-x",Dk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Xf=os("clipboard-check",Rk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ac=os("clock",Lk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ok=os("coffee",Qk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],G5=os("copy",Pk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Lp=os("credit-card",kk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],Hk=os("door-open",Mk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],sv=os("download",Vk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],zk=os("ellipsis",Kk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],a2=os("eye-off",Gk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lu=os("eye",$k);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gh=os("file-text",Yk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],PT=os("funnel",Wk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],mm=os("graduation-cap",Xk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],qk=os("history",Jk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Xy=os("layout-dashboard",Zk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Jy=os("loader-circle",eM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sM=os("lock",tM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],rM=os("log-out",nM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],iM=os("mail",aM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lM=os("map-pin",oM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],cM=os("megaphone",AM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],dM=os("menu",uM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],fM=os("message-square",hM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M5 12h14",key:"1ays0h"}]],$5=os("minus",mM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],qy=os("octagon-alert",pM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xM=os("pen",gM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],yM=os("pencil",vM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],wM=os("phone",bM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$h=os("plus",jM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],kT=os("refresh-ccw",BM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mg=os("refresh-cw",SM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],AA=os("save",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],gb=os("search",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],i2=os("settings",EM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Y5=os("shield-alert",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zy=os("shield-check",IM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],o2=os("shield",_M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],MT=os("sparkles",FM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W5=os("square-check-big",UM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],l2=os("square-pen",DM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],X5=os("square",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],QM=os("timer",LM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],PM=os("toggle-left",OM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],MM=os("toggle-right",kM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],RA=os("trash-2",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],J5=os("trending-down",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ud=os("trending-up",KM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Wi=os("triangle-alert",zM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$M=os("trophy",GM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],A2=os("user-plus",YM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],HT=os("user",WM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xl=os("users",XM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pg=os("wallet",JM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],q5=os("wrench",qM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_o=os("x",ZM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],t7=os("zap",e7);class s7 extends Z.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:i.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Wi,{className:"w-8 h-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Something went wrong"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:this.handleReset,className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(mg,{size:16,className:"mr-2"}),"Try Again"]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:"Refresh Page"})]}),this.state.error&&i.jsxs("details",{className:"mt-4 text-left",children:[i.jsx("summary",{className:"cursor-pointer text-sm text-slate-500 hover:text-slate-700",children:"Error Details (Development)"}),i.jsxs("pre",{className:"mt-2 p-3 bg-slate-100 rounded text-xs text-slate-800 overflow-auto max-h-40",children:[this.state.error?this.state.error.toString():"Error details not available",(e=this.state.errorInfo)==null?void 0:e.componentStack]})]})]})}):this.props.children}}const xb=""+new URL("apple-icon-180x180-CeJtO7PD.png",import.meta.url).href,n7=()=>{const{isAuthenticated:s,loading:e,error:t}=Uo(),n=bm(),[r,o]=Z.useState(""),[c,h]=Z.useState(""),[u,f]=Z.useState(!1),[A,m]=Z.useState(!1),[x,g]=Z.useState(""),[b,I]=Z.useState(!1),[N,C]=Z.useState("");Z.useEffect(()=>{s&&!e&&n("/",{replace:!0})},[s,e,n]);const E=async O=>{O.preventDefault(),m(!0),g("");try{await KR(bu,r,c)}catch(H){console.error(H);let Q="Failed to sign in.";H.code==="auth/invalid-credential"||H.code==="auth/user-not-found"||H.code==="auth/wrong-password"?Q="Invalid email or password.":H.code==="auth/too-many-requests"&&(Q="Too many failed attempts. Please try again later."),g(Q),m(!1)}},F=async O=>{if(O.preventDefault(),m(!0),g(""),C(""),!r){g("Please enter your email address to reset password."),m(!1);return}try{await VR(bu,r),C("Password reset link has been sent to your email."),g("")}catch(H){console.error(H);let Q="Failed to send reset email.";H.code==="auth/user-not-found"?Q="No account found with this email address.":H.code==="auth/invalid-email"&&(Q="Please enter a valid email address."),g(Q)}finally{m(!1)}},L=()=>{I(!b),g(""),C(""),h("")};return e?i.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:i.jsx("div",{className:"text-red-900 animate-pulse font-semibold",children:"Loading School Manager GH..."})}):i.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-[#E6F0FA] via-[#E6F0FA] to-[#E6F0FA] flex items-center justify-center p-4",children:[i.jsx("style",{children:`
        @keyframes loginGradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @keyframes floatBlob {
          0% { transform: translate3d(0, 0, 0) scale(1); }
          50% { transform: translate3d(20px, -30px, 0) scale(1.08); }
          100% { transform: translate3d(0, 0, 0) scale(1); }
        }
        @keyframes floatBlobReverse {
          0% { transform: translate3d(0, 0, 0) scale(1); }
          50% { transform: translate3d(-25px, 25px, 0) scale(1.05); }
          100% { transform: translate3d(0, 0, 0) scale(1); }
        }
      `}),i.jsx("div",{className:"absolute inset-0 opacity-70 pointer-events-none",style:{backgroundImage:"linear-gradient(120deg, rgba(11,143,165,0.14), rgba(216,241,244,0.35), rgba(4,107,126,0.12))",backgroundSize:"200% 200%",animation:"loginGradientShift 18s ease-in-out infinite"},"aria-hidden":"true"}),i.jsx("div",{className:"absolute -top-24 -left-24 w-80 h-80 bg-[#E6F0FA]/35 rounded-full blur-3xl pointer-events-none",style:{animation:"floatBlob 16s ease-in-out infinite"},"aria-hidden":"true"}),i.jsx("div",{className:"absolute top-1/3 -right-28 w-96 h-96 bg-[#1160A8]/25 rounded-full blur-3xl pointer-events-none",style:{animation:"floatBlobReverse 20s ease-in-out infinite"},"aria-hidden":"true"}),i.jsx("div",{className:"absolute -bottom-28 left-1/4 w-72 h-72 bg-[#E6F0FA]/60 rounded-full blur-3xl pointer-events-none",style:{animation:"floatBlob 22s ease-in-out infinite"},"aria-hidden":"true"}),i.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-xl p-8 border-t-8 border-[#0B4A82]",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"mx-auto w-28 h-28 mb-4 relative p-2 bg-white rounded-full shadow-sm border border-[#E6F0FA]",children:i.jsx("img",{src:xb,alt:"School Manager GH Logo",className:"w-full h-full object-contain rounded-full",onError:O=>{O.currentTarget.style.display="none",O.currentTarget.parentElement.innerHTML='<div class="w-24 h-24 bg-[#0B4A82] rounded-full flex items-center justify-center text-[#E6F0FA] font-bold border-4 border-[#1160A8] text-xs text-center p-1">School Manager GH</div>'}})}),i.jsx("h1",{className:"text-2xl font-bold text-[#0B4A82] font-serif",children:"School Manager GH"}),i.jsx("p",{className:"text-slate-500 mt-2 text-sm",children:b?"Reset your password":"Sign in to manage the system"})]}),t&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-800 text-sm rounded-lg border border-red-200 flex items-start",children:[i.jsx(pb,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold block mb-1",children:"System Error"}),t]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-center",children:[i.jsx(pb,{size:16,className:"mr-2 flex-shrink-0"}),x]}),N&&i.jsxs("div",{className:"mb-4 p-3 bg-emerald-50 text-emerald-700 text-sm rounded-lg border border-emerald-100 flex items-center",children:[i.jsx(DA,{size:16,className:"mr-2 flex-shrink-0"}),N]}),b?i.jsxs("form",{onSubmit:F,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",value:r,onChange:O=>o(O.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-[#1160A8] outline-none transition-all",placeholder:"Enter your registered email",required:!0}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"We'll send you a link to reset your password."})]}),i.jsx("button",{type:"submit",disabled:A,className:`w-full py-3 px-4 bg-[#1160A8] hover:bg-[#0B4A82] text-white font-bold rounded-lg transition-colors shadow-md flex justify-center items-center ${A?"opacity-70 cursor-not-allowed":""}`,children:A?"Sending...":"Send Reset Link"}),i.jsxs("button",{type:"button",onClick:L,className:"w-full text-center text-sm text-slate-600 hover:text-[#0B4A82] font-medium flex items-center justify-center mt-4",children:[i.jsx(LT,{size:16,className:"mr-1"})," Back to Sign In"]})]}):i.jsxs("form",{onSubmit:E,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",value:r,onChange:O=>o(O.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-[#1160A8] outline-none transition-all",placeholder:"e.g., admin@school.com",required:!0})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Password"}),i.jsx("button",{type:"button",onClick:L,className:"text-xs text-[#1160A8] hover:text-[#0B4A82] font-medium",children:"Forgot Password?"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:u?"text":"password",value:c,onChange:O=>h(O.target.value),className:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-[#1160A8] outline-none transition-all",placeholder:"Enter your password",required:!0}),i.jsx("button",{type:"button",onClick:()=>f(O=>!O),className:"absolute inset-y-0 right-0 flex items-center justify-center px-3 text-slate-500 hover:text-[#0B4A82]","aria-label":u?"Hide password":"Show password",children:u?i.jsx(a2,{size:18}):i.jsx(Lu,{size:18})})]})]}),i.jsx("button",{type:"submit",disabled:A,className:`w-full py-3 px-4 bg-[#0B4A82] hover:bg-[#0B4A82] text-white font-bold rounded-lg transition-colors shadow-md flex justify-center items-center ${A?"opacity-70 cursor-not-allowed":""}`,children:A?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," School Manager GH  Empowering Excellence"]})})]})]})},Io="2023-2024",Xi=1,Es=[{id:"c_n1",name:"Nursery 1",level:"NURSERY"},{id:"c_n2",name:"Nursery 2",level:"NURSERY"},{id:"c_kg1",name:"KG 1",level:"KG"},{id:"c_kg2",name:"KG 2",level:"KG"},{id:"c_p1",name:"Class 1",level:"PRIMARY"},{id:"c_p2",name:"Class 2",level:"PRIMARY"},{id:"c_p3",name:"Class 3",level:"PRIMARY"},{id:"c_p4",name:"Class 4",level:"PRIMARY"},{id:"c_p5",name:"Class 5",level:"PRIMARY"},{id:"c_p6",name:"Class 6",level:"PRIMARY"},{id:"c_jhs1",name:"JHS 1",level:"JHS"},{id:"c_jhs2",name:"JHS 2",level:"JHS"},{id:"c_jhs3",name:"JHS 3",level:"JHS"}],r7=["Language & Literacy","Numeracy","Environmental Studies","Creative Arts","Physical Development","Social & Emotional Development","Rhymes, Songs & Storytelling"],a7=["Literacy & Language","Numeracy","OWOP","Creative Art","Physical Education"],i7=["English Language","Mathematics","Science","ICT","Religious & Moral Education (RME)","Ghanaian Language","Our World Our People (OWOP)","Creative Arts","Physical Education"],o7=["English Language","Mathematics","Integrated Science","Social Studies","Religious & Moral Education (RME)","ICT","French","Ghanaian Language","Creative Arts & Design","Physical Education","Career Technology","Computing / Coding"],pm=s=>s>=80?{total:s,grade:"A",remark:"Excellent"}:s>=70?{total:s,grade:"B",remark:"Very Good"}:s>=60?{total:s,grade:"C",remark:"Good"}:s>=45?{total:s,grade:"D",remark:"Pass"}:{total:s,grade:"F",remark:"Fail"},_A=s=>{const e=(s.testScore||0)+(s.homeworkScore||0)+(s.projectScore||0),t=(s.examScore||0)*.5;return Math.round(e+t)},Mg=s=>{switch(s){case"A":return"text-green-600 bg-green-100";case"B":return"text-red-600 bg-red-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";default:return"text-red-600 bg-red-100"}};class l7{async getCollection(e){return(await qs(Rs(wt,e))).docs.map(n=>n.data())}requireSchoolId(e,t="operation"){if(!e)throw new Error(`schoolId is required for ${t}`);return e}async getCollectionBySchoolId(e,t){const n=this.requireSchoolId(t,`getCollectionBySchoolId(${e})`),r=Ks(Rs(wt,e),rs("schoolId","==",n));return(await qs(r)).docs.map(c=>c.data())}async getSchoolConfig(e){const t=this.requireSchoolId(e,"getSchoolConfig"),n=Os(wt,"settings",t),r=await kc(n);if(r.exists()){const c={...r.data(),schoolId:t};if(c.nextTermBegins&&!c.termTransitionProcessed){const h=new Date(c.nextTermBegins+"T00:00:00"),u=new Date;if(u.setHours(0,0,0,0),!Number.isNaN(h.getTime())&&u>=h){const f={...c,schoolReopenDate:c.nextTermBegins||c.schoolReopenDate||""};await this.resetForNewTerm(f);const A=await kc(n);if(A.exists())return{...A.data(),schoolId:t}}}return c}return{schoolId:t,schoolName:"New School",academicYear:Io,currentTerm:`Term ${Xi}`,headTeacherRemark:"Keep it up.",termEndDate:"",schoolReopenDate:"",vacationDate:"",nextTermBegins:"",termTransitionProcessed:!1,holidayDates:[]}}async updateSchoolConfig(e){const t=this.requireSchoolId(e.schoolId,"updateSchoolConfig");await Vi(Os(wt,"settings",t),e)}async getUsers(e){const t=this.requireSchoolId(e,"getUsers"),n=Ks(Rs(wt,"users"),rs("schoolId","==",t));return(await qs(n)).docs.map(o=>({id:o.id,...o.data()}))}async addUser(e){await Vi(Os(wt,"users",e.id),e)}async deleteUser(e){await zi(Os(wt,"users",e))}async updateUserAssignedClasses(e,t){await Oh(Os(wt,"users",e),{assignedClassIds:t})}async getStudents(e,t){const n=this.requireSchoolId(e,"getStudents"),r=Rs(wt,"students"),o=[rs("schoolId","==",n)];t&&o.push(rs("classId","==",t));const c=Ks(r,...o);return(await qs(c)).docs.map(u=>u.data())}async addStudent(e){this.requireSchoolId(e.schoolId,"addStudent"),await Vi(Os(wt,"students",e.id),e)}async updateStudent(e){this.requireSchoolId(e.schoolId,"updateStudent"),await Oh(Os(wt,"students",e.id),{...e,...e.schoolId?{schoolId:e.schoolId}:{}})}async deleteStudent(e){await zi(Os(wt,"students",e))}async getSubjects(e,t){const n=this.requireSchoolId(e,"getSubjects");if(!t)return[];const r=Ks(Rs(wt,"class_subjects"),rs("schoolId","==",n),rs("classId","==",t)),o=await qs(r);return o.empty?[]:o.docs[0].data().subjects}async addSubject(e,t,n){const r=this.requireSchoolId(n,"addSubject"),o=await this.getSubjects(r,e);o.includes(t)||await Vi(Os(wt,"class_subjects",`${r}_${e}`),{schoolId:r,classId:e,subjects:[...o,t]})}async updateSubject(e,t,n,r){const o=this.requireSchoolId(r,"updateSubject"),c=await this.getSubjects(o,e),h=c.indexOf(t);h!==-1&&(c[h]=n,await Vi(Os(wt,"class_subjects",`${o}_${e}`),{schoolId:o,classId:e,subjects:c}))}async deleteSubject(e,t,n){const r=this.requireSchoolId(n,"deleteSubject"),c=(await this.getSubjects(r,e)).filter(h=>h!==t);await Vi(Os(wt,"class_subjects",`${r}_${e}`),{schoolId:r,classId:e,subjects:c})}async seedClassSubjects(e,t,n){const r=this.requireSchoolId(n,"seedClassSubjects");await Vi(Os(wt,"class_subjects",`${r}_${e}`),{schoolId:r,classId:e,subjects:t})}async resetAllClassSubjects(e){const t=this.requireSchoolId(e,"resetAllClassSubjects"),n=Ks(Rs(wt,"class_subjects"),rs("schoolId","==",t)),o=(await qs(n)).docs.map(c=>zi(Os(wt,"class_subjects",c.id)));await Promise.all(o)}async getAttendance(e,t,n){const r=this.requireSchoolId(e,"getAttendance");if(!t||!n)return;const o=Ks(Rs(wt,"attendance"),rs("schoolId","==",r),rs("classId","==",t),rs("date","==",n)),c=await qs(o);return c.empty?void 0:c.docs[0].data()}async getClassAttendance(e,t){const n=this.requireSchoolId(e,"getClassAttendance");if(!t)return[];const r=Ks(Rs(wt,"attendance"),rs("schoolId","==",n),rs("classId","==",t));return(await qs(r)).docs.map(c=>c.data())}async getAttendanceByDate(e,t){const n=this.requireSchoolId(e,"getAttendanceByDate");if(!t)return[];const r=Ks(Rs(wt,"attendance"),rs("schoolId","==",n),rs("date","==",t));return(await qs(r)).docs.map(c=>c.data())}async saveAttendance(e){const n=`${this.requireSchoolId(e.schoolId,"saveAttendance")}_${e.classId}_${e.date}`;await Vi(Os(wt,"attendance",n),{...e,id:n})}async getAssessments(e,t,n){const r=this.requireSchoolId(e,"getAssessments");if(!t||!n)return[];const o=Ks(Rs(wt,"assessments"),rs("schoolId","==",r),rs("classId","==",t),rs("subject","==",n));return(await qs(o)).docs.map(h=>h.data())}async getAllAssessments(e){return this.getCollectionBySchoolId("assessments",e)}async saveAssessment(e){const t=this.requireSchoolId(e.schoolId,"saveAssessment"),n=e.id||`${t}_${e.studentId}_${e.subject}_${e.term}_${e.academicYear}`;await Vi(Os(wt,"assessments",n),{...e,id:n})}async resetAssessmentsForClass(e,t,n=!1,r){const o=this.requireSchoolId(e,"resetAssessmentsForClass");if(!t)return;const c=Ks(Rs(wt,"assessments"),rs("schoolId","==",o),rs("classId","==",t)),u=(await qs(c)).docs.map(f=>zi(Os(wt,"assessments",f.id)));if(await Promise.all(u),n){const f=await this.getStudents(o,t),A=await this.getSubjects(o,t),m=[],x=r||Xi;for(const g of f)for(const b of A){const I=`${g.id}_${b}_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,N={id:I,schoolId:o,studentId:g.id,classId:t,term:x,academicYear:Io,subject:b,testScore:0,homeworkScore:0,projectScore:0,examScore:0,total:0};m.push(Vi(Os(wt,"assessments",I),N))}await Promise.all(m)}}async getNotices(e){const t=this.requireSchoolId(e,"getNotices"),n=Ks(Rs(wt,"notices"),rs("schoolId","==",t));return(await qs(n)).docs.map(o=>o.data())}async addNotice(e){this.requireSchoolId(e.schoolId,"addNotice"),await Vi(Os(wt,"notices",e.id),e)}async deleteNotice(e){await zi(Os(wt,"notices",e))}async getStudentRemarks(e,t){const n=this.requireSchoolId(e,"getStudentRemarks");if(!t)return[];const r=Ks(Rs(wt,"student_remarks"),rs("schoolId","==",n),rs("classId","==",t));return(await qs(r)).docs.map(c=>c.data())}async saveStudentRemark(e){this.requireSchoolId(e.schoolId,"saveStudentRemark"),await Vi(Os(wt,"student_remarks",e.id),e)}async getStudentSkills(e,t){const n=this.requireSchoolId(e,"getStudentSkills");if(!t)return[];const r=Ks(Rs(wt,"student_skills"),rs("schoolId","==",n),rs("classId","==",t));return(await qs(r)).docs.map(c=>c.data())}async saveStudentSkills(e){this.requireSchoolId(e.schoolId,"saveStudentSkills"),await Vi(Os(wt,"student_skills",e.id),e)}async addSystemNotification(e,t,n){const r=this.requireSchoolId(n,"addSystemNotification"),o=`${r}_${Date.now()}`,c={id:o,schoolId:r,message:e,createdAt:Date.now(),isRead:!1,type:t};await Vi(Os(wt,"admin_notifications",o),c)}async getSystemNotifications(e){const t=Rs(wt,"admin_notifications"),n=e?Ks(t,rs("schoolId","==",e),am(20)):Ks(t,am(50));return(await qs(n)).docs.map(o=>o.data()).sort((o,c)=>(c.createdAt??0)-(o.createdAt??0))}async markNotificationAsRead(e){await Oh(Os(wt,"admin_notifications",e),{isRead:!0})}async deleteSystemNotification(e){await zi(Os(wt,"admin_notifications",e))}async getTimetable(e,t){const n=this.requireSchoolId(e,"getTimetable");if(!t)return;const r=Ks(Rs(wt,"timetables"),rs("schoolId","==",n),rs("classId","==",t),am(1)),o=await qs(r);return o.empty?void 0:o.docs[0].data()}async saveTimetable(e){const t=this.requireSchoolId(e.schoolId,"saveTimetable");await Vi(Os(wt,"timetables",`${t}_${e.classId}`),{...e,schoolId:t})}async getStudentPerformance(e,t,n){const r=await this.getClassAttendance(e,n),o=new Set(r.filter(E=>E.isHoliday).map(E=>E.date)),c=await this.getSchoolConfig(e),h=new Set((c.holidayDates||[]).map(E=>E.date));let u=0,f=[];if(c.schoolReopenDate){const E=new Date(`${c.schoolReopenDate}T00:00:00`),F=c.vacationDate?new Date(`${c.vacationDate}T00:00:00`):null,L=new Date;L.setHours(0,0,0,0);const O=F&&F<L?F:L;if(!Number.isNaN(E.getTime())){const H=new Date(E);for(;H<=O;){const Q=H.getDay();if(!(Q===0||Q===6)){const R=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`;!o.has(R)&&!h.has(R)&&(u++,f.push(R))}H.setDate(H.getDate()+1)}}}if(!u){const E=r.filter(F=>!F.isHoliday&&!h.has(F.date));u=E.length,f=E.map(F=>F.date).sort()}const A=r.filter(E=>!E.isHoliday&&!h.has(E.date)&&E.presentStudentIds.includes(t)).length,m=u===0?0:Math.round(A/u*100);f.length||(f=r.filter(E=>!E.isHoliday&&!h.has(E.date)).map(E=>E.date).sort());const x=r.filter(E=>!E.isHoliday&&!h.has(E.date)&&E.presentStudentIds.includes(t)).map(E=>E.date).sort(),g=Ks(Rs(wt,"assessments"),rs("schoolId","==",e),rs("studentId","==",t)),I=(await qs(g)).docs.map(E=>E.data()).filter(E=>!0),C=(await this.getSubjects(e,n)).map(E=>{const F=I.find(L=>L.subject===E);return F||{subject:E,total:0}});return{attendance:{total:u,present:A,percentage:m,schoolDates:f,presentDates:x},grades:C}}async getDashboardStats(e){const t=this.requireSchoolId(e,"getDashboardStats"),[n,r,o]=await Promise.all([qs(Ks(Rs(wt,"students"),rs("schoolId","==",t))),qs(Ks(Rs(wt,"users"),rs("schoolId","==",t))),qs(Ks(Rs(wt,"attendance"),rs("schoolId","==",t)))]),c=n.docs.map(b=>b.data()),h=r.docs.map(b=>b.data()),u=await this.getSchoolConfig(t),f=new Set((u.holidayDates||[]).map(b=>b.date)),A=o.docs.map(b=>b.data()).filter(b=>!b.isHoliday&&!f.has(b.date)),m=c.filter(b=>b.gender==="Male").length,x=c.filter(b=>b.gender==="Female").length,g=Es.map(b=>{const I=A.filter(C=>C.classId===b.id),N=c.filter(C=>C.classId===b.id);if(I.length>0&&N.length>0){const C=I.length*N.length,E=I.reduce((L,O)=>L+O.presentStudentIds.length,0),F=Math.round(E/C*100);return{className:b.name,percentage:F,id:b.id}}return{className:b.name,percentage:0,id:b.id}});return{studentsCount:c.length,teachersCount:h.filter(b=>b.role===xn.TEACHER).length,gender:{male:m,female:x},classAttendance:g}}async getDashboardSummary(e){const t=this.requireSchoolId(e,"getDashboardSummary"),[n,r]=await Promise.all([k5(Ks(Rs(wt,"students"),rs("schoolId","==",t))),k5(Ks(Rs(wt,"users"),rs("schoolId","==",t),rs("role","==",xn.TEACHER)))]);return{studentsCount:n.data().count,teachersCount:r.data().count}}async getTeacherAttendance(e,t,n){const r=this.requireSchoolId(e,"getTeacherAttendance");if(!t||!n)return;const o=Ks(Rs(wt,"teacher_attendance"),rs("schoolId","==",r),rs("teacherId","==",t),rs("date","==",n)),c=await qs(o);return c.empty?void 0:c.docs[0].data()}async getTeacherAttendancePendingByDate(e,t){return t?(await this.getAllTeacherAttendance(e,t)).filter(r=>r.approvalStatus==="pending"):[]}async getAllPendingTeacherAttendance(e){return(await this.getAllTeacherAttendanceRecords(e)).filter(n=>n.approvalStatus==="pending")}async getAllTeacherAttendance(e,t){const n=this.requireSchoolId(e,"getAllTeacherAttendance");if(!t)return[];const r=Ks(Rs(wt,"teacher_attendance"),rs("schoolId","==",n),rs("date","==",t));return(await qs(r)).docs.map(c=>c.data())}async getAllApprovedTeacherAttendance(e,t){return t?(await this.getAllTeacherAttendance(e,t)).filter(r=>r.approvalStatus==="approved"):[]}async saveTeacherAttendance(e){const n=`${this.requireSchoolId(e.schoolId,"saveTeacherAttendance")}_${e.teacherId}_${e.date}`;await Vi(Os(wt,"teacher_attendance",n),{approvalStatus:e.approvalStatus||"approved",...e,id:n})}async approveTeacherAttendance(e,t,n){const r=this.requireSchoolId(e,"approveTeacherAttendance");await Oh(Os(wt,"teacher_attendance",t),{schoolId:r,approvalStatus:"approved",approvedBy:n,approvedAt:Date.now(),rejectedBy:null,rejectedAt:null})}async rejectTeacherAttendance(e,t,n){const r=this.requireSchoolId(e,"rejectTeacherAttendance");await Oh(Os(wt,"teacher_attendance",t),{schoolId:r,approvalStatus:"rejected",status:"absent",rejectedBy:n,rejectedAt:Date.now()})}async getAllTeacherAttendanceRecords(e){return this.getCollectionBySchoolId("teacher_attendance",e)}async resetAllTeacherAttendance(e){const t=this.requireSchoolId(e,"resetAllTeacherAttendance"),n=Ks(Rs(wt,"teacher_attendance"),rs("schoolId","==",t)),o=(await qs(n)).docs.map(c=>zi(Os(wt,"teacher_attendance",c.id)));await Promise.all(o)}async getAdminRemark(e,t){const n=this.requireSchoolId(e,"getAdminRemark");if(!t)return;const r=Os(wt,"admin_remarks",t),o=await kc(r);if(!o.exists())return;const c=o.data();return c.schoolId===n?c:void 0}async saveAdminRemark(e){this.requireSchoolId(e.schoolId,"saveAdminRemark"),await Vi(Os(wt,"admin_remarks",e.id),e)}async createTermBackup(e,t,n){console.log(`Creating backup for ${t}, ${n}...`);try{const r=this.requireSchoolId(e.schoolId,"createTermBackup"),[o,c,h,u,f,A,m,x,g,b,I,N]=await Promise.all([this.getCollectionBySchoolId("students",r),this.getCollectionBySchoolId("users",r),this.getCollectionBySchoolId("attendance",r),this.getCollectionBySchoolId("teacher_attendance",r),this.getCollectionBySchoolId("assessments",r),this.getCollectionBySchoolId("student_remarks",r),this.getCollectionBySchoolId("admin_remarks",r),this.getCollectionBySchoolId("student_skills",r),this.getCollectionBySchoolId("timetables",r),this.getCollectionBySchoolId("notices",r),this.getCollectionBySchoolId("admin_notifications",r),this.getCollectionBySchoolId("activity_logs",r)]),E=(await qs(Ks(Rs(wt,"class_subjects"),rs("schoolId","==",r)))).docs.map(L=>L.data()),F={id:`backup_${Date.now()}`,schoolId:r,timestamp:Date.now(),term:t,academicYear:n,data:{schoolConfig:e,students:o,attendanceRecords:h,teacherAttendanceRecords:u,assessments:f,studentRemarks:A,adminRemarks:m,studentSkills:x,timetables:g,users:c,classSubjects:E,notices:b,adminNotifications:I,activityLogs:N}};await Vi(Os(wt,"backups",F.id),F),console.log(`Backup created successfully: ${F.id}`)}catch(r){throw console.error("Error creating backup:",r),r}}async resetForNewTerm(e){console.log("Initiating term transition for:",e.currentTerm,e.academicYear),await this.createTermBackup(e,e.currentTerm,e.academicYear);const t=Es.map(f=>f.id),n=this.requireSchoolId(e.schoolId,"resetForNewTerm"),r=[(async()=>{const f=Ks(Rs(wt,"attendance"),rs("schoolId","==",n)),m=(await qs(f)).docs.map(x=>zi(Os(wt,"attendance",x.id)));await Promise.all(m),console.log("Cleared student attendance records.")})(),this.resetAllTeacherAttendance(n),(async()=>{const f=Ks(Rs(wt,"student_remarks"),rs("schoolId","==",n)),m=(await qs(f)).docs.map(x=>zi(Os(wt,"student_remarks",x.id)));await Promise.all(m),console.log("Cleared student remarks.")})(),(async()=>{const f=Ks(Rs(wt,"student_skills"),rs("schoolId","==",n)),m=(await qs(f)).docs.map(x=>zi(Os(wt,"student_skills",x.id)));await Promise.all(m),console.log("Cleared student skills.")})(),(async()=>{const f=Ks(Rs(wt,"admin_remarks"),rs("schoolId","==",n)),m=(await qs(f)).docs.map(x=>zi(Os(wt,"admin_remarks",x.id)));await Promise.all(m),console.log("Cleared admin remarks.")})(),(async()=>{const f=Ks(Rs(wt,"admin_notifications"),rs("schoolId","==",n)),m=(await qs(f)).docs.map(x=>zi(Os(wt,"admin_notifications",x.id)));await Promise.all(m),console.log("Cleared system notifications.")})(),(async()=>{const f=Ks(Rs(wt,"notices"),rs("schoolId","==",n)),m=(await qs(f)).docs.map(x=>zi(Os(wt,"notices",x.id)));await Promise.all(m),console.log("Cleared notices.")})()];await Promise.all(r);let o=1,c=e.academicYear;const h=parseInt(e.currentTerm.split(" ")[1]);if(h===3){o=1;const f=e.academicYear.split("-").map(Number);c=`${f[0]+1}-${f[1]+1}`}else o=h+1;for(const f of t)await this.resetAssessmentsForClass(e.schoolId,f,!0,o),console.log(`Reset and re-seeded assessments for class: ${f} with term ${o}`);const u={...e,currentTerm:`Term ${o}`,academicYear:c,termTransitionProcessed:!0,schoolReopenDate:e.schoolReopenDate||"",vacationDate:"",nextTermBegins:""};await this.updateSchoolConfig(u),console.log("SchoolConfig updated for new term:",`Term ${o}`,c)}async getTeacherAttendanceAnalytics(e,t,n){const r=this.requireSchoolId(e,"getTeacherAttendanceAnalytics"),o=await this.getSchoolConfig(r);if(!t&&!o.schoolReopenDate)return[];const h=(await this.getUsers(r)).filter(b=>b.role===xn.TEACHER),u=await this.getAllTeacherAttendanceRecords(r),A=`${(o.academicYear||Io).split("-")[0]}-09-01`,m=t||o.schoolReopenDate||A,x=n||new Date().toISOString().split("T")[0],g=[];for(const b of h){const N=u.filter(H=>H.teacherId===b.id&&H.approvalStatus!=="pending").filter(H=>H.date>=m&&H.date<=x&&!H.isHoliday),C={};N.forEach(H=>{const Q=new Date(H.date),U=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`;C[U]||(C[U]={total:0,present:0}),C[U].total+=1,H.status==="present"&&H.approvalStatus==="approved"&&(C[U].present+=1)});const E=Object.entries(C).map(([H,Q])=>{const[U,R]=H.split("-"),$=Q.total>0?Math.round(Q.present/Q.total*100):0;return{teacherId:b.id,teacherName:b.fullName,month:H,year:parseInt(U),totalWorkingDays:Q.total,presentDays:Q.present,absentDays:Q.total-Q.present,attendanceRate:$,trend:"stable"}}).sort((H,Q)=>H.month.localeCompare(Q.month));for(let H=0;H<E.length;H++)if(H>0){const Q=E[H].attendanceRate,U=E[H-1].attendanceRate;Q>U+5?E[H].trend="improving":Q<U-5?E[H].trend="declining":E[H].trend="stable"}const F=E.reduce((H,Q)=>H+Q.totalWorkingDays,0),L=E.reduce((H,Q)=>H+Q.presentDays,0),O=F>0?Math.round(L/F*100):0;g.push({teacherId:b.id,teacherName:b.fullName,overallAttendance:O,monthlyBreakdown:E,termStartDate:m,vacationDate:x!==new Date().toISOString().split("T")[0]?x:void 0})}return g}async getBackups(e){const t=this.requireSchoolId(e==null?void 0:e.schoolId,"getBackups");let n=Ks(Rs(wt,"backups"),rs("schoolId","==",t));const r=[];if(e!=null&&e.term&&r.push(rs("term","==",e.term)),e!=null&&e.academicYear&&r.push(rs("academicYear","==",e.academicYear)),e!=null&&e.date){const c=new Date(e.date).getTime(),h=c+1440*60*1e3-1;r.push(rs("timestamp",">=",c),rs("timestamp","<=",h))}return r.length>0&&(n=Ks(n,...r)),(await qs(n)).docs.map(c=>c.data())}async getBackupDetails(e,t){const n=this.requireSchoolId(e,"getBackupDetails");if(!t)return;const r=await kc(Os(wt,"backups",t));if(!r.exists())return;const o=r.data();return o.schoolId===n?o:void 0}async deleteBackup(e,t){const n=this.requireSchoolId(e,"deleteBackup");!t||!await this.getBackupDetails(n,t)||await zi(Os(wt,"backups",t))}async deleteAllBackups(e){const t=this.requireSchoolId(e,"deleteAllBackups"),n=Ks(Rs(wt,"backups"),rs("schoolId","==",t)),o=(await qs(n)).docs.map(c=>zi(Os(wt,"backups",c.id)));await Promise.all(o)}}const ot=new l7,A7=({toast:s,onClose:e})=>{Z.useEffect(()=>{const n=setTimeout(()=>e(s.id),s.duration);return()=>clearTimeout(n)},[s,e]);const t=s.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-800":s.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-[#E6F0FA] border-[#E6F0FA] text-[#0B4A82]";return i.jsx("div",{className:`max-w-sm w-full px-4 py-3 rounded-lg border shadow-md ${t} transform transition-all`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-1 text-sm leading-tight",children:s.message}),i.jsx("button",{onClick:()=>e(s.id),className:"text-slate-400 hover:text-slate-600 ml-2","aria-label":"Close notification",children:i.jsx(_o,{size:14})})]})})},c7=()=>{const[s,e]=Z.useState([]);Z.useEffect(()=>{let n=1;const r=o=>{const{message:c,type:h,duration:u}=o.detail||{},f=n++;e(A=>[{id:f,message:c,type:h,duration:u},...A])};return window.addEventListener("app-toast",r),()=>window.removeEventListener("app-toast",r)},[]);const t=n=>e(r=>r.filter(o=>o.id!==n));return s.length===0?null:i.jsx("div",{className:"fixed right-4 top-20 z-60 flex flex-col gap-3",children:s.map(n=>i.jsx(A7,{toast:n,onClose:t},n.id))})},lr=({children:s,title:e})=>{const{user:t,logout:n}=Uo(),{school:r}=dc(),o=(r==null?void 0:r.id)||null,[c,h]=Z.useState(!1),u=Uu(),f=u.pathname.startsWith("/admin/billing"),[A,m]=Z.useState([]),[x,g]=Z.useState(!1),[b,I]=Z.useState(0),N=(t==null?void 0:t.role)===xn.SCHOOL_ADMIN,C=(t==null?void 0:t.role)===xn.SUPER_ADMIN,E=(r==null?void 0:r.plan)==="free",F=Z.useMemo(()=>{var ve,Se,ge;if(!r||E||C)return null;const ue=Be=>{if(!Be)return null;const Fe=Be instanceof Date?Be:new Date(typeof(Be==null?void 0:Be.toDate)=="function"?Be.toDate():Be);return Number.isNaN(Fe.getTime())?null:Fe},oe=Be=>Be==="termly"?4:Be==="yearly"?12:1,X=(r==null?void 0:r.plan)||"monthly",Y=ue(r==null?void 0:r.planEndsAt),re=((ve=r==null?void 0:r.billing)==null?void 0:ve.lastPaymentAt)||null,pe=(r==null?void 0:r.createdAt)||((Se=r==null?void 0:r.billing)==null?void 0:Se.createdAt)||null;let ee=ue(re)||ue(pe);if(!ee)return null;re&&(ee=new Date(ee),ee.setDate(1),ee.setHours(0,0,0,0));const M=Y||(()=>{const Be=new Date(ee);return Be.setMonth(Be.getMonth()+oe(X)),Be})(),J=10080*60*1e3,ie=new Date(M.getTime()+J);if(new Date<ie)return null;const ce=String(((ge=r==null?void 0:r.billing)==null?void 0:ge.status)||"").toLowerCase().trim();return["active","success","paid"].includes(ce)?null:{planEndsAt:M,graceEndsAt:ie}},[r,E,C]),L=(ue,oe="GHS")=>{if(!ue&&ue!==0)return"";const X=ue>=100?ue/100:ue;return new Intl.NumberFormat("en-GH",{style:"currency",currency:oe,maximumFractionDigits:2}).format(X)},O=()=>`superAdminDismissedNotifications:${(t==null?void 0:t.id)||"unknown"}`,H=()=>`superAdminReadNotifications:${(t==null?void 0:t.id)||"unknown"}`,Q=()=>{try{const ue=localStorage.getItem(O());return ue?JSON.parse(ue):[]}catch{return[]}},U=ue=>{try{localStorage.setItem(O(),JSON.stringify(ue))}catch{}},R=()=>{try{const ue=localStorage.getItem(H());return ue?JSON.parse(ue):[]}catch{return[]}},$=ue=>{try{localStorage.setItem(H(),JSON.stringify(ue))}catch{}},P=ue=>{if(!ue)return Date.now();if(ue instanceof tr)return ue.toMillis();if(typeof ue=="number")return ue;const oe=new Date(ue);return Number.isNaN(oe.getTime())?Date.now():oe.getTime()};Z.useEffect(()=>{if(N||C){const ue=async()=>{try{if(!o&&!C)return;if(C){const Y=new Set(Q()),re=new Set(R()),pe=Ks(Rs(wt,"payments"),Zx("createdAt","desc"),am(20)),M=(await qs(pe)).docs.filter(J=>!Y.has(J.id)).map(J=>{const ie=J.data(),le=L(ie.amount,ie.currency||"GHS"),ce=String(ie.status||"pending").toLowerCase(),ve=["success","paid","active"].includes(ce)?"paid":["failed","failure","past_due"].includes(ce)?"failed":"pending",Se=ie.schoolName||ie.schoolId||"";return{id:J.id,schoolId:ie.schoolId||"system",message:`${Se} payment ${ve}${le?`  ${le}`:""}`,createdAt:P(ie.createdAt),isRead:re.has(J.id),type:"system"}});m(M),I(M.filter(J=>!J.isRead).length);return}const X=await ot.getSystemNotifications(o);m(X),I(X.filter(Y=>!Y.isRead).length)}catch(X){console.error("Failed to fetch notifications",X)}};ue();const oe=setInterval(ue,3e4);return()=>clearInterval(oe)}},[N,C,o]);const V=async(ue,oe)=>{if(oe.stopPropagation(),C){const X=Array.from(new Set([...R(),ue]));$(X),m(Y=>Y.map(re=>re.id===ue?{...re,isRead:!0}:re)),I(Y=>Math.max(0,Y-1));return}await ot.markNotificationAsRead(ue),m(X=>X.map(Y=>Y.id===ue?{...Y,isRead:!0}:Y)),I(X=>Math.max(0,X-1))},G=async(ue,oe)=>{if(oe.stopPropagation(),C){const X=A.find(re=>re.id===ue&&!re.isRead),Y=Array.from(new Set([...Q(),ue]));U(Y),m(re=>re.filter(pe=>pe.id!==ue)),I(re=>X?Math.max(0,re-1):re);return}try{await ot.deleteSystemNotification(ue),m(X=>X.filter(Y=>Y.id!==ue)),I(X=>A.find(re=>re.id===ue&&!re.isRead)?Math.max(0,X-1):X)}catch(X){console.error("Failed to delete notification",X)}},ae=({href:ue,icon:oe,label:X})=>{const Y=u.pathname===ue;return i.jsxs(Ua,{to:ue,className:`flex items-center px-4 py-3 transition-colors ${Y?"bg-[#0B4A82] text-white border-r-4 border-[#1160A8]":"text-[#E6F0FA] hover:bg-[#1160A8] hover:text-white"}`,onClick:()=>h(!1),children:[i.jsx(oe,{className:`w-5 h-5 mr-3 ${Y?"text-white":"text-[#E6F0FA]"}`}),i.jsx("span",{className:"font-medium",children:X})]})};return i.jsxs("div",{className:"h-screen bg-[#fafafa] flex",children:[c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:()=>h(!1)}),i.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-30 w-64 bg-[#0B4A82] text-white transform transition-transform duration-200 ease-in-out overflow-y-auto
        ${c?"translate-x-0":"-translate-x-full"}
        md:relative md:translate-x-0 flex flex-col shadow-xl border-r border-[#0B4A82]
      `,children:[i.jsxs("div",{className:"p-6 border-b border-[#0B4A82] bg-[#0B4A82] flex flex-col items-center justify-center relative",children:[i.jsx("button",{onClick:()=>h(!1),className:"md:hidden absolute top-4 right-4 text-[#E6F0FA] hover:text-white",children:i.jsx(_o,{size:24})}),C?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-20 h-20 mb-3 bg-white rounded-full p-1 shadow-lg border-2 border-[#E6F0FA] overflow-hidden",children:i.jsx("img",{src:xb,alt:"School Manager GH Logo",className:"w-full h-full object-contain rounded-full"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-xl font-bold text-[#E6F0FA] leading-tight tracking-wide font-serif break-words px-2",children:"Super Admin Panel"}),i.jsx("p",{className:"text-xs text-[#E6F0FA] mt-1 uppercase tracking-wider",children:"System Administration"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-20 h-20 mb-3 bg-white rounded-full p-1 shadow-lg border-2 border-amber-500 overflow-hidden",children:i.jsx("img",{src:(r==null?void 0:r.logoUrl)||xb,alt:(r==null?void 0:r.name)||"School Management System",className:"w-full h-full object-contain rounded-full"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-xl font-bold text-[#E6F0FA] leading-tight tracking-wide font-serif break-words px-2",children:(r==null?void 0:r.name)||"School Management System"}),i.jsx("p",{className:"text-xs text-[#E6F0FA] mt-1 uppercase tracking-wider",children:"Management System"})]})]})]}),i.jsx("nav",{className:"flex-1 py-6 space-y-1",children:C?i.jsxs(i.Fragment,{children:[i.jsx(ae,{href:"/",icon:Xy,label:"Dashboard"}),i.jsx(ae,{href:"/super-admin/schools",icon:mm,label:"Schools"}),i.jsx(ae,{href:"/super-admin/backups",icon:o2,label:"Backups"}),i.jsx(ae,{href:"/super-admin/payments",icon:pg,label:"Payments"})]}):N?i.jsx(i.Fragment,{children:F?i.jsx(ae,{href:"/admin/billing",icon:Lp,label:"Billing"}):i.jsxs(i.Fragment,{children:[i.jsx(ae,{href:"/",icon:Xy,label:"Dashboard"}),i.jsx(ae,{href:"/admin/students",icon:mm,label:"Students"}),i.jsx(ae,{href:"/admin/teachers",icon:xl,label:"Teachers"}),i.jsx(ae,{href:"/admin/attendance",icon:Ck,label:"Student Attendance"}),i.jsx(ae,{href:"/admin/teacher-attendance",icon:Xf,label:"Teacher Attendance"}),i.jsx(ae,{href:"/admin/reports",icon:zl,label:"Reports"}),i.jsx(ae,{href:"/admin/report-card",icon:zl,label:"Report Card"}),i.jsx(ae,{href:"/admin/timetable",icon:jk,label:"Timetable"}),i.jsx(ae,{href:"/admin/settings",icon:i2,label:"Settings"}),!E&&i.jsx(ae,{href:"/admin/billing",icon:Lp,label:"Billing"})]})}):i.jsx(i.Fragment,{children:F?i.jsx(ae,{href:"/admin/billing",icon:Lp,label:"Billing"}):i.jsxs(i.Fragment,{children:[i.jsx(ae,{href:"/",icon:Xy,label:"Dashboard"}),i.jsx(ae,{href:"/teacher/my-attendance",icon:Xf,label:"My Attendance"}),i.jsx(ae,{href:"/teacher/attendance",icon:xl,label:"Student Attendance"}),i.jsx(ae,{href:"/teacher/assessment",icon:zl,label:"Assessment"})]})})}),i.jsxs("div",{className:"p-4 border-t border-[#0B4A82] bg-[#0B4A82]",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-[#1160A8] border-2 border-[#E6F0FA] flex items-center justify-center text-sm font-bold shadow-lg text-white",children:t==null?void 0:t.fullName.charAt(0)}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-white",children:t==null?void 0:t.fullName}),i.jsx("p",{className:"text-xs text-[#E6F0FA] capitalize",children:(t==null?void 0:t.role)===xn.SUPER_ADMIN?"Super Admin":(t==null?void 0:t.role)===xn.SCHOOL_ADMIN?"School Admin":"Teacher"})]})]}),i.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center px-4 py-2 text-sm text-[#E6F0FA] hover:text-white hover:bg-[#1160A8] rounded-md transition-colors",children:[i.jsx(rM,{size:16,className:"mr-2"}),"Sign Out"]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[i.jsxs("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-4 md:px-8 z-10 border-b border-[#E6F0FA]",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:()=>h(!0),className:"md:hidden p-2 -ml-2 text-[#0B4A82] hover:text-[#1160A8]",children:i.jsx(dM,{size:24})}),i.jsx("h2",{className:"text-xl font-bold text-[#0B4A82] ml-2 md:ml-0",children:e})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[(N||C)&&i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>g(!x),className:`relative p-2 transition-colors ${x?"text-[#0B4A82] bg-[#E6F0FA] rounded-full":"text-slate-400 hover:text-[#0B4A82]"}`,children:[i.jsx(zp,{size:20}),b>0&&i.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-[#1160A8] rounded-full border-2 border-white"})]}),x&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),i.jsxs("div",{className:"fixed right-4 top-16 w-80 sm:w-96 bg-white bg-opacity-100 rounded-xl shadow-2xl border border-slate-200 z-50 overflow-hidden",children:[i.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[i.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Notifications"}),i.jsxs("span",{className:"text-xs text-slate-500",children:[b," unread"]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto bg-white",children:A.length===0?i.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No new activity."}):A.map(ue=>i.jsx("div",{className:`p-3 border-b border-slate-100 hover:bg-slate-50 transition-colors ${ue.isRead?"bg-slate-50":"bg-white border-l-4 border-l-[#1160A8]"}`,children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`text-sm leading-snug mb-1 ${ue.isRead?"text-slate-500":"text-slate-800 font-medium"}`,children:ue.message}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide ${ue.isRead?"bg-slate-200 text-slate-500":"bg-[#E6F0FA] text-[#0B4A82]"}`,children:ue.isRead?"Read":"Unread"}),i.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(ue.createdAt).toLocaleString()})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!ue.isRead&&i.jsx("button",{onClick:oe=>V(ue.id,oe),className:"text-emerald-500 hover:text-emerald-700 p-1 hover:bg-emerald-50 rounded transition-colors shrink-0",title:"Mark as read",children:i.jsx($p,{size:16})}),i.jsx("button",{onClick:oe=>G(ue.id,oe),className:"text-slate-400 hover:text-red-600 p-1 hover:bg-red-50 rounded transition-colors shrink-0",title:"Delete notification",children:i.jsx(_o,{size:16})})]})]})},ue.id))})]})]})]}),i.jsx("div",{className:"h-6 w-px bg-slate-200 mx-2 hidden sm:block"}),i.jsx("div",{className:"text-sm text-slate-500 hidden sm:block font-medium",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),F&&!f&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/70 p-4",children:i.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl",children:[i.jsx("div",{className:"absolute -top-10 right-6 h-16 w-16 rounded-2xl bg-rose-500 text-white flex items-center justify-center shadow-lg",children:i.jsx(sM,{size:28})}),i.jsx("div",{className:"flex flex-col gap-4 pt-6",children:N?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-rose-500",children:"Subscription expired"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-1",children:"Access paused until renewal"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:["Your one-week grace period ended on"," ",i.jsx("span",{className:"font-semibold text-slate-800",children:F.graceEndsAt.toLocaleDateString()}),". Renew now to restore access for your team."]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[i.jsxs(Ua,{to:"/admin/billing",className:"inline-flex items-center justify-center gap-2 rounded-full bg-[#0B4A82] px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-[#1160A8]",children:[i.jsx(Lp,{size:16}),"Renew Subscription"]}),i.jsx("span",{className:"text-xs text-slate-500",children:"Need help? Contact your super admin."})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-rose-500",children:"Subscription expired"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-1",children:"Access temporarily paused"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:["Your schools subscription grace period ended on"," ",i.jsx("span",{className:"font-semibold text-slate-800",children:F.graceEndsAt.toLocaleDateString()}),". Please contact your school admin to renew and restore access."]})]}),i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:i.jsx("span",{className:"inline-flex items-center justify-center rounded-full border border-slate-200 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-600",children:"Waiting for admin renewal"})})]})})]})}),i.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-8",children:s}),i.jsx(c7,{})]})]})},Pt=(s,e)=>{const t={message:s,type:(e==null?void 0:e.type)||"info",duration:(e==null?void 0:e.duration)??4e3};window.dispatchEvent(new CustomEvent("app-toast",{detail:t}))},u7=({data:s,week:e,onPreviousWeek:t,onNextWeek:n,onCurrentWeek:r,schoolReopenDate:o})=>{if(e===null)return i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-slate-100 h-full flex flex-col items-center justify-center",children:[i.jsx("div",{className:"relative w-12 h-12 border-3 border-slate-100 border-t-red-900 rounded-full animate-spin"}),i.jsx("p",{className:"text-slate-400 text-sm mt-4",children:"Loading attendance data..."})]});const{monday:c,friday:h}=VT(e),f=d7().toDateString()===c.toDateString(),A=b=>{const I=b.split("-");return I.length===3?new Date(parseInt(I[0]),parseInt(I[1])-1,parseInt(I[2])):new Date(b)};let m="",x=null;o&&(x=A(o),x>new Date?m="School Closed":m="School Open");const g=b=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(b);return i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-slate-100 h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Class Attendance"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Weekly participation overview"})]}),m&&i.jsx("div",{className:`text-xs font-bold px-3 py-1 rounded-full ${m==="School Closed"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:m})]}),i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-amber-50 rounded-xl border border-red-100",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:t,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-white border border-slate-200 hover:bg-slate-50 hover:border-red-400 transition-colors shadow-sm text-slate-600 hover:text-red-700 font-semibold",title:"Previous week",children:""}),i.jsx("div",{className:"flex-1 mx-4 text-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:[g(c),"  ",g(h)]}),i.jsx("p",{className:"text-xs text-slate-500 font-medium",children:c.getFullYear()}),f&&i.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-100 text-red-700 text-[10px] font-bold rounded-full mt-1 uppercase tracking-wide",children:"Current Week"})]})}),i.jsx("button",{onClick:n,disabled:f,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-white border border-slate-200 hover:bg-slate-50 hover:border-red-400 transition-colors shadow-sm text-slate-600 hover:text-red-700 font-semibold disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-200 disabled:hover:text-slate-600",title:f?"You are viewing the current week":"Next week",children:""})]}),!f&&i.jsx("div",{className:"mt-3 text-center",children:i.jsx("button",{onClick:r,className:"text-xs text-red-700 hover:text-red-800 font-semibold bg-white border border-red-200 px-3 py-1.5 rounded-md hover:bg-red-50 transition-colors",children:"Return to Current Week"})})]}),m==="School Closed"&&x&&i.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-red-800 font-semibold",children:["School is currently closed. Attendance records will begin from"," ",g(x)]})}),i.jsx("div",{className:"flex-1 flex items-end justify-between gap-1 sm:gap-2 px-1 pb-2 h-96 w-full overflow-x-auto",children:s.map(b=>{let I="bg-amber-500";return b.percentage<50?I="bg-red-600":b.percentage>=80&&(I="bg-emerald-500"),i.jsxs("div",{className:"flex flex-col items-center flex-1 group h-full justify-end min-w-[20px]",children:[i.jsxs("div",{className:"w-full max-w-[30px] bg-slate-50 rounded-t-sm relative flex items-end h-full hover:bg-slate-100 transition-colors",children:[i.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 pointer-events-none",children:[b.className,": ",b.percentage,"%"]}),i.jsx("div",{className:`w-full ${I} rounded-t-sm transition-all duration-1000 ease-out relative`,style:{height:`${b.percentage}%`}})]}),i.jsx("span",{className:"text-[10px] text-slate-400 mt-2 font-medium truncate w-full text-center",children:b.className.replace("Nursery ","N").replace("Class ","P").replace("Primary ","P").replace("KG ","K").replace("JHS ","J")})]},b.id)})})]})},VT=s=>{const e=new Date(s),t=e.getDay(),n=new Date(e);n.setDate(e.getDate()-(t===0?6:t-1));const r=new Date(n);return r.setDate(n.getDate()+4),{monday:n,friday:r}},d7=()=>VT(new Date).monday,h7=Ph.memo(u7),Hi=({className:s="h-4 bg-slate-100 rounded animate-pulse"})=>i.jsx("div",{className:s}),vd=({label:s="Loading"})=>i.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-slate-500",children:[i.jsxs("span",{className:"relative inline-flex h-4 w-4",children:[i.jsx("span",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-amber-400 via-[#0B4A82] to-emerald-400 opacity-60 blur-[1px]"}),i.jsx("span",{className:"absolute inset-0 rounded-full border-2 border-slate-200 border-t-[#0B4A82] animate-spin"})]}),s,""]}),Z5=s=>{if(!s)return null;const[e,t,n]=s.split("-").map(Number);if(!e||!t||!n)return null;const r=new Date(e,t-1,n);return Number.isNaN(r.getTime())?null:(r.setHours(0,0,0,0),r)},f7=(s,e)=>{const t=s.match(/\d+/),n=t?parseInt(t[0],10):Xi;let r=n+1,o=e;if(n>=3){r=1;const c=e.split("-").map(Number);c.length===2&&c.every(h=>!Number.isNaN(h))&&(o=`${c[0]+1}-${c[1]+1}`)}return{nextTerm:r,nextAcademicYear:o}},m7=()=>{var gn;bm();const{user:s}=Uo(),{school:e,schoolLoading:t}=dc(),n=(e==null?void 0:e.id)||null,[r,o]=Z.useState({students:0,teachers:0,classes:Es.length,maleStudents:0,femaleStudents:0,classAttendance:[]}),[c,h]=Z.useState([]),[u,f]=Z.useState([]),[A,m]=Z.useState(null),[x,g]=Z.useState(!1),[b,I]=Z.useState(!1),[N,C]=Z.useState(!1),[E,F]=Z.useState(!1),[L,O]=Z.useState(!1),[H,Q]=Z.useState(null),[U,R]=Z.useState(null),[$,P]=Z.useState([]),[V,G]=Z.useState([]),[ae,ue]=Z.useState([]),[oe,X]=Z.useState([]),[Y,re]=Z.useState([]),[pe,ee]=Z.useState(!1),[M,J]=Z.useState(null),ie=Ph.useRef(null),le=Ph.useRef(null),ce=Ph.useRef(!1),ve=Ph.useRef(0),[Se,ge]=Z.useState(Date.now()),[Be,Fe]=Z.useState(0),[Qe,Ze]=Z.useState(0),[Pe,me]=Z.useState(0),[nt,It]=Z.useState(null),[ut,ze]=Z.useState(null),Ft=3e4,Qt=3e4,[Ct,Jt]=Z.useState({academicYear:"",currentTerm:"",schoolReopenDate:"",schoolName:"",headTeacherRemark:"",termEndDate:"",vacationDate:"",nextTermBegins:"",termTransitionProcessed:!1}),[ts,as]=Z.useState(null),[Xe,Vt]=Z.useState({A:0,B:0,C:0,D:0,F:0}),[Kt,Mt]=Z.useState([]),[mt,Dt]=Z.useState({A:[],B:[],C:[],D:[],F:[]}),[Ns,$t]=Z.useState(null),Wt=Z.useMemo(()=>{const Ee=Z5(Ct.vacationDate||""),Je=Z5(Ct.nextTermBegins||"");if(!Ee||!Je)return null;const xt=new Date(Ee);xt.setDate(xt.getDate()+1),xt.setHours(0,0,0,0);const _t=new Date;return _t.setHours(0,0,0,0),_t<xt||_t>=Je?null:{vacationDate:Ee,nextTermBegins:Je}},[Ct.vacationDate,Ct.nextTermBegins]),lt=Ee=>{if(!Ee)return null;const Je=Ee instanceof Date?Ee:new Date(typeof(Ee==null?void 0:Ee.toDate)=="function"?Ee.toDate():Ee);return Number.isNaN(Je.getTime())?null:(typeof Ee=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(Ee)&&Je.setHours(23,59,59,999),Je)},Ot=Ee=>Ee==="termly"?4:Ee==="yearly"?12:1,De=()=>{var Gs,Lt;const Ee=(e==null?void 0:e.plan)||"monthly";if(Ee==="free")return null;const Je=lt(e==null?void 0:e.planEndsAt);if(Je)return Je;const xt=((Gs=e==null?void 0:e.billing)==null?void 0:Gs.lastPaymentAt)||null,_t=(e==null?void 0:e.createdAt)||((Lt=e==null?void 0:e.billing)==null?void 0:Lt.createdAt)||null,fs=Js=>{if(!Js)return null;const Bs=Js instanceof Date?Js:new Date(typeof(Js==null?void 0:Js.toDate)=="function"?Js.toDate():Js);return Number.isNaN(Bs.getTime())?null:Bs};let ms=fs(xt)||fs(_t);if(!ms)return null;xt&&(ms=new Date(ms),ms.setDate(1),ms.setHours(0,0,0,0));const zs=new Date(ms);return zs.setMonth(zs.getMonth()+Ot(Ee)),zs},dt=Z.useMemo(()=>{if((e==null?void 0:e.plan)==="free")return null;const Ee=De();if(!Ee)return null;const Je=new Date(Se);if(Je>=Ee)return null;const xt=Math.max(0,Ee.getTime()-Je.getTime()),_t=Math.floor(xt/(1440*60*1e3)),fs=Math.floor(xt/(3600*1e3)%24),ms=Math.floor(xt/(60*1e3)%60),zs=Math.floor(xt/1e3%60);return{planEndsAt:Ee,days:_t,hours:fs,minutes:ms,seconds:zs}},[e==null?void 0:e.planEndsAt,Se,e==null?void 0:e.plan]),at=Z.useMemo(()=>{if((e==null?void 0:e.plan)==="free")return null;const Ee=De();if(!Ee)return null;const Je=10080*60*1e3,xt=new Date(Ee.getTime()+Je),_t=new Date(Se);if(_t<Ee||_t>=xt)return null;const fs=Math.max(0,xt.getTime()-_t.getTime()),ms=Math.floor(fs/(1440*60*1e3)),zs=Math.floor(fs/(3600*1e3)%24),Gs=Math.floor(fs/(60*1e3)%60),Lt=Math.floor(fs/1e3%60);return{planEndsAt:Ee,graceEndsAt:xt,days:ms,hours:zs,minutes:Gs,seconds:Lt}},[e==null?void 0:e.planEndsAt,Se,e==null?void 0:e.plan]),[Et,Xt]=Z.useState({}),[vt,it]=Z.useState([]),[Rt,qt]=Z.useState({}),[cs,Xs]=Z.useState({}),[Ls,Yt]=Z.useState(null),[hn,Tr]=Z.useState(null),[dr,hr]=Z.useState(null),[Zt,mn]=Z.useState({}),pn=Z.useMemo(()=>n?`admin_dashboard_summary_${n}`:"",[n]),Nn=Z.useMemo(()=>n?`admin_dashboard_heavy_${n}`:"",[n]),Fs=Z.useMemo(()=>{if(!Nn)return null;const Ee=localStorage.getItem(Nn);if(!Ee)return null;try{return JSON.parse(Ee)}catch(Je){return console.warn("Failed to parse cached dashboard data",Je),localStorage.removeItem(Nn),null}},[Nn]);Z.useLayoutEffect(()=>{var ms,zs,Gs;if(!Fs)return;const Ee=new Date,Je=`${Ee.getFullYear()}-${String(Ee.getMonth()+1).padStart(2,"0")}-${String(Ee.getDate()).padStart(2,"0")}`;if(Fs.attendanceDate&&Fs.attendanceDate!==Je){localStorage.removeItem(Nn),P([]),G([]),ue([]);return}o(Fs.stats),m(Fs.stats),h(Fs.notices),f(Fs.recentStudents);const xt=(Fs.teacherAttendance||[]).filter(Lt=>Lt.date===Je);P(xt);const fs=(Fs.pendingTeacherAttendance||[]).filter(Lt=>Lt.date===Je&&Lt.approvalStatus==="pending");if(G(fs),ue(Fs.teacherTermStats),X(Fs.missedAttendanceAlerts),re(Fs.missedStudentAttendanceAlerts),Vt(Fs.gradeDistribution),Mt(Fs.topStudents),Dt(Fs.gradeBuckets),Jt(Lt=>({...Lt,...Fs.schoolConfig})),Xt(Fs.heatmapData),it(Fs.comparativeData),qt(Fs.gradeDistributionByClass),Xs(Fs.sparklines),J(new Date(Fs.lastUpdated)),I(!0),((ms=Fs.stats)==null?void 0:ms.students)!==void 0&&Fe(Fs.stats.students),(Gs=(zs=Fs.stats)==null?void 0:zs.classAttendance)!=null&&Gs.length){const Lt=Fs.stats.classAttendance.map(Bs=>Bs.percentage||0),Js=Lt.length>0?Math.round(Lt.reduce((Bs,Zs)=>Bs+Zs,0)/Lt.length):0;Ze(Js)}if(Fs.gradeDistribution){const Lt=Object.values(Fs.gradeDistribution).reduce((Js,Bs)=>Js+Bs,0);if(Lt>0){const Js={A:4,B:3,C:2,D:1,F:0},Zs=Object.entries(Fs.gradeDistribution).reduce((nr,[wr,ta])=>nr+(Js[wr]??0)*(ta??0),0)/Lt;me(Math.round(Zs/4*100))}}},[Fs]);const En=Z.useCallback(async Ee=>{if(n){Ee!=null&&Ee.background||F(!0),Q(null);try{const Je=await ot.getDashboardSummary(n),xt={students:Je.studentsCount,teachers:Je.teachersCount,classes:Es.length,maleStudents:0,femaleStudents:0,classAttendance:[]};o(_t=>({..._t,students:xt.students,teachers:xt.teachers,classes:xt.classes})),m(_t=>({..._t||xt,students:xt.students,teachers:xt.teachers,classes:xt.classes})),pn&&localStorage.setItem(pn,JSON.stringify({...xt,updatedAt:Date.now()}))}catch(Je){console.error("Summary fetch error:",Je)}finally{Ee!=null&&Ee.background||F(!1)}}},[n,pn]),An=Z.useCallback(async Ee=>{var Je,xt;if(n&&!(ce.current&&!(Ee!=null&&Ee.force))){ce.current=!0,Ee!=null&&Ee.background||O(!0),Q(null);try{const _t=new Date,fs=`${_t.getFullYear()}-${String(_t.getMonth()+1).padStart(2,"0")}-${String(_t.getDate()).padStart(2,"0")}`,[ms,zs,Gs,Lt,Js,Bs,Zs,nr]=await Promise.all([ot.getDashboardStats(n),ot.getStudents(n),ot.getNotices(n),ot.getSchoolConfig(n),ot.getUsers(n),ot.getAllApprovedTeacherAttendance(n,fs),ot.getTeacherAttendancePendingByDate(n,fs),ot.getAllTeacherAttendanceRecords(n)]),wr=[],ta=new Date,wa=Lt.schoolReopenDate?new Date(Lt.schoolReopenDate+"T00:00:00"):null,Qr=!wa||ta>=wa,Gn=Lt.vacationDate?new Date(Lt.vacationDate+"T00:00:00"):null;Gn&&Gn.setHours(0,0,0,0);const fa=Lt.nextTermBegins?new Date(Lt.nextTermBegins+"T00:00:00"):null;ta.setHours(0,0,0,0);const _i=Gn&&fa&&ta>=Gn&&ta<fa,ja=5,Fi=new Set([...nr.filter(Ht=>Ht.isHoliday).map(Ht=>Ht.date),...(Lt.holidayDates||[]).map(Ht=>Ht.date)]);if(Qr&&!_i&&nr.length>0){const Ht=ks=>{if(!ks)return null;let ss=[];if(ks.includes("-")){if(ss=ks.split("-"),ss.length===3)return new Date(parseInt(ss[0]),parseInt(ss[1])-1,parseInt(ss[2]))}else if(ks.includes("/")&&(ss=ks.split("/"),ss.length===3))return new Date(parseInt(ss[2]),parseInt(ss[0])-1,parseInt(ss[1]));return null},bs=Ht(Lt.schoolReopenDate),cn=Ht(Lt.vacationDate);let In=new Date;for(let ks=0;ks<ja;ks++){let ss=new Date(In),rr=ss.getDay();do{ss.setDate(ss.getDate()-1),rr=ss.getDay();const Te=cn&&ss.toDateString()===cn.toDateString();if(!(rr===0||rr===6||Te))break}while(!0);const Or=`${ss.getFullYear()}-${String(ss.getMonth()+1).padStart(2,"0")}-${String(ss.getDate()).padStart(2,"0")}`,Ca=ss.getTime(),k=bs?bs.getTime():0,Ae=cn&&fa&&ss>=cn&&ss<fa;if(Ca>=k&&k>0&&!Ae&&!Fi.has(Or))for(const Te of Js.filter(Ue=>Ue.role===xn.TEACHER)){const Ue=await ot.getTeacherAttendance(n,Te.id,Or);(!Ue||Ue.isHoliday)&&wr.push({teacherId:Te.id,teacherName:Te.fullName,date:Or,classes:((Je=Te.assignedClassIds)==null?void 0:Je.map(Me=>{var ht;return(ht=Es.find(St=>St.id===Me))==null?void 0:ht.name}).join(", "))||"Not Assigned"})}else break;In=ss}}const Ts=[];if(Qr&&!_i){const Ht=ks=>{if(!ks)return null;let ss=[];if(ks.includes("-")){if(ss=ks.split("-"),ss.length===3)return new Date(parseInt(ss[0]),parseInt(ss[1])-1,parseInt(ss[2]))}else if(ks.includes("/")&&(ss=ks.split("/"),ss.length===3))return new Date(parseInt(ss[2]),parseInt(ss[0])-1,parseInt(ss[1]));return null},bs=Ht(Lt.schoolReopenDate),cn=Ht(Lt.vacationDate);let In=new Date;for(let ks=0;ks<ja;ks++){let ss=new Date(In),rr=ss.getDay();do{ss.setDate(ss.getDate()-1),rr=ss.getDay();const Me=cn&&ss.toDateString()===cn.toDateString();if(!(rr===0||rr===6||Me))break}while(!0);const Or=`${ss.getFullYear()}-${String(ss.getMonth()+1).padStart(2,"0")}-${String(ss.getDate()).padStart(2,"0")}`,Ca=ss.getTime(),k=bs?bs.getTime():0,Ae=cn&&fa&&ss>=cn&&ss<fa,Ue=(await ot.getAttendanceByDate(n,Or)).some(Me=>Me.isHoliday)||(Lt.holidayDates||[]).some(Me=>Me.date===Or);if(Ca>=k&&k>0&&!Ae&&!Ue)for(const Me of Js.filter(ht=>ht.role===xn.TEACHER&&ht.assignedClassIds&&ht.assignedClassIds.length>0)){const ht=Me.assignedClassIds[0],St=((xt=Es.find(xs=>xs.id===ht))==null?void 0:xt.name)||"Unknown Class",ds=await ot.getAttendance(n,ht,Or);(!ds||ds.isHoliday)&&Ts.push({teacherId:Me.id,teacherName:Me.fullName,date:Or,className:St})}else break;In=ss}}const ll=(Ht,bs)=>{if(!Ht||!bs)return 0;const cn=new Date(Ht+"T00:00:00"),In=new Date(bs+"T00:00:00");let ks=0;const ss=new Date(cn);for(;ss<=In;){const rr=ss.getDay();rr!==0&&rr!==6&&ks++,ss.setDate(ss.getDate()+1)}return ks},Bl=new Set([...nr.filter(Ht=>Ht.isHoliday).map(Ht=>Ht.date),...(Lt.holidayDates||[]).map(Ht=>Ht.date)]),Do=ll(Lt.schoolReopenDate,Lt.vacationDate),Ba=Math.max(0,Do-Bl.size),sa=Js.filter(Ht=>Ht.role===xn.TEACHER).map(Ht=>{var ss;const cn=nr.filter(rr=>rr.teacherId===Ht.id&&rr.date>=(Lt.schoolReopenDate||"")&&rr.date<=(Lt.vacationDate||"9999-99-99")&&!rr.isHoliday&&rr.approvalStatus!=="pending").filter(rr=>rr.status==="present").length,In=Ba,ks=In>0?Math.round(cn/In*100):0;return{id:Ht.id,name:Ht.fullName,classes:((ss=Ht.assignedClassIds)==null?void 0:ss.map(rr=>{var Or;return(Or=Es.find(Ca=>Ca.id===rr))==null?void 0:Or.name}).join(", "))||"Not Assigned",presentDays:cn,totalDays:In,attendanceRate:ks}}),Pa=Bs.map(Ht=>{var cn;const bs=Js.find(In=>In.id===Ht.teacherId);return{...Ht,teacherName:(bs==null?void 0:bs.fullName)||"Unknown",teacherClasses:((cn=bs==null?void 0:bs.assignedClassIds)==null?void 0:cn.map(In=>{var ks;return(ks=Es.find(ss=>ss.id===In))==null?void 0:ks.name}).join(", "))||"Not Assigned"}}),oi=(Zs.length>0?Zs:nr.filter(Ht=>Ht.date===fs&&Ht.approvalStatus==="pending")).map(Ht=>{var cn;const bs=Js.find(In=>In.id===Ht.teacherId);return{...Ht,teacherName:(bs==null?void 0:bs.fullName)||"Unknown",teacherClasses:((cn=bs==null?void 0:bs.assignedClassIds)==null?void 0:cn.map(In=>{var ks;return(ks=Es.find(ss=>ss.id===In))==null?void 0:ks.name}).join(", "))||"Not Assigned"}}),Ro=nr.filter(Ht=>Ht.date===fs&&Ht.approvalStatus==="approved").map(Ht=>{var cn;const bs=Js.find(In=>In.id===Ht.teacherId);return{...Ht,teacherName:(bs==null?void 0:bs.fullName)||"Unknown",teacherClasses:((cn=bs==null?void 0:bs.assignedClassIds)==null?void 0:cn.map(In=>{var ks;return(ks=Es.find(ss=>ss.id===In))==null?void 0:ks.name}).join(", "))||"Not Assigned"}});if(Jt(Ht=>({...Ht,academicYear:Lt.academicYear,currentTerm:Lt.currentTerm,schoolReopenDate:Lt.schoolReopenDate||""})),Lt.nextTermBegins&&new Date>=new Date(Lt.nextTermBegins+"T00:00:00")&&!Lt.termTransitionProcessed)try{const{nextTerm:Ht,nextAcademicYear:bs}=f7(Lt.currentTerm,Lt.academicYear),cn={...Lt,currentTerm:`Term ${Ht}`,academicYear:bs,schoolReopenDate:Lt.nextTermBegins||"",vacationDate:"",nextTermBegins:"",termTransitionProcessed:!0};await ot.resetForNewTerm(cn),Pt("Term transition completed automatically.",{type:"success"}),setTimeout(()=>An({background:!0}),1e3)}catch(Ht){console.error("Auto term transition failed:",Ht),Pt("Auto term transition failed. Please check settings.",{type:"error"})}let pi=Xi;if(Lt.currentTerm){const Ht=Lt.currentTerm.match(/\d+/);Ht&&(pi=parseInt(Ht[0]))}const Sl=await ot.getAllAssessments(n),Sa={},qi=new Map(zs.map(Ht=>[Ht.id,Ht]));Sl.some(Ht=>{const bs=Ht.total??_A(Ht);return Ht.term===pi&&bs>0})&&Sl.forEach(Ht=>{const bs=Ht.total??_A(Ht);if(Ht.term===pi&&bs>0&&qi.has(Ht.studentId)){if(!Sa[Ht.studentId]){const cn=qi.get(Ht.studentId);Sa[Ht.studentId]={total:0,count:0,name:cn.name,classId:cn.classId}}Sa[Ht.studentId].total+=bs,Sa[Ht.studentId].count+=1}});const jr={A:0,B:0,C:0,D:0,F:0},xi=[],na={A:[],B:[],C:[],D:[],F:[]};Object.entries(Sa).forEach(([Ht,bs])=>{var ss;const cn=bs.count>0?bs.total/bs.count:0,{grade:In}=pm(cn);jr[In]!==void 0&&jr[In]++;const ks={id:Ht,name:bs.name,class:((ss=Es.find(rr=>rr.id===bs.classId))==null?void 0:ss.name)||"N/A",avg:parseFloat(cn.toFixed(1))};xi.push(ks),na[In]&&na[In].push(ks)}),xi.sort((Ht,bs)=>bs.avg-Ht.avg);const Yn={students:ms.studentsCount,teachers:ms.teachersCount,classes:Es.length,maleStudents:ms.gender.male,femaleStudents:ms.gender.female,classAttendance:ms.classAttendance};o(Yn),m(Yn),pn&&localStorage.setItem(pn,JSON.stringify({...Yn,updatedAt:Date.now()})),h(Gs),f(zs.slice(-5).reverse());const po=[...Ro,...Pa].filter(Ht=>Ht.date===fs).reduce((Ht,bs)=>(Ht.find(cn=>cn.id===bs.id)||Ht.push(bs),Ht),[]);P(po);const ka=oi.filter(Ht=>Ht.date===fs&&Ht.approvalStatus==="pending");if(G(ka),ue(sa),X(wr),re(Ts),Vt(jr),Mt(xi.slice(0,5)),Dt(na),J(new Date),I(!0),Nn){const Ht={stats:Yn,notices:Gs,recentStudents:zs.slice(-5).reverse(),teacherAttendance:po,pendingTeacherAttendance:ka,teacherTermStats:sa,missedAttendanceAlerts:wr,missedStudentAttendanceAlerts:Ts,gradeDistribution:jr,topStudents:xi.slice(0,5),gradeBuckets:na,schoolConfig:{academicYear:Lt.academicYear,currentTerm:Lt.currentTerm,schoolReopenDate:Lt.schoolReopenDate||"",schoolName:Lt.schoolName,headTeacherRemark:Lt.headTeacherRemark,termEndDate:Lt.termEndDate,vacationDate:Lt.vacationDate,nextTermBegins:Lt.nextTermBegins,termTransitionProcessed:Lt.termTransitionProcessed},heatmapData:Et,comparativeData:vt,gradeDistributionByClass:Rt,sparklines:cs,lastUpdated:Date.now(),attendanceDate:fs};localStorage.setItem(Nn,JSON.stringify(Ht))}}catch(_t){console.error("Dashboard fetch error:",_t),Q("Failed to load dashboard data. Please check your internet connection or database permissions.")}finally{ce.current=!1,Ee!=null&&Ee.background||O(!1)}}},[n,pn]),Ir=Z.useCallback(()=>{if(!n)return;const Ee=Date.now(),Je=Ee-ve.current;if(Je>=Ft){ve.current=Ee,An({background:!0}).catch(_t=>console.error("Error refreshing attendance widgets",_t));return}if(le.current)return;const xt=Math.max(Ft-Je,0);le.current=window.setTimeout(()=>{le.current=null,ve.current=Date.now(),An({background:!0}).catch(_t=>console.error("Error refreshing attendance widgets",_t))},xt)},[An,n]);Z.useEffect(()=>{if(!Fs||!Nn)return;const Ee=Fs.schoolConfig;if(!Ee||!!!(Ct.currentTerm||Ct.academicYear||Ct.schoolReopenDate))return;const xt=(Ee.currentTerm||"")!==(Ct.currentTerm||"")||(Ee.academicYear||"")!==(Ct.academicYear||""),_t=(Ee.schoolReopenDate||"")!==(Ct.schoolReopenDate||"");(xt||_t)&&(localStorage.removeItem(Nn),P([]),G([]),ue([]),X([]),re([]),An({background:!0}).catch(fs=>console.error("Error refreshing after term reset",fs)))},[Fs,Nn,Ct.currentTerm,Ct.academicYear,Ct.schoolReopenDate,An]);const ya=async Ee=>{if(!(!n||!(s!=null&&s.id)))try{await ot.approveTeacherAttendance(n,Ee.id,s.id),Pt(`Approved attendance for ${Ee.teacherName}.`,{type:"success"}),G(Je=>Je.filter(xt=>xt.id!==Ee.id)),P(Je=>[...Je,{...Ee,approvalStatus:"approved",approvedBy:s.id}])}catch(Je){console.error("Failed to approve attendance",Je),Pt("Failed to approve attendance.",{type:"error"})}},ai=async Ee=>{if(!(!n||!(s!=null&&s.id)))try{await ot.rejectTeacherAttendance(n,Ee.id,s.id),Pt(`Rejected attendance for ${Ee.teacherName}.`,{type:"success"}),G(Je=>Je.filter(xt=>xt.id!==Ee.id))}catch(Je){console.error("Failed to reject attendance",Je),Pt("Failed to reject attendance.",{type:"error"})}},ii=Z.useCallback(async()=>{n&&(C(!0),await Promise.all([En({background:!0}),An({background:!0})]),C(!1))},[En,An,n]),yn=async()=>{try{if(!n)return;const Ee=await ot.getDashboardStats(n),Je=(Ee.classAttendance||[]).map(_t=>_t.percentage||0),xt=Je.length>0?Math.round(Je.reduce((_t,fs)=>_t+fs,0)/Je.length):0;o(_t=>({..._t,students:Ee.studentsCount,teachers:Ee.teachersCount,classes:Es.length,maleStudents:Ee.gender.male,femaleStudents:Ee.gender.female,classAttendance:Ee.classAttendance})),pn&&localStorage.setItem(pn,JSON.stringify({students:Ee.studentsCount,teachers:Ee.teachersCount,classes:Es.length,maleStudents:Ee.gender.male,femaleStudents:Ee.gender.female,classAttendance:Ee.classAttendance,updatedAt:Date.now()})),J(new Date),I(!0),ea(Fe,Ee.studentsCount,600),ea(Ze,xt,600);try{const fs=(await ot.getAllAssessments(n)).slice(-300),ms={};fs.forEach(Lt=>{ms[Lt.studentId]||(ms[Lt.studentId]={total:0,count:0});const Js=Lt.total??_A(Lt);ms[Lt.studentId].total+=Js,ms[Lt.studentId].count+=1});const zs=Object.values(ms).map(Lt=>Lt.count>0?Lt.total/Lt.count:0),Gs=zs.length>0?Math.round(zs.reduce((Lt,Js)=>Lt+Js,0)/zs.length):0;ea(me,Gs,600)}catch(_t){console.error("Failed to compute grade avg",_t)}Fr().catch(_t=>console.error(_t)),_r().catch(_t=>console.error("Failed to compute visuals",_t))}catch(Ee){console.error("Failed to fetch live stats",Ee)}},_r=async()=>{try{if(!n)return;const Ee=await ot.getAllAssessments(n),Je=await ot.getStudents(n),xt={},_t={},fs={},ms={},zs=new Map(Je.map(Bs=>[Bs.id,Bs.classId]));Ee.forEach(Bs=>{const Zs=Bs.classId||zs.get(Bs.studentId)||"unknown",nr=Bs.subject||"General",wr=Bs.total??_A(Bs);xt[Zs]||(xt[Zs]={}),xt[Zs][nr]||(xt[Zs][nr]={total:0,count:0}),xt[Zs][nr].total+=wr,xt[Zs][nr].count+=1,_t[Zs]||(_t[Zs]={total:0,count:0}),_t[Zs].total+=wr,_t[Zs].count+=1;const ta=wr,wa=ta>=80?"A":ta>=65?"B":ta>=50?"C":ta>=35?"D":"F";fs[Zs]||(fs[Zs]={A:0,B:0,C:0,D:0,F:0}),fs[Zs][wa]=(fs[Zs][wa]||0)+1;const Qr=Bs.date?new Date(Bs.date).getTime():Bs.createdAt?new Date(Bs.createdAt).getTime():Date.now();ms[Zs]||(ms[Zs]=[]),ms[Zs].push({date:Qr,avg:wr})});const Gs={};Object.entries(xt).forEach(([Bs,Zs])=>{Gs[Bs]={},Object.entries(Zs).forEach(([nr,wr])=>{Gs[Bs][nr]=Math.round(wr.total/Math.max(1,wr.count))})});const Lt=Object.entries(_t).map(([Bs,Zs])=>{var nr;return{className:((nr=Es.find(wr=>wr.id===Bs))==null?void 0:nr.name)||Bs,avg:Math.round(Zs.total/Math.max(1,Zs.count))}}).sort((Bs,Zs)=>Zs.avg-Bs.avg),Js={};Object.entries(ms).forEach(([Bs,Zs])=>{const nr=Zs.sort((Qr,Gn)=>Qr.date-Gn.date),wr=8,ta=Math.max(1,Math.ceil(nr.length/wr)),wa=[];for(let Qr=0;Qr<nr.length;Qr+=ta){const Gn=nr.slice(Qr,Qr+ta),fa=Math.round(Gn.reduce((_i,ja)=>_i+ja.avg,0)/Gn.length);wa.push(fa)}for(;wa.length<wr;)wa.unshift(wa[0]??0);Js[Bs]=wa.slice(-wr)}),Xt(Gs),it(Lt),qt(fs),Xs(Js)}catch(Ee){console.error("Error fetching visualizations",Ee)}},ea=(Ee,Je,xt=500)=>{const _t=Date.now(),fs=0,ms=()=>{const zs=Math.min(1,(Date.now()-_t)/xt),Gs=Math.round(fs+(Je-fs)*zs);Ee(Gs),zs<1&&requestAnimationFrame(ms)};requestAnimationFrame(ms)},xr=async(Ee,Je)=>{const xt=[];for(const _t of Es)try{if(!n)return null;const ms=(await ot.getClassAttendance(n,_t.id)).filter(Gs=>{const Lt=Gs.date.split("-");if(Lt.length!==3)return!1;const Js=new Date(parseInt(Lt[0]),parseInt(Lt[1])-1,parseInt(Lt[2]));return Js>=Ee&&Js<=Je&&!Gs.isHoliday}),zs=(await ot.getStudents(n,_t.id)).length||0;if(ms.length>0&&zs>0){const Gs=ms.length*zs,Lt=ms.reduce((Js,Bs)=>{var Zs;return Js+(((Zs=Bs.presentStudentIds)==null?void 0:Zs.length)||0)},0);xt.push(Math.round(Lt/Gs*100))}}catch(fs){console.error("Error computing class attendance for",_t.id,fs)}return xt.length===0?null:Math.round(xt.reduce((_t,fs)=>_t+fs,0)/xt.length)},Fr=async()=>{const Ee=ts||new Date,{monday:Je}=Ur(Ee),xt=Je,_t=new Date(Je);_t.setDate(Je.getDate()+4);const fs=new Date(Je);fs.setDate(Je.getDate()-7);const ms=new Date(fs);ms.setDate(fs.getDate()+4);const zs=await xr(xt,_t),Gs=await xr(fs,ms);It(zs),ze(Gs)};Z.useEffect(()=>{if(!(t||!n)){if(g(!1),pn){const Ee=localStorage.getItem(pn);if(Ee)try{const Je=JSON.parse(Ee);o(xt=>({...xt,students:Je.students??xt.students,teachers:Je.teachers??xt.teachers,classes:Je.classes??xt.classes,maleStudents:Je.maleStudents??xt.maleStudents,femaleStudents:Je.femaleStudents??xt.femaleStudents,classAttendance:Je.classAttendance??xt.classAttendance})),m(Je)}catch(Je){console.warn("Failed to parse cached dashboard summary",Je),localStorage.removeItem(pn)}}En().catch(Ee=>console.error(Ee)),Fs?An({background:!0}).catch(Ee=>console.error(Ee)):An().catch(Ee=>console.error(Ee))}},[t,n,En,An,pn,Fs]),Z.useEffect(()=>{if(!n)return;const Ee=Ks(Rs(wt,"attendance"),rs("schoolId","==",n)),Je=Ks(Rs(wt,"assessments"),rs("schoolId","==",n)),xt=Ks(Rs(wt,"teacher_attendance"),rs("schoolId","==",n)),_t=Os(wt,"settings",n),fs=_d(Ee,()=>{yn().catch(Lt=>console.error("Error refreshing stats on attendance change",Lt))}),ms=_d(Je,()=>{yn().catch(Lt=>console.error("Error refreshing stats on assessments change",Lt))}),zs=_d(xt,()=>{yn().catch(Lt=>console.error("Error refreshing stats on teacher attendance change",Lt)),Ir()}),Gs=_d(_t,Lt=>{if(Lt.exists()){const Js=Lt.data();Jt(Bs=>({...Bs,academicYear:Js.academicYear||Io,currentTerm:Js.currentTerm||`Term ${Xi}`,schoolReopenDate:Js.schoolReopenDate||""}))}});return()=>{fs(),ms(),Gs(),zs()}},[n]),Z.useEffect(()=>{if(!pe){ie.current&&(clearInterval(ie.current),ie.current=null);return}return yn(),ie.current=window.setInterval(()=>{document.visibilityState==="visible"&&yn()},Qt),()=>{ie.current&&(clearInterval(ie.current),ie.current=null)}},[pe]),Z.useEffect(()=>()=>{le.current&&(clearTimeout(le.current),le.current=null)},[]),Z.useEffect(()=>{if(!M)return;ge(Date.now());const Ee=window.setInterval(()=>ge(Date.now()),1e3);return()=>clearInterval(Ee)},[M]),Z.useEffect(()=>{if(Ct.schoolReopenDate){const Ee=Ct.schoolReopenDate.split("-"),Je=Ee.length===3?new Date(parseInt(Ee[0]),parseInt(Ee[1])-1,parseInt(Ee[2])):new Date(Ct.schoolReopenDate);if(Je>new Date){as(Ur(Je).monday);return}}as(Ur(new Date).monday)},[Ct.schoolReopenDate]),Z.useEffect(()=>{const Ee=()=>R(null);return U&&window.addEventListener("click",Ee),()=>window.removeEventListener("click",Ee)},[U]);const da=(Ee,Je)=>{Ee.stopPropagation(),R(U===Je?null:Je)},La=async Ee=>{R(null),Yt(Ee),Tr(null);try{const Je=await ot.getStudentPerformance(n,Ee.id,Ee.classId);Tr(Je)}catch(Je){console.error(Je)}},zn=Ee=>{R(null),hr(Ee),mn({...Ee})},Qa=async Ee=>{if(Ee.preventDefault(),!(!dr||!Zt.name))try{const Je={...dr,...Zt};await ot.updateStudent(Je),ii(),hr(null)}catch{Pt("Failed to update student",{type:"error"})}},ha=async Ee=>{$t(null);try{if(!n)return;const xt=(await ot.getStudents(n)).find(_t=>_t.id===Ee);xt?La(xt):Pt("Student not found",{type:"error"})}catch(Je){console.error(Je),Pt("Failed to fetch student",{type:"error"})}},Ur=Ee=>{const Je=new Date(Ee),xt=Je.getDay(),_t=new Date(Je);_t.setDate(Je.getDate()-(xt===0?6:xt-1));const fs=new Date(_t);return fs.setDate(_t.getDate()+4),{monday:_t,friday:fs}},Ti=()=>{if(ts===null)return;const Ee=new Date(ts);if(Ee.setDate(Ee.getDate()-7),Ct.schoolReopenDate){const Je=Ct.schoolReopenDate.split("-"),xt=Je.length===3?new Date(parseInt(Je[0]),parseInt(Je[1])-1,parseInt(Je[2])):new Date(Ct.schoolReopenDate),_t=Ur(xt).monday;if(Ee<_t){Pt("Cannot view weeks before school re-opens",{type:"info"});return}}as(Ee)},Ji=()=>{if(ts===null)return;const Ee=new Date(ts);Ee.setDate(Ee.getDate()+7),as(Ee)},wl=()=>{if(Ct.schoolReopenDate){const Ee=Ct.schoolReopenDate.split("-"),Je=Ee.length===3?new Date(parseInt(Ee[0]),parseInt(Ee[1])-1,parseInt(Ee[2])):new Date(Ct.schoolReopenDate);if(Je>new Date){as(Ur(Je).monday);return}}as(Ur(new Date).monday)},jl=({title:Ee,value:Je,subtext:xt,icon:_t,colorClass:fs,iconColorClass:ms})=>i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between relative overflow-hidden group hover:shadow-md transition-shadow min-h-[140px]",children:[i.jsx("div",{className:"flex justify-between items-start z-10",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 text-sm font-semibold uppercase tracking-wider",children:Ee}),i.jsx("h3",{className:"text-3xl font-bold text-slate-800 mt-2",children:Je}),xt&&i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:xt})]})}),i.jsx("div",{className:`absolute -right-4 -bottom-4 opacity-10 pointer-events-none transform group-hover:scale-110 transition-transform ${ms}`,children:i.jsx(_t,{size:100})})]}),Ao=({title:Ee,value:Je,suffix:xt,delta:_t,deltaPositive:fs})=>i.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-400 uppercase font-semibold",children:Ee}),i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsx("span",{className:"text-2xl font-bold text-slate-800",children:Je}),xt&&i.jsx("span",{className:"text-sm text-slate-500",children:xt})]})]}),i.jsx("div",{className:`text-sm font-semibold px-2 py-1 rounded ${fs?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"}`,children:_t??"--"})]})}),ba=()=>i.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(Ao,{title:"Students Enrolled",value:Be,suffix:"total",delta:null,deltaPositive:!0}),i.jsx(Ao,{title:"Attendance Now",value:`${Qe}%`,suffix:null,delta:nt!==null&&ut!==null?`${nt-ut}% vs last week`:"No comparison",deltaPositive:nt!==null&&ut!==null?nt-ut>=0:!0}),i.jsx(Ao,{title:"Avg Grade",value:`${Pe}%`,suffix:null,delta:null,deltaPositive:!0})]})}),Oa=()=>i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-2xl shadow-md border border-amber-200 flex flex-col justify-between min-h-[140px] overflow-hidden",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 min-w-0",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase text-amber-700",children:"Students Enrolled"}),i.jsx("h3",{className:"text-3xl sm:text-4xl font-extrabold text-amber-900 mt-2",children:r.students}),i.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:[r.classes," classes  ",r.teachers," teachers"]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm hidden sm:flex",children:i.jsx(mm,{className:"text-amber-600",size:28})})})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Female"}),i.jsx("div",{className:"text-lg font-bold text-[#0B4A82]",children:r.femaleStudents})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Male"}),i.jsx("div",{className:"text-lg font-bold text-amber-600",children:r.maleStudents})]})]}),i.jsx("div",{className:"hidden sm:flex items-end gap-2 flex-1 max-w-[55%] overflow-hidden",children:r.classAttendance.slice(0,8).map(Ee=>i.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[i.jsx("div",{className:"w-full rounded-sm",title:`${Ee.className}: ${Ee.percentage}%`,style:{background:Ee.percentage>=80?"#16a34a":Ee.percentage<50?"#dc2626":"#f59e0b",height:`${Math.max(6,Math.round(Ee.percentage/2))}px`}}),i.jsx("div",{className:"text-[10px] text-slate-500 mt-1 truncate text-center",children:Ee.className.replace("Primary ","P").replace("Class ","P").replace("Nursery ","N")})]},Ee.id))})]}),i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Updated"," ",M?`${Math.floor((Se-M.getTime())/1e3)}s ago`:""]}),i.jsx("div",{className:"text-xs text-slate-400 hidden sm:block",children:"Responsive  Clean  Insightful"})]})]}),Yr=()=>{const Ee=r.teachers>0?Math.round(r.students/r.teachers):"";return i.jsxs("div",{className:"bg-gradient-to-br from-sky-50 to-sky-100 p-6 rounded-2xl shadow-md border border-sky-200 flex flex-col justify-between min-h-[140px]",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase text-sky-700",children:"Teachers & Staff"}),i.jsx("h3",{className:"text-3xl sm:text-4xl font-extrabold text-sky-900 mt-2",children:r.teachers}),i.jsxs("p",{className:"text-sm text-sky-700 mt-1",children:["Teaching across ",r.classes," classes"]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm hidden sm:flex",children:i.jsx(xl,{className:"text-sky-600",size:28})})})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Avg Students / Teacher"}),i.jsx("div",{className:"text-lg font-bold text-sky-800",children:Ee})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Classes"}),i.jsx("div",{className:"text-lg font-bold text-sky-800",children:r.classes})]})]}),i.jsx("div",{className:"hidden sm:flex items-center gap-3",children:i.jsx(Ua,{to:"/admin/teachers",className:"text-xs bg-white px-3 py-1 rounded-md font-medium text-sky-700 shadow-sm hover:underline",children:"Manage Staff"})})]}),i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Updated"," ",M?`${Math.floor((Se-M.getTime())/1e3)}s ago`:""]}),i.jsx("div",{className:"text-xs text-slate-400 hidden sm:block",children:"Professional  Accessible  Responsive"})]})]})},Sn=()=>{const Ee=r.maleStudents+r.femaleStudents||1,Je=Math.round(r.maleStudents/Ee*100),xt=Math.round(r.femaleStudents/Ee*100);return i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-full flex flex-col justify-center items-center",children:[i.jsx("h3",{className:"font-bold text-slate-800 w-full mb-6",children:"Demographics"}),i.jsxs("div",{className:"relative w-48 h-48",children:[i.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-slate-50"}),i.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(#1160A8 0% ${xt}%, #f59e0b ${xt}% 100%)`,mask:"radial-gradient(transparent 60%, black 61%)",WebkitMask:"radial-gradient(transparent 60%, black 61%)"}}),i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[i.jsx("span",{className:"text-3xl font-bold text-slate-800",children:r.students}),i.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Total"})]})]}),i.jsxs("div",{className:"flex w-full justify-between px-6 mt-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Female"}),i.jsxs("p",{className:"text-xl font-bold text-[#0B4A82]",children:[xt,"%"]}),i.jsx("p",{className:"text-lg font-bold text-[#1160A8] mt-1",children:r.femaleStudents})]}),i.jsx("div",{className:"w-px bg-slate-100"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Male"}),i.jsxs("p",{className:"text-xl font-bold text-amber-500",children:[Je,"%"]}),i.jsx("p",{className:"text-lg font-bold text-amber-600 mt-1",children:r.maleStudents})]})]})]})},Ii=()=>{const Ee=Object.keys(Xe).reduce((ms,zs)=>ms+Xe[zs],0)||0,Je={A:4,B:3,C:2,D:1,F:0},xt=Object.entries(Xe).reduce((ms,[zs,Gs])=>{const Lt=Je[zs]??0;return ms+Lt*Gs},0),_t=Ee>0?xt/Ee:0,fs=_t>=3.5?"A":_t>=2.5?"B":_t>=1.5?"C":_t>=.5?"D":"F";return i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white p-4 sm:p-6 rounded-2xl shadow-md border border-slate-100 overflow-x-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-[#E6F0FA] rounded-xl",children:i.jsx(wx,{className:"w-6 h-6 text-[#0B4A82]"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800",children:"Academic Performance Rate"}),i.jsx("p",{className:"text-xs text-slate-500",children:Ct.currentTerm})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:ml-6 gap-4 sm:gap-6 sm:hidden",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Graded Students"}),i.jsx("p",{className:"text-lg sm:text-2xl font-bold text-slate-800",children:Ee})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Average Grade"}),i.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-amber-500",children:[fs," ",i.jsxs("span",{className:"text-xs sm:text-sm text-slate-500",children:["(",_t.toFixed(2),")"]})]})]})]}),i.jsxs("div",{className:"hidden sm:block ml-6",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Graded Students"}),i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:Ee})]}),i.jsxs("div",{className:"hidden sm:block ml-6",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Average Grade"}),i.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[fs," ",i.jsxs("span",{className:"text-sm text-slate-500",children:["(",_t.toFixed(2),")"]})]})]})]}),i.jsxs("button",{onClick:ii,disabled:N,className:"flex items-center px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Refresh performance data",children:[i.jsx(mg,{size:14,className:`mr-1 ${N?"animate-spin":""}`}),"Refresh"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"space-y-3",children:Object.entries(Xe).map(([ms,zs])=>{const Gs=Ee>0?Math.round(zs/Ee*100):0;let Lt="from-emerald-400 to-emerald-600";return ms==="B"&&(Lt="from-[#E6F0FA] to-[#1160A8]"),ms==="C"&&(Lt="from-amber-300 to-amber-500"),ms==="D"&&(Lt="from-orange-300 to-orange-500"),ms==="F"&&(Lt="from-red-400 to-red-600"),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 font-bold text-slate-700",children:ms}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"relative h-4 bg-slate-100 rounded-full overflow-hidden",children:i.jsx("div",{className:`absolute left-0 top-0 h-full rounded-full bg-gradient-to-r ${Lt} transition-all duration-1000`,style:{width:`${Gs}%`},title:`${zs} students  ${Gs}%`})}),i.jsxs("div",{className:"mt-2 flex justify-between text-xs text-slate-500",children:[i.jsxs("span",{children:[zs," ",zs===1?"student":"students"]}),i.jsxs("span",{className:"font-semibold text-slate-700",children:[Gs,"%"]})]})]}),i.jsx("div",{className:"ml-4",children:i.jsx("button",{onClick:()=>$t(ms),className:"text-xs text-[#0B4A82] hover:underline font-medium",children:"View"})})]},ms)})}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-emerald-400 to-emerald-600","aria-hidden":!0}),i.jsx("span",{className:"text-xs text-slate-600",children:"A  Excellent"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-[#E6F0FA] to-[#1160A8]","aria-hidden":!0}),i.jsx("span",{className:"text-xs text-slate-600",children:"B  Very Good"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-amber-300 to-amber-500","aria-hidden":!0}),i.jsx("span",{className:"text-xs text-slate-600",children:"C  Satisfactory"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-orange-300 to-orange-500","aria-hidden":!0}),i.jsx("span",{className:"text-xs text-slate-600",children:"D  Needs Support"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-sm block bg-gradient-to-r from-red-400 to-red-600","aria-hidden":!0}),i.jsx("span",{className:"text-xs text-slate-600",children:"F  Intervention Required"})]})]}),Ee===0&&i.jsxs("div",{className:"text-center text-slate-400 py-4 text-sm",children:["No academic data available for ",Ct.currentTerm,"."]}),i.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-emerald-50 to-[#E6F0FA] rounded-lg text-sm text-slate-700 border border-slate-100",children:[i.jsx("div",{className:"font-semibold text-slate-800 mb-1",children:"What this chart shows"}),i.jsx("div",{className:"text-sm",children:"Each bar represents the number of students who received that grade during the selected term. Percentages are calculated against the total number of graded students. Use the counts and percentages to identify strengths (high A/B) and areas for intervention (high D/F). Hover a bar to see the exact count."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[i.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[i.jsx($M,{className:"w-5 h-5 mr-2 text-amber-500"})," Top Performers"]}),i.jsx("div",{className:"space-y-4",children:Kt.length===0?i.jsx("p",{className:"text-sm text-slate-400 italic",children:"No data yet."}):Kt.map((ms,zs)=>i.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-2 last:border-0 last:pb-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${zs===0?"bg-amber-500":"bg-slate-300"}`,children:zs+1}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:ms.name}),i.jsx("p",{className:"text-xs text-slate-400",children:ms.class})]})]}),i.jsx("span",{className:"text-sm font-bold text-[#0B4A82]",children:ms.avg})]},zs))})]})]})},Wr=E||!b;return H?i.jsx(lr,{title:"Dashboard",children:i.jsxs("div",{className:"flex items-center justify-center h-96 flex-col p-8",children:[i.jsx(qy,{size:48,className:"text-red-400 mb-4"}),i.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"Unable to load dashboard"}),i.jsx("p",{className:"text-slate-500 text-center max-w-md mb-6",children:H}),i.jsxs("button",{onClick:ii,className:"flex items-center px-4 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900 transition-colors",children:[i.jsx(mg,{size:16,className:"mr-2"})," Retry"]})]})}):i.jsxs(lr,{title:"Dashboard",children:[i.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-800",children:["Welcome",s!=null&&s.fullName?`, ${s.fullName}`:""]}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Here is what's happening in your school today."}),i.jsx("div",{className:"mt-2 text-xs text-slate-500 flex items-center gap-2",children:N||L?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400 animate-pulse"}),"Refreshing data"]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400"}),"Data up to date"]})})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right mr-2 hidden sm:block",children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Academic Period"}),i.jsxs("p",{className:"text-sm font-bold text-[#0B4A82]",children:[Ct.currentTerm,"  ",Ct.academicYear]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(Ua,{to:"/admin/students",className:"flex items-center px-4 py-2 bg-[#0B4A82] text-white rounded-lg hover:bg-[#0B4A82] transition-colors shadow-sm text-sm font-medium",children:[i.jsx(A2,{size:16,className:"mr-2"}),"Add Student"]}),i.jsxs(Ua,{to:"/admin/teachers",className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors shadow-sm text-sm font-medium",children:[i.jsx(xl,{size:16,className:"mr-2"}),"Add Staff"]})]}),i.jsxs("div",{className:"ml-4 flex flex-col items-end text-right",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`w-3 h-3 rounded-full ${pe?"bg-emerald-500":"bg-slate-300"}`,"aria-hidden":!0}),i.jsx("button",{onClick:()=>ee(Ee=>!Ee),className:"text-xs text-slate-600 hover:underline",title:"Toggle live metrics polling",children:pe?"Live Metrics On":"Enable Live Metrics"})]}),i.jsx("div",{className:"text-xs text-slate-400 mt-1",children:M?`Updated ${Math.floor((Se-M.getTime())/1e3)}s ago`:"Not updated"})]})]})]}),Wt&&i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"rounded-2xl border border-sky-200 bg-gradient-to-r from-sky-50 via-white to-blue-50 p-6 shadow-sm",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-[#0B4A82] text-white",children:i.jsx(mo,{size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-sky-700",children:"School Vacation"}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-1",children:"Your school is currently on vacation"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:["School will reopen on"," ",i.jsx("span",{className:"font-semibold text-slate-800",children:Wt.nextTermBegins.toLocaleDateString()}),"."]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("div",{className:"px-4 py-2 rounded-full text-sm font-semibold bg-[#0B4A82] text-white",children:"Vacation mode"}),i.jsxs("div",{className:"px-4 py-2 rounded-2xl bg-white border border-slate-200 text-slate-700",children:[i.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Next term"}),i.jsx("div",{className:"text-sm font-bold",children:Wt.nextTermBegins.toLocaleDateString()})]})]})]})})}),dt&&i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-[#0B4A82] text-white",children:i.jsx(mo,{size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"Subscription Countdown"}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-1",children:"Renewal due soon"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:["Your subscription ends on"," ",i.jsx("span",{className:"font-semibold text-slate-800",children:dt.planEndsAt.toLocaleDateString()}),". Renew before the end date to avoid interruption."]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("div",{className:"px-4 py-2 rounded-full text-sm font-semibold bg-[#0B4A82] text-white",children:"Subscription ends"}),i.jsxs("div",{className:"px-4 py-2 rounded-2xl bg-slate-50 border border-slate-200 text-slate-700",children:[i.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Countdown"}),i.jsxs("div",{className:"text-lg font-bold",children:[dt.days,"d ",dt.hours,"h"," ",dt.minutes,"m"," ",dt.seconds,"s"]})]}),i.jsxs(Ua,{to:"/admin/billing",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#0B4A82] text-white rounded-lg text-sm font-medium hover:bg-[#1160A8] transition-colors",children:[i.jsx(pg,{size:16}),"Renew Now"]})]})]})})}),at&&i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/70 p-6 shadow-sm",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-amber-500 text-white",children:i.jsx(QM,{size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"Subscription Reminder"}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-1",children:"One-week grace period is active"}),i.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Your subscription has ended. You have a one-week window to renew before access is paused."}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Grace ends on"," ",at.graceEndsAt.toLocaleDateString(),"."]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("div",{className:"px-4 py-2 rounded-full text-sm font-semibold bg-amber-500 text-white",children:"Grace period"}),i.jsxs("div",{className:"px-4 py-2 rounded-2xl bg-white border border-slate-200 text-slate-700",children:[i.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Countdown"}),i.jsxs("div",{className:"text-lg font-bold",children:[at.days,"d ",at.hours,"h"," ",at.minutes,"m ",at.seconds,"s"]})]}),i.jsxs(Ua,{to:"/admin/billing",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#0B4A82] text-white rounded-lg text-sm font-medium hover:bg-[#0B4A82] transition-colors",children:[i.jsx(pg,{size:16}),"Go to Billing"]})]})]})})}),oe.length>0&&i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:i.jsx(qy,{className:"text-red-600",size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-red-900 text-lg",children:"Attendance Alerts"}),i.jsxs("p",{className:"text-red-700 text-sm",children:[oe.length," teacher",oe.length!==1?"s":""," have missed attendance recently."]})]})]}),i.jsx("div",{className:"space-y-3",children:oe.map(Ee=>i.jsx("div",{className:"bg-white p-4 rounded-lg border border-red-100 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-bold text-red-600",children:Ee.teacherName.charAt(0)})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800",children:Ee.teacherName}),i.jsx("p",{className:"text-sm text-slate-500",children:Ee.classes})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-medium text-red-700",children:["Missed:"," ",(()=>{const Je=Ee.date.split("-");return Je.length===3?`${Je[1]}/${Je[2]}/${Je[0]}`:Ee.date})()]}),i.jsx("p",{className:"text-xs text-slate-400",children:"Please follow up"})]})]})},`${Ee.teacherId}-${Ee.date}`))})]})}),Y.length>0&&i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-indigo-50 border border-red-200 rounded-2xl p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:i.jsx(qy,{className:"text-red-600",size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-red-900 text-lg",children:"Missed Student Attendance"}),i.jsxs("p",{className:"text-red-700 text-sm",children:[Y.length," teacher",Y.length!==1?"s":""," have not marked student attendance recently."]})]})]}),i.jsx("div",{className:"space-y-3",children:Y.map(Ee=>i.jsx("div",{className:"bg-white p-4 rounded-lg border border-red-100 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-bold text-red-600",children:Ee.teacherName.charAt(0)})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800",children:Ee.teacherName}),i.jsx("p",{className:"text-sm text-slate-500",children:Ee.className})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-medium text-red-700",children:["Missed for:"," ",(()=>{const Je=Ee.date.split("-");return Je.length===3?`${Je[1]}/${Je[2]}/${Je[0]}`:Ee.date})()]}),i.jsx("p",{className:"text-xs text-slate-400",children:"Action may be required"})]})]})},`${Ee.teacherId}-${Ee.date}`))})]})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-600 uppercase tracking-wide",children:"Overview"}),(E||N)&&i.jsx(vd,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[Wr?i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 min-h-[140px]",children:[i.jsx(Hi,{className:"h-4 w-32"}),i.jsx(Hi,{className:"h-10 w-24 mt-4"}),i.jsx(Hi,{className:"h-4 w-40 mt-4"}),i.jsxs("div",{className:"flex gap-6 mt-4",children:[i.jsx(Hi,{className:"h-6 w-16"}),i.jsx(Hi,{className:"h-6 w-16"})]})]}):i.jsx(Oa,{}),Wr?i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 min-h-[140px]",children:[i.jsx(Hi,{className:"h-4 w-32"}),i.jsx(Hi,{className:"h-10 w-24 mt-4"}),i.jsx(Hi,{className:"h-4 w-40 mt-4"}),i.jsxs("div",{className:"flex gap-6 mt-4",children:[i.jsx(Hi,{className:"h-6 w-16"}),i.jsx(Hi,{className:"h-6 w-16"})]})]}):i.jsx(Yr,{}),i.jsx(jl,{title:"Notices",value:Wr?"":c.length,subtext:"Active Announcements",icon:zp,colorClass:"bg-[#E6F0FA]",iconColorClass:"text-[#0B4A82]"})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-600 uppercase tracking-wide",children:"Live KPIs"}),(E||N)&&i.jsx(vd,{})]}),Wr?i.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from({length:3}).map((Ee,Je)=>i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[i.jsx(Hi,{className:"h-4 w-24"}),i.jsx(Hi,{className:"h-8 w-20 mt-3"}),i.jsx(Hi,{className:"h-4 w-16 mt-2"})]},Je))})}):i.jsx(ba,{})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-600 uppercase tracking-wide",children:"Attendance & Demographics"}),(L||N)&&i.jsx(vd,{})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[i.jsx("div",{className:"lg:col-span-2 h-[550px]",children:Wr?i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-full",children:[i.jsx(Hi,{className:"h-5 w-40"}),i.jsx(Hi,{className:"h-4 w-64 mt-3"}),i.jsx(Hi,{className:"h-64 mt-6"})]}):i.jsx(h7,{data:r.classAttendance,week:ts,onPreviousWeek:Ti,onNextWeek:Ji,onCurrentWeek:wl,schoolReopenDate:Ct.schoolReopenDate})}),i.jsx("div",{className:"h-96",children:Wr?i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-full flex flex-col justify-center",children:[i.jsx(Hi,{className:"h-5 w-32"}),i.jsx(Hi,{className:"h-44 w-44 rounded-full mx-auto mt-6"}),i.jsxs("div",{className:"flex justify-between mt-6",children:[i.jsx(Hi,{className:"h-6 w-20"}),i.jsx(Hi,{className:"h-6 w-20"})]})]}):i.jsx(Sn,{})})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-600 uppercase tracking-wide",children:"Academic Performance"}),(L||N)&&i.jsx(vd,{})]}),i.jsx(Ii,{}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 overflow-visible",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800",children:"New Admissions"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Recently added students"})]}),(L||N)&&i.jsx(vd,{}),i.jsx(Ua,{to:"/admin/students",className:"text-sm text-[#0B4A82] hover:text-[#0B4A82] font-medium bg-[#E6F0FA] px-3 py-1 rounded-full transition-colors",children:"View All"})]}),i.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:i.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3",children:"Student Name"}),i.jsx("th",{className:"px-6 py-3",children:"Assigned Class"}),i.jsx("th",{className:"px-6 py-3",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-right",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:u.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-6 text-center text-slate-400",children:"No students yet."})}):u.map((Ee,Je)=>{var xt;return i.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[i.jsxs("td",{className:"px-6 py-4 font-medium text-slate-800 flex items-center",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs text-white mr-3 shadow-sm ${Ee.gender==="Male"?"bg-amber-400":"bg-[#0B4A82]"}`,children:Ee.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{children:Ee.name}),i.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:Ee.gender})]})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"px-2.5 py-1 rounded-md bg-slate-100 text-slate-600 text-xs font-semibold border border-slate-200",children:(xt=Es.find(_t=>_t.id===Ee.classId))==null?void 0:xt.name})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:"inline-flex items-center text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mr-1.5"}),"Active"]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:_t=>da(_t,Ee.id),className:`transition-colors p-1.5 rounded-full hover:bg-slate-200 ${U===Ee.id?"text-[#1160A8] bg-slate-100":"text-slate-400"}`,children:i.jsx(zk,{size:18})}),U===Ee.id&&i.jsxs("div",{className:"absolute right-0 mt-1 w-40 bg-white rounded-lg shadow-xl border border-slate-100 z-50 py-1 text-left animate-in fade-in zoom-in-95 duration-100 origin-top-right",children:[i.jsxs("button",{onClick:()=>La(Ee),className:"flex items-center w-full px-4 py-2.5 text-xs text-slate-700 hover:bg-slate-50 hover:text-[#1160A8] font-medium transition-colors",children:[i.jsx(Lu,{size:14,className:"mr-2"})," View Details"]}),i.jsxs("button",{onClick:()=>zn(Ee),className:"flex items-center w-full px-4 py-2.5 text-xs text-slate-700 hover:bg-slate-50 hover:text-[#1160A8] font-medium transition-colors",children:[i.jsx(l2,{size:14,className:"mr-2"})," Edit Student"]})]})]})})]},Ee.id)})})]})})]}),i.jsxs("div",{className:"bg-gradient-to-br from-[#0B4A82] to-[#0B4A82] rounded-2xl shadow-lg border border-[#0B4A82] overflow-hidden flex flex-col text-white self-start",children:[i.jsxs("div",{className:"p-6 border-b border-[#0B4A82] flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-[#E6F0FA]",children:"Notice Board"}),i.jsx("p",{className:"text-xs text-slate-300",children:"School announcements"})]}),(L||N)&&i.jsx(vd,{label:"Refreshing"}),i.jsx(Ua,{to:"/admin/settings",className:"p-2 rounded-lg hover:bg-white/10 text-slate-300 transition-colors",children:i.jsx(i2,{size:18})})]}),i.jsx("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto max-h-[400px]",children:c.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-400",children:[i.jsx(mo,{size:40,className:"mb-2 opacity-20"}),i.jsx("p",{className:"text-sm",children:"No new notices"})]}):c.map((Ee,Je)=>i.jsxs("div",{className:"group relative pl-4 pb-4 border-l border-slate-700 last:pb-0",children:[i.jsx("div",{className:`absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full border-2 border-slate-800 ${Ee.type==="urgent"?"bg-red-500":"bg-amber-500"}`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-900 px-1.5 py-0.5 rounded",children:Ee.date}),Ee.type==="urgent"&&i.jsx("span",{className:"text-[10px] text-red-400 font-bold uppercase tracking-wider",children:"Urgent"})]}),i.jsx("p",{className:"text-sm font-medium text-slate-200 group-hover:text-white transition-colors",children:Ee.message})]})]},Ee.id))}),i.jsx("div",{className:"p-4 bg-slate-900/50 text-center",children:i.jsxs(Ua,{to:"/admin/timetable",className:"text-xs font-semibold text-amber-400 hover:text-amber-300 uppercase tracking-wide flex items-center justify-center w-full",children:["View Calendar ",i.jsx(QT,{size:12,className:"ml-1"})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 rounded-2xl shadow-lg border border-emerald-200 flex flex-col min-h-[260px] hover:shadow-xl transition-shadow duration-300",children:[i.jsxs("div",{className:"p-3 sm:p-4 border-b border-emerald-200 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-emerald-900 text-base sm:text-lg",children:"Teacher Attendance Today"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-emerald-700 mt-0.5",children:"Current day's staff presence overview"})]}),(L||N)&&i.jsx(vd,{}),i.jsx("div",{className:"bg-emerald-100 p-1.5 sm:p-2 rounded-full",children:i.jsx(xl,{className:"text-emerald-600",size:16})})]}),i.jsxs("div",{className:"p-3 space-y-2 flex-1 overflow-y-auto max-h-[300px] sm:max-h-[350px]",children:[V.length>0&&i.jsxs("div",{className:"mb-3 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[i.jsxs("p",{className:"text-xs font-semibold text-amber-800",children:["Pending approvals (",V.length,")"]}),i.jsx("span",{className:"text-[10px] text-amber-700",children:"Approve to confirm attendance"})]}),i.jsx("div",{className:"space-y-2",children:V.map(Ee=>i.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-md bg-white px-3 py-2 border border-amber-100",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-800 truncate",children:Ee.teacherName}),i.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:Ee.teacherClasses||"No classes assigned"}),i.jsx("p",{className:"text-[10px] text-slate-400",children:Ee.date})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>ya(Ee),className:"inline-flex items-center gap-1 rounded-full bg-emerald-600 px-3 py-1 text-[10px] font-semibold text-white hover:bg-emerald-700",children:"Yes"}),i.jsx("button",{onClick:()=>ai(Ee),className:"inline-flex items-center gap-1 rounded-full bg-rose-600 px-3 py-1 text-[10px] font-semibold text-white hover:bg-rose-700",children:"No"})]})]},Ee.id))})]}),$.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-24 text-emerald-500",children:[i.jsx("div",{className:"bg-emerald-100 p-3 rounded-full mb-2",children:i.jsx(xl,{size:24,className:"text-emerald-400"})}),i.jsx("p",{className:"text-xs font-medium text-center",children:"No attendance marked yet today"}),i.jsx("p",{className:"text-[10px] text-emerald-400 mt-0.5",children:"Teachers will appear here once they mark attendance"})]}):i.jsxs("div",{className:"space-y-2",children:[$.map(Ee=>i.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-emerald-100 hover:shadow-md transition-all duration-200 hover:border-emerald-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("div",{className:`w-3.5 h-3.5 rounded-full flex-shrink-0 ${Ee.isHoliday?"bg-amber-500":Ee.status==="present"?"bg-emerald-500":"bg-red-500"} shadow-sm`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[i.jsx("p",{className:"text-[10px] sm:text-xs font-semibold text-slate-800 truncate max-w-[120px] sm:max-w-none",children:Ee.teacherName}),i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[9px] font-medium flex-shrink-0 ${Ee.isHoliday?"bg-amber-100 text-amber-700":Ee.status==="present"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:Ee.isHoliday?"Holiday":Ee.status==="present"?"Present":"Absent"})]}),i.jsx("p",{className:"text-[9px] text-slate-500 truncate",children:Ee.teacherClasses||"No classes assigned"}),i.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:Ee.date})]})]}),i.jsx("div",{className:"ml-2 flex-shrink-0",children:i.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${Ee.isHoliday?"bg-amber-100 text-amber-600":Ee.status==="present"?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:Ee.isHoliday?i.jsx(Wi,{className:"w-3 h-3"}):Ee.status==="present"?i.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):i.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})},Ee.id)),i.jsx("div",{className:"text-center mt-3 pt-2 border-t border-emerald-100",children:i.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium",children:[$.length," teacher",$.length!==1?"s":""," marked attendance today"]})})]})]})]}),Ct.schoolReopenDate!==new Date().toISOString().split("T")[0]&&i.jsxs("div",{className:"bg-gradient-to-br from-[#E6F0FA] via-[#E6F0FA] to-white rounded-2xl shadow-lg border border-[#E6F0FA] flex flex-col min-h-[280px] hover:shadow-xl transition-shadow duration-300",children:[i.jsxs("div",{className:"p-3 sm:p-4 border-b border-[#E6F0FA] flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-[#0B4A82] text-base sm:text-lg",children:"Teacher Attendance Summary"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-[#1160A8] mt-0.5",children:"Term-wide staff attendance statistics"})]}),(L||N)&&i.jsx(vd,{}),i.jsx("div",{className:"bg-[#E6F0FA] p-1.5 sm:p-2 rounded-full",children:i.jsx(wx,{className:"text-[#0B4A82]",size:16})})]}),i.jsx("div",{className:"p-3 space-y-2 flex-1 overflow-y-auto max-h-[300px] sm:max-h-[350px]",children:ae.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-24 text-[#0B4A82]",children:[i.jsx("div",{className:"bg-[#E6F0FA] p-3 rounded-full mb-2",children:i.jsx(wx,{size:24,className:"text-[#1160A8]"})}),i.jsx("p",{className:"text-xs font-medium text-center",children:"No attendance data available"}),i.jsx("p",{className:"text-[10px] text-[#1160A8] mt-0.5",children:"Term statistics will appear as teachers mark attendance"})]}):i.jsxs("div",{className:"space-y-2",children:[ae.map(Ee=>i.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-[#E6F0FA] hover:shadow-md transition-all duration-200 hover:border-[#E6F0FA]",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-9 h-9 bg-[#E6F0FA] rounded-full flex items-center justify-center",children:i.jsxs("span",{className:"text-[10px] font-bold text-[#0B4A82]",children:[Ee.attendanceRate,"%"]})}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-white rounded-full flex items-center justify-center",children:i.jsx("div",{className:`w-2 h-2 rounded-full ${Ee.attendanceRate>=80?"bg-emerald-500":Ee.attendanceRate>=70?"bg-amber-500":"bg-red-500"}`})})]})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[i.jsx("p",{className:"text-[10px] sm:text-xs font-semibold text-slate-800 truncate max-w-[120px] sm:max-w-none",children:Ee.name}),i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[9px] font-medium flex-shrink-0 ${Ee.attendanceRate>=80?"bg-emerald-100 text-emerald-700":Ee.attendanceRate>=70?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:Ee.attendanceRate>=80?"Excellent":Ee.attendanceRate>=70?"Good":"Needs Attention"})]}),i.jsx("p",{className:"text-[9px] text-slate-500 truncate",children:Ee.classes||"No classes assigned"}),i.jsxs("p",{className:"text-[9px] text-slate-400 mt-0.5",children:[Ee.presentDays," present / ",Ee.totalDays," ","total days"]})]})]})})},Ee.id)),i.jsx("div",{className:"text-center mt-3 pt-2 border-t border-[#E6F0FA]",children:i.jsxs("p",{className:"text-[10px] text-[#0B4A82] font-medium",children:["Average attendance:"," ",ae.length>0?Math.round(ae.reduce((Ee,Je)=>Ee+Je.attendanceRate,0)/ae.length):0,"%"]})})]})})]})]})]}),Ls&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-2xl font-bold text-slate-500 shadow-inner",children:Ls.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Ls.name}),i.jsxs("div",{className:"flex gap-2 text-sm text-slate-500 mt-1",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(HT,{size:14,className:"mr-1"})," ",Ls.gender]}),i.jsx("span",{children:""}),i.jsx("span",{children:(gn=Es.find(Ee=>Ee.id===Ls.classId))==null?void 0:gn.name})]})]})]}),i.jsx("button",{onClick:()=>Yt(null),className:"text-slate-400 hover:text-slate-700 transition-colors bg-white p-2 rounded-full shadow-sm hover:shadow",children:i.jsx(_o,{size:20})})]}),i.jsxs("div",{className:"p-6 space-y-8",children:[i.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-amber-100 rounded-full text-amber-600",children:i.jsx(mo,{size:24})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-amber-900",children:"Attendance Overview"}),i.jsx("p",{className:"text-sm text-amber-700",children:"Current Term Participation"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-3xl font-bold text-amber-600",children:hn?`${hn.attendance.percentage}%`:"..."}),i.jsx("p",{className:"text-xs text-amber-700 font-medium mt-1",children:hn?`${hn.attendance.present}/${hn.attendance.total} Days`:"Loading"})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[i.jsx(zl,{size:20,className:"mr-2 text-[#0B4A82]"})," ","Academic Performance (",Ct.currentTerm,")"]}),i.jsx("div",{className:"border border-slate-200 rounded-lg overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3",children:"Subject"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Score"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Grade"}),i.jsx("th",{className:"px-4 py-3 text-right",children:"Remark"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:hn?hn.grades.map((Ee,Je)=>{const xt=Ee.total??_A(Ee),{grade:_t,remark:fs}=pm(xt);return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:Ee.subject}),i.jsx("td",{className:"px-4 py-3 text-center",children:xt>0?xt:"-"}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Mg(_t)}`,children:xt>0?_t:"-"})}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:xt>0?fs:"N/A"})]},Je)}):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-slate-400 italic",children:"Fetching academic records..."})})})]})})]})]})]})}),dr&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-2",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Edit Student Details"}),i.jsx("button",{onClick:()=>hr(null),className:"text-slate-400 hover:text-slate-700",children:i.jsx(_o,{size:20})})]}),i.jsxs("form",{onSubmit:Qa,className:"space-y-5",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-xs font-bold text-[#0B4A82] uppercase tracking-wide",children:"Personal Information"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-[#1160A8] outline-none transition-all placeholder-slate-400",value:Zt.name||"",onChange:Ee=>mn({...Zt,name:Ee.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Gender"}),i.jsxs("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-[#1160A8] outline-none bg-white text-slate-900",value:Zt.gender,onChange:Ee=>mn({...Zt,gender:Ee.target.value}),children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Date of Birth"}),i.jsx("input",{type:"date",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-[#1160A8] outline-none",value:Zt.dob||"",onChange:Ee=>mn({...Zt,dob:Ee.target.value})})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-50 mt-2",children:[i.jsx("h4",{className:"text-xs font-bold text-[#0B4A82] uppercase tracking-wide",children:"Academic Info"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Assigned Class"}),i.jsx("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-[#1160A8] outline-none bg-white text-slate-900",value:Zt.classId,onChange:Ee=>mn({...Zt,classId:Ee.target.value}),children:Es.map(Ee=>i.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))})]})]}),i.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-50 mt-2",children:[i.jsx("h4",{className:"text-xs font-bold text-[#0B4A82] uppercase tracking-wide",children:"Guardian Information"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Guardian Name"}),i.jsx("input",{type:"text",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-[#1160A8] outline-none placeholder-slate-400",value:Zt.guardianName||"",onChange:Ee=>mn({...Zt,guardianName:Ee.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Phone Number"}),i.jsx("input",{type:"tel",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-[#1160A8] outline-none placeholder-slate-400",value:Zt.guardianPhone||"",onChange:Ee=>mn({...Zt,guardianPhone:Ee.target.value})})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[i.jsx("button",{type:"button",onClick:()=>hr(null),className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"flex items-center px-5 py-2.5 bg-[#0B4A82] text-white rounded-lg hover:bg-[#0B4A82] font-medium shadow-sm transition-colors",children:[i.jsx(AA,{size:18,className:"mr-2"})," Save Changes"]})]})]})]})}),Ns&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Students with grade ",Ns]}),i.jsxs("p",{className:"text-sm text-slate-500",children:[(mt[Ns]||[]).length," students"]})]}),i.jsx("button",{onClick:()=>$t(null),className:"text-slate-400 hover:text-slate-700 transition-colors bg-white p-2 rounded-full shadow-sm hover:shadow",children:i.jsx(_o,{size:20})})]}),i.jsx("div",{className:"p-6 space-y-4",children:!mt[Ns]||mt[Ns].length===0?i.jsx("div",{className:"text-center text-slate-400 py-8",children:"No students in this grade for the selected term."}):i.jsx("div",{className:"space-y-3",children:mt[Ns].map((Ee,Je)=>i.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-3 last:pb-0",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800",children:Ee.name}),i.jsxs("p",{className:"text-xs text-slate-400",children:[Ee.class,"  Avg: ",Ee.avg]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("button",{onClick:()=>ha(Ee.id),className:"text-xs text-[#0B4A82] hover:underline",children:"View"})})]},Ee.id))})})]})})]})},p7=()=>{var M,J,ie,le,ce,ve,Se;const{school:s}=dc(),e=(s==null?void 0:s.id)||null,[t,n]=Z.useState([]),[r,o]=Z.useState("all"),[c,h]=Z.useState(!1),[u,f]=Z.useState(null),[A,m]=Z.useState({gender:"Male",classId:"c_p1",dob:""}),[x,g]=Z.useState(null),[b,I]=Z.useState(null),[N,C]=Z.useState(null),[E,F]=Z.useState(!1),L=async()=>{if(!e){n([]);return}const ge=await ot.getStudents(e,void 0);if(n(ge),e){const Be=ge.filter(Fe=>!Fe.schoolId);Be.length>0&&await Promise.all(Be.map(Fe=>ot.updateStudent({...Fe,schoolId:e})))}};Z.useEffect(()=>{L()},[e]);const O=async ge=>{I(null),g(ge);const Be=await ot.getStudentPerformance(e||"",ge.id,ge.classId);I(Be)},H=()=>{g(null),I(null)},Q=t.filter(ge=>r==="all"?!0:ge.classId===r).sort((ge,Be)=>ge.name.localeCompare(Be.name)),U=r==="all"?"All Classes":((M=Es.find(ge=>ge.id===r))==null?void 0:M.name)||r,R=t.length,$=Q.length,P=(J=b==null?void 0:b.attendance)==null?void 0:J.total,V=(ie=b==null?void 0:b.attendance)==null?void 0:ie.present,G=P!=null&&V!=null?Math.max(P-V,0):null;(le=b==null?void 0:b.attendance)==null||le.percentage;const ae=((ce=b==null?void 0:b.grades)==null?void 0:ce.length)??0,ue=()=>{I(null),m({gender:"Male",classId:r!=="all"?r:"c_p1",dob:""}),f(null),h(!0)},oe=async ge=>{m(ge),f(ge.id),h(!0),I(null);const Be=await ot.getStudentPerformance(e||"",ge.id,ge.classId);I(Be)},X=()=>{h(!1),m({gender:"Male",classId:"c_p1",dob:""}),f(null),I(null)},Y=(ge,Be)=>{Be.stopPropagation(),C(ge)},re=async()=>{if(!N)return;const ge=N;C(null);const Be=[...t];n(Fe=>Fe.filter(Qe=>Qe.id!==ge));try{await ot.deleteStudent(ge)}catch(Fe){console.error("Delete failed",Fe),n(Be),Pt("Failed to delete student. Please try again.",{type:"error"})}},pe=async ge=>{if(ge.preventDefault(),!(!A.name||!A.classId)){F(!0);try{if(u){const Be={...A,id:u,schoolId:e||A.schoolId};await ot.updateStudent(Be),Pt("Student updated successfully.",{type:"success"})}else{const Be={id:Math.random().toString(36).substr(2,9),name:A.name,gender:A.gender,dob:A.dob||"2015-01-01",classId:A.classId,schoolId:e||"",guardianName:A.guardianName||"",guardianPhone:A.guardianPhone||""};await ot.addStudent(Be),Pt("Student added successfully.",{type:"success"})}await L(),X()}catch(Be){console.error("Save failed",Be),Pt("Failed to save student. Please try again.",{type:"error"})}finally{F(!1)}}},ee=()=>{if(!b||!b.attendance||!b.attendance.schoolDates)return null;const{schoolDates:ge,presentDates:Be}=b.attendance;if(ge.length===0)return i.jsx("div",{className:"text-center text-slate-400 py-4 italic",children:"No attendance records found for this term."});const Fe=nt=>(typeof nt=="string"?new Date(nt):nt).toISOString().split("T")[0],Qe=new Set(ge.map(nt=>Fe(nt))),Ze=new Set(Be.map(nt=>Fe(nt))),Pe={};ge.forEach(nt=>{const It=new Date(nt),ut=`${It.getFullYear()}-${It.getMonth()}`;Pe[ut]||(Pe[ut]={label:It.toLocaleString("default",{month:"long",year:"numeric"}),year:It.getFullYear(),month:It.getMonth()})});const me=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:Object.entries(Pe).map(([nt,It])=>{const{year:ut,month:ze,label:Ft}=It,Qt=new Date(ut,ze,1).getDay(),Ct=new Date(ut,ze+1,0).getDate(),Jt=Math.ceil((Qt+Ct)/7)*7;return i.jsxs("div",{className:"relative overflow-hidden border border-slate-200 rounded-2xl p-4 bg-white shadow-sm",children:[i.jsx("div",{className:"absolute -top-10 -right-10 h-24 w-24 rounded-full bg-indigo-100/60 blur-2xl"}),i.jsx("div",{className:"absolute -bottom-12 -left-10 h-28 w-28 rounded-full bg-emerald-100/60 blur-2xl"}),i.jsxs("div",{className:"relative flex items-center justify-between mb-3 border-b border-slate-100 pb-2",children:[i.jsx("h5",{className:"font-semibold text-slate-800 text-sm",children:Ft}),i.jsx("span",{className:"text-[11px] text-slate-400",children:"Attendance"})]}),i.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[me.map((ts,as)=>i.jsx("div",{className:"text-[10px] text-slate-400 font-semibold uppercase",children:ts},as)),Array.from({length:Jt}).map((ts,as)=>{const Xe=as-Qt+1;if(Xe<1||Xe>Ct)return i.jsx("div",{className:"h-8"},as);const Vt=new Date(ut,ze,Xe),Kt=Fe(Vt),Mt=Qe.has(Kt),mt=Ze.has(Kt),Dt=Vt.getDay()===0||Vt.getDay()===6,Ns="h-8 w-8 mx-auto flex items-center justify-center rounded-full text-xs font-semibold transition",$t=Dt?"text-slate-300 bg-slate-50":"text-slate-600";return Mt?i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{title:`${Kt}: ${mt?"Present":"Absent"}`,className:`${Ns} ${$t} ${mt?"bg-emerald-100 text-emerald-800 shadow-sm":"bg-sky-100 text-sky-800 shadow-sm"}`,children:Xe})},as):i.jsx("div",{className:"h-8 flex items-center justify-center text-[11px] text-slate-200"},as)})]}),i.jsxs("div",{className:"mt-3 flex justify-center gap-4 text-[11px] text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-100 rounded-full border border-emerald-200"})," ","Present"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-sky-100 rounded-full border border-sky-200"})," ","Absent"]})]})]},nt)})})};return i.jsxs(lr,{title:"Manage Students",children:[i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-50 via-white to-emerald-50 p-6 shadow-sm",children:[i.jsx("div",{className:"absolute -top-16 -right-16 h-40 w-40 rounded-full bg-indigo-200/40 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-20 -left-16 h-48 w-48 rounded-full bg-emerald-200/40 blur-3xl"}),i.jsxs("div",{className:"relative flex flex-col gap-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Manage Students"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Organize, update, and review student profiles in a beautiful workspace."}),i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(xl,{className:"h-4 w-4 text-indigo-500"}),"Total: ",R]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 font-medium text-emerald-700 shadow-sm",children:[i.jsx(DA,{className:"h-4 w-4"}),"Showing: ",$]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(zl,{className:"h-4 w-4"}),U]})]})]})]}),i.jsxs("div",{className:"rounded-2xl border bg-white/80 shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("select",{className:"border border-slate-200 rounded-full px-4 py-2 text-sm bg-white text-slate-700 shadow-sm focus:ring-2 focus:ring-emerald-200",value:r,onChange:ge=>o(ge.target.value),children:[i.jsx("option",{value:"all",children:"All Classes"}),Es.map(ge=>i.jsx("option",{value:ge.id,children:ge.name},ge.id))]})}),i.jsxs("button",{onClick:ue,className:"flex items-center justify-center gap-2 rounded-full bg-emerald-600 text-white px-5 py-2 text-sm font-semibold shadow-sm transition hover:scale-[1.01] hover:bg-emerald-700",children:[i.jsx($h,{size:16}),"Add Student"]})]}),i.jsx("div",{className:"p-4",children:Q.length===0?i.jsx("div",{className:"px-6 py-10 text-center text-slate-400",children:"No students found."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:Q.map(ge=>{var Fe;const Be=((Fe=Es.find(Qe=>Qe.id===ge.classId))==null?void 0:Fe.name)||ge.classId;return i.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition duration-300 hover:-translate-y-1 hover:shadow-md",children:[i.jsx("div",{className:"absolute -top-14 -right-14 h-28 w-28 rounded-full bg-indigo-100/60 blur-2xl"}),i.jsx("div",{className:"absolute -bottom-16 -left-10 h-32 w-32 rounded-full bg-emerald-100/60 blur-2xl"}),i.jsxs("div",{className:"relative flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-11 w-11 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center text-sm font-semibold",children:ge.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900",children:ge.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",ge.id]})]})]}),i.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:Be})]}),i.jsxs("div",{className:"relative mt-4 grid grid-cols-2 gap-3 text-xs text-slate-600",children:[i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50/60 p-3",children:[i.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Gender"}),i.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-800",children:ge.gender})]}),i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50/60 p-3",children:[i.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Guardian"}),i.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-800",children:ge.guardianName||"-"}),i.jsx("p",{className:"text-[11px] text-slate-400",children:ge.guardianPhone||""})]})]}),i.jsxs("div",{className:"relative mt-4 flex items-center justify-between",children:[i.jsxs("button",{type:"button",onClick:()=>O(ge),className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1.5 text-xs font-semibold text-emerald-700 transition hover:bg-emerald-100",title:"View Performance",children:[i.jsx(Lu,{size:14}),"View"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>oe(ge),className:"text-[#1160A8] hover:text-[#0B4A82] p-2 hover:bg-[#E6F0FA] rounded-full transition-colors",title:"Edit Details",children:i.jsx(l2,{size:16})}),i.jsx("button",{type:"button",onClick:Qe=>Y(ge.id,Qe),className:"text-rose-500 hover:text-rose-700 p-2 hover:bg-rose-50 rounded-full transition-colors cursor-pointer",title:"Delete Student",children:i.jsx(RA,{size:16,className:"pointer-events-none"})})]})]})]},ge.id)})})})]})]}),N&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white rounded-2xl max-w-sm w-full p-6 shadow-2xl transform transition-all",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-rose-50 rounded-full flex items-center justify-center mb-4",children:i.jsx(Wi,{className:"text-rose-600 w-6 h-6"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Delete Student?"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this student? This action cannot be undone."}),i.jsxs("div",{className:"flex gap-3 w-full",children:[i.jsx("button",{onClick:()=>C(null),className:"flex-1 px-4 py-2 border border-slate-200 text-slate-700 rounded-full hover:bg-slate-50 font-medium transition",children:"Cancel"}),i.jsx("button",{onClick:re,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-full hover:bg-rose-700 font-medium transition shadow-sm",children:"Delete"})]})]})})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"mb-6 border-b border-slate-100 pb-3",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:u?"Edit Student Details":"Add New Student"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Keep student records accurate and up to date."})]}),u&&i.jsxs("div",{className:"mb-6 bg-slate-50 border border-slate-200 rounded-lg p-4 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-slate-700",children:"Attendance Summary"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Current Term Performance"})]}),i.jsx("div",{className:"text-right",children:b?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"text-xl font-bold text-emerald-600",children:[b.attendance.percentage,"%"]}),i.jsxs("p",{className:"text-xs text-slate-500",children:[b.attendance.present,"/",b.attendance.total," Days"]})]}):i.jsx("span",{className:"text-xs text-slate-400",children:"Loading data..."})})]}),i.jsxs("form",{onSubmit:pe,className:"space-y-5",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Personal Information"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none transition-all placeholder-slate-400",value:A.name||"",onChange:ge=>m({...A,name:ge.target.value}),placeholder:"e.g. Kwame Nkrumah Jnr"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Gender"}),i.jsxs("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",value:A.gender,onChange:ge=>m({...A,gender:ge.target.value}),children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Date of Birth"}),i.jsx("input",{type:"date",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",value:A.dob||"",onChange:ge=>m({...A,dob:ge.target.value})})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-2",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Academic Info"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Assigned Class"}),i.jsx("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",value:A.classId,onChange:ge=>m({...A,classId:ge.target.value}),children:Es.map(ge=>i.jsx("option",{value:ge.id,children:ge.name},ge.id))})]})]}),i.jsxs("div",{className:"space-y-4 pt-2",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Guardian Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Guardian Name"}),i.jsx("input",{type:"text",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:A.guardianName||"",onChange:ge=>m({...A,guardianName:ge.target.value}),placeholder:"e.g. Mr. John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Phone Number"}),i.jsx("input",{type:"tel",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:A.guardianPhone||"",onChange:ge=>m({...A,guardianPhone:ge.target.value}),placeholder:"e.g. 024 123 4567"})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[i.jsx("button",{type:"button",onClick:X,className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:E,className:`px-5 py-2.5 bg-emerald-600 text-white rounded-lg font-medium shadow-sm transition-colors ${E?"opacity-60 cursor-not-allowed hover:bg-emerald-600":"hover:bg-emerald-700"}`,children:E?i.jsxs("span",{className:"flex items-center",children:[i.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),u?"Updating...":"Saving..."]}):u?"Update Student":"Save Student"})]})]})]})}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[95vh] overflow-y-auto shadow-2xl flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col gap-4 bg-gradient-to-r from-slate-50 via-white to-emerald-50 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-700 rounded-2xl flex items-center justify-center text-2xl font-bold shadow-sm",children:x.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:x.name}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-500 mt-1",children:[i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/80 px-2.5 py-1 text-xs font-semibold text-slate-600 shadow-sm",children:[i.jsx(HT,{size:14}),x.gender]}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/80 px-2.5 py-1 text-xs font-semibold text-slate-600 shadow-sm",children:[i.jsx(zl,{size:14}),(ve=Es.find(ge=>ge.id===x.classId))==null?void 0:ve.name]})]})]})]}),i.jsx("button",{onClick:H,className:"text-slate-400 hover:text-slate-700 bg-white p-2 rounded-full shadow-sm",children:i.jsx(_o,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Attendance Rate"}),i.jsx("p",{className:`mt-1 text-2xl font-bold ${((Se=b==null?void 0:b.attendance)==null?void 0:Se.percentage)<50?"text-rose-600":"text-emerald-600"}`,children:b?`${b.attendance.percentage}%`:"-"})]}),i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Days Present"}),i.jsx("p",{className:"mt-1 text-2xl font-bold text-slate-900",children:b?b.attendance.present:"-"})]}),i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Total School Days"}),i.jsx("p",{className:"mt-1 text-2xl font-bold text-slate-900",children:b?b.attendance.total:"-"})]})]})]}),i.jsxs("div",{className:"p-6 space-y-8",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/80 p-5 shadow-sm",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:i.jsx(mo,{size:20})}),i.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"Attendance Record"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 font-semibold text-emerald-700",children:[i.jsx("div",{className:"w-2.5 h-2.5 bg-emerald-300 rounded-full"}),"Present"]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-sky-50 px-3 py-1 font-semibold text-sky-700",children:[i.jsx("div",{className:"w-2.5 h-2.5 bg-sky-300 rounded-full"}),"Absent"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/70 p-4",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Total Days"}),i.jsx("p",{className:"mt-2 text-2xl font-bold text-slate-900",children:P??"-"})]}),i.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/70 p-4",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-emerald-500",children:"Days Present"}),i.jsx("p",{className:"mt-2 text-2xl font-bold text-emerald-700",children:V??"-"})]}),i.jsxs("div",{className:"rounded-2xl border border-sky-100 bg-sky-50/70 p-4",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-sky-500",children:"Days Absent"}),i.jsx("p",{className:"mt-2 text-2xl font-bold text-sky-700",children:G??"-"})]})]}),i.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:ee()})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/80 p-5 shadow-sm",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[i.jsx(zl,{size:20,className:"mr-2 text-[#0B4A82]"})," ","Academic Performance"]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-700",children:["Subjects: ",ae]})]}),i.jsx("div",{className:"border border-slate-200 rounded-2xl overflow-hidden bg-white",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3",children:"Subject"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Score"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Grade"}),i.jsx("th",{className:"px-4 py-3 text-right",children:"Remark"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:b?b.grades.map((ge,Be)=>{const Fe=ge.total||(ge.testScore||0)+(ge.homeworkScore||0)+(ge.projectScore||0)+(ge.examScore||0),{grade:Qe,remark:Ze}=pm(Fe);return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:ge.subject}),i.jsx("td",{className:"px-4 py-3 text-center",children:Fe>0?Fe:"-"}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Mg(Qe)}`,children:Fe>0?Qe:"-"})}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:Fe>0?Ze:"N/A"})]},Be)}):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Loading grades..."})})})]})}),i.jsx("div",{className:"mt-3 flex items-center justify-end text-xs text-slate-400",children:"Updated via system records"})]})]}),i.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center",children:i.jsx("p",{className:"text-xs text-slate-400",children:"Generated automatically by School Manager GH System"})})]})})]})};async function g7(){const s=bu.currentUser;if(!s)throw new Error("NO_SESSION");try{return await s.getIdToken(!0)}catch(e){throw console.error("Error refreshing ID token:",e),new Error("TOKEN_REFRESH_FAILED")}}async function x7(s=2,e=400){let t=0;for(;t<=s;)try{return await g7()}catch(n){if(((n==null?void 0:n.message)==="NO_SESSION"||(n==null?void 0:n.message)==="TOKEN_REFRESH_FAILED")&&t<s){await new Promise(r=>setTimeout(r,e)),t+=1;continue}throw n}throw new Error("TOKEN_REFRESH_FAILED")}const v7="http://localhost:3001".replace(/\/$/,"")||"https://school-manager-hehk.onrender.com",eS=v7;class Cp extends Error{constructor(e,t,n){super(e),this.code=t,this.status=n,this.name="ApiError"}}async function Tm(s,e={}){let t=0;const n=1;for(;t<=n;)try{const r=await x7(),o=await fetch(`${eS}${s}`,{method:e.method||"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:e.body?JSON.stringify(e.body):void 0});if(!o.ok){const c=await o.json().catch(()=>({})),h=o.status===403&&(c.code==="INVALID_TOKEN"||/invalid token/i.test(c.error||"")||/invalid token/i.test(c.message||""));if(o.status===401&&c.code==="ID_TOKEN_EXPIRED"||h){if(t<n){console.log("ID token expired, retrying request..."),t++;continue}throw new Cp("Your session has expired. Please log out and log in again.","SESSION_EXPIRED",o.status)}throw new Cp(c.error||`HTTP ${o.status} ${o.statusText}`,c.code,o.status)}return await o.json()}catch(r){throw r.message==="NO_SESSION"?new Cp("You are not logged in. Please log in to continue.","NO_SESSION"):r.message==="TOKEN_REFRESH_FAILED"?new Cp("Your session has expired. Please log out and log in again.","SESSION_EXPIRED"):r.name==="TypeError"&&r.message==="Failed to fetch"?new Cp(`Cannot connect to the backend at ${eS}. Please ensure the server is running.`,"CONNECTION_FAILED"):r}throw new Error("API request failed after all retries.")}async function y7(s){return Tm("/api/superadmin/create-school",{body:s})}async function b7(s){return Tm("/api/superadmin/create-school-admin",{body:s})}async function w7(s){return Tm("/api/superadmin/reset-school-admin-password",{body:s})}async function j7(s){return Tm("/api/createTeacher",{body:s})}async function B7(s){return Tm("/api/billing/initiate",{body:s})}async function tS(s){return Tm("/api/billing/verify",{body:s})}Pg(kg,"createSchool");Pg(kg,"createSchoolAdmin");const S7=Pg(kg,"deleteSchool");Pg(kg,"createTeacherAccount");const C7=Pg(kg,"repairUserSchoolId"),N7=()=>{const{school:s}=dc(),e=(s==null?void 0:s.id)||"",[t,n]=Z.useState([]),[r,o]=Z.useState(!1),[c,h]=Z.useState(!1),[u,f]=Z.useState(!1),[A,m]=Z.useState(null),[x,g]=Z.useState(null),[b,I]=Z.useState(null),[N,C]=Z.useState(!1),[E,F]=Z.useState(!1),[L,O]=Z.useState(!1),[H,Q]=Z.useState(null),[U,R]=Z.useState([]),[$,P]=Z.useState(!1),[V,G]=Z.useState({role:xn.TEACHER,assignedClassIds:[]}),[ae,ue]=Z.useState(null),oe=async()=>{if(!e){n([]);return}const ve=(await ot.getUsers(e)).filter(Se=>Se.role===xn.TEACHER);n(ve)};Z.useEffect(()=>{oe()},[e]);const X=(ce,ve)=>{navigator.clipboard.writeText(ce),g(ve),setTimeout(()=>g(null),2e3)},Y=ce=>{G(ve=>{const Se=ve.assignedClassIds||[];return Se.includes(ce)?{...ve,assignedClassIds:Se.filter(ge=>ge!==ce)}:{...ve,assignedClassIds:[...Se,ce]}})},re=async ce=>{if(ce.preventDefault(),!e){Pt("School ID is not available. Please refresh and try again.",{type:"error"});return}if(!V.fullName||!V.email){Pt("Please fill in all fields (full name and email).",{type:"error"});return}h(!0);try{await j7({fullName:V.fullName,email:V.email,password:V.password||void 0,assignedClassIds:V.assignedClassIds||[],schoolId:e}),m({tempPassword:V.password||void 0,email:V.email,fullName:V.fullName,adminProvidedPassword:!!V.password}),f(!0),o(!1),G({role:xn.TEACHER,assignedClassIds:[],email:"",fullName:"",password:""}),F(!1),await oe()}catch(ve){console.error("Error creating teacher:",ve),Pt((ve==null?void 0:ve.message)||"Failed to create teacher.",{type:"error",duration:7e3})}finally{h(!1)}},pe=ce=>{ue(ce)},ee=async()=>{if(!ae)return;const ce=t.find(ge=>ge.id===ae);if(!ce){ue(null);return}if(ce.schoolId!==e){ue(null),Pt("You can only delete teachers from your school.",{type:"error"});return}const ve=ae;ue(null);const Se=[...t];n(ge=>ge.filter(Be=>Be.id!==ve));try{await ot.deleteUser(ve);const Fe=(await ot.getAllTeacherAttendanceRecords(e)).filter(Qe=>Qe.teacherId===ve&&Qe.schoolId&&Qe.schoolId===e).map(Qe=>zi(Os(wt,"teacher_attendance",Qe.id)));await Promise.all(Fe)}catch(ge){console.error("Failed to delete teacher",ge),n(Se),Pt("Failed to delete teacher profile. Please try again.",{type:"error"})}},M=ce=>{Q(ce),R(ce.assignedClassIds||[]),O(!0)},J=ce=>{R(ve=>(ve||[]).includes(ce)?(ve||[]).filter(Se=>Se!==ce):[...ve||[],ce])},ie=async()=>{if(H){if(H.schoolId!==e){Pt("You can only edit teachers from your school.",{type:"error"});return}P(!0);try{await ot.updateUserAssignedClasses(H.id,U),Pt("Teacher classes updated successfully.",{type:"success"}),O(!1),Q(null),R([]),await oe()}catch(ce){console.error("Error updating teacher classes:",ce),Pt((ce==null?void 0:ce.message)||"Failed to update teacher classes.",{type:"error"})}finally{P(!1)}}},le=async()=>{if(b){C(!0);try{const ce=await C7({targetUid:b,schoolId:e}),{message:ve}=ce.data;Pt(ve||"Teacher account repaired successfully.",{type:"success"}),I(null),await oe()}catch(ce){console.error("Error repairing teacher:",ce),Pt((ce==null?void 0:ce.details)||(ce==null?void 0:ce.message)||"Failed to repair teacher account.",{type:"error",duration:6e3})}finally{C(!1)}}};return i.jsxs(lr,{title:"Manage Teachers",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[i.jsx("h2",{className:"font-semibold text-slate-800",children:"Staff List"}),i.jsxs("button",{onClick:()=>{if(!e){Pt("School ID is not available yet. Please refresh and try again.",{type:"error"});return}o(!0)},className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors text-sm font-medium",children:[i.jsx($h,{size:16,className:"mr-2"}),"Add Teacher"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3",children:"Name"}),i.jsx("th",{className:"px-6 py-3",children:"Email"}),i.jsx("th",{className:"px-6 py-3",children:"Account Status"}),i.jsx("th",{className:"px-6 py-3",children:"Assigned Classes"}),i.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-400",children:"No teachers found for this school."})}):t.map(ce=>{const Se=(ce.assignedClassIds||[]).map(Be=>{var Fe;return(Fe=Es.find(Qe=>Qe.id===Be))==null?void 0:Fe.name}).filter(Boolean),ge=!ce.schoolId;return i.jsxs("tr",{className:`hover:bg-slate-50 ${ge?"bg-red-50":""}`,children:[i.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:ce.fullName}),i.jsxs("td",{className:"px-6 py-3 flex items-center",children:[i.jsx(iM,{size:14,className:"mr-2 text-slate-400"}),ce.email]}),i.jsx("td",{className:"px-6 py-3",children:ge?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pb,{size:16,className:"text-red-600"}),i.jsx("span",{className:"text-red-700 font-semibold text-xs",children:"Missing schoolId"})]}):i.jsx("span",{className:"text-emerald-700 text-xs font-medium",children:" Complete"})}),i.jsx("td",{className:"px-6 py-3",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:Se.length>0?Se.map(Be=>i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:Be},Be)):i.jsx("span",{className:"text-slate-400 italic text-xs",children:"No classes"})})}),i.jsxs("td",{className:"px-6 py-3 text-right flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>M(ce),className:"text-blue-600 hover:text-blue-800 p-2 hover:bg-blue-50 rounded-full transition-colors",title:"Edit Assigned Classes",children:i.jsx(yM,{size:16,className:"pointer-events-none"})}),ge&&i.jsx("button",{onClick:()=>I(ce.id),className:"text-orange-600 hover:text-orange-800 p-2 hover:bg-orange-50 rounded-full transition-colors",title:"Repair Account",children:i.jsx(q5,{size:16,className:"pointer-events-none"})}),i.jsx("button",{onClick:()=>pe(ce.id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-full transition-colors",title:"Remove Teacher",children:i.jsx(RA,{size:16,className:"pointer-events-none"})})]})]},ce.id)})})]})})]}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl transform transition-all",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(Wi,{className:"text-red-600 w-6 h-6"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Remove Teacher?"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"This removes their profile and disables their login account from the system."}),i.jsxs("div",{className:"flex gap-3 w-full",children:[i.jsx("button",{onClick:()=>ue(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Cancel"}),i.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors shadow-sm",children:"Remove"})]})]})})}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center text-slate-900 border-b pb-2",children:[i.jsx(A2,{className:"mr-2 text-emerald-600",size:20})," Add New Teacher"]}),i.jsxs("form",{onSubmit:re,className:"space-y-4 pt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:V.fullName||"",onChange:ce=>G({...V,fullName:ce.target.value}),placeholder:"e.g. Mr. John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:V.email||"",onChange:ce=>G({...V,email:ce.target.value}),placeholder:"teacher@school.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Password (Optional)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:E?"text":"password",className:"w-full border border-slate-300 p-2.5 pr-10 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:V.password||"",onChange:ce=>G({...V,password:ce.target.value}),placeholder:"Leave empty to send password reset link"}),i.jsx("button",{type:"button",onClick:()=>F(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 transition-colors",title:E?"Hide password":"Show password",children:E?i.jsx(a2,{size:18}):i.jsx(Lu,{size:18})})]})]}),i.jsxs("p",{className:"text-xs text-slate-500 bg-blue-50 p-3 rounded-lg border border-blue-200",children:[" ",i.jsx("strong",{children:"Option 1:"})," Leave password empty - a reset link will be sent to email. ",i.jsx("strong",{children:"Option 2:"})," Set a password above - teacher can log in immediately with it."]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Assign Classes"}),i.jsx("div",{className:"border border-slate-300 rounded-lg p-3 max-h-56 overflow-y-auto bg-slate-50",children:i.jsx("div",{className:"grid grid-cols-2 gap-3",children:Es.map(ce=>{var Se;const ve=(Se=V.assignedClassIds)==null?void 0:Se.includes(ce.id);return i.jsxs("button",{type:"button",onClick:()=>Y(ce.id),className:`flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium border transition-all duration-200 ${ve?"bg-emerald-600 border-emerald-600 text-white shadow-md transform scale-[1.02]":"bg-white border-slate-200 text-slate-600 hover:border-emerald-300 hover:shadow-sm"}`,children:[i.jsx("span",{children:ce.name}),ve?i.jsx(W5,{size:16,className:"text-white ml-2"}):i.jsx(X5,{size:16,className:"text-slate-300 ml-2"})]},ce.id)})})}),i.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"Click classes to select/deselect them."})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[i.jsx("button",{type:"button",onClick:()=>o(!1),disabled:c,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:c,className:"flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium shadow-sm transition-colors disabled:opacity-70",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Jy,{size:16,className:"mr-2 animate-spin"})," ","Creating..."]}):"Create Teacher"})]})]})]})}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl transform transition-all",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(q5,{className:"text-orange-600 w-6 h-6"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Repair Teacher Account?"}),i.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"This teacher's account is missing the required schoolId field."}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"This action will add your school's ID to their profile so they can log in."}),i.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-3 mb-6 w-full",children:i.jsx("p",{className:"text-xs text-orange-700",children:"After repair, the teacher will be able to log in and access the system."})}),i.jsxs("div",{className:"flex gap-3 w-full",children:[i.jsx("button",{onClick:()=>I(null),disabled:N,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors disabled:opacity-50",children:"Cancel"}),i.jsx("button",{onClick:le,disabled:N,className:"flex-1 flex items-center justify-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition-colors shadow-sm disabled:opacity-70",children:N?i.jsxs(i.Fragment,{children:[i.jsx(Jy,{size:16,className:"mr-2 animate-spin"}),"Repairing..."]}):"Repair Account"})]})]})})}),u&&A&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[i.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mb-4",children:i.jsx($p,{className:"text-emerald-600 w-6 h-6"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Teacher Created Successfully!"}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Share these credentials with the teacher."})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-4 mb-4 border border-slate-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1 uppercase",children:"Email"}),i.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-slate-200",children:[i.jsx("code",{className:"text-sm font-mono text-slate-700",children:A.email}),i.jsx("button",{onClick:()=>X(A.email,"email"),className:"text-slate-400 hover:text-slate-600 transition-colors",title:"Copy to clipboard",children:x==="email"?i.jsx($p,{size:16,className:"text-emerald-600"}):i.jsx(G5,{size:16})})]})]}),A.tempPassword&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1 uppercase",children:A.adminProvidedPassword?"Password":"Temporary Password"}),i.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-slate-200",children:[i.jsx("code",{className:"text-sm font-mono text-slate-700",children:A.tempPassword}),i.jsx("button",{onClick:()=>X(A.tempPassword,"password"),className:"text-slate-400 hover:text-slate-600 transition-colors",title:"Copy to clipboard",children:x==="password"?i.jsx($p,{size:16,className:"text-emerald-600"}):i.jsx(G5,{size:16})})]}),!A.adminProvidedPassword&&i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:" Teacher must change password on first login."})]}),A.adminProvidedPassword?i.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:i.jsx("p",{className:"text-xs text-green-700",children:" Teacher can log in immediately with the password above."})}):i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:i.jsx("p",{className:"text-xs text-blue-700",children:" A password reset link has been sent to their email inbox."})})]}),i.jsx("button",{onClick:()=>f(!1),className:"w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium transition-colors",children:"Done"})]})}),L&&H&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 border-b pb-2",children:"Assign Classes"}),i.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Assign classes to ",H.fullName,"."]}),i.jsx("div",{className:"border border-slate-300 rounded-lg p-3 max-h-56 overflow-y-auto bg-slate-50 mb-4",children:i.jsx("div",{className:"grid grid-cols-2 gap-3",children:Es.map(ce=>{const ve=(U||[]).includes(ce.id);return i.jsxs("button",{type:"button",onClick:()=>J(ce.id),className:`flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium border transition-all duration-200 ${ve?"bg-emerald-600 border-emerald-600 text-white shadow-md transform scale-[1.02]":"bg-white border-slate-200 text-slate-600 hover:border-emerald-300 hover:shadow-sm"}`,children:[i.jsx("span",{children:ce.name}),ve?i.jsx(W5,{size:16,className:"text-white ml-2"}):i.jsx(X5,{size:16,className:"text-slate-300 ml-2"})]},ce.id)})})}),i.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>O(!1),disabled:$,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors disabled:opacity-60",children:"Cancel"}),i.jsx("button",{type:"button",onClick:ie,disabled:$,className:"flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium shadow-sm transition-colors disabled:opacity-60",children:$?i.jsxs(i.Fragment,{children:[i.jsx(Jy,{size:16,className:"mr-2 animate-spin"}),"Saving..."]}):"Save"})]})]})})]})},E7=()=>{const{school:s}=dc(),e=(s==null?void 0:s.id)||null,[t,n]=Z.useState(Es[0].id),[r,o]=Z.useState([]),[c,h]=Z.useState(!1),[u,f]=Z.useState(0);return Z.useEffect(()=>{(async()=>{h(!0);try{if(!e){o([]),f(0);return}const m=await ot.getStudents(e,t),x=await ot.getSchoolConfig(e);let g=0;const b=await ot.getClassAttendance(e,t),I=new Set([...b.filter(E=>E.isHoliday).map(E=>E.date),...(x.holidayDates||[]).map(E=>E.date)]);if(x.schoolReopenDate){const E=new Date(`${x.schoolReopenDate}T00:00:00`),F=x.vacationDate?new Date(`${x.vacationDate}T00:00:00`):null,L=new Date;L.setHours(0,0,0,0);const O=F&&F<L?F:L,H=new Date(E);for(;H<=O;){const Q=H.getDay();if(!(Q===0||Q===6)){const R=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`;I.has(R)||g++}H.setDate(H.getDate()+1)}}else g=b.filter(F=>!F.isHoliday).length;f(g);const N=b,C=m.map(E=>{const F=N.filter(O=>!O.isHoliday&&O.presentStudentIds.includes(E.id)).length,L=g===0?0:Math.round(F/g*100);return{id:E.id,name:E.name,gender:E.gender,presentDays:F,totalDays:g,percentage:L}});C.sort((E,F)=>E.name.localeCompare(F.name)),o(C)}catch(m){console.error("Error fetching attendance stats:",m)}finally{h(!1)}})()},[t,e]),i.jsx(lr,{title:"Attendance Statistics",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col xl:flex-row justify-between xl:items-center gap-4 bg-slate-50",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Class"}),i.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-48 bg-white text-slate-900",value:t,onChange:A=>n(A.target.value),children:Es.map(A=>i.jsx("option",{value:A.id,children:A.name},A.id))})]}),i.jsxs("div",{className:"bg-white border border-slate-200 rounded-md px-4 py-1.5 shadow-sm",children:[i.jsx("span",{className:"block text-xs text-slate-400 uppercase",children:"Term Total Days"}),i.jsx("span",{className:"font-bold text-lg text-slate-800",children:u})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500"})," ","Excellent (90%+)"]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-400"})," ","Average (50-89%)"]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-[#0B4A82] bg-[#E6F0FA] px-3 py-1.5 rounded-full border border-[#E6F0FA] shadow-sm",children:[i.jsx(Wi,{size:12,className:"text-[#0B4A82]"})," Critical (","<","50%)"]})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-0",children:c?i.jsx("div",{className:"text-center py-20 text-slate-400",children:"Calculating Attendance Data..."}):i.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4",children:"Student Name"}),i.jsx("th",{className:"px-6 py-4 text-center",children:"Days Present"}),i.jsx("th",{className:"px-6 py-4 text-center",children:"Total School Days"}),i.jsx("th",{className:"px-6 py-4 w-1/3",children:"Attendance Rate"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:r.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"No students found in this class."})}):r.map(A=>{let m="bg-emerald-500",x="text-emerald-700 bg-emerald-50 border-emerald-200",g="hover:bg-slate-50",b=null;return A.percentage<50?(m="bg-red-500",x="text-[#0B4A82] bg-[#E6F0FA] border-[#E6F0FA]",g="bg-[#E6F0FA]/60 hover:bg-[#E6F0FA]/80",b=i.jsx("span",{title:"Critical Attendance",children:i.jsx(Wi,{size:14,className:"text-[#0B4A82] ml-2"})})):A.percentage<90&&(m="bg-amber-400",x="text-amber-700 bg-amber-50 border-amber-200"),i.jsxs("tr",{className:`${g} transition-colors border-b border-slate-100 last:border-0`,children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold text-white mr-3 shadow-sm ${A.gender==="Male"?"bg-[#0B4A82]":"bg-pink-500"}`,children:A.name.charAt(0)}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex items-center",children:[A.name,b]}),i.jsx("p",{className:"text-xs text-slate-500",children:A.gender})]})]})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:"font-bold text-slate-800 text-lg",children:A.presentDays})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:"text-slate-500",children:A.totalDays})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2.5 bg-slate-200 rounded-full overflow-hidden shadow-inner",children:i.jsx("div",{className:`h-full ${m} transition-all duration-500 rounded-full`,style:{width:`${A.percentage}%`}})}),i.jsxs("span",{className:`text-xs font-bold px-2.5 py-1 rounded border ${x} min-w-[3.5rem] text-center shadow-sm`,children:[A.percentage,"%"]})]})})]},A.id)})})]})})]})})},T7=()=>{const{school:s}=dc(),e=(s==null?void 0:s.id)||null,[t,n]=Z.useState([]),[r,o]=Z.useState(!1),[c,h]=Z.useState(""),[u,f]=Z.useState("");Z.useEffect(()=>{(async()=>{o(!0);try{if(!e){n([]);return}const g=await ot.getSchoolConfig(e);g.schoolReopenDate&&!c&&h(g.schoolReopenDate),g.vacationDate&&!u&&f(g.vacationDate);const b=c||g.schoolReopenDate||void 0,I=u||g.vacationDate||void 0,N=await ot.getTeacherAttendanceAnalytics(e,b,I);n(N)}catch(g){console.error("Error fetching teacher attendance analytics:",g)}finally{o(!1)}})()},[c,u,e]);const A=x=>{switch(x){case"improving":return i.jsx(Ud,{className:"text-emerald-600",size:16});case"declining":return i.jsx(J5,{className:"text-[#0B4A82]",size:16});default:return i.jsx($5,{className:"text-slate-400",size:16})}},m=x=>{switch(x){case"improving":return"text-emerald-700 bg-emerald-50 border-emerald-200";case"declining":return"text-[#0B4A82] bg-[#E6F0FA] border-[#E6F0FA]";default:return"text-slate-600 bg-slate-50 border-slate-200"}};return i.jsx(lr,{title:"Teacher Attendance Analytics",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col xl:flex-row justify-between xl:items-center gap-4 bg-slate-50",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Teacher Attendance Overview"}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Term Start Date"}),i.jsx("input",{type:"date",className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-40 bg-white text-slate-900",value:c,onChange:x=>h(x.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Vacation Date"}),i.jsx("input",{type:"date",className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-40 bg-white text-slate-900",value:u,onChange:x=>f(x.target.value)})]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[i.jsx(Ud,{size:12,className:"text-emerald-600"})," Improving"]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[i.jsx($5,{size:12,className:"text-slate-400"})," Stable"]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-[#0B4A82] bg-[#E6F0FA] px-3 py-1.5 rounded-full border border-[#E6F0FA] shadow-sm",children:[i.jsx(J5,{size:12,className:"text-[#0B4A82]"})," Declining"]})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-0",children:r?i.jsx("div",{className:"text-center py-20 text-slate-400",children:"Analyzing Teacher Attendance Data..."}):i.jsx("div",{className:"p-6 space-y-6",children:t.length===0?i.jsx("div",{className:"text-center py-20 text-slate-400",children:"No teacher attendance data found."}):t.map(x=>i.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-[#0B4A82] border-2 border-[#E6F0FA] flex items-center justify-center text-white font-bold text-lg shadow-lg",children:x.teacherName.charAt(0)}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800",children:x.teacherName}),i.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mo,{size:14,className:"text-slate-500"}),i.jsxs("span",{className:"text-sm text-slate-600",children:[x.termStartDate," -"," ",x.vacationDate||"Present"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(DA,{size:14,className:"text-emerald-600"}),i.jsxs("span",{className:"text-sm font-semibold text-emerald-700",children:[x.overallAttendance,"% Overall Attendance"]})]})]})]})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Monthly Attendance Breakdown"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:x.monthlyBreakdown.map(g=>i.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"font-semibold text-slate-800",children:g.month}),A(g.trend)]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600",children:"Working Days:"}),i.jsx("span",{className:"font-medium",children:g.totalWorkingDays})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600",children:"Present:"}),i.jsx("span",{className:"font-medium text-emerald-700",children:g.presentDays})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600",children:"Absent:"}),i.jsx("span",{className:"font-medium text-rose-600",children:g.absentDays})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Attendance Rate"}),i.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${m(g.trend)}`,children:[g.attendanceRate,"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.attendanceRate>=90?"bg-emerald-500":g.attendanceRate>=70?"bg-amber-400":"bg-[#1160A8]"}`,style:{width:`${g.attendanceRate}%`}})})]})]})]},g.month))})]}),x.overallAttendance<70&&i.jsxs("div",{className:"mt-4 bg-[#E6F0FA] border border-[#E6F0FA] rounded-lg p-4 flex items-center gap-3",children:[i.jsx(Wi,{className:"text-[#0B4A82]",size:20}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-[#0B4A82]",children:"Critical Attendance Alert"}),i.jsx("p",{className:"text-xs text-[#1160A8]",children:"This teacher has below 70% overall attendance and may need intervention."})]})]})]},x.teacherId))})})]})})},I7=()=>{var N,C;const{school:s}=dc(),e=(s==null?void 0:s.id)||null,[t,n]=Z.useState(Es[0].id),[r,o]=Z.useState([]),[c,h]=Z.useState({pass:[],fail:[]}),[u,f]=Z.useState([]),[A,m]=Z.useState(!1),[x,g]=Z.useState({currentTerm:`Term ${Xi}`,academicYear:Io,schoolReopenDate:""}),b=((N=Es.find(E=>E.id===t))==null?void 0:N.name)||"Class";Z.useEffect(()=>{t&&(async()=>{if(m(!0),!e){o([]),f([]),m(!1);return}const F=Es.find(V=>V.id===t);let L=await ot.getSubjects(e,t);if(!L.length&&F)switch(F.level){case"NURSERY":L=r7;break;case"KG":L=a7;break;case"PRIMARY":L=i7;break;case"JHS":L=o7;break;default:L=[]}if(f(L),L.length===0){o([]),m(!1);return}const O=await ot.getSchoolConfig(e);g({currentTerm:O.currentTerm||`Term ${Xi}`,academicYear:O.academicYear||Io,schoolReopenDate:O.schoolReopenDate||""});let H=Xi;if(O.currentTerm){const V=O.currentTerm.match(/\d+/);V&&(H=parseInt(V[0],10))}const Q=await ot.getStudents(e,t),U=await ot.getStudentRemarks(e,t),R=await Promise.all(Q.map(async V=>{let G=0,ae=0;const ue={};for(const Y of L){const pe=(await ot.getAssessments(e,t,Y)).find(ee=>ee.studentId===V.id&&ee.term===H);if(pe){const ee=pe.total??_A(pe);ue[Y]=ee,G+=ee,ae++}else ue[Y]="-"}const oe=ae>0?(G/ae).toFixed(1):"0",X=U.find(Y=>Y.studentId===V.id&&Number(Y.term)===H);return{student:V,scores:ue,totalScore:G,average:oe,remark:X?X.remark:"N/A"}}));R.sort((V,G)=>G.totalScore-V.totalScore),o(R);const $=R.filter(V=>V.totalScore>=500),P=R.filter(V=>V.totalScore<500);h({pass:$,fail:P}),m(!1)})()},[t,e]);const I=()=>{var $,P,V;if(r.length===0)return;const E=["Position","Student Name",...u,"Total Score","Average Grade","Remark"],F=r.map((G,ae)=>{const ue=u.map(oe=>G.scores[oe]);return[ae+1,`"${G.student.name}"`,...ue,G.totalScore,G.average,`"${G.remark}"`]}),L=[E.join(","),...F.map(G=>G.join(","))].join(`
`),O=new Blob([L],{type:"text/csv;charset=utf-8;"}),H=URL.createObjectURL(O),Q=document.createElement("a"),R=`${(($=Es.find(G=>G.id===t))==null?void 0:$.name)||"Class"}_Report_${x.academicYear.replace("-","_")}_Term${((V=(P=x.currentTerm)==null?void 0:P.match(/\d+/))==null?void 0:V[0])||Xi}.csv`;Q.setAttribute("href",H),Q.setAttribute("download",R),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)};return i.jsxs(lr,{title:"Academic Reports",children:[i.jsx("style",{children:`
                @media print {
                    @page { size: landscape; margin: 10mm; }
                    body * {
                        visibility: hidden;
                    }
                    #report-content, #report-content * {
                        visibility: visible;
                    }
                    #report-content {
                        position: fixed;
                        left: 0;
                        top: 0;
                        width: 100%;
                        height: 100%;
                        margin: 0;
                        padding: 0;
                        background: white;
                        z-index: 9999;
                    }
                    .no-print {
                        display: none !important;
                    }
                    /* Ensure table expands fully and isn't cut off by scroll areas */
                    #table-container {
                        overflow: visible !important;
                        height: auto !important;
                    }
                }
            `}),i.jsxs("div",{id:"report-content",className:"bg-white rounded-2xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)] print:h-auto print:border-none print:shadow-none",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100 bg-gradient-to-r from-indigo-50 via-white to-emerald-50 print:bg-white print:border-none",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-2xl bg-indigo-100 text-indigo-700 flex items-center justify-center",children:i.jsx(zl,{size:22})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Academic Reports"}),i.jsxs("p",{className:"text-sm text-slate-600",children:[x.currentTerm,"  ",x.academicYear]})]})]}),i.jsxs("div",{className:"hidden print:block text-2xl font-bold text-slate-900",children:[b," Report"]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("select",{className:"border border-slate-200 rounded-full px-4 py-2 text-sm bg-white text-slate-700 shadow-sm no-print focus:ring-2 focus:ring-emerald-200",value:t,onChange:E=>n(E.target.value),children:Es.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))}),i.jsxs("button",{onClick:I,disabled:A||r.length===0,className:"flex items-center gap-2 text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 px-4 py-2 rounded-full transition-colors no-print font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(sv,{size:18})," Export CSV"]})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(xl,{className:"h-4 w-4 text-indigo-500"}),"Students: ",r.length]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 font-medium text-emerald-700 shadow-sm",children:[i.jsx(DA,{className:"h-4 w-4"}),"Pass: ",c.pass.length]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1 font-medium text-rose-700 shadow-sm",children:[i.jsx(Fd,{className:"h-4 w-4"}),"Fail: ",c.fail.length]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(zl,{className:"h-4 w-4"}),"Subjects: ",u.length]})]})]}),i.jsxs("div",{id:"table-container",className:"flex-1 overflow-auto p-4 print:overflow-visible print:p-0",children:[((C=x.currentTerm)==null?void 0:C.includes("3"))&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6 no-print",children:[i.jsxs("div",{className:"bg-emerald-50/70 border border-emerald-100 rounded-2xl p-4 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-sm font-semibold text-emerald-800",children:"Passed (>= 500)"}),i.jsx("span",{className:"text-xs text-emerald-700 font-semibold",children:c.pass.length})]}),c.pass.length===0?i.jsx("p",{className:"text-sm text-emerald-700",children:"No passing students."}):i.jsx("ul",{className:"text-sm text-emerald-900 space-y-1 max-h-40 overflow-y-auto",children:c.pass.map(E=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{children:E.student.name}),i.jsx("span",{className:"font-semibold",children:E.totalScore})]},E.student.id))})]}),i.jsxs("div",{className:"bg-rose-50/70 border border-rose-100 rounded-2xl p-4 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-sm font-semibold text-rose-800",children:"Failed (< 500)"}),i.jsx("span",{className:"text-xs text-rose-700 font-semibold",children:c.fail.length})]}),c.fail.length===0?i.jsx("p",{className:"text-sm text-rose-700",children:"No failing students."}):i.jsx("ul",{className:"text-sm text-rose-900 space-y-1 max-h-40 overflow-y-auto",children:c.fail.map(E=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{children:E.student.name}),i.jsx("span",{className:"font-semibold",children:E.totalScore})]},E.student.id))})]})]}),A?i.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Report Data..."}):i.jsx("div",{className:"overflow-x-auto print:overflow-visible rounded-2xl border border-slate-100 bg-white shadow-sm",children:i.jsxs("table",{className:"w-full text-left text-sm border-collapse text-black",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold print:bg-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 border border-slate-200 w-10",children:"Pos"}),i.jsx("th",{className:"px-4 py-3 border border-slate-200 min-w-[200px]",children:"Student Name"}),u.map(E=>i.jsx("th",{className:"px-2 py-3 border border-slate-200 w-24 text-center text-xs",children:E.substring(0,3)},E)),i.jsx("th",{className:"px-4 py-3 border border-slate-200 text-center w-20 bg-emerald-50 text-emerald-900 print:bg-slate-100",children:"Total"}),i.jsx("th",{className:"px-4 py-3 border border-slate-200 text-center w-20 bg-[#E6F0FA] text-[#0B4A82] print:bg-slate-100",children:"Avg"}),i.jsx("th",{className:"px-4 py-3 border border-slate-200 min-w-[200px]",children:"Remark"})]})}),i.jsxs("tbody",{children:[r.map((E,F)=>i.jsxs("tr",{className:"hover:bg-slate-50 print:hover:bg-transparent",children:[i.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-medium",children:F+1}),i.jsx("td",{className:"px-4 py-2 border border-slate-200 font-medium",children:E.student.name}),u.map(L=>{const O=E.scores[L],H=typeof O=="number"?pm(O).grade:"-";return i.jsx("td",{className:"px-2 py-2 border border-slate-200 text-center",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:O}),typeof O=="number"&&i.jsx("span",{className:`text-[10px] font-bold ${Mg(H).split(" ")[0]}`,children:H})]})},L)}),i.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-bold bg-emerald-50 text-emerald-900 print:bg-transparent",children:E.totalScore}),i.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-bold bg-[#E6F0FA] text-[#0B4A82] print:bg-transparent",children:E.average}),i.jsx("td",{className:"px-4 py-2 border border-slate-200 text-sm",children:E.remark})]},E.student.id)),r.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:u.length+5,className:"p-8 text-center text-slate-400",children:"No students found."})})]})]})})]})]})]})};var e1={exports:{}};const _7="modulepreload",F7=function(s,e){return new URL(s,e).href},sS={},t1=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let c=function(A){return Promise.all(A.map(m=>Promise.resolve(m).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const h=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=c(t.map(A=>{if(A=F7(A,n),A in sS)return;sS[A]=!0;const m=A.endsWith(".css"),x=m?'[rel="stylesheet"]':"";if(!!n)for(let I=h.length-1;I>=0;I--){const N=h[I];if(N.href===A&&(!m||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${A}"]${x}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":_7,m||(b.as="script"),b.crossOrigin="",b.href=A,f&&b.setAttribute("nonce",f),document.head.appendChild(b),m)return new Promise((I,N)=>{b.addEventListener("load",I),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${A}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return r.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function $r(s){"@babel/helpers - typeof";return $r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(s)}var Ac=Uint8Array,lA=Uint16Array,c2=Int32Array,u2=new Ac([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d2=new Ac([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nS=new Ac([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KT=function(s,e){for(var t=new lA(31),n=0;n<31;++n)t[n]=e+=1<<s[n-1];for(var r=new c2(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)r[o]=o-t[n]<<5|n;return{b:t,r}},zT=KT(u2,2),U7=zT.b,vb=zT.r;U7[28]=258,vb[258]=28;var D7=KT(d2,0),rS=D7.r,yb=new lA(32768);for(var Da=0;Da<32768;++Da){var yd=(Da&43690)>>1|(Da&21845)<<1;yd=(yd&52428)>>2|(yd&13107)<<2,yd=(yd&61680)>>4|(yd&3855)<<4,yb[Da]=((yd&65280)>>8|(yd&255)<<8)>>1}var Yp=(function(s,e,t){for(var n=s.length,r=0,o=new lA(e);r<n;++r)s[r]&&++o[s[r]-1];var c=new lA(e);for(r=1;r<e;++r)c[r]=c[r-1]+o[r-1]<<1;var h;if(t){h=new lA(1<<e);var u=15-e;for(r=0;r<n;++r)if(s[r])for(var f=r<<4|s[r],A=e-s[r],m=c[s[r]-1]++<<A,x=m|(1<<A)-1;m<=x;++m)h[yb[m]>>u]=f}else for(h=new lA(n),r=0;r<n;++r)s[r]&&(h[r]=yb[c[s[r]-1]++]>>15-s[r]);return h}),nf=new Ac(288);for(var Da=0;Da<144;++Da)nf[Da]=8;for(var Da=144;Da<256;++Da)nf[Da]=9;for(var Da=256;Da<280;++Da)nf[Da]=7;for(var Da=280;Da<288;++Da)nf[Da]=8;var nv=new Ac(32);for(var Da=0;Da<32;++Da)nv[Da]=5;var R7=Yp(nf,9,0),L7=Yp(nv,5,0),GT=function(s){return(s+7)/8|0},Q7=function(s,e,t){return(t==null||t>s.length)&&(t=s.length),new Ac(s.subarray(e,t))},vu=function(s,e,t){t<<=e&7;var n=e/8|0;s[n]|=t,s[n+1]|=t>>8},Np=function(s,e,t){t<<=e&7;var n=e/8|0;s[n]|=t,s[n+1]|=t>>8,s[n+2]|=t>>16},s1=function(s,e){for(var t=[],n=0;n<s.length;++n)s[n]&&t.push({s:n,f:s[n]});var r=t.length,o=t.slice();if(!r)return{t:YT,l:0};if(r==1){var c=new Ac(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(O,H){return O.f-H.f}),t.push({s:-1,f:25001});var h=t[0],u=t[1],f=0,A=1,m=2;for(t[0]={s:-1,f:h.f+u.f,l:h,r:u};A!=r-1;)h=t[t[f].f<t[m].f?f++:m++],u=t[f!=A&&t[f].f<t[m].f?f++:m++],t[A++]={s:-1,f:h.f+u.f,l:h,r:u};for(var x=o[0].s,n=1;n<r;++n)o[n].s>x&&(x=o[n].s);var g=new lA(x+1),b=bb(t[A-1],g,0);if(b>e){var n=0,I=0,N=b-e,C=1<<N;for(o.sort(function(H,Q){return g[Q.s]-g[H.s]||H.f-Q.f});n<r;++n){var E=o[n].s;if(g[E]>e)I+=C-(1<<b-g[E]),g[E]=e;else break}for(I>>=N;I>0;){var F=o[n].s;g[F]<e?I-=1<<e-g[F]++-1:++n}for(;n>=0&&I;--n){var L=o[n].s;g[L]==e&&(--g[L],++I)}b=e}return{t:new Ac(g),l:b}},bb=function(s,e,t){return s.s==-1?Math.max(bb(s.l,e,t+1),bb(s.r,e,t+1)):e[s.s]=t},aS=function(s){for(var e=s.length;e&&!s[--e];);for(var t=new lA(++e),n=0,r=s[0],o=1,c=function(u){t[n++]=u},h=1;h<=e;++h)if(s[h]==r&&h!=e)++o;else{if(!r&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(r),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(r);o=1,r=s[h]}return{c:t.subarray(0,n),n:e}},Ep=function(s,e){for(var t=0,n=0;n<e.length;++n)t+=s[n]*e[n];return t},$T=function(s,e,t){var n=t.length,r=GT(e+2);s[r]=n&255,s[r+1]=n>>8,s[r+2]=s[r]^255,s[r+3]=s[r+1]^255;for(var o=0;o<n;++o)s[r+o+4]=t[o];return(r+4+n)*8},iS=function(s,e,t,n,r,o,c,h,u,f,A){vu(e,A++,t),++r[256];for(var m=s1(r,15),x=m.t,g=m.l,b=s1(o,15),I=b.t,N=b.l,C=aS(x),E=C.c,F=C.n,L=aS(I),O=L.c,H=L.n,Q=new lA(19),U=0;U<E.length;++U)++Q[E[U]&31];for(var U=0;U<O.length;++U)++Q[O[U]&31];for(var R=s1(Q,7),$=R.t,P=R.l,V=19;V>4&&!$[nS[V-1]];--V);var G=f+5<<3,ae=Ep(r,nf)+Ep(o,nv)+c,ue=Ep(r,x)+Ep(o,I)+c+14+3*V+Ep(Q,$)+2*Q[16]+3*Q[17]+7*Q[18];if(u>=0&&G<=ae&&G<=ue)return $T(e,A,s.subarray(u,u+f));var oe,X,Y,re;if(vu(e,A,1+(ue<ae)),A+=2,ue<ae){oe=Yp(x,g,0),X=x,Y=Yp(I,N,0),re=I;var pe=Yp($,P,0);vu(e,A,F-257),vu(e,A+5,H-1),vu(e,A+10,V-4),A+=14;for(var U=0;U<V;++U)vu(e,A+3*U,$[nS[U]]);A+=3*V;for(var ee=[E,O],M=0;M<2;++M)for(var J=ee[M],U=0;U<J.length;++U){var ie=J[U]&31;vu(e,A,pe[ie]),A+=$[ie],ie>15&&(vu(e,A,J[U]>>5&127),A+=J[U]>>12)}}else oe=R7,X=nf,Y=L7,re=nv;for(var U=0;U<h;++U){var le=n[U];if(le>255){var ie=le>>18&31;Np(e,A,oe[ie+257]),A+=X[ie+257],ie>7&&(vu(e,A,le>>23&31),A+=u2[ie]);var ce=le&31;Np(e,A,Y[ce]),A+=re[ce],ce>3&&(Np(e,A,le>>5&8191),A+=d2[ce])}else Np(e,A,oe[le]),A+=X[le]}return Np(e,A,oe[256]),A+X[256]},O7=new c2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YT=new Ac(0),P7=function(s,e,t,n,r,o){var c=o.z||s.length,h=new Ac(n+c+5*(1+Math.ceil(c/7e3))+r),u=h.subarray(n,h.length-r),f=o.l,A=(o.r||0)&7;if(e){A&&(u[0]=o.r>>3);for(var m=O7[e-1],x=m>>13,g=m&8191,b=(1<<t)-1,I=o.p||new lA(32768),N=o.h||new lA(b+1),C=Math.ceil(t/3),E=2*C,F=function(Pe){return(s[Pe]^s[Pe+1]<<C^s[Pe+2]<<E)&b},L=new c2(25e3),O=new lA(288),H=new lA(32),Q=0,U=0,R=o.i||0,$=0,P=o.w||0,V=0;R+2<c;++R){var G=F(R),ae=R&32767,ue=N[G];if(I[ae]=ue,N[G]=ae,P<=R){var oe=c-R;if((Q>7e3||$>24576)&&(oe>423||!f)){A=iS(s,u,0,L,O,H,U,$,V,R-V,A),$=Q=U=0,V=R;for(var X=0;X<286;++X)O[X]=0;for(var X=0;X<30;++X)H[X]=0}var Y=2,re=0,pe=g,ee=ae-ue&32767;if(oe>2&&G==F(R-ee))for(var M=Math.min(x,oe)-1,J=Math.min(32767,R),ie=Math.min(258,oe);ee<=J&&--pe&&ae!=ue;){if(s[R+Y]==s[R+Y-ee]){for(var le=0;le<ie&&s[R+le]==s[R+le-ee];++le);if(le>Y){if(Y=le,re=ee,le>M)break;for(var ce=Math.min(ee,le-2),ve=0,X=0;X<ce;++X){var Se=R-ee+X&32767,ge=I[Se],Be=Se-ge&32767;Be>ve&&(ve=Be,ue=Se)}}}ae=ue,ue=I[ae],ee+=ae-ue&32767}if(re){L[$++]=268435456|vb[Y]<<18|rS[re];var Fe=vb[Y]&31,Qe=rS[re]&31;U+=u2[Fe]+d2[Qe],++O[257+Fe],++H[Qe],P=R+Y,++Q}else L[$++]=s[R],++O[s[R]]}}for(R=Math.max(R,P);R<c;++R)L[$++]=s[R],++O[s[R]];A=iS(s,u,f,L,O,H,U,$,V,R-V,A),f||(o.r=A&7|u[A/8|0]<<3,A-=7,o.h=N,o.p=I,o.i=R,o.w=P)}else{for(var R=o.w||0;R<c+f;R+=65535){var Ze=R+65535;Ze>=c&&(u[A/8|0]=f,Ze=c),A=$T(u,A+1,s.subarray(R,Ze))}o.i=c}return Q7(h,0,n+GT(A)+r)},WT=function(){var s=1,e=0;return{p:function(t){for(var n=s,r=e,o=t.length|0,c=0;c!=o;){for(var h=Math.min(c+2655,o);c<h;++c)r+=n+=t[c];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}s=n,e=r},d:function(){return s%=65521,e%=65521,(s&255)<<24|(s&65280)<<8|(e&255)<<8|e>>8}}},k7=function(s,e,t,n,r){if(!r&&(r={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),c=new Ac(o.length+s.length);c.set(o),c.set(s,o.length),s=c,r.w=o.length}return P7(s,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+e.mem,t,n,r)},XT=function(s,e,t){for(;t;++e)s[e]=t,t>>>=8},M7=function(s,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(s[0]=120,s[1]=n<<6|(e.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,e.dictionary){var r=WT();r.p(e.dictionary),XT(s,2,r.d())}};function wb(s,e){e||(e={});var t=WT();t.p(s);var n=k7(s,e,e.dictionary?6:2,4);return M7(n,e),XT(n,n.length-4,t.d()),n}var H7=typeof TextDecoder<"u"&&new TextDecoder,V7=0;try{H7.decode(YT,{stream:!0}),V7=1}catch{}function K7(s){if(Array.isArray(s))return s}function z7(s,e){var t=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(t!=null){var n,r,o,c,h=[],u=!0,f=!1;try{if(o=(t=t.call(s)).next,e!==0)for(;!(u=(n=o.call(t)).done)&&(h.push(n.value),h.length!==e);u=!0);}catch(A){f=!0,r=A}finally{try{if(!u&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(f)throw r}}return h}}function oS(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,n=Array(e);t<e;t++)n[t]=s[t];return n}function G7(s,e){if(s){if(typeof s=="string")return oS(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oS(s,e):void 0}}function $7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lS(s,e){return K7(s)||z7(s,e)||G7(s,e)||$7()}function AS(s,e="utf8"){return new TextDecoder(e).decode(s)}const Y7=new TextEncoder;function W7(s){return Y7.encode(s)}const X7=1024*8,J7=(()=>{const s=new Uint8Array(4),e=new Uint32Array(s.buffer);return!((e[0]=1)&s[0])})(),n1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class h2{constructor(e=X7,t={}){Gr(this,"buffer");Gr(this,"byteLength");Gr(this,"byteOffset");Gr(this,"length");Gr(this,"offset");Gr(this,"lastWrittenByte");Gr(this,"littleEndian");Gr(this,"_data");Gr(this,"_mark");Gr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,o=e.byteLength-r;let c=r;(ArrayBuffer.isView(e)||e instanceof h2)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+r),e=e.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,r=new Uint8Array(n);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=n1[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,o=this.buffer.slice(r,r+n);if(this.littleEndian===J7&&t!=="uint8"&&t!=="int8"){const h=new Uint8Array(this.buffer.slice(r,r+n));h.reverse();const u=new n1[t](h.buffer);return this.offset+=n,u.reverse(),u}const c=new n1[t](o);return this.offset+=n,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return AS(this.readBytes(e))}decodeText(e=1,t="utf8"){return AS(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(W7(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Im(s){let e=s.length;for(;--e>=0;)s[e]=0}const q7=3,Z7=258,JT=29,eH=256,tH=eH+1+JT,qT=30,sH=512,nH=new Array((tH+2)*2);Im(nH);const rH=new Array(qT*2);Im(rH);const aH=new Array(sH);Im(aH);const iH=new Array(Z7-q7+1);Im(iH);const oH=new Array(JT);Im(oH);const lH=new Array(qT);Im(lH);const AH=(s,e,t,n)=>{let r=s&65535|0,o=s>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do r=r+e[n++]|0,o=o+r|0;while(--c);r%=65521,o%=65521}return r|o<<16|0};var jb=AH;const cH=()=>{let s,e=[];for(var t=0;t<256;t++){s=t;for(var n=0;n<8;n++)s=s&1?3988292384^s>>>1:s>>>1;e[t]=s}return e},uH=new Uint32Array(cH()),dH=(s,e,t,n)=>{const r=uH,o=n+t;s^=-1;for(let c=n;c<o;c++)s=s>>>8^r[(s^e[c])&255];return s^-1};var Qc=dH,Bb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ZT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const hH=(s,e)=>Object.prototype.hasOwnProperty.call(s,e);var fH=function(s){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)hH(t,n)&&(s[n]=t[n])}}return s},mH=s=>{let e=0;for(let n=0,r=s.length;n<r;n++)e+=s[n].length;const t=new Uint8Array(e);for(let n=0,r=0,o=s.length;n<o;n++){let c=s[n];t.set(c,r),r+=c.length}return t},eI={assign:fH,flattenChunks:mH};let tI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tI=!1}const gg=new Uint8Array(256);for(let s=0;s<256;s++)gg[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;gg[254]=gg[254]=1;var pH=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let e,t,n,r,o,c=s.length,h=0;for(r=0;r<c;r++)t=s.charCodeAt(r),(t&64512)===55296&&r+1<c&&(n=s.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),h+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(h),o=0,r=0;o<h;r++)t=s.charCodeAt(r),(t&64512)===55296&&r+1<c&&(n=s.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const gH=(s,e)=>{if(e<65534&&s.subarray&&tI)return String.fromCharCode.apply(null,s.length===e?s:s.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(s[n]);return t};var xH=(s,e)=>{const t=e||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,e));let n,r;const o=new Array(t*2);for(r=0,n=0;n<t;){let c=s[n++];if(c<128){o[r++]=c;continue}let h=gg[c];if(h>4){o[r++]=65533,n+=h-1;continue}for(c&=h===2?31:h===3?15:7;h>1&&n<t;)c=c<<6|s[n++]&63,h--;if(h>1){o[r++]=65533;continue}c<65536?o[r++]=c:(c-=65536,o[r++]=55296|c>>10&1023,o[r++]=56320|c&1023)}return gH(o,r)},vH=(s,e)=>{e=e||s.length,e>s.length&&(e=s.length);let t=e-1;for(;t>=0&&(s[t]&192)===128;)t--;return t<0||t===0?e:t+gg[s[t]]>e?t:e},Sb={string2buf:pH,buf2string:xH,utf8border:vH};function yH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var bH=yH;const Y0=16209,wH=16191;var jH=function(e,t){let n,r,o,c,h,u,f,A,m,x,g,b,I,N,C,E,F,L,O,H,Q,U,R,$;const P=e.state;n=e.next_in,R=e.input,r=n+(e.avail_in-5),o=e.next_out,$=e.output,c=o-(t-e.avail_out),h=o+(e.avail_out-257),u=P.dmax,f=P.wsize,A=P.whave,m=P.wnext,x=P.window,g=P.hold,b=P.bits,I=P.lencode,N=P.distcode,C=(1<<P.lenbits)-1,E=(1<<P.distbits)-1;e:do{b<15&&(g+=R[n++]<<b,b+=8,g+=R[n++]<<b,b+=8),F=I[g&C];t:for(;;){if(L=F>>>24,g>>>=L,b-=L,L=F>>>16&255,L===0)$[o++]=F&65535;else if(L&16){O=F&65535,L&=15,L&&(b<L&&(g+=R[n++]<<b,b+=8),O+=g&(1<<L)-1,g>>>=L,b-=L),b<15&&(g+=R[n++]<<b,b+=8,g+=R[n++]<<b,b+=8),F=N[g&E];s:for(;;){if(L=F>>>24,g>>>=L,b-=L,L=F>>>16&255,L&16){if(H=F&65535,L&=15,b<L&&(g+=R[n++]<<b,b+=8,b<L&&(g+=R[n++]<<b,b+=8)),H+=g&(1<<L)-1,H>u){e.msg="invalid distance too far back",P.mode=Y0;break e}if(g>>>=L,b-=L,L=o-c,H>L){if(L=H-L,L>A&&P.sane){e.msg="invalid distance too far back",P.mode=Y0;break e}if(Q=0,U=x,m===0){if(Q+=f-L,L<O){O-=L;do $[o++]=x[Q++];while(--L);Q=o-H,U=$}}else if(m<L){if(Q+=f+m-L,L-=m,L<O){O-=L;do $[o++]=x[Q++];while(--L);if(Q=0,m<O){L=m,O-=L;do $[o++]=x[Q++];while(--L);Q=o-H,U=$}}}else if(Q+=m-L,L<O){O-=L;do $[o++]=x[Q++];while(--L);Q=o-H,U=$}for(;O>2;)$[o++]=U[Q++],$[o++]=U[Q++],$[o++]=U[Q++],O-=3;O&&($[o++]=U[Q++],O>1&&($[o++]=U[Q++]))}else{Q=o-H;do $[o++]=$[Q++],$[o++]=$[Q++],$[o++]=$[Q++],O-=3;while(O>2);O&&($[o++]=$[Q++],O>1&&($[o++]=$[Q++]))}}else if((L&64)===0){F=N[(F&65535)+(g&(1<<L)-1)];continue s}else{e.msg="invalid distance code",P.mode=Y0;break e}break}}else if((L&64)===0){F=I[(F&65535)+(g&(1<<L)-1)];continue t}else if(L&32){P.mode=wH;break e}else{e.msg="invalid literal/length code",P.mode=Y0;break e}break}}while(n<r&&o<h);O=b>>3,n-=O,b-=O<<3,g&=(1<<b)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=o<h?257+(h-o):257-(o-h),P.hold=g,P.bits=b};const kf=15,cS=852,uS=592,dS=0,r1=1,hS=2,BH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),SH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),CH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),NH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),EH=(s,e,t,n,r,o,c,h)=>{const u=h.bits;let f=0,A=0,m=0,x=0,g=0,b=0,I=0,N=0,C=0,E=0,F,L,O,H,Q,U=null,R;const $=new Uint16Array(kf+1),P=new Uint16Array(kf+1);let V=null,G,ae,ue;for(f=0;f<=kf;f++)$[f]=0;for(A=0;A<n;A++)$[e[t+A]]++;for(g=u,x=kf;x>=1&&$[x]===0;x--);if(g>x&&(g=x),x===0)return r[o++]=1<<24|64<<16|0,r[o++]=1<<24|64<<16|0,h.bits=1,0;for(m=1;m<x&&$[m]===0;m++);for(g<m&&(g=m),N=1,f=1;f<=kf;f++)if(N<<=1,N-=$[f],N<0)return-1;if(N>0&&(s===dS||x!==1))return-1;for(P[1]=0,f=1;f<kf;f++)P[f+1]=P[f]+$[f];for(A=0;A<n;A++)e[t+A]!==0&&(c[P[e[t+A]]++]=A);if(s===dS?(U=V=c,R=20):s===r1?(U=BH,V=SH,R=257):(U=CH,V=NH,R=0),E=0,A=0,f=m,Q=o,b=g,I=0,O=-1,C=1<<g,H=C-1,s===r1&&C>cS||s===hS&&C>uS)return 1;for(;;){G=f-I,c[A]+1<R?(ae=0,ue=c[A]):c[A]>=R?(ae=V[c[A]-R],ue=U[c[A]-R]):(ae=96,ue=0),F=1<<f-I,L=1<<b,m=L;do L-=F,r[Q+(E>>I)+L]=G<<24|ae<<16|ue|0;while(L!==0);for(F=1<<f-1;E&F;)F>>=1;if(F!==0?(E&=F-1,E+=F):E=0,A++,--$[f]===0){if(f===x)break;f=e[t+c[A]]}if(f>g&&(E&H)!==O){for(I===0&&(I=g),Q+=m,b=f-I,N=1<<b;b+I<x&&(N-=$[b+I],!(N<=0));)b++,N<<=1;if(C+=1<<b,s===r1&&C>cS||s===hS&&C>uS)return 1;O=E&H,r[O]=g<<24|b<<16|Q-o|0}}return E!==0&&(r[Q+E]=f-I<<24|64<<16|0),h.bits=g,0};var Wp=EH;const TH=0,sI=1,nI=2,{Z_FINISH:fS,Z_BLOCK:IH,Z_TREES:W0,Z_OK:rf,Z_STREAM_END:_H,Z_NEED_DICT:FH,Z_STREAM_ERROR:QA,Z_DATA_ERROR:rI,Z_MEM_ERROR:aI,Z_BUF_ERROR:UH,Z_DEFLATED:mS}=ZT,Vv=16180,pS=16181,gS=16182,xS=16183,vS=16184,yS=16185,bS=16186,wS=16187,jS=16188,BS=16189,rv=16190,yu=16191,a1=16192,SS=16193,i1=16194,CS=16195,NS=16196,ES=16197,TS=16198,X0=16199,J0=16200,IS=16201,_S=16202,FS=16203,US=16204,DS=16205,o1=16206,RS=16207,LS=16208,Wa=16209,iI=16210,oI=16211,DH=852,RH=592,LH=15,QH=LH,QS=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function OH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const uf=s=>{if(!s)return 1;const e=s.state;return!e||e.strm!==s||e.mode<Vv||e.mode>oI?1:0},lI=s=>{if(uf(s))return QA;const e=s.state;return s.total_in=s.total_out=e.total=0,s.msg="",e.wrap&&(s.adler=e.wrap&1),e.mode=Vv,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(DH),e.distcode=e.distdyn=new Int32Array(RH),e.sane=1,e.back=-1,rf},AI=s=>{if(uf(s))return QA;const e=s.state;return e.wsize=0,e.whave=0,e.wnext=0,lI(s)},cI=(s,e)=>{let t;if(uf(s))return QA;const n=s.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?QA:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,AI(s))},uI=(s,e)=>{if(!s)return QA;const t=new OH;s.state=t,t.strm=s,t.window=null,t.mode=Vv;const n=cI(s,e);return n!==rf&&(s.state=null),n},PH=s=>uI(s,QH);let OS=!0,l1,A1;const kH=s=>{if(OS){l1=new Int32Array(512),A1=new Int32Array(32);let e=0;for(;e<144;)s.lens[e++]=8;for(;e<256;)s.lens[e++]=9;for(;e<280;)s.lens[e++]=7;for(;e<288;)s.lens[e++]=8;for(Wp(sI,s.lens,0,288,l1,0,s.work,{bits:9}),e=0;e<32;)s.lens[e++]=5;Wp(nI,s.lens,0,32,A1,0,s.work,{bits:5}),OS=!1}s.lencode=l1,s.lenbits=9,s.distcode=A1,s.distbits=5},dI=(s,e,t,n)=>{let r;const o=s.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),o.window.set(e.subarray(t-n,t-n+r),o.wnext),n-=r,n?(o.window.set(e.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0},MH=(s,e)=>{let t,n,r,o,c,h,u,f,A,m,x,g,b,I,N=0,C,E,F,L,O,H,Q,U;const R=new Uint8Array(4);let $,P;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(uf(s)||!s.output||!s.input&&s.avail_in!==0)return QA;t=s.state,t.mode===yu&&(t.mode=a1),c=s.next_out,r=s.output,u=s.avail_out,o=s.next_in,n=s.input,h=s.avail_in,f=t.hold,A=t.bits,m=h,x=u,U=rf;e:for(;;)switch(t.mode){case Vv:if(t.wrap===0){t.mode=a1;break}for(;A<16;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,R[0]=f&255,R[1]=f>>>8&255,t.check=Qc(t.check,R,2,0),f=0,A=0,t.mode=pS;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){s.msg="incorrect header check",t.mode=Wa;break}if((f&15)!==mS){s.msg="unknown compression method",t.mode=Wa;break}if(f>>>=4,A-=4,Q=(f&15)+8,t.wbits===0&&(t.wbits=Q),Q>15||Q>t.wbits){s.msg="invalid window size",t.mode=Wa;break}t.dmax=1<<t.wbits,t.flags=0,s.adler=t.check=1,t.mode=f&512?BS:yu,f=0,A=0;break;case pS:for(;A<16;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(t.flags=f,(t.flags&255)!==mS){s.msg="unknown compression method",t.mode=Wa;break}if(t.flags&57344){s.msg="unknown header flags set",t.mode=Wa;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(R[0]=f&255,R[1]=f>>>8&255,t.check=Qc(t.check,R,2,0)),f=0,A=0,t.mode=gS;case gS:for(;A<32;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(R[0]=f&255,R[1]=f>>>8&255,R[2]=f>>>16&255,R[3]=f>>>24&255,t.check=Qc(t.check,R,4,0)),f=0,A=0,t.mode=xS;case xS:for(;A<16;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(R[0]=f&255,R[1]=f>>>8&255,t.check=Qc(t.check,R,2,0)),f=0,A=0,t.mode=vS;case vS:if(t.flags&1024){for(;A<16;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(R[0]=f&255,R[1]=f>>>8&255,t.check=Qc(t.check,R,2,0)),f=0,A=0}else t.head&&(t.head.extra=null);t.mode=yS;case yS:if(t.flags&1024&&(g=t.length,g>h&&(g=h),g&&(t.head&&(Q=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+g),Q)),t.flags&512&&t.wrap&4&&(t.check=Qc(t.check,n,g,o)),h-=g,o+=g,t.length-=g),t.length))break e;t.length=0,t.mode=bS;case bS:if(t.flags&2048){if(h===0)break e;g=0;do Q=n[o+g++],t.head&&Q&&t.length<65536&&(t.head.name+=String.fromCharCode(Q));while(Q&&g<h);if(t.flags&512&&t.wrap&4&&(t.check=Qc(t.check,n,g,o)),h-=g,o+=g,Q)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=wS;case wS:if(t.flags&4096){if(h===0)break e;g=0;do Q=n[o+g++],t.head&&Q&&t.length<65536&&(t.head.comment+=String.fromCharCode(Q));while(Q&&g<h);if(t.flags&512&&t.wrap&4&&(t.check=Qc(t.check,n,g,o)),h-=g,o+=g,Q)break e}else t.head&&(t.head.comment=null);t.mode=jS;case jS:if(t.flags&512){for(;A<16;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(t.wrap&4&&f!==(t.check&65535)){s.msg="header crc mismatch",t.mode=Wa;break}f=0,A=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),s.adler=t.check=0,t.mode=yu;break;case BS:for(;A<32;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}s.adler=t.check=QS(f),f=0,A=0,t.mode=rv;case rv:if(t.havedict===0)return s.next_out=c,s.avail_out=u,s.next_in=o,s.avail_in=h,t.hold=f,t.bits=A,FH;s.adler=t.check=1,t.mode=yu;case yu:if(e===IH||e===W0)break e;case a1:if(t.last){f>>>=A&7,A-=A&7,t.mode=o1;break}for(;A<3;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}switch(t.last=f&1,f>>>=1,A-=1,f&3){case 0:t.mode=SS;break;case 1:if(kH(t),t.mode=X0,e===W0){f>>>=2,A-=2;break e}break;case 2:t.mode=NS;break;case 3:s.msg="invalid block type",t.mode=Wa}f>>>=2,A-=2;break;case SS:for(f>>>=A&7,A-=A&7;A<32;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if((f&65535)!==(f>>>16^65535)){s.msg="invalid stored block lengths",t.mode=Wa;break}if(t.length=f&65535,f=0,A=0,t.mode=i1,e===W0)break e;case i1:t.mode=CS;case CS:if(g=t.length,g){if(g>h&&(g=h),g>u&&(g=u),g===0)break e;r.set(n.subarray(o,o+g),c),h-=g,o+=g,u-=g,c+=g,t.length-=g;break}t.mode=yu;break;case NS:for(;A<14;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(t.nlen=(f&31)+257,f>>>=5,A-=5,t.ndist=(f&31)+1,f>>>=5,A-=5,t.ncode=(f&15)+4,f>>>=4,A-=4,t.nlen>286||t.ndist>30){s.msg="too many length or distance symbols",t.mode=Wa;break}t.have=0,t.mode=ES;case ES:for(;t.have<t.ncode;){for(;A<3;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}t.lens[V[t.have++]]=f&7,f>>>=3,A-=3}for(;t.have<19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,$={bits:t.lenbits},U=Wp(TH,t.lens,0,19,t.lencode,0,t.work,$),t.lenbits=$.bits,U){s.msg="invalid code lengths set",t.mode=Wa;break}t.have=0,t.mode=TS;case TS:for(;t.have<t.nlen+t.ndist;){for(;N=t.lencode[f&(1<<t.lenbits)-1],C=N>>>24,E=N>>>16&255,F=N&65535,!(C<=A);){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(F<16)f>>>=C,A-=C,t.lens[t.have++]=F;else{if(F===16){for(P=C+2;A<P;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(f>>>=C,A-=C,t.have===0){s.msg="invalid bit length repeat",t.mode=Wa;break}Q=t.lens[t.have-1],g=3+(f&3),f>>>=2,A-=2}else if(F===17){for(P=C+3;A<P;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}f>>>=C,A-=C,Q=0,g=3+(f&7),f>>>=3,A-=3}else{for(P=C+7;A<P;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}f>>>=C,A-=C,Q=0,g=11+(f&127),f>>>=7,A-=7}if(t.have+g>t.nlen+t.ndist){s.msg="invalid bit length repeat",t.mode=Wa;break}for(;g--;)t.lens[t.have++]=Q}}if(t.mode===Wa)break;if(t.lens[256]===0){s.msg="invalid code -- missing end-of-block",t.mode=Wa;break}if(t.lenbits=9,$={bits:t.lenbits},U=Wp(sI,t.lens,0,t.nlen,t.lencode,0,t.work,$),t.lenbits=$.bits,U){s.msg="invalid literal/lengths set",t.mode=Wa;break}if(t.distbits=6,t.distcode=t.distdyn,$={bits:t.distbits},U=Wp(nI,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,$),t.distbits=$.bits,U){s.msg="invalid distances set",t.mode=Wa;break}if(t.mode=X0,e===W0)break e;case X0:t.mode=J0;case J0:if(h>=6&&u>=258){s.next_out=c,s.avail_out=u,s.next_in=o,s.avail_in=h,t.hold=f,t.bits=A,jH(s,x),c=s.next_out,r=s.output,u=s.avail_out,o=s.next_in,n=s.input,h=s.avail_in,f=t.hold,A=t.bits,t.mode===yu&&(t.back=-1);break}for(t.back=0;N=t.lencode[f&(1<<t.lenbits)-1],C=N>>>24,E=N>>>16&255,F=N&65535,!(C<=A);){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(E&&(E&240)===0){for(L=C,O=E,H=F;N=t.lencode[H+((f&(1<<L+O)-1)>>L)],C=N>>>24,E=N>>>16&255,F=N&65535,!(L+C<=A);){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}f>>>=L,A-=L,t.back+=L}if(f>>>=C,A-=C,t.back+=C,t.length=F,E===0){t.mode=DS;break}if(E&32){t.back=-1,t.mode=yu;break}if(E&64){s.msg="invalid literal/length code",t.mode=Wa;break}t.extra=E&15,t.mode=IS;case IS:if(t.extra){for(P=t.extra;A<P;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,A-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=_S;case _S:for(;N=t.distcode[f&(1<<t.distbits)-1],C=N>>>24,E=N>>>16&255,F=N&65535,!(C<=A);){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if((E&240)===0){for(L=C,O=E,H=F;N=t.distcode[H+((f&(1<<L+O)-1)>>L)],C=N>>>24,E=N>>>16&255,F=N&65535,!(L+C<=A);){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}f>>>=L,A-=L,t.back+=L}if(f>>>=C,A-=C,t.back+=C,E&64){s.msg="invalid distance code",t.mode=Wa;break}t.offset=F,t.extra=E&15,t.mode=FS;case FS:if(t.extra){for(P=t.extra;A<P;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,A-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){s.msg="invalid distance too far back",t.mode=Wa;break}t.mode=US;case US:if(u===0)break e;if(g=x-u,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){s.msg="invalid distance too far back",t.mode=Wa;break}g>t.wnext?(g-=t.wnext,b=t.wsize-g):b=t.wnext-g,g>t.length&&(g=t.length),I=t.window}else I=r,b=c-t.offset,g=t.length;g>u&&(g=u),u-=g,t.length-=g;do r[c++]=I[b++];while(--g);t.length===0&&(t.mode=J0);break;case DS:if(u===0)break e;r[c++]=t.length,u--,t.mode=J0;break;case o1:if(t.wrap){for(;A<32;){if(h===0)break e;h--,f|=n[o++]<<A,A+=8}if(x-=u,s.total_out+=x,t.total+=x,t.wrap&4&&x&&(s.adler=t.check=t.flags?Qc(t.check,r,x,c-x):jb(t.check,r,x,c-x)),x=u,t.wrap&4&&(t.flags?f:QS(f))!==t.check){s.msg="incorrect data check",t.mode=Wa;break}f=0,A=0}t.mode=RS;case RS:if(t.wrap&&t.flags){for(;A<32;){if(h===0)break e;h--,f+=n[o++]<<A,A+=8}if(t.wrap&4&&f!==(t.total&4294967295)){s.msg="incorrect length check",t.mode=Wa;break}f=0,A=0}t.mode=LS;case LS:U=_H;break e;case Wa:U=rI;break e;case iI:return aI;case oI:default:return QA}return s.next_out=c,s.avail_out=u,s.next_in=o,s.avail_in=h,t.hold=f,t.bits=A,(t.wsize||x!==s.avail_out&&t.mode<Wa&&(t.mode<o1||e!==fS))&&dI(s,s.output,s.next_out,x-s.avail_out),m-=s.avail_in,x-=s.avail_out,s.total_in+=m,s.total_out+=x,t.total+=x,t.wrap&4&&x&&(s.adler=t.check=t.flags?Qc(t.check,r,x,s.next_out-x):jb(t.check,r,x,s.next_out-x)),s.data_type=t.bits+(t.last?64:0)+(t.mode===yu?128:0)+(t.mode===X0||t.mode===i1?256:0),(m===0&&x===0||e===fS)&&U===rf&&(U=UH),U},HH=s=>{if(uf(s))return QA;let e=s.state;return e.window&&(e.window=null),s.state=null,rf},VH=(s,e)=>{if(uf(s))return QA;const t=s.state;return(t.wrap&2)===0?QA:(t.head=e,e.done=!1,rf)},KH=(s,e)=>{const t=e.length;let n,r,o;return uf(s)||(n=s.state,n.wrap!==0&&n.mode!==rv)?QA:n.mode===rv&&(r=1,r=jb(r,e,t,0),r!==n.check)?rI:(o=dI(s,e,t,t),o?(n.mode=iI,aI):(n.havedict=1,rf))};var zH=AI,GH=cI,$H=lI,YH=PH,WH=uI,XH=MH,JH=HH,qH=VH,ZH=KH,e9="pako inflate (from Nodeca project)",wu={inflateReset:zH,inflateReset2:GH,inflateResetKeep:$H,inflateInit:YH,inflateInit2:WH,inflate:XH,inflateEnd:JH,inflateGetHeader:qH,inflateSetDictionary:ZH,inflateInfo:e9};function t9(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var s9=t9;const hI=Object.prototype.toString,{Z_NO_FLUSH:n9,Z_FINISH:r9,Z_OK:xg,Z_STREAM_END:c1,Z_NEED_DICT:u1,Z_STREAM_ERROR:a9,Z_DATA_ERROR:PS,Z_MEM_ERROR:i9}=ZT;function Hg(s){this.options=eI.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(s&&s.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bH,this.strm.avail_out=0;let t=wu.inflateInit2(this.strm,e.windowBits);if(t!==xg)throw new Error(Bb[t]);if(this.header=new s9,wu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Sb.string2buf(e.dictionary):hI.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=wu.inflateSetDictionary(this.strm,e.dictionary),t!==xg)))throw new Error(Bb[t])}Hg.prototype.push=function(s,e){const t=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let o,c,h;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?r9:n9,hI.call(s)==="[object ArrayBuffer]"?t.input=new Uint8Array(s):t.input=s,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=wu.inflate(t,c),o===u1&&r&&(o=wu.inflateSetDictionary(t,r),o===xg?o=wu.inflate(t,c):o===PS&&(o=u1));t.avail_in>0&&o===c1&&t.state.wrap>0&&s[t.next_in]!==0;)wu.inflateReset(t),o=wu.inflate(t,c);switch(o){case a9:case PS:case u1:case i9:return this.onEnd(o),this.ended=!0,!1}if(h=t.avail_out,t.next_out&&(t.avail_out===0||o===c1))if(this.options.to==="string"){let u=Sb.utf8border(t.output,t.next_out),f=t.next_out-u,A=Sb.buf2string(t.output,u);t.next_out=f,t.avail_out=n-f,f&&t.output.set(t.output.subarray(u,u+f),0),this.onData(A)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===xg&&h===0)){if(o===c1)return o=wu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Hg.prototype.onData=function(s){this.chunks.push(s)};Hg.prototype.onEnd=function(s){s===xg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=eI.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function o9(s,e){const t=new Hg(e);if(t.push(s),t.err)throw t.msg||Bb[t.err];return t.result}var l9=Hg,A9=o9,c9={Inflate:l9,inflate:A9};const{Inflate:u9,inflate:d9}=c9;var kS=u9,h9=d9;const fI=[];for(let s=0;s<256;s++){let e=s;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;fI[s]=e}const MS=4294967295;function f9(s,e,t){let n=s;for(let r=0;r<t;r++)n=fI[(n^e[r])&255]^n>>>8;return n}function m9(s,e){return(f9(MS,s,e)^MS)>>>0}function HS(s,e,t){const n=s.readUint32(),r=m9(new Uint8Array(s.buffer,s.byteOffset+s.offset-e-4,e),e);if(r!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${r}`)}function mI(s,e,t){for(let n=0;n<t;n++)e[n]=s[n]}function pI(s,e,t,n){let r=0;for(;r<n;r++)e[r]=s[r];for(;r<t;r++)e[r]=s[r]+e[r-n]&255}function gI(s,e,t,n){let r=0;if(t.length===0)for(;r<n;r++)e[r]=s[r];else for(;r<n;r++)e[r]=s[r]+t[r]&255}function xI(s,e,t,n,r){let o=0;if(t.length===0){for(;o<r;o++)e[o]=s[o];for(;o<n;o++)e[o]=s[o]+(e[o-r]>>1)&255}else{for(;o<r;o++)e[o]=s[o]+(t[o]>>1)&255;for(;o<n;o++)e[o]=s[o]+(e[o-r]+t[o]>>1)&255}}function vI(s,e,t,n,r){let o=0;if(t.length===0){for(;o<r;o++)e[o]=s[o];for(;o<n;o++)e[o]=s[o]+e[o-r]&255}else{for(;o<r;o++)e[o]=s[o]+t[o]&255;for(;o<n;o++)e[o]=s[o]+p9(e[o-r],t[o],t[o-r])&255}}function p9(s,e,t){const n=s+e-t,r=Math.abs(n-s),o=Math.abs(n-e),c=Math.abs(n-t);return r<=o&&r<=c?s:o<=c?e:t}function g9(s,e,t,n,r,o){switch(s){case 0:mI(e,t,r);break;case 1:pI(e,t,r,o);break;case 2:gI(e,t,n,r);break;case 3:xI(e,t,n,r,o);break;case 4:vI(e,t,n,r,o);break;default:throw new Error(`Unsupported filter: ${s}`)}}const x9=new Uint16Array([255]),v9=new Uint8Array(x9.buffer),y9=v9[0]===255;function b9(s){const{data:e,width:t,height:n,channels:r,depth:o}=s,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],h=Math.ceil(o/8)*r,u=new Uint8Array(n*t*h);let f=0;for(let A=0;A<7;A++){const m=c[A],x=Math.ceil((t-m.x)/m.xStep),g=Math.ceil((n-m.y)/m.yStep);if(x<=0||g<=0)continue;const b=x*h,I=new Uint8Array(b);for(let N=0;N<g;N++){const C=e[f++],E=e.subarray(f,f+b);f+=b;const F=new Uint8Array(b);g9(C,E,F,I,b,h),I.set(F);for(let L=0;L<x;L++){const O=m.x+L*m.xStep,H=m.y+N*m.yStep;if(!(O>=t||H>=n))for(let Q=0;Q<h;Q++)u[(H*t+O)*h+Q]=F[L*h+Q]}}}if(o===16){const A=new Uint16Array(u.buffer);if(y9)for(let m=0;m<A.length;m++)A[m]=w9(A[m]);return A}else return u}function w9(s){return(s&255)<<8|s>>8&255}const j9=new Uint16Array([255]),B9=new Uint8Array(j9.buffer),S9=B9[0]===255,C9=new Uint8Array(0);function VS(s){const{data:e,width:t,height:n,channels:r,depth:o}=s,c=Math.ceil(o/8)*r,h=Math.ceil(o/8*r*t),u=new Uint8Array(n*h);let f=C9,A=0,m,x;for(let g=0;g<n;g++){switch(m=e.subarray(A+1,A+1+h),x=u.subarray(g*h,(g+1)*h),e[A]){case 0:mI(m,x,h);break;case 1:pI(m,x,h,c);break;case 2:gI(m,x,f,h);break;case 3:xI(m,x,f,h,c);break;case 4:vI(m,x,f,h,c);break;default:throw new Error(`Unsupported filter: ${e[A]}`)}f=x,A+=h+1}if(o===16){const g=new Uint16Array(u.buffer);if(S9)for(let b=0;b<g.length;b++)g[b]=N9(g[b]);return g}else return u}function N9(s){return(s&255)<<8|s>>8&255}const jx=Uint8Array.of(137,80,78,71,13,10,26,10);function KS(s){if(!E9(s.readBytes(jx.length)))throw new Error("wrong PNG signature")}function E9(s){if(s.length<jx.length)return!1;for(let e=0;e<jx.length;e++)if(s[e]!==jx[e])return!1;return!0}const T9="tEXt",I9=0,yI=new TextDecoder("latin1");function _9(s){if(U9(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const F9=/^[\u0000-\u00FF]*$/;function U9(s){if(!F9.test(s))throw new Error("invalid latin1 text")}function D9(s,e,t){const n=bI(e);s[n]=R9(e,t-n.length-1)}function bI(s){for(s.mark();s.readByte()!==I9;);const e=s.offset;s.reset();const t=yI.decode(s.readBytes(e-s.offset-1));return s.skip(1),_9(t),t}function R9(s,e){return yI.decode(s.readBytes(e))}const aA={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},d1={UNKNOWN:-1,DEFLATE:0},zS={UNKNOWN:-1,ADAPTIVE:0},h1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},q0={NONE:0,BACKGROUND:1,PREVIOUS:2},f1={SOURCE:0,OVER:1};class L9 extends h2{constructor(t,n={}){super(t);Gr(this,"_checkCrc");Gr(this,"_inflator");Gr(this,"_png");Gr(this,"_apng");Gr(this,"_end");Gr(this,"_hasPalette");Gr(this,"_palette");Gr(this,"_hasTransparency");Gr(this,"_transparency");Gr(this,"_compressionMethod");Gr(this,"_filterMethod");Gr(this,"_interlaceMethod");Gr(this,"_colorType");Gr(this,"_isAnimated");Gr(this,"_numberOfFrames");Gr(this,"_numberOfPlays");Gr(this,"_frames");Gr(this,"_writingDataChunks");const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new kS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=d1.UNKNOWN,this._filterMethod=zS.UNKNOWN,this._interlaceMethod=h1.UNKNOWN,this._colorType=aA.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(KS(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(KS(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case T9:D9(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?HS(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=r+t;break}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?HS(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=Q9(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case aA.GREYSCALE:r=1;break;case aA.TRUECOLOUR:r=3;break;case aA.INDEXED_COLOUR:r=1;break;case aA.GREYSCALE_ALPHA:r=2;break;case aA.TRUECOLOUR_ALPHA:r=4;break;case aA.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==d1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let o=0;o<n;o++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case aA.GREYSCALE:case aA.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case aA.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case aA.UNKNOWN:case aA.GREYSCALE_ALPHA:case aA.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=bI(this),r=this.readUint8();if(r!==d1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const o=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:h9(o)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(t);if(r){if(r.data=VS({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const o=this._apng.frames.at(t-1);this.disposeFrame(r,o,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,r){switch(t.disposeOp){case q0.NONE:break;case q0.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let c=0;c<this._png.width;c++){const h=(o*t.width+c)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[h+u]=0}break;case q0.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const r=1<<this._png.depth,o=(c,h)=>{const u=((c+n.yOffset)*this._png.width+n.xOffset+h)*this._png.channels,f=(c*n.width+h)*this._png.channels;return{index:u,frameIndex:f}};switch(n.blendOp){case f1.SOURCE:for(let c=0;c<n.height;c++)for(let h=0;h<n.width;h++){const{index:u,frameIndex:f}=o(c,h);for(let A=0;A<this._png.channels;A++)t.data[u+A]=n.data[f+A]}break;case f1.OVER:for(let c=0;c<n.height;c++)for(let h=0;h<n.width;h++){const{index:u,frameIndex:f}=o(c,h);for(let A=0;A<this._png.channels;A++){const m=n.data[f+this._png.channels-1]/r,x=A%(this._png.channels-1)===0?1:n.data[f+A],g=Math.floor(m*x+(1-m)*t.data[u+A]);t.data[u+A]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==zS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===h1.NO_INTERLACE)this._png.data=VS({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===h1.ADAM7)this._png.data=b9({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:q0.NONE,blendOp:f1.SOURCE,data:t}),this._inflator=new kS,this._writingDataChunks=!1}}function Q9(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}var GS;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(GS||(GS={}));function O9(s,e){return new L9(s,e).decode()}var dn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function m1(){dn.console&&typeof dn.console.log=="function"&&dn.console.log.apply(dn.console,arguments)}var ca={log:m1,warn:function(s){dn.console&&(typeof dn.console.warn=="function"?dn.console.warn.apply(dn.console,arguments):m1.call(null,arguments))},error:function(s){dn.console&&(typeof dn.console.error=="function"?dn.console.error.apply(dn.console,arguments):m1(s))}};function p1(s,e,t){var n=new XMLHttpRequest;n.open("GET",s),n.responseType="blob",n.onload=function(){Lh(n.response,e,t)},n.onerror=function(){ca.error("could not download file")},n.send()}function $S(s){var e=new XMLHttpRequest;e.open("HEAD",s,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Z0(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(e)}}var Lh=dn.saveAs||((typeof window>"u"?"undefined":$r(window))!=="object"||window!==dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,e,t){var n=dn.URL||dn.webkitURL,r=document.createElement("a");e=e||s.name||"download",r.download=e,r.rel="noopener",typeof s=="string"?(r.href=s,r.origin!==location.origin?$S(r.href)?p1(s,e,t):Z0(r,r.target="_blank"):Z0(r)):(r.href=n.createObjectURL(s),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){Z0(r)},0))}:"msSaveOrOpenBlob"in navigator?function(s,e,t){if(e=e||s.name||"download",typeof s=="string")if($S(s))p1(s,e,t);else{var n=document.createElement("a");n.href=s,n.target="_blank",setTimeout(function(){Z0(n)})}else navigator.msSaveOrOpenBlob((function(r,o){return o===void 0?o={autoBom:!1}:$r(o)!=="object"&&(ca.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(s,t),e)}:function(s,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof s=="string")return p1(s,e,t);var r=s.type==="application/octet-stream",o=/constructor/i.test(dn.HTMLElement)||dn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&o)&&(typeof FileReader>"u"?"undefined":$r(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var A=h.result;A=c?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=A:location=A,n=null},h.readAsDataURL(s)}else{var u=dn.URL||dn.webkitURL,f=u.createObjectURL(s);n?n.location=f:location.href=f,n=null,setTimeout(function(){u.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function wI(s){var e;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],n=0;n<t.length;n++){var r=t[n].re,o=t[n].process,c=r.exec(s);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),u=this.g.toString(16),f=this.b.toString(16);return h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),"#"+h+u+f}}var Bx=dn.atob.bind(dn),YS=dn.btoa.bind(dn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function g1(s,e){var t=s[0],n=s[1],r=s[2],o=s[3];t=el(t,n,r,o,e[0],7,-680876936),o=el(o,t,n,r,e[1],12,-389564586),r=el(r,o,t,n,e[2],17,606105819),n=el(n,r,o,t,e[3],22,-1044525330),t=el(t,n,r,o,e[4],7,-176418897),o=el(o,t,n,r,e[5],12,1200080426),r=el(r,o,t,n,e[6],17,-1473231341),n=el(n,r,o,t,e[7],22,-45705983),t=el(t,n,r,o,e[8],7,1770035416),o=el(o,t,n,r,e[9],12,-1958414417),r=el(r,o,t,n,e[10],17,-42063),n=el(n,r,o,t,e[11],22,-1990404162),t=el(t,n,r,o,e[12],7,1804603682),o=el(o,t,n,r,e[13],12,-40341101),r=el(r,o,t,n,e[14],17,-1502002290),t=tl(t,n=el(n,r,o,t,e[15],22,1236535329),r,o,e[1],5,-165796510),o=tl(o,t,n,r,e[6],9,-1069501632),r=tl(r,o,t,n,e[11],14,643717713),n=tl(n,r,o,t,e[0],20,-373897302),t=tl(t,n,r,o,e[5],5,-701558691),o=tl(o,t,n,r,e[10],9,38016083),r=tl(r,o,t,n,e[15],14,-660478335),n=tl(n,r,o,t,e[4],20,-405537848),t=tl(t,n,r,o,e[9],5,568446438),o=tl(o,t,n,r,e[14],9,-1019803690),r=tl(r,o,t,n,e[3],14,-187363961),n=tl(n,r,o,t,e[8],20,1163531501),t=tl(t,n,r,o,e[13],5,-1444681467),o=tl(o,t,n,r,e[2],9,-51403784),r=tl(r,o,t,n,e[7],14,1735328473),t=sl(t,n=tl(n,r,o,t,e[12],20,-1926607734),r,o,e[5],4,-378558),o=sl(o,t,n,r,e[8],11,-2022574463),r=sl(r,o,t,n,e[11],16,1839030562),n=sl(n,r,o,t,e[14],23,-35309556),t=sl(t,n,r,o,e[1],4,-1530992060),o=sl(o,t,n,r,e[4],11,1272893353),r=sl(r,o,t,n,e[7],16,-155497632),n=sl(n,r,o,t,e[10],23,-1094730640),t=sl(t,n,r,o,e[13],4,681279174),o=sl(o,t,n,r,e[0],11,-358537222),r=sl(r,o,t,n,e[3],16,-722521979),n=sl(n,r,o,t,e[6],23,76029189),t=sl(t,n,r,o,e[9],4,-640364487),o=sl(o,t,n,r,e[12],11,-421815835),r=sl(r,o,t,n,e[15],16,530742520),t=nl(t,n=sl(n,r,o,t,e[2],23,-995338651),r,o,e[0],6,-198630844),o=nl(o,t,n,r,e[7],10,1126891415),r=nl(r,o,t,n,e[14],15,-1416354905),n=nl(n,r,o,t,e[5],21,-57434055),t=nl(t,n,r,o,e[12],6,1700485571),o=nl(o,t,n,r,e[3],10,-1894986606),r=nl(r,o,t,n,e[10],15,-1051523),n=nl(n,r,o,t,e[1],21,-2054922799),t=nl(t,n,r,o,e[8],6,1873313359),o=nl(o,t,n,r,e[15],10,-30611744),r=nl(r,o,t,n,e[6],15,-1560198380),n=nl(n,r,o,t,e[13],21,1309151649),t=nl(t,n,r,o,e[4],6,-145523070),o=nl(o,t,n,r,e[11],10,-1120210379),r=nl(r,o,t,n,e[2],15,718787259),n=nl(n,r,o,t,e[9],21,-343485551),s[0]=Dd(t,s[0]),s[1]=Dd(n,s[1]),s[2]=Dd(r,s[2]),s[3]=Dd(o,s[3])}function Kv(s,e,t,n,r,o){return e=Dd(Dd(e,s),Dd(n,o)),Dd(e<<r|e>>>32-r,t)}function el(s,e,t,n,r,o,c){return Kv(e&t|~e&n,s,e,r,o,c)}function tl(s,e,t,n,r,o,c){return Kv(e&n|t&~n,s,e,r,o,c)}function sl(s,e,t,n,r,o,c){return Kv(e^t^n,s,e,r,o,c)}function nl(s,e,t,n,r,o,c){return Kv(t^(e|~n),s,e,r,o,c)}function jI(s){var e,t=s.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s.length;e+=64)g1(n,P9(s.substring(e-64,e)));s=s.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<s.length;e++)r[e>>2]|=s.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(g1(n,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,g1(n,r),n}function P9(s){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=s.charCodeAt(e)+(s.charCodeAt(e+1)<<8)+(s.charCodeAt(e+2)<<16)+(s.charCodeAt(e+3)<<24);return t}var WS="0123456789abcdef".split("");function k9(s){for(var e="",t=0;t<4;t++)e+=WS[s>>8*t+4&15]+WS[s>>8*t&15];return e}function M9(s){return String.fromCharCode(255&s,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function Cb(s){return jI(s).map(M9).join("")}var H9=(function(s){for(var e=0;e<s.length;e++)s[e]=k9(s[e]);return s.join("")})(jI("hello"))!="5d41402abc4b2a76b9719d911017c592";function Dd(s,e){if(H9){var t=(65535&s)+(65535&e);return(s>>16)+(e>>16)+(t>>16)<<16|65535&t}return s+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Nb(s,e){var t,n,r,o;if(s!==t){for(var c=(r=s,o=1+(256/s.length|0),new Array(o+1).join(r)),h=[],u=0;u<256;u++)h[u]=u;var f=0;for(u=0;u<256;u++){var A=h[u];f=(f+A+c.charCodeAt(u))%256,h[u]=h[f],h[f]=A}t=s,n=h}else h=n;var m=e.length,x=0,g=0,b="";for(u=0;u<m;u++)g=(g+(A=h[x=(x+1)%256]))%256,h[x]=h[g],h[g]=A,c=h[(h[x]+h[g])%256],b+=String.fromCharCode(e.charCodeAt(u)^c);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var XS={print:4,modify:8,copy:16,"annot-forms":32};function $f(s,e,t,n){this.v=1,this.r=2;var r=192;s.forEach(function(h){if(XS.perm!==void 0)throw new Error("Invalid permission: "+h);r+=XS[h]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^r)),this.encryptionKey=Cb(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Nb(this.encryptionKey,this.padding)}function Yf(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var e="",t=s.length,n=0;n<t;n++){var r=s.charCodeAt(n);e+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):s[n]}return e}function JS(s){if($r(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,typeof t!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[n,!!r],o},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[t]){var c=e[t][o];try{c[0].apply(s,n)}catch(h){dn.console&&ca.error("jsPDF PubSub Error",h.message,h)}c[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vg(s){if(!(this instanceof vg))return new vg(s);var e="opacity,stroke-opacity".split(",");for(var t in s)s.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=s[t]);this.id="",this.objectNumber=-1}function BI(s,e){this.gState=s,this.matrix=e,this.id="",this.objectNumber=-1}function Td(s,e,t,n,r){if(!(this instanceof Td))return new Td(s,e,t,n,r);this.type=s==="axial"?2:3,this.coords=e,this.colors=t,BI.call(this,n,r)}function Mh(s,e,t,n,r){if(!(this instanceof Mh))return new Mh(s,e,t,n,r);this.boundingBox=s,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,BI.call(this,n,r)}function Ps(s){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],o=arguments[3],c=[],h=1,u=16,f="S",A=null;$r(s=s||{})==="object"&&(t=s.orientation,n=s.unit||n,r=s.format||r,o=s.compress||s.compressPdf||o,(A=s.encryption||null)!==null&&(A.userPassword=A.userPassword||"",A.ownerPassword=A.ownerPassword||"",A.userPermissions=A.userPermissions||[]),h=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(e=s.precision),s.floatPrecision!==void 0&&(u=s.floatPrecision),f=s.defaultPathOperation||"S"),c=s.filters||(o===!0?["FlateEncode"]:c),n=n||"mm",t=(""+(t||"P")).toLowerCase();var m=s.putOnlyUsedFonts||!1,x={},g={internal:{},__private__:{}};g.__private__.PubSub=JS;var b="1.3",I=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(k){b=k};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return N};var C=g.__private__.getPageFormat=function(k){return N[k]};r=r||"a4";var E="compat",F="advanced",L=E;function O(){this.saveGraphicsState(),me(new Yt(mt,0,0,-mt,0,Or()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),f="n",L=F}function H(){this.restoreGraphicsState(),f="S",L=E}var Q=g.__private__.combineFontStyleAndFontWeight=function(k,Ae){if(k=="bold"&&Ae=="normal"||k=="bold"&&Ae==400||k=="normal"&&Ae=="italic"||k=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(k=Ae==400||Ae==="normal"?k==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||k!=="normal"?(Ae==700?"bold":Ae)+""+k:"bold"),k};g.advancedAPI=function(k){var Ae=L===E;return Ae&&O.call(this),typeof k!="function"||(k(this),Ae&&H.call(this)),this},g.compatAPI=function(k){var Ae=L===F;return Ae&&H.call(this),typeof k!="function"||(k(this),Ae&&O.call(this)),this},g.isAdvancedAPI=function(){return L===F};var U,R=function(k){if(L!==F)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=g.roundToPrecision=g.__private__.roundToPrecision=function(k,Ae){var Te=e||Ae;if(isNaN(k)||isNaN(Te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Te).replace(/0+$/,"")};U=g.hpf=g.__private__.hpf=typeof u=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return $(k,u)}:u==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return $(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return $(k,16)};var P=g.f2=g.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return $(k,2)},V=g.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return $(k,3)},G=g.scale=g.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return L===E?k*mt:L===F?k:void 0},ae=function(k){return G((function(Ae){return L===E?Or()-Ae:L===F?Ae:void 0})(k))};g.__private__.setPrecision=g.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var ue,oe="00000000000000000000000000000000",X=g.__private__.getFileId=function(){return oe},Y=g.__private__.setFileId=function(k){return oe=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():oe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),A!==null&&(xt=new $f(A.userPermissions,A.userPassword,A.ownerPassword,oe)),oe};g.setFileId=function(k){return Y(k),this},g.getFileId=function(){return X()};var re=g.__private__.convertDateToPDFDate=function(k){var Ae=k.getTimezoneOffset(),Te=Ae<0?"+":"-",Ue=Math.floor(Math.abs(Ae/60)),Me=Math.abs(Ae%60),ht=[Te,ie(Ue),"'",ie(Me),"'"].join("");return["D:",k.getFullYear(),ie(k.getMonth()+1),ie(k.getDate()),ie(k.getHours()),ie(k.getMinutes()),ie(k.getSeconds()),ht].join("")},pe=g.__private__.convertPDFDateToDate=function(k){var Ae=parseInt(k.substr(2,4),10),Te=parseInt(k.substr(6,2),10)-1,Ue=parseInt(k.substr(8,2),10),Me=parseInt(k.substr(10,2),10),ht=parseInt(k.substr(12,2),10),St=parseInt(k.substr(14,2),10);return new Date(Ae,Te,Ue,Me,ht,St,0)},ee=g.__private__.setCreationDate=function(k){var Ae;if(k===void 0&&(k=new Date),k instanceof Date)Ae=re(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=k}return ue=Ae},M=g.__private__.getCreationDate=function(k){var Ae=ue;return k==="jsDate"&&(Ae=pe(ue)),Ae};g.setCreationDate=function(k){return ee(k),this},g.getCreationDate=function(k){return M(k)};var J,ie=g.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},le=g.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ce=0,ve=[],Se=[],ge=0,Be=[],Fe=[],Qe=!1,Ze=Se;g.__private__.setCustomOutputDestination=function(k){Qe=!0,Ze=k};var Pe=function(k){Qe||(Ze=k)};g.__private__.resetCustomOutputDestination=function(){Qe=!1,Ze=Se};var me=g.__private__.out=function(k){return k=k.toString(),ge+=k.length+1,Ze.push(k),Ze},nt=g.__private__.write=function(k){return me(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},It=g.__private__.getArrayBuffer=function(k){for(var Ae=k.length,Te=new ArrayBuffer(Ae),Ue=new Uint8Array(Te);Ae--;)Ue[Ae]=k.charCodeAt(Ae);return Te},ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ut};var ze=s.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(k){return ze=L===F?k/mt:k,this};var Ft,Qt=g.__private__.getFontSize=g.getFontSize=function(){return L===E?ze:ze*mt},Ct=s.R2L||!1;g.__private__.setR2L=g.setR2L=function(k){return Ct=k,this},g.__private__.getR2L=g.getR2L=function(){return Ct};var Jt,ts=g.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Ft=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Ft=k}else Ft=parseInt(k,10)};g.__private__.getZoomMode=function(){return Ft};var as,Xe=g.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Jt=k};g.__private__.getPageMode=function(){return Jt};var Vt=g.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');as=k};g.__private__.getLayoutMode=function(){return as},g.__private__.setDisplayMode=g.setDisplayMode=function(k,Ae,Te){return ts(k),Vt(Ae),Xe(Te),this};var Kt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(k){if(Object.keys(Kt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Kt[k]},g.__private__.getDocumentProperties=function(){return Kt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(k){for(var Ae in Kt)Kt.hasOwnProperty(Ae)&&k[Ae]&&(Kt[Ae]=k[Ae]);return this},g.__private__.setDocumentProperty=function(k,Ae){if(Object.keys(Kt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Kt[k]=Ae};var Mt,mt,Dt,Ns,$t,Wt={},lt={},Ot=[],De={},dt={},at={},Et={},Xt=null,vt=0,it=[],Rt=new JS(g),qt=s.hotfixes||[],cs={},Xs={},Ls=[],Yt=function k(Ae,Te,Ue,Me,ht,St){if(!(this instanceof k))return new k(Ae,Te,Ue,Me,ht,St);isNaN(Ae)&&(Ae=1),isNaN(Te)&&(Te=0),isNaN(Ue)&&(Ue=0),isNaN(Me)&&(Me=1),isNaN(ht)&&(ht=0),isNaN(St)&&(St=0),this._matrix=[Ae,Te,Ue,Me,ht,St]};Object.defineProperty(Yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Yt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(k)},Yt.prototype.multiply=function(k){var Ae=k.sx*this.sx+k.shy*this.shx,Te=k.sx*this.shy+k.shy*this.sy,Ue=k.shx*this.sx+k.sy*this.shx,Me=k.shx*this.shy+k.sy*this.sy,ht=k.tx*this.sx+k.ty*this.shx+this.tx,St=k.tx*this.shy+k.ty*this.sy+this.ty;return new Yt(Ae,Te,Ue,Me,ht,St)},Yt.prototype.decompose=function(){var k=this.sx,Ae=this.shy,Te=this.shx,Ue=this.sy,Me=this.tx,ht=this.ty,St=Math.sqrt(k*k+Ae*Ae),ds=(k/=St)*Te+(Ae/=St)*Ue;Te-=k*ds,Ue-=Ae*ds;var xs=Math.sqrt(Te*Te+Ue*Ue);return ds/=xs,k*(Ue/=xs)<Ae*(Te/=xs)&&(k=-k,Ae=-Ae,ds=-ds,St=-St),{scale:new Yt(St,0,0,xs,0,0),translate:new Yt(1,0,0,1,Me,ht),rotate:new Yt(k,Ae,-Ae,k,0,0),skew:new Yt(1,0,ds,1,0,0)}},Yt.prototype.toString=function(k){return this.join(" ")},Yt.prototype.inversed=function(){var k=this.sx,Ae=this.shy,Te=this.shx,Ue=this.sy,Me=this.tx,ht=this.ty,St=1/(k*Ue-Ae*Te),ds=Ue*St,xs=-Ae*St,Ms=-Te*St,Us=k*St;return new Yt(ds,xs,Ms,Us,-ds*Me-Ms*ht,-xs*Me-Us*ht)},Yt.prototype.applyToPoint=function(k){var Ae=k.x*this.sx+k.y*this.shx+this.tx,Te=k.x*this.shy+k.y*this.sy+this.ty;return new na(Ae,Te)},Yt.prototype.applyToRectangle=function(k){var Ae=this.applyToPoint(k),Te=this.applyToPoint(new na(k.x+k.w,k.y+k.h));return new Yn(Ae.x,Ae.y,Te.x-Ae.x,Te.y-Ae.y)},Yt.prototype.clone=function(){var k=this.sx,Ae=this.shy,Te=this.shx,Ue=this.sy,Me=this.tx,ht=this.ty;return new Yt(k,Ae,Te,Ue,Me,ht)},g.Matrix=Yt;var hn=g.matrixMult=function(k,Ae){return Ae.multiply(k)},Tr=new Yt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Tr;var dr=function(k,Ae){if(!dt[k]){var Te=(Ae instanceof Td?"Sh":"P")+(Object.keys(De).length+1).toString(10);Ae.id=Te,dt[k]=Te,De[Te]=Ae,Rt.publish("addPattern",Ae)}};g.ShadingPattern=Td,g.TilingPattern=Mh,g.addShadingPattern=function(k,Ae){return R("addShadingPattern()"),dr(k,Ae),this},g.beginTilingPattern=function(k){R("beginTilingPattern()"),ka(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},g.endTilingPattern=function(k,Ae){R("endTilingPattern()"),Ae.stream=Fe[J].join(`
`),dr(k,Ae),Rt.publish("endTilingPattern",Ae),Ls.pop().restore()};var hr,Zt=g.__private__.newObject=function(){var k=mn();return pn(k,!0),k},mn=g.__private__.newObjectDeferred=function(){return ce++,ve[ce]=function(){return ge},ce},pn=function(k,Ae){return Ae=typeof Ae=="boolean"&&Ae,ve[k]=ge,Ae&&me(k+" 0 obj"),k},Nn=g.__private__.newAdditionalObject=function(){var k={objId:mn(),content:""};return Be.push(k),k},Fs=mn(),En=mn(),An=g.__private__.decodeColorString=function(k){var Ae=k.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length!==5||Ae[4]!=="k"&&Ae[4]!=="K"||(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Te=parseFloat(Ae[0]);Ae=[Te,Te,Te,"r"]}for(var Ue="#",Me=0;Me<3;Me++)Ue+=("0"+Math.floor(255*parseFloat(Ae[Me])).toString(16)).slice(-2);return Ue},Ir=g.__private__.encodeColorString=function(k){var Ae;typeof k=="string"&&(k={ch1:k});var Te=k.ch1,Ue=k.ch2,Me=k.ch3,ht=k.ch4,St=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Te=="string"&&Te.charAt(0)!=="#"){var ds=new wI(Te);if(ds.ok)Te=ds.toHex();else if(!/^\d*\.?\d*$/.test(Te))throw new Error('Invalid color "'+Te+'" passed to jsPDF.encodeColorString.')}if(typeof Te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Te)&&(Te="#"+Te[1]+Te[1]+Te[2]+Te[2]+Te[3]+Te[3]),typeof Te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Te)){var xs=parseInt(Te.substr(1),16);Te=xs>>16&255,Ue=xs>>8&255,Me=255&xs}if(Ue===void 0||ht===void 0&&Te===Ue&&Ue===Me)Ae=typeof Te=="string"?Te+" "+St[0]:k.precision===2?P(Te/255)+" "+St[0]:V(Te/255)+" "+St[0];else if(ht===void 0||$r(ht)==="object"){if(ht&&!isNaN(ht.a)&&ht.a===0)return["1.","1.","1.",St[1]].join(" ");Ae=typeof Te=="string"?[Te,Ue,Me,St[1]].join(" "):k.precision===2?[P(Te/255),P(Ue/255),P(Me/255),St[1]].join(" "):[V(Te/255),V(Ue/255),V(Me/255),St[1]].join(" ")}else Ae=typeof Te=="string"?[Te,Ue,Me,ht,St[2]].join(" "):k.precision===2?[P(Te),P(Ue),P(Me),P(ht),St[2]].join(" "):[V(Te),V(Ue),V(Me),V(ht),St[2]].join(" ");return Ae},ya=g.__private__.getFilters=function(){return c},ai=g.__private__.putStream=function(k){var Ae=(k=k||{}).data||"",Te=k.filters||ya(),Ue=k.alreadyAppliedFilters||[],Me=k.addLength1||!1,ht=Ae.length,St=k.objectId,ds=function(W){return W};if(A!==null&&St===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");A!==null&&(ds=xt.encryptor(St,0));var xs={};Te===!0&&(Te=["FlateEncode"]);var Ms=k.additionalKeyValues||[],Us=(xs=Ps.API.processDataByFilters!==void 0?Ps.API.processDataByFilters(Ae,Te):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Ue)?Ue.join(" "):Ue.toString());if(xs.data.length!==0&&(Ms.push({key:"Length",value:xs.data.length}),Me===!0&&Ms.push({key:"Length1",value:ht})),Us.length!=0)if(Us.split("/").length-1==1)Ms.push({key:"Filter",value:Us});else{Ms.push({key:"Filter",value:"["+Us+"]"});for(var Fn=0;Fn<Ms.length;Fn+=1)if(Ms[Fn].key==="DecodeParms"){for(var Dr=[],vr=0;vr<xs.reverseChain.split("/").length-1;vr+=1)Dr.push("null");Dr.push(Ms[Fn].value),Ms[Fn].value="["+Dr.join(" ")+"]"}}me("<<");for(var w=0;w<Ms.length;w++)me("/"+Ms[w].key+" "+Ms[w].value);me(">>"),xs.data.length!==0&&(me("stream"),me(ds(xs.data)),me("endstream"))},ii=g.__private__.putPage=function(k){var Ae=k.number,Te=k.data,Ue=k.objId,Me=k.contentsObjId;pn(Ue,!0),me("<</Type /Page"),me("/Parent "+k.rootDictionaryObjId+" 0 R"),me("/Resources "+k.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(U(k.mediaBox.bottomLeftX))+" "+parseFloat(U(k.mediaBox.bottomLeftY))+" "+U(k.mediaBox.topRightX)+" "+U(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&me("/CropBox ["+U(k.cropBox.bottomLeftX)+" "+U(k.cropBox.bottomLeftY)+" "+U(k.cropBox.topRightX)+" "+U(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&me("/BleedBox ["+U(k.bleedBox.bottomLeftX)+" "+U(k.bleedBox.bottomLeftY)+" "+U(k.bleedBox.topRightX)+" "+U(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&me("/TrimBox ["+U(k.trimBox.bottomLeftX)+" "+U(k.trimBox.bottomLeftY)+" "+U(k.trimBox.topRightX)+" "+U(k.trimBox.topRightY)+"]"),k.artBox!==null&&me("/ArtBox ["+U(k.artBox.bottomLeftX)+" "+U(k.artBox.bottomLeftY)+" "+U(k.artBox.topRightX)+" "+U(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&me("/UserUnit "+k.userUnit),Rt.publish("putPage",{objId:Ue,pageContext:it[Ae],pageNumber:Ae,page:Te}),me("/Contents "+Me+" 0 R"),me(">>"),me("endobj");var ht=Te.join(`
`);return L===F&&(ht+=`
Q`),pn(Me,!0),ai({data:ht,filters:ya(),objectId:Me}),me("endobj"),Ue},yn=g.__private__.putPages=function(){var k,Ae,Te=[];for(k=1;k<=vt;k++)it[k].objId=mn(),it[k].contentsObjId=mn();for(k=1;k<=vt;k++)Te.push(ii({number:k,data:Fe[k],objId:it[k].objId,contentsObjId:it[k].contentsObjId,mediaBox:it[k].mediaBox,cropBox:it[k].cropBox,bleedBox:it[k].bleedBox,trimBox:it[k].trimBox,artBox:it[k].artBox,userUnit:it[k].userUnit,rootDictionaryObjId:Fs,resourceDictionaryObjId:En}));pn(Fs,!0),me("<</Type /Pages");var Ue="/Kids [";for(Ae=0;Ae<vt;Ae++)Ue+=Te[Ae]+" 0 R ";me(Ue+"]"),me("/Count "+vt),me(">>"),me("endobj"),Rt.publish("postPutPages")},_r=function(k){Rt.publish("putFont",{font:k,out:me,newObject:Zt,putStream:ai}),k.isAlreadyPutted!==!0&&(k.objectNumber=Zt(),me("<<"),me("/Type /Font"),me("/BaseFont /"+Yf(k.postScriptName)),me("/Subtype /Type1"),typeof k.encoding=="string"&&me("/Encoding /"+k.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},ea=function(k){k.objectNumber=Zt();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[U(k.x),U(k.y),U(k.x+k.width),U(k.y+k.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Te=k.pages[1].join(`
`);ai({data:Te,additionalKeyValues:Ae,objectId:k.objectNumber}),me("endobj")},xr=function(k,Ae){Ae||(Ae=21);var Te=Zt(),Ue=(function(St,ds){var xs,Ms=[],Us=1/(ds-1);for(xs=0;xs<1;xs+=Us)Ms.push(xs);if(Ms.push(1),St[0].offset!=0){var Fn={offset:0,color:St[0].color};St.unshift(Fn)}if(St[St.length-1].offset!=1){var Dr={offset:1,color:St[St.length-1].color};St.push(Dr)}for(var vr="",w=0,W=0;W<Ms.length;W++){for(xs=Ms[W];xs>St[w+1].offset;)w++;var ne=St[w].offset,we=(xs-ne)/(St[w+1].offset-ne),$e=St[w].color,st=St[w+1].color;vr+=le(Math.round((1-we)*$e[0]+we*st[0]).toString(16))+le(Math.round((1-we)*$e[1]+we*st[1]).toString(16))+le(Math.round((1-we)*$e[2]+we*st[2]).toString(16))}return vr.trim()})(k.colors,Ae),Me=[];Me.push({key:"FunctionType",value:"0"}),Me.push({key:"Domain",value:"[0.0 1.0]"}),Me.push({key:"Size",value:"["+Ae+"]"}),Me.push({key:"BitsPerSample",value:"8"}),Me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ai({data:Ue,additionalKeyValues:Me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Te}),me("endobj"),k.objectNumber=Zt(),me("<< /ShadingType "+k.type),me("/ColorSpace /DeviceRGB");var ht="/Coords ["+U(parseFloat(k.coords[0]))+" "+U(parseFloat(k.coords[1]))+" ";k.type===2?ht+=U(parseFloat(k.coords[2]))+" "+U(parseFloat(k.coords[3])):ht+=U(parseFloat(k.coords[2]))+" "+U(parseFloat(k.coords[3]))+" "+U(parseFloat(k.coords[4]))+" "+U(parseFloat(k.coords[5])),me(ht+="]"),k.matrix&&me("/Matrix ["+k.matrix.toString()+"]"),me("/Function "+Te+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},Fr=function(k,Ae){var Te=mn(),Ue=Zt();Ae.push({resourcesOid:Te,objectOid:Ue}),k.objectNumber=Ue;var Me=[];Me.push({key:"Type",value:"/Pattern"}),Me.push({key:"PatternType",value:"1"}),Me.push({key:"PaintType",value:"1"}),Me.push({key:"TilingType",value:"1"}),Me.push({key:"BBox",value:"["+k.boundingBox.map(U).join(" ")+"]"}),Me.push({key:"XStep",value:U(k.xStep)}),Me.push({key:"YStep",value:U(k.yStep)}),Me.push({key:"Resources",value:Te+" 0 R"}),k.matrix&&Me.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),ai({data:k.stream,additionalKeyValues:Me,objectId:k.objectNumber}),me("endobj")},da=function(k){for(var Ae in k.objectNumber=Zt(),me("<<"),k)switch(Ae){case"opacity":me("/ca "+P(k[Ae]));break;case"stroke-opacity":me("/CA "+P(k[Ae]))}me(">>"),me("endobj")},La=function(k){pn(k.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Ae in me("/Font <<"),Wt)Wt.hasOwnProperty(Ae)&&(m===!1||m===!0&&x.hasOwnProperty(Ae))&&me("/"+Ae+" "+Wt[Ae].objectNumber+" 0 R");me(">>")})(),(function(){if(Object.keys(De).length>0){for(var Ae in me("/Shading <<"),De)De.hasOwnProperty(Ae)&&De[Ae]instanceof Td&&De[Ae].objectNumber>=0&&me("/"+Ae+" "+De[Ae].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),me(">>")}})(),(function(Ae){if(Object.keys(De).length>0){for(var Te in me("/Pattern <<"),De)De.hasOwnProperty(Te)&&De[Te]instanceof g.TilingPattern&&De[Te].objectNumber>=0&&De[Te].objectNumber<Ae&&me("/"+Te+" "+De[Te].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),me(">>")}})(k.objectOid),(function(){if(Object.keys(at).length>0){var Ae;for(Ae in me("/ExtGState <<"),at)at.hasOwnProperty(Ae)&&at[Ae].objectNumber>=0&&me("/"+Ae+" "+at[Ae].objectNumber+" 0 R");Rt.publish("putGStateDict"),me(">>")}})(),(function(){for(var Ae in me("/XObject <<"),cs)cs.hasOwnProperty(Ae)&&cs[Ae].objectNumber>=0&&me("/"+Ae+" "+cs[Ae].objectNumber+" 0 R");Rt.publish("putXobjectDict"),me(">>")})(),me(">>"),me("endobj")},zn=function(k){lt[k.fontName]=lt[k.fontName]||{},lt[k.fontName][k.fontStyle]=k.id},Qa=function(k,Ae,Te,Ue,Me){var ht={id:"F"+(Object.keys(Wt).length+1).toString(10),postScriptName:k,fontName:Ae,fontStyle:Te,encoding:Ue,isStandardFont:Me||!1,metadata:{}};return Rt.publish("addFont",{font:ht,instance:this}),Wt[ht.id]=ht,zn(ht),ht.id},ha=g.__private__.pdfEscape=g.pdfEscape=function(k,Ae){return(function(Te,Ue){var Me,ht,St,ds,xs,Ms,Us,Fn,Dr;if(St=(Ue=Ue||{}).sourceEncoding||"Unicode",xs=Ue.outputEncoding,(Ue.autoencode||xs)&&Wt[Mt].metadata&&Wt[Mt].metadata[St]&&Wt[Mt].metadata[St].encoding&&(ds=Wt[Mt].metadata[St].encoding,!xs&&Wt[Mt].encoding&&(xs=Wt[Mt].encoding),!xs&&ds.codePages&&(xs=ds.codePages[0]),typeof xs=="string"&&(xs=ds[xs]),xs)){for(Us=!1,Ms=[],Me=0,ht=Te.length;Me<ht;Me++)(Fn=xs[Te.charCodeAt(Me)])?Ms.push(String.fromCharCode(Fn)):Ms.push(Te[Me]),Ms[Me].charCodeAt(0)>>8&&(Us=!0);Te=Ms.join("")}for(Me=Te.length;Us===void 0&&Me!==0;)Te.charCodeAt(Me-1)>>8&&(Us=!0),Me--;if(!Us)return Te;for(Ms=Ue.noBOM?[]:[254,255],Me=0,ht=Te.length;Me<ht;Me++){if((Dr=(Fn=Te.charCodeAt(Me))>>8)>>8)throw new Error("Character at position "+Me+" of string '"+Te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ms.push(Dr),Ms.push(Fn-(Dr<<8))}return String.fromCharCode.apply(void 0,Ms)})(k,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ur=g.__private__.beginPage=function(k){Fe[++vt]=[],it[vt]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},wl(vt),Pe(Fe[J])},Ti=function(k,Ae){var Te,Ue,Me;switch(t=Ae||t,typeof k=="string"&&(Te=C(k.toLowerCase()),Array.isArray(Te)&&(Ue=Te[0],Me=Te[1])),Array.isArray(k)&&(Ue=k[0]*mt,Me=k[1]*mt),isNaN(Ue)&&(Ue=r[0],Me=r[1]),(Ue>14400||Me>14400)&&(ca.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ue=Math.min(14400,Ue),Me=Math.min(14400,Me)),r=[Ue,Me],t.substr(0,1)){case"l":Me>Ue&&(r=[Me,Ue]);break;case"p":Ue>Me&&(r=[Me,Ue])}Ur(r),Ts(ja),me(oi),gi!==0&&me(gi+" J"),jr!==0&&me(jr+" j"),Rt.publish("addPage",{pageNumber:vt})},Ji=function(k){k>0&&k<=vt&&(Fe.splice(k,1),it.splice(k,1),vt--,J>vt&&(J=vt),this.setPage(J))},wl=function(k){k>0&&k<=vt&&(J=k)},jl=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Fe.length-1},Ao=function(k,Ae,Te){var Ue,Me=void 0;return Te=Te||{},k=k!==void 0?k:Wt[Mt].fontName,Ae=Ae!==void 0?Ae:Wt[Mt].fontStyle,Ue=k.toLowerCase(),lt[Ue]!==void 0&&lt[Ue][Ae]!==void 0?Me=lt[Ue][Ae]:lt[k]!==void 0&&lt[k][Ae]!==void 0?Me=lt[k][Ae]:Te.disableWarning===!1&&ca.warn("Unable to look up font label for font '"+k+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Me||Te.noFallback||(Me=lt.times[Ae])==null&&(Me=lt.times.normal),Me},ba=g.__private__.putInfo=function(){var k=Zt(),Ae=function(Ue){return Ue};for(var Te in A!==null&&(Ae=xt.encryptor(k,0)),me("<<"),me("/Producer ("+ha(Ae("jsPDF "+Ps.version))+")"),Kt)Kt.hasOwnProperty(Te)&&Kt[Te]&&me("/"+Te.substr(0,1).toUpperCase()+Te.substr(1)+" ("+ha(Ae(Kt[Te]))+")");me("/CreationDate ("+ha(Ae(ue))+")"),me(">>"),me("endobj")},Oa=g.__private__.putCatalog=function(k){var Ae=(k=k||{}).rootDictionaryObjId||Fs;switch(Zt(),me("<<"),me("/Type /Catalog"),me("/Pages "+Ae+" 0 R"),Ft||(Ft="fullwidth"),Ft){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Te=""+Ft;Te.substr(Te.length-1)==="%"&&(Ft=parseInt(Ft)/100),typeof Ft=="number"&&me("/OpenAction [3 0 R /XYZ null null "+P(Ft)+"]")}switch(as||(as="continuous"),as){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}Jt&&me("/PageMode /"+Jt),Rt.publish("putCatalog"),me(">>"),me("endobj")},Yr=g.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(ce+1)),me("/Root "+ce+" 0 R"),me("/Info "+(ce-1)+" 0 R"),A!==null&&me("/Encrypt "+xt.oid+" 0 R"),me("/ID [ <"+oe+"> <"+oe+"> ]"),me(">>")},Sn=g.__private__.putHeader=function(){me("%PDF-"+b),me("%")},Ii=g.__private__.putXRef=function(){var k="0000000000";me("xref"),me("0 "+(ce+1)),me("0000000000 65535 f ");for(var Ae=1;Ae<=ce;Ae++)typeof ve[Ae]=="function"?me((k+ve[Ae]()).slice(-10)+" 00000 n "):ve[Ae]!==void 0?me((k+ve[Ae]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},Wr=g.__private__.buildDocument=function(){var k;ce=0,ge=0,Se=[],ve=[],Be=[],Fs=mn(),En=mn(),Pe(Se),Rt.publish("buildDocument"),Sn(),yn(),(function(){Rt.publish("putAdditionalObjects");for(var Te=0;Te<Be.length;Te++){var Ue=Be[Te];pn(Ue.objId,!0),me(Ue.content),me("endobj")}Rt.publish("postPutAdditionalObjects")})(),k=[],(function(){for(var Te in Wt)Wt.hasOwnProperty(Te)&&(m===!1||m===!0&&x.hasOwnProperty(Te))&&_r(Wt[Te])})(),(function(){var Te;for(Te in at)at.hasOwnProperty(Te)&&da(at[Te])})(),(function(){for(var Te in cs)cs.hasOwnProperty(Te)&&ea(cs[Te])})(),(function(Te){var Ue;for(Ue in De)De.hasOwnProperty(Ue)&&(De[Ue]instanceof Td?xr(De[Ue]):De[Ue]instanceof Mh&&Fr(De[Ue],Te))})(k),Rt.publish("putResources"),k.forEach(La),La({resourcesOid:En,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources"),A!==null&&(xt.oid=Zt(),me("<<"),me("/Filter /Standard"),me("/V "+xt.v),me("/R "+xt.r),me("/U <"+xt.toHexString(xt.U)+">"),me("/O <"+xt.toHexString(xt.O)+">"),me("/P "+xt.P),me(">>"),me("endobj")),ba(),Oa();var Ae=ge;return Ii(),Yr(),me("startxref"),me(""+Ae),me("%%EOF"),Pe(Fe[J]),Se.join(`
`)},gn=g.__private__.getBlob=function(k){return new Blob([It(k)],{type:"application/pdf"})},Ee=g.output=g.__private__.output=(hr=function(k,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",k){case void 0:return Wr();case"save":g.save(Ae.filename);break;case"arraybuffer":return It(Wr());case"blob":return gn(Wr());case"bloburi":case"bloburl":if(dn.URL!==void 0&&typeof dn.URL.createObjectURL=="function")return dn.URL&&dn.URL.createObjectURL(gn(Wr()))||void 0;ca.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Te="",Ue=Wr();try{Te=YS(Ue)}catch{Te=YS(unescape(encodeURIComponent(Ue)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var Me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ht=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Me=Ae.pdfObjectUrl,ht="");var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Me+'"'+ht+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",ds=dn.open();return ds!==null&&ds.document.write(St),ds}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var xs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',Ms=dn.open();if(Ms!==null){Ms.document.write(xs);var Us=this;Ms.document.documentElement.querySelector("#pdfViewer").onload=function(){Ms.document.title=Ae.filename,Ms.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Us.output("bloburl"))}}return Ms}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Dr=dn.open();if(Dr!==null&&(Dr.document.write(Fn),Dr.document.title=Ae.filename),Dr||typeof safari>"u")return Dr;break;case"datauri":case"dataurl":return dn.document.location.href=this.output("datauristring",Ae);default:return null}},hr.foo=function(){try{return hr.apply(this,arguments)}catch(Te){var k=Te.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var Ae="Error in function "+k.split(`
`)[0].split("<")[0]+": "+Te.message;if(!dn.console)throw new Error(Ae);dn.console.error(Ae,Te),dn.alert&&alert(Ae)}},hr.foo.bar=hr,hr.foo),Je=function(k){return Array.isArray(qt)===!0&&qt.indexOf(k)>-1};switch(n){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=Je("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);mt=n}var xt=null;ee(),Y();var _t=g.__private__.getPageInfo=g.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[k].objId,pageNumber:k,pageContext:it[k]}},fs=g.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in it)if(it[Ae].objId===k)break;return _t(Ae)},ms=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:it[J].objId,pageNumber:J,pageContext:it[J]}};g.addPage=function(){return Ti.apply(this,arguments),this},g.setPage=function(){return wl.apply(this,arguments),Pe.call(this,Fe[J]),this},g.insertPage=function(k){return this.addPage(),this.movePage(J,k),this},g.movePage=function(k,Ae){var Te,Ue;if(k>Ae){Te=Fe[k],Ue=it[k];for(var Me=k;Me>Ae;Me--)Fe[Me]=Fe[Me-1],it[Me]=it[Me-1];Fe[Ae]=Te,it[Ae]=Ue,this.setPage(Ae)}else if(k<Ae){Te=Fe[k],Ue=it[k];for(var ht=k;ht<Ae;ht++)Fe[ht]=Fe[ht+1],it[ht]=it[ht+1];Fe[Ae]=Te,it[Ae]=Ue,this.setPage(Ae)}return this},g.deletePage=function(){return Ji.apply(this,arguments),this},g.__private__.text=g.text=function(k,Ae,Te,Ue,Me){var ht,St,ds,xs,Ms,Us,Fn,Dr,vr,w=(Ue=Ue||{}).scope||this;if(typeof k=="number"&&typeof Ae=="number"&&(typeof Te=="string"||Array.isArray(Te))){var W=Te;Te=Ae,Ae=k,k=W}if(arguments[3]instanceof Yt==0?(ds=arguments[4],xs=arguments[5],$r(Fn=arguments[3])==="object"&&Fn!==null||(typeof ds=="string"&&(xs=ds,ds=null),typeof Fn=="string"&&(xs=Fn,Fn=null),typeof Fn=="number"&&(ds=Fn,Fn=null),Ue={flags:Fn,angle:ds,align:xs})):(R("The transform parameter of text() with a Matrix value"),vr=Me),isNaN(Ae)||isNaN(Te)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return w;var ne,we="",$e=typeof Ue.lineHeightFactor=="number"?Ue.lineHeightFactor:_i,st=w.internal.scaleFactor;function zt(Jn){return Jn=Jn.split("	").join(Array(Ue.TabLen||9).join(" ")),ha(Jn,Fn)}function sn(Jn){for(var Hn,Lr=Jn.concat(),ir=[],fl=Lr.length;fl--;)typeof(Hn=Lr.shift())=="string"?ir.push(Hn):Array.isArray(Jn)&&(Hn.length===1||Hn[1]===void 0&&Hn[2]===void 0)?ir.push(Hn[0]):ir.push([Hn[0],Hn[1],Hn[2]]);return ir}function Rr(Jn,Hn){var Lr;if(typeof Jn=="string")Lr=Hn(Jn)[0];else if(Array.isArray(Jn)){for(var ir,fl,ml=Jn.concat(),HA=[],dA=ml.length;dA--;)typeof(ir=ml.shift())=="string"?HA.push(Hn(ir)[0]):Array.isArray(ir)&&typeof ir[0]=="string"&&(fl=Hn(ir[0],ir[1],ir[2]),HA.push([fl[0],fl[1],fl[2]]));Lr=HA}return Lr}var bn=!1,ar=!0;if(typeof k=="string")bn=!0;else if(Array.isArray(k)){var Za=k.concat();St=[];for(var Na,Wn=Za.length;Wn--;)(typeof(Na=Za.shift())!="string"||Array.isArray(Na)&&typeof Na[0]!="string")&&(ar=!1);bn=ar}if(bn===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var on=ze/w.internal.scaleFactor,go=on*($e-1);switch(Ue.baseline){case"bottom":Te-=go;break;case"top":Te+=on-go;break;case"hanging":Te+=on-2*go;break;case"middle":Te+=on/2-go}if((Us=Ue.maxWidth||0)>0&&(typeof k=="string"?k=w.splitTextToSize(k,Us):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Jn,Hn){return Jn.concat(w.splitTextToSize(Hn,Us))},[]))),ht={text:k,x:Ae,y:Te,options:Ue,mutex:{pdfEscape:ha,activeFontKey:Mt,fonts:Wt,activeFontSize:ze}},Rt.publish("preProcessText",ht),k=ht.text,ds=(Ue=ht.options).angle,vr instanceof Yt==0&&ds&&typeof ds=="number"){ds*=Math.PI/180,Ue.rotationDirection===0&&(ds=-ds),L===F&&(ds=-ds);var Lo=Math.cos(ds),Al=Math.sin(ds);vr=new Yt(Lo,Al,-Al,Lo,0,0)}else ds&&ds instanceof Yt&&(vr=ds);L!==F||vr||(vr=Tr),(Ms=Ue.charSpace||Sa)!==void 0&&(we+=U(G(Ms))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dr=Ue.horizontalScale)!==void 0&&(we+=U(100*Dr)+` Tz
`),Ue.lang;var Ma=-1,li=Ue.renderingMode!==void 0?Ue.renderingMode:Ue.stroke,mc=w.internal.getCurrentPageInfo().pageContext;switch(li){case 0:case!1:case"fill":Ma=0;break;case 1:case!0:case"stroke":Ma=1;break;case 2:case"fillThenStroke":Ma=2;break;case 3:case"invisible":Ma=3;break;case 4:case"fillAndAddForClipping":Ma=4;break;case 5:case"strokeAndAddPathForClipping":Ma=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ma=6;break;case 7:case"addToPathForClipping":Ma=7}var Qo=mc.usedRenderingMode!==void 0?mc.usedRenderingMode:-1;Ma!==-1?we+=Ma+` Tr
`:Qo!==-1&&(we+=`0 Tr
`),Ma!==-1&&(mc.usedRenderingMode=Ma),xs=Ue.align||"left";var Xn,Oo=ze*$e,Pr=w.internal.pageSize.getWidth(),OA=Wt[Mt];Ms=Ue.charSpace||Sa,Us=Ue.maxWidth||0,Fn=Object.assign({autoencode:!0,noBOM:!0},Ue.flags);var Ai=[],Po=function(Jn){return w.getStringUnitWidth(Jn,{font:OA,charSpace:Ms,fontSize:ze,doKerning:!1})*ze/st};if(Object.prototype.toString.call(k)==="[object Array]"){var Cn;St=sn(k),xs!=="left"&&(Xn=St.map(Po));var Ui,cl=0;if(xs==="right"){Ae-=Xn[0],k=[],Wn=St.length;for(var ul=0;ul<Wn;ul++)ul===0?(Ui=Ba(Ae),Cn=sa(Te)):(Ui=G(cl-Xn[ul]),Cn=-Oo),k.push([St[ul],Ui,Cn]),cl=Xn[ul]}else if(xs==="center"){Ae-=Xn[0]/2,k=[],Wn=St.length;for(var Cl=0;Cl<Wn;Cl++)Cl===0?(Ui=Ba(Ae),Cn=sa(Te)):(Ui=G((cl-Xn[Cl])/2),Cn=-Oo),k.push([St[Cl],Ui,Cn]),cl=Xn[Cl]}else if(xs==="left"){k=[],Wn=St.length;for(var $l=0;$l<Wn;$l++)k.push(St[$l])}else if(xs==="justify"&&OA.encoding==="Identity-H"){k=[],Wn=St.length,Us=Us!==0?Us:Pr;for(var PA=0,ma=0;ma<Wn;ma++)if(Cn=ma===0?sa(Te):-Oo,Ui=ma===0?Ba(Ae):PA,ma<Wn-1){var Zi=G((Us-Xn[ma])/(St[ma].split(" ").length-1)),vi=St[ma].split(" ");k.push([vi[0]+" ",Ui,Cn]),PA=0;for(var yi=1;yi<vi.length;yi++){var Qn=(Po(vi[yi-1]+" "+vi[yi])-Po(vi[yi]))*st+Zi;yi==vi.length-1?k.push([vi[yi],Qn,0]):k.push([vi[yi]+" ",Qn,0]),PA-=Qn}}else k.push([St[ma],Ui,Cn]);k.push(["",PA,0])}else{if(xs!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Wn=St.length,Us=Us!==0?Us:Pr,ma=0;ma<Wn;ma++){Cn=ma===0?sa(Te):-Oo,Ui=ma===0?Ba(Ae):0;var Di=St[ma].split(" ").length-1,kA=Di>0?(Us-Xn[ma])/Di:0;ma<Wn-1?Ai.push(U(G(kA))):Ai.push(0),k.push([St[ma],Ui,Cn])}}}(typeof Ue.R2L=="boolean"?Ue.R2L:Ct)===!0&&(k=Rr(k,function(Jn,Hn,Lr){return[Jn.split("").reverse().join(""),Hn,Lr]})),ht={text:k,x:Ae,y:Te,options:Ue,mutex:{pdfEscape:ha,activeFontKey:Mt,fonts:Wt,activeFontSize:ze}},Rt.publish("postProcessText",ht),k=ht.text,ne=ht.mutex.isHex||!1;var MA=Wt[Mt].encoding;MA!=="WinAnsiEncoding"&&MA!=="StandardEncoding"||(k=Rr(k,function(Jn,Hn,Lr){return[zt(Jn),Hn,Lr]})),St=sn(k),k=[];for(var dl,Nl,El,hl=Array.isArray(St[0])?1:0,Ea="",Yl=function(Jn,Hn,Lr){var ir="";return Lr instanceof Yt?(Lr=typeof Ue.angle=="number"?hn(Lr,new Yt(1,0,0,1,Jn,Hn)):hn(new Yt(1,0,0,1,Jn,Hn),Lr),L===F&&(Lr=hn(new Yt(1,0,0,-1,0,0),Lr)),ir=Lr.join(" ")+` Tm
`):ir=U(Jn)+" "+U(Hn)+` Td
`,ir},Ri=0;Ri<St.length;Ri++){switch(Ea="",hl){case 1:El=(ne?"<":"(")+St[Ri][0]+(ne?">":")"),dl=parseFloat(St[Ri][1]),Nl=parseFloat(St[Ri][2]);break;case 0:El=(ne?"<":"(")+St[Ri]+(ne?">":")"),dl=Ba(Ae),Nl=sa(Te)}Ai!==void 0&&Ai[Ri]!==void 0&&(Ea=Ai[Ri]+` Tw
`),Ri===0?k.push(Ea+Yl(dl,Nl,vr)+El):hl===0?k.push(Ea+El):hl===1&&k.push(Ea+Yl(dl,Nl,vr)+El)}k=hl===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var eo=`BT
/`;return eo+=Mt+" "+ze+` Tf
`,eo+=U(ze*$e)+` TL
`,eo+=pi+`
`,eo+=we,eo+=k,me(eo+="ET"),x[Mt]=!0,w};var zs=g.__private__.clip=g.clip=function(k){return me(k==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return zs("evenodd")},g.__private__.discardPath=g.discardPath=function(){return me("n"),this};var Gs=g.__private__.isValidStyle=function(k){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(k){return Gs(k)&&(f=k),this};var Lt=g.__private__.getStyle=g.getStyle=function(k){var Ae=f;switch(k){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=k}return Ae},Js=g.close=function(){return me("h"),this};g.stroke=function(){return me("S"),this},g.fill=function(k){return Bs("f",k),this},g.fillEvenOdd=function(k){return Bs("f*",k),this},g.fillStroke=function(k){return Bs("B",k),this},g.fillStrokeEvenOdd=function(k){return Bs("B*",k),this};var Bs=function(k,Ae){$r(Ae)==="object"?wr(Ae,k):me(k)},Zs=function(k){k===null||L===F&&k===void 0||(k=Lt(k),me(k))};function nr(k,Ae,Te,Ue,Me){var ht=new Mh(Ae||this.boundingBox,Te||this.xStep,Ue||this.yStep,this.gState,Me||this.matrix);ht.stream=this.stream;var St=k+"$$"+this.cloneIndex+++"$$";return dr(St,ht),ht}var wr=function(k,Ae){var Te=dt[k.key],Ue=De[Te];if(Ue instanceof Td)me("q"),me(ta(Ae)),Ue.gState&&g.setGState(Ue.gState),me(k.matrix.toString()+" cm"),me("/"+Te+" sh"),me("Q");else if(Ue instanceof Mh){var Me=new Yt(1,0,0,-1,0,Or());k.matrix&&(Me=Me.multiply(k.matrix||Tr),Te=nr.call(Ue,k.key,k.boundingBox,k.xStep,k.yStep,Me).id),me("q"),me("/Pattern cs"),me("/"+Te+" scn"),Ue.gState&&g.setGState(Ue.gState),me(Ae),me("Q")}},ta=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},wa=g.moveTo=function(k,Ae){return me(U(G(k))+" "+U(ae(Ae))+" m"),this},Qr=g.lineTo=function(k,Ae){return me(U(G(k))+" "+U(ae(Ae))+" l"),this},Gn=g.curveTo=function(k,Ae,Te,Ue,Me,ht){return me([U(G(k)),U(ae(Ae)),U(G(Te)),U(ae(Ue)),U(G(Me)),U(ae(ht)),"c"].join(" ")),this};g.__private__.line=g.line=function(k,Ae,Te,Ue,Me){if(isNaN(k)||isNaN(Ae)||isNaN(Te)||isNaN(Ue)||!Gs(Me))throw new Error("Invalid arguments passed to jsPDF.line");return L===E?this.lines([[Te-k,Ue-Ae]],k,Ae,[1,1],Me||"S"):this.lines([[Te-k,Ue-Ae]],k,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(k,Ae,Te,Ue,Me,ht){var St,ds,xs,Ms,Us,Fn,Dr,vr,w,W,ne,we;if(typeof k=="number"&&(we=Te,Te=Ae,Ae=k,k=we),Ue=Ue||[1,1],ht=ht||!1,isNaN(Ae)||isNaN(Te)||!Array.isArray(k)||!Array.isArray(Ue)||!Gs(Me)||typeof ht!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wa(Ae,Te),St=Ue[0],ds=Ue[1],Ms=k.length,W=Ae,ne=Te,xs=0;xs<Ms;xs++)(Us=k[xs]).length===2?(W=Us[0]*St+W,ne=Us[1]*ds+ne,Qr(W,ne)):(Fn=Us[0]*St+W,Dr=Us[1]*ds+ne,vr=Us[2]*St+W,w=Us[3]*ds+ne,W=Us[4]*St+W,ne=Us[5]*ds+ne,Gn(Fn,Dr,vr,w,W,ne));return ht&&Js(),Zs(Me),this},g.path=function(k){for(var Ae=0;Ae<k.length;Ae++){var Te=k[Ae],Ue=Te.c;switch(Te.op){case"m":wa(Ue[0],Ue[1]);break;case"l":Qr(Ue[0],Ue[1]);break;case"c":Gn.apply(this,Ue);break;case"h":Js()}}return this},g.__private__.rect=g.rect=function(k,Ae,Te,Ue,Me){if(isNaN(k)||isNaN(Ae)||isNaN(Te)||isNaN(Ue)||!Gs(Me))throw new Error("Invalid arguments passed to jsPDF.rect");return L===E&&(Ue=-Ue),me([U(G(k)),U(ae(Ae)),U(G(Te)),U(G(Ue)),"re"].join(" ")),Zs(Me),this},g.__private__.triangle=g.triangle=function(k,Ae,Te,Ue,Me,ht,St){if(isNaN(k)||isNaN(Ae)||isNaN(Te)||isNaN(Ue)||isNaN(Me)||isNaN(ht)||!Gs(St))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Te-k,Ue-Ae],[Me-Te,ht-Ue],[k-Me,Ae-ht]],k,Ae,[1,1],St,!0),this},g.__private__.roundedRect=g.roundedRect=function(k,Ae,Te,Ue,Me,ht,St){if(isNaN(k)||isNaN(Ae)||isNaN(Te)||isNaN(Ue)||isNaN(Me)||isNaN(ht)||!Gs(St))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ds=4/3*(Math.SQRT2-1);return Me=Math.min(Me,.5*Te),ht=Math.min(ht,.5*Ue),this.lines([[Te-2*Me,0],[Me*ds,0,Me,ht-ht*ds,Me,ht],[0,Ue-2*ht],[0,ht*ds,-Me*ds,ht,-Me,ht],[2*Me-Te,0],[-Me*ds,0,-Me,-ht*ds,-Me,-ht],[0,2*ht-Ue],[0,-ht*ds,Me*ds,-ht,Me,-ht]],k+Me,Ae,[1,1],St,!0),this},g.__private__.ellipse=g.ellipse=function(k,Ae,Te,Ue,Me){if(isNaN(k)||isNaN(Ae)||isNaN(Te)||isNaN(Ue)||!Gs(Me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ht=4/3*(Math.SQRT2-1)*Te,St=4/3*(Math.SQRT2-1)*Ue;return wa(k+Te,Ae),Gn(k+Te,Ae-St,k+ht,Ae-Ue,k,Ae-Ue),Gn(k-ht,Ae-Ue,k-Te,Ae-St,k-Te,Ae),Gn(k-Te,Ae+St,k-ht,Ae+Ue,k,Ae+Ue),Gn(k+ht,Ae+Ue,k+Te,Ae+St,k+Te,Ae),Zs(Me),this},g.__private__.circle=g.circle=function(k,Ae,Te,Ue){if(isNaN(k)||isNaN(Ae)||isNaN(Te)||!Gs(Ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,Ae,Te,Te,Ue)},g.setFont=function(k,Ae,Te){return Te&&(Ae=Q(Ae,Te)),Mt=Ao(k,Ae,{disableWarning:!1}),this};var fa=g.__private__.getFont=g.getFont=function(){return Wt[Ao.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var k,Ae,Te={};for(k in lt)if(lt.hasOwnProperty(k))for(Ae in Te[k]=[],lt[k])lt[k].hasOwnProperty(Ae)&&Te[k].push(Ae);return Te},g.addFont=function(k,Ae,Te,Ue,Me){var ht=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ht.indexOf(arguments[3])!==-1?Me=arguments[3]:arguments[3]&&ht.indexOf(arguments[3])==-1&&(Te=Q(Te,Ue)),Qa.call(this,k,Ae,Te,Me=Me||"Identity-H")};var _i,ja=s.lineWidth||.200025,Fi=g.__private__.getLineWidth=g.getLineWidth=function(){return ja},Ts=g.__private__.setLineWidth=g.setLineWidth=function(k){return ja=k,me(U(G(k))+" w"),this};g.__private__.setLineDash=Ps.API.setLineDash=Ps.API.setLineDashPattern=function(k,Ae){if(k=k||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Te){return U(G(Te))}).join(" "),Ae=U(G(Ae)),me("["+k+"] "+Ae+" d"),this};var ll=g.__private__.getLineHeight=g.getLineHeight=function(){return ze*_i};g.__private__.getLineHeight=g.getLineHeight=function(){return ze*_i};var Bl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(_i=k),this},Do=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return _i};Bl(s.lineHeight);var Ba=g.__private__.getHorizontalCoordinate=function(k){return G(k)},sa=g.__private__.getVerticalCoordinate=function(k){return L===F?k:it[J].mediaBox.topRightY-it[J].mediaBox.bottomLeftY-G(k)},Pa=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(k){return U(Ba(k))},$n=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(k){return U(sa(k))},oi=s.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return An(oi)},g.__private__.setStrokeColor=g.setDrawColor=function(k,Ae,Te,Ue){return oi=Ir({ch1:k,ch2:Ae,ch3:Te,ch4:Ue,pdfColorType:"draw",precision:2}),me(oi),this};var Ro=s.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return An(Ro)},g.__private__.setFillColor=g.setFillColor=function(k,Ae,Te,Ue){return Ro=Ir({ch1:k,ch2:Ae,ch3:Te,ch4:Ue,pdfColorType:"fill",precision:2}),me(Ro),this};var pi=s.textColor||"0 g",Sl=g.__private__.getTextColor=g.getTextColor=function(){return An(pi)};g.__private__.setTextColor=g.setTextColor=function(k,Ae,Te,Ue){return pi=Ir({ch1:k,ch2:Ae,ch3:Te,ch4:Ue,pdfColorType:"text",precision:3}),this};var Sa=s.charSpace,qi=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Sa||0)};g.__private__.setCharSpace=g.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Sa=k,this};var gi=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(k){var Ae=g.CapJoinStyles[k];if(Ae===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gi=Ae,me(Ae+" J"),this};var jr=0;g.__private__.setLineJoin=g.setLineJoin=function(k){var Ae=g.CapJoinStyles[k];if(Ae===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jr=Ae,me(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(U(G(k))+" M"),this},g.GState=vg,g.setGState=function(k){(k=typeof k=="string"?at[Et[k]]:xi(null,k)).equals(Xt)||(me("/"+k.id+" gs"),Xt=k)};var xi=function(k,Ae){if(!k||!Et[k]){var Te=!1;for(var Ue in at)if(at.hasOwnProperty(Ue)&&at[Ue].equals(Ae)){Te=!0;break}if(Te)Ae=at[Ue];else{var Me="GS"+(Object.keys(at).length+1).toString(10);at[Me]=Ae,Ae.id=Me}return k&&(Et[k]=Ae.id),Rt.publish("addGState",Ae),Ae}};g.addGState=function(k,Ae){return xi(k,Ae),this},g.saveGraphicsState=function(){return me("q"),Ot.push({key:Mt,size:ze,color:pi}),this},g.restoreGraphicsState=function(){me("Q");var k=Ot.pop();return Mt=k.key,ze=k.size,pi=k.color,Xt=null,this},g.setCurrentTransformationMatrix=function(k){return me(k.toString()+" cm"),this},g.comment=function(k){return me("#"+k),this};var na=function(k,Ae){var Te=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Te},set:function(ht){isNaN(ht)||(Te=parseFloat(ht))}});var Ue=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ue},set:function(ht){isNaN(ht)||(Ue=parseFloat(ht))}});var Me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Me},set:function(ht){Me=ht.toString()}}),this},Yn=function(k,Ae,Te,Ue){na.call(this,k,Ae),this.type="rect";var Me=Te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Me},set:function(St){isNaN(St)||(Me=parseFloat(St))}});var ht=Ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ht},set:function(St){isNaN(St)||(ht=parseFloat(St))}}),this},po=function(){this.page=vt,this.currentPage=J,this.pages=Fe.slice(0),this.pagesContext=it.slice(0),this.x=Dt,this.y=Ns,this.matrix=$t,this.width=bs(J),this.height=In(J),this.outputDestination=Ze,this.id="",this.objectNumber=-1};po.prototype.restore=function(){vt=this.page,J=this.currentPage,it=this.pagesContext,Fe=this.pages,Dt=this.x,Ns=this.y,$t=this.matrix,cn(J,this.width),ks(J,this.height),Ze=this.outputDestination};var ka=function(k,Ae,Te,Ue,Me){Ls.push(new po),vt=J=0,Fe=[],Dt=k,Ns=Ae,$t=Me,Ur([Te,Ue])};for(var Ht in g.beginFormObject=function(k,Ae,Te,Ue,Me){return ka(k,Ae,Te,Ue,Me),this},g.endFormObject=function(k){return(function(Ae){if(Xs[Ae])Ls.pop().restore();else{var Te=new po,Ue="Xo"+(Object.keys(cs).length+1).toString(10);Te.id=Ue,Xs[Ae]=Ue,cs[Ue]=Te,Rt.publish("addFormObject",Te),Ls.pop().restore()}})(k),this},g.doFormObject=function(k,Ae){var Te=cs[Xs[k]];return me("q"),me(Ae.toString()+" cm"),me("/"+Te.id+" Do"),me("Q"),this},g.getFormObject=function(k){var Ae=cs[Xs[k]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(k,Ae){return k=k||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(Lh(gn(Wr()),k),typeof Lh.unload=="function"&&dn.setTimeout&&setTimeout(Lh.unload,911),this):new Promise(function(Te,Ue){try{var Me=Lh(gn(Wr()),k);typeof Lh.unload=="function"&&dn.setTimeout&&setTimeout(Lh.unload,911),Te(Me)}catch(ht){Ue(ht.message)}})},Ps.API)Ps.API.hasOwnProperty(Ht)&&(Ht==="events"&&Ps.API.events.length?(function(k,Ae){var Te,Ue,Me;for(Me=Ae.length-1;Me!==-1;Me--)Te=Ae[Me][0],Ue=Ae[Me][1],k.subscribe.apply(k,[Te].concat(typeof Ue=="function"?[Ue]:Ue))})(Rt,Ps.API.events):g[Ht]=Ps.API[Ht]);function bs(k){return it[k].mediaBox.topRightX-it[k].mediaBox.bottomLeftX}function cn(k,Ae){it[k].mediaBox.topRightX=Ae+it[k].mediaBox.bottomLeftX}function In(k){return it[k].mediaBox.topRightY-it[k].mediaBox.bottomLeftY}function ks(k,Ae){it[k].mediaBox.topRightY=Ae+it[k].mediaBox.bottomLeftY}var ss=g.getPageWidth=function(k){return bs(k=k||J)/mt},rr=g.setPageWidth=function(k,Ae){cn(k,Ae*mt)},Or=g.getPageHeight=function(k){return In(k=k||J)/mt},Ca=g.setPageHeight=function(k,Ae){ks(k,Ae*mt)};return g.internal={pdfEscape:ha,getStyle:Lt,getFont:fa,getFontSize:Qt,getCharSpace:qi,getTextColor:Sl,getLineHeight:ll,getLineHeightFactor:Do,getLineWidth:Fi,write:nt,getHorizontalCoordinate:Ba,getVerticalCoordinate:sa,getCoordinateString:Pa,getVerticalCoordinateString:$n,collections:{},newObject:Zt,newAdditionalObject:Nn,newObjectDeferred:mn,newObjectDeferredBegin:pn,getFilters:ya,putStream:ai,events:Rt,scaleFactor:mt,pageSize:{getWidth:function(){return ss(J)},setWidth:function(k){rr(J,k)},getHeight:function(){return Or(J)},setHeight:function(k){Ca(J,k)}},encryptionOptions:A,encryption:xt,getEncryptor:function(k){return A!==null?xt.encryptor(k,0):function(Ae){return Ae}},output:Ee,getNumberOfPages:jl,get pages(){return Fe},out:me,f2:P,f3:V,getPageInfo:_t,getPageInfoByObjId:fs,getCurrentPageInfo:ms,getPDFVersion:I,Point:na,Rectangle:Yn,Matrix:Yt,hasHotfix:Je},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ss(J)},set:function(k){rr(J,k)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Or(J)},set:function(k){Ca(J,k)},enumerable:!0,configurable:!0}),(function(k){for(var Ae=0,Te=ut.length;Ae<Te;Ae++){var Ue=Qa.call(this,k[Ae][0],k[Ae][1],k[Ae][2],ut[Ae][3],!0);m===!1&&(x[Ue]=!0);var Me=k[Ae][0].split("-");zn({id:Ue,fontName:Me[0],fontStyle:Me[1]||""})}Rt.publish("addFonts",{fonts:Wt,dictionary:lt})}).call(g,ut),Mt="F1",Ti(r,t),Rt.publish("initialized"),g}$f.prototype.lsbFirstWord=function(s){return String.fromCharCode(255&s,s>>8&255,s>>16&255,s>>24&255)},$f.prototype.toHexString=function(s){return s.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$f.prototype.hexToBytes=function(s){for(var e=[],t=0;t<s.length;t+=2)e.push(String.fromCharCode(parseInt(s.substr(t,2),16)));return e.join("")},$f.prototype.processOwnerPassword=function(s,e){return Nb(Cb(e).substr(0,5),s)},$f.prototype.encryptor=function(s,e){var t=Cb(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Nb(t,n)}},vg.prototype.equals=function(s){var e,t="id,objectNumber,equals";if(!s||$r(s)!==$r(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!s.hasOwnProperty(e)||this[e]!==s[e])return!1;n++}for(e in s)s.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Ps.API={events:[]},Ps.version="3.0.4";var hi=Ps.API,f2=1,df=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mf=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bn=function(s){return s.toFixed(2)},bd=function(s){return s.toFixed(5)};hi.__acroform__={};var Gl=function(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s},qS=function(s){return s*f2},Oc=function(s){var e=new CI,t=Cs.internal.getHeight(s)||0,n=Cs.internal.getWidth(s)||0;return e.BBox=[0,0,Number(Bn(n)),Number(Bn(t))],e},V9=hi.__acroform__.setBit=function(s,e){if(s=s||0,e=e||0,isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|1<<e},K9=hi.__acroform__.clearBit=function(s,e){if(s=s||0,e=e||0,isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&~(1<<e)},z9=hi.__acroform__.getBit=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<e?1:0},Ci=hi.__acroform__.getBitForPdf=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return z9(s,e-1)},Ni=hi.__acroform__.setBitForPdf=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return V9(s,e-1)},Ei=hi.__acroform__.clearBitForPdf=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return K9(s,e-1)},G9=hi.__acroform__.calculateCoordinates=function(s,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,r=s[0],o=s[1],c=s[2],h=s[3],u={};return u.lowerLeft_X=t(r)||0,u.lowerLeft_Y=n(o+h)||0,u.upperRight_X=t(r+c)||0,u.upperRight_Y=n(o)||0,[Number(Bn(u.lowerLeft_X)),Number(Bn(u.lowerLeft_Y)),Number(Bn(u.upperRight_X)),Number(Bn(u.upperRight_Y))]},$9=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var e=[],t=s._V||s.DV,n=Eb(s,t),r=s.scope.internal.getFont(s.fontName,s.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(s.scope.__private__.encodeColorString(s.color)),e.push("/"+r+" "+Bn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Oc(s);return o.scope=s.scope,o.stream=e.join(`
`),o}},Eb=function(s,e){var t=s.fontSize===0?s.maxFontSize:s.fontSize,n={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=s.multiline?r.map(function(P){return P.split(`
`)}):r.map(function(P){return[P]});var o=t,c=Cs.internal.getHeight(s)||0;c=c<0?-c:c;var h=Cs.internal.getWidth(s)||0;h=h<0?-h:h;var u=function(P,V,G){if(P+1<r.length){var ae=V+" "+r[P+1][0];return ex(ae,s,G).width<=h-4}return!1};o++;e:for(;o>0;){e="",o--;var f,A,m=ex("3",s,o).height,x=s.multiline?c-o:(c-m)/2,g=x+=2,b=0,I=0,N=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+ex(e,s,o=12).width+", FieldWidth:"+h+`
`;break}for(var C="",E=0,F=0;F<r.length;F++)if(r.hasOwnProperty(F)){var L=!1;if(r[F].length!==1&&N!==r[F].length-1){if((m+2)*(E+2)+2>c)continue e;C+=r[F][N],L=!0,I=F,F--}else{C=(C+=r[F][N]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var O=parseInt(F),H=u(O,C,o),Q=F>=r.length-1;if(H&&!Q){C+=" ",N=0;continue}if(H||Q){if(Q)I=O;else if(s.multiline&&(m+2)*(E+2)+2>c)continue e}else{if(!s.multiline||(m+2)*(E+2)+2>c)continue e;I=O}}for(var U="",R=b;R<=I;R++){var $=r[R];if(s.multiline){if(R===I){U+=$[N]+" ",N=(N+1)%$.length;continue}if(R===b){U+=$[$.length-1]+" ";continue}}U+=$[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,A=ex(U,s,o).width,s.textAlign){case"right":f=h-A-2;break;case"center":f=(h-A)/2;break;default:f=2}e+=Bn(f)+" "+Bn(g)+` Td
`,e+="("+df(U)+`) Tj
`,e+=-Bn(f)+` 0 Td
`,g=-(o+2),A=0,b=L?I:I+1,E++,C=""}break}return n.text=e,n.fontSize=o,n},ex=function(s,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(s,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},Y9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},W9=function(s,e){var t={type:"reference",object:s};e.internal.getPageInfo(s.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(s.page).pageContext.annotations.push(t)},X9=function(s,e){if(e.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(hc.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(Y9)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");f2=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new NI,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];o.objId=void 0,o.hasAnnotation&&W9(o,t)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(t){(function(n,r){var o=!n;for(var c in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var h=n[c],u=[],f=h.Rect;if(h.Rect&&(h.Rect=G9(h.Rect,r)),r.internal.newObjectDeferredBegin(h.objId,!0),h.DA=Cs.createDefaultAppearanceStream(h),$r(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(u=h.getKeyValueListForStream()),h.Rect=f,h.hasAppearanceStream&&!h.appearanceStreamContent){var A=$9(h);u.push({key:"AP",value:"<</N "+A+">>"}),r.internal.acroformPlugin.xForms.push(A)}if(h.appearanceStreamContent){var m="";for(var x in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(x)){var g=h.appearanceStreamContent[x];if(m+="/"+x+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var c in g)if(g.hasOwnProperty(c)){var b=g[c];typeof b=="function"&&(b=b.call(r,h)),m+="/"+c+" "+b+" ",r.internal.acroformPlugin.xForms.indexOf(b)>=0||r.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(r,h)),m+="/"+c+" "+b,r.internal.acroformPlugin.xForms.indexOf(b)>=0||r.internal.acroformPlugin.xForms.push(b);m+=">>"}u.push({key:"AP",value:`<<
`+m+">>"})}r.internal.putStream({additionalKeyValues:u,objectId:h.objId}),r.internal.out("endobj")}o&&(function(I,N){for(var C in I)if(I.hasOwnProperty(C)){var E=C,F=I[C];N.internal.newObjectDeferredBegin(F.objId,!0),$r(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete I[E]}})(r.internal.acroformPlugin.xForms,r)})(t,s)}),s.internal.acroformPlugin.isInitialized=!0}},SI=hi.__acroform__.arrayToPdfArray=function(s,e,t){var n=function(c){return c};if(Array.isArray(s)){for(var r="[",o=0;o<s.length;o++)switch(o!==0&&(r+=" "),$r(s[o])){case"boolean":case"number":case"object":r+=s[o].toString();break;case"string":s[o].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),r+="("+df(n(s[o].toString()))+")"):r+=s[o].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},x1=function(s,e,t){var n=function(r){return r};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(s=s||"").toString(),"("+df(n(s))+")"},Mc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mc.prototype.toString=function(){return this.objId+" 0 R"},Mc.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Mc.prototype.getKeyValueListForStream=function(){var s=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],r=this[n];r&&(Array.isArray(r)?s.push({key:n,value:SI(r,this.objId,this.scope)}):r instanceof Mc?(r.scope=this.scope,s.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&s.push({key:n,value:r}))}return s};var CI=function(){Mc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){s=t.trim()},get:function(){return s||null}})};Gl(CI,Mc);var NI=function(){Mc.call(this);var s,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+df(t(s))+")"}},set:function(t){s=t}})};Gl(NI,Mc);var hc=function s(){Mc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ci(e,3)},set:function(C){C?this.F=Ni(e,3):this.F=Ei(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof av)return;o="FieldObject"+s.FieldNum++}var C=function(E){return E};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+df(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/f2:f},set:function(C){f=C}});var A="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return A},set:function(C){A=C}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof av||this instanceof Md))return x1(m,this.objId,this.scope)},set:function(C){C=C.toString(),m=C}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof oo==0?x1(x,this.objId,this.scope):x},set:function(C){C=C.toString(),x=this instanceof oo==0?C.substr(0,1)==="("?Mf(C.substr(1,C.length-2)):Mf(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof oo==1?Mf(x.substr(1,x.length-1)):x},set:function(C){C=C.toString(),x=this instanceof oo==1?"/"+C:C}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof oo==0?x1(g,this.objId,this.scope):g},set:function(C){C=C.toString(),g=this instanceof oo==0?C.substr(0,1)==="("?Mf(C.substr(1,C.length-2)):Mf(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof oo==1?Mf(g.substr(1,g.length-1)):g},set:function(C){C=C.toString(),g=this instanceof oo==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(C){C=!!C,I=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(C){b=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,1)},set:function(C){C?this.Ff=Ni(this.Ff,1):this.Ff=Ei(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,2)},set:function(C){C?this.Ff=Ni(this.Ff,2):this.Ff=Ei(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,3)},set:function(C){C?this.Ff=Ni(this.Ff,3):this.Ff=Ei(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');N=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(N){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};Gl(hc,Mc);var Yh=function(){hc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return SI(e,this.objId,this.scope)},set:function(t){var n,r;r=[],typeof(n=t)=="string"&&(r=(function(o,c,h){h||(h=1);for(var u,f=[];u=c.exec(o);)f.push(u[h]);return f})(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,18)},set:function(t){t?this.Ff=Ni(this.Ff,18):this.Ff=Ei(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ni(this.Ff,19):this.Ff=Ei(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,20)},set:function(t){t?(this.Ff=Ni(this.Ff,20),e.sort()):this.Ff=Ei(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,22)},set:function(t){t?this.Ff=Ni(this.Ff,22):this.Ff=Ei(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,23)},set:function(t){t?this.Ff=Ni(this.Ff,23):this.Ff=Ei(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,27)},set:function(t){t?this.Ff=Ni(this.Ff,27):this.Ff=Ei(this.Ff,27)}}),this.hasAppearanceStream=!1};Gl(Yh,hc);var Wh=function(){Yh.call(this),this.fontName="helvetica",this.combo=!1};Gl(Wh,Yh);var Xh=function(){Wh.call(this),this.combo=!0};Gl(Xh,Wh);var Xp=function(){Xh.call(this),this.edit=!0};Gl(Xp,Xh);var oo=function(){hc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,15)},set:function(t){t?this.Ff=Ni(this.Ff,15):this.Ff=Ei(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,16)},set:function(t){t?this.Ff=Ni(this.Ff,16):this.Ff=Ei(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,17)},set:function(t){t?this.Ff=Ni(this.Ff,17):this.Ff=Ei(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,26)},set:function(t){t?this.Ff=Ni(this.Ff,26):this.Ff=Ei(this.Ff,26)}});var s,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+df(t(e[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){$r(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(t){s="/"+t}})};Gl(oo,hc);var Jp=function(){oo.call(this),this.pushButton=!0};Gl(Jp,oo);var Jh=function(){oo.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){s=e!==void 0?e:[]}})};Gl(Jh,oo);var av=function(){var s,e;hc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(h){return h};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),n)c.push("/"+o+" ("+df(r(n[o]))+")");return c.push(">>"),c.join(`
`)},set:function(r){$r(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Cs.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Gl(av,hc),Jh.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=s.createAppearanceStream(t.optionName),t.caption=s.getCA()}},Jh.prototype.createOption=function(s){var e=new av;return e.Parent=this,e.optionName=s,this.Kids.push(e),J9.call(this.scope,e),e};var qp=function(){oo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Cs.CheckBox.createAppearanceStream()};Gl(qp,oo);var Md=function(){hc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,13)},set:function(e){e?this.Ff=Ni(this.Ff,13):this.Ff=Ei(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,21)},set:function(e){e?this.Ff=Ni(this.Ff,21):this.Ff=Ei(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,23)},set:function(e){e?this.Ff=Ni(this.Ff,23):this.Ff=Ei(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,24)},set:function(e){e?this.Ff=Ni(this.Ff,24):this.Ff=Ei(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,25)},set:function(e){e?this.Ff=Ni(this.Ff,25):this.Ff=Ei(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,26)},set:function(e){e?this.Ff=Ni(this.Ff,26):this.Ff=Ei(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){s=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){Number.isInteger(e)&&(s=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Gl(Md,hc);var Zp=function(){Md.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ci(this.Ff,14)},set:function(s){s?this.Ff=Ni(this.Ff,14):this.Ff=Ei(this.Ff,14)}}),this.password=!0};Gl(Zp,Md);var Cs={CheckBox:{createAppearanceStream:function(){return{N:{On:Cs.CheckBox.YesNormal},D:{On:Cs.CheckBox.YesPushDown,Off:Cs.CheckBox.OffPushDown}}},YesPushDown:function(s){var e=Oc(s);e.scope=s.scope;var t=[],n=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color),o=Eb(s,s.caption);return t.push("0.749023 g"),t.push("0 0 "+Bn(Cs.internal.getWidth(s))+" "+Bn(Cs.internal.getHeight(s))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Bn(o.fontSize)+" Tf "+r),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(s){var e=Oc(s);e.scope=s.scope;var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),r=[],o=Cs.internal.getHeight(s),c=Cs.internal.getWidth(s),h=Eb(s,s.caption);return r.push("1 g"),r.push("0 0 "+Bn(c)+" "+Bn(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Bn(c-1)+" "+Bn(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+Bn(h.fontSize)+" Tf "+n),r.push(h.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(s){var e=Oc(s);e.scope=s.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Bn(Cs.internal.getWidth(s))+" "+Bn(Cs.internal.getHeight(s))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(s){var e={D:{Off:Cs.RadioButton.Circle.OffPushDown},N:{}};return e.N[s]=Cs.RadioButton.Circle.YesNormal,e.D[s]=Cs.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(s){var e=Oc(s);e.scope=s.scope;var t=[],n=Cs.internal.getWidth(s)<=Cs.internal.getHeight(s)?Cs.internal.getWidth(s)/4:Cs.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Cs.internal.Bezier_C,o=Number((n*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+bd(Cs.internal.getWidth(s)/2)+" "+bd(Cs.internal.getHeight(s)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(s){var e=Oc(s);e.scope=s.scope;var t=[],n=Cs.internal.getWidth(s)<=Cs.internal.getHeight(s)?Cs.internal.getWidth(s)/4:Cs.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),o=Number((r*Cs.internal.Bezier_C).toFixed(5)),c=Number((n*Cs.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+bd(Cs.internal.getWidth(s)/2)+" "+bd(Cs.internal.getHeight(s)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+bd(Cs.internal.getWidth(s)/2)+" "+bd(Cs.internal.getHeight(s)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),t.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),t.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),t.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(s){var e=Oc(s);e.scope=s.scope;var t=[],n=Cs.internal.getWidth(s)<=Cs.internal.getHeight(s)?Cs.internal.getWidth(s)/4:Cs.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),o=Number((r*Cs.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+bd(Cs.internal.getWidth(s)/2)+" "+bd(Cs.internal.getHeight(s)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(s){var e={D:{Off:Cs.RadioButton.Cross.OffPushDown},N:{}};return e.N[s]=Cs.RadioButton.Cross.YesNormal,e.D[s]=Cs.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(s){var e=Oc(s);e.scope=s.scope;var t=[],n=Cs.internal.calculateCross(s);return t.push("q"),t.push("1 1 "+Bn(Cs.internal.getWidth(s)-2)+" "+Bn(Cs.internal.getHeight(s)-2)+" re"),t.push("W"),t.push("n"),t.push(Bn(n.x1.x)+" "+Bn(n.x1.y)+" m"),t.push(Bn(n.x2.x)+" "+Bn(n.x2.y)+" l"),t.push(Bn(n.x4.x)+" "+Bn(n.x4.y)+" m"),t.push(Bn(n.x3.x)+" "+Bn(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(s){var e=Oc(s);e.scope=s.scope;var t=Cs.internal.calculateCross(s),n=[];return n.push("0.749023 g"),n.push("0 0 "+Bn(Cs.internal.getWidth(s))+" "+Bn(Cs.internal.getHeight(s))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Bn(Cs.internal.getWidth(s)-2)+" "+Bn(Cs.internal.getHeight(s)-2)+" re"),n.push("W"),n.push("n"),n.push(Bn(t.x1.x)+" "+Bn(t.x1.y)+" m"),n.push(Bn(t.x2.x)+" "+Bn(t.x2.y)+" l"),n.push(Bn(t.x4.x)+" "+Bn(t.x4.y)+" m"),n.push(Bn(t.x3.x)+" "+Bn(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(s){var e=Oc(s);e.scope=s.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Bn(Cs.internal.getWidth(s))+" "+Bn(Cs.internal.getHeight(s))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(s){var e=s.scope.internal.getFont(s.fontName,s.fontStyle).id,t=s.scope.__private__.encodeColorString(s.color);return"/"+e+" "+s.fontSize+" Tf "+t}};Cs.internal={Bezier_C:.551915024494,calculateCross:function(s){var e=Cs.internal.getWidth(s),t=Cs.internal.getHeight(s),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},Cs.internal.getWidth=function(s){var e=0;return $r(s)==="object"&&(e=qS(s.Rect[2])),e},Cs.internal.getHeight=function(s){var e=0;return $r(s)==="object"&&(e=qS(s.Rect[3])),e};var J9=hi.addField=function(s){if(X9(this,s),!(s instanceof hc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=s).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};hi.AcroFormChoiceField=Yh,hi.AcroFormListBox=Wh,hi.AcroFormComboBox=Xh,hi.AcroFormEditBox=Xp,hi.AcroFormButton=oo,hi.AcroFormPushButton=Jp,hi.AcroFormRadioButton=Jh,hi.AcroFormCheckBox=qp,hi.AcroFormTextField=Md,hi.AcroFormPasswordField=Zp,hi.AcroFormAppearance=Cs,hi.AcroForm={ChoiceField:Yh,ListBox:Wh,ComboBox:Xh,EditBox:Xp,Button:oo,PushButton:Jp,RadioButton:Jh,CheckBox:qp,TextField:Md,PasswordField:Zp,Appearance:Cs},Ps.AcroForm={ChoiceField:Yh,ListBox:Wh,ComboBox:Xh,EditBox:Xp,Button:oo,PushButton:Jp,RadioButton:Jh,CheckBox:qp,TextField:Md,PasswordField:Zp,Appearance:Cs};var q9=Ps.AcroForm;function EI(s){return s.reduce(function(e,t,n){return e[t]=n,e},{})}(function(s){var e="addImage_";s.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=s.__addimage__.getImageFileTypeByImageData=function(P,V){var G,ae,ue,oe,X,Y=t;if((V=V||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(H(P))for(X in n)for(ue=n[X],G=0;G<ue.length;G+=1){for(oe=!0,ae=0;ae<ue[G].length;ae+=1)if(ue[G][ae]!==void 0&&ue[G][ae]!==P[ae]){oe=!1;break}if(oe===!0){Y=X;break}}else for(X in n)for(ue=n[X],G=0;G<ue.length;G+=1){for(oe=!0,ae=0;ae<ue[G].length;ae+=1)if(ue[G][ae]!==void 0&&ue[G][ae]!==P.charCodeAt(ae)){oe=!1;break}if(oe===!0){Y=X;break}}return Y===t&&V!==t&&(Y=V),Y},o=function P(V){for(var G=this.internal.write,ae=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var oe=[];if(oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Image"}),oe.push({key:"Width",value:V.width}),oe.push({key:"Height",value:V.height}),V.colorSpace===C.INDEXED?oe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):(oe.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===C.DEVICE_CMYK&&oe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),oe.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&oe.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)&&V.transparency.length>0){for(var X="",Y=0,re=V.transparency.length;Y<re;Y++)X+=V.transparency[Y]+" "+V.transparency[Y]+" ";oe.push({key:"Mask",value:"["+X+"]"})}V.sMask!==void 0&&oe.push({key:"SMask",value:V.objectId+1+" 0 R"});var pe=V.filter!==void 0?["/"+V.filter]:void 0;if(ae({data:V.data,additionalKeyValues:oe,alreadyAppliedFilters:pe,objectId:V.objectId}),G("endobj"),"sMask"in V&&V.sMask!==void 0){var ee,M=(ee=V.sMaskBitsPerComponent)!==null&&ee!==void 0?ee:V.bitsPerComponent,J={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:V.sMask};"filter"in V&&(J.decodeParameters="/Predictor ".concat(V.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(V.width),J.filter=V.filter),P.call(this,J)}if(V.colorSpace===C.INDEXED){var ie=this.internal.newObject();ae({data:U(new Uint8Array(V.palette)),objectId:ie}),G("endobj")}},c=function(){var P=this.internal.collections[e+"images"];for(var V in P)o.call(this,P[V])},h=function(){var P,V=this.internal.collections[e+"images"],G=this.internal.write;for(var ae in V)G("/I"+(P=V[ae]).index,P.objectId,"0","R")},u=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",h))},f=function(){var P=this.internal.collections[e+"images"];return u.call(this),P},A=function(){return Object.keys(this.internal.collections[e+"images"]).length},m=function(P){return typeof s["process"+P.toUpperCase()]=="function"},x=function(P){return $r(P)==="object"&&P.nodeType===1},g=function(P,V){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var G=""+P.getAttribute("src");if(G.indexOf("data:image/")===0)return Bx(unescape(G).split("base64,").pop());var ae=s.loadFile(G,!0);if(ae!==void 0)return ae}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var ue;switch(V){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return Bx(P.toDataURL(ue,1).split("base64,").pop())}},b=function(P){var V=this.internal.collections[e+"images"];if(V){for(var G in V)if(P===V[G].alias)return V[G]}},I=function(P,V,G){return P||V||(P=-96,V=-96),P<0&&(P=-1*G.width*72/P/this.internal.scaleFactor),V<0&&(V=-1*G.height*72/V/this.internal.scaleFactor),P===0&&(P=V*G.width/G.height),V===0&&(V=P*G.height/G.width),[P,V]},N=function(P,V,G,ae,ue,oe){var X=I.call(this,G,ae,ue),Y=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,pe=f.call(this);if(G=X[0],ae=X[1],pe[ue.index]=ue,oe){oe*=Math.PI/180;var ee=Math.cos(oe),M=Math.sin(oe),J=function(le){return le.toFixed(4)},ie=[J(ee),J(M),J(-1*M),J(ee),0,0,"cm"]}this.internal.write("q"),oe?(this.internal.write([1,"0","0",1,Y(P),re(V+ae),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([Y(G),"0","0",Y(ae),"0","0","cm"].join(" "))):this.internal.write([Y(G),"0","0",Y(ae),Y(P),re(V+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},C=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=s.__addimage__.sHashCode=function(P){var V,G,ae=0;if(typeof P=="string")for(G=P.length,V=0;V<G;V++)ae=(ae<<5)-ae+P.charCodeAt(V),ae|=0;else if(H(P))for(G=P.byteLength/2,V=0;V<G;V++)ae=(ae<<5)-ae+P[V],ae|=0;return ae},L=s.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var V=!0;return P.length===0&&(V=!1),P.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(V=!1),V},O=s.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var V=P.indexOf(",");return V<0?null:P.substring(0,V).trim().endsWith("base64")?P.substring(V+1):null};s.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var H=s.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},Q=s.__addimage__.binaryStringToUint8Array=function(P){for(var V=P.length,G=new Uint8Array(V),ae=0;ae<V;ae++)G[ae]=P.charCodeAt(ae);return G},U=s.__addimage__.arrayBufferToBinaryString=function(P){for(var V="",G=H(P)?P:new Uint8Array(P),ae=0;ae<G.length;ae+=8192)V+=String.fromCharCode.apply(null,G.subarray(ae,ae+8192));return V};s.addImage=function(){var P,V,G,ae,ue,oe,X,Y,re;if(typeof arguments[1]=="number"?(V=t,G=arguments[1],ae=arguments[2],ue=arguments[3],oe=arguments[4],X=arguments[5],Y=arguments[6],re=arguments[7]):(V=arguments[1],G=arguments[2],ae=arguments[3],ue=arguments[4],oe=arguments[5],X=arguments[6],Y=arguments[7],re=arguments[8]),$r(P=arguments[0])==="object"&&!x(P)&&"imageData"in P){var pe=P;P=pe.imageData,V=pe.format||V||t,G=pe.x||G||0,ae=pe.y||ae||0,ue=pe.w||pe.width||ue,oe=pe.h||pe.height||oe,X=pe.alias||X,Y=pe.compression||Y,re=pe.rotation||pe.angle||re}var ee=this.internal.getFilters();if(Y===void 0&&ee.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(G)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var M=R.call(this,P,V,X,Y);return N.call(this,G,ae,ue,oe,M,re),this};var R=function(P,V,G,ae){var ue,oe,X;if(typeof P=="string"&&r(P)===t){P=unescape(P);var Y=$(P,!1);(Y!==""||(Y=s.loadFile(P,!0))!==void 0)&&(P=Y)}if(x(P)&&(P=g(P,V)),V=r(P,V),!m(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((X=G)==null||X.length===0)&&(G=(function(re){return typeof re=="string"||H(re)?F(re):H(re.data)?F(re.data):null})(P)),(ue=b.call(this,G))||(P instanceof Uint8Array||V==="RGBA"||(oe=P,P=Q(P)),ue=this["process"+V.toUpperCase()](P,A.call(this),G,(function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in s.image_compression?re:E.NONE})(ae),oe)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},$=s.__addimage__.convertBase64ToBinaryString=function(P,V){V=typeof V!="boolean"||V;var G,ae="";if(typeof P=="string"){var ue;G=(ue=O(P))!==null&&ue!==void 0?ue:P;try{ae=Bx(G)}catch(oe){if(V)throw L(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+oe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};s.getImageProperties=function(P){var V,G,ae="";if(x(P)&&(P=g(P)),typeof P=="string"&&r(P)===t&&((ae=$(P,!1))===""&&(ae=s.loadFile(P)||""),P=ae),G=r(P),!m(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(P instanceof Uint8Array||(P=Q(P)),!(V=this["process"+G.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=G,V}})(Ps.API),(function(s){var e=function(t){if(t!==void 0&&t!="")return!0};Ps.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(t){for(var n,r,o,c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,A=!1,m=0;m<f.length&&!A;m++)switch((n=f[m]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(A!=0){this.internal.write("/Annots [");for(var x=0;x<f.length;x++){n=f[x];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(I.objId),E=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+c(n.bounds.x)+" "+h(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+h(n.bounds.y)+"] ")+"/Contents ("+g(C(n.contents))+")",o+=" /Popup "+N.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+g(C(E))+") >>",I.content=o;var F=I.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+c(n.bounds.x+30)+" "+h(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+h(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(o+=" /Open true"),o+=" >>",N.content=o,this.internal.write(I.objId,"0 R",N.objId,"0 R");break;case"freetext":r="/Rect ["+c(n.bounds.x)+" "+h(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+h(n.bounds.y+n.bounds.h)+"] ";var L=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+g(b(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var O=this.annotations._nameMap[n.options.name];n.options.pageNumber=O.page,n.options.top=O.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var H=h(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+H+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),s.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},s.link=function(t,n,r,o,c){var h=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:u(t),y:f(n),w:u(t+r),h:f(n+o)},options:c,type:"link"})},s.textWithLink=function(t,n,r,o){var c,h,u=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){h=o.maxWidth;var A=this.splitTextToSize(t,h).length;c=Math.ceil(f*A)}else h=u,c=f;return this.text(t,n,r,o),r+=.2*f,o.align==="center"&&(n-=u/2),o.align==="right"&&(n-=u),this.link(n,r-f,h,c,o),u},s.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Ps.API),(function(s){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];s.__arabicParser__={};var o=s.__arabicParser__.isInArabicSubstitutionA=function(I){return e[I.charCodeAt(0)]!==void 0},c=s.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},h=s.__arabicParser__.isArabicEndLetter=function(I){return c(I)&&o(I)&&e[I.charCodeAt(0)].length<=2},u=s.__arabicParser__.isArabicAlfLetter=function(I){return c(I)&&r.indexOf(I.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return c(I)&&o(I)&&e[I.charCodeAt(0)].length>=1};var f=s.__arabicParser__.arabicLetterHasFinalForm=function(I){return c(I)&&o(I)&&e[I.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(I){return c(I)&&o(I)&&e[I.charCodeAt(0)].length>=3};var A=s.__arabicParser__.arabicLetterHasMedialForm=function(I){return c(I)&&o(I)&&e[I.charCodeAt(0)].length==4},m=s.__arabicParser__.resolveLigatures=function(I){var N=0,C=t,E="",F=0;for(N=0;N<I.length;N+=1)C[I.charCodeAt(N)]!==void 0?(F++,typeof(C=C[I.charCodeAt(N)])=="number"&&(E+=String.fromCharCode(C),C=t,F=0),N===I.length-1&&(C=t,E+=I.charAt(N-(F-1)),N-=F-1,F=0)):(C=t,E+=I.charAt(N-F),N-=F,F=0);return E};s.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&n[I.charCodeAt(0)]!==void 0};var x=s.__arabicParser__.getCorrectForm=function(I,N,C){return c(I)?o(I)===!1?-1:!f(I)||!c(N)&&!c(C)||!c(C)&&h(N)||h(I)&&!c(N)||h(I)&&u(N)||h(I)&&h(N)?0:A(I)&&c(N)&&!h(N)&&c(C)&&f(C)?3:h(I)||!c(C)?1:2:-1},g=function(I){var N=0,C=0,E=0,F="",L="",O="",H=(I=I||"").split("\\s+"),Q=[];for(N=0;N<H.length;N+=1){for(Q.push(""),C=0;C<H[N].length;C+=1)F=H[N][C],L=H[N][C-1],O=H[N][C+1],c(F)?(E=x(F,L,O),Q[N]+=E!==-1?String.fromCharCode(e[F.charCodeAt(0)][E]):F):Q[N]+=F;Q[N]=m(Q[N])}return Q.join(" ")},b=s.__arabicParser__.processArabic=s.processArabic=function(){var I,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(N)){var E=0;for(C=[],E=0;E<N.length;E+=1)Array.isArray(N[E])?C.push([g(N[E][0]),N[E][1],N[E][2]]):C.push([g(N[E])]);I=C}else I=g(N);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};s.events.push(["preProcessText",b])})(Ps.API),Ps.API.autoPrint=function(s){var e;return(s=s||{}).variant=s.variant||"non-conform",s.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(s){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(h){t=h}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(h){n=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(h){r=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(h){o=h}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(h){c=h}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var r;if((t=t||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ps.API),(function(s){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(I){u=I}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(I){f=I}});var A=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return A},set:function(I){A=I}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(I){m=I}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(I){x=I}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(I){b=I}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},s.getTextDimensions=function(u,f){n.call(this);var A=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),x=f.scaleFactor||this.internal.scaleFactor,g=0,b=0,I=0,N=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var C=f.maxWidth;C>0?typeof u=="string"?u=this.splitTextToSize(u,C):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(F,L){return F.concat(N.splitTextToSize(L,C))},[])):u=Array.isArray(u)?u:[u];for(var E=0;E<u.length;E++)g<(I=this.getStringUnitWidth(u[E],{font:m})*A)&&(g=I);return g!==0&&(b=u.length),{w:g/=x,h:Math.max((b*A*this.getLineHeightFactor()-A*(this.getLineHeightFactor()-1))/x,0)}},s.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=s.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var f=this.internal.__cell__.lastCell,A=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===u.lineNumber?(u.x=(f.x||0)+(f.width||0),u.y=f.y||0):f.y+f.height+u.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=m.top,g&&x&&(this.printHeaderRow(u.lineNumber,!0),u.y+=x[0].height)):u.y=f.y+f.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-A,u.y+A,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+A,{align:"center",baseline:"top",maxWidth:u.width-A-A}):this.text(u.text,u.x+A,u.y+A,{align:"left",baseline:"top",maxWidth:u.width-A-A})),this.internal.__cell__.lastCell=u,this};s.table=function(u,f,A,m,x){if(n.call(this),!A)throw new Error("No data for PDF table.");var g,b,I,N,C=[],E=[],F=[],L={},O={},H=[],Q=[],U=(x=x||{}).autoSize||!1,R=x.printHeaders!==!1,$=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,P=x.margins||Object.assign({width:this.getPageWidth()},e),V=typeof x.padding=="number"?x.padding:3,G=x.headerBackgroundColor||"#c8c8c8",ae=x.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=ae,this.setFontSize($),m==null)E=C=Object.keys(A[0]),F=C.map(function(){return"left"});else if(Array.isArray(m)&&$r(m[0])==="object")for(C=m.map(function(pe){return pe.name}),E=m.map(function(pe){return pe.prompt||pe.name||""}),F=m.map(function(pe){return pe.align||"left"}),g=0;g<m.length;g+=1)O[m[g].name]=.7499990551181103*m[g].width;else Array.isArray(m)&&typeof m[0]=="string"&&(E=C=m,F=C.map(function(){return"left"}));if(U||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<C.length;g+=1){for(L[N=C[g]]=A.map(function(pe){return pe[N]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(E[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=L[N],this.setFont(void 0,"normal"),I=0;I<b.length;I+=1)H.push(this.getTextDimensions(b[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[N]=Math.max.apply(null,H)+V+V,H=[]}if(R){var ue={};for(g=0;g<C.length;g+=1)ue[C[g]]={},ue[C[g]].text=E[g],ue[C[g]].align=F[g];var oe=h.call(this,ue,O);Q=C.map(function(pe){return new o(u,f,O[pe],oe,ue[pe].text,void 0,ue[pe].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var X=m.reduce(function(pe,ee){return pe[ee.name]=ee.align,pe},{});for(g=0;g<A.length;g+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:g,data:A[g]},this);var Y=h.call(this,A[g],O);for(I=0;I<C.length;I+=1){var re=A[g][C[I]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:g,col:I,data:re},this),c.call(this,new o(u,f,O[C[I]],Y,re,g+2,X[C[I]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=f,this};var h=function(u,f){var A=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(u).map(function(g){var b=u[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,f[g]-A-A)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/x+A+A},this).reduce(function(g,b){return Math.max(g,b)},0)};s.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},s.printHeaderRow=function(u,f){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var A;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){A=this.internal.__cell__.tableHeaderRow[g].clone(),f&&(A.y=this.internal.__cell__.margins.top||0,x.push(A)),A.lineNumber=u;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,A),this.setTextColor(b)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}})(Ps.API);var TI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},II=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tb=EI(II),_I=[100,200,300,400,500,600,700,800,900],Z9=EI(_I);function v1(s){var e=s.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return TI[o=o||"normal"]?o:"normal"})(s.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(s.weight),r=(function(o){return typeof Tb[o=o||"normal"]=="number"?o:"normal"})(s.stretch);return{family:e,style:t,weight:n,stretch:r,src:s.src||[],ref:s.ref||{name:e,style:[r,t,n].join(" ")}}}function ZS(s,e,t,n){var r;for(r=t;r>=0&&r<e.length;r+=n)if(s[e[r]])return s[e[r]];for(r=t;r>=0&&r<e.length;r-=n)if(s[e[r]])return s[e[r]]}var eV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},eC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tC(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function sC(s){return s.trimLeft()}function tV(s,e){for(var t=0;t<s.length;){if(s.charAt(t)===e)return[s.substring(0,t),s.substring(t+1)];t+=1}return null}function sV(s){var e=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],s.substring(e[0].length)]}var tx,nC,rC,Hf,sx,aC,iC,oC,y1=["times"];function lC(s,e,t,n,r){var o=4,c=cC;switch(r){case Ps.API.image_compression.FAST:o=1,c=AC;break;case Ps.API.image_compression.MEDIUM:o=6,c=uC;break;case Ps.API.image_compression.SLOW:o=9,c=dC}s=(function(u,f,A,m){for(var x,g=u.length/f,b=new Uint8Array(u.length+g),I=[nV,AC,cC,uC,dC],N=0;N<g;N+=1){var C=N*f,E=u.subarray(C,C+f);if(m)b.set(m(E,A,x),C+N);else{for(var F=I.length,L=[],O=0;O<F;O+=1)L[O]=I[O](E,A,x);var H=aV(L.concat());b.set(L[H],C+N)}x=E}return b})(s,e,Math.ceil(t*n/8),c);var h=wb(s,{level:o});return Ps.API.__addimage__.arrayBufferToBinaryString(h)}function nV(s){var e=Array.apply([],s);return e.unshift(0),e}function AC(s,e){var t=s.length,n=[];n[0]=1;for(var r=0;r<t;r+=1){var o=s[r-e]||0;n[r+1]=s[r]-o+256&255}return n}function cC(s,e,t){var n=s.length,r=[];r[0]=2;for(var o=0;o<n;o+=1){var c=t&&t[o]||0;r[o+1]=s[o]-c+256&255}return r}function uC(s,e,t){var n=s.length,r=[];r[0]=3;for(var o=0;o<n;o+=1){var c=s[o-e]||0,h=t&&t[o]||0;r[o+1]=s[o]+256-(c+h>>>1)&255}return r}function dC(s,e,t){var n=s.length,r=[];r[0]=4;for(var o=0;o<n;o+=1){var c=rV(s[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);r[o+1]=s[o]-c+256&255}return r}function rV(s,e,t){if(s===e&&e===t)return s;var n=Math.abs(e-t),r=Math.abs(s-t),o=Math.abs(s+e-t-t);return n<=r&&n<=o?s:r<=o?e:t}function aV(s){var e=s.map(function(t){return t.reduce(function(n,r){return n+Math.abs(r)},0)});return e.indexOf(Math.min.apply(null,e))}function b1(s,e,t){var n=e*t,r=Math.floor(n/8),o=16-(n-8*r+t),c=(1<<t)-1;return FI(s,r)>>o&c}function hC(s,e,t,n){var r=t*n,o=Math.floor(r/8),c=16-(r-8*o+n),h=(1<<n)-1,u=(e&h)<<c;(function(f,A,m){if(A+1<f.byteLength)f.setUint16(A,m,!1);else{var x=m>>8&255;f.setUint8(A,x)}})(s,o,FI(s,o)&~(h<<c)&65535|u)}function FI(s,e){return e+1<s.byteLength?s.getUint16(e,!1):s.getUint8(e)<<8}function iV(s){var e=0;if(s[e++]!==71||s[e++]!==73||s[e++]!==70||s[e++]!==56||(s[e++]+1&253)!=56||s[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=s[e++]|s[e++]<<8,n=s[e++]|s[e++]<<8,r=s[e++],o=r>>7,c=1<<1+(7&r);s[e++],s[e++];var h=null,u=null;o&&(h=e,u=c,e+=3*c);var f=!0,A=[],m=0,x=null,g=0,b=null;for(this.width=t,this.height=n;f&&e<s.length;)switch(s[e++]){case 33:switch(s[e++]){case 255:if(s[e]!==11||s[e+1]==78&&s[e+2]==69&&s[e+3]==84&&s[e+4]==83&&s[e+5]==67&&s[e+6]==65&&s[e+7]==80&&s[e+8]==69&&s[e+9]==50&&s[e+10]==46&&s[e+11]==48&&s[e+12]==3&&s[e+13]==1&&s[e+16]==0)e+=14,b=s[e++]|s[e++]<<8,e++;else for(e+=12;;){if(!((P=s[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(s[e++]!==4||s[e+4]!==0)throw new Error("Invalid graphics extension block.");var I=s[e++];m=s[e++]|s[e++]<<8,x=s[e++],1&I||(x=null),g=I>>2&7,e++;break;case 254:for(;;){if(!((P=s[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+s[e-1].toString(16))}break;case 44:var N=s[e++]|s[e++]<<8,C=s[e++]|s[e++]<<8,E=s[e++]|s[e++]<<8,F=s[e++]|s[e++]<<8,L=s[e++],O=L>>6&1,H=1<<1+(7&L),Q=h,U=u,R=!1;L>>7&&(R=!0,Q=e,U=H,e+=3*H);var $=e;for(e++;;){var P;if(!((P=s[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}A.push({x:N,y:C,width:E,height:F,has_local_palette:R,palette_offset:Q,palette_size:U,data_offset:$,data_length:e-$,transparent_index:x,interlaced:!!O,delay:m,disposal:g});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+s[e-1].toString(16))}this.numFrames=function(){return A.length},this.loopCount=function(){return b},this.frameInfo=function(V){if(V<0||V>=A.length)throw new Error("Frame index out of range.");return A[V]},this.decodeAndBlitFrameBGRA=function(V,G){var ae=this.frameInfo(V),ue=ae.width*ae.height,oe=new Uint8Array(ue);fC(s,ae.data_offset,oe,ue);var X=ae.palette_offset,Y=ae.transparent_index;Y===null&&(Y=256);var re=ae.width,pe=t-re,ee=re,M=4*(ae.y*t+ae.x),J=4*((ae.y+ae.height)*t+ae.x),ie=M,le=4*pe;ae.interlaced===!0&&(le+=4*t*7);for(var ce=8,ve=0,Se=oe.length;ve<Se;++ve){var ge=oe[ve];if(ee===0&&(ee=re,(ie+=le)>=J&&(le=4*pe+4*t*(ce-1),ie=M+(re+pe)*(ce<<1),ce>>=1)),ge===Y)ie+=4;else{var Be=s[X+3*ge],Fe=s[X+3*ge+1],Qe=s[X+3*ge+2];G[ie++]=Qe,G[ie++]=Fe,G[ie++]=Be,G[ie++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(V,G){var ae=this.frameInfo(V),ue=ae.width*ae.height,oe=new Uint8Array(ue);fC(s,ae.data_offset,oe,ue);var X=ae.palette_offset,Y=ae.transparent_index;Y===null&&(Y=256);var re=ae.width,pe=t-re,ee=re,M=4*(ae.y*t+ae.x),J=4*((ae.y+ae.height)*t+ae.x),ie=M,le=4*pe;ae.interlaced===!0&&(le+=4*t*7);for(var ce=8,ve=0,Se=oe.length;ve<Se;++ve){var ge=oe[ve];if(ee===0&&(ee=re,(ie+=le)>=J&&(le=4*pe+4*t*(ce-1),ie=M+(re+pe)*(ce<<1),ce>>=1)),ge===Y)ie+=4;else{var Be=s[X+3*ge],Fe=s[X+3*ge+1],Qe=s[X+3*ge+2];G[ie++]=Be,G[ie++]=Fe,G[ie++]=Qe,G[ie++]=255}--ee}}}function fC(s,e,t,n){for(var r=s[e++],o=1<<r,c=o+1,h=c+1,u=r+1,f=(1<<u)-1,A=0,m=0,x=0,g=s[e++],b=new Int32Array(4096),I=null;;){for(;A<16&&g!==0;)m|=s[e++]<<A,A+=8,g===1?g=s[e++]:--g;if(A<u)break;var N=m&f;if(m>>=u,A-=u,N!==o){if(N===c)break;for(var C=N<h?N:I,E=0,F=C;F>o;)F=b[F]>>8,++E;var L=F;if(x+E+(C!==N?1:0)>n)return void ca.log("Warning, gif stream longer than expected.");t[x++]=L;var O=x+=E;for(C!==N&&(t[x++]=L),F=C;E--;)F=b[F],t[--O]=255&F,F>>=8;I!==null&&h<4096&&(b[h++]=I<<8|L,h>=f+1&&u<12&&(++u,f=f<<1|1)),I=N}else h=c+1,f=(1<<(u=r+1))-1,I=null}return x!==n&&ca.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function w1(s){var e,t,n,r,o,c=Math.floor,h=new Array(64),u=new Array(64),f=new Array(64),A=new Array(64),m=new Array(65535),x=new Array(65535),g=new Array(64),b=new Array(64),I=[],N=0,C=7,E=new Array(64),F=new Array(64),L=new Array(64),O=new Array(256),H=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function oe(M,J){for(var ie=0,le=0,ce=new Array,ve=1;ve<=16;ve++){for(var Se=1;Se<=M[ve];Se++)ce[J[le]]=[],ce[J[le]][0]=ie,ce[J[le]][1]=ve,le++,ie++;ie*=2}return ce}function X(M){for(var J=M[0],ie=M[1]-1;ie>=0;)J&1<<ie&&(N|=1<<C),ie--,--C<0&&(N==255?(Y(255),Y(0)):Y(N),C=7,N=0)}function Y(M){I.push(M)}function re(M){Y(M>>8&255),Y(255&M)}function pe(M,J,ie,le,ce){for(var ve,Se=ce[0],ge=ce[240],Be=(function(ze,Ft){var Qt,Ct,Jt,ts,as,Xe,Vt,Kt,Mt,mt,Dt=0;for(Mt=0;Mt<8;++Mt){Qt=ze[Dt],Ct=ze[Dt+1],Jt=ze[Dt+2],ts=ze[Dt+3],as=ze[Dt+4],Xe=ze[Dt+5],Vt=ze[Dt+6];var Ns=Qt+(Kt=ze[Dt+7]),$t=Qt-Kt,Wt=Ct+Vt,lt=Ct-Vt,Ot=Jt+Xe,De=Jt-Xe,dt=ts+as,at=ts-as,Et=Ns+dt,Xt=Ns-dt,vt=Wt+Ot,it=Wt-Ot;ze[Dt]=Et+vt,ze[Dt+4]=Et-vt;var Rt=.707106781*(it+Xt);ze[Dt+2]=Xt+Rt,ze[Dt+6]=Xt-Rt;var qt=.382683433*((Et=at+De)-(it=lt+$t)),cs=.5411961*Et+qt,Xs=1.306562965*it+qt,Ls=.707106781*(vt=De+lt),Yt=$t+Ls,hn=$t-Ls;ze[Dt+5]=hn+cs,ze[Dt+3]=hn-cs,ze[Dt+1]=Yt+Xs,ze[Dt+7]=Yt-Xs,Dt+=8}for(Dt=0,Mt=0;Mt<8;++Mt){Qt=ze[Dt],Ct=ze[Dt+8],Jt=ze[Dt+16],ts=ze[Dt+24],as=ze[Dt+32],Xe=ze[Dt+40],Vt=ze[Dt+48];var Tr=Qt+(Kt=ze[Dt+56]),dr=Qt-Kt,hr=Ct+Vt,Zt=Ct-Vt,mn=Jt+Xe,pn=Jt-Xe,Nn=ts+as,Fs=ts-as,En=Tr+Nn,An=Tr-Nn,Ir=hr+mn,ya=hr-mn;ze[Dt]=En+Ir,ze[Dt+32]=En-Ir;var ai=.707106781*(ya+An);ze[Dt+16]=An+ai,ze[Dt+48]=An-ai;var ii=.382683433*((En=Fs+pn)-(ya=Zt+dr)),yn=.5411961*En+ii,_r=1.306562965*ya+ii,ea=.707106781*(Ir=pn+Zt),xr=dr+ea,Fr=dr-ea;ze[Dt+40]=Fr+yn,ze[Dt+24]=Fr-yn,ze[Dt+8]=xr+_r,ze[Dt+56]=xr-_r,Dt++}for(Mt=0;Mt<64;++Mt)mt=ze[Mt]*Ft[Mt],g[Mt]=mt>0?mt+.5|0:mt-.5|0;return g})(M,J),Fe=0;Fe<64;++Fe)b[Q[Fe]]=Be[Fe];var Qe=b[0]-ie;ie=b[0],Qe==0?X(le[0]):(X(le[x[ve=32767+Qe]]),X(m[ve]));for(var Ze=63;Ze>0&&b[Ze]==0;)Ze--;if(Ze==0)return X(Se),ie;for(var Pe,me=1;me<=Ze;){for(var nt=me;b[me]==0&&me<=Ze;)++me;var It=me-nt;if(It>=16){Pe=It>>4;for(var ut=1;ut<=Pe;++ut)X(ge);It&=15}ve=32767+b[me],X(ce[(It<<4)+x[ve]]),X(m[ve]),me++}return Ze!=63&&X(Se),ie}function ee(M){M=Math.min(Math.max(M,1),100),o!=M&&((function(J){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var ce=c((ie[le]*J+50)/100);ce=Math.min(Math.max(ce,1),255),h[Q[le]]=ce}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var ge=c((ve[Se]*J+50)/100);ge=Math.min(Math.max(ge,1),255),u[Q[Se]]=ge}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,Qe=0;Qe<8;Qe++)for(var Ze=0;Ze<8;Ze++)f[Fe]=1/(h[Q[Fe]]*Be[Qe]*Be[Ze]*8),A[Fe]=1/(u[Q[Fe]]*Be[Qe]*Be[Ze]*8),Fe++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),o=M)}this.encode=function(M,J){J&&ee(J),I=new Array,N=0,C=7,re(65496),re(65504),re(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),re(1),re(1),Y(0),Y(0),(function(){re(65499),re(132),Y(0);for(var Ct=0;Ct<64;Ct++)Y(h[Ct]);Y(1);for(var Jt=0;Jt<64;Jt++)Y(u[Jt])})(),(function(Ct,Jt){re(65472),re(17),Y(8),re(Jt),re(Ct),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)})(M.width,M.height),(function(){re(65476),re(418),Y(0);for(var Ct=0;Ct<16;Ct++)Y(U[Ct+1]);for(var Jt=0;Jt<=11;Jt++)Y(R[Jt]);Y(16);for(var ts=0;ts<16;ts++)Y($[ts+1]);for(var as=0;as<=161;as++)Y(P[as]);Y(1);for(var Xe=0;Xe<16;Xe++)Y(V[Xe+1]);for(var Vt=0;Vt<=11;Vt++)Y(G[Vt]);Y(17);for(var Kt=0;Kt<16;Kt++)Y(ae[Kt+1]);for(var Mt=0;Mt<=161;Mt++)Y(ue[Mt])})(),re(65498),re(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var ie=0,le=0,ce=0;N=0,C=7,this.encode.displayName="_encode_";for(var ve,Se,ge,Be,Fe,Qe,Ze,Pe,me,nt=M.data,It=M.width,ut=M.height,ze=4*It,Ft=0;Ft<ut;){for(ve=0;ve<ze;){for(Fe=ze*Ft+ve,Ze=-1,Pe=0,me=0;me<64;me++)Qe=Fe+(Pe=me>>3)*ze+(Ze=4*(7&me)),Ft+Pe>=ut&&(Qe-=ze*(Ft+1+Pe-ut)),ve+Ze>=ze&&(Qe-=ve+Ze-ze+4),Se=nt[Qe++],ge=nt[Qe++],Be=nt[Qe++],E[me]=(H[Se]+H[ge+256|0]+H[Be+512|0]>>16)-128,F[me]=(H[Se+768|0]+H[ge+1024|0]+H[Be+1280|0]>>16)-128,L[me]=(H[Se+1280|0]+H[ge+1536|0]+H[Be+1792|0]>>16)-128;ie=pe(E,f,ie,e,n),le=pe(F,A,le,t,r),ce=pe(L,A,ce,t,r),ve+=32}Ft+=8}if(C>=0){var Qt=[];Qt[1]=C+1,Qt[0]=(1<<C+1)-1,X(Qt)}return re(65497),new Uint8Array(I)},s=s||50,(function(){for(var M=String.fromCharCode,J=0;J<256;J++)O[J]=M(J)})(),e=oe(U,R),t=oe(V,G),n=oe($,P),r=oe(ae,ue),(function(){for(var M=1,J=2,ie=1;ie<=15;ie++){for(var le=M;le<J;le++)x[32767+le]=ie,m[32767+le]=[],m[32767+le][1]=ie,m[32767+le][0]=le;for(var ce=-(J-1);ce<=-M;ce++)x[32767+ce]=ie,m[32767+ce]=[],m[32767+ce][1]=ie,m[32767+ce][0]=J-1+ce;M<<=1,J<<=1}})(),(function(){for(var M=0;M<256;M++)H[M]=19595*M,H[M+256|0]=38470*M,H[M+512|0]=7471*M+32768,H[M+768|0]=-11059*M,H[M+1024|0]=-21709*M,H[M+1280|0]=32768*M+8421375,H[M+1536|0]=-27439*M,H[M+1792|0]=-5329*M})(),ee(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tc(s,e){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mC(s){function e(R){if(!R)throw Error("assert :P")}function t(R,$,P){for(var V=0;4>V;V++)if(R[$+V]!=P.charCodeAt(V))return!0;return!1}function n(R,$,P,V,G){for(var ae=0;ae<G;ae++)R[$+ae]=P[V+ae]}function r(R,$,P,V){for(var G=0;G<V;G++)R[$+G]=P}function o(R){return new Int32Array(R)}function c(R,$){for(var P=[],V=0;V<R;V++)P.push(new $);return P}function h(R,$){var P=[];return(function V(G,ae,ue){for(var oe=ue[ae],X=0;X<oe&&(G.push(ue.length>ae+1?[]:new $),!(ue.length<ae+1));X++)V(G[X],ae+1,ue)})(P,0,R),P}var u=function(){var R=this;function $(y,_){for(var K=1<<_-1>>>0;y&K;)K>>>=1;return K?(y&K-1)+K:y}function P(y,_,K,q,de){e(!(q%K));do y[_+(q-=K)]=de;while(0<q)}function V(y,_,K,q,de){if(e(2328>=de),512>=de)var fe=o(512);else if((fe=o(de))==null)return 0;return(function(xe,be,je,_e,Oe,qe){var Ie,He,Ve=be,pt=1<<je,We=o(16),ft=o(16);for(e(Oe!=0),e(_e!=null),e(xe!=null),e(0<je),He=0;He<Oe;++He){if(15<_e[He])return 0;++We[_e[He]]}if(We[0]==Oe)return 0;for(ft[1]=0,Ie=1;15>Ie;++Ie){if(We[Ie]>1<<Ie)return 0;ft[Ie+1]=ft[Ie]+We[Ie]}for(He=0;He<Oe;++He)Ie=_e[He],0<_e[He]&&(qe[ft[Ie]++]=He);if(ft[15]==1)return(_e=new G).g=0,_e.value=qe[0],P(xe,Ve,1,pt,_e),pt;var bt,kt=-1,Nt=pt-1,js=0,hs=1,nn=1,vs=1<<je;for(He=0,Ie=1,Oe=2;Ie<=je;++Ie,Oe<<=1){if(hs+=nn<<=1,0>(nn-=We[Ie]))return 0;for(;0<We[Ie];--We[Ie])(_e=new G).g=Ie,_e.value=qe[He++],P(xe,Ve+js,Oe,vs,_e),js=$(js,Ie)}for(Ie=je+1,Oe=2;15>=Ie;++Ie,Oe<<=1){if(hs+=nn<<=1,0>(nn-=We[Ie]))return 0;for(;0<We[Ie];--We[Ie]){if(_e=new G,(js&Nt)!=kt){for(Ve+=vs,bt=1<<(kt=Ie)-je;15>kt&&!(0>=(bt-=We[kt]));)++kt,bt<<=1;pt+=vs=1<<(bt=kt-je),xe[be+(kt=js&Nt)].g=bt+je,xe[be+kt].value=Ve-be-kt}_e.g=Ie-je,_e.value=qe[He++],P(xe,Ve+(js>>je),Oe,vs,_e),js=$(js,Ie)}}return hs!=2*ft[15]-1?0:pt})(y,_,K,q,de,fe)}function G(){this.value=this.g=0}function ae(){this.value=this.g=0}function ue(){this.G=c(5,G),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Po,ae)}function oe(y,_,K,q){e(y!=null),e(_!=null),e(2147483648>q),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=_,y.pa=K,y.Jd=_,y.Yc=K+q,y.Zc=4<=q?K+q-4+1:K,Se(y)}function X(y,_){for(var K=0;0<_--;)K|=Be(y,128)<<_;return K}function Y(y,_){var K=X(y,_);return ge(y)?-K:K}function re(y,_,K,q){var de,fe=0;for(e(y!=null),e(_!=null),e(4294967288>q),y.Sb=q,y.Ra=0,y.u=0,y.h=0,4<q&&(q=4),de=0;de<q;++de)fe+=_[K+de]<<8*de;y.Ra=fe,y.bb=q,y.oa=_,y.pa=K}function pe(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<cl-8>>>0,++y.bb,y.u-=8;le(y)&&(y.h=1,y.u=0)}function ee(y,_){if(e(0<=_),!y.h&&_<=Ui){var K=ie(y)&Cn[_];return y.u+=_,pe(y),K}return y.h=1,y.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(y){return y.Ra>>>(y.u&cl-1)>>>0}function le(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>cl}function ce(y,_){y.u=_,y.h=le(y)}function ve(y){y.u>=ul&&(e(y.u>=ul),pe(y))}function Se(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function ge(y){return X(y,1)}function Be(y,_){var K=y.Ca;0>y.b&&Se(y);var q=y.b,de=K*_>>>8,fe=(y.I>>>q>de)+0;for(fe?(K-=de,y.I-=de+1<<q>>>0):K=de+1,q=K,de=0;256<=q;)de+=8,q>>=8;return q=7^de+Cl[q],y.b-=q,y.Ca=(K<<q)-1,fe}function Fe(y,_,K){y[_+0]=K>>24&255,y[_+1]=K>>16&255,y[_+2]=K>>8&255,y[_+3]=255&K}function Qe(y,_){return y[_+0]|y[_+1]<<8}function Ze(y,_){return Qe(y,_)|y[_+2]<<16}function Pe(y,_){return Qe(y,_)|Qe(y,_+2)<<16}function me(y,_){var K=1<<_;return e(y!=null),e(0<_),y.X=o(K),y.X==null?0:(y.Mb=32-_,y.Xa=_,1)}function nt(y,_){e(y!=null),e(_!=null),e(y.Xa==_.Xa),n(_.X,0,y.X,0,1<<_.Xa)}function It(){this.X=[],this.Xa=this.Mb=0}function ut(y,_,K,q){e(K!=null),e(q!=null);var de=K[0],fe=q[0];return de==0&&(de=(y*fe+_/2)/_),fe==0&&(fe=(_*de+y/2)/y),0>=de||0>=fe?0:(K[0]=de,q[0]=fe,1)}function ze(y,_){return y+(1<<_)-1>>>_}function Ft(y,_){return((4278255360&y)+(4278255360&_)>>>0&4278255360)+((16711935&y)+(16711935&_)>>>0&16711935)>>>0}function Qt(y,_){R[_]=function(K,q,de,fe,xe,be,je){var _e;for(_e=0;_e<xe;++_e){var Oe=R[y](be[je+_e-1],de,fe+_e);be[je+_e]=Ft(K[q+_e],Oe)}}}function Ct(){this.ud=this.hd=this.jd=0}function Jt(y,_){return((4278124286&(y^_))>>>1)+(y&_)>>>0}function ts(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function as(y,_){return ts(y+(y-_+.5>>1))}function Xe(y,_,K){return Math.abs(_-K)-Math.abs(y-K)}function Vt(y,_,K,q,de,fe,xe){for(q=fe[xe-1],K=0;K<de;++K)fe[xe+K]=q=Ft(y[_+K],q)}function Kt(y,_,K,q,de){var fe;for(fe=0;fe<K;++fe){var xe=y[_+fe],be=xe>>8&255,je=16711935&(je=(je=16711935&xe)+((be<<16)+be));q[de+fe]=(4278255360&xe)+je>>>0}}function Mt(y,_){_.jd=255&y,_.hd=y>>8&255,_.ud=y>>16&255}function mt(y,_,K,q,de,fe){var xe;for(xe=0;xe<q;++xe){var be=_[K+xe],je=be>>>8,_e=be,Oe=255&(Oe=(Oe=be>>>16)+((y.jd<<24>>24)*(je<<24>>24)>>>5));_e=255&(_e=(_e+=(y.hd<<24>>24)*(je<<24>>24)>>>5)+((y.ud<<24>>24)*(Oe<<24>>24)>>>5)),de[fe+xe]=(4278255360&be)+(Oe<<16)+_e}}function Dt(y,_,K,q,de){R[_]=function(fe,xe,be,je,_e,Oe,qe,Ie,He){for(je=qe;je<Ie;++je)for(qe=0;qe<He;++qe)_e[Oe++]=de(be[q(fe[xe++])])},R[y]=function(fe,xe,be,je,_e,Oe,qe){var Ie=8>>fe.b,He=fe.Ea,Ve=fe.K[0],pt=fe.w;if(8>Ie)for(fe=(1<<fe.b)-1,pt=(1<<Ie)-1;xe<be;++xe){var We,ft=0;for(We=0;We<He;++We)We&fe||(ft=q(je[_e++])),Oe[qe++]=de(Ve[ft&pt]),ft>>=Ie}else R["VP8LMapColor"+K](je,_e,Ve,pt,Oe,qe,xe,be,He)}}function Ns(y,_,K,q,de){for(K=_+K;_<K;){var fe=y[_++];q[de++]=fe>>16&255,q[de++]=fe>>8&255,q[de++]=255&fe}}function $t(y,_,K,q,de){for(K=_+K;_<K;){var fe=y[_++];q[de++]=fe>>16&255,q[de++]=fe>>8&255,q[de++]=255&fe,q[de++]=fe>>24&255}}function Wt(y,_,K,q,de){for(K=_+K;_<K;){var fe=(xe=y[_++])>>16&240|xe>>12&15,xe=240&xe|xe>>28&15;q[de++]=fe,q[de++]=xe}}function lt(y,_,K,q,de){for(K=_+K;_<K;){var fe=(xe=y[_++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;q[de++]=fe,q[de++]=xe}}function Ot(y,_,K,q,de){for(K=_+K;_<K;){var fe=y[_++];q[de++]=255&fe,q[de++]=fe>>8&255,q[de++]=fe>>16&255}}function De(y,_,K,q,de,fe){if(fe==0)for(K=_+K;_<K;)Fe(q,((fe=y[_++])[0]>>24|fe[1]>>8&65280|fe[2]<<8&16711680|fe[3]<<24)>>>0),de+=32;else n(q,de,y,_,K)}function dt(y,_){R[_][0]=R[y+"0"],R[_][1]=R[y+"1"],R[_][2]=R[y+"2"],R[_][3]=R[y+"3"],R[_][4]=R[y+"4"],R[_][5]=R[y+"5"],R[_][6]=R[y+"6"],R[_][7]=R[y+"7"],R[_][8]=R[y+"8"],R[_][9]=R[y+"9"],R[_][10]=R[y+"10"],R[_][11]=R[y+"11"],R[_][12]=R[y+"12"],R[_][13]=R[y+"13"],R[_][14]=R[y+"0"],R[_][15]=R[y+"0"]}function at(y){return y==au||y==Hu||y==gc||y==KA}function Et(){this.eb=[],this.size=this.A=this.fb=0}function Xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Et,this.f.kb=new Xt,this.sd=null}function it(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qt(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function cs(y,_){var K=y.T,q=_.ba.f.RGBA,de=q.eb,fe=q.fb+y.ka*q.A,xe=ji[_.ba.S],be=y.y,je=y.O,_e=y.f,Oe=y.N,qe=y.ea,Ie=y.W,He=_.cc,Ve=_.dc,pt=_.Mc,We=_.Nc,ft=y.ka,bt=y.ka+y.T,kt=y.U,Nt=kt+1>>1;for(ft==0?xe(be,je,null,null,_e,Oe,qe,Ie,_e,Oe,qe,Ie,de,fe,null,null,kt):(xe(_.ec,_.fc,be,je,He,Ve,pt,We,_e,Oe,qe,Ie,de,fe-q.A,de,fe,kt),++K);ft+2<bt;ft+=2)He=_e,Ve=Oe,pt=qe,We=Ie,Oe+=y.Rc,Ie+=y.Rc,fe+=2*q.A,xe(be,(je+=2*y.fa)-y.fa,be,je,He,Ve,pt,We,_e,Oe,qe,Ie,de,fe-q.A,de,fe,kt);return je+=y.fa,y.j+bt<y.o?(n(_.ec,_.fc,be,je,kt),n(_.cc,_.dc,_e,Oe,Nt),n(_.Mc,_.Nc,qe,Ie,Nt),K--):1&bt||xe(be,je,null,null,_e,Oe,qe,Ie,_e,Oe,qe,Ie,de,fe+q.A,null,null,kt),K}function Xs(y,_,K){var q=y.F,de=[y.J];if(q!=null){var fe=y.U,xe=_.ba.S,be=xe==ru||xe==gc;_=_.ba.f.RGBA;var je=[0],_e=y.ka;je[0]=y.T,y.Kb&&(_e==0?--je[0]:(--_e,de[0]-=y.width),y.j+y.ka+y.T==y.o&&(je[0]=y.o-y.j-_e));var Oe=_.eb;_e=_.fb+_e*_.A,y=pc(q,de[0],y.width,fe,je,Oe,_e+(be?0:3),_.A),e(K==je),y&&at(xe)&&hA(Oe,_e,be,fe,je,_.A)}return 0}function Ls(y){var _=y.ma,K=_.ba.S,q=11>K,de=K==Qi||K==ko||K==ru||K==Xl||K==12||at(K);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!Pr(_.Oa,y,de?11:12))return 0;if(de&&at(K)&&sn(),y.da)alert("todo:use_scaling");else{if(q){if(_.Ib=qt,y.Kb){if(K=y.U+1>>1,_.memory=o(y.U+2*K),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+y.U,_.Mc=_.cc,_.Nc=_.dc+K,_.Ib=cs,sn()}}else alert("todo:EmitYUV");de&&(_.Jb=Xs,q&&st())}if(q&&!bA){for(y=0;256>y;++y)Bi[y]=89858*(y-128)+vc>>zo,Dm[y]=-22014*(y-128)+vc,mf[y]=-45773*(y-128),$u[y]=113618*(y-128)+vc>>zo;for(y=Ul;y<yA;++y)_=76283*(y-16)+vc>>zo,Rm[y-Ul]=ba(_,255),Lm[y-Ul]=ba(_+8>>4,15);bA=1}return 1}function Yt(y){var _=y.ma,K=y.U,q=y.T;return e(!(1&y.ka)),0>=K||0>=q?0:(K=_.Ib(y,_),_.Jb!=null&&_.Jb(y,_,K),_.Dc+=K,1)}function hn(y){y.ma.memory=null}function Tr(y,_,K,q){return ee(y,8)!=47?0:(_[0]=ee(y,14)+1,K[0]=ee(y,14)+1,q[0]=ee(y,1),ee(y,3)!=0?0:!y.h)}function dr(y,_){if(4>y)return y+1;var K=y-2>>1;return(2+(1&y)<<K)+ee(_,K)+1}function hr(y,_){return 120<_?_-120:1<=(K=((K=Ho[_-1])>>4)*y+(8-(15&K)))?K:1;var K}function Zt(y,_,K){var q=ie(K),de=y[_+=255&q].g-8;return 0<de&&(ce(K,K.u+8),q=ie(K),_+=y[_].value,_+=q&(1<<de)-1),ce(K,K.u+y[_].g),y[_].value}function mn(y,_,K){return K.g+=y.g,K.value+=y.value<<_>>>0,e(8>=K.g),y.g}function pn(y,_,K){var q=y.xc;return e((_=q==0?0:y.vc[y.md*(K>>q)+(_>>q)])<y.Wb),y.Ya[_]}function Nn(y,_,K,q){var de=y.ab,fe=y.c*_,xe=y.C;_=xe+_;var be=K,je=q;for(q=y.Ta,K=y.Ua;0<de--;){var _e=y.gc[de],Oe=xe,qe=_,Ie=be,He=je,Ve=(je=q,be=K,_e.Ea);switch(e(Oe<qe),e(qe<=_e.nc),_e.hc){case 2:ma(Ie,He,(qe-Oe)*Ve,je,be);break;case 0:var pt=Oe,We=qe,ft=je,bt=be,kt=(vs=_e).Ea;pt==0&&($l(Ie,He,null,null,1,ft,bt),Vt(Ie,He+1,0,0,kt-1,ft,bt+1),He+=kt,bt+=kt,++pt);for(var Nt=1<<vs.b,js=Nt-1,hs=ze(kt,vs.b),nn=vs.K,vs=vs.w+(pt>>vs.b)*hs;pt<We;){var Un=nn,Mr=vs,un=1;for(PA(Ie,He,ft,bt-kt,1,ft,bt);un<kt;){var At=(un&~js)+Nt;At>kt&&(At=kt),(0,Di[Un[Mr++]>>8&15])(Ie,He+ +un,ft,bt+un-kt,At-un,ft,bt+un),un=At}He+=kt,bt+=kt,++pt&js||(vs+=hs)}qe!=_e.nc&&n(je,be-Ve,je,be+(qe-Oe-1)*Ve,Ve);break;case 1:for(Ve=Ie,We=He,kt=(Ie=_e.Ea)-(bt=Ie&~(ft=(He=1<<_e.b)-1)),pt=ze(Ie,_e.b),Nt=_e.K,_e=_e.w+(Oe>>_e.b)*pt;Oe<qe;){for(js=Nt,hs=_e,nn=new Ct,vs=We+bt,Un=We+Ie;We<vs;)Mt(js[hs++],nn),kA(nn,Ve,We,He,je,be),We+=He,be+=He;We<Un&&(Mt(js[hs++],nn),kA(nn,Ve,We,kt,je,be),We+=kt,be+=kt),++Oe&ft||(_e+=pt)}break;case 3:if(Ie==je&&He==be&&0<_e.b){for(We=je,Ie=Ve=be+(qe-Oe)*Ve-(bt=(qe-Oe)*ze(_e.Ea,_e.b)),He=je,ft=be,pt=[],bt=(kt=bt)-1;0<=bt;--bt)pt[bt]=He[ft+bt];for(bt=kt-1;0<=bt;--bt)We[Ie+bt]=pt[bt];Zi(_e,Oe,qe,je,Ve,je,be)}else Zi(_e,Oe,qe,Ie,He,je,be)}be=q,je=K}je!=K&&n(q,K,be,je,fe)}function Fs(y,_){var K=y.V,q=y.Ba+y.c*y.C,de=_-y.C;if(e(_<=y.l.o),e(16>=de),0<de){var fe=y.l,xe=y.Ta,be=y.Ua,je=fe.width;if(Nn(y,de,K,q),de=be=[be],e((K=y.C)<(q=_)),e(fe.v<fe.va),q>fe.o&&(q=fe.o),K<fe.j){var _e=fe.j-K;K=fe.j,de[0]+=_e*je}if(K>=q?K=0:(de[0]+=4*fe.v,fe.ka=K-fe.j,fe.U=fe.va-fe.v,fe.T=q-K,K=1),K){if(be=be[0],11>(K=y.ca).S){var Oe=K.f.RGBA,qe=(q=K.S,de=fe.U,fe=fe.T,_e=Oe.eb,Oe.A),Ie=fe;for(Oe=Oe.fb+y.Ma*Oe.A;0<Ie--;){var He=xe,Ve=be,pt=de,We=_e,ft=Oe;switch(q){case Mu:MA(He,Ve,pt,We,ft);break;case Qi:dl(He,Ve,pt,We,ft);break;case au:dl(He,Ve,pt,We,ft),hA(We,ft,0,pt,1,0);break;case Wl:hl(He,Ve,pt,We,ft);break;case ko:De(He,Ve,pt,We,ft,1);break;case Hu:De(He,Ve,pt,We,ft,1),hA(We,ft,0,pt,1,0);break;case ru:De(He,Ve,pt,We,ft,0);break;case gc:De(He,Ve,pt,We,ft,0),hA(We,ft,1,pt,1,0);break;case Xl:Nl(He,Ve,pt,We,ft);break;case KA:Nl(He,Ve,pt,We,ft),xo(We,ft,pt,1,0);break;case fA:El(He,Ve,pt,We,ft);break;default:e(0)}be+=je,Oe+=qe}y.Ma+=fe}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=K.height)}}y.C=_,e(y.C<=y.i)}function En(y){var _;if(0<y.ua)return 0;for(_=0;_<y.Wb;++_){var K=y.Ya[_].G,q=y.Ya[_].H;if(0<K[1][q[1]+0].g||0<K[2][q[2]+0].g||0<K[3][q[3]+0].g)return 0}return 1}function An(y,_,K,q,de,fe){if(y.Z!=0){var xe=y.qd,be=y.rd;for(e(_l[y.Z]!=null);_<K;++_)_l[y.Z](xe,be,q,de,q,de,fe),xe=q,be=de,de+=fe;y.qd=xe,y.rd=be}}function Ir(y,_){var K=y.l.ma,q=K.Z==0||K.Z==1?y.l.j:y.C;if(q=y.C<q?q:y.C,e(_<=y.l.o),_>q){var de=y.l.width,fe=K.ca,xe=K.tb+de*q,be=y.V,je=y.Ba+y.c*q,_e=y.gc;e(y.ab==1),e(_e[0].hc==3),yi(_e[0],q,_,be,je,fe,xe),An(K,q,_,fe,xe,de)}y.C=y.Ma=_}function ya(y,_,K,q,de,fe,xe){var be=y.$/q,je=y.$%q,_e=y.m,Oe=y.s,qe=K+y.$,Ie=qe;de=K+q*de;var He=K+q*fe,Ve=280+Oe.ua,pt=y.Pb?be:16777216,We=0<Oe.ua?Oe.Wa:null,ft=Oe.wc,bt=qe<He?pn(Oe,je,be):null;e(y.C<fe),e(He<=de);var kt=!1;e:for(;;){for(;kt||qe<He;){var Nt=0;if(be>=pt){var js=qe-K;e((pt=y).Pb),pt.wd=pt.m,pt.xd=js,0<pt.s.ua&&nt(pt.s.Wa,pt.s.vb),pt=be+pA}if(je&ft||(bt=pn(Oe,je,be)),e(bt!=null),bt.Qb&&(_[qe]=bt.qb,kt=!0),!kt)if(ve(_e),bt.jc){Nt=_e,js=_;var hs=qe,nn=bt.pd[ie(Nt)&Po-1];e(bt.jc),256>nn.g?(ce(Nt,Nt.u+nn.g),js[hs]=nn.value,Nt=0):(ce(Nt,Nt.u+nn.g-256),e(256<=nn.value),Nt=nn.value),Nt==0&&(kt=!0)}else Nt=Zt(bt.G[0],bt.H[0],_e);if(_e.h)break;if(kt||256>Nt){if(!kt)if(bt.nd)_[qe]=(bt.qb|Nt<<8)>>>0;else{if(ve(_e),kt=Zt(bt.G[1],bt.H[1],_e),ve(_e),js=Zt(bt.G[2],bt.H[2],_e),hs=Zt(bt.G[3],bt.H[3],_e),_e.h)break;_[qe]=(hs<<24|kt<<16|Nt<<8|js)>>>0}if(kt=!1,++qe,++je>=q&&(je=0,++be,xe!=null&&be<=fe&&!(be%16)&&xe(y,be),We!=null))for(;Ie<qe;)Nt=_[Ie++],We.X[(506832829*Nt&4294967295)>>>We.Mb]=Nt}else if(280>Nt){if(Nt=dr(Nt-256,_e),js=Zt(bt.G[4],bt.H[4],_e),ve(_e),js=hr(q,js=dr(js,_e)),_e.h)break;if(qe-K<js||de-qe<Nt)break e;for(hs=0;hs<Nt;++hs)_[qe+hs]=_[qe+hs-js];for(qe+=Nt,je+=Nt;je>=q;)je-=q,++be,xe!=null&&be<=fe&&!(be%16)&&xe(y,be);if(e(qe<=de),je&ft&&(bt=pn(Oe,je,be)),We!=null)for(;Ie<qe;)Nt=_[Ie++],We.X[(506832829*Nt&4294967295)>>>We.Mb]=Nt}else{if(!(Nt<Ve))break e;for(kt=Nt-280,e(We!=null);Ie<qe;)Nt=_[Ie++],We.X[(506832829*Nt&4294967295)>>>We.Mb]=Nt;Nt=qe,e(!(kt>>>(js=We).Xa)),_[Nt]=js.X[kt],kt=!0}kt||e(_e.h==le(_e))}if(y.Pb&&_e.h&&qe<de)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&nt(y.s.vb,y.s.Wa);else{if(_e.h)break e;xe!=null&&xe(y,be>fe?fe:be),y.a=0,y.$=qe-K}return 1}return y.a=3,0}function ai(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var _=y.Wa;_!=null&&(_.X=null),y.vb=null,e(y!=null)}function ii(){var y=new Ms;return y==null?null:(y.a=0,y.xb=lh,dt("Predictor","VP8LPredictors"),dt("Predictor","VP8LPredictors_C"),dt("PredictorAdd","VP8LPredictorsAdd"),dt("PredictorAdd","VP8LPredictorsAdd_C"),ma=Kt,kA=mt,MA=Ns,dl=$t,Nl=Wt,El=lt,hl=Ot,R.VP8LMapColor32b=vi,R.VP8LMapColor8b=Qn,y)}function yn(y,_,K,q,de){var fe=1,xe=[y],be=[_],je=q.m,_e=q.s,Oe=null,qe=0;e:for(;;){if(K)for(;fe&&ee(je,1);){var Ie=xe,He=be,Ve=q,pt=1,We=Ve.m,ft=Ve.gc[Ve.ab],bt=ee(We,2);if(Ve.Oc&1<<bt)fe=0;else{switch(Ve.Oc|=1<<bt,ft.hc=bt,ft.Ea=Ie[0],ft.nc=He[0],ft.K=[null],++Ve.ab,e(4>=Ve.ab),bt){case 0:case 1:ft.b=ee(We,3)+2,pt=yn(ze(ft.Ea,ft.b),ze(ft.nc,ft.b),0,Ve,ft.K),ft.K=ft.K[0];break;case 3:var kt,Nt=ee(We,8)+1,js=16<Nt?0:4<Nt?1:2<Nt?2:3;if(Ie[0]=ze(ft.Ea,js),ft.b=js,kt=pt=yn(Nt,1,0,Ve,ft.K)){var hs,nn=Nt,vs=ft,Un=1<<(8>>vs.b),Mr=o(Un);if(Mr==null)kt=0;else{var un=vs.K[0],At=vs.w;for(Mr[0]=vs.K[0][0],hs=1;hs<1*nn;++hs)Mr[hs]=Ft(un[At+hs],Mr[hs-1]);for(;hs<4*Un;++hs)Mr[hs]=0;vs.K[0]=null,vs.K[0]=Mr,kt=1}}pt=kt;break;case 2:break;default:e(0)}fe=pt}}if(xe=xe[0],be=be[0],fe&&ee(je,1)&&!(fe=1<=(qe=ee(je,4))&&11>=qe)){q.a=3;break e}var es;if(es=fe)t:{var ra,Vs,Ws,fr=q,Ha=xe,Ia=be,mr=qe,Va=K,Oi=fr.m,Ka=fr.s,ln=[null],On=1,Hr=0,or=Vo[mr];s:for(;;){if(Va&&ee(Oi,1)){var za=ee(Oi,3)+2,aa=ze(Ha,za),Pn=ze(Ia,za),_a=aa*Pn;if(!yn(aa,Pn,0,fr,ln))break s;for(ln=ln[0],Ka.xc=za,ra=0;ra<_a;++ra){var pr=ln[ra]>>8&65535;ln[ra]=pr,pr>=On&&(On=pr+1)}}if(Oi.h)break s;for(Vs=0;5>Vs;++Vs){var Ga=zA[Vs];!Vs&&0<mr&&(Ga+=1<<mr),Hr<Ga&&(Hr=Ga)}var $a=c(On*or,G),Br=On,Vn=c(Br,ue);if(Vn==null)var Pi=null;else e(65536>=Br),Pi=Vn;var ga=o(Hr);if(Pi==null||ga==null||$a==null){fr.a=1;break s}var Qs=$a;for(ra=Ws=0;ra<On;++ra){var Hs=Pi[ra],qn=Hs.G,uo=Hs.H,bo=0,no=1,ia=0;for(Vs=0;5>Vs;++Vs){Ga=zA[Vs],qn[Vs]=Qs,uo[Vs]=Ws,!Vs&&0<mr&&(Ga+=1<<mr);r:{var wA,Dl=Ga,wc=fr,Sr=ga,Wu=Qs,Ah=Ws,lu=0,pl=wc.m,ch=ee(pl,1);if(r(Sr,0,0,Dl),ch){var Xu=ee(pl,1)+1,Ju=ee(pl,1),Au=ee(pl,Ju==0?1:8);Sr[Au]=1,Xu==2&&(Sr[Au=ee(pl,8)]=1);var ei=1}else{var Xr=o(19),cu=ee(pl,4)+4;if(19<cu){wc.a=3;var jA=0;break r}for(wA=0;wA<cu;++wA)Xr[mA[wA]]=ee(pl,3);var jc=void 0,ci=void 0,Go=wc,qu=Xr,Bc=Dl,Zu=Sr,ed=0,ql=Go.m,uh=8,dh=c(128,G);n:for(;V(dh,0,7,qu,19);){if(ee(ql,1)){var pf=2+2*ee(ql,3);if((jc=2+ee(ql,pf))>Bc)break n}else jc=Bc;for(ci=0;ci<Bc&&jc--;){ve(ql);var hh=dh[0+(127&ie(ql))];ce(ql,ql.u+hh.g);var Zl=hh.value;if(16>Zl)Zu[ci++]=Zl,Zl!=0&&(uh=Zl);else{var gf=Zl==16,td=Zl-16,fh=xc[td],ti=ee(ql,Mo[td])+fh;if(ci+ti>Bc)break n;for(var Sc=gf?uh:0;0<ti--;)Zu[ci++]=Sc}}ed=1;break n}ed||(Go.a=3),ei=ed}(ei=ei&&!pl.h)&&(lu=V(Wu,Ah,8,Sr,Dl)),ei&&lu!=0?jA=lu:(wc.a=3,jA=0)}if(jA==0)break s;if(no&&Vu[Vs]==1&&(no=Qs[Ws].g==0),bo+=Qs[Ws].g,Ws+=jA,3>=Vs){var $A,sd=ga[0];for($A=1;$A<Ga;++$A)ga[$A]>sd&&(sd=ga[$A]);ia+=sd}}if(Hs.nd=no,Hs.Qb=0,no&&(Hs.qb=(qn[3][uo[3]+0].value<<24|qn[1][uo[1]+0].value<<16|qn[2][uo[2]+0].value)>>>0,bo==0&&256>qn[0][uo[0]+0].value&&(Hs.Qb=1,Hs.qb+=qn[0][uo[0]+0].value<<8)),Hs.jc=!Hs.Qb&&6>ia,Hs.jc){var Cc,$o=Hs;for(Cc=0;Cc<Po;++Cc){var eA=Cc,tA=$o.pd[eA],nd=$o.G[0][$o.H[0]+eA];256<=nd.value?(tA.g=nd.g+256,tA.value=nd.value):(tA.g=0,tA.value=0,eA>>=mn(nd,8,tA),eA>>=mn($o.G[1][$o.H[1]+eA],16,tA),eA>>=mn($o.G[2][$o.H[2]+eA],0,tA),mn($o.G[3][$o.H[3]+eA],24,tA))}}}Ka.vc=ln,Ka.Wb=On,Ka.Ya=Pi,Ka.yc=$a,es=1;break t}es=0}if(!(fe=es)){q.a=3;break e}if(0<qe){if(_e.ua=1<<qe,!me(_e.Wa,qe)){q.a=1,fe=0;break e}}else _e.ua=0;var rd=q,YA=xe,xf=be,Nc=rd.s,Ec=Nc.xc;if(rd.c=YA,rd.i=xf,Nc.md=ze(YA,Ec),Nc.wc=Ec==0?-1:(1<<Ec)-1,K){q.xb=gA;break e}if((Oe=o(xe*be))==null){q.a=1,fe=0;break e}fe=(fe=ya(q,Oe,0,xe,be,be,null))&&!je.h;break e}return fe?(de!=null?de[0]=Oe:(e(Oe==null),e(K)),q.$=0,K||ai(_e)):ai(_e),fe}function _r(y,_){var K=y.c*y.i,q=K+_+16*_;return e(y.c<=_),y.V=o(q),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+K+_,1)}function ea(y,_){var K=y.C,q=_-K,de=y.V,fe=y.Ba+y.c*K;for(e(_<=y.l.o);0<q;){var xe=16<q?16:q,be=y.l.ma,je=y.l.width,_e=je*xe,Oe=be.ca,qe=be.tb+je*K,Ie=y.Ta,He=y.Ua;Nn(y,xe,de,fe),vo(Ie,He,Oe,qe,_e),An(be,K,K+xe,Oe,qe,je),q-=xe,de+=xe*y.c,K+=xe}e(K==_),y.C=y.Ma=_}function xr(){this.ub=this.yd=this.td=this.Rb=0}function Fr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function da(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function La(){this.Yb=(function(){var y=[];return(function _(K,q,de){for(var fe=de[q],xe=0;xe<fe&&(K.push(de.length>q+1?[]:0),!(de.length<q+1));xe++)_(K[xe],q+1,de)})(y,0,[3,11]),y})()}function zn(){this.jb=o(3),this.Wc=h([4,8],La),this.Xc=h([4,17],La)}function Qa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ha(){this.ld=this.La=this.dd=this.tc=0}function Ur(){this.Na=this.la=0}function Ti(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ji(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wl(){this.uc=this.M=this.Nb=0,this.wa=Array(new ha),this.Y=0,this.ya=Array(new Ji),this.aa=0,this.l=new Oa}function jl(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ao(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new xr,this.Kc=new Fr,this.ed=new Qa,this.Qa=new da,this.Ic=this.$c=this.Aa=0,this.D=new wl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,M),this.ia=0,this.pb=c(4,Ti),this.Pa=new zn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jl),this.Hd=0,this.rb=Array(new Ur),this.sb=0,this.wa=Array(new ha),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ji),this.L=this.aa=0,this.gd=h([4,2],ha),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ba(y,_){return 0>y?0:y>_?_:y}function Oa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yr(){var y=new Ao;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,yo||(yo=gn)),y}function Sn(y,_,K){return y.a==0&&(y.a=_,y.sc=K,y.cb=0),0}function Ii(y,_,K){return 3<=K&&y[_+0]==157&&y[_+1]==1&&y[_+2]==42}function Wr(y,_){if(y==null)return 0;if(y.a=0,y.sc="OK",_==null)return Sn(y,2,"null VP8Io passed to VP8GetHeaders()");var K=_.data,q=_.w,de=_.ha;if(4>de)return Sn(y,7,"Truncated header.");var fe=K[q+0]|K[q+1]<<8|K[q+2]<<16,xe=y.Od;if(xe.Rb=!(1&fe),xe.td=fe>>1&7,xe.yd=fe>>4&1,xe.ub=fe>>5,3<xe.td)return Sn(y,3,"Incorrect keyframe parameters.");if(!xe.yd)return Sn(y,4,"Frame not displayable.");q+=3,de-=3;var be=y.Kc;if(xe.Rb){if(7>de)return Sn(y,7,"cannot parse picture header");if(!Ii(K,q,de))return Sn(y,3,"Bad code word");be.c=16383&(K[q+4]<<8|K[q+3]),be.Td=K[q+4]>>6,be.i=16383&(K[q+6]<<8|K[q+5]),be.Ud=K[q+6]>>6,q+=7,de-=7,y.za=be.c+15>>4,y.Ub=be.i+15>>4,_.width=be.c,_.height=be.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,r((fe=y.Pa).jb,0,255,fe.jb.length),e((fe=y.Qa)!=null),fe.Cb=0,fe.Bb=0,fe.Fb=1,r(fe.Zb,0,0,fe.Zb.length),r(fe.Lb,0,0,fe.Lb)}if(xe.ub>de)return Sn(y,7,"bad partition length");oe(fe=y.m,K,q,xe.ub),q+=xe.ub,de-=xe.ub,xe.Rb&&(be.Ld=ge(fe),be.Kd=ge(fe)),be=y.Qa;var je,_e=y.Pa;if(e(fe!=null),e(be!=null),be.Cb=ge(fe),be.Cb){if(be.Bb=ge(fe),ge(fe)){for(be.Fb=ge(fe),je=0;4>je;++je)be.Zb[je]=ge(fe)?Y(fe,7):0;for(je=0;4>je;++je)be.Lb[je]=ge(fe)?Y(fe,6):0}if(be.Bb)for(je=0;3>je;++je)_e.jb[je]=ge(fe)?X(fe,8):255}else be.Bb=0;if(fe.Ka)return Sn(y,3,"cannot parse segment header");if((be=y.ed).zd=ge(fe),be.Tb=X(fe,6),be.wb=X(fe,3),be.Pc=ge(fe),be.Pc&&ge(fe)){for(_e=0;4>_e;++_e)ge(fe)&&(be.vd[_e]=Y(fe,6));for(_e=0;4>_e;++_e)ge(fe)&&(be.od[_e]=Y(fe,6))}if(y.L=be.Tb==0?0:be.zd?1:2,fe.Ka)return Sn(y,3,"cannot parse filter header");var Oe=de;if(de=je=q,q=je+Oe,be=Oe,y.Xb=(1<<X(y.m,2))-1,Oe<3*(_e=y.Xb))K=7;else{for(je+=3*_e,be-=3*_e,Oe=0;Oe<_e;++Oe){var qe=K[de+0]|K[de+1]<<8|K[de+2]<<16;qe>be&&(qe=be),oe(y.Jc[+Oe],K,je,qe),je+=qe,be-=qe,de+=3}oe(y.Jc[+_e],K,je,be),K=je<q?0:5}if(K!=0)return Sn(y,K,"cannot parse partitions");for(K=X(je=y.m,7),de=ge(je)?Y(je,4):0,q=ge(je)?Y(je,4):0,be=ge(je)?Y(je,4):0,_e=ge(je)?Y(je,4):0,je=ge(je)?Y(je,4):0,Oe=y.Qa,qe=0;4>qe;++qe){if(Oe.Cb){var Ie=Oe.Zb[qe];Oe.Fb||(Ie+=K)}else{if(0<qe){y.pb[qe]=y.pb[0];continue}Ie=K}var He=y.pb[qe];He.Sc[0]=Ko[ba(Ie+de,127)],He.Sc[1]=to[ba(Ie+0,127)],He.Eb[0]=2*Ko[ba(Ie+q,127)],He.Eb[1]=101581*to[ba(Ie+be,127)]>>16,8>He.Eb[1]&&(He.Eb[1]=8),He.Qc[0]=Ko[ba(Ie+_e,117)],He.Qc[1]=to[ba(Ie+je,127)],He.lc=Ie+je}if(!xe.Rb)return Sn(y,4,"Not a key frame.");for(ge(fe),xe=y.Pa,K=0;4>K;++K){for(de=0;8>de;++de)for(q=0;3>q;++q)for(be=0;11>be;++be)_e=Be(fe,kr[K][de][q][be])?X(fe,8):ff[K][de][q][be],xe.Wc[K][de].Yb[q][be]=_e;for(de=0;17>de;++de)xe.Xc[K][de]=xe.Wc[K][Rn[de]]}return y.kc=ge(fe),y.kc&&(y.Bd=X(fe,8)),y.cb=1}function gn(y,_,K,q,de,fe,xe){var be=_[de].Yb[K];for(K=0;16>de;++de){if(!Be(y,be[K+0]))return de;for(;!Be(y,be[K+1]);)if(be=_[++de].Yb[0],K=0,de==16)return 16;var je=_[de+1].Yb;if(Be(y,be[K+2])){var _e=y,Oe=0;if(Be(_e,(Ie=be)[(qe=K)+3]))if(Be(_e,Ie[qe+6])){for(be=0,qe=2*(Oe=Be(_e,Ie[qe+8]))+(Ie=Be(_e,Ie[qe+9+Oe])),Oe=0,Ie=hf[qe];Ie[be];++be)Oe+=Oe+Be(_e,Ie[be]);Oe+=3+(8<<qe)}else Be(_e,Ie[qe+7])?(Oe=7+2*Be(_e,165),Oe+=Be(_e,145)):Oe=5+Be(_e,159);else Oe=Be(_e,Ie[qe+4])?3+Be(_e,Ie[qe+5]):2;be=je[2]}else Oe=1,be=je[1];je=xe+oh[de],0>(_e=y).b&&Se(_e);var qe,Ie=_e.b,He=(qe=_e.Ca>>1)-(_e.I>>Ie)>>31;--_e.b,_e.Ca+=He,_e.Ca|=1,_e.I-=(qe+1&He)<<Ie,fe[je]=((Oe^He)-He)*q[(0<de)+0]}return 16}function Ee(y){var _=y.rb[y.sb-1];_.la=0,_.Na=0,r(y.zc,0,0,y.zc.length),y.ja=0}function Je(y,_,K,q,de){de=y[_+K+32*q]+(de>>3),y[_+K+32*q]=-256&de?0>de?0:255:de}function xt(y,_,K,q,de,fe){Je(y,_,0,K,q+de),Je(y,_,1,K,q+fe),Je(y,_,2,K,q-fe),Je(y,_,3,K,q-de)}function _t(y){return(20091*y>>16)+y}function fs(y,_,K,q){var de,fe=0,xe=o(16);for(de=0;4>de;++de){var be=y[_+0]+y[_+8],je=y[_+0]-y[_+8],_e=(35468*y[_+4]>>16)-_t(y[_+12]),Oe=_t(y[_+4])+(35468*y[_+12]>>16);xe[fe+0]=be+Oe,xe[fe+1]=je+_e,xe[fe+2]=je-_e,xe[fe+3]=be-Oe,fe+=4,_++}for(de=fe=0;4>de;++de)be=(y=xe[fe+0]+4)+xe[fe+8],je=y-xe[fe+8],_e=(35468*xe[fe+4]>>16)-_t(xe[fe+12]),Je(K,q,0,0,be+(Oe=_t(xe[fe+4])+(35468*xe[fe+12]>>16))),Je(K,q,1,0,je+_e),Je(K,q,2,0,je-_e),Je(K,q,3,0,be-Oe),fe++,q+=32}function ms(y,_,K,q){var de=y[_+0]+4,fe=35468*y[_+4]>>16,xe=_t(y[_+4]),be=35468*y[_+1]>>16;xt(K,q,0,de+xe,y=_t(y[_+1]),be),xt(K,q,1,de+fe,y,be),xt(K,q,2,de-fe,y,be),xt(K,q,3,de-xe,y,be)}function zs(y,_,K,q,de){fs(y,_,K,q),de&&fs(y,_+16,K,q+4)}function Gs(y,_,K,q){Yl(y,_+0,K,q,1),Yl(y,_+32,K,q+128,1)}function Lt(y,_,K,q){var de;for(y=y[_+0]+4,de=0;4>de;++de)for(_=0;4>_;++_)Je(K,q,_,de,y)}function Js(y,_,K,q){y[_+0]&&Jn(y,_+0,K,q),y[_+16]&&Jn(y,_+16,K,q+4),y[_+32]&&Jn(y,_+32,K,q+128),y[_+48]&&Jn(y,_+48,K,q+128+4)}function Bs(y,_,K,q){var de,fe=o(16);for(de=0;4>de;++de){var xe=y[_+0+de]+y[_+12+de],be=y[_+4+de]+y[_+8+de],je=y[_+4+de]-y[_+8+de],_e=y[_+0+de]-y[_+12+de];fe[0+de]=xe+be,fe[8+de]=xe-be,fe[4+de]=_e+je,fe[12+de]=_e-je}for(de=0;4>de;++de)xe=(y=fe[0+4*de]+3)+fe[3+4*de],be=fe[1+4*de]+fe[2+4*de],je=fe[1+4*de]-fe[2+4*de],_e=y-fe[3+4*de],K[q+0]=xe+be>>3,K[q+16]=_e+je>>3,K[q+32]=xe-be>>3,K[q+48]=_e-je>>3,q+=64}function Zs(y,_,K){var q,de=_-32,fe=Li,xe=255-y[de-1];for(q=0;q<K;++q){var be,je=fe,_e=xe+y[_-1];for(be=0;be<K;++be)y[_+be]=je[_e+y[de+be]];_+=32}}function nr(y,_){Zs(y,_,4)}function wr(y,_){Zs(y,_,8)}function ta(y,_){Zs(y,_,16)}function wa(y,_){var K;for(K=0;16>K;++K)n(y,_+32*K,y,_-32,16)}function Qr(y,_){var K;for(K=16;0<K;--K)r(y,_,y[_-1],16),_+=32}function Gn(y,_,K){var q;for(q=0;16>q;++q)r(_,K+32*q,y,16)}function fa(y,_){var K,q=16;for(K=0;16>K;++K)q+=y[_-1+32*K]+y[_+K-32];Gn(q>>5,y,_)}function _i(y,_){var K,q=8;for(K=0;16>K;++K)q+=y[_-1+32*K];Gn(q>>4,y,_)}function ja(y,_){var K,q=8;for(K=0;16>K;++K)q+=y[_+K-32];Gn(q>>4,y,_)}function Fi(y,_){Gn(128,y,_)}function Ts(y,_,K){return y+2*_+K+2>>2}function ll(y,_){var K,q=_-32;for(q=new Uint8Array([Ts(y[q-1],y[q+0],y[q+1]),Ts(y[q+0],y[q+1],y[q+2]),Ts(y[q+1],y[q+2],y[q+3]),Ts(y[q+2],y[q+3],y[q+4])]),K=0;4>K;++K)n(y,_+32*K,q,0,q.length)}function Bl(y,_){var K=y[_-1],q=y[_-1+32],de=y[_-1+64],fe=y[_-1+96];Fe(y,_+0,16843009*Ts(y[_-1-32],K,q)),Fe(y,_+32,16843009*Ts(K,q,de)),Fe(y,_+64,16843009*Ts(q,de,fe)),Fe(y,_+96,16843009*Ts(de,fe,fe))}function Do(y,_){var K,q=4;for(K=0;4>K;++K)q+=y[_+K-32]+y[_-1+32*K];for(q>>=3,K=0;4>K;++K)r(y,_+32*K,q,4)}function Ba(y,_){var K=y[_-1+0],q=y[_-1+32],de=y[_-1+64],fe=y[_-1-32],xe=y[_+0-32],be=y[_+1-32],je=y[_+2-32],_e=y[_+3-32];y[_+0+96]=Ts(q,de,y[_-1+96]),y[_+1+96]=y[_+0+64]=Ts(K,q,de),y[_+2+96]=y[_+1+64]=y[_+0+32]=Ts(fe,K,q),y[_+3+96]=y[_+2+64]=y[_+1+32]=y[_+0+0]=Ts(xe,fe,K),y[_+3+64]=y[_+2+32]=y[_+1+0]=Ts(be,xe,fe),y[_+3+32]=y[_+2+0]=Ts(je,be,xe),y[_+3+0]=Ts(_e,je,be)}function sa(y,_){var K=y[_+1-32],q=y[_+2-32],de=y[_+3-32],fe=y[_+4-32],xe=y[_+5-32],be=y[_+6-32],je=y[_+7-32];y[_+0+0]=Ts(y[_+0-32],K,q),y[_+1+0]=y[_+0+32]=Ts(K,q,de),y[_+2+0]=y[_+1+32]=y[_+0+64]=Ts(q,de,fe),y[_+3+0]=y[_+2+32]=y[_+1+64]=y[_+0+96]=Ts(de,fe,xe),y[_+3+32]=y[_+2+64]=y[_+1+96]=Ts(fe,xe,be),y[_+3+64]=y[_+2+96]=Ts(xe,be,je),y[_+3+96]=Ts(be,je,je)}function Pa(y,_){var K=y[_-1+0],q=y[_-1+32],de=y[_-1+64],fe=y[_-1-32],xe=y[_+0-32],be=y[_+1-32],je=y[_+2-32],_e=y[_+3-32];y[_+0+0]=y[_+1+64]=fe+xe+1>>1,y[_+1+0]=y[_+2+64]=xe+be+1>>1,y[_+2+0]=y[_+3+64]=be+je+1>>1,y[_+3+0]=je+_e+1>>1,y[_+0+96]=Ts(de,q,K),y[_+0+64]=Ts(q,K,fe),y[_+0+32]=y[_+1+96]=Ts(K,fe,xe),y[_+1+32]=y[_+2+96]=Ts(fe,xe,be),y[_+2+32]=y[_+3+96]=Ts(xe,be,je),y[_+3+32]=Ts(be,je,_e)}function $n(y,_){var K=y[_+0-32],q=y[_+1-32],de=y[_+2-32],fe=y[_+3-32],xe=y[_+4-32],be=y[_+5-32],je=y[_+6-32],_e=y[_+7-32];y[_+0+0]=K+q+1>>1,y[_+1+0]=y[_+0+64]=q+de+1>>1,y[_+2+0]=y[_+1+64]=de+fe+1>>1,y[_+3+0]=y[_+2+64]=fe+xe+1>>1,y[_+0+32]=Ts(K,q,de),y[_+1+32]=y[_+0+96]=Ts(q,de,fe),y[_+2+32]=y[_+1+96]=Ts(de,fe,xe),y[_+3+32]=y[_+2+96]=Ts(fe,xe,be),y[_+3+64]=Ts(xe,be,je),y[_+3+96]=Ts(be,je,_e)}function oi(y,_){var K=y[_-1+0],q=y[_-1+32],de=y[_-1+64],fe=y[_-1+96];y[_+0+0]=K+q+1>>1,y[_+2+0]=y[_+0+32]=q+de+1>>1,y[_+2+32]=y[_+0+64]=de+fe+1>>1,y[_+1+0]=Ts(K,q,de),y[_+3+0]=y[_+1+32]=Ts(q,de,fe),y[_+3+32]=y[_+1+64]=Ts(de,fe,fe),y[_+3+64]=y[_+2+64]=y[_+0+96]=y[_+1+96]=y[_+2+96]=y[_+3+96]=fe}function Ro(y,_){var K=y[_-1+0],q=y[_-1+32],de=y[_-1+64],fe=y[_-1+96],xe=y[_-1-32],be=y[_+0-32],je=y[_+1-32],_e=y[_+2-32];y[_+0+0]=y[_+2+32]=K+xe+1>>1,y[_+0+32]=y[_+2+64]=q+K+1>>1,y[_+0+64]=y[_+2+96]=de+q+1>>1,y[_+0+96]=fe+de+1>>1,y[_+3+0]=Ts(be,je,_e),y[_+2+0]=Ts(xe,be,je),y[_+1+0]=y[_+3+32]=Ts(K,xe,be),y[_+1+32]=y[_+3+64]=Ts(q,K,xe),y[_+1+64]=y[_+3+96]=Ts(de,q,K),y[_+1+96]=Ts(fe,de,q)}function pi(y,_){var K;for(K=0;8>K;++K)n(y,_+32*K,y,_-32,8)}function Sl(y,_){var K;for(K=0;8>K;++K)r(y,_,y[_-1],8),_+=32}function Sa(y,_,K){var q;for(q=0;8>q;++q)r(_,K+32*q,y,8)}function qi(y,_){var K,q=8;for(K=0;8>K;++K)q+=y[_+K-32]+y[_-1+32*K];Sa(q>>4,y,_)}function gi(y,_){var K,q=4;for(K=0;8>K;++K)q+=y[_+K-32];Sa(q>>3,y,_)}function jr(y,_){var K,q=4;for(K=0;8>K;++K)q+=y[_-1+32*K];Sa(q>>3,y,_)}function xi(y,_){Sa(128,y,_)}function na(y,_,K){var q=y[_-K],de=y[_+0],fe=3*(de-q)+Il[1020+y[_-2*K]-y[_+K]],xe=nu[112+(fe+4>>3)];y[_-K]=Li[255+q+nu[112+(fe+3>>3)]],y[_+0]=Li[255+de-xe]}function Yn(y,_,K,q){var de=y[_+0],fe=y[_+K];return bi[255+y[_-2*K]-y[_-K]]>q||bi[255+fe-de]>q}function po(y,_,K,q){return 4*bi[255+y[_-K]-y[_+0]]+bi[255+y[_-2*K]-y[_+K]]<=q}function ka(y,_,K,q,de){var fe=y[_-3*K],xe=y[_-2*K],be=y[_-K],je=y[_+0],_e=y[_+K],Oe=y[_+2*K],qe=y[_+3*K];return 4*bi[255+be-je]+bi[255+xe-_e]>q?0:bi[255+y[_-4*K]-fe]<=de&&bi[255+fe-xe]<=de&&bi[255+xe-be]<=de&&bi[255+qe-Oe]<=de&&bi[255+Oe-_e]<=de&&bi[255+_e-je]<=de}function Ht(y,_,K,q){var de=2*q+1;for(q=0;16>q;++q)po(y,_+q,K,de)&&na(y,_+q,K)}function bs(y,_,K,q){var de=2*q+1;for(q=0;16>q;++q)po(y,_+q*K,1,de)&&na(y,_+q*K,1)}function cn(y,_,K,q){var de;for(de=3;0<de;--de)Ht(y,_+=4*K,K,q)}function In(y,_,K,q){var de;for(de=3;0<de;--de)bs(y,_+=4,K,q)}function ks(y,_,K,q,de,fe,xe,be){for(fe=2*fe+1;0<de--;){if(ka(y,_,K,fe,xe))if(Yn(y,_,K,be))na(y,_,K);else{var je=y,_e=_,Oe=K,qe=je[_e-2*Oe],Ie=je[_e-Oe],He=je[_e+0],Ve=je[_e+Oe],pt=je[_e+2*Oe],We=27*(bt=Il[1020+3*(He-Ie)+Il[1020+qe-Ve]])+63>>7,ft=18*bt+63>>7,bt=9*bt+63>>7;je[_e-3*Oe]=Li[255+je[_e-3*Oe]+bt],je[_e-2*Oe]=Li[255+qe+ft],je[_e-Oe]=Li[255+Ie+We],je[_e+0]=Li[255+He-We],je[_e+Oe]=Li[255+Ve-ft],je[_e+2*Oe]=Li[255+pt-bt]}_+=q}}function ss(y,_,K,q,de,fe,xe,be){for(fe=2*fe+1;0<de--;){if(ka(y,_,K,fe,xe))if(Yn(y,_,K,be))na(y,_,K);else{var je=y,_e=_,Oe=K,qe=je[_e-Oe],Ie=je[_e+0],He=je[_e+Oe],Ve=nu[112+(4+(pt=3*(Ie-qe))>>3)],pt=nu[112+(pt+3>>3)],We=Ve+1>>1;je[_e-2*Oe]=Li[255+je[_e-2*Oe]+We],je[_e-Oe]=Li[255+qe+pt],je[_e+0]=Li[255+Ie-Ve],je[_e+Oe]=Li[255+He-We]}_+=q}}function rr(y,_,K,q,de,fe){ks(y,_,K,1,16,q,de,fe)}function Or(y,_,K,q,de,fe){ks(y,_,1,K,16,q,de,fe)}function Ca(y,_,K,q,de,fe){var xe;for(xe=3;0<xe;--xe)ss(y,_+=4*K,K,1,16,q,de,fe)}function k(y,_,K,q,de,fe){var xe;for(xe=3;0<xe;--xe)ss(y,_+=4,1,K,16,q,de,fe)}function Ae(y,_,K,q,de,fe,xe,be){ks(y,_,de,1,8,fe,xe,be),ks(K,q,de,1,8,fe,xe,be)}function Te(y,_,K,q,de,fe,xe,be){ks(y,_,1,de,8,fe,xe,be),ks(K,q,1,de,8,fe,xe,be)}function Ue(y,_,K,q,de,fe,xe,be){ss(y,_+4*de,de,1,8,fe,xe,be),ss(K,q+4*de,de,1,8,fe,xe,be)}function Me(y,_,K,q,de,fe,xe,be){ss(y,_+4,1,de,8,fe,xe,be),ss(K,q+4,1,de,8,fe,xe,be)}function ht(){this.ba=new vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function St(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ds(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xs(){this.ua=0,this.Wa=new It,this.vb=new It,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new G}function Ms(){this.xb=this.a=0,this.l=new Oa,this.ca=new vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xs,this.ab=0,this.gc=c(4,ds),this.Oc=0}function Us(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(y,_,K,q,de,fe,xe){for(y=y==null?0:y[_+0],_=0;_<xe;++_)de[fe+_]=y+K[q+_]&255,y=de[fe+_]}function Dr(y,_,K,q,de,fe,xe){var be;if(y==null)Fn(null,null,K,q,de,fe,xe);else for(be=0;be<xe;++be)de[fe+be]=y[_+be]+K[q+be]&255}function vr(y,_,K,q,de,fe,xe){if(y==null)Fn(null,null,K,q,de,fe,xe);else{var be,je=y[_+0],_e=je,Oe=je;for(be=0;be<xe;++be)_e=Oe+(je=y[_+be])-_e,Oe=K[q+be]+(-256&_e?0>_e?0:255:_e)&255,_e=je,de[fe+be]=Oe}}function w(y,_,K,q){var de=_.width,fe=_.o;if(e(y!=null&&_!=null),0>K||0>=q||K+q>fe)return null;if(!y.Cc){if(y.ga==null){var xe;if(y.ga=new Us,(xe=y.ga==null)||(xe=_.width*_.o,e(y.Gb.length==0),y.Gb=o(xe),y.Uc=0,y.Gb==null?xe=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,xe=1),xe=!xe),!xe){xe=y.ga;var be=y.Fa,je=y.P,_e=y.qc,Oe=y.mb,qe=y.nb,Ie=je+1,He=_e-1,Ve=xe.l;if(e(be!=null&&Oe!=null&&_!=null),_l[0]=null,_l[1]=Fn,_l[2]=Dr,_l[3]=vr,xe.ca=Oe,xe.tb=qe,xe.c=_.width,xe.i=_.height,e(0<xe.c&&0<xe.i),1>=_e)_=0;else if(xe.$a=3&be[je+0],xe.Z=be[je+0]>>2&3,xe.Lc=be[je+0]>>4&3,je=be[je+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||je)_=0;else if(Ve.put=Yt,Ve.ac=Ls,Ve.bc=hn,Ve.ma=xe,Ve.width=_.width,Ve.height=_.height,Ve.Da=_.Da,Ve.v=_.v,Ve.va=_.va,Ve.j=_.j,Ve.o=_.o,xe.$a)e:{e(xe.$a==1),_=ii();t:for(;;){if(_==null){_=0;break e}if(e(xe!=null),xe.mc=_,_.c=xe.c,_.i=xe.i,_.l=xe.l,_.l.ma=xe,_.l.width=xe.c,_.l.height=xe.i,_.a=0,re(_.m,be,Ie,He),!yn(xe.c,xe.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&En(_.s)?(xe.ic=1,be=_.c*_.i,_.Ta=null,_.Ua=0,_.V=o(be),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(xe.ic=0,_=_r(_,xe.c)),!_))break t;_=1;break e}xe.mc=null,_=0}else _=He>=xe.c*xe.i;xe=!_}if(xe)return null;y.ga.Lc!=1?y.Ga=0:q=fe-K}e(y.ga!=null),e(K+q<=fe);e:{if(_=(be=y.ga).c,fe=be.l.o,be.$a==0){if(Ie=y.rc,He=y.Vc,Ve=y.Fa,je=y.P+1+K*_,_e=y.mb,Oe=y.nb+K*_,e(je<=y.P+y.qc),be.Z!=0)for(e(_l[be.Z]!=null),xe=0;xe<q;++xe)_l[be.Z](Ie,He,Ve,je,_e,Oe,_),Ie=_e,He=Oe,Oe+=_,je+=_;else for(xe=0;xe<q;++xe)n(_e,Oe,Ve,je,_),Ie=_e,He=Oe,Oe+=_,je+=_;y.rc=Ie,y.Vc=He}else{if(e(be.mc!=null),_=K+q,e((xe=be.mc)!=null),e(_<=xe.i),xe.C>=_)_=1;else if(be.ic||st(),be.ic){be=xe.V,Ie=xe.Ba,He=xe.c;var pt=xe.i,We=(Ve=1,je=xe.$/He,_e=xe.$%He,Oe=xe.m,qe=xe.s,xe.$),ft=He*pt,bt=He*_,kt=qe.wc,Nt=We<bt?pn(qe,_e,je):null;e(We<=ft),e(_<=pt),e(En(qe));t:for(;;){for(;!Oe.h&&We<bt;){if(_e&kt||(Nt=pn(qe,_e,je)),e(Nt!=null),ve(Oe),256>(pt=Zt(Nt.G[0],Nt.H[0],Oe)))be[Ie+We]=pt,++We,++_e>=He&&(_e=0,++je<=_&&!(je%16)&&Ir(xe,je));else{if(!(280>pt)){Ve=0;break t}pt=dr(pt-256,Oe);var js,hs=Zt(Nt.G[4],Nt.H[4],Oe);if(ve(Oe),!(We>=(hs=hr(He,hs=dr(hs,Oe)))&&ft-We>=pt)){Ve=0;break t}for(js=0;js<pt;++js)be[Ie+We+js]=be[Ie+We+js-hs];for(We+=pt,_e+=pt;_e>=He;)_e-=He,++je<=_&&!(je%16)&&Ir(xe,je);We<bt&&_e&kt&&(Nt=pn(qe,_e,je))}e(Oe.h==le(Oe))}Ir(xe,je>_?_:je);break t}!Ve||Oe.h&&We<ft?(Ve=0,xe.a=Oe.h?5:3):xe.$=We,_=Ve}else _=ya(xe,xe.V,xe.Ba,xe.c,xe.i,_,ea);if(!_){q=0;break e}}K+q>=fe&&(y.Cc=1),q=1}if(!q)return null;if(y.Cc&&((q=y.ga)!=null&&(q.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+K*de}function W(y,_,K,q,de,fe){for(;0<de--;){var xe,be=y,je=_+(K?1:0),_e=y,Oe=_+(K?0:3);for(xe=0;xe<q;++xe){var qe=_e[Oe+4*xe];qe!=255&&(qe*=32897,be[je+4*xe+0]=be[je+4*xe+0]*qe>>23,be[je+4*xe+1]=be[je+4*xe+1]*qe>>23,be[je+4*xe+2]=be[je+4*xe+2]*qe>>23)}_+=fe}}function ne(y,_,K,q,de){for(;0<q--;){var fe;for(fe=0;fe<K;++fe){var xe=y[_+2*fe+0],be=15&(_e=y[_+2*fe+1]),je=4369*be,_e=(240&_e|_e>>4)*je>>16;y[_+2*fe+0]=(240&xe|xe>>4)*je>>16&240|(15&xe|xe<<4)*je>>16>>4&15,y[_+2*fe+1]=240&_e|be}_+=de}}function we(y,_,K,q,de,fe,xe,be){var je,_e,Oe=255;for(_e=0;_e<de;++_e){for(je=0;je<q;++je){var qe=y[_+je];fe[xe+4*je]=qe,Oe&=qe}_+=K,xe+=be}return Oe!=255}function $e(y,_,K,q,de){var fe;for(fe=0;fe<de;++fe)K[q+fe]=y[_+fe]>>8}function st(){hA=W,xo=ne,pc=we,vo=$e}function zt(y,_,K){R[y]=function(q,de,fe,xe,be,je,_e,Oe,qe,Ie,He,Ve,pt,We,ft,bt,kt){var Nt,js=kt-1>>1,hs=be[je+0]|_e[Oe+0]<<16,nn=qe[Ie+0]|He[Ve+0]<<16;e(q!=null);var vs=3*hs+nn+131074>>2;for(_(q[de+0],255&vs,vs>>16,pt,We),fe!=null&&(vs=3*nn+hs+131074>>2,_(fe[xe+0],255&vs,vs>>16,ft,bt)),Nt=1;Nt<=js;++Nt){var Un=be[je+Nt]|_e[Oe+Nt]<<16,Mr=qe[Ie+Nt]|He[Ve+Nt]<<16,un=hs+Un+nn+Mr+524296,At=un+2*(Un+nn)>>3;vs=At+hs>>1,hs=(un=un+2*(hs+Mr)>>3)+Un>>1,_(q[de+2*Nt-1],255&vs,vs>>16,pt,We+(2*Nt-1)*K),_(q[de+2*Nt-0],255&hs,hs>>16,pt,We+(2*Nt-0)*K),fe!=null&&(vs=un+nn>>1,hs=At+Mr>>1,_(fe[xe+2*Nt-1],255&vs,vs>>16,ft,bt+(2*Nt-1)*K),_(fe[xe+2*Nt+0],255&hs,hs>>16,ft,bt+(2*Nt+0)*K)),hs=Un,nn=Mr}1&kt||(vs=3*hs+nn+131074>>2,_(q[de+kt-1],255&vs,vs>>16,pt,We+(kt-1)*K),fe!=null&&(vs=3*nn+hs+131074>>2,_(fe[xe+kt-1],255&vs,vs>>16,ft,bt+(kt-1)*K)))}}function sn(){ji[Mu]=GA,ji[Qi]=Jl,ji[Wl]=iu,ji[ko]=zu,ji[ru]=xA,ji[Xl]=Fl,ji[fA]=vA,ji[au]=Jl,ji[Hu]=zu,ji[gc]=xA,ji[KA]=Fl}function Rr(y){return y&-16384?0>y?0:255:y>>Gu}function bn(y,_){return Rr((19077*y>>8)+(26149*_>>8)-14234)}function ar(y,_,K){return Rr((19077*y>>8)-(6419*_>>8)-(13320*K>>8)+8708)}function Za(y,_){return Rr((19077*y>>8)+(33050*_>>8)-17685)}function Na(y,_,K,q,de){q[de+0]=bn(y,K),q[de+1]=ar(y,_,K),q[de+2]=Za(y,_)}function Wn(y,_,K,q,de){q[de+0]=Za(y,_),q[de+1]=ar(y,_,K),q[de+2]=bn(y,K)}function on(y,_,K,q,de){var fe=ar(y,_,K);_=fe<<3&224|Za(y,_)>>3,q[de+0]=248&bn(y,K)|fe>>5,q[de+1]=_}function go(y,_,K,q,de){var fe=240&Za(y,_)|15;q[de+0]=240&bn(y,K)|ar(y,_,K)>>4,q[de+1]=fe}function Lo(y,_,K,q,de){q[de+0]=255,Na(y,_,K,q,de+1)}function Al(y,_,K,q,de){Wn(y,_,K,q,de),q[de+3]=255}function Ma(y,_,K,q,de){Na(y,_,K,q,de),q[de+3]=255}function li(y,_,K){R[y]=function(q,de,fe,xe,be,je,_e,Oe,qe){for(var Ie=Oe+(-2&qe)*K;Oe!=Ie;)_(q[de+0],fe[xe+0],be[je+0],_e,Oe),_(q[de+1],fe[xe+0],be[je+0],_e,Oe+K),de+=2,++xe,++je,Oe+=2*K;1&qe&&_(q[de+0],fe[xe+0],be[je+0],_e,Oe)}}function mc(y,_,K){return K==0?y==0?_==0?6:5:_==0?4:0:K}function Qo(y,_,K,q,de){switch(y>>>30){case 3:Yl(_,K,q,de,0);break;case 2:Ri(_,K,q,de);break;case 1:Jn(_,K,q,de)}}function Xn(y,_){var K,q,de=_.M,fe=_.Nb,xe=y.oc,be=y.pc+40,je=y.oc,_e=y.pc+584,Oe=y.oc,qe=y.pc+600;for(K=0;16>K;++K)xe[be+32*K-1]=129;for(K=0;8>K;++K)je[_e+32*K-1]=129,Oe[qe+32*K-1]=129;for(0<de?xe[be-1-32]=je[_e-1-32]=Oe[qe-1-32]=129:(r(xe,be-32-1,127,21),r(je,_e-32-1,127,9),r(Oe,qe-32-1,127,9)),q=0;q<y.za;++q){var Ie=_.ya[_.aa+q];if(0<q){for(K=-1;16>K;++K)n(xe,be+32*K-4,xe,be+32*K+12,4);for(K=-1;8>K;++K)n(je,_e+32*K-4,je,_e+32*K+4,4),n(Oe,qe+32*K-4,Oe,qe+32*K+4,4)}var He=y.Gd,Ve=y.Hd+q,pt=Ie.ad,We=Ie.Hc;if(0<de&&(n(xe,be-32,He[Ve].y,0,16),n(je,_e-32,He[Ve].f,0,8),n(Oe,qe-32,He[Ve].ea,0,8)),Ie.Za){var ft=xe,bt=be-32+16;for(0<de&&(q>=y.za-1?r(ft,bt,He[Ve].y[15],4):n(ft,bt,He[Ve+1].y,0,4)),K=0;4>K;K++)ft[bt+128+K]=ft[bt+256+K]=ft[bt+384+K]=ft[bt+0+K];for(K=0;16>K;++K,We<<=2)ft=xe,bt=be+Ta[K],pa[Ie.Ob[K]](ft,bt),Qo(We,pt,16*+K,ft,bt)}else if(ft=mc(q,de,Ie.Ob[0]),so[ft](xe,be),We!=0)for(K=0;16>K;++K,We<<=2)Qo(We,pt,16*+K,xe,be+Ta[K]);for(K=Ie.Gc,ft=mc(q,de,Ie.Dd),co[ft](je,_e),co[ft](Oe,qe),We=pt,ft=je,bt=_e,255&(Ie=0|K)&&(170&Ie?eo(We,256,ft,bt):Hn(We,256,ft,bt)),Ie=Oe,We=qe,255&(K>>=8)&&(170&K?eo(pt,320,Ie,We):Hn(pt,320,Ie,We)),de<y.Ub-1&&(n(He[Ve].y,0,xe,be+480,16),n(He[Ve].f,0,je,_e+224,8),n(He[Ve].ea,0,Oe,qe+224,8)),K=8*fe*y.B,He=y.sa,Ve=y.ta+16*q+16*fe*y.R,pt=y.qa,Ie=y.ra+8*q+K,We=y.Ha,ft=y.Ia+8*q+K,K=0;16>K;++K)n(He,Ve+K*y.R,xe,be+32*K,16);for(K=0;8>K;++K)n(pt,Ie+K*y.B,je,_e+32*K,8),n(We,ft+K*y.B,Oe,qe+32*K,8)}}function Oo(y,_,K,q,de,fe,xe,be,je){var _e=[0],Oe=[0],qe=0,Ie=je!=null?je.kd:0,He=je??new St;if(y==null||12>K)return 7;He.data=y,He.w=_,He.ha=K,_=[_],K=[K],He.gb=[He.gb];e:{var Ve=_,pt=K,We=He.gb;if(e(y!=null),e(pt!=null),e(We!=null),We[0]=0,12<=pt[0]&&!t(y,Ve[0],"RIFF")){if(t(y,Ve[0]+8,"WEBP")){We=3;break e}var ft=Pe(y,Ve[0]+4);if(12>ft||4294967286<ft){We=3;break e}if(Ie&&ft>pt[0]-8){We=7;break e}We[0]=ft,Ve[0]+=12,pt[0]-=12}We=0}if(We!=0)return We;for(ft=0<He.gb[0],K=K[0];;){e:{var bt=y;pt=_,We=K;var kt=_e,Nt=Oe,js=Ve=[0];if((vs=qe=[qe])[0]=0,8>We[0])We=7;else{if(!t(bt,pt[0],"VP8X")){if(Pe(bt,pt[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var hs=Pe(bt,pt[0]+8),nn=1+Ze(bt,pt[0]+12);if(2147483648<=nn*(bt=1+Ze(bt,pt[0]+15))){We=3;break e}js!=null&&(js[0]=hs),kt!=null&&(kt[0]=nn),Nt!=null&&(Nt[0]=bt),pt[0]+=18,We[0]-=18,vs[0]=1}We=0}}if(qe=qe[0],Ve=Ve[0],We!=0)return We;if(pt=!!(2&Ve),!ft&&qe)return 3;if(fe!=null&&(fe[0]=!!(16&Ve)),xe!=null&&(xe[0]=pt),be!=null&&(be[0]=0),xe=_e[0],Ve=Oe[0],qe&&pt&&je==null){We=0;break}if(4>K){We=7;break}if(ft&&qe||!ft&&!qe&&!t(y,_[0],"ALPH")){K=[K],He.na=[He.na],He.P=[He.P],He.Sa=[He.Sa];e:{hs=y,We=_,ft=K;var vs=He.gb;kt=He.na,Nt=He.P,js=He.Sa,nn=22,e(hs!=null),e(ft!=null),bt=We[0];var Un=ft[0];for(e(kt!=null),e(js!=null),kt[0]=null,Nt[0]=null,js[0]=0;;){if(We[0]=bt,ft[0]=Un,8>Un){We=7;break e}var Mr=Pe(hs,bt+4);if(4294967286<Mr){We=3;break e}var un=8+Mr+1&-2;if(nn+=un,0<vs&&nn>vs){We=3;break e}if(!t(hs,bt,"VP8 ")||!t(hs,bt,"VP8L")){We=0;break e}if(Un[0]<un){We=7;break e}t(hs,bt,"ALPH")||(kt[0]=hs,Nt[0]=bt+8,js[0]=Mr),bt+=un,Un-=un}}if(K=K[0],He.na=He.na[0],He.P=He.P[0],He.Sa=He.Sa[0],We!=0)break}K=[K],He.Ja=[He.Ja],He.xa=[He.xa];e:if(vs=y,We=_,ft=K,kt=He.gb[0],Nt=He.Ja,js=He.xa,hs=We[0],bt=!t(vs,hs,"VP8 "),nn=!t(vs,hs,"VP8L"),e(vs!=null),e(ft!=null),e(Nt!=null),e(js!=null),8>ft[0])We=7;else{if(bt||nn){if(vs=Pe(vs,hs+4),12<=kt&&vs>kt-12){We=3;break e}if(Ie&&vs>ft[0]-8){We=7;break e}Nt[0]=vs,We[0]+=8,ft[0]-=8,js[0]=nn}else js[0]=5<=ft[0]&&vs[hs+0]==47&&!(vs[hs+4]>>5),Nt[0]=ft[0];We=0}if(K=K[0],He.Ja=He.Ja[0],He.xa=He.xa[0],_=_[0],We!=0)break;if(4294967286<He.Ja)return 3;if(be==null||pt||(be[0]=He.xa?2:1),xe=[xe],Ve=[Ve],He.xa){if(5>K){We=7;break}be=xe,Ie=Ve,pt=fe,y==null||5>K?y=0:5<=K&&y[_+0]==47&&!(y[_+4]>>5)?(ft=[0],vs=[0],kt=[0],re(Nt=new J,y,_,K),Tr(Nt,ft,vs,kt)?(be!=null&&(be[0]=ft[0]),Ie!=null&&(Ie[0]=vs[0]),pt!=null&&(pt[0]=kt[0]),y=1):y=0):y=0}else{if(10>K){We=7;break}be=Ve,y==null||10>K||!Ii(y,_+3,K-3)?y=0:(Ie=y[_+0]|y[_+1]<<8|y[_+2]<<16,pt=16383&(y[_+7]<<8|y[_+6]),y=16383&(y[_+9]<<8|y[_+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=He.Ja||!pt||!y?y=0:(xe&&(xe[0]=pt),be&&(be[0]=y),y=1))}if(!y||(xe=xe[0],Ve=Ve[0],qe&&(_e[0]!=xe||Oe[0]!=Ve)))return 3;je!=null&&(je[0]=He,je.offset=_-je.w,e(4294967286>_-je.w),e(je.offset==je.ha-K));break}return We==0||We==7&&qe&&je==null?(fe!=null&&(fe[0]|=He.na!=null&&0<He.na.length),q!=null&&(q[0]=xe),de!=null&&(de[0]=Ve),0):We}function Pr(y,_,K){var q=_.width,de=_.height,fe=0,xe=0,be=q,je=de;if(_.Da=y!=null&&0<y.Da,_.Da&&(be=y.cd,je=y.bd,fe=y.v,xe=y.j,11>K||(fe&=-2,xe&=-2),0>fe||0>xe||0>=be||0>=je||fe+be>q||xe+je>de))return 0;if(_.v=fe,_.j=xe,_.va=fe+be,_.o=xe+je,_.U=be,_.T=je,_.da=y!=null&&0<y.da,_.da){if(!ut(be,je,K=[y.ib],fe=[y.hb]))return 0;_.ib=K[0],_.hb=fe[0]}return _.ob=y!=null&&y.ob,_.Kb=y==null||!y.Sd,_.da&&(_.ob=_.ib<3*q/4&&_.hb<3*de/4,_.Kb=0),1}function OA(y){if(y==null)return 2;if(11>y.S){var _=y.f.RGBA;_.fb+=(y.height-1)*_.A,_.A=-_.A}else _=y.f.kb,y=y.height,_.O+=(y-1)*_.fa,_.fa=-_.fa,_.N+=(y-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(y-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(y-1)*_.lb,_.lb=-_.lb);return 0}function Ai(y,_,K,q){if(q==null||0>=y||0>=_)return 2;if(K!=null){if(K.Da){var de=K.cd,fe=K.bd,xe=-2&K.v,be=-2&K.j;if(0>xe||0>be||0>=de||0>=fe||xe+de>y||be+fe>_)return 2;y=de,_=fe}if(K.da){if(!ut(y,_,de=[K.ib],fe=[K.hb]))return 2;y=de[0],_=fe[0]}}q.width=y,q.height=_;e:{var je=q.width,_e=q.height;if(y=q.S,0>=je||0>=_e||!(y>=Mu&&13>y))y=2;else{if(0>=q.Rd&&q.sd==null){xe=fe=de=_=0;var Oe=(be=je*Yu[y])*_e;if(11>y||(fe=(_e+1)/2*(_=(je+1)/2),y==12&&(xe=(de=je)*_e)),(_e=o(Oe+2*fe+xe))==null){y=1;break e}q.sd=_e,11>y?((je=q.f.RGBA).eb=_e,je.fb=0,je.A=be,je.size=Oe):((je=q.f.kb).y=_e,je.O=0,je.fa=be,je.Fd=Oe,je.f=_e,je.N=0+Oe,je.Ab=_,je.Cd=fe,je.ea=_e,je.W=0+Oe+fe,je.Db=_,je.Ed=fe,y==12&&(je.F=_e,je.J=0+Oe+2*fe),je.Tc=xe,je.lb=de)}if(_=1,de=q.S,fe=q.width,xe=q.height,de>=Mu&&13>de)if(11>de)y=q.f.RGBA,_&=(be=Math.abs(y.A))*(xe-1)+fe<=y.size,_&=be>=fe*Yu[de],_&=y.eb!=null;else{y=q.f.kb,be=(fe+1)/2,Oe=(xe+1)/2,je=Math.abs(y.fa),_e=Math.abs(y.Ab);var qe=Math.abs(y.Db),Ie=Math.abs(y.lb),He=Ie*(xe-1)+fe;_&=je*(xe-1)+fe<=y.Fd,_&=_e*(Oe-1)+be<=y.Cd,_=(_&=qe*(Oe-1)+be<=y.Ed)&je>=fe&_e>=be&qe>=be,_&=y.y!=null,_&=y.f!=null,_&=y.ea!=null,de==12&&(_&=Ie>=fe,_&=He<=y.Tc,_&=y.F!=null)}else _=0;y=_?0:2}}return y!=0||K!=null&&K.fd&&(y=OA(q)),y}var Po=64,Cn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ui=24,cl=32,ul=8,Cl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qt("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(y){return y},R.Predictor2=function(y,_,K){return _[K+0]},R.Predictor3=function(y,_,K){return _[K+1]},R.Predictor4=function(y,_,K){return _[K-1]},R.Predictor5=function(y,_,K){return Jt(Jt(y,_[K+1]),_[K+0])},R.Predictor6=function(y,_,K){return Jt(y,_[K-1])},R.Predictor7=function(y,_,K){return Jt(y,_[K+0])},R.Predictor8=function(y,_,K){return Jt(_[K-1],_[K+0])},R.Predictor9=function(y,_,K){return Jt(_[K+0],_[K+1])},R.Predictor10=function(y,_,K){return Jt(Jt(y,_[K-1]),Jt(_[K+0],_[K+1]))},R.Predictor11=function(y,_,K){var q=_[K+0];return 0>=Xe(q>>24&255,y>>24&255,(_=_[K-1])>>24&255)+Xe(q>>16&255,y>>16&255,_>>16&255)+Xe(q>>8&255,y>>8&255,_>>8&255)+Xe(255&q,255&y,255&_)?q:y},R.Predictor12=function(y,_,K){var q=_[K+0];return(ts((y>>24&255)+(q>>24&255)-((_=_[K-1])>>24&255))<<24|ts((y>>16&255)+(q>>16&255)-(_>>16&255))<<16|ts((y>>8&255)+(q>>8&255)-(_>>8&255))<<8|ts((255&y)+(255&q)-(255&_)))>>>0},R.Predictor13=function(y,_,K){var q=_[K-1];return(as((y=Jt(y,_[K+0]))>>24&255,q>>24&255)<<24|as(y>>16&255,q>>16&255)<<16|as(y>>8&255,q>>8&255)<<8|as(255&y,255&q))>>>0};var $l=R.PredictorAdd0;R.PredictorAdd1=Vt,Qt("Predictor2","PredictorAdd2"),Qt("Predictor3","PredictorAdd3"),Qt("Predictor4","PredictorAdd4"),Qt("Predictor5","PredictorAdd5"),Qt("Predictor6","PredictorAdd6"),Qt("Predictor7","PredictorAdd7"),Qt("Predictor8","PredictorAdd8"),Qt("Predictor9","PredictorAdd9"),Qt("Predictor10","PredictorAdd10"),Qt("Predictor11","PredictorAdd11"),Qt("Predictor12","PredictorAdd12"),Qt("Predictor13","PredictorAdd13");var PA=R.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var ma,Zi=R.ColorIndexInverseTransform,vi=R.MapARGB,yi=R.VP8LColorIndexInverseTransformAlpha,Qn=R.MapAlpha,Di=R.VP8LPredictorsAdd=[];Di.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var kA,MA,dl,Nl,El,hl,Ea,Yl,Ri,eo,Jn,Hn,Lr,ir,fl,ml,HA,dA,nh,rh,ah,ih,Qu,Ou,hA,xo,pc,vo,Tl=o(511),Pu=o(2041),su=o(225),VA=o(767),ku=0,Il=Pu,nu=su,Li=VA,bi=Tl,Mu=0,Qi=1,Wl=2,ko=3,ru=4,Xl=5,fA=6,au=7,Hu=8,gc=9,KA=10,Mo=[2,3,7],xc=[3,3,11],zA=[280,256,256,256,40],Vu=[0,1,1,1,0],mA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ho=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Vo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pA=8,Ko=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],to=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yo=null,hf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ku=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ff=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],kr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Rn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],so=[],pa=[],co=[],gA=1,lh=2,_l=[],ji=[];zt("UpsampleRgbLinePair",Na,3),zt("UpsampleBgrLinePair",Wn,3),zt("UpsampleRgbaLinePair",Ma,4),zt("UpsampleBgraLinePair",Al,4),zt("UpsampleArgbLinePair",Lo,4),zt("UpsampleRgba4444LinePair",go,2),zt("UpsampleRgb565LinePair",on,2);var GA=R.UpsampleRgbLinePair,iu=R.UpsampleBgrLinePair,Jl=R.UpsampleRgbaLinePair,zu=R.UpsampleBgraLinePair,xA=R.UpsampleArgbLinePair,Fl=R.UpsampleRgba4444LinePair,vA=R.UpsampleRgb565LinePair,zo=16,vc=1<<zo-1,Ul=-227,yA=482,Gu=6,bA=0,Bi=o(256),$u=o(256),mf=o(256),Dm=o(256),Rm=o(yA-Ul),Lm=o(yA-Ul);li("YuvToRgbRow",Na,3),li("YuvToBgrRow",Wn,3),li("YuvToRgbaRow",Ma,4),li("YuvToBgraRow",Al,4),li("YuvToArgbRow",Lo,4),li("YuvToRgba4444Row",go,2),li("YuvToRgb565Row",on,2);var Ta=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yc=[0,2,8],ou=[8,7,6,4,4,2,2,2,1,1,1,1],bc=1;this.WebPDecodeRGBA=function(y,_,K,q,de){var fe=Qi,xe=new ht,be=new vt;xe.ba=be,be.S=fe,be.width=[be.width],be.height=[be.height];var je=be.width,_e=be.height,Oe=new it;if(Oe==null||y==null)var qe=2;else e(Oe!=null),qe=Oo(y,_,K,Oe.width,Oe.height,Oe.Pd,Oe.Qd,Oe.format,null);if(qe!=0?je=0:(je!=null&&(je[0]=Oe.width[0]),_e!=null&&(_e[0]=Oe.height[0]),je=1),je){be.width=be.width[0],be.height=be.height[0],q!=null&&(q[0]=be.width),de!=null&&(de[0]=be.height);e:{if(q=new Oa,(de=new St).data=y,de.w=_,de.ha=K,de.kd=1,_=[0],e(de!=null),((y=Oo(de.data,de.w,de.ha,null,null,null,_,null,de))==0||y==7)&&_[0]&&(y=4),(_=y)==0){if(e(xe!=null),q.data=de.data,q.w=de.w+de.offset,q.ha=de.ha-de.offset,q.put=Yt,q.ac=Ls,q.bc=hn,q.ma=xe,de.xa){if((y=ii())==null){xe=1;break e}if((function(Ie,He){var Ve=[0],pt=[0],We=[0];t:for(;;){if(Ie==null)return 0;if(He==null)return Ie.a=2,0;if(Ie.l=He,Ie.a=0,re(Ie.m,He.data,He.w,He.ha),!Tr(Ie.m,Ve,pt,We)){Ie.a=3;break t}if(Ie.xb=lh,He.width=Ve[0],He.height=pt[0],!yn(Ve[0],pt[0],1,Ie,null))break t;return 1}return e(Ie.a!=0),0})(y,q)){if(q=(_=Ai(q.width,q.height,xe.Oa,xe.ba))==0){t:{q=y;s:for(;;){if(q==null){q=0;break t}if(e(q.s.yc!=null),e(q.s.Ya!=null),e(0<q.s.Wb),e((K=q.l)!=null),e((de=K.ma)!=null),q.xb!=0){if(q.ca=de.ba,q.tb=de.tb,e(q.ca!=null),!Pr(de.Oa,K,ko)){q.a=2;break s}if(!_r(q,K.width)||K.da)break s;if((K.da||at(q.ca.S))&&st(),11>q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),q.ca.f.kb.F!=null&&st()),q.Pb&&0<q.s.ua&&q.s.vb.X==null&&!me(q.s.vb,q.s.Wa.Xa)){q.a=1;break s}q.xb=0}if(!ya(q,q.V,q.Ba,q.c,q.i,K.o,Fs))break s;de.Dc=q.Ma,q=1;break t}e(q.a!=0),q=0}q=!q}q&&(_=y.a)}else _=y.a}else{if((y=new Yr)==null){xe=1;break e}if(y.Fa=de.na,y.P=de.P,y.qc=de.Sa,Wr(y,q)){if((_=Ai(q.width,q.height,xe.Oa,xe.ba))==0){if(y.Aa=0,K=xe.Oa,e((de=y)!=null),K!=null){if(0<(je=0>(je=K.Md)?0:100<je?255:255*je/100)){for(_e=Oe=0;4>_e;++_e)12>(qe=de.pb[_e]).lc&&(qe.ia=je*ou[0>qe.lc?0:qe.lc]>>3),Oe|=qe.ia;Oe&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=K.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}(function(Ie,He){if(Ie==null)return 0;if(He==null)return Sn(Ie,2,"NULL VP8Io parameter in VP8Decode().");if(!Ie.cb&&!Wr(Ie,He))return 0;if(e(Ie.cb),He.ac==null||He.ac(He)){He.ob&&(Ie.L=0);var Ve=yc[Ie.L];if(Ie.L==2?(Ie.yb=0,Ie.zb=0):(Ie.yb=He.v-Ve>>4,Ie.zb=He.j-Ve>>4,0>Ie.yb&&(Ie.yb=0),0>Ie.zb&&(Ie.zb=0)),Ie.Va=He.o+15+Ve>>4,Ie.Hb=He.va+15+Ve>>4,Ie.Hb>Ie.za&&(Ie.Hb=Ie.za),Ie.Va>Ie.Ub&&(Ie.Va=Ie.Ub),0<Ie.L){var pt=Ie.ed;for(Ve=0;4>Ve;++Ve){var We;if(Ie.Qa.Cb){var ft=Ie.Qa.Lb[Ve];Ie.Qa.Fb||(ft+=pt.Tb)}else ft=pt.Tb;for(We=0;1>=We;++We){var bt=Ie.gd[Ve][We],kt=ft;if(pt.Pc&&(kt+=pt.vd[0],We&&(kt+=pt.od[0])),0<(kt=0>kt?0:63<kt?63:kt)){var Nt=kt;0<pt.wb&&(Nt=4<pt.wb?Nt>>2:Nt>>1)>9-pt.wb&&(Nt=9-pt.wb),1>Nt&&(Nt=1),bt.dd=Nt,bt.tc=2*kt+Nt,bt.ld=40<=kt?2:15<=kt?1:0}else bt.tc=0;bt.La=We}}}Ve=0}else Sn(Ie,6,"Frame setup failed"),Ve=Ie.a;if(Ve=Ve==0){if(Ve){Ie.$c=0,0<Ie.Aa||(Ie.Ic=bc);t:{Ve=Ie.Ic,pt=4*(Nt=Ie.za);var js=32*Nt,hs=Nt+1,nn=0<Ie.L?Nt*(0<Ie.Aa?2:1):0,vs=(Ie.Aa==2?2:1)*Nt;if((bt=pt+832+(We=3*(16*Ve+yc[Ie.L])/2*js)+(ft=Ie.Fa!=null&&0<Ie.Fa.length?Ie.Kc.c*Ie.Kc.i:0))!=bt)Ve=0;else{if(bt>Ie.Vb){if(Ie.Vb=0,Ie.Ec=o(bt),Ie.Fc=0,Ie.Ec==null){Ve=Sn(Ie,1,"no memory during frame initialization.");break t}Ie.Vb=bt}bt=Ie.Ec,kt=Ie.Fc,Ie.Ac=bt,Ie.Bc=kt,kt+=pt,Ie.Gd=c(js,jl),Ie.Hd=0,Ie.rb=c(hs+1,Ur),Ie.sb=1,Ie.wa=nn?c(nn,ha):null,Ie.Y=0,Ie.D.Nb=0,Ie.D.wa=Ie.wa,Ie.D.Y=Ie.Y,0<Ie.Aa&&(Ie.D.Y+=Nt),e(!0),Ie.oc=bt,Ie.pc=kt,kt+=832,Ie.ya=c(vs,Ji),Ie.aa=0,Ie.D.ya=Ie.ya,Ie.D.aa=Ie.aa,Ie.Aa==2&&(Ie.D.aa+=Nt),Ie.R=16*Nt,Ie.B=8*Nt,Nt=(js=yc[Ie.L])*Ie.R,js=js/2*Ie.B,Ie.sa=bt,Ie.ta=kt+Nt,Ie.qa=Ie.sa,Ie.ra=Ie.ta+16*Ve*Ie.R+js,Ie.Ha=Ie.qa,Ie.Ia=Ie.ra+8*Ve*Ie.B+js,Ie.$c=0,kt+=We,Ie.mb=ft?bt:null,Ie.nb=ft?kt:null,e(kt+ft<=Ie.Fc+Ie.Vb),Ee(Ie),r(Ie.Ac,Ie.Bc,0,pt),Ve=1}}if(Ve){if(He.ka=0,He.y=Ie.sa,He.O=Ie.ta,He.f=Ie.qa,He.N=Ie.ra,He.ea=Ie.Ha,He.Vd=Ie.Ia,He.fa=Ie.R,He.Rc=Ie.B,He.F=null,He.J=0,!ku){for(Ve=-255;255>=Ve;++Ve)Tl[255+Ve]=0>Ve?-Ve:Ve;for(Ve=-1020;1020>=Ve;++Ve)Pu[1020+Ve]=-128>Ve?-128:127<Ve?127:Ve;for(Ve=-112;112>=Ve;++Ve)su[112+Ve]=-16>Ve?-16:15<Ve?15:Ve;for(Ve=-255;510>=Ve;++Ve)VA[255+Ve]=0>Ve?0:255<Ve?255:Ve;ku=1}Ea=Bs,Yl=zs,eo=Gs,Jn=Lt,Hn=Js,Ri=ms,Lr=rr,ir=Or,fl=Ae,ml=Te,HA=Ca,dA=k,nh=Ue,rh=Me,ah=Ht,ih=bs,Qu=cn,Ou=In,pa[0]=Do,pa[1]=nr,pa[2]=ll,pa[3]=Bl,pa[4]=Ba,pa[5]=Pa,pa[6]=sa,pa[7]=$n,pa[8]=Ro,pa[9]=oi,so[0]=fa,so[1]=ta,so[2]=wa,so[3]=Qr,so[4]=_i,so[5]=ja,so[6]=Fi,co[0]=qi,co[1]=wr,co[2]=pi,co[3]=Sl,co[4]=jr,co[5]=gi,co[6]=xi,Ve=1}else Ve=0}Ve&&(Ve=(function(Un,Mr){for(Un.M=0;Un.M<Un.Va;++Un.M){var un,At=Un.Jc[Un.M&Un.Xb],es=Un.m,ra=Un;for(un=0;un<ra.za;++un){var Vs=es,Ws=ra,fr=Ws.Ac,Ha=Ws.Bc+4*un,Ia=Ws.zc,mr=Ws.ya[Ws.aa+un];if(Ws.Qa.Bb?mr.$b=Be(Vs,Ws.Pa.jb[0])?2+Be(Vs,Ws.Pa.jb[2]):Be(Vs,Ws.Pa.jb[1]):mr.$b=0,Ws.kc&&(mr.Ad=Be(Vs,Ws.Bd)),mr.Za=!Be(Vs,145)+0,mr.Za){var Va=mr.Ob,Oi=0;for(Ws=0;4>Ws;++Ws){var Ka,ln=Ia[0+Ws];for(Ka=0;4>Ka;++Ka){ln=wi[fr[Ha+Ka]][ln];for(var On=Ku[Be(Vs,ln[0])];0<On;)On=Ku[2*On+Be(Vs,ln[On])];ln=-On,fr[Ha+Ka]=ln}n(Va,Oi,fr,Ha,4),Oi+=4,Ia[0+Ws]=ln}}else ln=Be(Vs,156)?Be(Vs,128)?1:3:Be(Vs,163)?2:0,mr.Ob[0]=ln,r(fr,Ha,ln,4),r(Ia,0,ln,4);mr.Dd=Be(Vs,142)?Be(Vs,114)?Be(Vs,183)?1:3:2:0}if(ra.m.Ka)return Sn(Un,7,"Premature end-of-partition0 encountered.");for(;Un.ja<Un.za;++Un.ja){if(ra=At,Vs=(es=Un).rb[es.sb-1],fr=es.rb[es.sb+es.ja],un=es.ya[es.aa+es.ja],Ha=es.kc?un.Ad:0)Vs.la=fr.la=0,un.Za||(Vs.Na=fr.Na=0),un.Hc=0,un.Gc=0,un.ia=0;else{var Hr,or;if(Vs=fr,fr=ra,Ha=es.Pa.Xc,Ia=es.ya[es.aa+es.ja],mr=es.pb[Ia.$b],Ws=Ia.ad,Va=0,Oi=es.rb[es.sb-1],ln=Ka=0,r(Ws,Va,0,384),Ia.Za)var za=0,aa=Ha[3];else{On=o(16);var Pn=Vs.Na+Oi.Na;if(Pn=yo(fr,Ha[1],Pn,mr.Eb,0,On,0),Vs.Na=Oi.Na=(0<Pn)+0,1<Pn)Ea(On,0,Ws,Va);else{var _a=On[0]+3>>3;for(On=0;256>On;On+=16)Ws[Va+On]=_a}za=1,aa=Ha[0]}var pr=15&Vs.la,Ga=15&Oi.la;for(On=0;4>On;++On){var $a=1&Ga;for(_a=or=0;4>_a;++_a)pr=pr>>1|($a=(Pn=yo(fr,aa,Pn=$a+(1&pr),mr.Sc,za,Ws,Va))>za)<<7,or=or<<2|(3<Pn?3:1<Pn?2:Ws[Va+0]!=0),Va+=16;pr>>=4,Ga=Ga>>1|$a<<7,Ka=(Ka<<8|or)>>>0}for(aa=pr,za=Ga>>4,Hr=0;4>Hr;Hr+=2){for(or=0,pr=Vs.la>>4+Hr,Ga=Oi.la>>4+Hr,On=0;2>On;++On){for($a=1&Ga,_a=0;2>_a;++_a)Pn=$a+(1&pr),pr=pr>>1|($a=0<(Pn=yo(fr,Ha[2],Pn,mr.Qc,0,Ws,Va)))<<3,or=or<<2|(3<Pn?3:1<Pn?2:Ws[Va+0]!=0),Va+=16;pr>>=2,Ga=Ga>>1|$a<<5}ln|=or<<4*Hr,aa|=pr<<4<<Hr,za|=(240&Ga)<<Hr}Vs.la=aa,Oi.la=za,Ia.Hc=Ka,Ia.Gc=ln,Ia.ia=43690&ln?0:mr.ia,Ha=!(Ka|ln)}if(0<es.L&&(es.wa[es.Y+es.ja]=es.gd[un.$b][un.Za],es.wa[es.Y+es.ja].La|=!Ha),ra.Ka)return Sn(Un,7,"Premature end-of-file encountered.")}if(Ee(Un),es=Mr,ra=1,un=(At=Un).D,Vs=0<At.L&&At.M>=At.zb&&At.M<=At.Va,At.Aa==0)t:{if(un.M=At.M,un.uc=Vs,Xn(At,un),ra=1,un=(or=At.D).Nb,Vs=(ln=yc[At.L])*At.R,fr=ln/2*At.B,On=16*un*At.R,_a=8*un*At.B,Ha=At.sa,Ia=At.ta-Vs+On,mr=At.qa,Ws=At.ra-fr+_a,Va=At.Ha,Oi=At.Ia-fr+_a,Ga=(pr=or.M)==0,Ka=pr>=At.Va-1,At.Aa==2&&Xn(At,or),or.uc)for($a=(Pn=At).D.M,e(Pn.D.uc),or=Pn.yb;or<Pn.Hb;++or){za=or,aa=$a;var Br=(Vn=(ia=Pn).D).Nb;Hr=ia.R;var Vn=Vn.wa[Vn.Y+za],Pi=ia.sa,ga=ia.ta+16*Br*Hr+16*za,Qs=Vn.dd,Hs=Vn.tc;if(Hs!=0)if(e(3<=Hs),ia.L==1)0<za&&ih(Pi,ga,Hr,Hs+4),Vn.La&&Ou(Pi,ga,Hr,Hs),0<aa&&ah(Pi,ga,Hr,Hs+4),Vn.La&&Qu(Pi,ga,Hr,Hs);else{var qn=ia.B,uo=ia.qa,bo=ia.ra+8*Br*qn+8*za,no=ia.Ha,ia=ia.Ia+8*Br*qn+8*za;Br=Vn.ld,0<za&&(ir(Pi,ga,Hr,Hs+4,Qs,Br),ml(uo,bo,no,ia,qn,Hs+4,Qs,Br)),Vn.La&&(dA(Pi,ga,Hr,Hs,Qs,Br),rh(uo,bo,no,ia,qn,Hs,Qs,Br)),0<aa&&(Lr(Pi,ga,Hr,Hs+4,Qs,Br),fl(uo,bo,no,ia,qn,Hs+4,Qs,Br)),Vn.La&&(HA(Pi,ga,Hr,Hs,Qs,Br),nh(uo,bo,no,ia,qn,Hs,Qs,Br))}}if(At.ia&&alert("todo:DitherRow"),es.put!=null){if(or=16*pr,pr=16*(pr+1),Ga?(es.y=At.sa,es.O=At.ta+On,es.f=At.qa,es.N=At.ra+_a,es.ea=At.Ha,es.W=At.Ia+_a):(or-=ln,es.y=Ha,es.O=Ia,es.f=mr,es.N=Ws,es.ea=Va,es.W=Oi),Ka||(pr-=ln),pr>es.o&&(pr=es.o),es.F=null,es.J=null,At.Fa!=null&&0<At.Fa.length&&or<pr&&(es.J=w(At,es,or,pr-or),es.F=At.mb,es.F==null&&es.F.length==0)){ra=Sn(At,3,"Could not decode alpha data.");break t}or<es.j&&(ln=es.j-or,or=es.j,e(!(1&ln)),es.O+=At.R*ln,es.N+=At.B*(ln>>1),es.W+=At.B*(ln>>1),es.F!=null&&(es.J+=es.width*ln)),or<pr&&(es.O+=es.v,es.N+=es.v>>1,es.W+=es.v>>1,es.F!=null&&(es.J+=es.v),es.ka=or-es.j,es.U=es.va-es.v,es.T=pr-or,ra=es.put(es))}un+1!=At.Ic||Ka||(n(At.sa,At.ta-Vs,Ha,Ia+16*At.R,Vs),n(At.qa,At.ra-fr,mr,Ws+8*At.B,fr),n(At.Ha,At.Ia-fr,Va,Oi+8*At.B,fr))}if(!ra)return Sn(Un,6,"Output aborted.")}return 1})(Ie,He)),He.bc!=null&&He.bc(He),Ve&=1}return Ve?(Ie.cb=0,Ve):0})(y,q)||(_=y.a)}}else _=y.a}_==0&&xe.Oa!=null&&xe.Oa.fd&&(_=OA(xe.ba))}xe=_}fe=xe!=0?null:11>fe?be.f.RGBA.eb:be.f.kb.y}else fe=null;return fe};var Yu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(R,$){for(var P="",V=0;V<4;V++)P+=String.fromCharCode(R[$++]);return P}function A(R,$){return R[$+0]|R[$+1]<<8}function m(R,$){return(R[$+0]|R[$+1]<<8|R[$+2]<<16)>>>0}function x(R,$){return(R[$+0]|R[$+1]<<8|R[$+2]<<16|R[$+3]<<24)>>>0}new u;var g=[0],b=[0],I=[],N=new u,C=s,E=(function(R,$){var P={},V=0,G=!1,ae=0,ue=0;if(P.frames=[],!(function(M,J){for(var ie=0;ie<4;ie++)if(M[J+ie]!="RIFF".charCodeAt(ie))return!0;return!1})(R,$)){for(x(R,$+=4),$+=8;$<R.length;){var oe=f(R,$),X=x(R,$+=4);$+=4;var Y=X+(1&X);switch(oe){case"VP8 ":case"VP8L":P.frames[V]===void 0&&(P.frames[V]={}),(ee=P.frames[V]).src_off=G?ue:$-8,ee.src_size=ae+X+8,V++,G&&(G=!1,ae=0,ue=0);break;case"VP8X":(ee=P.header={}).feature_flags=R[$];var re=$+4;ee.canvas_width=1+m(R,re),re+=3,ee.canvas_height=1+m(R,re),re+=3;break;case"ALPH":G=!0,ae=Y+8,ue=$-8;break;case"ANIM":(ee=P.header).bgcolor=x(R,$),re=$+4,ee.loop_count=A(R,re),re+=2;break;case"ANMF":var pe,ee;(ee=P.frames[V]={}).offset_x=2*m(R,$),$+=3,ee.offset_y=2*m(R,$),$+=3,ee.width=1+m(R,$),$+=3,ee.height=1+m(R,$),$+=3,ee.duration=m(R,$),$+=3,pe=R[$++],ee.dispose=1&pe,ee.blend=pe>>1&1}oe!="ANMF"&&($+=Y)}return P}})(C,0);E.response=C,E.rgbaoutput=!0,E.dataurl=!1;var F=E.header?E.header:null,L=E.frames?E.frames:null;if(F){F.loop_counter=F.loop_count,g=[F.canvas_height],b=[F.canvas_width];for(var O=0;O<L.length&&L[O].blend!=0;O++);}var H=L[0],Q=N.WebPDecodeRGBA(C,H.src_off,H.src_size,b,g);H.rgba=Q,H.imgwidth=b[0],H.imgheight=g[0];for(var U=0;U<b[0]*g[0]*4;U++)I[U]=Q[U];return this.width=b,this.height=g,this.data=I,this}(function(s){var e,t,n,r,o,c,h,u,f,A=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new u,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new c,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new c,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,h=this.internal.Rectangle,u=this.internal.Matrix,f=new A}]);var m=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=M;Object.defineProperty(this,"pdf",{get:function(){return J}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(me){ie=!!me}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(me){le=!!me}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(me){isNaN(me)||(ce=me)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(me){isNaN(me)||(ve=me)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(me){var nt;typeof me=="number"?nt=[me,me,me,me]:((nt=new Array(4))[0]=me[0],nt[1]=me.length>=2?me[1]:nt[0],nt[2]=me.length>=3?me[2]:nt[0],nt[3]=me.length>=4?me[3]:nt[1]),f.margin=nt}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(me){Se=me}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(me){ge=me}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(me){Be=me}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(me){me instanceof A&&(f=me)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(me){f.path=me}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(me){Fe=me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(me){var nt;nt=x(me),this.ctx.fillStyle=nt.style,this.ctx.isFillTransparent=nt.a===0,this.ctx.fillOpacity=nt.a,this.pdf.setFillColor(nt.r,nt.g,nt.b,{a:nt.a}),this.pdf.setTextColor(nt.r,nt.g,nt.b,{a:nt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(me){var nt=x(me);this.ctx.strokeStyle=nt.style,this.ctx.isStrokeTransparent=nt.a===0,this.ctx.strokeOpacity=nt.a,nt.a===0?this.pdf.setDrawColor(255,255,255):(nt.a,this.pdf.setDrawColor(nt.r,nt.g,nt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(me){["butt","round","square"].indexOf(me)!==-1&&(this.ctx.lineCap=me,this.pdf.setLineCap(me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(me){isNaN(me)||(this.ctx.lineWidth=me,this.pdf.setLineWidth(me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(me){["bevel","round","miter"].indexOf(me)!==-1&&(this.ctx.lineJoin=me,this.pdf.setLineJoin(me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(me){isNaN(me)||(this.ctx.miterLimit=me,this.pdf.setMiterLimit(me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(me){this.ctx.textBaseline=me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(me){["right","end","center","left","start"].indexOf(me)!==-1&&(this.ctx.textAlign=me)}});var Qe=null,Ze=null,Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(me){Qe=null,Ze=null,Pe=me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(me){var nt;if(this.ctx.font=me,(nt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(me))!==null){var It=nt[1];nt[2];var ut=nt[3],ze=nt[4];nt[5];var Ft=nt[6],Qt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(Qt==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:Qt==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var Ct=(function(Dt){var Ns,$t,Wt=[],lt=Dt.trim();if(lt==="")return y1;if(lt in eC)return[eC[lt]];for(;lt!=="";){switch($t=null,Ns=(lt=sC(lt)).charAt(0)){case'"':case"'":$t=tV(lt.substring(1),Ns);break;default:$t=sV(lt)}if($t===null||(Wt.push($t[0]),(lt=sC($t[1]))!==""&&lt.charAt(0)!==","))return y1;lt=lt.replace(/^,/,"")}return Wt})(Ft);if(this.fontFaces){var Jt=(function(Dt,Ns){var $t=Dt.getFontList(),Wt=JSON.stringify($t);if(Qe===null||Ze!==Wt){var lt=(function(Ot){var De=[];return Object.keys(Ot).forEach(function(dt){Ot[dt].forEach(function(at){var Et=null;switch(at){case"bold":Et={family:dt,weight:"bold"};break;case"italic":Et={family:dt,style:"italic"};break;case"bolditalic":Et={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":Et={family:dt}}Et!==null&&(Et.ref={name:dt,style:at},De.push(Et))})}),De})($t);Qe=(function(Ot){for(var De={},dt=0;dt<Ot.length;++dt){var at=v1(Ot[dt]),Et=at.family,Xt=at.stretch,vt=at.style,it=at.weight;De[Et]=De[Et]||{},De[Et][Xt]=De[Et][Xt]||{},De[Et][Xt][vt]=De[Et][Xt][vt]||{},De[Et][Xt][vt][it]=at}return De})(lt.concat(Ns)),Ze=Wt}return Qe})(this.pdf,this.fontFaces),ts=Ct.map(function(Dt){return{family:Dt,stretch:"normal",weight:ut,style:It}}),as=(function(Dt,Ns,$t){for(var Wt=($t=$t||{}).defaultFontFamily||"times",lt=Object.assign({},eV,$t.genericFontFamilies||{}),Ot=null,De=null,dt=0;dt<Ns.length;++dt)if(lt[(Ot=v1(Ns[dt])).family]&&(Ot.family=lt[Ot.family]),Dt.hasOwnProperty(Ot.family)){De=Dt[Ot.family];break}if(!(De=De||Dt[Wt]))throw new Error("Could not find a font-family for the rule '"+tC(Ot)+"' and default family '"+Wt+"'.");if(De=(function(at,Et){if(Et[at])return Et[at];var Xt=Tb[at],vt=Xt<=Tb.normal?-1:1,it=ZS(Et,II,Xt,vt);if(!it)throw new Error("Could not find a matching font-stretch value for "+at);return it})(Ot.stretch,De),De=(function(at,Et){if(Et[at])return Et[at];for(var Xt=TI[at],vt=0;vt<Xt.length;++vt)if(Et[Xt[vt]])return Et[Xt[vt]];throw new Error("Could not find a matching font-style for "+at)})(Ot.style,De),!(De=(function(at,Et){if(Et[at])return Et[at];if(at===400&&Et[500])return Et[500];if(at===500&&Et[400])return Et[400];var Xt=Z9[at],vt=ZS(Et,_I,Xt,at<400?-1:1);if(!vt)throw new Error("Could not find a matching font-weight for value "+at);return vt})(Ot.weight,De)))throw new Error("Failed to resolve a font for the rule '"+tC(Ot)+"'.");return De})(Jt,ts);this.pdf.setFont(as.ref.name,as.ref.style)}else{var Xe="";(ut==="bold"||parseInt(ut,10)>=700||It==="bold")&&(Xe="bold"),It==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var Vt="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Mt=0;Mt<Ct.length;Mt++){if(this.pdf.internal.getFont(Ct[Mt],Xe,{noFallback:!0,disableWarning:!0})!==void 0){Vt=Ct[Mt];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(Ct[Mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Vt=Ct[Mt],Xe="bold";else if(this.pdf.internal.getFont(Ct[Mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Vt=Ct[Mt],Xe="normal";break}}if(Vt===""){for(var mt=0;mt<Ct.length;mt++)if(Kt[Ct[mt]]){Vt=Kt[Ct[mt]];break}}Vt=Vt===""?"Times":Vt,this.pdf.setFont(Vt,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(me){this.ctx.globalCompositeOperation=me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(me){this.ctx.globalAlpha=me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(me){this.ctx.lineDashOffset=me,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(me){this.ctx.lineDash=me,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(me){this.ctx.ignoreClearRect=!!me}})};m.prototype.setLineDash=function(M){this.lineDash=M},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){L.call(this,"fill",!1)},m.prototype.stroke=function(){L.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(M,J){if(isNaN(M)||isNaN(J))throw ca.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new c(M,J));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new c(M,J)},m.prototype.closePath=function(){var M=new c(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&$r(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){M=new c(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(M.x,M.y)},m.prototype.lineTo=function(M,J){if(isNaN(M)||isNaN(J))throw ca.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new c(M,J));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new c(ie.x,ie.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},m.prototype.quadraticCurveTo=function(M,J,ie,le){if(isNaN(ie)||isNaN(le)||isNaN(M)||isNaN(J))throw ca.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new c(ie,le)),ve=this.ctx.transform.applyToPoint(new c(M,J));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new c(ce.x,ce.y)},m.prototype.bezierCurveTo=function(M,J,ie,le,ce,ve){if(isNaN(ce)||isNaN(ve)||isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le))throw ca.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new c(ce,ve)),ge=this.ctx.transform.applyToPoint(new c(M,J)),Be=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Be.x,y2:Be.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new c(Se.x,Se.y)},m.prototype.arc=function(M,J,ie,le,ce,ve){if(isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le)||isNaN(ce))throw ca.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new c(M,J));M=Se.x,J=Se.y;var ge=this.ctx.transform.applyToPoint(new c(0,ie)),Be=this.ctx.transform.applyToPoint(new c(0,0));ie=Math.sqrt(Math.pow(ge.x-Be.x,2)+Math.pow(ge.y-Be.y,2))}Math.abs(ce-le)>=2*Math.PI&&(le=0,ce=2*Math.PI),this.path.push({type:"arc",x:M,y:J,radius:ie,startAngle:le,endAngle:ce,counterclockwise:ve})},m.prototype.arcTo=function(M,J,ie,le,ce){throw new Error("arcTo not implemented.")},m.prototype.rect=function(M,J,ie,le){if(isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le))throw ca.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,J),this.lineTo(M+ie,J),this.lineTo(M+ie,J+le),this.lineTo(M,J+le),this.lineTo(M,J),this.lineTo(M+ie,J),this.lineTo(M,J)},m.prototype.fillRect=function(M,J,ie,le){if(isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le))throw ca.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,J,ie,le),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},m.prototype.strokeRect=function(M,J,ie,le){if(isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le))throw ca.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(M,J,ie,le),this.stroke())},m.prototype.clearRect=function(M,J,ie,le){if(isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le))throw ca.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,J,ie,le))},m.prototype.save=function(M){M=typeof M!="boolean"||M;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new A(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},m.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(J),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(M){var J,ie,le,ce;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))J=0,ie=0,le=0,ce=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ve!==null)J=parseInt(ve[1]),ie=parseInt(ve[2]),le=parseInt(ve[3]),ce=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)J=parseInt(ve[1]),ie=parseInt(ve[2]),le=parseInt(ve[3]),ce=parseFloat(ve[4]);else{if(ce=1,typeof M=="string"&&M.charAt(0)!=="#"){var Se=new wI(M);M=Se.ok?Se.toHex():"#000000"}M.length===4?(J=M.substring(1,2),J+=J,ie=M.substring(2,3),ie+=ie,le=M.substring(3,4),le+=le):(J=M.substring(1,3),ie=M.substring(3,5),le=M.substring(5,7)),J=parseInt(J,16),ie=parseInt(ie,16),le=parseInt(le,16)}}return{r:J,g:ie,b:le,a:ce,style:M}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(M,J,ie,le){if(isNaN(J)||isNaN(ie)||typeof M!="string")throw ca.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!g.call(this)){var ce=Y(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;V.call(this,{text:M,x:J,y:ie,scale:ve,angle:ce,align:this.textAlign,maxWidth:le})}},m.prototype.strokeText=function(M,J,ie,le){if(isNaN(J)||isNaN(ie)||typeof M!="string")throw ca.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){le=isNaN(le)?void 0:le;var ce=Y(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;V.call(this,{text:M,x:J,y:ie,scale:ve,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:le})}},m.prototype.measureText=function(M){if(typeof M!="string")throw ca.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,ie=this.pdf.internal.scaleFactor,le=J.internal.getFontSize(),ce=J.getStringUnitWidth(M)*le/J.internal.scaleFactor;return new function(ve){var Se=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:ce*=Math.round(96*ie/72*1e4)/1e4})},m.prototype.scale=function(M,J){if(isNaN(M)||isNaN(J))throw ca.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new u(M,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},m.prototype.rotate=function(M){if(isNaN(M))throw ca.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new u(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.translate=function(M,J){if(isNaN(M)||isNaN(J))throw ca.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new u(1,0,0,1,M,J);this.ctx.transform=this.ctx.transform.multiply(ie)},m.prototype.transform=function(M,J,ie,le,ce,ve){if(isNaN(M)||isNaN(J)||isNaN(ie)||isNaN(le)||isNaN(ce)||isNaN(ve))throw ca.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new u(M,J,ie,le,ce,ve);this.ctx.transform=this.ctx.transform.multiply(Se)},m.prototype.setTransform=function(M,J,ie,le,ce,ve){M=isNaN(M)?1:M,J=isNaN(J)?0:J,ie=isNaN(ie)?0:ie,le=isNaN(le)?1:le,ce=isNaN(ce)?0:ce,ve=isNaN(ve)?0:ve,this.ctx.transform=new u(M,J,ie,le,ce,ve)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(M,J,ie,le,ce,ve,Se,ge,Be){var Fe=this.pdf.getImageProperties(M),Qe=1,Ze=1,Pe=1,me=1;le!==void 0&&ge!==void 0&&(Pe=ge/le,me=Be/ce,Qe=Fe.width/le*ge/le,Ze=Fe.height/ce*Be/ce),ve===void 0&&(ve=J,Se=ie,J=0,ie=0),le!==void 0&&ge===void 0&&(ge=le,Be=ce),le===void 0&&ge===void 0&&(ge=Fe.width,Be=Fe.height);var nt=this.ctx.transform.decompose(),It=Y(nt.rotate.shx),ut=new u,ze=(ut=(ut=(ut=ut.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new h(ve-J*Pe,Se-ie*me,le*Qe,ce*Ze));if(this.autoPaging){for(var Ft,Qt=N.call(this,ze),Ct=[],Jt=0;Jt<Qt.length;Jt+=1)Ct.indexOf(Qt[Jt])===-1&&Ct.push(Qt[Jt]);F(Ct);for(var ts=Ct[0],as=Ct[Ct.length-1],Xe=ts;Xe<as+1;Xe++){this.pdf.setPage(Xe);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Kt=Xe===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=Xe===1?0:Mt+(Xe-2)*mt;if(this.ctx.clip_path.length!==0){var Ns=this.path;Ft=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Ft,this.posX+this.margin[3],-Dt+Kt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=Ns}var $t=JSON.parse(JSON.stringify(ze));$t=E([$t],this.posX+this.margin[3],-Dt+Kt+this.ctx.prevPageLastElemOffset)[0];var Wt=(Xe>ts||Xe<as)&&I.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,mt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",$t.x,$t.y,$t.w,$t.h,null,null,It),Wt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,It)};var N=function(M,J,ie){var le=[];J=J||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":le.push(Math.floor((M.y+ce)/ie)+1);break;case"arc":le.push(Math.floor((M.y+ce-M.radius)/ie)+1),le.push(Math.floor((M.y+ce+M.radius)/ie)+1);break;case"qct":var ve=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);le.push(Math.floor((ve.y+ce)/ie)+1),le.push(Math.floor((ve.y+ve.h+ce)/ie)+1);break;case"bct":var Se=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);le.push(Math.floor((Se.y+ce)/ie)+1),le.push(Math.floor((Se.y+Se.h+ce)/ie)+1);break;case"rect":le.push(Math.floor((M.y+ce)/ie)+1),le.push(Math.floor((M.y+M.h+ce)/ie)+1)}for(var ge=0;ge<le.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<le[ge];)C.call(this);return le},C=function(){var M=this.fillStyle,J=this.strokeStyle,ie=this.font,le=this.lineCap,ce=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=J,this.font=ie,this.lineCap=le,this.lineWidth=ce,this.lineJoin=ve},E=function(M,J,ie){for(var le=0;le<M.length;le++)switch(M[le].type){case"bct":M[le].x2+=J,M[le].y2+=ie;case"qct":M[le].x1+=J,M[le].y1+=ie;default:M[le].x+=J,M[le].y+=ie}return M},F=function(M){return M.sort(function(J,ie){return J-ie})},L=function(M,J){var ie=this.fillStyle,le=this.strokeStyle,ce=this.lineCap,ve=this.lineWidth,Se=Math.abs(ve*this.ctx.transform.scaleX),ge=this.lineJoin;if(this.autoPaging){for(var Be,Fe,Qe=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),Pe=[],me=0;me<Ze.length;me++)if(Ze[me].x!==void 0)for(var nt=N.call(this,Ze[me]),It=0;It<nt.length;It+=1)Pe.indexOf(nt[It])===-1&&Pe.push(nt[It]);for(var ut=0;ut<Pe.length;ut++)for(;this.pdf.internal.getNumberOfPages()<Pe[ut];)C.call(this);F(Pe);for(var ze=Pe[0],Ft=Pe[Pe.length-1],Qt=ze;Qt<Ft+1;Qt++){this.pdf.setPage(Qt),this.fillStyle=ie,this.strokeStyle=le,this.lineCap=ce,this.lineWidth=Se,this.lineJoin=ge;var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jt=Qt===1?this.posY+this.margin[0]:this.margin[0],ts=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],as=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Qt===1?0:ts+(Qt-2)*as;if(this.ctx.clip_path.length!==0){var Vt=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Be,this.posX+this.margin[3],-Xe+Jt+this.ctx.prevPageLastElemOffset),O.call(this,M,!0),this.path=Vt}if(Fe=JSON.parse(JSON.stringify(Qe)),this.path=E(Fe,this.posX+this.margin[3],-Xe+Jt+this.ctx.prevPageLastElemOffset),J===!1||Qt===0){var Kt=(Qt>ze||Qt<Ft)&&I.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,as,null).clip().discardPath()),O.call(this,M,J),Kt&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}this.path=Qe}else this.lineWidth=Se,O.call(this,M,J),this.lineWidth=ve},O=function(M,J){if((M!=="stroke"||J||!b.call(this))&&(M==="stroke"||J||!g.call(this))){for(var ie,le,ce=[],ve=this.path,Se=0;Se<ve.length;Se++){var ge=ve[Se];switch(ge.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:ge,deltas:[],abs:[]});break;case"lt":var Be=ce.length;if(ve[Se-1]&&!isNaN(ve[Se-1].x)&&(ie=[ge.x-ve[Se-1].x,ge.y-ve[Se-1].y],Be>0)){for(;Be>=0;Be--)if(ce[Be-1].close!==!0&&ce[Be-1].begin!==!0){ce[Be-1].deltas.push(ie),ce[Be-1].abs.push(ge);break}}break;case"bct":ie=[ge.x1-ve[Se-1].x,ge.y1-ve[Se-1].y,ge.x2-ve[Se-1].x,ge.y2-ve[Se-1].y,ge.x-ve[Se-1].x,ge.y-ve[Se-1].y],ce[ce.length-1].deltas.push(ie);break;case"qct":var Fe=ve[Se-1].x+2/3*(ge.x1-ve[Se-1].x),Qe=ve[Se-1].y+2/3*(ge.y1-ve[Se-1].y),Ze=ge.x+2/3*(ge.x1-ge.x),Pe=ge.y+2/3*(ge.y1-ge.y),me=ge.x,nt=ge.y;ie=[Fe-ve[Se-1].x,Qe-ve[Se-1].y,Ze-ve[Se-1].x,Pe-ve[Se-1].y,me-ve[Se-1].x,nt-ve[Se-1].y],ce[ce.length-1].deltas.push(ie);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(ge)}}le=J?null:M==="stroke"?"stroke":"fill";for(var It=!1,ut=0;ut<ce.length;ut++)if(ce[ut].arc)for(var ze=ce[ut].abs,Ft=0;Ft<ze.length;Ft++){var Qt=ze[Ft];Qt.type==="arc"?U.call(this,Qt.x,Qt.y,Qt.radius,Qt.startAngle,Qt.endAngle,Qt.counterclockwise,void 0,J,!It):G.call(this,Qt.x,Qt.y),It=!0}else if(ce[ut].close===!0)this.pdf.internal.out("h"),It=!1;else if(ce[ut].begin!==!0){var Ct=ce[ut].start.x,Jt=ce[ut].start.y;ae.call(this,ce[ut].deltas,Ct,Jt),It=!0}le&&R.call(this,le),J&&$.call(this)}},H=function(M){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-ie;case"top":return M+J-ie;case"hanging":return M+J-2*ie;case"middle":return M+J/2-ie;default:return M}},Q=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(J,ie){this.colorStops.push([J,ie])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(M,J,ie,le,ce,ve,Se,ge,Be){for(var Fe=oe.call(this,ie,le,ce,ve),Qe=0;Qe<Fe.length;Qe++){var Ze=Fe[Qe];Qe===0&&(Be?P.call(this,Ze.x1+M,Ze.y1+J):G.call(this,Ze.x1+M,Ze.y1+J)),ue.call(this,M,J,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ge?$.call(this):R.call(this,Se)},R=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(M,J){this.pdf.internal.out(t(M)+" "+n(J)+" m")},V=function(M){var J;switch(M.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var ie,le,ce,ve=this.pdf.getTextDimensions(M.text),Se=H.call(this,M.y),ge=Q.call(this,Se)-ve.h,Be=this.ctx.transform.applyToPoint(new c(M.x,Se));if(this.autoPaging){var Fe=this.ctx.transform.decompose(),Qe=new u;Qe=(Qe=(Qe=Qe.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale);for(var Ze=this.ctx.transform.applyToRectangle(new h(M.x,Se,ve.w,ve.h)),Pe=Qe.applyToRectangle(new h(M.x,ge,ve.w,ve.h)),me=N.call(this,Pe),nt=[],It=0;It<me.length;It+=1)nt.indexOf(me[It])===-1&&nt.push(me[It]);F(nt);for(var ut=nt[0],ze=nt[nt.length-1],Ft=ut;Ft<ze+1;Ft++){this.pdf.setPage(Ft);var Qt=Ft===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[2],ts=Jt-this.margin[0],as=this.pdf.internal.pageSize.width-this.margin[1],Xe=as-this.margin[3],Vt=Ft===1?0:Ct+(Ft-2)*ts;if(this.ctx.clip_path.length!==0){var Kt=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ie,this.posX+this.margin[3],-1*Vt+Qt),O.call(this,"fill",!0),this.path=Kt}var Mt=E([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Vt+Qt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*M.scale),ce=this.lineWidth,this.lineWidth=ce*M.scale);var mt=this.autoPaging!=="text";if(mt||Mt.y+Mt.h<=Jt){if(mt||Mt.y>=Qt&&Mt.x<=as){var Dt=mt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||as-Mt.x)[0],Ns=E([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Vt+Qt+this.ctx.prevPageLastElemOffset)[0],$t=mt&&(Ft>ut||Ft<ze)&&I.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,ts,null).clip().discardPath()),this.pdf.text(Dt,Ns.x,Ns.y,{angle:M.angle,align:J,renderingMode:M.renderingMode}),$t&&this.pdf.restoreGraphicsState()}}else Mt.y<Jt&&(this.ctx.prevPageLastElemOffset+=Jt-Mt.y);M.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ce)}}else M.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*M.scale),ce=this.lineWidth,this.lineWidth=ce*M.scale),this.pdf.text(M.text,Be.x+this.posX,Be.y+this.posY,{angle:M.angle,align:J,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ce)},G=function(M,J,ie,le){ie=ie||0,le=le||0,this.pdf.internal.out(t(M+ie)+" "+n(J+le)+" l")},ae=function(M,J,ie){return this.pdf.lines(M,J,ie,null,null)},ue=function(M,J,ie,le,ce,ve,Se,ge){this.pdf.internal.out([e(r(ie+M)),e(o(le+J)),e(r(ce+M)),e(o(ve+J)),e(r(Se+M)),e(o(ge+J)),"c"].join(" "))},oe=function(M,J,ie,le){for(var ce=2*Math.PI,ve=Math.PI/2;J>ie;)J-=ce;var Se=Math.abs(ie-J);Se<ce&&le&&(Se=ce-Se);for(var ge=[],Be=le?-1:1,Fe=J;Se>1e-5;){var Qe=Fe+Be*Math.min(Se,ve);ge.push(X.call(this,M,Fe,Qe)),Se-=Math.abs(Qe-Fe),Fe=Qe}return ge},X=function(M,J,ie){var le=(ie-J)/2,ce=M*Math.cos(le),ve=M*Math.sin(le),Se=ce,ge=-ve,Be=Se*Se+ge*ge,Fe=Be+Se*ce+ge*ve,Qe=4/3*(Math.sqrt(2*Be*Fe)-Fe)/(Se*ve-ge*ce),Ze=Se-Qe*ge,Pe=ge+Qe*Se,me=Ze,nt=-Pe,It=le+J,ut=Math.cos(It),ze=Math.sin(It);return{x1:M*Math.cos(J),y1:M*Math.sin(J),x2:Ze*ut-Pe*ze,y2:Ze*ze+Pe*ut,x3:me*ut-nt*ze,y3:me*ze+nt*ut,x4:M*Math.cos(ie),y4:M*Math.sin(ie)}},Y=function(M){return 180*M/Math.PI},re=function(M,J,ie,le,ce,ve){var Se=M+.5*(ie-M),ge=J+.5*(le-J),Be=ce+.5*(ie-ce),Fe=ve+.5*(le-ve),Qe=Math.min(M,ce,Se,Be),Ze=Math.max(M,ce,Se,Be),Pe=Math.min(J,ve,ge,Fe),me=Math.max(J,ve,ge,Fe);return new h(Qe,Pe,Ze-Qe,me-Pe)},pe=function(M,J,ie,le,ce,ve,Se,ge){var Be,Fe,Qe,Ze,Pe,me,nt,It,ut,ze,Ft,Qt,Ct,Jt,ts=ie-M,as=le-J,Xe=ce-ie,Vt=ve-le,Kt=Se-ce,Mt=ge-ve;for(Fe=0;Fe<41;Fe++)ut=(nt=(Qe=M+(Be=Fe/40)*ts)+Be*((Pe=ie+Be*Xe)-Qe))+Be*(Pe+Be*(ce+Be*Kt-Pe)-nt),ze=(It=(Ze=J+Be*as)+Be*((me=le+Be*Vt)-Ze))+Be*(me+Be*(ve+Be*Mt-me)-It),Fe==0?(Ft=ut,Qt=ze,Ct=ut,Jt=ze):(Ft=Math.min(Ft,ut),Qt=Math.min(Qt,ze),Ct=Math.max(Ct,ut),Jt=Math.max(Jt,ze));return new h(Math.round(Ft),Math.round(Qt),Math.round(Ct-Ft),Math.round(Jt-Qt))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,J,ie=(M=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:J}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(Ps.API),(function(s){var e=function(c){var h,u,f,A,m,x,g,b,I,N;for(u=[],f=0,A=(c+=h="\0\0\0\0".slice(c.length%4||4)).length;A>f;f+=4)(m=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(x=(m=((m=((m=((m=(m-(N=m%85))/85)-(I=m%85))/85)-(b=m%85))/85)-(g=m%85))/85)%85,u.push(x+33,g+33,b+33,I+33,N+33)):u.push(122);return(function(C,E){for(var F=E;F>0;F--)C.pop()})(u,h.length),String.fromCharCode.apply(String,u)+"~>"},t=function(c){var h,u,f,A,m,x=String,g="length",b=255,I="charCodeAt",N="slice",C="replace";for(c[N](-2),c=c[N](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),f=[],A=0,m=(c+=h="uuuuu"[N](c[g]%5||5))[g];m>A;A+=5)u=52200625*(c[I](A)-33)+614125*(c[I](A+1)-33)+7225*(c[I](A+2)-33)+85*(c[I](A+3)-33)+(c[I](A+4)-33),f.push(b&u>>24,b&u>>16,b&u>>8,b&u);return(function(E,F){for(var L=F;L>0;L--)E.pop()})(f,h[g]),x.fromCharCode.apply(x,f)},n=function(c){return c.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(c){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),h.test(c)===!1)return"";for(var u="",f=0;f<c.length;f+=2)u+=String.fromCharCode("0x"+(c[f]+c[f+1]));return u},o=function(c){for(var h=new Uint8Array(c.length),u=c.length;u--;)h[u]=c.charCodeAt(u);return(h=wb(h)).reduce(function(f,A){return f+String.fromCharCode(A)},"")};s.processDataByFilters=function(c,h){var u=0,f=c||"",A=[];for(typeof(h=h||[])=="string"&&(h=[h]),u=0;u<h.length;u+=1)switch(h[u]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=n(f),A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[u]+'" is not implemented')}return{data:f,reverseChain:A.reverse().join(" ")}}})(Ps.API),(function(s){s.loadFile=function(e,t,n){return(function(r,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var h=void 0;try{h=(function(u,f,A){var m=new XMLHttpRequest,x=0,g=function(b){var I=b.length,N=[],C=String.fromCharCode;for(x=0;x<I;x+=1)N.push(C(255&b.charCodeAt(x)));return N.join("")};if(m.open("GET",u,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?A(g(this.responseText)):A(void 0)}),m.send(null),f&&m.status===200)return g(m.responseText)})(r,o,c)}catch{}return h})(e,t,n)},s.loadImageFile=s.loadFile})(Ps.API),(function(s){function e(){return(dn.html2canvas?Promise.resolve(dn.html2canvas):t1(()=>import("./html2canvas.esm-QH1iLAAe.js"),[],import.meta.url)).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function t(){return(dn.DOMPurify?Promise.resolve(dn.DOMPurify):t1(()=>import("./purify.es-B9ZVCkUG.js"),[],import.meta.url)).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var n=function(h){var u=$r(h);return u==="undefined"?"undefined":u==="string"||h instanceof String?"string":u==="number"||h instanceof Number?"number":u==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":u==="object"?"object":"unknown"},r=function(h,u){var f=document.createElement(h);for(var A in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[A]=u.style[A];return f},o=function h(u,f){for(var A=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)f!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||A.appendChild(h(m,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(A.width=u.width,A.height=u.height,A.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(A.value=u.value),A.addEventListener("load",function(){A.scrollTop=u.scrollTop,A.scrollLeft=u.scrollLeft},!0)),A},c=function h(u){var f=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),A=h.convert(Promise.resolve(),f);return(A=A.setProgress(1,h,1,[h])).set(u)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(h,u){return h.__proto__=u||c.prototype,h},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(h,u){return this.then(function(){switch(u=u||(function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(h),u){case"string":return this.then(t).then(function(f){return this.set({src:r("div",{innerHTML:h,dompurify:f})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},c.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(u){var f=this.opt.jsPDF,A=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=A,A)for(var g=0;g<A.length;++g){var b=A[g],I=b.src.find(function(N){return N.format==="truetype"});I&&f.addFont(I.url,b.ref.name,b.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,f.context2d.save(!0),u(this.prop.container,x)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(h,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(h,u):this.outputPdf(h,u)},c.prototype.outputPdf=function(h,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,u)})},c.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},c.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(h){if(n(h)!=="object")return this;var u=Object.keys(h||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=h[f]};switch(f){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[f]=h[f]}}},this);return this.then(function(){return this.thenList(u)})},c.prototype.get=function(h,u){return this.then(function(){var f=h in c.template.prop?this.prop[h]:this.opt[h];return u?u(f):f})},c.prototype.setMargin=function(h){return this.then(function(){switch(n(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},c.prototype.setPageSize=function(h){function u(f,A){return Math.floor(f*A/72*96)}return this.then(function(){(h=h||Ps.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:u(h.inner.width,h.k),height:u(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},c.prototype.setProgress=function(h,u,f,A){return h!=null&&(this.progress.val=h),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(h,u,f,A){return this.setProgress(h?this.progress.val+h:null,u||null,f?this.progress.n+f:null,A?this.progress.stack.concat(A):null)},c.prototype.then=function(h,u){var f=this;return this.thenCore(h,u,function(A,m){return f.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(x){return f.updateProgress(null,A),x}).then(A,m).then(function(x){return f.updateProgress(1),x})})},c.prototype.thenCore=function(h,u,f){f=f||Promise.prototype.then;var A=this;h&&(h=h.bind(A)),u&&(u=u.bind(A));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?A:c.convert(Object.assign({},A),Promise.prototype),x=f.call(m,h,u);return c.convert(x,A.__proto__)},c.prototype.thenExternal=function(h,u){return Promise.prototype.then.call(this,h,u)},c.prototype.thenList=function(h){var u=this;return h.forEach(function(f){u=u.thenCore(f)}),u},c.prototype.catch=function(h){h&&(h=h.bind(this));var u=Promise.prototype.catch.call(this,h);return c.convert(u,this)},c.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},c.prototype.error=function(h){return this.then(function(){throw new Error(h)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Ps.getPageSize=function(h,u,f){if($r(h)==="object"){var A=h;h=A.orientation,u=A.unit||u,f=A.format||f}u=u||"mm",f=f||"a4",h=(""+(h||"P")).toLowerCase();var m,x=(""+f).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+u}var b,I=0,N=0;if(g.hasOwnProperty(x))I=g[x][1]/m,N=g[x][0]/m;else try{I=f[1],N=f[0]}catch{throw new Error("Invalid format: "+f)}if(h==="p"||h==="portrait")h="p",N>I&&(b=N,N=I,I=b);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",I>N&&(b=N,N=I,I=b)}return{width:N,height:I,unit:u,k:m,orientation:h}},s.html=function(h,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(v1):null;var f=new c(u);return u.worker?f:f.from(h).doCallback()}})(Ps.API),Ps.API.addJS=function(s){return rC=s,this.internal.events.subscribe("postPutResources",function(){tx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(tx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),nC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){tx!==void 0&&nC!==void 0&&this.internal.out("/Names <</JavaScript "+tx+" 0 R>>")}),this},(function(s){var e;s.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),o=0;o<r.length;o++){var c=r[o],h=n.exec(c);if(h!=null){var u=h[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,A=[];for(o=0;o<f;o++){var m=t.internal.newObject();A.push(m);var x=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<A.length;o++)t.internal.write("(page_"+(o+1)+")"+A[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),s.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,r,o){var c={title:r,options:o,children:[]};return n==null&&(n=this.root),n.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var c=n.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var h=this.count=this.count_r({count:0},c);if(h>0&&this.line("/Count "+h),c.options&&c.options.pageNumber){var u=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var f=0;f<n.children.length;f++)this.renderItems(n.children[f])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,r){for(var o=0;o<r.children.length;o++)n.count++,this.count_r(n,r.children[o]);return n.count}}])})(Ps.API),(function(s){var e=[192,193,194,195,196,197,198,199];s.processJPEG=function(t,n,r,o,c,h){var u,f=this.decode.DCT_DECODE,A=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,u=(function(m){for(var x,g=256*m.charCodeAt(4)+m.charCodeAt(5),b=m.length,I={width:0,height:0,numcomponents:1},N=4;N<b;N+=2){if(N+=g,e.indexOf(m.charCodeAt(N+1))!==-1){x=256*m.charCodeAt(N+5)+m.charCodeAt(N+6),I={width:256*m.charCodeAt(N+7)+m.charCodeAt(N+8),height:x,numcomponents:m.charCodeAt(N+9)};break}g=256*m.charCodeAt(N+2)+m.charCodeAt(N+3)}return I})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),u.numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}A={data:t,width:u.width,height:u.height,colorSpace:h,bitsPerComponent:8,filter:f,index:n,alias:r}}return A}})(Ps.API),Ps.API.processPNG=function(s,e,t,n){if(this.__addimage__.isArrayBuffer(s)&&(s=new Uint8Array(s)),this.__addimage__.isArrayBufferView(s)){var r,o=O9(s,{checkCrc:!0}),c=o.width,h=o.height,u=o.channels,f=o.palette,A=o.depth;r=f&&u===1?(function(U){for(var R=U.width,$=U.height,P=U.data,V=U.palette,G=U.depth,ae=!1,ue=[],oe=[],X=void 0,Y=!1,re=0,pe=0;pe<V.length;pe++){var ee=lS(V[pe],4),M=ee[0],J=ee[1],ie=ee[2],le=ee[3];ue.push(M,J,ie),le!=null&&(le===0?(re++,oe.length<1&&oe.push(pe)):le<255&&(Y=!0))}if(Y||re>1){ae=!0,oe=void 0;var ce=R*$;X=new Uint8Array(ce);for(var ve=new DataView(P.buffer),Se=0;Se<ce;Se++){var ge=b1(ve,Se,G),Be=lS(V[ge],4)[3];X[Se]=Be}}else re===0&&(oe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ae?8:void 0,colorBytes:P,alphaBytes:X,needSMask:ae,palette:ue,mask:oe}})(o):u===2||u===4?(function(U){for(var R=U.data,$=U.width,P=U.height,V=U.channels,G=U.depth,ae=V===2?"DeviceGray":"DeviceRGB",ue=V-1,oe=$*P,X=ue,Y=oe*X,re=1*oe,pe=Math.ceil(Y*G/8),ee=Math.ceil(re*G/8),M=new Uint8Array(pe),J=new Uint8Array(ee),ie=new DataView(R.buffer),le=new DataView(M.buffer),ce=new DataView(J.buffer),ve=!1,Se=0;Se<oe;Se++){for(var ge=Se*V,Be=0;Be<X;Be++)hC(le,b1(ie,ge+Be,G),Se*X+Be,G);var Fe=b1(ie,ge+X,G);Fe<(1<<G)-1&&(ve=!0),hC(ce,Fe,1*Se,G)}return{colorSpace:ae,colorsPerPixel:ue,sMaskBitsPerComponent:ve?G:void 0,colorBytes:M,alphaBytes:J,needSMask:ve}})(o):(function(U){var R=U.data,$=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:$,colorsPerPixel:$==="DeviceGray"?1:3,colorBytes:R instanceof Uint16Array?(function(P){for(var V=P.length,G=new Uint8Array(2*V),ae=new DataView(G.buffer,G.byteOffset,G.byteLength),ue=0;ue<V;ue++)ae.setUint16(2*ue,P[ue],!1);return G})(R):R,needSMask:!1}})(o);var m,x,g,b=r,I=b.colorSpace,N=b.colorsPerPixel,C=b.sMaskBitsPerComponent,E=b.colorBytes,F=b.alphaBytes,L=b.needSMask,O=b.palette,H=b.mask,Q=null;return n!==Ps.API.image_compression.NONE&&typeof wb=="function"?(Q=(function(U){var R;switch(U){case Ps.API.image_compression.FAST:R=11;break;case Ps.API.image_compression.MEDIUM:R=13;break;case Ps.API.image_compression.SLOW:R=14;break;default:R=12}return R})(n),m=this.decode.FLATE_DECODE,x="/Predictor ".concat(Q," /Colors ").concat(N," /BitsPerComponent ").concat(A," /Columns ").concat(c),s=lC(E,Math.ceil(c*N*A/8),N,A,n),L&&(g=lC(F,Math.ceil(c*C/8),1,C,n))):(m=void 0,x=void 0,s=E,L&&(g=F)),(this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s))&&(s=this.__addimage__.arrayBufferToBinaryString(s)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:s,index:e,filter:m,decodeParameters:x,transparency:H,palette:O,sMask:g,predictor:Q,width:c,height:h,bitsPerComponent:A,sMaskBitsPerComponent:C,colorSpace:I}}},(function(s){s.processGIF89A=function(e,t,n,r){var o=new iV(e),c=o.width,h=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var f={data:u,width:c,height:h},A=new w1(100).encode(f,100);return s.processJPEG.call(this,A,t,n,r)},s.processGIF87A=s.processGIF89A})(Ps.API),tc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var e=0;e<s;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:n,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tc.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[s]()}catch(t){ca.log("bit decode error:"+t)}},tc.prototype.bit1=function(){var s,e=Math.ceil(this.width/8),t=e%4;for(s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*r*4,h=0;h<8&&8*r+h<this.width;h++){var u=this.palette[o>>7-h&1];this.data[c+4*h]=u.blue,this.data[c+4*h+1]=u.green,this.data[c+4*h+2]=u.red,this.data[c+4*h+3]=255}t!==0&&(this.pos+=4-t)}},tc.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),e=s%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<s;r++){var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*r*4,h=o>>4,u=15&o,f=this.palette[h];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*r+1>=this.width)break;f=this.palette[u],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},tc.prototype.bit8=function(){for(var s=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;if(r<this.palette.length){var c=this.palette[r];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}s!==0&&(this.pos+=4-s)}},tc.prototype.bit15=function(){for(var s=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,h=(o>>5&e)/e*255|0,u=(o>>10&e)/e*255|0,f=o>>15?255:0,A=n*this.width*4+4*r;this.data[A]=u,this.data[A+1]=h,this.data[A+2]=c,this.data[A+3]=f}this.pos+=s}},tc.prototype.bit16=function(){for(var s=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(c&e)/e*255|0,u=(c>>5&t)/t*255|0,f=(c>>11)/e*255|0,A=r*this.width*4+4*o;this.data[A]=f,this.data[A+1]=u,this.data[A+2]=h,this.data[A+3]=255}this.pos+=s}},tc.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var e=this.bottom_up?s:this.height-1-s,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=r,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},tc.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var e=this.bottom_up?s:this.height-1-s,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*t;this.data[h]=o,this.data[h+1]=r,this.data[h+2]=n,this.data[h+3]=c}},tc.prototype.getData=function(){return this.data},(function(s){s.processBMP=function(e,t,n,r){var o=new tc(e,!1),c=o.width,h=o.height,u={data:o.getData(),width:c,height:h},f=new w1(100).encode(u,100);return s.processJPEG.call(this,f,t,n,r)}})(Ps.API),mC.prototype.getData=function(){return this.data},(function(s){s.processWEBP=function(e,t,n,r){var o=new mC(e),c=o.width,h=o.height,u={data:o.getData(),width:c,height:h},f=new w1(100).encode(u,100);return s.processJPEG.call(this,f,t,n,r)}})(Ps.API),Ps.API.processRGBA=function(s,e,t){for(var n=s.data,r=n.length,o=new Uint8Array(r/4*3),c=new Uint8Array(r/4),h=0,u=0,f=0;f<r;f+=4){var A=n[f],m=n[f+1],x=n[f+2],g=n[f+3];o[h++]=A,o[h++]=m,o[h++]=x,c[u++]=g}var b=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:b,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Ps.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hf=Ps.API,sx=Hf.getCharWidthsArray=function(s,e){var t,n,r=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),h=e.widths?e.widths:r.metadata.Unicode.widths,u=h.fof?h.fof:1,f=e.kerning?e.kerning:r.metadata.Unicode.kerning,A=f.fof?f.fof:1,m=e.doKerning!==!1,x=0,g=s.length,b=0,I=h[0]||u,N=[];for(t=0;t<g;t++)n=s.charCodeAt(t),typeof r.metadata.widthOfString=="function"?N.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+c*(1e3/o)||0)/1e3):(x=m&&$r(f[n])==="object"&&!isNaN(parseInt(f[n][b],10))?f[n][b]/A:0,N.push((h[n]||I)/u+x)),b=n;return N},aC=Hf.getStringUnitWidth=function(s,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Hf.processArabic&&(s=Hf.processArabic(s)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(s,t,r)/t:sx.apply(this,arguments).reduce(function(o,c){return o+c},0)},iC=function(s,e,t,n){for(var r=[],o=0,c=s.length,h=0;o!==c&&h+e[o]<t;)h+=e[o],o++;r.push(s.slice(0,o));var u=o;for(h=0;o!==c;)h+e[o]>n&&(r.push(s.slice(u,o)),h=0,u=o),h+=e[o],o++;return u!==o&&r.push(s.slice(u,o)),r},oC=function(s,e,t){t||(t={});var n,r,o,c,h,u,f,A=[],m=[A],x=t.textIndent||0,g=0,b=0,I=s.split(" "),N=sx.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?I[0].length+2:t.lineIndent||0){var C=Array(u).join(" "),E=[];I.map(function(L){(L=L.split(/\s*\n/)).length>1?E=E.concat(L.map(function(O,H){return(H&&O.length?`
`:"")+O})):E.push(L[0])}),I=E,u=aC.apply(this,[C,t])}for(o=0,c=I.length;o<c;o++){var F=0;if(n=I[o],u&&n[0]==`
`&&(n=n.substr(1),F=1),x+g+(b=(r=sx.apply(this,[n,t])).reduce(function(L,O){return L+O},0))>e||F){if(b>e){for(h=iC.apply(this,[n,r,e-(x+g),e]),A.push(h.shift()),A=[h.pop()];h.length;)m.push([h.shift()]);b=r.slice(n.length-(A[0]?A[0].length:0)).reduce(function(L,O){return L+O},0)}else A=[n];m.push(A),x=b+u,g=N}else A.push(n),x+=g+b,g=N}return f=u?function(L,O){return(O?C:"")+L.join(" ")}:function(L){return L.join(" ")},m.map(f)},Hf.splitTextToSize=function(s,e,t){var n,r=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(A){if(A.widths&&A.kerning)return{widths:A.widths,kerning:A.kerning};var m=this.internal.getFont(A.fontName,A.fontStyle),x="Unicode";return m.metadata[x]?{widths:m.metadata[x].widths||{0:1},kerning:m.metadata[x].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(s)?s:String(s).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/r;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=t.lineIndent;var h,u,f=[];for(h=0,u=n.length;h<u;h++)f=f.concat(oC.apply(this,[n[h],c,o]));return f},(function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},r={},o=0;o<16;o++)n[t[o]]=e[o],r[e[o]]=t[o];var c=function(x){return"0x"+parseInt(x,10).toString(16)},h=s.__fontmetrics__.compress=function(x){var g,b,I,N,C=["{"];for(var E in x){if(g=x[E],isNaN(parseInt(E,10))?b="'"+E+"'":(E=parseInt(E,10),b=(b=c(E).slice(2)).slice(0,-1)+r[b.slice(-1)]),typeof g=="number")g<0?(I=c(g).slice(3),N="-"):(I=c(g).slice(2),N=""),I=N+I.slice(0,-1)+r[I.slice(-1)];else{if($r(g)!=="object")throw new Error("Don't know what to do with value type "+$r(g)+".");I=h(g)}C.push(b+I)}return C.push("}"),C.join("")},u=s.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,b,I,N,C={},E=1,F=C,L=[],O="",H="",Q=x.length-1,U=1;U<Q;U+=1)(N=x[U])=="'"?g?(I=g.join(""),g=void 0):g=[]:g?g.push(N):N=="{"?(L.push([F,I]),F={},I=void 0):N=="}"?((b=L.pop())[0][b[1]]=F,I=void 0,F=b[0]):N=="-"?E=-1:I===void 0?n.hasOwnProperty(N)?(O+=n[N],I=parseInt(O,16)*E,E=1,O=""):O+=N:n.hasOwnProperty(N)?(H+=n[N],F[I]=parseInt(H,16)*E,E=1,I=void 0,H=""):H+=N;return C},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},m={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(x){var g=x.font,b=m.Unicode[g.postScriptName];b&&(g.metadata.Unicode={},g.metadata.Unicode.widths=b.widths,g.metadata.Unicode.kerning=b.kerning);var I=A.Unicode[g.postScriptName];I&&(g.metadata.Unicode.encoding=I,g.encoding=I.codePages[0])}])})(Ps.API),(function(s){var e=function(t){for(var n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r};s.API.events.push(["addFont",function(t){var n=void 0,r=t.font,o=t.instance;if(!r.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=o.existsFileInVFS(r.postScriptName)===!1?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(c,h){h=/^\x00\x01\x00\x00/.test(h)?e(h):e(Bx(h)),c.metadata=s.API.TTFFont.open(h),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(r,n)}}])})(Ps),Ps.API.addSvgAsImage=function(s,e,t,n,r,o,c,h){if(isNaN(e)||isNaN(t))throw ca.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(r))throw ca.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=r;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(dn.canvg?Promise.resolve(dn.canvg):t1(()=>import("./index.es-C1iTyaGL.js"),[],import.meta.url)).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(f,s,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(A)}).then(function(){m.addImage(u.toDataURL("image/jpeg",1),e,t,n,r,c,h)})},Ps.API.putTotalPages=function(s){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(s,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,t);return this},Ps.API.viewerPreferences=function(s,e){var t;s=s||{},e=e||!1;var n,r,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(c),u=[],f=0,A=0,m=0;function x(b,I){var N,C=!1;for(N=0;N<b.length;N+=1)b[N]===I&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,s==="reset"||e===!0){var g=h.length;for(m=0;m<g;m+=1)t[h[m]].value=t[h[m]].defaultValue,t[h[m]].explicitSet=!1}if($r(s)==="object"){for(r in s)if(o=s[r],x(h,r)&&o!==void 0){if(t[r].type==="boolean"&&typeof o=="boolean")t[r].value=o;else if(t[r].type==="name"&&x(t[r].valueSet,o))t[r].value=o;else if(t[r].type==="integer"&&Number.isInteger(o))t[r].value=o;else if(t[r].type==="array"){for(f=0;f<o.length;f+=1)if(n=!0,o[f].length===1&&typeof o[f][0]=="number")u.push(String(o[f]-1));else if(o[f].length>1){for(A=0;A<o[f].length;A+=1)typeof o[f][A]!="number"&&(n=!1);n===!0&&u.push([o[f][0]-1,o[f][1]-1].join(" "))}t[r].value="["+u.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,I=[];for(b in t)t[b].explicitSet===!0&&(t[b].type==="name"?I.push("/"+b+" /"+t[b].value):I.push("/"+b+" "+t[b].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(s){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+c.length+h.length+r.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(r+o+c+h+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ps.API),(function(s){var e=s.API,t=e.pdfEscape16=function(o,c){for(var h,u=c.metadata.Unicode.widths,f=["","0","00","000","0000"],A=[""],m=0,x=o.length;m<x;++m){if(h=c.metadata.characterToGlyph(o.charCodeAt(m)),c.metadata.glyIdsUsed.push(h),c.metadata.toUnicode[h]=o.charCodeAt(m),u.indexOf(h)==-1&&(u.push(h),u.push([parseInt(c.metadata.widthOfGlyph(h),10)])),h=="0")return A.join("");h=h.toString(16),A.push(f[4-h.length],h)}return A.join("")},n=function(o){var c,h,u,f,A,m,x;for(A=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],m=0,x=(h=Object.keys(o).sort(function(g,b){return g-b})).length;m<x;m++)c=h[m],u.length>=100&&(A+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(f=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),u.push("<"+c+"><"+f+">"));return u.length&&(A+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),A+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var h=c.font,u=c.out,f=c.newObject,A=c.putStream;if(h.metadata instanceof s.API.TTFFont&&h.encoding==="Identity-H"){for(var m=h.metadata.Unicode.widths,x=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),g="",b=0;b<x.length;b++)g+=String.fromCharCode(x[b]);var I=f();A({data:g,addLength1:!0,objectId:I}),u("endobj");var N=f();A({data:n(h.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var C=f();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Yf(h.fontName)),u("/FontFile2 "+I+" 0 R"),u("/FontBBox "+s.API.PDFObject.convert(h.metadata.bbox)),u("/Flags "+h.metadata.flags),u("/StemV "+h.metadata.stemV),u("/ItalicAngle "+h.metadata.italicAngle),u("/Ascent "+h.metadata.ascender),u("/Descent "+h.metadata.decender),u("/CapHeight "+h.metadata.capHeight),u(">>"),u("endobj");var E=f();u("<<"),u("/Type /Font"),u("/BaseFont /"+Yf(h.fontName)),u("/FontDescriptor "+C+" 0 R"),u("/W "+s.API.PDFObject.convert(m)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+h.encoding+")"),u(">>"),u(">>"),u("endobj"),h.objectNumber=f(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+N+" 0 R"),u("/BaseFont /"+Yf(h.fontName)),u("/Encoding /"+h.encoding),u("/DescendantFonts ["+E+" 0 R]"),u(">>"),u("endobj"),h.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var h=c.font,u=c.out,f=c.newObject,A=c.putStream;if(h.metadata instanceof s.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var m=h.metadata.rawData,x="",g=0;g<m.length;g++)x+=String.fromCharCode(m[g]);var b=f();A({data:x,addLength1:!0,objectId:b}),u("endobj");var I=f();A({data:n(h.metadata.toUnicode),addLength1:!0,objectId:I}),u("endobj");var N=f();u("<<"),u("/Descent "+h.metadata.decender),u("/CapHeight "+h.metadata.capHeight),u("/StemV "+h.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+b+" 0 R"),u("/Flags 96"),u("/FontBBox "+s.API.PDFObject.convert(h.metadata.bbox)),u("/FontName /"+Yf(h.fontName)),u("/ItalicAngle "+h.metadata.italicAngle),u("/Ascent "+h.metadata.ascender),u(">>"),u("endobj"),h.objectNumber=f();for(var C=0;C<h.metadata.hmtx.widths.length;C++)h.metadata.hmtx.widths[C]=parseInt(h.metadata.hmtx.widths[C]*(1e3/h.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+Yf(h.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),u("endobj"),h.isAlreadyPutted=!0}})(o)}]);var r=function(o){var c,h=o.text||"",u=o.x,f=o.y,A=o.options||{},m=o.mutex||{},x=m.pdfEscape,g=m.activeFontKey,b=m.fonts,I=g,N="",C=0,E="",F=b[I].encoding;if(b[I].encoding!=="Identity-H")return{text:h,x:u,y:f,options:A,mutex:m};for(E=h,I=g,Array.isArray(h)&&(E=h[0]),C=0;C<E.length;C+=1)b[I].metadata.hasOwnProperty("cmap")&&(c=b[I].metadata.cmap.unicode.codeMap[E[C].charCodeAt(0)]),c||E[C].charCodeAt(0)<256&&b[I].metadata.hasOwnProperty("Unicode")?N+=E[C]:N+="";var L="";return parseInt(I.slice(1))<14||F==="WinAnsiEncoding"?L=x(N,I).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(L=t(N,b[I])),m.isHex=!0,{text:L,x:u,y:f,options:A,mutex:m}};e.events.push(["postProcessText",function(o){var c=o.text||"",h=[],u={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?h.push([r(Object.assign({},u,{text:c[f][0]})).text,c[f][1],c[f][2]]):h.push(r(Object.assign({},u,{text:c[f]})).text);o.text=h}else o.text=r(Object.assign({},u,{text:c})).text}])})(Ps),(function(s){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},s.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},s.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ps.API),(function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(n){var r,o,c,h,u,f,A,m=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,F=0;this.__bidiEngine__={};var L=function(P){var V=P.charCodeAt(),G=V>>8,ae=I[G];return ae!==void 0?m[256*ae+(255&V)]:G===252||G===253?"AL":C.test(G)?"L":G===8?"R":"N"},O=function(P){for(var V,G=0;G<P.length;G++){if((V=L(P.charAt(G)))==="L")return!1;if(V==="R")return!0}return!1},H=function(P,V,G,ae){var ue,oe,X,Y,re=V[ae];switch(re){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(re="AN");break;case"AL":E=!0,re="R";break;case"WS":case"BN":re="N";break;case"CS":ae<1||ae+1>=V.length||(ue=G[ae-1])!=="EN"&&ue!=="AN"||(oe=V[ae+1])!=="EN"&&oe!=="AN"?re="N":E&&(oe="AN"),re=oe===ue?oe:"N";break;case"ES":re=(ue=ae>0?G[ae-1]:"B")==="EN"&&ae+1<V.length&&V[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&G[ae-1]==="EN"){re="EN";break}if(E){re="N";break}for(X=ae+1,Y=V.length;X<Y&&V[X]==="ET";)X++;re=X<Y&&V[X]==="EN"?"EN":"N";break;case"NSM":if(c&&!h){for(Y=V.length,X=ae+1;X<Y&&V[X]==="NSM";)X++;if(X<Y){var pe=P[ae],ee=pe>=1425&&pe<=2303||pe===64286;if(ue=V[X],ee&&(ue==="R"||ue==="AL")){re="R";break}}}re=ae<1||(ue=V[ae-1])==="B"?"N":G[ae-1];break;case"B":E=!1,r=!0,re=F;break;case"S":o=!0,re="N"}return re},Q=function(P,V,G){var ae=P.split("");return G&&U(ae,G,{hiLevel:F}),ae.reverse(),V&&V.reverse(),ae.join("")},U=function(P,V,G){var ae,ue,oe,X,Y,re=-1,pe=P.length,ee=0,M=[],J=F?g:x,ie=[];for(E=!1,r=!1,o=!1,ue=0;ue<pe;ue++)ie[ue]=L(P[ue]);for(oe=0;oe<pe;oe++){if(Y=ee,M[oe]=H(P,ie,M,oe),ae=240&(ee=J[Y][b[M[oe]]]),ee&=15,V[oe]=X=J[ee][5],ae>0)if(ae===16){for(ue=re;ue<oe;ue++)V[ue]=1;re=-1}else re=-1;if(J[ee][6])re===-1&&(re=oe);else if(re>-1){for(ue=re;ue<oe;ue++)V[ue]=X;re=-1}ie[oe]==="B"&&(V[oe]=0),G.hiLevel|=X}o&&(function(le,ce,ve){for(var Se=0;Se<ve;Se++)if(le[Se]==="S"){ce[Se]=F;for(var ge=Se-1;ge>=0&&le[ge]==="WS";ge--)ce[ge]=F}})(ie,V,pe)},R=function(P,V,G,ae,ue){if(!(ue.hiLevel<P)){if(P===1&&F===1&&!r)return V.reverse(),void(G&&G.reverse());for(var oe,X,Y,re,pe=V.length,ee=0;ee<pe;){if(ae[ee]>=P){for(Y=ee+1;Y<pe&&ae[Y]>=P;)Y++;for(re=ee,X=Y-1;re<X;re++,X--)oe=V[re],V[re]=V[X],V[X]=oe,G&&(oe=G[re],G[re]=G[X],G[X]=oe);ee=Y}ee++}}},$=function(P,V,G){var ae=P.split(""),ue={hiLevel:F};return G||(G=[]),U(ae,G,ue),(function(oe,X,Y){if(Y.hiLevel!==0&&A)for(var re,pe=0;pe<oe.length;pe++)X[pe]===1&&(re=N.indexOf(oe[pe]))>=0&&(oe[pe]=N[re+1])})(ae,G,ue),R(2,ae,V,G,ue),R(1,ae,V,G,ue),ae.join("")};return this.__bidiEngine__.doBidiReorder=function(P,V,G){if((function(ue,oe){if(oe)for(var X=0;X<ue.length;X++)oe[X]=X;h===void 0&&(h=O(ue)),f===void 0&&(f=O(ue))})(P,V),c||!u||f)if(c&&u&&h^f)F=h?1:0,P=Q(P,V,G);else if(!c&&u&&f)F=h?1:0,P=$(P,V,G),P=Q(P,V);else if(!c||h||u||f){if(c&&!u&&h^f)P=Q(P,V),h?(F=0,P=$(P,V,G)):(F=1,P=$(P,V,G),P=Q(P,V));else if(c&&h&&!u&&f)F=1,P=$(P,V,G),P=Q(P,V);else if(!c&&!u&&h^f){var ae=A;h?(F=1,P=$(P,V,G),F=0,A=!1,P=$(P,V,G),A=ae):(F=0,P=$(P,V,G),P=Q(P,V),F=1,A=!1,P=$(P,V,G),A=ae,P=Q(P,V))}}else F=0,P=$(P,V,G);else F=h?1:0,P=$(P,V,G);return P},this.__bidiEngine__.setOptions=function(P){P&&(c=P.isInputVisual,u=P.isOutputVisual,h=P.isInputRtl,f=P.isOutputRtl,A=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(n){var r=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(r)==="[object Array]"){var h=0;for(c=[],h=0;h<r.length;h+=1)Object.prototype.toString.call(r[h])==="[object Array]"?c.push([t.doBidiReorder(r[h][0]),r[h][1],r[h][2]]):c.push([t.doBidiReorder(r[h])]);n.text=c}else n.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])})(Ps),Ps.API.TTFFont=(function(){function s(e){var t;if(this.rawData=e,t=this.contents=new Wd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new bV(this),this.registerTTF()}return s.open=function(e){return new s(e)},s.prototype.parse=function(){return this.directory=new oV(this.contents),this.head=new AV(this),this.name=new fV(this),this.cmap=new UI(this),this.toUnicode={},this.hhea=new cV(this),this.maxp=new mV(this),this.hmtx=new pV(this),this.post=new dV(this),this.os2=new uV(this),this.loca=new yV(this),this.glyf=new gV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var e,t,n,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,h,u,f;for(f=[],c=0,h=(u=this.bbox).length;c<h;c++)e=u[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},s.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},s.prototype.widthOfString=function(e,t,n){var r,o,c,h;for(c=0,o=0,h=(e=""+e).length;0<=h?o<h:o>h;o=0<=h?++o:--o)r=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return c*(t/1e3)},s.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},s})();var fc,Wd=(function(){function s(e){this.data=e??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(e){return this.data[this.pos++]=e},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},s.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},s.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},s.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},s.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},s.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},s.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(e){return this.writeInt16(e)},s.prototype.readLongLong=function(){var e,t,n,r,o,c,h,u;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),c=this.readByte(),h=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^o)+65536*(255^c)+256*(255^h)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*o+65536*c+256*h+u},s.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(e){return this.writeInt32(e)},s.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},s.prototype.write=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(this.writeByte(t));return o},s})(),oV=(function(){var s;function e(t){var n,r,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,o=this.tableCount;0<=o?r<o:r>o;r=0<=o?++r:--r)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,r,o,c,h,u,f,A,m,x,g,b,I;for(I in g=Object.keys(t).length,u=Math.log(2),m=16*Math.floor(Math.log(g)/u),c=Math.floor(m/u),A=16*g-m,(r=new Wd).writeInt(this.scalarType),r.writeShort(g),r.writeShort(m),r.writeShort(c),r.writeShort(A),o=16*g,f=r.pos+o,h=null,b=[],t)for(x=t[I],r.writeString(I),r.writeInt(s(x)),r.writeInt(f),r.writeInt(x.length),b=b.concat(x),I==="head"&&(h=f),f+=x.length;f%4;)b.push(0),f++;return r.write(b),n=2981146554-s(r.data),r.pos=h+8,r.writeUInt32(n),r.data},s=function(t){var n,r,o,c;for(t=DI.call(t);t.length%4;)t.push(0);for(o=new Wd(t),r=0,n=0,c=t.length;n<c;n=n+=4)r+=o.readUInt32();return 4294967295&r},e})(),lV={}.hasOwnProperty,eu=function(s,e){for(var t in e)lV.call(e,t)&&(s[t]=e[t]);function n(){this.constructor=s}return n.prototype=e.prototype,s.prototype=new n,s.__super__=e.prototype,s};fc=(function(){function s(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s})();var AV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="head",s.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},s.prototype.encode=function(e){var t;return(t=new Wd).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},s})(),pC=(function(){function s(e,t){var n,r,o,c,h,u,f,A,m,x,g,b,I,N,C,E,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(g=e.readUInt16(),x=g/2,e.pos+=6,o=(function(){var L,O;for(O=[],u=L=0;0<=x?L<x:L>x;u=0<=x?++L:--L)O.push(e.readUInt16());return O})(),e.pos+=2,I=(function(){var L,O;for(O=[],u=L=0;0<=x?L<x:L>x;u=0<=x?++L:--L)O.push(e.readUInt16());return O})(),f=(function(){var L,O;for(O=[],u=L=0;0<=x?L<x:L>x;u=0<=x?++L:--L)O.push(e.readUInt16());return O})(),A=(function(){var L,O;for(O=[],u=L=0;0<=x?L<x:L>x;u=0<=x?++L:--L)O.push(e.readUInt16());return O})(),r=(this.length-e.pos+this.offset)/2,h=(function(){var L,O;for(O=[],u=L=0;0<=r?L<r:L>r;u=0<=r?++L:--L)O.push(e.readUInt16());return O})(),u=C=0,F=o.length;C<F;u=++C)for(N=o[u],n=E=b=I[u];b<=N?E<=N:E>=N;n=b<=N?++E:--E)A[u]===0?c=n+f[u]:(c=h[A[u]/2+(n-b)-(x-u)]||0)!==0&&(c+=f[u]),this.codeMap[n]=65535&c}e.pos=m}return s.encode=function(e,t){var n,r,o,c,h,u,f,A,m,x,g,b,I,N,C,E,F,L,O,H,Q,U,R,$,P,V,G,ae,ue,oe,X,Y,re,pe,ee,M,J,ie,le,ce,ve,Se,ge,Be,Fe,Qe;switch(ae=new Wd,c=Object.keys(e).sort(function(Ze,Pe){return Ze-Pe}),t){case"macroman":for(I=0,N=(function(){var Ze=[];for(b=0;b<256;++b)Ze.push(0);return Ze})(),E={0:0},o={},ue=0,re=c.length;ue<re;ue++)E[ge=e[r=c[ue]]]==null&&(E[ge]=++I),o[r]={old:e[r],new:E[e[r]]},N[r]=E[e[r]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(N),{charMap:o,subtable:ae.data,maxGlyphID:I+1};case"unicode":for(V=[],m=[],F=0,E={},n={},C=f=null,oe=0,pe=c.length;oe<pe;oe++)E[O=e[r=c[oe]]]==null&&(E[O]=++F),n[r]={old:O,new:E[O]},h=E[O]-r,C!=null&&h===f||(C&&m.push(C),V.push(r),f=h),C=r;for(C&&m.push(C),m.push(65535),V.push(65535),$=2*(R=V.length),U=2*Math.pow(Math.log(R)/Math.LN2,2),x=Math.log(U/2)/Math.LN2,Q=2*R-U,u=[],H=[],g=[],b=X=0,ee=V.length;X<ee;b=++X){if(P=V[b],A=m[b],P===65535){u.push(0),H.push(0);break}if(P-(G=n[P].new)>=32768)for(u.push(0),H.push(2*(g.length+R-b)),r=Y=P;P<=A?Y<=A:Y>=A;r=P<=A?++Y:--Y)g.push(n[r].new);else u.push(G-P),H.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*R+2*g.length),ae.writeUInt16(0),ae.writeUInt16($),ae.writeUInt16(U),ae.writeUInt16(x),ae.writeUInt16(Q),ve=0,M=m.length;ve<M;ve++)r=m[ve],ae.writeUInt16(r);for(ae.writeUInt16(0),Se=0,J=V.length;Se<J;Se++)r=V[Se],ae.writeUInt16(r);for(Be=0,ie=u.length;Be<ie;Be++)h=u[Be],ae.writeUInt16(h);for(Fe=0,le=H.length;Fe<le;Fe++)L=H[Fe],ae.writeUInt16(L);for(Qe=0,ce=g.length;Qe<ce;Qe++)I=g[Qe],ae.writeUInt16(I);return{charMap:n,subtable:ae.data,maxGlyphID:F+1}}},s})(),UI=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="cmap",s.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new pC(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},s.encode=function(e,t){var n,r;return t==null&&(t="macroman"),n=pC.encode(e,t),(r=new Wd).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},s})(),cV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="hhea",s.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},s})(),uV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="OS/2",s.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},s})(),dV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="post",s.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var c,h,u;for(u=[],o=c=0,h=this.file.maxp.numGlyphs;0<=h?c<h:c>h;o=0<=h?++c:--c)u.push(e.readUInt32());return u}).call(this)}},s})(),hV=function(s,e){this.raw=s,this.length=s.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},fV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="name",s.prototype.parse=function(e){var t,n,r,o,c,h,u,f,A,m,x;for(e.pos=this.offset,e.readShort(),t=e.readShort(),h=e.readShort(),n=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+h+e.readShort()});for(u={},o=A=0,m=n.length;A<m;o=++A)r=n[o],e.pos=r.offset,f=e.readString(r.length),c=new hV(f,r),u[x=r.nameID]==null&&(u[x]=[]),u[r.nameID].push(c);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},s})(),mV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="maxp",s.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},s})(),pV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="hmtx",s.prototype.parse=function(e){var t,n,r,o,c,h,u;for(e.pos=this.offset,this.metrics=[],t=0,h=this.file.hhea.numberOfMetrics;0<=h?t<h:t>h;t=0<=h?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,A;for(A=[],t=f=0;0<=r?f<r:f>r;t=0<=r?++f:--f)A.push(e.readInt16());return A})(),this.widths=(function(){var f,A,m,x;for(x=[],f=0,A=(m=this.metrics).length;f<A;f++)o=m[f],x.push(o.advance);return x}).call(this),n=this.widths[this.widths.length-1],u=[],t=c=0;0<=r?c<r:c>r;t=0<=r?++c:--c)u.push(this.widths.push(n));return u},s.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},s})(),DI=[].slice,gV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(e){var t,n,r,o,c,h,u,f,A,m;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,n=o.indexOf(e),(r=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,c=(h=new Wd(t.read(r))).readShort(),f=h.readShort(),m=h.readShort(),u=h.readShort(),A=h.readShort(),this.cache[e]=c===-1?new vV(h,f,m,u,A):new xV(h,c,f,m,u,A),this.cache[e]))},s.prototype.encode=function(e,t,n){var r,o,c,h,u;for(c=[],o=[],h=0,u=t.length;h<u;h++)r=e[t[h]],o.push(c.length),r&&(c=c.concat(r.encode(n)));return o.push(c.length),{table:c,offsets:o}},s})(),xV=(function(){function s(e,t,n,r,o,c){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=c,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s})(),vV=(function(){function s(e,t,n,r,o){var c,h;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;h=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&h;)c.pos+=1&h?4:2,128&h?c.pos+=8:64&h?c.pos+=4:8&h&&(c.pos+=2)}return s.prototype.encode=function(){var e,t,n;for(t=new Wd(DI.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},s})(),yV=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return eu(s,fc),s.prototype.tag="loca",s.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var r,o;for(o=[],n=0,r=this.length;n<r;n+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],n=0,r=this.length;n<r;n+=4)o.push(e.readUInt32());return o}).call(this)},s.prototype.indexOf=function(e){return this.offsets[e]},s.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},s.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,o=0,c=0;c<n.length;++c)if(n[c]=r,o<t.length&&t[o]==c){++o,n[c]=r;var h=this.offsets[c],u=this.offsets[c+1]-h;u>0&&(r+=u)}for(var f=new Array(4*n.length),A=0;A<n.length;++A)f[4*A+3]=255&n[A],f[4*A+2]=(65280&n[A])>>8,f[4*A+1]=(16711680&n[A])>>16,f[4*A]=(4278190080&n[A])>>24;return f},s})(),bV=(function(){function s(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var e,t,n,r,o;for(t in r=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[t],e[t]=r[n];return e},s.prototype.glyphsFor=function(e){var t,n,r,o,c,h,u;for(r={},c=0,h=e.length;c<h;c++)r[o=e[c]]=this.font.glyf.glyphFor(o);for(o in t=[],r)(n=r[o])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(o in u=this.glyphsFor(t))n=u[o],r[o]=n;return r},s.prototype.encode=function(e,t){var n,r,o,c,h,u,f,A,m,x,g,b,I,N,C;for(r in n=UI.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),g={0:0},C=n.charMap)g[(u=C[r]).old]=u.new;for(b in x=n.maxGlyphID,c)b in g||(g[b]=x++);return A=(function(E){var F,L;for(F in L={},E)L[E[F]]=F;return L})(g),m=Object.keys(A).sort(function(E,F){return E-F}),I=(function(){var E,F,L;for(L=[],E=0,F=m.length;E<F;E++)h=m[E],L.push(A[h]);return L})(),o=this.font.glyf.encode(c,I,g),f=this.font.loca.encode(o.offsets,I),N={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},s})();Ps.API.PDFObject=(function(){var s;function e(){}return s=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,r,o,c;if(Array.isArray(t))return"["+(function(){var h,u,f;for(f=[],h=0,u=t.length;h<u;h++)n=t[h],f.push(e.convert(n));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+s(t.getUTCFullYear(),4)+s(t.getUTCMonth(),2)+s(t.getUTCDate(),2)+s(t.getUTCHours(),2)+s(t.getUTCMinutes(),2)+s(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in o=["<<"],t)c=t[r],o.push("/"+r+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+t},e})();const wV=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:q9,AcroFormAppearance:Cs,AcroFormButton:oo,AcroFormCheckBox:qp,AcroFormChoiceField:Yh,AcroFormComboBox:Xh,AcroFormEditBox:Xp,AcroFormListBox:Wh,AcroFormPasswordField:Zp,AcroFormPushButton:Jp,AcroFormRadioButton:Jh,AcroFormTextField:Md,GState:vg,ShadingPattern:Td,TilingPattern:Mh,default:Ps,jsPDF:Ps},Symbol.toStringTag,{value:"Module"})),jV=u6(wV);var Sx={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var BV=Sx.exports,gC;function SV(){return gC||(gC=1,(function(s,e){(function(t,n){s.exports=n()})(BV,(function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var t=function(j,v){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,B){S.__proto__=B}||function(S,B){for(var z in B)Object.prototype.hasOwnProperty.call(B,z)&&(S[z]=B[z])},t(j,v)};function n(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");t(j,v);function S(){this.constructor=j}j.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}var r=function(){return r=Object.assign||function(v){for(var S,B=1,z=arguments.length;B<z;B++){S=arguments[B];for(var se in S)Object.prototype.hasOwnProperty.call(S,se)&&(v[se]=S[se])}return v},r.apply(this,arguments)};function o(j,v,S,B){function z(se){return se instanceof S?se:new S(function(he){he(se)})}return new(S||(S=Promise))(function(se,he){function Ce(Ke){try{Le(B.next(Ke))}catch(Ye){he(Ye)}}function Ne(Ke){try{Le(B.throw(Ke))}catch(Ye){he(Ye)}}function Le(Ke){Ke.done?se(Ke.value):z(Ke.value).then(Ce,Ne)}Le((B=B.apply(j,[])).next())})}function c(j,v){var S={label:0,sent:function(){if(se[0]&1)throw se[1];return se[1]},trys:[],ops:[]},B,z,se,he;return he={next:Ce(0),throw:Ce(1),return:Ce(2)},typeof Symbol=="function"&&(he[Symbol.iterator]=function(){return this}),he;function Ce(Le){return function(Ke){return Ne([Le,Ke])}}function Ne(Le){if(B)throw new TypeError("Generator is already executing.");for(;S;)try{if(B=1,z&&(se=Le[0]&2?z.return:Le[0]?z.throw||((se=z.return)&&se.call(z),0):z.next)&&!(se=se.call(z,Le[1])).done)return se;switch(z=0,se&&(Le=[Le[0]&2,se.value]),Le[0]){case 0:case 1:se=Le;break;case 4:return S.label++,{value:Le[1],done:!1};case 5:S.label++,z=Le[1],Le=[0];continue;case 7:Le=S.ops.pop(),S.trys.pop();continue;default:if(se=S.trys,!(se=se.length>0&&se[se.length-1])&&(Le[0]===6||Le[0]===2)){S=0;continue}if(Le[0]===3&&(!se||Le[1]>se[0]&&Le[1]<se[3])){S.label=Le[1];break}if(Le[0]===6&&S.label<se[1]){S.label=se[1],se=Le;break}if(se&&S.label<se[2]){S.label=se[2],S.ops.push(Le);break}se[2]&&S.ops.pop(),S.trys.pop();continue}Le=v.call(j,S)}catch(Ke){Le=[6,Ke],z=0}finally{B=se=0}if(Le[0]&5)throw Le[1];return{value:Le[0]?Le[1]:void 0,done:!0}}}function h(j,v,S){if(arguments.length===2)for(var B=0,z=v.length,se;B<z;B++)(se||!(B in v))&&(se||(se=Array.prototype.slice.call(v,0,B)),se[B]=v[B]);return j.concat(se||v)}for(var u=(function(){function j(v,S,B,z){this.left=v,this.top=S,this.width=B,this.height=z}return j.prototype.add=function(v,S,B,z){return new j(this.left+v,this.top+S,this.width+B,this.height+z)},j.fromClientRect=function(v,S){return new j(S.left+v.windowBounds.left,S.top+v.windowBounds.top,S.width,S.height)},j.fromDOMRectList=function(v,S){var B=Array.from(S).find(function(z){return z.width!==0});return B?new j(B.left+v.windowBounds.left,B.top+v.windowBounds.top,B.width,B.height):j.EMPTY},j.EMPTY=new j(0,0,0,0),j})(),f=function(j,v){return u.fromClientRect(j,v.getBoundingClientRect())},A=function(j){var v=j.body,S=j.documentElement;if(!v||!S)throw new Error("Unable to get document size");var B=Math.max(Math.max(v.scrollWidth,S.scrollWidth),Math.max(v.offsetWidth,S.offsetWidth),Math.max(v.clientWidth,S.clientWidth)),z=Math.max(Math.max(v.scrollHeight,S.scrollHeight),Math.max(v.offsetHeight,S.offsetHeight),Math.max(v.clientHeight,S.clientHeight));return new u(0,0,B,z)},m=function(j){for(var v=[],S=0,B=j.length;S<B;){var z=j.charCodeAt(S++);if(z>=55296&&z<=56319&&S<B){var se=j.charCodeAt(S++);(se&64512)===56320?v.push(((z&1023)<<10)+(se&1023)+65536):(v.push(z),S--)}else v.push(z)}return v},x=function(){for(var j=[],v=0;v<arguments.length;v++)j[v]=arguments[v];if(String.fromCodePoint)return String.fromCodePoint.apply(String,j);var S=j.length;if(!S)return"";for(var B=[],z=-1,se="";++z<S;){var he=j[z];he<=65535?B.push(he):(he-=65536,B.push((he>>10)+55296,he%1024+56320)),(z+1===S||B.length>16384)&&(se+=String.fromCharCode.apply(String,B),B.length=0)}return se},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=typeof Uint8Array>"u"?[]:new Uint8Array(256),I=0;I<g.length;I++)b[g.charCodeAt(I)]=I;for(var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=typeof Uint8Array>"u"?[]:new Uint8Array(256),E=0;E<N.length;E++)C[N.charCodeAt(E)]=E;for(var F=function(j){var v=j.length*.75,S=j.length,B,z=0,se,he,Ce,Ne;j[j.length-1]==="="&&(v--,j[j.length-2]==="="&&v--);var Le=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(v):new Array(v),Ke=Array.isArray(Le)?Le:new Uint8Array(Le);for(B=0;B<S;B+=4)se=C[j.charCodeAt(B)],he=C[j.charCodeAt(B+1)],Ce=C[j.charCodeAt(B+2)],Ne=C[j.charCodeAt(B+3)],Ke[z++]=se<<2|he>>4,Ke[z++]=(he&15)<<4|Ce>>2,Ke[z++]=(Ce&3)<<6|Ne&63;return Le},L=function(j){for(var v=j.length,S=[],B=0;B<v;B+=2)S.push(j[B+1]<<8|j[B]);return S},O=function(j){for(var v=j.length,S=[],B=0;B<v;B+=4)S.push(j[B+3]<<24|j[B+2]<<16|j[B+1]<<8|j[B]);return S},H=5,Q=11,U=2,R=Q-H,$=65536>>H,P=1<<H,V=P-1,G=1024>>H,ae=$+G,ue=ae,oe=32,X=ue+oe,Y=65536>>Q,re=1<<R,pe=re-1,ee=function(j,v,S){return j.slice?j.slice(v,S):new Uint16Array(Array.prototype.slice.call(j,v,S))},M=function(j,v,S){return j.slice?j.slice(v,S):new Uint32Array(Array.prototype.slice.call(j,v,S))},J=function(j,v){var S=F(j),B=Array.isArray(S)?O(S):new Uint32Array(S),z=Array.isArray(S)?L(S):new Uint16Array(S),se=24,he=ee(z,se/2,B[4]/2),Ce=B[5]===2?ee(z,(se+B[4])/2):M(B,Math.ceil((se+B[4])/4));return new ie(B[0],B[1],B[2],B[3],he,Ce)},ie=(function(){function j(v,S,B,z,se,he){this.initialValue=v,this.errorValue=S,this.highStart=B,this.highValueIndex=z,this.index=se,this.data=he}return j.prototype.get=function(v){var S;if(v>=0){if(v<55296||v>56319&&v<=65535)return S=this.index[v>>H],S=(S<<U)+(v&V),this.data[S];if(v<=65535)return S=this.index[$+(v-55296>>H)],S=(S<<U)+(v&V),this.data[S];if(v<this.highStart)return S=X-Y+(v>>Q),S=this.index[S],S+=v>>H&pe,S=this.index[S],S=(S<<U)+(v&V),this.data[S];if(v<=1114111)return this.data[this.highValueIndex]}return this.errorValue},j})(),le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ce=typeof Uint8Array>"u"?[]:new Uint8Array(256),ve=0;ve<le.length;ve++)ce[le.charCodeAt(ve)]=ve;var Se="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ge=50,Be=1,Fe=2,Qe=3,Ze=4,Pe=5,me=7,nt=8,It=9,ut=10,ze=11,Ft=12,Qt=13,Ct=14,Jt=15,ts=16,as=17,Xe=18,Vt=19,Kt=20,Mt=21,mt=22,Dt=23,Ns=24,$t=25,Wt=26,lt=27,Ot=28,De=29,dt=30,at=31,Et=32,Xt=33,vt=34,it=35,Rt=36,qt=37,cs=38,Xs=39,Ls=40,Yt=41,hn=42,Tr=43,dr=[9001,65288],hr="!",Zt="",mn="",pn=J(Se),Nn=[dt,Rt],Fs=[Be,Fe,Qe,Pe],En=[ut,nt],An=[lt,Wt],Ir=Fs.concat(En),ya=[cs,Xs,Ls,vt,it],ai=[Jt,Qt],ii=function(j,v){v===void 0&&(v="strict");var S=[],B=[],z=[];return j.forEach(function(se,he){var Ce=pn.get(se);if(Ce>ge?(z.push(!0),Ce-=ge):z.push(!1),["normal","auto","loose"].indexOf(v)!==-1&&[8208,8211,12316,12448].indexOf(se)!==-1)return B.push(he),S.push(ts);if(Ce===Ze||Ce===ze){if(he===0)return B.push(he),S.push(dt);var Ne=S[he-1];return Ir.indexOf(Ne)===-1?(B.push(B[he-1]),S.push(Ne)):(B.push(he),S.push(dt))}if(B.push(he),Ce===at)return S.push(v==="strict"?Mt:qt);if(Ce===hn||Ce===De)return S.push(dt);if(Ce===Tr)return se>=131072&&se<=196605||se>=196608&&se<=262141?S.push(qt):S.push(dt);S.push(Ce)}),[B,S,z]},yn=function(j,v,S,B){var z=B[S];if(Array.isArray(j)?j.indexOf(z)!==-1:j===z)for(var se=S;se<=B.length;){se++;var he=B[se];if(he===v)return!0;if(he!==ut)break}if(z===ut)for(var se=S;se>0;){se--;var Ce=B[se];if(Array.isArray(j)?j.indexOf(Ce)!==-1:j===Ce)for(var Ne=S;Ne<=B.length;){Ne++;var he=B[Ne];if(he===v)return!0;if(he!==ut)break}if(Ce!==ut)break}return!1},_r=function(j,v){for(var S=j;S>=0;){var B=v[S];if(B===ut)S--;else return B}return 0},ea=function(j,v,S,B,z){if(S[B]===0)return Zt;var se=B-1;if(Array.isArray(z)&&z[se]===!0)return Zt;var he=se-1,Ce=se+1,Ne=v[se],Le=he>=0?v[he]:0,Ke=v[Ce];if(Ne===Fe&&Ke===Qe)return Zt;if(Fs.indexOf(Ne)!==-1)return hr;if(Fs.indexOf(Ke)!==-1||En.indexOf(Ke)!==-1)return Zt;if(_r(se,v)===nt)return mn;if(pn.get(j[se])===ze||(Ne===Et||Ne===Xt)&&pn.get(j[Ce])===ze||Ne===me||Ke===me||Ne===It||[ut,Qt,Jt].indexOf(Ne)===-1&&Ke===It||[as,Xe,Vt,Ns,Ot].indexOf(Ke)!==-1||_r(se,v)===mt||yn(Dt,mt,se,v)||yn([as,Xe],Mt,se,v)||yn(Ft,Ft,se,v))return Zt;if(Ne===ut)return mn;if(Ne===Dt||Ke===Dt)return Zt;if(Ke===ts||Ne===ts)return mn;if([Qt,Jt,Mt].indexOf(Ke)!==-1||Ne===Ct||Le===Rt&&ai.indexOf(Ne)!==-1||Ne===Ot&&Ke===Rt||Ke===Kt||Nn.indexOf(Ke)!==-1&&Ne===$t||Nn.indexOf(Ne)!==-1&&Ke===$t||Ne===lt&&[qt,Et,Xt].indexOf(Ke)!==-1||[qt,Et,Xt].indexOf(Ne)!==-1&&Ke===Wt||Nn.indexOf(Ne)!==-1&&An.indexOf(Ke)!==-1||An.indexOf(Ne)!==-1&&Nn.indexOf(Ke)!==-1||[lt,Wt].indexOf(Ne)!==-1&&(Ke===$t||[mt,Jt].indexOf(Ke)!==-1&&v[Ce+1]===$t)||[mt,Jt].indexOf(Ne)!==-1&&Ke===$t||Ne===$t&&[$t,Ot,Ns].indexOf(Ke)!==-1)return Zt;if([$t,Ot,Ns,as,Xe].indexOf(Ke)!==-1)for(var Ye=se;Ye>=0;){var gt=v[Ye];if(gt===$t)return Zt;if([Ot,Ns].indexOf(gt)!==-1)Ye--;else break}if([lt,Wt].indexOf(Ke)!==-1)for(var Ye=[as,Xe].indexOf(Ne)!==-1?he:se;Ye>=0;){var gt=v[Ye];if(gt===$t)return Zt;if([Ot,Ns].indexOf(gt)!==-1)Ye--;else break}if(cs===Ne&&[cs,Xs,vt,it].indexOf(Ke)!==-1||[Xs,vt].indexOf(Ne)!==-1&&[Xs,Ls].indexOf(Ke)!==-1||[Ls,it].indexOf(Ne)!==-1&&Ke===Ls||ya.indexOf(Ne)!==-1&&[Kt,Wt].indexOf(Ke)!==-1||ya.indexOf(Ke)!==-1&&Ne===lt||Nn.indexOf(Ne)!==-1&&Nn.indexOf(Ke)!==-1||Ne===Ns&&Nn.indexOf(Ke)!==-1||Nn.concat($t).indexOf(Ne)!==-1&&Ke===mt&&dr.indexOf(j[Ce])===-1||Nn.concat($t).indexOf(Ke)!==-1&&Ne===Xe)return Zt;if(Ne===Yt&&Ke===Yt){for(var As=S[se],Gt=1;As>0&&(As--,v[As]===Yt);)Gt++;if(Gt%2!==0)return Zt}return Ne===Et&&Ke===Xt?Zt:mn},xr=function(j,v){v||(v={lineBreak:"normal",wordBreak:"normal"});var S=ii(j,v.lineBreak),B=S[0],z=S[1],se=S[2];(v.wordBreak==="break-all"||v.wordBreak==="break-word")&&(z=z.map(function(Ce){return[$t,dt,hn].indexOf(Ce)!==-1?qt:Ce}));var he=v.wordBreak==="keep-all"?se.map(function(Ce,Ne){return Ce&&j[Ne]>=19968&&j[Ne]<=40959}):void 0;return[B,z,he]},Fr=(function(){function j(v,S,B,z){this.codePoints=v,this.required=S===hr,this.start=B,this.end=z}return j.prototype.slice=function(){return x.apply(void 0,this.codePoints.slice(this.start,this.end))},j})(),da=function(j,v){var S=m(j),B=xr(S,v),z=B[0],se=B[1],he=B[2],Ce=S.length,Ne=0,Le=0;return{next:function(){if(Le>=Ce)return{done:!0,value:null};for(var Ke=Zt;Le<Ce&&(Ke=ea(S,se,z,++Le,he))===Zt;);if(Ke!==Zt||Le===Ce){var Ye=new Fr(S,Ke,Ne,Le);return Ne=Le,{value:Ye,done:!1}}return{done:!0,value:null}}}},La=1,zn=2,Qa=4,ha=8,Ur=10,Ti=47,Ji=92,wl=9,jl=32,Ao=34,ba=61,Oa=35,Yr=36,Sn=37,Ii=39,Wr=40,gn=41,Ee=95,Je=45,xt=33,_t=60,fs=62,ms=64,zs=91,Gs=93,Lt=61,Js=123,Bs=63,Zs=125,nr=124,wr=126,ta=128,wa=65533,Qr=42,Gn=43,fa=44,_i=58,ja=59,Fi=46,Ts=0,ll=8,Bl=11,Do=14,Ba=31,sa=127,Pa=-1,$n=48,oi=97,Ro=101,pi=102,Sl=117,Sa=122,qi=65,gi=69,jr=70,xi=85,na=90,Yn=function(j){return j>=$n&&j<=57},po=function(j){return j>=55296&&j<=57343},ka=function(j){return Yn(j)||j>=qi&&j<=jr||j>=oi&&j<=pi},Ht=function(j){return j>=oi&&j<=Sa},bs=function(j){return j>=qi&&j<=na},cn=function(j){return Ht(j)||bs(j)},In=function(j){return j>=ta},ks=function(j){return j===Ur||j===wl||j===jl},ss=function(j){return cn(j)||In(j)||j===Ee},rr=function(j){return ss(j)||Yn(j)||j===Je},Or=function(j){return j>=Ts&&j<=ll||j===Bl||j>=Do&&j<=Ba||j===sa},Ca=function(j,v){return j!==Ji?!1:v!==Ur},k=function(j,v,S){return j===Je?ss(v)||Ca(v,S):ss(j)?!0:!!(j===Ji&&Ca(j,v))},Ae=function(j,v,S){return j===Gn||j===Je?Yn(v)?!0:v===Fi&&Yn(S):Yn(j===Fi?v:j)},Te=function(j){var v=0,S=1;(j[v]===Gn||j[v]===Je)&&(j[v]===Je&&(S=-1),v++);for(var B=[];Yn(j[v]);)B.push(j[v++]);var z=B.length?parseInt(x.apply(void 0,B),10):0;j[v]===Fi&&v++;for(var se=[];Yn(j[v]);)se.push(j[v++]);var he=se.length,Ce=he?parseInt(x.apply(void 0,se),10):0;(j[v]===gi||j[v]===Ro)&&v++;var Ne=1;(j[v]===Gn||j[v]===Je)&&(j[v]===Je&&(Ne=-1),v++);for(var Le=[];Yn(j[v]);)Le.push(j[v++]);var Ke=Le.length?parseInt(x.apply(void 0,Le),10):0;return S*(z+Ce*Math.pow(10,-he))*Math.pow(10,Ne*Ke)},Ue={type:2},Me={type:3},ht={type:4},St={type:13},ds={type:8},xs={type:21},Ms={type:9},Us={type:10},Fn={type:11},Dr={type:12},vr={type:14},w={type:23},W={type:1},ne={type:25},we={type:24},$e={type:26},st={type:27},zt={type:28},sn={type:29},Rr={type:31},bn={type:32},ar=(function(){function j(){this._value=[]}return j.prototype.write=function(v){this._value=this._value.concat(m(v))},j.prototype.read=function(){for(var v=[],S=this.consumeToken();S!==bn;)v.push(S),S=this.consumeToken();return v},j.prototype.consumeToken=function(){var v=this.consumeCodePoint();switch(v){case Ao:return this.consumeStringToken(Ao);case Oa:var S=this.peekCodePoint(0),B=this.peekCodePoint(1),z=this.peekCodePoint(2);if(rr(S)||Ca(B,z)){var se=k(S,B,z)?zn:La,he=this.consumeName();return{type:5,value:he,flags:se}}break;case Yr:if(this.peekCodePoint(0)===ba)return this.consumeCodePoint(),St;break;case Ii:return this.consumeStringToken(Ii);case Wr:return Ue;case gn:return Me;case Qr:if(this.peekCodePoint(0)===ba)return this.consumeCodePoint(),vr;break;case Gn:if(Ae(v,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(v),this.consumeNumericToken();break;case fa:return ht;case Je:var Ce=v,Ne=this.peekCodePoint(0),Le=this.peekCodePoint(1);if(Ae(Ce,Ne,Le))return this.reconsumeCodePoint(v),this.consumeNumericToken();if(k(Ce,Ne,Le))return this.reconsumeCodePoint(v),this.consumeIdentLikeToken();if(Ne===Je&&Le===fs)return this.consumeCodePoint(),this.consumeCodePoint(),we;break;case Fi:if(Ae(v,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(v),this.consumeNumericToken();break;case Ti:if(this.peekCodePoint(0)===Qr)for(this.consumeCodePoint();;){var Ke=this.consumeCodePoint();if(Ke===Qr&&(Ke=this.consumeCodePoint(),Ke===Ti))return this.consumeToken();if(Ke===Pa)return this.consumeToken()}break;case _i:return $e;case ja:return st;case _t:if(this.peekCodePoint(0)===xt&&this.peekCodePoint(1)===Je&&this.peekCodePoint(2)===Je)return this.consumeCodePoint(),this.consumeCodePoint(),ne;break;case ms:var Ye=this.peekCodePoint(0),gt=this.peekCodePoint(1),As=this.peekCodePoint(2);if(k(Ye,gt,As)){var he=this.consumeName();return{type:7,value:he}}break;case zs:return zt;case Ji:if(Ca(v,this.peekCodePoint(0)))return this.reconsumeCodePoint(v),this.consumeIdentLikeToken();break;case Gs:return sn;case Lt:if(this.peekCodePoint(0)===ba)return this.consumeCodePoint(),ds;break;case Js:return Fn;case Zs:return Dr;case Sl:case xi:var Gt=this.peekCodePoint(0),ns=this.peekCodePoint(1);return Gt===Gn&&(ka(ns)||ns===Bs)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(v),this.consumeIdentLikeToken();case nr:if(this.peekCodePoint(0)===ba)return this.consumeCodePoint(),Ms;if(this.peekCodePoint(0)===nr)return this.consumeCodePoint(),xs;break;case wr:if(this.peekCodePoint(0)===ba)return this.consumeCodePoint(),Us;break;case Pa:return bn}return ks(v)?(this.consumeWhiteSpace(),Rr):Yn(v)?(this.reconsumeCodePoint(v),this.consumeNumericToken()):ss(v)?(this.reconsumeCodePoint(v),this.consumeIdentLikeToken()):{type:6,value:x(v)}},j.prototype.consumeCodePoint=function(){var v=this._value.shift();return typeof v>"u"?-1:v},j.prototype.reconsumeCodePoint=function(v){this._value.unshift(v)},j.prototype.peekCodePoint=function(v){return v>=this._value.length?-1:this._value[v]},j.prototype.consumeUnicodeRangeToken=function(){for(var v=[],S=this.consumeCodePoint();ka(S)&&v.length<6;)v.push(S),S=this.consumeCodePoint();for(var B=!1;S===Bs&&v.length<6;)v.push(S),S=this.consumeCodePoint(),B=!0;if(B){var z=parseInt(x.apply(void 0,v.map(function(Ne){return Ne===Bs?$n:Ne})),16),se=parseInt(x.apply(void 0,v.map(function(Ne){return Ne===Bs?jr:Ne})),16);return{type:30,start:z,end:se}}var he=parseInt(x.apply(void 0,v),16);if(this.peekCodePoint(0)===Je&&ka(this.peekCodePoint(1))){this.consumeCodePoint(),S=this.consumeCodePoint();for(var Ce=[];ka(S)&&Ce.length<6;)Ce.push(S),S=this.consumeCodePoint();var se=parseInt(x.apply(void 0,Ce),16);return{type:30,start:he,end:se}}else return{type:30,start:he,end:he}},j.prototype.consumeIdentLikeToken=function(){var v=this.consumeName();return v.toLowerCase()==="url"&&this.peekCodePoint(0)===Wr?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Wr?(this.consumeCodePoint(),{type:19,value:v}):{type:20,value:v}},j.prototype.consumeUrlToken=function(){var v=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pa)return{type:22,value:""};var S=this.peekCodePoint(0);if(S===Ii||S===Ao){var B=this.consumeStringToken(this.consumeCodePoint());return B.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pa||this.peekCodePoint(0)===gn)?(this.consumeCodePoint(),{type:22,value:B.value}):(this.consumeBadUrlRemnants(),w)}for(;;){var z=this.consumeCodePoint();if(z===Pa||z===gn)return{type:22,value:x.apply(void 0,v)};if(ks(z))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Pa||this.peekCodePoint(0)===gn?(this.consumeCodePoint(),{type:22,value:x.apply(void 0,v)}):(this.consumeBadUrlRemnants(),w);if(z===Ao||z===Ii||z===Wr||Or(z))return this.consumeBadUrlRemnants(),w;if(z===Ji)if(Ca(z,this.peekCodePoint(0)))v.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),w;else v.push(z)}},j.prototype.consumeWhiteSpace=function(){for(;ks(this.peekCodePoint(0));)this.consumeCodePoint()},j.prototype.consumeBadUrlRemnants=function(){for(;;){var v=this.consumeCodePoint();if(v===gn||v===Pa)return;Ca(v,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},j.prototype.consumeStringSlice=function(v){for(var S=5e4,B="";v>0;){var z=Math.min(S,v);B+=x.apply(void 0,this._value.splice(0,z)),v-=z}return this._value.shift(),B},j.prototype.consumeStringToken=function(v){var S="",B=0;do{var z=this._value[B];if(z===Pa||z===void 0||z===v)return S+=this.consumeStringSlice(B),{type:0,value:S};if(z===Ur)return this._value.splice(0,B),W;if(z===Ji){var se=this._value[B+1];se!==Pa&&se!==void 0&&(se===Ur?(S+=this.consumeStringSlice(B),B=-1,this._value.shift()):Ca(z,se)&&(S+=this.consumeStringSlice(B),S+=x(this.consumeEscapedCodePoint()),B=-1))}B++}while(!0)},j.prototype.consumeNumber=function(){var v=[],S=Qa,B=this.peekCodePoint(0);for((B===Gn||B===Je)&&v.push(this.consumeCodePoint());Yn(this.peekCodePoint(0));)v.push(this.consumeCodePoint());B=this.peekCodePoint(0);var z=this.peekCodePoint(1);if(B===Fi&&Yn(z))for(v.push(this.consumeCodePoint(),this.consumeCodePoint()),S=ha;Yn(this.peekCodePoint(0));)v.push(this.consumeCodePoint());B=this.peekCodePoint(0),z=this.peekCodePoint(1);var se=this.peekCodePoint(2);if((B===gi||B===Ro)&&((z===Gn||z===Je)&&Yn(se)||Yn(z)))for(v.push(this.consumeCodePoint(),this.consumeCodePoint()),S=ha;Yn(this.peekCodePoint(0));)v.push(this.consumeCodePoint());return[Te(v),S]},j.prototype.consumeNumericToken=function(){var v=this.consumeNumber(),S=v[0],B=v[1],z=this.peekCodePoint(0),se=this.peekCodePoint(1),he=this.peekCodePoint(2);if(k(z,se,he)){var Ce=this.consumeName();return{type:15,number:S,flags:B,unit:Ce}}return z===Sn?(this.consumeCodePoint(),{type:16,number:S,flags:B}):{type:17,number:S,flags:B}},j.prototype.consumeEscapedCodePoint=function(){var v=this.consumeCodePoint();if(ka(v)){for(var S=x(v);ka(this.peekCodePoint(0))&&S.length<6;)S+=x(this.consumeCodePoint());ks(this.peekCodePoint(0))&&this.consumeCodePoint();var B=parseInt(S,16);return B===0||po(B)||B>1114111?wa:B}return v===Pa?wa:v},j.prototype.consumeName=function(){for(var v="";;){var S=this.consumeCodePoint();if(rr(S))v+=x(S);else if(Ca(S,this.peekCodePoint(0)))v+=x(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(S),v}},j})(),Za=(function(){function j(v){this._tokens=v}return j.create=function(v){var S=new ar;return S.write(v),new j(S.read())},j.parseValue=function(v){return j.create(v).parseComponentValue()},j.parseValues=function(v){return j.create(v).parseComponentValues()},j.prototype.parseComponentValue=function(){for(var v=this.consumeToken();v.type===31;)v=this.consumeToken();if(v.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(v);var S=this.consumeComponentValue();do v=this.consumeToken();while(v.type===31);if(v.type===32)return S;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},j.prototype.parseComponentValues=function(){for(var v=[];;){var S=this.consumeComponentValue();if(S.type===32)return v;v.push(S),v.push()}},j.prototype.consumeComponentValue=function(){var v=this.consumeToken();switch(v.type){case 11:case 28:case 2:return this.consumeSimpleBlock(v.type);case 19:return this.consumeFunction(v)}return v},j.prototype.consumeSimpleBlock=function(v){for(var S={type:v,values:[]},B=this.consumeToken();;){if(B.type===32||mc(B,v))return S;this.reconsumeToken(B),S.values.push(this.consumeComponentValue()),B=this.consumeToken()}},j.prototype.consumeFunction=function(v){for(var S={name:v.value,values:[],type:18};;){var B=this.consumeToken();if(B.type===32||B.type===3)return S;this.reconsumeToken(B),S.values.push(this.consumeComponentValue())}},j.prototype.consumeToken=function(){var v=this._tokens.shift();return typeof v>"u"?bn:v},j.prototype.reconsumeToken=function(v){this._tokens.unshift(v)},j})(),Na=function(j){return j.type===15},Wn=function(j){return j.type===17},on=function(j){return j.type===20},go=function(j){return j.type===0},Lo=function(j,v){return on(j)&&j.value===v},Al=function(j){return j.type!==31},Ma=function(j){return j.type!==31&&j.type!==4},li=function(j){var v=[],S=[];return j.forEach(function(B){if(B.type===4){if(S.length===0)throw new Error("Error parsing function args, zero tokens for arg");v.push(S),S=[];return}B.type!==31&&S.push(B)}),S.length&&v.push(S),v},mc=function(j,v){return v===11&&j.type===12||v===28&&j.type===29?!0:v===2&&j.type===3},Qo=function(j){return j.type===17||j.type===15},Xn=function(j){return j.type===16||Qo(j)},Oo=function(j){return j.length>1?[j[0],j[1]]:[j[0]]},Pr={type:17,number:0,flags:Qa},OA={type:16,number:50,flags:Qa},Ai={type:16,number:100,flags:Qa},Po=function(j,v,S){var B=j[0],z=j[1];return[Cn(B,v),Cn(typeof z<"u"?z:B,S)]},Cn=function(j,v){if(j.type===16)return j.number/100*v;if(Na(j))switch(j.unit){case"rem":case"em":return 16*j.number;case"px":default:return j.number}return j.number},Ui="deg",cl="grad",ul="rad",Cl="turn",$l={name:"angle",parse:function(j,v){if(v.type===15)switch(v.unit){case Ui:return Math.PI*v.number/180;case cl:return Math.PI/200*v.number;case ul:return v.number;case Cl:return Math.PI*2*v.number}throw new Error("Unsupported angle type")}},PA=function(j){return j.type===15&&(j.unit===Ui||j.unit===cl||j.unit===ul||j.unit===Cl)},ma=function(j){var v=j.filter(on).map(function(S){return S.value}).join(" ");switch(v){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Pr,Pr];case"to top":case"bottom":return Zi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Pr,Ai];case"to right":case"left":return Zi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ai,Ai];case"to bottom":case"top":return Zi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ai,Pr];case"to left":case"right":return Zi(270)}return 0},Zi=function(j){return Math.PI*j/180},vi={name:"color",parse:function(j,v){if(v.type===18){var S=El[v.name];if(typeof S>"u")throw new Error('Attempting to parse an unsupported color function "'+v.name+'"');return S(j,v.values)}if(v.type===5){if(v.value.length===3){var B=v.value.substring(0,1),z=v.value.substring(1,2),se=v.value.substring(2,3);return Di(parseInt(B+B,16),parseInt(z+z,16),parseInt(se+se,16),1)}if(v.value.length===4){var B=v.value.substring(0,1),z=v.value.substring(1,2),se=v.value.substring(2,3),he=v.value.substring(3,4);return Di(parseInt(B+B,16),parseInt(z+z,16),parseInt(se+se,16),parseInt(he+he,16)/255)}if(v.value.length===6){var B=v.value.substring(0,2),z=v.value.substring(2,4),se=v.value.substring(4,6);return Di(parseInt(B,16),parseInt(z,16),parseInt(se,16),1)}if(v.value.length===8){var B=v.value.substring(0,2),z=v.value.substring(2,4),se=v.value.substring(4,6),he=v.value.substring(6,8);return Di(parseInt(B,16),parseInt(z,16),parseInt(se,16),parseInt(he,16)/255)}}if(v.type===20){var Ce=Ea[v.value.toUpperCase()];if(typeof Ce<"u")return Ce}return Ea.TRANSPARENT}},yi=function(j){return(255&j)===0},Qn=function(j){var v=255&j,S=255&j>>8,B=255&j>>16,z=255&j>>24;return v<255?"rgba("+z+","+B+","+S+","+v/255+")":"rgb("+z+","+B+","+S+")"},Di=function(j,v,S,B){return(j<<24|v<<16|S<<8|Math.round(B*255)<<0)>>>0},kA=function(j,v){if(j.type===17)return j.number;if(j.type===16){var S=v===3?1:255;return v===3?j.number/100*S:Math.round(j.number/100*S)}return 0},MA=function(j,v){var S=v.filter(Ma);if(S.length===3){var B=S.map(kA),z=B[0],se=B[1],he=B[2];return Di(z,se,he,1)}if(S.length===4){var Ce=S.map(kA),z=Ce[0],se=Ce[1],he=Ce[2],Ne=Ce[3];return Di(z,se,he,Ne)}return 0};function dl(j,v,S){return S<0&&(S+=1),S>=1&&(S-=1),S<1/6?(v-j)*S*6+j:S<1/2?v:S<2/3?(v-j)*6*(2/3-S)+j:j}var Nl=function(j,v){var S=v.filter(Ma),B=S[0],z=S[1],se=S[2],he=S[3],Ce=(B.type===17?Zi(B.number):$l.parse(j,B))/(Math.PI*2),Ne=Xn(z)?z.number/100:0,Le=Xn(se)?se.number/100:0,Ke=typeof he<"u"&&Xn(he)?Cn(he,1):1;if(Ne===0)return Di(Le*255,Le*255,Le*255,1);var Ye=Le<=.5?Le*(Ne+1):Le+Ne-Le*Ne,gt=Le*2-Ye,As=dl(gt,Ye,Ce+1/3),Gt=dl(gt,Ye,Ce),ns=dl(gt,Ye,Ce-1/3);return Di(As*255,Gt*255,ns*255,Ke)},El={hsl:Nl,hsla:Nl,rgb:MA,rgba:MA},hl=function(j,v){return vi.parse(j,Za.create(v).parseComponentValue())},Ea={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Yl={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(j,v){return v.map(function(S){if(on(S))switch(S.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ri={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eo=function(j,v){var S=vi.parse(j,v[0]),B=v[1];return B&&Xn(B)?{color:S,stop:B}:{color:S,stop:null}},Jn=function(j,v){var S=j[0],B=j[j.length-1];S.stop===null&&(S.stop=Pr),B.stop===null&&(B.stop=Ai);for(var z=[],se=0,he=0;he<j.length;he++){var Ce=j[he].stop;if(Ce!==null){var Ne=Cn(Ce,v);Ne>se?z.push(Ne):z.push(se),se=Ne}else z.push(null)}for(var Le=null,he=0;he<z.length;he++){var Ke=z[he];if(Ke===null)Le===null&&(Le=he);else if(Le!==null){for(var Ye=he-Le,gt=z[Le-1],As=(Ke-gt)/(Ye+1),Gt=1;Gt<=Ye;Gt++)z[Le+Gt-1]=As*Gt;Le=null}}return j.map(function(ns,Is){var gs=ns.color;return{color:gs,stop:Math.max(Math.min(1,z[Is]/v),0)}})},Hn=function(j,v,S){var B=v/2,z=S/2,se=Cn(j[0],v)-B,he=z-Cn(j[1],S);return(Math.atan2(he,se)+Math.PI*2)%(Math.PI*2)},Lr=function(j,v,S){var B=typeof j=="number"?j:Hn(j,v,S),z=Math.abs(v*Math.sin(B))+Math.abs(S*Math.cos(B)),se=v/2,he=S/2,Ce=z/2,Ne=Math.sin(B-Math.PI/2)*Ce,Le=Math.cos(B-Math.PI/2)*Ce;return[z,se-Le,se+Le,he-Ne,he+Ne]},ir=function(j,v){return Math.sqrt(j*j+v*v)},fl=function(j,v,S,B,z){var se=[[0,0],[0,v],[j,0],[j,v]];return se.reduce(function(he,Ce){var Ne=Ce[0],Le=Ce[1],Ke=ir(S-Ne,B-Le);return(z?Ke<he.optimumDistance:Ke>he.optimumDistance)?{optimumCorner:Ce,optimumDistance:Ke}:he},{optimumDistance:z?1/0:-1/0,optimumCorner:null}).optimumCorner},ml=function(j,v,S,B,z){var se=0,he=0;switch(j.size){case 0:j.shape===0?se=he=Math.min(Math.abs(v),Math.abs(v-B),Math.abs(S),Math.abs(S-z)):j.shape===1&&(se=Math.min(Math.abs(v),Math.abs(v-B)),he=Math.min(Math.abs(S),Math.abs(S-z)));break;case 2:if(j.shape===0)se=he=Math.min(ir(v,S),ir(v,S-z),ir(v-B,S),ir(v-B,S-z));else if(j.shape===1){var Ce=Math.min(Math.abs(S),Math.abs(S-z))/Math.min(Math.abs(v),Math.abs(v-B)),Ne=fl(B,z,v,S,!0),Le=Ne[0],Ke=Ne[1];se=ir(Le-v,(Ke-S)/Ce),he=Ce*se}break;case 1:j.shape===0?se=he=Math.max(Math.abs(v),Math.abs(v-B),Math.abs(S),Math.abs(S-z)):j.shape===1&&(se=Math.max(Math.abs(v),Math.abs(v-B)),he=Math.max(Math.abs(S),Math.abs(S-z)));break;case 3:if(j.shape===0)se=he=Math.max(ir(v,S),ir(v,S-z),ir(v-B,S),ir(v-B,S-z));else if(j.shape===1){var Ce=Math.max(Math.abs(S),Math.abs(S-z))/Math.max(Math.abs(v),Math.abs(v-B)),Ye=fl(B,z,v,S,!1),Le=Ye[0],Ke=Ye[1];se=ir(Le-v,(Ke-S)/Ce),he=Ce*se}break}return Array.isArray(j.size)&&(se=Cn(j.size[0],B),he=j.size.length===2?Cn(j.size[1],z):se),[se,he]},HA=function(j,v){var S=Zi(180),B=[];return li(v).forEach(function(z,se){if(se===0){var he=z[0];if(he.type===20&&he.value==="to"){S=ma(z);return}else if(PA(he)){S=$l.parse(j,he);return}}var Ce=eo(j,z);B.push(Ce)}),{angle:S,stops:B,type:1}},dA=function(j,v){var S=Zi(180),B=[];return li(v).forEach(function(z,se){if(se===0){var he=z[0];if(he.type===20&&["top","left","right","bottom"].indexOf(he.value)!==-1){S=ma(z);return}else if(PA(he)){S=($l.parse(j,he)+Zi(270))%Zi(360);return}}var Ce=eo(j,z);B.push(Ce)}),{angle:S,stops:B,type:1}},nh=function(j,v){var S=Zi(180),B=[],z=1,se=0,he=3,Ce=[];return li(v).forEach(function(Ne,Le){var Ke=Ne[0];if(Le===0){if(on(Ke)&&Ke.value==="linear"){z=1;return}else if(on(Ke)&&Ke.value==="radial"){z=2;return}}if(Ke.type===18){if(Ke.name==="from"){var Ye=vi.parse(j,Ke.values[0]);B.push({stop:Pr,color:Ye})}else if(Ke.name==="to"){var Ye=vi.parse(j,Ke.values[0]);B.push({stop:Ai,color:Ye})}else if(Ke.name==="color-stop"){var gt=Ke.values.filter(Ma);if(gt.length===2){var Ye=vi.parse(j,gt[1]),As=gt[0];Wn(As)&&B.push({stop:{type:16,number:As.number*100,flags:As.flags},color:Ye})}}}}),z===1?{angle:(S+Zi(180))%Zi(360),stops:B,type:z}:{size:he,shape:se,stops:B,position:Ce,type:z}},rh="closest-side",ah="farthest-side",ih="closest-corner",Qu="farthest-corner",Ou="circle",hA="ellipse",xo="cover",pc="contain",vo=function(j,v){var S=0,B=3,z=[],se=[];return li(v).forEach(function(he,Ce){var Ne=!0;if(Ce===0){var Le=!1;Ne=he.reduce(function(Ye,gt){if(Le)if(on(gt))switch(gt.value){case"center":return se.push(OA),Ye;case"top":case"left":return se.push(Pr),Ye;case"right":case"bottom":return se.push(Ai),Ye}else(Xn(gt)||Qo(gt))&&se.push(gt);else if(on(gt))switch(gt.value){case Ou:return S=0,!1;case hA:return S=1,!1;case"at":return Le=!0,!1;case rh:return B=0,!1;case xo:case ah:return B=1,!1;case pc:case ih:return B=2,!1;case Qu:return B=3,!1}else if(Qo(gt)||Xn(gt))return Array.isArray(B)||(B=[]),B.push(gt),!1;return Ye},Ne)}if(Ne){var Ke=eo(j,he);z.push(Ke)}}),{size:B,shape:S,stops:z,position:se,type:2}},Tl=function(j,v){var S=0,B=3,z=[],se=[];return li(v).forEach(function(he,Ce){var Ne=!0;if(Ce===0?Ne=he.reduce(function(Ke,Ye){if(on(Ye))switch(Ye.value){case"center":return se.push(OA),!1;case"top":case"left":return se.push(Pr),!1;case"right":case"bottom":return se.push(Ai),!1}else if(Xn(Ye)||Qo(Ye))return se.push(Ye),!1;return Ke},Ne):Ce===1&&(Ne=he.reduce(function(Ke,Ye){if(on(Ye))switch(Ye.value){case Ou:return S=0,!1;case hA:return S=1,!1;case pc:case rh:return B=0,!1;case ah:return B=1,!1;case ih:return B=2,!1;case xo:case Qu:return B=3,!1}else if(Qo(Ye)||Xn(Ye))return Array.isArray(B)||(B=[]),B.push(Ye),!1;return Ke},Ne)),Ne){var Le=eo(j,he);z.push(Le)}}),{size:B,shape:S,stops:z,position:se,type:2}},Pu=function(j){return j.type===1},su=function(j){return j.type===2},VA={name:"image",parse:function(j,v){if(v.type===22){var S={url:v.value,type:0};return j.cache.addImage(v.value),S}if(v.type===18){var B=Il[v.name];if(typeof B>"u")throw new Error('Attempting to parse an unsupported image function "'+v.name+'"');return B(j,v.values)}throw new Error("Unsupported image type "+v.type)}};function ku(j){return!(j.type===20&&j.value==="none")&&(j.type!==18||!!Il[j.name])}var Il={"linear-gradient":HA,"-moz-linear-gradient":dA,"-ms-linear-gradient":dA,"-o-linear-gradient":dA,"-webkit-linear-gradient":dA,"radial-gradient":vo,"-moz-radial-gradient":Tl,"-ms-radial-gradient":Tl,"-o-radial-gradient":Tl,"-webkit-radial-gradient":Tl,"-webkit-gradient":nh},nu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(j,v){if(v.length===0)return[];var S=v[0];return S.type===20&&S.value==="none"?[]:v.filter(function(B){return Ma(B)&&ku(B)}).map(function(B){return VA.parse(j,B)})}},Li={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(j,v){return v.map(function(S){if(on(S))switch(S.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},bi={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(j,v){return li(v).map(function(S){return S.filter(Xn)}).map(Oo)}},Mu={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(j,v){return li(v).map(function(S){return S.filter(on).map(function(B){return B.value}).join(" ")}).map(Qi)}},Qi=function(j){switch(j){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Wl;(function(j){j.AUTO="auto",j.CONTAIN="contain",j.COVER="cover"})(Wl||(Wl={}));var ko={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(j,v){return li(v).map(function(S){return S.filter(ru)})}},ru=function(j){return on(j)||Xn(j)},Xl=function(j){return{name:"border-"+j+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},fA=Xl("top"),au=Xl("right"),Hu=Xl("bottom"),gc=Xl("left"),KA=function(j){return{name:"border-radius-"+j,initialValue:"0 0",prefix:!1,type:1,parse:function(v,S){return Oo(S.filter(Xn))}}},Mo=KA("top-left"),xc=KA("top-right"),zA=KA("bottom-right"),Vu=KA("bottom-left"),mA=function(j){return{name:"border-"+j+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(v,S){switch(S){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Ho=mA("top"),Vo=mA("right"),pA=mA("bottom"),Ko=mA("left"),to=function(j){return{name:"border-"+j+"-width",initialValue:"0",type:0,prefix:!1,parse:function(v,S){return Na(S)?S.number:0}}},yo=to("top"),hf=to("right"),oh=to("bottom"),Ku=to("left"),ff={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wi={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(j,v){switch(v){case"rtl":return 1;case"ltr":default:return 0}}},kr={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(j,v){return v.filter(on).reduce(function(S,B){return S|Rn(B.value)},0)}},Rn=function(j){switch(j){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},so={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(j,v){switch(v){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},pa={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(j,v){return v.type===20&&v.value==="normal"?0:v.type===17||v.type===15?v.number:0}},co;(function(j){j.NORMAL="normal",j.STRICT="strict"})(co||(co={}));var gA={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(j,v){switch(v){case"strict":return co.STRICT;case"normal":default:return co.NORMAL}}},lh={name:"line-height",initialValue:"normal",prefix:!1,type:4},_l=function(j,v){return on(j)&&j.value==="normal"?1.2*v:j.type===17?v*j.number:Xn(j)?Cn(j,v):v},ji={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(j,v){return v.type===20&&v.value==="none"?null:VA.parse(j,v)}},GA={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(j,v){switch(v){case"inside":return 0;case"outside":default:return 1}}},iu={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(j,v){switch(v){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Jl=function(j){return{name:"margin-"+j,initialValue:"0",prefix:!1,type:4}},zu=Jl("top"),xA=Jl("right"),Fl=Jl("bottom"),vA=Jl("left"),zo={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(j,v){return v.filter(on).map(function(S){switch(S.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},vc={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(j,v){switch(v){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ul=function(j){return{name:"padding-"+j,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},yA=Ul("top"),Gu=Ul("right"),bA=Ul("bottom"),Bi=Ul("left"),$u={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(j,v){switch(v){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},mf={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(j,v){switch(v){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Dm={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(j,v){return v.length===1&&Lo(v[0],"none")?[]:li(v).map(function(S){for(var B={color:Ea.TRANSPARENT,offsetX:Pr,offsetY:Pr,blur:Pr},z=0,se=0;se<S.length;se++){var he=S[se];Qo(he)?(z===0?B.offsetX=he:z===1?B.offsetY=he:B.blur=he,z++):B.color=vi.parse(j,he)}return B})}},Rm={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(j,v){switch(v){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Lm={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(j,v){if(v.type===20&&v.value==="none")return null;if(v.type===18){var S=ou[v.name];if(typeof S>"u")throw new Error('Attempting to parse an unsupported transform function "'+v.name+'"');return S(v.values)}return null}},Ta=function(j){var v=j.filter(function(S){return S.type===17}).map(function(S){return S.number});return v.length===6?v:null},yc=function(j){var v=j.filter(function(Ne){return Ne.type===17}).map(function(Ne){return Ne.number}),S=v[0],B=v[1];v[2],v[3];var z=v[4],se=v[5];v[6],v[7],v[8],v[9],v[10],v[11];var he=v[12],Ce=v[13];return v[14],v[15],v.length===16?[S,B,z,se,he,Ce]:null},ou={matrix:Ta,matrix3d:yc},bc={type:16,number:50,flags:Qa},Yu=[bc,bc],y={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(j,v){var S=v.filter(Xn);return S.length!==2?Yu:[S[0],S[1]]}},_={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(j,v){switch(v){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},K;(function(j){j.NORMAL="normal",j.BREAK_ALL="break-all",j.KEEP_ALL="keep-all"})(K||(K={}));for(var q={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(j,v){switch(v){case"break-all":return K.BREAK_ALL;case"keep-all":return K.KEEP_ALL;case"normal":default:return K.NORMAL}}},de={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(j,v){if(v.type===20)return{auto:!0,order:0};if(Wn(v))return{auto:!1,order:v.number};throw new Error("Invalid z-index number parsed")}},fe={name:"time",parse:function(j,v){if(v.type===15)switch(v.unit.toLowerCase()){case"s":return 1e3*v.number;case"ms":return v.number}throw new Error("Unsupported time type")}},xe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(j,v){return Wn(v)?v.number:1}},be={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},je={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(j,v){return v.filter(on).map(function(S){switch(S.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(S){return S!==0})}},_e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(j,v){var S=[],B=[];return v.forEach(function(z){switch(z.type){case 20:case 0:S.push(z.value);break;case 17:S.push(z.number.toString());break;case 4:B.push(S.join(" ")),S.length=0;break}}),S.length&&B.push(S.join(" ")),B.map(function(z){return z.indexOf(" ")===-1?z:"'"+z+"'"})}},Oe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},qe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(j,v){if(Wn(v))return v.number;if(on(v))switch(v.value){case"bold":return 700;case"normal":default:return 400}return 400}},Ie={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(j,v){return v.filter(on).map(function(S){return S.value})}},He={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(j,v){switch(v){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ve=function(j,v){return(j&v)!==0},pt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(j,v){if(v.length===0)return[];var S=v[0];return S.type===20&&S.value==="none"?[]:v}},We={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(j,v){if(v.length===0)return null;var S=v[0];if(S.type===20&&S.value==="none")return null;for(var B=[],z=v.filter(Al),se=0;se<z.length;se++){var he=z[se],Ce=z[se+1];if(he.type===20){var Ne=Ce&&Wn(Ce)?Ce.number:1;B.push({counter:he.value,increment:Ne})}}return B}},ft={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(j,v){if(v.length===0)return[];for(var S=[],B=v.filter(Al),z=0;z<B.length;z++){var se=B[z],he=B[z+1];if(on(se)&&se.value!=="none"){var Ce=he&&Wn(he)?he.number:0;S.push({counter:se.value,reset:Ce})}}return S}},bt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(j,v){return v.filter(Na).map(function(S){return fe.parse(j,S)})}},kt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(j,v){if(v.length===0)return null;var S=v[0];if(S.type===20&&S.value==="none")return null;var B=[],z=v.filter(go);if(z.length%2!==0)return null;for(var se=0;se<z.length;se+=2){var he=z[se].value,Ce=z[se+1].value;B.push({open:he,close:Ce})}return B}},Nt=function(j,v,S){if(!j)return"";var B=j[Math.min(v,j.length-1)];return B?S?B.open:B.close:""},js={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(j,v){return v.length===1&&Lo(v[0],"none")?[]:li(v).map(function(S){for(var B={color:255,offsetX:Pr,offsetY:Pr,blur:Pr,spread:Pr,inset:!1},z=0,se=0;se<S.length;se++){var he=S[se];Lo(he,"inset")?B.inset=!0:Qo(he)?(z===0?B.offsetX=he:z===1?B.offsetY=he:z===2?B.blur=he:B.spread=he,z++):B.color=vi.parse(j,he)}return B})}},hs={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(j,v){var S=[0,1,2],B=[];return v.filter(on).forEach(function(z){switch(z.value){case"stroke":B.push(1);break;case"fill":B.push(0);break;case"markers":B.push(2);break}}),S.forEach(function(z){B.indexOf(z)===-1&&B.push(z)}),B}},nn={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vs={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(j,v){return Na(v)?v.number:0}},Un=(function(){function j(v,S){var B,z;this.animationDuration=At(v,bt,S.animationDuration),this.backgroundClip=At(v,Yl,S.backgroundClip),this.backgroundColor=At(v,Ri,S.backgroundColor),this.backgroundImage=At(v,nu,S.backgroundImage),this.backgroundOrigin=At(v,Li,S.backgroundOrigin),this.backgroundPosition=At(v,bi,S.backgroundPosition),this.backgroundRepeat=At(v,Mu,S.backgroundRepeat),this.backgroundSize=At(v,ko,S.backgroundSize),this.borderTopColor=At(v,fA,S.borderTopColor),this.borderRightColor=At(v,au,S.borderRightColor),this.borderBottomColor=At(v,Hu,S.borderBottomColor),this.borderLeftColor=At(v,gc,S.borderLeftColor),this.borderTopLeftRadius=At(v,Mo,S.borderTopLeftRadius),this.borderTopRightRadius=At(v,xc,S.borderTopRightRadius),this.borderBottomRightRadius=At(v,zA,S.borderBottomRightRadius),this.borderBottomLeftRadius=At(v,Vu,S.borderBottomLeftRadius),this.borderTopStyle=At(v,Ho,S.borderTopStyle),this.borderRightStyle=At(v,Vo,S.borderRightStyle),this.borderBottomStyle=At(v,pA,S.borderBottomStyle),this.borderLeftStyle=At(v,Ko,S.borderLeftStyle),this.borderTopWidth=At(v,yo,S.borderTopWidth),this.borderRightWidth=At(v,hf,S.borderRightWidth),this.borderBottomWidth=At(v,oh,S.borderBottomWidth),this.borderLeftWidth=At(v,Ku,S.borderLeftWidth),this.boxShadow=At(v,js,S.boxShadow),this.color=At(v,ff,S.color),this.direction=At(v,wi,S.direction),this.display=At(v,kr,S.display),this.float=At(v,so,S.cssFloat),this.fontFamily=At(v,_e,S.fontFamily),this.fontSize=At(v,Oe,S.fontSize),this.fontStyle=At(v,He,S.fontStyle),this.fontVariant=At(v,Ie,S.fontVariant),this.fontWeight=At(v,qe,S.fontWeight),this.letterSpacing=At(v,pa,S.letterSpacing),this.lineBreak=At(v,gA,S.lineBreak),this.lineHeight=At(v,lh,S.lineHeight),this.listStyleImage=At(v,ji,S.listStyleImage),this.listStylePosition=At(v,GA,S.listStylePosition),this.listStyleType=At(v,iu,S.listStyleType),this.marginTop=At(v,zu,S.marginTop),this.marginRight=At(v,xA,S.marginRight),this.marginBottom=At(v,Fl,S.marginBottom),this.marginLeft=At(v,vA,S.marginLeft),this.opacity=At(v,xe,S.opacity);var se=At(v,zo,S.overflow);this.overflowX=se[0],this.overflowY=se[se.length>1?1:0],this.overflowWrap=At(v,vc,S.overflowWrap),this.paddingTop=At(v,yA,S.paddingTop),this.paddingRight=At(v,Gu,S.paddingRight),this.paddingBottom=At(v,bA,S.paddingBottom),this.paddingLeft=At(v,Bi,S.paddingLeft),this.paintOrder=At(v,hs,S.paintOrder),this.position=At(v,mf,S.position),this.textAlign=At(v,$u,S.textAlign),this.textDecorationColor=At(v,be,(B=S.textDecorationColor)!==null&&B!==void 0?B:S.color),this.textDecorationLine=At(v,je,(z=S.textDecorationLine)!==null&&z!==void 0?z:S.textDecoration),this.textShadow=At(v,Dm,S.textShadow),this.textTransform=At(v,Rm,S.textTransform),this.transform=At(v,Lm,S.transform),this.transformOrigin=At(v,y,S.transformOrigin),this.visibility=At(v,_,S.visibility),this.webkitTextStrokeColor=At(v,nn,S.webkitTextStrokeColor),this.webkitTextStrokeWidth=At(v,vs,S.webkitTextStrokeWidth),this.wordBreak=At(v,q,S.wordBreak),this.zIndex=At(v,de,S.zIndex)}return j.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},j.prototype.isTransparent=function(){return yi(this.backgroundColor)},j.prototype.isTransformed=function(){return this.transform!==null},j.prototype.isPositioned=function(){return this.position!==0},j.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},j.prototype.isFloating=function(){return this.float!==0},j.prototype.isInlineLevel=function(){return Ve(this.display,4)||Ve(this.display,33554432)||Ve(this.display,268435456)||Ve(this.display,536870912)||Ve(this.display,67108864)||Ve(this.display,134217728)},j})(),Mr=(function(){function j(v,S){this.content=At(v,pt,S.content),this.quotes=At(v,kt,S.quotes)}return j})(),un=(function(){function j(v,S){this.counterIncrement=At(v,We,S.counterIncrement),this.counterReset=At(v,ft,S.counterReset)}return j})(),At=function(j,v,S){var B=new ar,z=S!==null&&typeof S<"u"?S.toString():v.initialValue;B.write(z);var se=new Za(B.read());switch(v.type){case 2:var he=se.parseComponentValue();return v.parse(j,on(he)?he.value:v.initialValue);case 0:return v.parse(j,se.parseComponentValue());case 1:return v.parse(j,se.parseComponentValues());case 4:return se.parseComponentValue();case 3:switch(v.format){case"angle":return $l.parse(j,se.parseComponentValue());case"color":return vi.parse(j,se.parseComponentValue());case"image":return VA.parse(j,se.parseComponentValue());case"length":var Ce=se.parseComponentValue();return Qo(Ce)?Ce:Pr;case"length-percentage":var Ne=se.parseComponentValue();return Xn(Ne)?Ne:Pr;case"time":return fe.parse(j,se.parseComponentValue())}break}},es="data-html2canvas-debug",ra=function(j){var v=j.getAttribute(es);switch(v){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Vs=function(j,v){var S=ra(j);return S===1||v===S},Ws=(function(){function j(v,S){if(this.context=v,this.textNodes=[],this.elements=[],this.flags=0,Vs(S,3))debugger;this.styles=new Un(v,window.getComputedStyle(S,null)),gh(S)&&(this.styles.animationDuration.some(function(B){return B>0})&&(S.style.animationDuration="0s"),this.styles.transform!==null&&(S.style.transform="none")),this.bounds=f(this.context,S),Vs(S,4)&&(this.flags|=16)}return j})(),fr="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ia=typeof Uint8Array>"u"?[]:new Uint8Array(256),mr=0;mr<Ha.length;mr++)Ia[Ha.charCodeAt(mr)]=mr;for(var Va=function(j){var v=j.length*.75,S=j.length,B,z=0,se,he,Ce,Ne;j[j.length-1]==="="&&(v--,j[j.length-2]==="="&&v--);var Le=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(v):new Array(v),Ke=Array.isArray(Le)?Le:new Uint8Array(Le);for(B=0;B<S;B+=4)se=Ia[j.charCodeAt(B)],he=Ia[j.charCodeAt(B+1)],Ce=Ia[j.charCodeAt(B+2)],Ne=Ia[j.charCodeAt(B+3)],Ke[z++]=se<<2|he>>4,Ke[z++]=(he&15)<<4|Ce>>2,Ke[z++]=(Ce&3)<<6|Ne&63;return Le},Oi=function(j){for(var v=j.length,S=[],B=0;B<v;B+=2)S.push(j[B+1]<<8|j[B]);return S},Ka=function(j){for(var v=j.length,S=[],B=0;B<v;B+=4)S.push(j[B+3]<<24|j[B+2]<<16|j[B+1]<<8|j[B]);return S},ln=5,On=11,Hr=2,or=On-ln,za=65536>>ln,aa=1<<ln,Pn=aa-1,_a=1024>>ln,pr=za+_a,Ga=pr,$a=32,Br=Ga+$a,Vn=65536>>On,Pi=1<<or,ga=Pi-1,Qs=function(j,v,S){return j.slice?j.slice(v,S):new Uint16Array(Array.prototype.slice.call(j,v,S))},Hs=function(j,v,S){return j.slice?j.slice(v,S):new Uint32Array(Array.prototype.slice.call(j,v,S))},qn=function(j,v){var S=Va(j),B=Array.isArray(S)?Ka(S):new Uint32Array(S),z=Array.isArray(S)?Oi(S):new Uint16Array(S),se=24,he=Qs(z,se/2,B[4]/2),Ce=B[5]===2?Qs(z,(se+B[4])/2):Hs(B,Math.ceil((se+B[4])/4));return new uo(B[0],B[1],B[2],B[3],he,Ce)},uo=(function(){function j(v,S,B,z,se,he){this.initialValue=v,this.errorValue=S,this.highStart=B,this.highValueIndex=z,this.index=se,this.data=he}return j.prototype.get=function(v){var S;if(v>=0){if(v<55296||v>56319&&v<=65535)return S=this.index[v>>ln],S=(S<<Hr)+(v&Pn),this.data[S];if(v<=65535)return S=this.index[za+(v-55296>>ln)],S=(S<<Hr)+(v&Pn),this.data[S];if(v<this.highStart)return S=Br-Vn+(v>>On),S=this.index[S],S+=v>>ln&ga,S=this.index[S],S=(S<<Hr)+(v&Pn),this.data[S];if(v<=1114111)return this.data[this.highValueIndex]}return this.errorValue},j})(),bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",no=typeof Uint8Array>"u"?[]:new Uint8Array(256),ia=0;ia<bo.length;ia++)no[bo.charCodeAt(ia)]=ia;var wA=1,Dl=2,wc=3,Sr=4,Wu=5,Ah=7,lu=8,pl=9,ch=10,Xu=11,Ju=12,Au=13,ei=14,Xr=15,cu=function(j){for(var v=[],S=0,B=j.length;S<B;){var z=j.charCodeAt(S++);if(z>=55296&&z<=56319&&S<B){var se=j.charCodeAt(S++);(se&64512)===56320?v.push(((z&1023)<<10)+(se&1023)+65536):(v.push(z),S--)}else v.push(z)}return v},jA=function(){for(var j=[],v=0;v<arguments.length;v++)j[v]=arguments[v];if(String.fromCodePoint)return String.fromCodePoint.apply(String,j);var S=j.length;if(!S)return"";for(var B=[],z=-1,se="";++z<S;){var he=j[z];he<=65535?B.push(he):(he-=65536,B.push((he>>10)+55296,he%1024+56320)),(z+1===S||B.length>16384)&&(se+=String.fromCharCode.apply(String,B),B.length=0)}return se},jc=qn(fr),ci="",Go="",qu=function(j){return jc.get(j)},Bc=function(j,v,S){var B=S-2,z=v[B],se=v[S-1],he=v[S];if(se===Dl&&he===wc)return ci;if(se===Dl||se===wc||se===Sr||he===Dl||he===wc||he===Sr)return Go;if(se===lu&&[lu,pl,Xu,Ju].indexOf(he)!==-1||(se===Xu||se===pl)&&(he===pl||he===ch)||(se===Ju||se===ch)&&he===ch||he===Au||he===Wu||he===Ah||se===wA)return ci;if(se===Au&&he===ei){for(;z===Wu;)z=v[--B];if(z===ei)return ci}if(se===Xr&&he===Xr){for(var Ce=0;z===Xr;)Ce++,z=v[--B];if(Ce%2===0)return ci}return Go},Zu=function(j){var v=cu(j),S=v.length,B=0,z=0,se=v.map(qu);return{next:function(){if(B>=S)return{done:!0,value:null};for(var he=ci;B<S&&(he=Bc(v,se,++B))===ci;);if(he!==ci||B===S){var Ce=jA.apply(null,v.slice(z,B));return z=B,{value:Ce,done:!1}}return{done:!0,value:null}}}},ed=function(j){for(var v=Zu(j),S=[],B;!(B=v.next()).done;)B.value&&S.push(B.value.slice());return S},ql=function(j){var v=123;if(j.createRange){var S=j.createRange();if(S.getBoundingClientRect){var B=j.createElement("boundtest");B.style.height=v+"px",B.style.display="block",j.body.appendChild(B),S.selectNode(B);var z=S.getBoundingClientRect(),se=Math.round(z.height);if(j.body.removeChild(B),se===v)return!0}}return!1},uh=function(j){var v=j.createElement("boundtest");v.style.width="50px",v.style.display="block",v.style.fontSize="12px",v.style.letterSpacing="0px",v.style.wordSpacing="0px",j.body.appendChild(v);var S=j.createRange();v.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var B=v.firstChild,z=m(B.data).map(function(Ne){return x(Ne)}),se=0,he={},Ce=z.every(function(Ne,Le){S.setStart(B,se),S.setEnd(B,se+Ne.length);var Ke=S.getBoundingClientRect();se+=Ne.length;var Ye=Ke.x>he.x||Ke.y>he.y;return he=Ke,Le===0?!0:Ye});return j.body.removeChild(v),Ce},dh=function(){return typeof new Image().crossOrigin<"u"},pf=function(){return typeof new XMLHttpRequest().responseType=="string"},hh=function(j){var v=new Image,S=j.createElement("canvas"),B=S.getContext("2d");if(!B)return!1;v.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{B.drawImage(v,0,0),S.toDataURL()}catch{return!1}return!0},Zl=function(j){return j[0]===0&&j[1]===255&&j[2]===0&&j[3]===255},gf=function(j){var v=j.createElement("canvas"),S=100;v.width=S,v.height=S;var B=v.getContext("2d");if(!B)return Promise.reject(!1);B.fillStyle="rgb(0, 255, 0)",B.fillRect(0,0,S,S);var z=new Image,se=v.toDataURL();z.src=se;var he=td(S,S,0,0,z);return B.fillStyle="red",B.fillRect(0,0,S,S),fh(he).then(function(Ce){B.drawImage(Ce,0,0);var Ne=B.getImageData(0,0,S,S).data;B.fillStyle="red",B.fillRect(0,0,S,S);var Le=j.createElement("div");return Le.style.backgroundImage="url("+se+")",Le.style.height=S+"px",Zl(Ne)?fh(td(S,S,0,0,Le)):Promise.reject(!1)}).then(function(Ce){return B.drawImage(Ce,0,0),Zl(B.getImageData(0,0,S,S).data)}).catch(function(){return!1})},td=function(j,v,S,B,z){var se="http://www.w3.org/2000/svg",he=document.createElementNS(se,"svg"),Ce=document.createElementNS(se,"foreignObject");return he.setAttributeNS(null,"width",j.toString()),he.setAttributeNS(null,"height",v.toString()),Ce.setAttributeNS(null,"width","100%"),Ce.setAttributeNS(null,"height","100%"),Ce.setAttributeNS(null,"x",S.toString()),Ce.setAttributeNS(null,"y",B.toString()),Ce.setAttributeNS(null,"externalResourcesRequired","true"),he.appendChild(Ce),Ce.appendChild(z),he},fh=function(j){return new Promise(function(v,S){var B=new Image;B.onload=function(){return v(B)},B.onerror=S,B.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(j))})},ti={get SUPPORT_RANGE_BOUNDS(){var j=ql(document);return Object.defineProperty(ti,"SUPPORT_RANGE_BOUNDS",{value:j}),j},get SUPPORT_WORD_BREAKING(){var j=ti.SUPPORT_RANGE_BOUNDS&&uh(document);return Object.defineProperty(ti,"SUPPORT_WORD_BREAKING",{value:j}),j},get SUPPORT_SVG_DRAWING(){var j=hh(document);return Object.defineProperty(ti,"SUPPORT_SVG_DRAWING",{value:j}),j},get SUPPORT_FOREIGNOBJECT_DRAWING(){var j=typeof Array.from=="function"&&typeof window.fetch=="function"?gf(document):Promise.resolve(!1);return Object.defineProperty(ti,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:j}),j},get SUPPORT_CORS_IMAGES(){var j=dh();return Object.defineProperty(ti,"SUPPORT_CORS_IMAGES",{value:j}),j},get SUPPORT_RESPONSE_TYPE(){var j=pf();return Object.defineProperty(ti,"SUPPORT_RESPONSE_TYPE",{value:j}),j},get SUPPORT_CORS_XHR(){var j="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ti,"SUPPORT_CORS_XHR",{value:j}),j},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var j=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ti,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:j}),j}},Sc=(function(){function j(v,S){this.text=v,this.bounds=S}return j})(),$A=function(j,v,S,B){var z=tA(v,S),se=[],he=0;return z.forEach(function(Ce){if(S.textDecorationLine.length||Ce.trim().length>0)if(ti.SUPPORT_RANGE_BOUNDS){var Ne=Cc(B,he,Ce.length).getClientRects();if(Ne.length>1){var Le=$o(Ce),Ke=0;Le.forEach(function(gt){se.push(new Sc(gt,u.fromDOMRectList(j,Cc(B,Ke+he,gt.length).getClientRects()))),Ke+=gt.length})}else se.push(new Sc(Ce,u.fromDOMRectList(j,Ne)))}else{var Ye=B.splitText(Ce.length);se.push(new Sc(Ce,sd(j,B))),B=Ye}else ti.SUPPORT_RANGE_BOUNDS||(B=B.splitText(Ce.length));he+=Ce.length}),se},sd=function(j,v){var S=v.ownerDocument;if(S){var B=S.createElement("html2canvaswrapper");B.appendChild(v.cloneNode(!0));var z=v.parentNode;if(z){z.replaceChild(B,v);var se=f(j,B);return B.firstChild&&z.replaceChild(B.firstChild,B),se}}return u.EMPTY},Cc=function(j,v,S){var B=j.ownerDocument;if(!B)throw new Error("Node has no owner document");var z=B.createRange();return z.setStart(j,v),z.setEnd(j,v+S),z},$o=function(j){if(ti.SUPPORT_NATIVE_TEXT_SEGMENTATION){var v=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(v.segment(j)).map(function(S){return S.segment})}return ed(j)},eA=function(j,v){if(ti.SUPPORT_NATIVE_TEXT_SEGMENTATION){var S=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(S.segment(j)).map(function(B){return B.segment})}return rd(j,v)},tA=function(j,v){return v.letterSpacing!==0?$o(j):eA(j,v)},nd=[32,160,4961,65792,65793,4153,4241],rd=function(j,v){for(var S=da(j,{lineBreak:v.lineBreak,wordBreak:v.overflowWrap==="break-word"?"break-word":v.wordBreak}),B=[],z,se=function(){if(z.value){var he=z.value.slice(),Ce=m(he),Ne="";Ce.forEach(function(Le){nd.indexOf(Le)===-1?Ne+=x(Le):(Ne.length&&B.push(Ne),B.push(x(Le)),Ne="")}),Ne.length&&B.push(Ne)}};!(z=S.next()).done;)se();return B},YA=(function(){function j(v,S,B){this.text=xf(S.data,B.textTransform),this.textBounds=$A(v,this.text,B,S)}return j})(),xf=function(j,v){switch(v){case 1:return j.toLowerCase();case 3:return j.replace(Nc,Ec);case 2:return j.toUpperCase();default:return j}},Nc=/(^|\s|:|-|\(|\))([a-z])/g,Ec=function(j,v,S){return j.length>0?v+S.toUpperCase():j},Qm=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z.src=B.currentSrc||B.src,z.intrinsicWidth=B.naturalWidth,z.intrinsicHeight=B.naturalHeight,z.context.cache.addImage(z.src),z}return v})(Ws),vf=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z.canvas=B,z.intrinsicWidth=B.width,z.intrinsicHeight=B.height,z}return v})(Ws),$g=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this,se=new XMLSerializer,he=f(S,B);return B.setAttribute("width",he.width+"px"),B.setAttribute("height",he.height+"px"),z.svg="data:image/svg+xml,"+encodeURIComponent(se.serializeToString(B)),z.intrinsicWidth=B.width.baseVal.value,z.intrinsicHeight=B.height.baseVal.value,z.context.cache.addImage(z.svg),z}return v})(Ws),Om=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z.value=B.value,z}return v})(Ws),yf=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z.start=B.start,z.reversed=typeof B.reversed=="boolean"&&B.reversed===!0,z}return v})(Ws),Yg=[{type:15,flags:0,unit:"px",number:3}],Wg=[{type:16,flags:0,number:50}],Xg=function(j){return j.width>j.height?new u(j.left+(j.width-j.height)/2,j.top,j.height,j.height):j.width<j.height?new u(j.left,j.top+(j.height-j.width)/2,j.width,j.width):j},Pm=function(j){var v=j.type===km?new Array(j.value.length+1).join(""):j.value;return v.length===0?j.placeholder||"":v},mh="checkbox",ph="radio",km="password",Mm=707406591,bf=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;switch(z.type=B.type.toLowerCase(),z.checked=B.checked,z.value=Pm(B),(z.type===mh||z.type===ph)&&(z.styles.backgroundColor=3739148031,z.styles.borderTopColor=z.styles.borderRightColor=z.styles.borderBottomColor=z.styles.borderLeftColor=2779096575,z.styles.borderTopWidth=z.styles.borderRightWidth=z.styles.borderBottomWidth=z.styles.borderLeftWidth=1,z.styles.borderTopStyle=z.styles.borderRightStyle=z.styles.borderBottomStyle=z.styles.borderLeftStyle=1,z.styles.backgroundClip=[0],z.styles.backgroundOrigin=[0],z.bounds=Xg(z.bounds)),z.type){case mh:z.styles.borderTopRightRadius=z.styles.borderTopLeftRadius=z.styles.borderBottomRightRadius=z.styles.borderBottomLeftRadius=Yg;break;case ph:z.styles.borderTopRightRadius=z.styles.borderTopLeftRadius=z.styles.borderBottomRightRadius=z.styles.borderBottomLeftRadius=Wg;break}return z}return v})(Ws),Jg=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this,se=B.options[B.selectedIndex||0];return z.value=se&&se.text||"",z}return v})(Ws),wf=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z.value=B.value,z}return v})(Ws),Hm=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;z.src=B.src,z.width=parseInt(B.width,10)||0,z.height=parseInt(B.height,10)||0,z.backgroundColor=z.styles.backgroundColor;try{if(B.contentWindow&&B.contentWindow.document&&B.contentWindow.document.documentElement){z.tree=Km(S,B.contentWindow.document.documentElement);var se=B.contentWindow.document.documentElement?hl(S,getComputedStyle(B.contentWindow.document.documentElement).backgroundColor):Ea.TRANSPARENT,he=B.contentWindow.document.body?hl(S,getComputedStyle(B.contentWindow.document.body).backgroundColor):Ea.TRANSPARENT;z.backgroundColor=yi(se)?yi(he)?z.styles.backgroundColor:he:se}}catch{}return z}return v})(Ws),qg=["OL","UL","MENU"],ad=function(j,v,S,B){for(var z=v.firstChild,se=void 0;z;z=se)if(se=z.nextSibling,zm(z)&&z.data.trim().length>0)S.textNodes.push(new YA(j,z,S.styles));else if(BA(z))if(bh(z)&&z.assignedNodes)z.assignedNodes().forEach(function(Ce){return ad(j,Ce,S,B)});else{var he=Vm(j,z);he.styles.isVisible()&&(Yv(z,he,B)?he.flags|=4:Wv(he.styles)&&(he.flags|=2),qg.indexOf(z.tagName)!==-1&&(he.flags|=8),S.elements.push(he),z.slot,z.shadowRoot?ad(j,z.shadowRoot,he,B):!vh(z)&&!jf(z)&&!yh(z)&&ad(j,z,he,B))}},Vm=function(j,v){return Nf(v)?new Qm(j,v):Sf(v)?new vf(j,v):jf(v)?new $g(j,v):Zg(v)?new Om(j,v):e0(v)?new yf(j,v):xh(v)?new bf(j,v):yh(v)?new Jg(j,v):vh(v)?new wf(j,v):Gm(v)?new Hm(j,v):new Ws(j,v)},Km=function(j,v){var S=Vm(j,v);return S.flags|=4,ad(j,v,S,S),S},Yv=function(j,v,S){return v.styles.isPositionedWithZIndex()||v.styles.opacity<1||v.styles.isTransformed()||Bf(j)&&S.styles.isTransparent()},Wv=function(j){return j.isPositioned()||j.isFloating()},zm=function(j){return j.nodeType===Node.TEXT_NODE},BA=function(j){return j.nodeType===Node.ELEMENT_NODE},gh=function(j){return BA(j)&&typeof j.style<"u"&&!uu(j)},uu=function(j){return typeof j.className=="object"},Zg=function(j){return j.tagName==="LI"},e0=function(j){return j.tagName==="OL"},xh=function(j){return j.tagName==="INPUT"},t0=function(j){return j.tagName==="HTML"},jf=function(j){return j.tagName==="svg"},Bf=function(j){return j.tagName==="BODY"},Sf=function(j){return j.tagName==="CANVAS"},Cf=function(j){return j.tagName==="VIDEO"},Nf=function(j){return j.tagName==="IMG"},Gm=function(j){return j.tagName==="IFRAME"},Tc=function(j){return j.tagName==="STYLE"},s0=function(j){return j.tagName==="SCRIPT"},vh=function(j){return j.tagName==="TEXTAREA"},yh=function(j){return j.tagName==="SELECT"},bh=function(j){return j.tagName==="SLOT"},$m=function(j){return j.tagName.indexOf("-")>0},Ym=(function(){function j(){this.counters={}}return j.prototype.getCounterValue=function(v){var S=this.counters[v];return S&&S.length?S[S.length-1]:1},j.prototype.getCounterValues=function(v){var S=this.counters[v];return S||[]},j.prototype.pop=function(v){var S=this;v.forEach(function(B){return S.counters[B].pop()})},j.prototype.parse=function(v){var S=this,B=v.counterIncrement,z=v.counterReset,se=!0;B!==null&&B.forEach(function(Ce){var Ne=S.counters[Ce.counter];Ne&&Ce.increment!==0&&(se=!1,Ne.length||Ne.push(1),Ne[Math.max(0,Ne.length-1)]+=Ce.increment)});var he=[];return se&&z.forEach(function(Ce){var Ne=S.counters[Ce.counter];he.push(Ce.counter),Ne||(Ne=S.counters[Ce.counter]=[]),Ne.push(Ce.reset)}),he},j})(),Wm={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Xm={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Xv={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Jm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oa=function(j,v,S,B,z,se){return j<v||j>S?od(j,z,se.length>0):B.integers.reduce(function(he,Ce,Ne){for(;j>=Ce;)j-=Ce,he+=B.values[Ne];return he},"")+se},ki=function(j,v,S,B){var z="";do S||j--,z=B(j)+z,j/=v;while(j*v>=v);return z},Ya=function(j,v,S,B,z){var se=S-v+1;return(j<0?"-":"")+(ki(Math.abs(j),se,B,function(he){return x(Math.floor(he%se)+v)})+z)},Ic=function(j,v,S){S===void 0&&(S=". ");var B=v.length;return ki(Math.abs(j),B,!1,function(z){return v[Math.floor(z%B)]})+S},du=1,WA=2,Rl=4,id=8,Ll=function(j,v,S,B,z,se){if(j<-9999||j>9999)return od(j,4,z.length>0);var he=Math.abs(j),Ce=z;if(he===0)return v[0]+Ce;for(var Ne=0;he>0&&Ne<=4;Ne++){var Le=he%10;Le===0&&Ve(se,du)&&Ce!==""?Ce=v[Le]+Ce:Le>1||Le===1&&Ne===0||Le===1&&Ne===1&&Ve(se,WA)||Le===1&&Ne===1&&Ve(se,Rl)&&j>100||Le===1&&Ne>1&&Ve(se,id)?Ce=v[Le]+(Ne>0?S[Ne-1]:"")+Ce:Le===1&&Ne>0&&(Ce=S[Ne-1]+Ce),he=Math.floor(he/10)}return(j<0?B:"")+Ce},qm="",n0="",wh="",jh="",od=function(j,v,S){var B=S?". ":"",z=S?"":"",se=S?", ":"",he=S?" ":"";switch(v){case 0:return""+he;case 1:return""+he;case 2:return""+he;case 5:var Ce=Ya(j,48,57,!0,B);return Ce.length<4?"0"+Ce:Ce;case 4:return Ic(j,"",z);case 6:return oa(j,1,3999,Wm,3,B).toLowerCase();case 7:return oa(j,1,3999,Wm,3,B);case 8:return Ya(j,945,969,!1,B);case 9:return Ya(j,97,122,!1,B);case 10:return Ya(j,65,90,!1,B);case 11:return Ya(j,1632,1641,!0,B);case 12:case 49:return oa(j,1,9999,Xm,3,B);case 35:return oa(j,1,9999,Xm,3,B).toLowerCase();case 13:return Ya(j,2534,2543,!0,B);case 14:case 30:return Ya(j,6112,6121,!0,B);case 15:return Ic(j,"",z);case 16:return Ic(j,"",z);case 17:case 48:return Ll(j,"",qm,"",z,WA|Rl|id);case 47:return Ll(j,"",n0,"",z,du|WA|Rl|id);case 42:return Ll(j,"",qm,"",z,WA|Rl|id);case 41:return Ll(j,"",n0,"",z,du|WA|Rl|id);case 26:return Ll(j,"","",wh,z,0);case 25:return Ll(j,"","",wh,z,du|WA|Rl);case 31:return Ll(j,"","",jh,se,du|WA|Rl);case 33:return Ll(j,"","",jh,se,0);case 32:return Ll(j,"","",jh,se,du|WA|Rl);case 18:return Ya(j,2406,2415,!0,B);case 20:return oa(j,1,19999,Jm,3,B);case 21:return Ya(j,2790,2799,!0,B);case 22:return Ya(j,2662,2671,!0,B);case 22:return oa(j,1,10999,Xv,3,B);case 23:return Ic(j,"");case 24:return Ic(j,"");case 27:return Ya(j,3302,3311,!0,B);case 28:return Ic(j,"",z);case 29:return Ic(j,"",z);case 34:return Ya(j,3792,3801,!0,B);case 37:return Ya(j,6160,6169,!0,B);case 38:return Ya(j,4160,4169,!0,B);case 39:return Ya(j,2918,2927,!0,B);case 40:return Ya(j,1776,1785,!0,B);case 43:return Ya(j,3046,3055,!0,B);case 44:return Ya(j,3174,3183,!0,B);case 45:return Ya(j,3664,3673,!0,B);case 46:return Ya(j,3872,3881,!0,B);case 3:default:return Ya(j,48,57,!0,B)}},Zm="data-html2canvas-ignore",ep=(function(){function j(v,S,B){if(this.context=v,this.options=B,this.scrolledElements=[],this.referenceElement=S,this.counters=new Ym,this.quoteDepth=0,!S.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(S.ownerDocument.documentElement,!1)}return j.prototype.toIFrame=function(v,S){var B=this,z=tp(v,S);if(!z.contentWindow)return Promise.reject("Unable to find iframe window");var se=v.defaultView.pageXOffset,he=v.defaultView.pageYOffset,Ce=z.contentWindow,Ne=Ce.document,Le=np(z).then(function(){return o(B,void 0,void 0,function(){var Ke,Ye;return c(this,function(gt){switch(gt.label){case 0:return this.scrolledElements.forEach(i0),Ce&&(Ce.scrollTo(S.left,S.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Ce.scrollY!==S.top||Ce.scrollX!==S.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Ce.scrollX-S.left,Ce.scrollY-S.top,0,0))),Ke=this.options.onclone,Ye=this.clonedReferenceElement,typeof Ye>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Ne.fonts&&Ne.fonts.ready?[4,Ne.fonts.ready]:[3,2];case 1:gt.sent(),gt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,r0(Ne)]:[3,4];case 3:gt.sent(),gt.label=4;case 4:return typeof Ke=="function"?[2,Promise.resolve().then(function(){return Ke(Ne,Ye)}).then(function(){return z})]:[2,z]}})})});return Ne.open(),Ne.write(a0(document.doctype)+"<html></html>"),rp(this.referenceElement.ownerDocument,se,he),Ne.replaceChild(Ne.adoptNode(this.documentElement),Ne.documentElement),Ne.close(),Le},j.prototype.createElementClone=function(v){if(Vs(v,2))debugger;if(Sf(v))return this.createCanvasClone(v);if(Cf(v))return this.createVideoClone(v);if(Tc(v))return this.createStyleClone(v);var S=v.cloneNode(!1);return Nf(S)&&(Nf(v)&&v.currentSrc&&v.currentSrc!==v.src&&(S.src=v.currentSrc,S.srcset=""),S.loading==="lazy"&&(S.loading="eager")),$m(S)?this.createCustomElementClone(S):S},j.prototype.createCustomElementClone=function(v){var S=document.createElement("html2canvascustomelement");return Bh(v.style,S),S},j.prototype.createStyleClone=function(v){try{var S=v.sheet;if(S&&S.cssRules){var B=[].slice.call(S.cssRules,0).reduce(function(se,he){return he&&typeof he.cssText=="string"?se+he.cssText:se},""),z=v.cloneNode(!1);return z.textContent=B,z}}catch(se){if(this.context.logger.error("Unable to access cssRules property",se),se.name!=="SecurityError")throw se}return v.cloneNode(!1)},j.prototype.createCanvasClone=function(v){var S;if(this.options.inlineImages&&v.ownerDocument){var B=v.ownerDocument.createElement("img");try{return B.src=v.toDataURL(),B}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",v)}}var z=v.cloneNode(!1);try{z.width=v.width,z.height=v.height;var se=v.getContext("2d"),he=z.getContext("2d");if(he)if(!this.options.allowTaint&&se)he.putImageData(se.getImageData(0,0,v.width,v.height),0,0);else{var Ce=(S=v.getContext("webgl2"))!==null&&S!==void 0?S:v.getContext("webgl");if(Ce){var Ne=Ce.getContextAttributes();(Ne==null?void 0:Ne.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",v)}he.drawImage(v,0,0)}return z}catch{this.context.logger.info("Unable to clone canvas as it is tainted",v)}return z},j.prototype.createVideoClone=function(v){var S=v.ownerDocument.createElement("canvas");S.width=v.offsetWidth,S.height=v.offsetHeight;var B=S.getContext("2d");try{return B&&(B.drawImage(v,0,0,S.width,S.height),this.options.allowTaint||B.getImageData(0,0,S.width,S.height)),S}catch{this.context.logger.info("Unable to clone video as it is tainted",v)}var z=v.ownerDocument.createElement("canvas");return z.width=v.offsetWidth,z.height=v.offsetHeight,z},j.prototype.appendChildNode=function(v,S,B){(!BA(S)||!s0(S)&&!S.hasAttribute(Zm)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(S)))&&(!this.options.copyStyles||!BA(S)||!Tc(S))&&v.appendChild(this.cloneNode(S,B))},j.prototype.cloneChildNodes=function(v,S,B){for(var z=this,se=v.shadowRoot?v.shadowRoot.firstChild:v.firstChild;se;se=se.nextSibling)if(BA(se)&&bh(se)&&typeof se.assignedNodes=="function"){var he=se.assignedNodes();he.length&&he.forEach(function(Ce){return z.appendChildNode(S,Ce,B)})}else this.appendChildNode(S,se,B)},j.prototype.cloneNode=function(v,S){if(zm(v))return document.createTextNode(v.data);if(!v.ownerDocument)return v.cloneNode(!1);var B=v.ownerDocument.defaultView;if(B&&BA(v)&&(gh(v)||uu(v))){var z=this.createElementClone(v);z.style.transitionProperty="none";var se=B.getComputedStyle(v),he=B.getComputedStyle(v,":before"),Ce=B.getComputedStyle(v,":after");this.referenceElement===v&&gh(z)&&(this.clonedReferenceElement=z),Bf(z)&&op(z);var Ne=this.counters.parse(new un(this.context,se)),Le=this.resolvePseudoContent(v,z,he,hu.BEFORE);$m(v)&&(S=!0),Cf(v)||this.cloneChildNodes(v,z,S),Le&&z.insertBefore(Le,z.firstChild);var Ke=this.resolvePseudoContent(v,z,Ce,hu.AFTER);return Ke&&z.appendChild(Ke),this.counters.pop(Ne),(se&&(this.options.copyStyles||uu(v))&&!Gm(v)||S)&&Bh(se,z),(v.scrollTop!==0||v.scrollLeft!==0)&&this.scrolledElements.push([z,v.scrollLeft,v.scrollTop]),(vh(v)||yh(v))&&(vh(z)||yh(z))&&(z.value=v.value),z}return v.cloneNode(!1)},j.prototype.resolvePseudoContent=function(v,S,B,z){var se=this;if(B){var he=B.content,Ce=S.ownerDocument;if(!(!Ce||!he||he==="none"||he==="-moz-alt-content"||B.display==="none")){this.counters.parse(new un(this.context,B));var Ne=new Mr(this.context,B),Le=Ce.createElement("html2canvaspseudoelement");Bh(B,Le),Ne.content.forEach(function(Ye){if(Ye.type===0)Le.appendChild(Ce.createTextNode(Ye.value));else if(Ye.type===22){var gt=Ce.createElement("img");gt.src=Ye.value,gt.style.opacity="1",Le.appendChild(gt)}else if(Ye.type===18){if(Ye.name==="attr"){var As=Ye.values.filter(on);As.length&&Le.appendChild(Ce.createTextNode(v.getAttribute(As[0].value)||""))}else if(Ye.name==="counter"){var Gt=Ye.values.filter(Ma),ns=Gt[0],Is=Gt[1];if(ns&&on(ns)){var gs=se.counters.getCounterValue(ns.value),ps=Is&&on(Is)?iu.parse(se.context,Is.value):3;Le.appendChild(Ce.createTextNode(od(gs,ps,!1)))}}else if(Ye.name==="counters"){var Tn=Ye.values.filter(Ma),ns=Tn[0],wn=Tn[1],Is=Tn[2];if(ns&&on(ns)){var en=se.counters.getCounterValues(ns.value),us=Is&&on(Is)?iu.parse(se.context,Is.value):3,Dn=wn&&wn.type===0?wn.value:"",Mn=en.map(function(Kr){return od(Kr,us,!1)}).join(Dn);Le.appendChild(Ce.createTextNode(Mn))}}}else if(Ye.type===20)switch(Ye.value){case"open-quote":Le.appendChild(Ce.createTextNode(Nt(Ne.quotes,se.quoteDepth++,!0)));break;case"close-quote":Le.appendChild(Ce.createTextNode(Nt(Ne.quotes,--se.quoteDepth,!1)));break;default:Le.appendChild(Ce.createTextNode(Ye.value))}}),Le.className=ip+" "+Tf;var Ke=z===hu.BEFORE?" "+ip:" "+Tf;return uu(S)?S.className.baseValue+=Ke:S.className+=Ke,Le}}},j.destroy=function(v){return v.parentNode?(v.parentNode.removeChild(v),!0):!1},j})(),hu;(function(j){j[j.BEFORE=0]="BEFORE",j[j.AFTER=1]="AFTER"})(hu||(hu={}));var tp=function(j,v){var S=j.createElement("iframe");return S.className="html2canvas-container",S.style.visibility="hidden",S.style.position="fixed",S.style.left="-10000px",S.style.top="0px",S.style.border="0",S.width=v.width.toString(),S.height=v.height.toString(),S.scrolling="no",S.setAttribute(Zm,"true"),j.body.appendChild(S),S},sp=function(j){return new Promise(function(v){if(j.complete){v();return}if(!j.src){v();return}j.onload=v,j.onerror=v})},r0=function(j){return Promise.all([].slice.call(j.images,0).map(sp))},np=function(j){return new Promise(function(v,S){var B=j.contentWindow;if(!B)return S("No window assigned for iframe");var z=B.document;B.onload=j.onload=function(){B.onload=j.onload=null;var se=setInterval(function(){z.body.childNodes.length>0&&z.readyState==="complete"&&(clearInterval(se),v(j))},50)}})},Ef=["all","d","content"],Bh=function(j,v){for(var S=j.length-1;S>=0;S--){var B=j.item(S);Ef.indexOf(B)===-1&&v.style.setProperty(B,j.getPropertyValue(B))}return v},a0=function(j){var v="";return j&&(v+="<!DOCTYPE ",j.name&&(v+=j.name),j.internalSubset&&(v+=j.internalSubset),j.publicId&&(v+='"'+j.publicId+'"'),j.systemId&&(v+='"'+j.systemId+'"'),v+=">"),v},rp=function(j,v,S){j&&j.defaultView&&(v!==j.defaultView.pageXOffset||S!==j.defaultView.pageYOffset)&&j.defaultView.scrollTo(v,S)},i0=function(j){var v=j[0],S=j[1],B=j[2];v.scrollLeft=S,v.scrollTop=B},XA=":before",ap=":after",ip="___html2canvas___pseudoelement_before",Tf="___html2canvas___pseudoelement_after",SA=`{
    content: "" !important;
    display: none !important;
}`,op=function(j){o0(j,"."+ip+XA+SA+`
         .`+Tf+ap+SA)},o0=function(j,v){var S=j.ownerDocument;if(S){var B=S.createElement("style");B.textContent=v,j.appendChild(B)}},Sh=(function(){function j(){}return j.getOrigin=function(v){var S=j._link;return S?(S.href=v,S.href=S.href,S.protocol+S.hostname+S.port):"about:blank"},j.isSameOrigin=function(v){return j.getOrigin(v)===j._origin},j.setContext=function(v){j._link=v.document.createElement("a"),j._origin=j.getOrigin(v.location.href)},j._origin="about:blank",j})(),Ch=(function(){function j(v,S){this.context=v,this._options=S,this._cache={}}return j.prototype.addImage=function(v){var S=Promise.resolve();return this.has(v)||(If(v)||l0(v))&&(this._cache[v]=this.loadImage(v)).catch(function(){}),S},j.prototype.match=function(v){return this._cache[v]},j.prototype.loadImage=function(v){return o(this,void 0,void 0,function(){var S,B,z,se,he=this;return c(this,function(Ce){switch(Ce.label){case 0:return S=Sh.isSameOrigin(v),B=!fu(v)&&this._options.useCORS===!0&&ti.SUPPORT_CORS_IMAGES&&!S,z=!fu(v)&&!S&&!If(v)&&typeof this._options.proxy=="string"&&ti.SUPPORT_CORS_XHR&&!B,!S&&this._options.allowTaint===!1&&!fu(v)&&!If(v)&&!z&&!B?[2]:(se=v,z?[4,this.proxy(se)]:[3,2]);case 1:se=Ce.sent(),Ce.label=2;case 2:return this.context.logger.debug("Added image "+v.substring(0,256)),[4,new Promise(function(Ne,Le){var Ke=new Image;Ke.onload=function(){return Ne(Ke)},Ke.onerror=Le,(_c(se)||B)&&(Ke.crossOrigin="anonymous"),Ke.src=se,Ke.complete===!0&&setTimeout(function(){return Ne(Ke)},500),he._options.imageTimeout>0&&setTimeout(function(){return Le("Timed out ("+he._options.imageTimeout+"ms) loading image")},he._options.imageTimeout)})];case 3:return[2,Ce.sent()]}})})},j.prototype.has=function(v){return typeof this._cache[v]<"u"},j.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},j.prototype.proxy=function(v){var S=this,B=this._options.proxy;if(!B)throw new Error("No proxy defined");var z=v.substring(0,256);return new Promise(function(se,he){var Ce=ti.SUPPORT_RESPONSE_TYPE?"blob":"text",Ne=new XMLHttpRequest;Ne.onload=function(){if(Ne.status===200)if(Ce==="text")se(Ne.response);else{var Ye=new FileReader;Ye.addEventListener("load",function(){return se(Ye.result)},!1),Ye.addEventListener("error",function(gt){return he(gt)},!1),Ye.readAsDataURL(Ne.response)}else he("Failed to proxy resource "+z+" with status code "+Ne.status)},Ne.onerror=he;var Le=B.indexOf("?")>-1?"&":"?";if(Ne.open("GET",""+B+Le+"url="+encodeURIComponent(v)+"&responseType="+Ce),Ce!=="text"&&Ne instanceof XMLHttpRequest&&(Ne.responseType=Ce),S._options.imageTimeout){var Ke=S._options.imageTimeout;Ne.timeout=Ke,Ne.ontimeout=function(){return he("Timed out ("+Ke+"ms) proxying "+z)}}Ne.send()})},j})(),la=/^data:image\/svg\+xml/i,Jv=/^data:image\/.*;base64,/i,qv=/^data:image\/.*/i,l0=function(j){return ti.SUPPORT_SVG_DRAWING||!A0(j)},fu=function(j){return qv.test(j)},_c=function(j){return Jv.test(j)},If=function(j){return j.substr(0,4)==="blob"},A0=function(j){return j.substr(-3).toLowerCase()==="svg"||la.test(j)},is=(function(){function j(v,S){this.type=0,this.x=v,this.y=S}return j.prototype.add=function(v,S){return new j(this.x+v,this.y+S)},j})(),wo=function(j,v,S){return new is(j.x+(v.x-j.x)*S,j.y+(v.y-j.y)*S)},Nh=(function(){function j(v,S,B,z){this.type=1,this.start=v,this.startControl=S,this.endControl=B,this.end=z}return j.prototype.subdivide=function(v,S){var B=wo(this.start,this.startControl,v),z=wo(this.startControl,this.endControl,v),se=wo(this.endControl,this.end,v),he=wo(B,z,v),Ce=wo(z,se,v),Ne=wo(he,Ce,v);return S?new j(this.start,B,he,Ne):new j(Ne,Ce,se,this.end)},j.prototype.add=function(v,S){return new j(this.start.add(v,S),this.startControl.add(v,S),this.endControl.add(v,S),this.end.add(v,S))},j.prototype.reverse=function(){return new j(this.end,this.endControl,this.startControl,this.start)},j})(),Yo=function(j){return j.type===1},c0=(function(){function j(v){var S=v.styles,B=v.bounds,z=Po(S.borderTopLeftRadius,B.width,B.height),se=z[0],he=z[1],Ce=Po(S.borderTopRightRadius,B.width,B.height),Ne=Ce[0],Le=Ce[1],Ke=Po(S.borderBottomRightRadius,B.width,B.height),Ye=Ke[0],gt=Ke[1],As=Po(S.borderBottomLeftRadius,B.width,B.height),Gt=As[0],ns=As[1],Is=[];Is.push((se+Ne)/B.width),Is.push((Gt+Ye)/B.width),Is.push((he+ns)/B.height),Is.push((Le+gt)/B.height);var gs=Math.max.apply(Math,Is);gs>1&&(se/=gs,he/=gs,Ne/=gs,Le/=gs,Ye/=gs,gt/=gs,Gt/=gs,ns/=gs);var ps=B.width-Ne,Tn=B.height-gt,wn=B.width-Ye,en=B.height-ns,us=S.borderTopWidth,Dn=S.borderRightWidth,Mn=S.borderBottomWidth,Ds=S.borderLeftWidth,si=Cn(S.paddingTop,v.bounds.width),Kr=Cn(S.paddingRight,v.bounds.width),Jo=Cn(S.paddingBottom,v.bounds.width),Nr=Cn(S.paddingLeft,v.bounds.width);this.topLeftBorderDoubleOuterBox=se>0||he>0?Jr(B.left+Ds/3,B.top+us/3,se-Ds/3,he-us/3,Ar.TOP_LEFT):new is(B.left+Ds/3,B.top+us/3),this.topRightBorderDoubleOuterBox=se>0||he>0?Jr(B.left+ps,B.top+us/3,Ne-Dn/3,Le-us/3,Ar.TOP_RIGHT):new is(B.left+B.width-Dn/3,B.top+us/3),this.bottomRightBorderDoubleOuterBox=Ye>0||gt>0?Jr(B.left+wn,B.top+Tn,Ye-Dn/3,gt-Mn/3,Ar.BOTTOM_RIGHT):new is(B.left+B.width-Dn/3,B.top+B.height-Mn/3),this.bottomLeftBorderDoubleOuterBox=Gt>0||ns>0?Jr(B.left+Ds/3,B.top+en,Gt-Ds/3,ns-Mn/3,Ar.BOTTOM_LEFT):new is(B.left+Ds/3,B.top+B.height-Mn/3),this.topLeftBorderDoubleInnerBox=se>0||he>0?Jr(B.left+Ds*2/3,B.top+us*2/3,se-Ds*2/3,he-us*2/3,Ar.TOP_LEFT):new is(B.left+Ds*2/3,B.top+us*2/3),this.topRightBorderDoubleInnerBox=se>0||he>0?Jr(B.left+ps,B.top+us*2/3,Ne-Dn*2/3,Le-us*2/3,Ar.TOP_RIGHT):new is(B.left+B.width-Dn*2/3,B.top+us*2/3),this.bottomRightBorderDoubleInnerBox=Ye>0||gt>0?Jr(B.left+wn,B.top+Tn,Ye-Dn*2/3,gt-Mn*2/3,Ar.BOTTOM_RIGHT):new is(B.left+B.width-Dn*2/3,B.top+B.height-Mn*2/3),this.bottomLeftBorderDoubleInnerBox=Gt>0||ns>0?Jr(B.left+Ds*2/3,B.top+en,Gt-Ds*2/3,ns-Mn*2/3,Ar.BOTTOM_LEFT):new is(B.left+Ds*2/3,B.top+B.height-Mn*2/3),this.topLeftBorderStroke=se>0||he>0?Jr(B.left+Ds/2,B.top+us/2,se-Ds/2,he-us/2,Ar.TOP_LEFT):new is(B.left+Ds/2,B.top+us/2),this.topRightBorderStroke=se>0||he>0?Jr(B.left+ps,B.top+us/2,Ne-Dn/2,Le-us/2,Ar.TOP_RIGHT):new is(B.left+B.width-Dn/2,B.top+us/2),this.bottomRightBorderStroke=Ye>0||gt>0?Jr(B.left+wn,B.top+Tn,Ye-Dn/2,gt-Mn/2,Ar.BOTTOM_RIGHT):new is(B.left+B.width-Dn/2,B.top+B.height-Mn/2),this.bottomLeftBorderStroke=Gt>0||ns>0?Jr(B.left+Ds/2,B.top+en,Gt-Ds/2,ns-Mn/2,Ar.BOTTOM_LEFT):new is(B.left+Ds/2,B.top+B.height-Mn/2),this.topLeftBorderBox=se>0||he>0?Jr(B.left,B.top,se,he,Ar.TOP_LEFT):new is(B.left,B.top),this.topRightBorderBox=Ne>0||Le>0?Jr(B.left+ps,B.top,Ne,Le,Ar.TOP_RIGHT):new is(B.left+B.width,B.top),this.bottomRightBorderBox=Ye>0||gt>0?Jr(B.left+wn,B.top+Tn,Ye,gt,Ar.BOTTOM_RIGHT):new is(B.left+B.width,B.top+B.height),this.bottomLeftBorderBox=Gt>0||ns>0?Jr(B.left,B.top+en,Gt,ns,Ar.BOTTOM_LEFT):new is(B.left,B.top+B.height),this.topLeftPaddingBox=se>0||he>0?Jr(B.left+Ds,B.top+us,Math.max(0,se-Ds),Math.max(0,he-us),Ar.TOP_LEFT):new is(B.left+Ds,B.top+us),this.topRightPaddingBox=Ne>0||Le>0?Jr(B.left+Math.min(ps,B.width-Dn),B.top+us,ps>B.width+Dn?0:Math.max(0,Ne-Dn),Math.max(0,Le-us),Ar.TOP_RIGHT):new is(B.left+B.width-Dn,B.top+us),this.bottomRightPaddingBox=Ye>0||gt>0?Jr(B.left+Math.min(wn,B.width-Ds),B.top+Math.min(Tn,B.height-Mn),Math.max(0,Ye-Dn),Math.max(0,gt-Mn),Ar.BOTTOM_RIGHT):new is(B.left+B.width-Dn,B.top+B.height-Mn),this.bottomLeftPaddingBox=Gt>0||ns>0?Jr(B.left+Ds,B.top+Math.min(en,B.height-Mn),Math.max(0,Gt-Ds),Math.max(0,ns-Mn),Ar.BOTTOM_LEFT):new is(B.left+Ds,B.top+B.height-Mn),this.topLeftContentBox=se>0||he>0?Jr(B.left+Ds+Nr,B.top+us+si,Math.max(0,se-(Ds+Nr)),Math.max(0,he-(us+si)),Ar.TOP_LEFT):new is(B.left+Ds+Nr,B.top+us+si),this.topRightContentBox=Ne>0||Le>0?Jr(B.left+Math.min(ps,B.width+Ds+Nr),B.top+us+si,ps>B.width+Ds+Nr?0:Ne-Ds+Nr,Le-(us+si),Ar.TOP_RIGHT):new is(B.left+B.width-(Dn+Kr),B.top+us+si),this.bottomRightContentBox=Ye>0||gt>0?Jr(B.left+Math.min(wn,B.width-(Ds+Nr)),B.top+Math.min(Tn,B.height+us+si),Math.max(0,Ye-(Dn+Kr)),gt-(Mn+Jo),Ar.BOTTOM_RIGHT):new is(B.left+B.width-(Dn+Kr),B.top+B.height-(Mn+Jo)),this.bottomLeftContentBox=Gt>0||ns>0?Jr(B.left+Ds+Nr,B.top+en,Math.max(0,Gt-(Ds+Nr)),ns-(Mn+Jo),Ar.BOTTOM_LEFT):new is(B.left+Ds+Nr,B.top+B.height-(Mn+Jo))}return j})(),Ar;(function(j){j[j.TOP_LEFT=0]="TOP_LEFT",j[j.TOP_RIGHT=1]="TOP_RIGHT",j[j.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",j[j.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ar||(Ar={}));var Jr=function(j,v,S,B,z){var se=4*((Math.sqrt(2)-1)/3),he=S*se,Ce=B*se,Ne=j+S,Le=v+B;switch(z){case Ar.TOP_LEFT:return new Nh(new is(j,Le),new is(j,Le-Ce),new is(Ne-he,v),new is(Ne,v));case Ar.TOP_RIGHT:return new Nh(new is(j,v),new is(j+he,v),new is(Ne,Le-Ce),new is(Ne,Le));case Ar.BOTTOM_RIGHT:return new Nh(new is(Ne,v),new is(Ne,v+Ce),new is(j+he,Le),new is(j,Le));case Ar.BOTTOM_LEFT:default:return new Nh(new is(Ne,Le),new is(Ne-he,Le),new is(j,v+Ce),new is(j,v))}},mu=function(j){return[j.topLeftBorderBox,j.topRightBorderBox,j.bottomRightBorderBox,j.bottomLeftBorderBox]},u0=function(j){return[j.topLeftContentBox,j.topRightContentBox,j.bottomRightContentBox,j.bottomLeftContentBox]},Ql=function(j){return[j.topLeftPaddingBox,j.topRightPaddingBox,j.bottomRightPaddingBox,j.bottomLeftPaddingBox]},ui=(function(){function j(v,S,B){this.offsetX=v,this.offsetY=S,this.matrix=B,this.type=0,this.target=6}return j})(),ld=(function(){function j(v,S){this.path=v,this.target=S,this.type=1}return j})(),d0=(function(){function j(v){this.opacity=v,this.type=2,this.target=6}return j})(),Mi=function(j){return j.type===0},h0=function(j){return j.type===1},f0=function(j){return j.type===2},lp=function(j,v){return j.length===v.length?j.some(function(S,B){return S===v[B]}):!1},xa=function(j,v,S,B,z){return j.map(function(se,he){switch(he){case 0:return se.add(v,S);case 1:return se.add(v+B,S);case 2:return se.add(v+B,S+z);case 3:return se.add(v,S+z)}return se})},jo=(function(){function j(v){this.element=v,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return j})(),CA=(function(){function j(v,S){if(this.container=v,this.parent=S,this.effects=[],this.curves=new c0(this.container),this.container.styles.opacity<1&&this.effects.push(new d0(this.container.styles.opacity)),this.container.styles.transform!==null){var B=this.container.bounds.left+this.container.styles.transformOrigin[0].number,z=this.container.bounds.top+this.container.styles.transformOrigin[1].number,se=this.container.styles.transform;this.effects.push(new ui(B,z,se))}if(this.container.styles.overflowX!==0){var he=mu(this.curves),Ce=Ql(this.curves);lp(he,Ce)?this.effects.push(new ld(he,6)):(this.effects.push(new ld(he,2)),this.effects.push(new ld(Ce,4)))}}return j.prototype.getEffects=function(v){for(var S=[2,3].indexOf(this.container.styles.position)===-1,B=this.parent,z=this.effects.slice(0);B;){var se=B.effects.filter(function(Ne){return!h0(Ne)});if(S||B.container.styles.position!==0||!B.parent){if(z.unshift.apply(z,se),S=[2,3].indexOf(B.container.styles.position)===-1,B.container.styles.overflowX!==0){var he=mu(B.curves),Ce=Ql(B.curves);lp(he,Ce)||z.unshift(new ld(Ce,6))}}else z.unshift.apply(z,se);B=B.parent}return z.filter(function(Ne){return Ve(Ne.target,v)})},j})(),_f=function(j,v,S,B){j.container.elements.forEach(function(z){var se=Ve(z.flags,4),he=Ve(z.flags,2),Ce=new CA(z,j);Ve(z.styles.display,2048)&&B.push(Ce);var Ne=Ve(z.flags,8)?[]:B;if(se||he){var Le=se||z.styles.isPositioned()?S:v,Ke=new jo(Ce);if(z.styles.isPositioned()||z.styles.opacity<1||z.styles.isTransformed()){var Ye=z.styles.zIndex.order;if(Ye<0){var gt=0;Le.negativeZIndex.some(function(Gt,ns){return Ye>Gt.element.container.styles.zIndex.order?(gt=ns,!1):gt>0}),Le.negativeZIndex.splice(gt,0,Ke)}else if(Ye>0){var As=0;Le.positiveZIndex.some(function(Gt,ns){return Ye>=Gt.element.container.styles.zIndex.order?(As=ns+1,!1):As>0}),Le.positiveZIndex.splice(As,0,Ke)}else Le.zeroOrAutoZIndexOrTransformedOrOpacity.push(Ke)}else z.styles.isFloating()?Le.nonPositionedFloats.push(Ke):Le.nonPositionedInlineLevel.push(Ke);_f(Ce,Ke,se?Ke:S,Ne)}else z.styles.isInlineLevel()?v.inlineLevel.push(Ce):v.nonInlineLevel.push(Ce),_f(Ce,v,S,Ne);Ve(z.flags,8)&&Ap(z,Ne)})},Ap=function(j,v){for(var S=j instanceof yf?j.start:1,B=j instanceof yf?j.reversed:!1,z=0;z<v.length;z++){var se=v[z];se.container instanceof Om&&typeof se.container.value=="number"&&se.container.value!==0&&(S=se.container.value),se.listValue=od(S,se.container.styles.listStyleType,!0),S+=B?-1:1}},m0=function(j){var v=new CA(j,null),S=new jo(v),B=[];return _f(v,S,S,B),Ap(v.container,B),S},p0=function(j,v){switch(v){case 0:return Aa(j.topLeftBorderBox,j.topLeftPaddingBox,j.topRightBorderBox,j.topRightPaddingBox);case 1:return Aa(j.topRightBorderBox,j.topRightPaddingBox,j.bottomRightBorderBox,j.bottomRightPaddingBox);case 2:return Aa(j.bottomRightBorderBox,j.bottomRightPaddingBox,j.bottomLeftBorderBox,j.bottomLeftPaddingBox);case 3:default:return Aa(j.bottomLeftBorderBox,j.bottomLeftPaddingBox,j.topLeftBorderBox,j.topLeftPaddingBox)}},Ff=function(j,v){switch(v){case 0:return Aa(j.topLeftBorderBox,j.topLeftBorderDoubleOuterBox,j.topRightBorderBox,j.topRightBorderDoubleOuterBox);case 1:return Aa(j.topRightBorderBox,j.topRightBorderDoubleOuterBox,j.bottomRightBorderBox,j.bottomRightBorderDoubleOuterBox);case 2:return Aa(j.bottomRightBorderBox,j.bottomRightBorderDoubleOuterBox,j.bottomLeftBorderBox,j.bottomLeftBorderDoubleOuterBox);case 3:default:return Aa(j.bottomLeftBorderBox,j.bottomLeftBorderDoubleOuterBox,j.topLeftBorderBox,j.topLeftBorderDoubleOuterBox)}},Wo=function(j,v){switch(v){case 0:return Aa(j.topLeftBorderDoubleInnerBox,j.topLeftPaddingBox,j.topRightBorderDoubleInnerBox,j.topRightPaddingBox);case 1:return Aa(j.topRightBorderDoubleInnerBox,j.topRightPaddingBox,j.bottomRightBorderDoubleInnerBox,j.bottomRightPaddingBox);case 2:return Aa(j.bottomRightBorderDoubleInnerBox,j.bottomRightPaddingBox,j.bottomLeftBorderDoubleInnerBox,j.bottomLeftPaddingBox);case 3:default:return Aa(j.bottomLeftBorderDoubleInnerBox,j.bottomLeftPaddingBox,j.topLeftBorderDoubleInnerBox,j.topLeftPaddingBox)}},sA=function(j,v){switch(v){case 0:return Eh(j.topLeftBorderStroke,j.topRightBorderStroke);case 1:return Eh(j.topRightBorderStroke,j.bottomRightBorderStroke);case 2:return Eh(j.bottomRightBorderStroke,j.bottomLeftBorderStroke);case 3:default:return Eh(j.bottomLeftBorderStroke,j.topLeftBorderStroke)}},Eh=function(j,v){var S=[];return Yo(j)?S.push(j.subdivide(.5,!1)):S.push(j),Yo(v)?S.push(v.subdivide(.5,!0)):S.push(v),S},Aa=function(j,v,S,B){var z=[];return Yo(j)?z.push(j.subdivide(.5,!1)):z.push(j),Yo(S)?z.push(S.subdivide(.5,!0)):z.push(S),Yo(B)?z.push(B.subdivide(.5,!0).reverse()):z.push(B),Yo(v)?z.push(v.subdivide(.5,!1).reverse()):z.push(v),z},cp=function(j){var v=j.bounds,S=j.styles;return v.add(S.borderLeftWidth,S.borderTopWidth,-(S.borderRightWidth+S.borderLeftWidth),-(S.borderTopWidth+S.borderBottomWidth))},Ol=function(j){var v=j.styles,S=j.bounds,B=Cn(v.paddingLeft,S.width),z=Cn(v.paddingRight,S.width),se=Cn(v.paddingTop,S.width),he=Cn(v.paddingBottom,S.width);return S.add(B+v.borderLeftWidth,se+v.borderTopWidth,-(v.borderRightWidth+v.borderLeftWidth+B+z),-(v.borderTopWidth+v.borderBottomWidth+se+he))},pu=function(j,v){return j===0?v.bounds:j===2?Ol(v):cp(v)},JA=function(j,v){return j===0?v.bounds:j===2?Ol(v):cp(v)},Th=function(j,v,S){var B=pu(nA(j.styles.backgroundOrigin,v),j),z=JA(nA(j.styles.backgroundClip,v),j),se=g0(nA(j.styles.backgroundSize,v),S,B),he=se[0],Ce=se[1],Ne=Po(nA(j.styles.backgroundPosition,v),B.width-he,B.height-Ce),Le=Ih(nA(j.styles.backgroundRepeat,v),Ne,se,B,z),Ke=Math.round(B.left+Ne[0]),Ye=Math.round(B.top+Ne[1]);return[Le,Ke,Ye,he,Ce]},Fc=function(j){return on(j)&&j.value===Wl.AUTO},Xo=function(j){return typeof j=="number"},g0=function(j,v,S){var B=v[0],z=v[1],se=v[2],he=j[0],Ce=j[1];if(!he)return[0,0];if(Xn(he)&&Ce&&Xn(Ce))return[Cn(he,S.width),Cn(Ce,S.height)];var Ne=Xo(se);if(on(he)&&(he.value===Wl.CONTAIN||he.value===Wl.COVER)){if(Xo(se)){var Le=S.width/S.height;return Le<se!=(he.value===Wl.COVER)?[S.width,S.width/se]:[S.height*se,S.height]}return[S.width,S.height]}var Ke=Xo(B),Ye=Xo(z),gt=Ke||Ye;if(Fc(he)&&(!Ce||Fc(Ce))){if(Ke&&Ye)return[B,z];if(!Ne&&!gt)return[S.width,S.height];if(gt&&Ne){var As=Ke?B:z*se,Gt=Ye?z:B/se;return[As,Gt]}var ns=Ke?B:S.width,Is=Ye?z:S.height;return[ns,Is]}if(Ne){var gs=0,ps=0;return Xn(he)?gs=Cn(he,S.width):Xn(Ce)&&(ps=Cn(Ce,S.height)),Fc(he)?gs=ps*se:(!Ce||Fc(Ce))&&(ps=gs/se),[gs,ps]}var Tn=null,wn=null;if(Xn(he)?Tn=Cn(he,S.width):Ce&&Xn(Ce)&&(wn=Cn(Ce,S.height)),Tn!==null&&(!Ce||Fc(Ce))&&(wn=Ke&&Ye?Tn/B*z:S.height),wn!==null&&Fc(he)&&(Tn=Ke&&Ye?wn/z*B:S.width),Tn!==null&&wn!==null)return[Tn,wn];throw new Error("Unable to calculate background-size for element")},nA=function(j,v){var S=j[v];return typeof S>"u"?j[0]:S},Ih=function(j,v,S,B,z){var se=v[0],he=v[1],Ce=S[0],Ne=S[1];switch(j){case 2:return[new is(Math.round(B.left),Math.round(B.top+he)),new is(Math.round(B.left+B.width),Math.round(B.top+he)),new is(Math.round(B.left+B.width),Math.round(Ne+B.top+he)),new is(Math.round(B.left),Math.round(Ne+B.top+he))];case 3:return[new is(Math.round(B.left+se),Math.round(B.top)),new is(Math.round(B.left+se+Ce),Math.round(B.top)),new is(Math.round(B.left+se+Ce),Math.round(B.height+B.top)),new is(Math.round(B.left+se),Math.round(B.height+B.top))];case 1:return[new is(Math.round(B.left+se),Math.round(B.top+he)),new is(Math.round(B.left+se+Ce),Math.round(B.top+he)),new is(Math.round(B.left+se+Ce),Math.round(B.top+he+Ne)),new is(Math.round(B.left+se),Math.round(B.top+he+Ne))];default:return[new is(Math.round(z.left),Math.round(z.top)),new is(Math.round(z.left+z.width),Math.round(z.top)),new is(Math.round(z.left+z.width),Math.round(z.height+z.top)),new is(Math.round(z.left),Math.round(z.height+z.top))]}},_h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",gu="Hidden Text",x0=(function(){function j(v){this._data={},this._document=v}return j.prototype.parseMetrics=function(v,S){var B=this._document.createElement("div"),z=this._document.createElement("img"),se=this._document.createElement("span"),he=this._document.body;B.style.visibility="hidden",B.style.fontFamily=v,B.style.fontSize=S,B.style.margin="0",B.style.padding="0",B.style.whiteSpace="nowrap",he.appendChild(B),z.src=_h,z.width=1,z.height=1,z.style.margin="0",z.style.padding="0",z.style.verticalAlign="baseline",se.style.fontFamily=v,se.style.fontSize=S,se.style.margin="0",se.style.padding="0",se.appendChild(this._document.createTextNode(gu)),B.appendChild(se),B.appendChild(z);var Ce=z.offsetTop-se.offsetTop+2;B.removeChild(se),B.appendChild(this._document.createTextNode(gu)),B.style.lineHeight="normal",z.style.verticalAlign="super";var Ne=z.offsetTop-B.offsetTop+2;return he.removeChild(B),{baseline:Ce,middle:Ne}},j.prototype.getMetrics=function(v,S){var B=v+" "+S;return typeof this._data[B]>"u"&&(this._data[B]=this.parseMetrics(v,S)),this._data[B]},j})(),up=(function(){function j(v,S){this.context=v,this.options=S}return j})(),Fh=1e4,v0=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z._activeEffects=[],z.canvas=B.canvas?B.canvas:document.createElement("canvas"),z.ctx=z.canvas.getContext("2d"),B.canvas||(z.canvas.width=Math.floor(B.width*B.scale),z.canvas.height=Math.floor(B.height*B.scale),z.canvas.style.width=B.width+"px",z.canvas.style.height=B.height+"px"),z.fontMetrics=new x0(document),z.ctx.scale(z.options.scale,z.options.scale),z.ctx.translate(-B.x,-B.y),z.ctx.textBaseline="bottom",z._activeEffects=[],z.context.logger.debug("Canvas renderer initialized ("+B.width+"x"+B.height+") with scale "+B.scale),z}return v.prototype.applyEffects=function(S){for(var B=this;this._activeEffects.length;)this.popEffect();S.forEach(function(z){return B.applyEffect(z)})},v.prototype.applyEffect=function(S){this.ctx.save(),f0(S)&&(this.ctx.globalAlpha=S.opacity),Mi(S)&&(this.ctx.translate(S.offsetX,S.offsetY),this.ctx.transform(S.matrix[0],S.matrix[1],S.matrix[2],S.matrix[3],S.matrix[4],S.matrix[5]),this.ctx.translate(-S.offsetX,-S.offsetY)),h0(S)&&(this.path(S.path),this.ctx.clip()),this._activeEffects.push(S)},v.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},v.prototype.renderStack=function(S){return o(this,void 0,void 0,function(){var B;return c(this,function(z){switch(z.label){case 0:return B=S.element.container.styles,B.isVisible()?[4,this.renderStackContent(S)]:[3,2];case 1:z.sent(),z.label=2;case 2:return[2]}})})},v.prototype.renderNode=function(S){return o(this,void 0,void 0,function(){return c(this,function(B){switch(B.label){case 0:if(Ve(S.container.flags,16))debugger;return S.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(S)]:[3,3];case 1:return B.sent(),[4,this.renderNodeContent(S)];case 2:B.sent(),B.label=3;case 3:return[2]}})})},v.prototype.renderTextWithLetterSpacing=function(S,B,z){var se=this;if(B===0)this.ctx.fillText(S.text,S.bounds.left,S.bounds.top+z);else{var he=$o(S.text);he.reduce(function(Ce,Ne){return se.ctx.fillText(Ne,Ce,S.bounds.top+z),Ce+se.ctx.measureText(Ne).width},S.bounds.left)}},v.prototype.createFontStyle=function(S){var B=S.fontVariant.filter(function(he){return he==="normal"||he==="small-caps"}).join(""),z=gr(S.fontFamily).join(", "),se=Na(S.fontSize)?""+S.fontSize.number+S.fontSize.unit:S.fontSize.number+"px";return[[S.fontStyle,B,S.fontWeight,se,z].join(" "),z,se]},v.prototype.renderTextNode=function(S,B){return o(this,void 0,void 0,function(){var z,se,he,Ce,Ne,Le,Ke,Ye,gt=this;return c(this,function(As){return z=this.createFontStyle(B),se=z[0],he=z[1],Ce=z[2],this.ctx.font=se,this.ctx.direction=B.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Ne=this.fontMetrics.getMetrics(he,Ce),Le=Ne.baseline,Ke=Ne.middle,Ye=B.paintOrder,S.textBounds.forEach(function(Gt){Ye.forEach(function(ns){switch(ns){case 0:gt.ctx.fillStyle=Qn(B.color),gt.renderTextWithLetterSpacing(Gt,B.letterSpacing,Le);var Is=B.textShadow;Is.length&&Gt.text.trim().length&&(Is.slice(0).reverse().forEach(function(gs){gt.ctx.shadowColor=Qn(gs.color),gt.ctx.shadowOffsetX=gs.offsetX.number*gt.options.scale,gt.ctx.shadowOffsetY=gs.offsetY.number*gt.options.scale,gt.ctx.shadowBlur=gs.blur.number,gt.renderTextWithLetterSpacing(Gt,B.letterSpacing,Le)}),gt.ctx.shadowColor="",gt.ctx.shadowOffsetX=0,gt.ctx.shadowOffsetY=0,gt.ctx.shadowBlur=0),B.textDecorationLine.length&&(gt.ctx.fillStyle=Qn(B.textDecorationColor||B.color),B.textDecorationLine.forEach(function(gs){switch(gs){case 1:gt.ctx.fillRect(Gt.bounds.left,Math.round(Gt.bounds.top+Le),Gt.bounds.width,1);break;case 2:gt.ctx.fillRect(Gt.bounds.left,Math.round(Gt.bounds.top),Gt.bounds.width,1);break;case 3:gt.ctx.fillRect(Gt.bounds.left,Math.ceil(Gt.bounds.top+Ke),Gt.bounds.width,1);break}}));break;case 1:B.webkitTextStrokeWidth&&Gt.text.trim().length&&(gt.ctx.strokeStyle=Qn(B.webkitTextStrokeColor),gt.ctx.lineWidth=B.webkitTextStrokeWidth,gt.ctx.lineJoin=window.chrome?"miter":"round",gt.ctx.strokeText(Gt.text,Gt.bounds.left,Gt.bounds.top+Le)),gt.ctx.strokeStyle="",gt.ctx.lineWidth=0,gt.ctx.lineJoin="miter";break}})}),[2]})})},v.prototype.renderReplacedElement=function(S,B,z){if(z&&S.intrinsicWidth>0&&S.intrinsicHeight>0){var se=Ol(S),he=Ql(B);this.path(he),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(z,0,0,S.intrinsicWidth,S.intrinsicHeight,se.left,se.top,se.width,se.height),this.ctx.restore()}},v.prototype.renderNodeContent=function(S){return o(this,void 0,void 0,function(){var B,z,se,he,Ce,Ne,ps,ps,Le,Ke,Ye,gt,wn,As,Gt,en,ns,Is,gs,ps,Tn,wn,en;return c(this,function(us){switch(us.label){case 0:this.applyEffects(S.getEffects(4)),B=S.container,z=S.curves,se=B.styles,he=0,Ce=B.textNodes,us.label=1;case 1:return he<Ce.length?(Ne=Ce[he],[4,this.renderTextNode(Ne,se)]):[3,4];case 2:us.sent(),us.label=3;case 3:return he++,[3,1];case 4:if(!(B instanceof Qm))return[3,8];us.label=5;case 5:return us.trys.push([5,7,,8]),[4,this.context.cache.match(B.src)];case 6:return ps=us.sent(),this.renderReplacedElement(B,z,ps),[3,8];case 7:return us.sent(),this.context.logger.error("Error loading image "+B.src),[3,8];case 8:if(B instanceof vf&&this.renderReplacedElement(B,z,B.canvas),!(B instanceof $g))return[3,12];us.label=9;case 9:return us.trys.push([9,11,,12]),[4,this.context.cache.match(B.svg)];case 10:return ps=us.sent(),this.renderReplacedElement(B,z,ps),[3,12];case 11:return us.sent(),this.context.logger.error("Error loading svg "+B.svg.substring(0,255)),[3,12];case 12:return B instanceof Hm&&B.tree?(Le=new v(this.context,{scale:this.options.scale,backgroundColor:B.backgroundColor,x:0,y:0,width:B.width,height:B.height}),[4,Le.render(B.tree)]):[3,14];case 13:Ke=us.sent(),B.width&&B.height&&this.ctx.drawImage(Ke,0,0,B.width,B.height,B.bounds.left,B.bounds.top,B.bounds.width,B.bounds.height),us.label=14;case 14:if(B instanceof bf&&(Ye=Math.min(B.bounds.width,B.bounds.height),B.type===mh?B.checked&&(this.ctx.save(),this.path([new is(B.bounds.left+Ye*.39363,B.bounds.top+Ye*.79),new is(B.bounds.left+Ye*.16,B.bounds.top+Ye*.5549),new is(B.bounds.left+Ye*.27347,B.bounds.top+Ye*.44071),new is(B.bounds.left+Ye*.39694,B.bounds.top+Ye*.5649),new is(B.bounds.left+Ye*.72983,B.bounds.top+Ye*.23),new is(B.bounds.left+Ye*.84,B.bounds.top+Ye*.34085),new is(B.bounds.left+Ye*.39363,B.bounds.top+Ye*.79)]),this.ctx.fillStyle=Qn(Mm),this.ctx.fill(),this.ctx.restore()):B.type===ph&&B.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(B.bounds.left+Ye/2,B.bounds.top+Ye/2,Ye/4,0,Math.PI*2,!0),this.ctx.fillStyle=Qn(Mm),this.ctx.fill(),this.ctx.restore())),Uf(B)&&B.value.length){switch(gt=this.createFontStyle(se),wn=gt[0],As=gt[1],Gt=this.fontMetrics.getMetrics(wn,As).baseline,this.ctx.font=wn,this.ctx.fillStyle=Qn(se.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Zv(B.styles.textAlign),en=Ol(B),ns=0,B.styles.textAlign){case 1:ns+=en.width/2;break;case 2:ns+=en.width;break}Is=en.add(ns,0,0,-en.height/2+1),this.ctx.save(),this.path([new is(en.left,en.top),new is(en.left+en.width,en.top),new is(en.left+en.width,en.top+en.height),new is(en.left,en.top+en.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Sc(B.value,Is),se.letterSpacing,Gt),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ve(B.styles.display,2048))return[3,20];if(B.styles.listStyleImage===null)return[3,19];if(gs=B.styles.listStyleImage,gs.type!==0)return[3,18];ps=void 0,Tn=gs.url,us.label=15;case 15:return us.trys.push([15,17,,18]),[4,this.context.cache.match(Tn)];case 16:return ps=us.sent(),this.ctx.drawImage(ps,B.bounds.left-(ps.width+10),B.bounds.top),[3,18];case 17:return us.sent(),this.context.logger.error("Error loading list-style-image "+Tn),[3,18];case 18:return[3,20];case 19:S.listValue&&B.styles.listStyleType!==-1&&(wn=this.createFontStyle(se)[0],this.ctx.font=wn,this.ctx.fillStyle=Qn(se.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",en=new u(B.bounds.left,B.bounds.top+Cn(B.styles.paddingTop,B.bounds.width),B.bounds.width,_l(se.lineHeight,se.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Sc(S.listValue,en),se.letterSpacing,_l(se.lineHeight,se.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),us.label=20;case 20:return[2]}})})},v.prototype.renderStackContent=function(S){return o(this,void 0,void 0,function(){var B,z,gs,se,he,gs,Ce,Ne,gs,Le,Ke,gs,Ye,gt,gs,As,Gt,gs,ns,Is,gs;return c(this,function(ps){switch(ps.label){case 0:if(Ve(S.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(S.element)];case 1:ps.sent(),B=0,z=S.negativeZIndex,ps.label=2;case 2:return B<z.length?(gs=z[B],[4,this.renderStack(gs)]):[3,5];case 3:ps.sent(),ps.label=4;case 4:return B++,[3,2];case 5:return[4,this.renderNodeContent(S.element)];case 6:ps.sent(),se=0,he=S.nonInlineLevel,ps.label=7;case 7:return se<he.length?(gs=he[se],[4,this.renderNode(gs)]):[3,10];case 8:ps.sent(),ps.label=9;case 9:return se++,[3,7];case 10:Ce=0,Ne=S.nonPositionedFloats,ps.label=11;case 11:return Ce<Ne.length?(gs=Ne[Ce],[4,this.renderStack(gs)]):[3,14];case 12:ps.sent(),ps.label=13;case 13:return Ce++,[3,11];case 14:Le=0,Ke=S.nonPositionedInlineLevel,ps.label=15;case 15:return Le<Ke.length?(gs=Ke[Le],[4,this.renderStack(gs)]):[3,18];case 16:ps.sent(),ps.label=17;case 17:return Le++,[3,15];case 18:Ye=0,gt=S.inlineLevel,ps.label=19;case 19:return Ye<gt.length?(gs=gt[Ye],[4,this.renderNode(gs)]):[3,22];case 20:ps.sent(),ps.label=21;case 21:return Ye++,[3,19];case 22:As=0,Gt=S.zeroOrAutoZIndexOrTransformedOrOpacity,ps.label=23;case 23:return As<Gt.length?(gs=Gt[As],[4,this.renderStack(gs)]):[3,26];case 24:ps.sent(),ps.label=25;case 25:return As++,[3,23];case 26:ns=0,Is=S.positiveZIndex,ps.label=27;case 27:return ns<Is.length?(gs=Is[ns],[4,this.renderStack(gs)]):[3,30];case 28:ps.sent(),ps.label=29;case 29:return ns++,[3,27];case 30:return[2]}})})},v.prototype.mask=function(S){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(S.slice(0).reverse()),this.ctx.closePath()},v.prototype.path=function(S){this.ctx.beginPath(),this.formatPath(S),this.ctx.closePath()},v.prototype.formatPath=function(S){var B=this;S.forEach(function(z,se){var he=Yo(z)?z.start:z;se===0?B.ctx.moveTo(he.x,he.y):B.ctx.lineTo(he.x,he.y),Yo(z)&&B.ctx.bezierCurveTo(z.startControl.x,z.startControl.y,z.endControl.x,z.endControl.y,z.end.x,z.end.y)})},v.prototype.renderRepeat=function(S,B,z,se){this.path(S),this.ctx.fillStyle=B,this.ctx.translate(z,se),this.ctx.fill(),this.ctx.translate(-z,-se)},v.prototype.resizeImage=function(S,B,z){var se;if(S.width===B&&S.height===z)return S;var he=(se=this.canvas.ownerDocument)!==null&&se!==void 0?se:document,Ce=he.createElement("canvas");Ce.width=Math.max(1,B),Ce.height=Math.max(1,z);var Ne=Ce.getContext("2d");return Ne.drawImage(S,0,0,S.width,S.height,0,0,B,z),Ce},v.prototype.renderBackgroundImage=function(S){return o(this,void 0,void 0,function(){var B,z,se,he,Ce,Ne;return c(this,function(Le){switch(Le.label){case 0:B=S.styles.backgroundImage.length-1,z=function(Ke){var Ye,gt,As,si,ao,ho,Nr,ro,Mn,Gt,si,ao,ho,Nr,ro,ns,Is,gs,ps,Tn,wn,en,us,Dn,Mn,Ds,si,Kr,Jo,Nr,ro,Bo,ao,ho,Pl,rA,qA,Dc,Rc,kl,ZA,ec;return c(this,function(cd){switch(cd.label){case 0:if(Ke.type!==0)return[3,5];Ye=void 0,gt=Ke.url,cd.label=1;case 1:return cd.trys.push([1,3,,4]),[4,se.context.cache.match(gt)];case 2:return Ye=cd.sent(),[3,4];case 3:return cd.sent(),se.context.logger.error("Error loading background-image "+gt),[3,4];case 4:return Ye&&(As=Th(S,B,[Ye.width,Ye.height,Ye.width/Ye.height]),si=As[0],ao=As[1],ho=As[2],Nr=As[3],ro=As[4],Mn=se.ctx.createPattern(se.resizeImage(Ye,Nr,ro),"repeat"),se.renderRepeat(si,Mn,ao,ho)),[3,6];case 5:Pu(Ke)?(Gt=Th(S,B,[null,null,null]),si=Gt[0],ao=Gt[1],ho=Gt[2],Nr=Gt[3],ro=Gt[4],ns=Lr(Ke.angle,Nr,ro),Is=ns[0],gs=ns[1],ps=ns[2],Tn=ns[3],wn=ns[4],en=document.createElement("canvas"),en.width=Nr,en.height=ro,us=en.getContext("2d"),Dn=us.createLinearGradient(gs,Tn,ps,wn),Jn(Ke.stops,Is).forEach(function(Uh){return Dn.addColorStop(Uh.stop,Qn(Uh.color))}),us.fillStyle=Dn,us.fillRect(0,0,Nr,ro),Nr>0&&ro>0&&(Mn=se.ctx.createPattern(en,"repeat"),se.renderRepeat(si,Mn,ao,ho))):su(Ke)&&(Ds=Th(S,B,[null,null,null]),si=Ds[0],Kr=Ds[1],Jo=Ds[2],Nr=Ds[3],ro=Ds[4],Bo=Ke.position.length===0?[OA]:Ke.position,ao=Cn(Bo[0],Nr),ho=Cn(Bo[Bo.length-1],ro),Pl=ml(Ke,ao,ho,Nr,ro),rA=Pl[0],qA=Pl[1],rA>0&&qA>0&&(Dc=se.ctx.createRadialGradient(Kr+ao,Jo+ho,0,Kr+ao,Jo+ho,rA),Jn(Ke.stops,rA*2).forEach(function(Uh){return Dc.addColorStop(Uh.stop,Qn(Uh.color))}),se.path(si),se.ctx.fillStyle=Dc,rA!==qA?(Rc=S.bounds.left+.5*S.bounds.width,kl=S.bounds.top+.5*S.bounds.height,ZA=qA/rA,ec=1/ZA,se.ctx.save(),se.ctx.translate(Rc,kl),se.ctx.transform(1,0,0,ZA,0,0),se.ctx.translate(-Rc,-kl),se.ctx.fillRect(Kr,ec*(Jo-kl)+kl,Nr,ro*ec),se.ctx.restore()):se.ctx.fill())),cd.label=6;case 6:return B--,[2]}})},se=this,he=0,Ce=S.styles.backgroundImage.slice(0).reverse(),Le.label=1;case 1:return he<Ce.length?(Ne=Ce[he],[5,z(Ne)]):[3,4];case 2:Le.sent(),Le.label=3;case 3:return he++,[3,1];case 4:return[2]}})})},v.prototype.renderSolidBorder=function(S,B,z){return o(this,void 0,void 0,function(){return c(this,function(se){return this.path(p0(z,B)),this.ctx.fillStyle=Qn(S),this.ctx.fill(),[2]})})},v.prototype.renderDoubleBorder=function(S,B,z,se){return o(this,void 0,void 0,function(){var he,Ce;return c(this,function(Ne){switch(Ne.label){case 0:return B<3?[4,this.renderSolidBorder(S,z,se)]:[3,2];case 1:return Ne.sent(),[2];case 2:return he=Ff(se,z),this.path(he),this.ctx.fillStyle=Qn(S),this.ctx.fill(),Ce=Wo(se,z),this.path(Ce),this.ctx.fill(),[2]}})})},v.prototype.renderNodeBackgroundAndBorders=function(S){return o(this,void 0,void 0,function(){var B,z,se,he,Ce,Ne,Le,Ke,Ye=this;return c(this,function(gt){switch(gt.label){case 0:return this.applyEffects(S.getEffects(2)),B=S.container.styles,z=!yi(B.backgroundColor)||B.backgroundImage.length,se=[{style:B.borderTopStyle,color:B.borderTopColor,width:B.borderTopWidth},{style:B.borderRightStyle,color:B.borderRightColor,width:B.borderRightWidth},{style:B.borderBottomStyle,color:B.borderBottomColor,width:B.borderBottomWidth},{style:B.borderLeftStyle,color:B.borderLeftColor,width:B.borderLeftWidth}],he=y0(nA(B.backgroundClip,0),S.curves),z||B.boxShadow.length?(this.ctx.save(),this.path(he),this.ctx.clip(),yi(B.backgroundColor)||(this.ctx.fillStyle=Qn(B.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(S.container)]):[3,2];case 1:gt.sent(),this.ctx.restore(),B.boxShadow.slice(0).reverse().forEach(function(As){Ye.ctx.save();var Gt=mu(S.curves),ns=As.inset?0:Fh,Is=xa(Gt,-ns+(As.inset?1:-1)*As.spread.number,(As.inset?1:-1)*As.spread.number,As.spread.number*(As.inset?-2:2),As.spread.number*(As.inset?-2:2));As.inset?(Ye.path(Gt),Ye.ctx.clip(),Ye.mask(Is)):(Ye.mask(Gt),Ye.ctx.clip(),Ye.path(Is)),Ye.ctx.shadowOffsetX=As.offsetX.number+ns,Ye.ctx.shadowOffsetY=As.offsetY.number,Ye.ctx.shadowColor=Qn(As.color),Ye.ctx.shadowBlur=As.blur.number,Ye.ctx.fillStyle=As.inset?Qn(As.color):"rgba(0,0,0,1)",Ye.ctx.fill(),Ye.ctx.restore()}),gt.label=2;case 2:Ce=0,Ne=0,Le=se,gt.label=3;case 3:return Ne<Le.length?(Ke=Le[Ne],Ke.style!==0&&!yi(Ke.color)&&Ke.width>0?Ke.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Ke.color,Ke.width,Ce,S.curves,2)]:[3,11]):[3,13];case 4:return gt.sent(),[3,11];case 5:return Ke.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Ke.color,Ke.width,Ce,S.curves,3)];case 6:return gt.sent(),[3,11];case 7:return Ke.style!==4?[3,9]:[4,this.renderDoubleBorder(Ke.color,Ke.width,Ce,S.curves)];case 8:return gt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Ke.color,Ce,S.curves)];case 10:gt.sent(),gt.label=11;case 11:Ce++,gt.label=12;case 12:return Ne++,[3,3];case 13:return[2]}})})},v.prototype.renderDashedDottedBorder=function(S,B,z,se,he){return o(this,void 0,void 0,function(){var Ce,Ne,Le,Ke,Ye,gt,As,Gt,ns,Is,gs,ps,Tn,wn,en,us,en,us;return c(this,function(Dn){return this.ctx.save(),Ce=sA(se,z),Ne=p0(se,z),he===2&&(this.path(Ne),this.ctx.clip()),Yo(Ne[0])?(Le=Ne[0].start.x,Ke=Ne[0].start.y):(Le=Ne[0].x,Ke=Ne[0].y),Yo(Ne[1])?(Ye=Ne[1].end.x,gt=Ne[1].end.y):(Ye=Ne[1].x,gt=Ne[1].y),z===0||z===2?As=Math.abs(Le-Ye):As=Math.abs(Ke-gt),this.ctx.beginPath(),he===3?this.formatPath(Ce):this.formatPath(Ne.slice(0,2)),Gt=B<3?B*3:B*2,ns=B<3?B*2:B,he===3&&(Gt=B,ns=B),Is=!0,As<=Gt*2?Is=!1:As<=Gt*2+ns?(gs=As/(2*Gt+ns),Gt*=gs,ns*=gs):(ps=Math.floor((As+ns)/(Gt+ns)),Tn=(As-ps*Gt)/(ps-1),wn=(As-(ps+1)*Gt)/ps,ns=wn<=0||Math.abs(ns-Tn)<Math.abs(ns-wn)?Tn:wn),Is&&(he===3?this.ctx.setLineDash([0,Gt+ns]):this.ctx.setLineDash([Gt,ns])),he===3?(this.ctx.lineCap="round",this.ctx.lineWidth=B):this.ctx.lineWidth=B*2+1.1,this.ctx.strokeStyle=Qn(S),this.ctx.stroke(),this.ctx.setLineDash([]),he===2&&(Yo(Ne[0])&&(en=Ne[3],us=Ne[0],this.ctx.beginPath(),this.formatPath([new is(en.end.x,en.end.y),new is(us.start.x,us.start.y)]),this.ctx.stroke()),Yo(Ne[1])&&(en=Ne[1],us=Ne[2],this.ctx.beginPath(),this.formatPath([new is(en.end.x,en.end.y),new is(us.start.x,us.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},v.prototype.render=function(S){return o(this,void 0,void 0,function(){var B;return c(this,function(z){switch(z.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Qn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),B=m0(S),[4,this.renderStack(B)];case 1:return z.sent(),this.applyEffects([]),[2,this.canvas]}})})},v})(up),Uf=function(j){return j instanceof wf||j instanceof Jg?!0:j instanceof bf&&j.type!==ph&&j.type!==mh},y0=function(j,v){switch(j){case 0:return mu(v);case 2:return u0(v);case 1:default:return Ql(v)}},Zv=function(j){switch(j){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ey=["-apple-system","system-ui"],gr=function(j){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?j.filter(function(v){return ey.indexOf(v)===-1}):j},Vr=(function(j){n(v,j);function v(S,B){var z=j.call(this,S,B)||this;return z.canvas=B.canvas?B.canvas:document.createElement("canvas"),z.ctx=z.canvas.getContext("2d"),z.options=B,z.canvas.width=Math.floor(B.width*B.scale),z.canvas.height=Math.floor(B.height*B.scale),z.canvas.style.width=B.width+"px",z.canvas.style.height=B.height+"px",z.ctx.scale(z.options.scale,z.options.scale),z.ctx.translate(-B.x,-B.y),z.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+B.width+"x"+B.height+" at "+B.x+","+B.y+") with scale "+B.scale),z}return v.prototype.render=function(S){return o(this,void 0,void 0,function(){var B,z;return c(this,function(se){switch(se.label){case 0:return B=td(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,S),[4,Ln(B)];case 1:return z=se.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Qn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(z,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},v})(up),Ln=function(j){return new Promise(function(v,S){var B=new Image;B.onload=function(){v(B)},B.onerror=S,B.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(j))})},kn=(function(){function j(v){var S=v.id,B=v.enabled;this.id=S,this.enabled=B,this.start=Date.now()}return j.prototype.debug=function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,h([this.id,this.getTime()+"ms"],v)):this.info.apply(this,v))},j.prototype.getTime=function(){return Date.now()-this.start},j.prototype.info=function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,h([this.id,this.getTime()+"ms"],v))},j.prototype.warn=function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,h([this.id,this.getTime()+"ms"],v)):this.info.apply(this,v))},j.prototype.error=function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,h([this.id,this.getTime()+"ms"],v)):this.info.apply(this,v))},j.instances={},j})(),Cr=(function(){function j(v,S){var B;this.windowBounds=S,this.instanceName="#"+j.instanceCount++,this.logger=new kn({id:this.instanceName,enabled:v.logging}),this.cache=(B=v.cache)!==null&&B!==void 0?B:new Ch(this,v)}return j.instanceCount=1,j})(),gl=function(j,v){return v===void 0&&(v={}),Uc(j,v)};typeof window<"u"&&Sh.setContext(window);var Uc=function(j,v){return o(void 0,void 0,void 0,function(){var S,B,z,se,he,Ce,Ne,Le,Ke,Ye,gt,As,Gt,ns,Is,gs,ps,Tn,wn,en,Dn,us,Dn,Mn,Ds,si,Kr,Jo,Nr,ro,Bo,ao,ho,Pl,rA,qA,Dc,Rc,kl,ZA;return c(this,function(ec){switch(ec.label){case 0:if(!j||typeof j!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(S=j.ownerDocument,!S)throw new Error("Element is not attached to a Document");if(B=S.defaultView,!B)throw new Error("Document is not attached to a Window");return z={allowTaint:(Mn=v.allowTaint)!==null&&Mn!==void 0?Mn:!1,imageTimeout:(Ds=v.imageTimeout)!==null&&Ds!==void 0?Ds:15e3,proxy:v.proxy,useCORS:(si=v.useCORS)!==null&&si!==void 0?si:!1},se=r({logging:(Kr=v.logging)!==null&&Kr!==void 0?Kr:!0,cache:v.cache},z),he={windowWidth:(Jo=v.windowWidth)!==null&&Jo!==void 0?Jo:B.innerWidth,windowHeight:(Nr=v.windowHeight)!==null&&Nr!==void 0?Nr:B.innerHeight,scrollX:(ro=v.scrollX)!==null&&ro!==void 0?ro:B.pageXOffset,scrollY:(Bo=v.scrollY)!==null&&Bo!==void 0?Bo:B.pageYOffset},Ce=new u(he.scrollX,he.scrollY,he.windowWidth,he.windowHeight),Ne=new Cr(se,Ce),Le=(ao=v.foreignObjectRendering)!==null&&ao!==void 0?ao:!1,Ke={allowTaint:(ho=v.allowTaint)!==null&&ho!==void 0?ho:!1,onclone:v.onclone,ignoreElements:v.ignoreElements,inlineImages:Le,copyStyles:Le},Ne.logger.debug("Starting document clone with size "+Ce.width+"x"+Ce.height+" scrolled to "+-Ce.left+","+-Ce.top),Ye=new ep(Ne,j,Ke),gt=Ye.clonedReferenceElement,gt?[4,Ye.toIFrame(S,Ce)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return As=ec.sent(),Gt=Bf(gt)||t0(gt)?A(gt.ownerDocument):f(Ne,gt),ns=Gt.width,Is=Gt.height,gs=Gt.left,ps=Gt.top,Tn=Ad(Ne,gt,v.backgroundColor),wn={canvas:v.canvas,backgroundColor:Tn,scale:(rA=(Pl=v.scale)!==null&&Pl!==void 0?Pl:B.devicePixelRatio)!==null&&rA!==void 0?rA:1,x:((qA=v.x)!==null&&qA!==void 0?qA:0)+gs,y:((Dc=v.y)!==null&&Dc!==void 0?Dc:0)+ps,width:(Rc=v.width)!==null&&Rc!==void 0?Rc:Math.ceil(ns),height:(kl=v.height)!==null&&kl!==void 0?kl:Math.ceil(Is)},Le?(Ne.logger.debug("Document cloned, using foreign object rendering"),Dn=new Vr(Ne,wn),[4,Dn.render(gt)]):[3,3];case 2:return en=ec.sent(),[3,5];case 3:return Ne.logger.debug("Document cloned, element located at "+gs+","+ps+" with size "+ns+"x"+Is+" using computed rendering"),Ne.logger.debug("Starting DOM parsing"),us=Km(Ne,gt),Tn===us.styles.backgroundColor&&(us.styles.backgroundColor=Ea.TRANSPARENT),Ne.logger.debug("Starting renderer for element at "+wn.x+","+wn.y+" with size "+wn.width+"x"+wn.height),Dn=new v0(Ne,wn),[4,Dn.render(us)];case 4:en=ec.sent(),ec.label=5;case 5:return(!((ZA=v.removeContainer)!==null&&ZA!==void 0)||ZA)&&(ep.destroy(As)||Ne.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Ne.logger.debug("Finished rendering"),[2,en]}})})},Ad=function(j,v,S){var B=v.ownerDocument,z=B.documentElement?hl(j,getComputedStyle(B.documentElement).backgroundColor):Ea.TRANSPARENT,se=B.body?hl(j,getComputedStyle(B.body).backgroundColor):Ea.TRANSPARENT,he=typeof S=="string"?hl(j,S):S===null?Ea.TRANSPARENT:4294967295;return v===B.documentElement?yi(z)?yi(se)?he:se:z:he};return gl}))})(Sx)),Sx.exports}/*!
 * html2pdf.js v0.12.1
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */var xC;function CV(){return xC||(xC=1,(function(s,e){(function(n,r){s.exports=r(jV,SV())})(self,function(t,n){return(function(){var r={"./node_modules/core-js/internals/a-callable.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-callable.js"),x=A("./node_modules/core-js/internals/try-to-string.js"),g=TypeError;u.exports=function(b){if(m(b))return b;throw new g(x(b)+" is not a function")}}),"./node_modules/core-js/internals/a-constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-constructor.js"),x=A("./node_modules/core-js/internals/try-to-string.js"),g=TypeError;u.exports=function(b){if(m(b))return b;throw new g(x(b)+" is not a constructor")}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-possible-prototype.js"),x=String,g=TypeError;u.exports=function(b){if(m(b))return b;throw new g("Can't set "+x(b)+" as a prototype")}}),"./node_modules/core-js/internals/a-set.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/set-helpers.js").has;u.exports=function(x){return m(x),x}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/well-known-symbol.js"),x=A("./node_modules/core-js/internals/object-create.js"),g=A("./node_modules/core-js/internals/object-define-property.js").f,b=m("unscopables"),I=Array.prototype;I[b]===void 0&&g(I,b,{configurable:!0,value:x(null)}),u.exports=function(N){I[b][N]=!0}}),"./node_modules/core-js/internals/an-instance.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/object-is-prototype-of.js"),x=TypeError;u.exports=function(g,b){if(m(b,g))return g;throw new x("Incorrect invocation")}}),"./node_modules/core-js/internals/an-object.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-object.js"),x=String,g=TypeError;u.exports=function(b){if(m(b))return b;throw new g(x(b)+" is not an object")}}),"./node_modules/core-js/internals/array-buffer-non-extensible.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=m(function(){if(typeof ArrayBuffer=="function"){var x=new ArrayBuffer(8);Object.isExtensible(x)&&Object.defineProperty(x,"a",{value:8})}})}),"./node_modules/core-js/internals/array-for-each.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/array-iteration.js").forEach,x=A("./node_modules/core-js/internals/array-method-is-strict.js"),g=x("forEach");u.exports=g?[].forEach:function(I){return m(this,I,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-from.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-bind-context.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-object.js"),b=A("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),I=A("./node_modules/core-js/internals/is-array-iterator-method.js"),N=A("./node_modules/core-js/internals/is-constructor.js"),C=A("./node_modules/core-js/internals/length-of-array-like.js"),E=A("./node_modules/core-js/internals/create-property.js"),F=A("./node_modules/core-js/internals/get-iterator.js"),L=A("./node_modules/core-js/internals/get-iterator-method.js"),O=Array;u.exports=function(Q){var U=g(Q),R=N(this),$=arguments.length,P=$>1?arguments[1]:void 0,V=P!==void 0;V&&(P=m(P,$>2?arguments[2]:void 0));var G=L(U),ae=0,ue,oe,X,Y,re,pe;if(G&&!(this===O&&I(G)))for(oe=R?new this:[],Y=F(U,G),re=Y.next;!(X=x(re,Y)).done;ae++)pe=V?b(Y,P,[X.value,ae],!0):X.value,E(oe,ae,pe);else for(ue=C(U),oe=R?new this(ue):O(ue);ue>ae;ae++)pe=V?P(U[ae],ae):U[ae],E(oe,ae,pe);return oe.length=ae,oe}}),"./node_modules/core-js/internals/array-includes.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-indexed-object.js"),x=A("./node_modules/core-js/internals/to-absolute-index.js"),g=A("./node_modules/core-js/internals/length-of-array-like.js"),b=function(I){return function(N,C,E){var F=m(N),L=g(F);if(L===0)return!I&&-1;var O=x(E,L),H;if(I&&C!==C){for(;L>O;)if(H=F[O++],H!==H)return!0}else for(;L>O;O++)if((I||O in F)&&F[O]===C)return I||O||0;return!I&&-1}};u.exports={includes:b(!0),indexOf:b(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-bind-context.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/indexed-object.js"),b=A("./node_modules/core-js/internals/to-object.js"),I=A("./node_modules/core-js/internals/length-of-array-like.js"),N=A("./node_modules/core-js/internals/array-species-create.js"),C=x([].push),E=function(F){var L=F===1,O=F===2,H=F===3,Q=F===4,U=F===6,R=F===7,$=F===5||U;return function(P,V,G,ae){for(var ue=b(P),oe=g(ue),X=I(oe),Y=m(V,G),re=0,pe=ae||N,ee=L?pe(P,X):O||R?pe(P,0):void 0,M,J;X>re;re++)if(($||re in oe)&&(M=oe[re],J=Y(M,re,ue),F))if(L)ee[re]=J;else if(J)switch(F){case 3:return!0;case 5:return M;case 6:return re;case 2:C(ee,M)}else switch(F){case 4:return!1;case 7:C(ee,M)}return U?-1:H||Q?Q:ee}};u.exports={forEach:E(0),map:E(1),filter:E(2),some:E(3),every:E(4),find:E(5),findIndex:E(6),filterReject:E(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/well-known-symbol.js"),g=A("./node_modules/core-js/internals/environment-v8-version.js"),b=x("species");u.exports=function(I){return g>=51||!m(function(){var N=[],C=N.constructor={};return C[b]=function(){return{foo:1}},N[I](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=function(x,g){var b=[][x];return!!b&&m(function(){b.call(null,g||function(){return 1},1)})}}),"./node_modules/core-js/internals/array-slice.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js");u.exports=m([].slice)}),"./node_modules/core-js/internals/array-species-constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-array.js"),x=A("./node_modules/core-js/internals/is-constructor.js"),g=A("./node_modules/core-js/internals/is-object.js"),b=A("./node_modules/core-js/internals/well-known-symbol.js"),I=b("species"),N=Array;u.exports=function(C){var E;return m(C)&&(E=C.constructor,x(E)&&(E===N||m(E.prototype))?E=void 0:g(E)&&(E=E[I],E===null&&(E=void 0))),E===void 0?N:E}}),"./node_modules/core-js/internals/array-species-create.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/array-species-constructor.js");u.exports=function(x,g){return new(m(x))(g===0?0:g)}}),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/an-object.js"),x=A("./node_modules/core-js/internals/iterator-close.js");u.exports=function(g,b,I,N){try{return N?b(m(I)[0],I[1]):b(I)}catch(C){x(g,"throw",C)}}}),"./node_modules/core-js/internals/check-correctness-of-iteration.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/well-known-symbol.js"),x=m("iterator"),g=!1;try{var b=0,I={next:function(){return{done:!!b++}},return:function(){g=!0}};I[x]=function(){return this},Array.from(I,function(){throw 2})}catch{}u.exports=function(N,C){try{if(!C&&!g)return!1}catch{return!1}var E=!1;try{var F={};F[x]=function(){return{next:function(){return{done:E=!0}}}},N(F)}catch{}return E}}),"./node_modules/core-js/internals/classof-raw.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=m({}.toString),g=m("".slice);u.exports=function(b){return g(x(b),8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-string-tag-support.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/classof-raw.js"),b=A("./node_modules/core-js/internals/well-known-symbol.js"),I=b("toStringTag"),N=Object,C=g((function(){return arguments})())==="Arguments",E=function(F,L){try{return F[L]}catch{}};u.exports=m?g:function(F){var L,O,H;return F===void 0?"Undefined":F===null?"Null":typeof(O=E(L=N(F),I))=="string"?O:C?g(L):(H=g(L))==="Object"&&x(L.callee)?"Arguments":H}}),"./node_modules/core-js/internals/collection-strong.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/object-create.js"),x=A("./node_modules/core-js/internals/define-built-in-accessor.js"),g=A("./node_modules/core-js/internals/define-built-ins.js"),b=A("./node_modules/core-js/internals/function-bind-context.js"),I=A("./node_modules/core-js/internals/an-instance.js"),N=A("./node_modules/core-js/internals/is-null-or-undefined.js"),C=A("./node_modules/core-js/internals/iterate.js"),E=A("./node_modules/core-js/internals/iterator-define.js"),F=A("./node_modules/core-js/internals/create-iter-result-object.js"),L=A("./node_modules/core-js/internals/set-species.js"),O=A("./node_modules/core-js/internals/descriptors.js"),H=A("./node_modules/core-js/internals/internal-metadata.js").fastKey,Q=A("./node_modules/core-js/internals/internal-state.js"),U=Q.set,R=Q.getterFor;u.exports={getConstructor:function($,P,V,G){var ae=$(function(re,pe){I(re,ue),U(re,{type:P,index:m(null),first:null,last:null,size:0}),O||(re.size=0),N(pe)||C(pe,re[G],{that:re,AS_ENTRIES:V})}),ue=ae.prototype,oe=R(P),X=function(re,pe,ee){var M=oe(re),J=Y(re,pe),ie,le;return J?J.value=ee:(M.last=J={index:le=H(pe,!0),key:pe,value:ee,previous:ie=M.last,next:null,removed:!1},M.first||(M.first=J),ie&&(ie.next=J),O?M.size++:re.size++,le!=="F"&&(M.index[le]=J)),re},Y=function(re,pe){var ee=oe(re),M=H(pe),J;if(M!=="F")return ee.index[M];for(J=ee.first;J;J=J.next)if(J.key===pe)return J};return g(ue,{clear:function(){for(var pe=this,ee=oe(pe),M=ee.first;M;)M.removed=!0,M.previous&&(M.previous=M.previous.next=null),M=M.next;ee.first=ee.last=null,ee.index=m(null),O?ee.size=0:pe.size=0},delete:function(re){var pe=this,ee=oe(pe),M=Y(pe,re);if(M){var J=M.next,ie=M.previous;delete ee.index[M.index],M.removed=!0,ie&&(ie.next=J),J&&(J.previous=ie),ee.first===M&&(ee.first=J),ee.last===M&&(ee.last=ie),O?ee.size--:pe.size--}return!!M},forEach:function(pe){for(var ee=oe(this),M=b(pe,arguments.length>1?arguments[1]:void 0),J;J=J?J.next:ee.first;)for(M(J.value,J.key,this);J&&J.removed;)J=J.previous},has:function(pe){return!!Y(this,pe)}}),g(ue,V?{get:function(pe){var ee=Y(this,pe);return ee&&ee.value},set:function(pe,ee){return X(this,pe===0?0:pe,ee)}}:{add:function(pe){return X(this,pe=pe===0?0:pe,pe)}}),O&&x(ue,"size",{configurable:!0,get:function(){return oe(this).size}}),ae},setStrong:function($,P,V){var G=P+" Iterator",ae=R(P),ue=R(G);E($,P,function(oe,X){U(this,{type:G,target:oe,state:ae(oe),kind:X,last:null})},function(){for(var oe=ue(this),X=oe.kind,Y=oe.last;Y&&Y.removed;)Y=Y.previous;return!oe.target||!(oe.last=Y=Y?Y.next:oe.state.first)?(oe.target=null,F(void 0,!0)):F(X==="keys"?Y.key:X==="values"?Y.value:[Y.key,Y.value],!1)},V?"entries":"values",!V,!0),L(P)}}}),"./node_modules/core-js/internals/collection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/function-uncurry-this.js"),b=A("./node_modules/core-js/internals/is-forced.js"),I=A("./node_modules/core-js/internals/define-built-in.js"),N=A("./node_modules/core-js/internals/internal-metadata.js"),C=A("./node_modules/core-js/internals/iterate.js"),E=A("./node_modules/core-js/internals/an-instance.js"),F=A("./node_modules/core-js/internals/is-callable.js"),L=A("./node_modules/core-js/internals/is-null-or-undefined.js"),O=A("./node_modules/core-js/internals/is-object.js"),H=A("./node_modules/core-js/internals/fails.js"),Q=A("./node_modules/core-js/internals/check-correctness-of-iteration.js"),U=A("./node_modules/core-js/internals/set-to-string-tag.js"),R=A("./node_modules/core-js/internals/inherit-if-required.js");u.exports=function($,P,V){var G=$.indexOf("Map")!==-1,ae=$.indexOf("Weak")!==-1,ue=G?"set":"add",oe=x[$],X=oe&&oe.prototype,Y=oe,re={},pe=function(ve){var Se=g(X[ve]);I(X,ve,ve==="add"?function(Be){return Se(this,Be===0?0:Be),this}:ve==="delete"?function(ge){return ae&&!O(ge)?!1:Se(this,ge===0?0:ge)}:ve==="get"?function(Be){return ae&&!O(Be)?void 0:Se(this,Be===0?0:Be)}:ve==="has"?function(Be){return ae&&!O(Be)?!1:Se(this,Be===0?0:Be)}:function(Be,Fe){return Se(this,Be===0?0:Be,Fe),this})},ee=b($,!F(oe)||!(ae||X.forEach&&!H(function(){new oe().entries().next()})));if(ee)Y=V.getConstructor(P,$,G,ue),N.enable();else if(b($,!0)){var M=new Y,J=M[ue](ae?{}:-0,1)!==M,ie=H(function(){M.has(1)}),le=Q(function(ve){new oe(ve)}),ce=!ae&&H(function(){for(var ve=new oe,Se=5;Se--;)ve[ue](Se,Se);return!ve.has(-0)});le||(Y=P(function(ve,Se){E(ve,X);var ge=R(new oe,ve,Y);return L(Se)||C(Se,ge[ue],{that:ge,AS_ENTRIES:G}),ge}),Y.prototype=X,X.constructor=Y),(ie||ce)&&(pe("delete"),pe("has"),G&&pe("get")),(ce||J)&&pe(ue),ae&&X.clear&&delete X.clear}return re[$]=Y,m({global:!0,constructor:!0,forced:Y!==oe},re),U(Y,$),ae||V.setStrong(Y,$,G),Y}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/has-own-property.js"),x=A("./node_modules/core-js/internals/own-keys.js"),g=A("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),b=A("./node_modules/core-js/internals/object-define-property.js");u.exports=function(I,N,C){for(var E=x(N),F=b.f,L=g.f,O=0;O<E.length;O++){var H=E[O];!m(I,H)&&!(C&&m(C,H))&&F(I,H,L(N,H))}}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=!m(function(){function x(){}return x.prototype.constructor=null,Object.getPrototypeOf(new x)!==x.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/require-object-coercible.js"),g=A("./node_modules/core-js/internals/to-string.js"),b=/"/g,I=m("".replace);u.exports=function(N,C,E,F){var L=g(x(N)),O="<"+C;return E!==""&&(O+=" "+E+'="'+I(g(F),b,"&quot;")+'"'),O+">"+L+"</"+C+">"}}),"./node_modules/core-js/internals/create-iter-result-object.js":(function(u){u.exports=function(f,A){return{value:f,done:A}}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/object-define-property.js"),g=A("./node_modules/core-js/internals/create-property-descriptor.js");u.exports=m?function(b,I,N){return x.f(b,I,g(1,N))}:function(b,I,N){return b[I]=N,b}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(u){u.exports=function(f,A){return{enumerable:!(f&1),configurable:!(f&2),writable:!(f&4),value:A}}}),"./node_modules/core-js/internals/create-property.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/object-define-property.js"),g=A("./node_modules/core-js/internals/create-property-descriptor.js");u.exports=function(b,I,N){m?x.f(b,I,g(0,N)):b[I]=N}}),"./node_modules/core-js/internals/define-built-in-accessor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/make-built-in.js"),x=A("./node_modules/core-js/internals/object-define-property.js");u.exports=function(g,b,I){return I.get&&m(I.get,b,{getter:!0}),I.set&&m(I.set,b,{setter:!0}),x.f(g,b,I)}}),"./node_modules/core-js/internals/define-built-in.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-callable.js"),x=A("./node_modules/core-js/internals/object-define-property.js"),g=A("./node_modules/core-js/internals/make-built-in.js"),b=A("./node_modules/core-js/internals/define-global-property.js");u.exports=function(I,N,C,E){E||(E={});var F=E.enumerable,L=E.name!==void 0?E.name:N;if(m(C)&&g(C,L,E),E.global)F?I[N]=C:b(N,C);else{try{E.unsafe?I[N]&&(F=!0):delete I[N]}catch{}F?I[N]=C:x.f(I,N,{value:C,enumerable:!1,configurable:!E.nonConfigurable,writable:!E.nonWritable})}return I}}),"./node_modules/core-js/internals/define-built-ins.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/define-built-in.js");u.exports=function(x,g,b){for(var I in g)m(x,I,g[I],b);return x}}),"./node_modules/core-js/internals/define-global-property.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=Object.defineProperty;u.exports=function(g,b){try{x(m,g,{value:b,configurable:!0,writable:!0})}catch{m[g]=b}return b}}),"./node_modules/core-js/internals/descriptors.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=!m(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),"./node_modules/core-js/internals/document-create-element.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/is-object.js"),g=m.document,b=x(g)&&x(g.createElement);u.exports=function(I){return b?g.createElement(I):{}}}),"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":(function(u){var f=TypeError,A=9007199254740991;u.exports=function(m){if(m>A)throw f("Maximum allowed index exceeded");return m}}),"./node_modules/core-js/internals/dom-iterables.js":(function(u){u.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/dom-token-list-prototype.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/document-create-element.js"),x=m("span").classList,g=x&&x.constructor&&x.constructor.prototype;u.exports=g===Object.prototype?void 0:g}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(u){u.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/environment-is-ios-pebble.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/environment-user-agent.js");u.exports=/ipad|iphone|ipod/i.test(m)&&typeof Pebble<"u"}),"./node_modules/core-js/internals/environment-is-ios.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/environment-user-agent.js");u.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(m)}),"./node_modules/core-js/internals/environment-is-node.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/environment.js");u.exports=m==="NODE"}),"./node_modules/core-js/internals/environment-is-webos-webkit.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/environment-user-agent.js");u.exports=/web0s(?!.*chrome)/i.test(m)}),"./node_modules/core-js/internals/environment-user-agent.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=m.navigator,g=x&&x.userAgent;u.exports=g?String(g):""}),"./node_modules/core-js/internals/environment-v8-version.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/environment-user-agent.js"),g=m.process,b=m.Deno,I=g&&g.versions||b&&b.version,N=I&&I.v8,C,E;N&&(C=N.split("."),E=C[0]>0&&C[0]<4?1:+(C[0]+C[1])),!E&&x&&(C=x.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=x.match(/Chrome\/(\d+)/),C&&(E=+C[1]))),u.exports=E}),"./node_modules/core-js/internals/environment.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/environment-user-agent.js"),g=A("./node_modules/core-js/internals/classof-raw.js"),b=function(I){return x.slice(0,I.length)===I};u.exports=(function(){return b("Bun/")?"BUN":b("Cloudflare-Workers")?"CLOUDFLARE":b("Deno/")?"DENO":b("Node.js/")?"NODE":m.Bun&&typeof Bun.version=="string"?"BUN":m.Deno&&typeof Deno.version=="object"?"DENO":g(m.process)==="process"?"NODE":m.window&&m.document?"BROWSER":"REST"})()}),"./node_modules/core-js/internals/export.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,g=A("./node_modules/core-js/internals/create-non-enumerable-property.js"),b=A("./node_modules/core-js/internals/define-built-in.js"),I=A("./node_modules/core-js/internals/define-global-property.js"),N=A("./node_modules/core-js/internals/copy-constructor-properties.js"),C=A("./node_modules/core-js/internals/is-forced.js");u.exports=function(E,F){var L=E.target,O=E.global,H=E.stat,Q,U,R,$,P,V;if(O?U=m:H?U=m[L]||I(L,{}):U=m[L]&&m[L].prototype,U)for(R in F){if(P=F[R],E.dontCallGetSet?(V=x(U,R),$=V&&V.value):$=U[R],Q=C(O?R:L+(H?".":"#")+R,E.forced),!Q&&$!==void 0){if(typeof P==typeof $)continue;N(P,$)}(E.sham||$&&$.sham)&&g(P,"sham",!0),b(U,R,P,E)}}}),"./node_modules/core-js/internals/fails.js":(function(u){u.exports=function(f){try{return!!f()}catch{return!0}}}),"./node_modules/core-js/internals/freezing.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=!m(function(){return Object.isExtensible(Object.preventExtensions({}))})}),"./node_modules/core-js/internals/function-apply.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-bind-native.js"),x=Function.prototype,g=x.apply,b=x.call;u.exports=typeof Reflect=="object"&&Reflect.apply||(m?b.bind(g):function(){return b.apply(g,arguments)})}),"./node_modules/core-js/internals/function-bind-context.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this-clause.js"),x=A("./node_modules/core-js/internals/a-callable.js"),g=A("./node_modules/core-js/internals/function-bind-native.js"),b=m(m.bind);u.exports=function(I,N){return x(I),N===void 0?I:g?b(I,N):function(){return I.apply(N,arguments)}}}),"./node_modules/core-js/internals/function-bind-native.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=!m(function(){var x=(function(){}).bind();return typeof x!="function"||x.hasOwnProperty("prototype")})}),"./node_modules/core-js/internals/function-call.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-bind-native.js"),x=Function.prototype.call;u.exports=m?x.bind(x):function(){return x.apply(x,arguments)}}),"./node_modules/core-js/internals/function-name.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/has-own-property.js"),g=Function.prototype,b=m&&Object.getOwnPropertyDescriptor,I=x(g,"name"),N=I&&(function(){}).name==="something",C=I&&(!m||m&&b(g,"name").configurable);u.exports={EXISTS:I,PROPER:N,CONFIGURABLE:C}}),"./node_modules/core-js/internals/function-uncurry-this-accessor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/a-callable.js");u.exports=function(g,b,I){try{return m(x(Object.getOwnPropertyDescriptor(g,b)[I]))}catch{}}}),"./node_modules/core-js/internals/function-uncurry-this-clause.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/classof-raw.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js");u.exports=function(g){if(m(g)==="Function")return x(g)}}),"./node_modules/core-js/internals/function-uncurry-this.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-bind-native.js"),x=Function.prototype,g=x.call,b=m&&x.bind.bind(g,g);u.exports=m?b:function(I){return function(){return g.apply(I,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=function(b){return x(b)?b:void 0};u.exports=function(b,I){return arguments.length<2?g(m[b]):m[b]&&m[b][I]}}),"./node_modules/core-js/internals/get-iterator-direct.js":(function(u){u.exports=function(f){return{iterator:f,next:f.next,done:!1}}}),"./node_modules/core-js/internals/get-iterator-method.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/classof.js"),x=A("./node_modules/core-js/internals/get-method.js"),g=A("./node_modules/core-js/internals/is-null-or-undefined.js"),b=A("./node_modules/core-js/internals/iterators.js"),I=A("./node_modules/core-js/internals/well-known-symbol.js"),N=I("iterator");u.exports=function(C){if(!g(C))return x(C,N)||x(C,"@@iterator")||b[m(C)]}}),"./node_modules/core-js/internals/get-iterator.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/a-callable.js"),g=A("./node_modules/core-js/internals/an-object.js"),b=A("./node_modules/core-js/internals/try-to-string.js"),I=A("./node_modules/core-js/internals/get-iterator-method.js"),N=TypeError;u.exports=function(C,E){var F=arguments.length<2?I(C):E;if(x(F))return g(m(F,C));throw new N(b(C)+" is not iterable")}}),"./node_modules/core-js/internals/get-json-replacer-function.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/is-array.js"),g=A("./node_modules/core-js/internals/is-callable.js"),b=A("./node_modules/core-js/internals/classof-raw.js"),I=A("./node_modules/core-js/internals/to-string.js"),N=m([].push);u.exports=function(C){if(g(C))return C;if(x(C)){for(var E=C.length,F=[],L=0;L<E;L++){var O=C[L];typeof O=="string"?N(F,O):(typeof O=="number"||b(O)==="Number"||b(O)==="String")&&N(F,I(O))}var H=F.length,Q=!0;return function(U,R){if(Q)return Q=!1,R;if(x(this))return R;for(var $=0;$<H;$++)if(F[$]===U)return R}}}}),"./node_modules/core-js/internals/get-method.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-callable.js"),x=A("./node_modules/core-js/internals/is-null-or-undefined.js");u.exports=function(g,b){var I=g[b];return x(I)?void 0:m(I)}}),"./node_modules/core-js/internals/get-set-record.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-callable.js"),x=A("./node_modules/core-js/internals/an-object.js"),g=A("./node_modules/core-js/internals/function-call.js"),b=A("./node_modules/core-js/internals/to-integer-or-infinity.js"),I=A("./node_modules/core-js/internals/get-iterator-direct.js"),N="Invalid size",C=RangeError,E=TypeError,F=Math.max,L=function(O,H){this.set=O,this.size=F(H,0),this.has=m(O.has),this.keys=m(O.keys)};L.prototype={getIterator:function(){return I(x(g(this.keys,this.set)))},includes:function(O){return g(this.has,this.set,O)}},u.exports=function(O){x(O);var H=+O.size;if(H!==H)throw new E(N);var Q=b(H);if(Q<0)throw new C(N);return new L(O,Q)}}),"./node_modules/core-js/internals/global-this.js":(function(u){var f=function(A){return A&&A.Math===Math&&A};u.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof Gj=="object"&&Gj)||f(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has-own-property.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/to-object.js"),g=m({}.hasOwnProperty);u.exports=Object.hasOwn||function(I,N){return g(x(I),N)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(u){u.exports={}}),"./node_modules/core-js/internals/host-report-errors.js":(function(u){u.exports=function(f,A){try{arguments.length===1?console.error(f):console.error(f,A)}catch{}}}),"./node_modules/core-js/internals/html.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/get-built-in.js");u.exports=m("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/fails.js"),g=A("./node_modules/core-js/internals/document-create-element.js");u.exports=!m&&!x(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!==7})}),"./node_modules/core-js/internals/indexed-object.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/fails.js"),g=A("./node_modules/core-js/internals/classof-raw.js"),b=Object,I=m("".split);u.exports=x(function(){return!b("z").propertyIsEnumerable(0)})?function(N){return g(N)==="String"?I(N,""):b(N)}:b}),"./node_modules/core-js/internals/inherit-if-required.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-callable.js"),x=A("./node_modules/core-js/internals/is-object.js"),g=A("./node_modules/core-js/internals/object-set-prototype-of.js");u.exports=function(b,I,N){var C,E;return g&&m(C=I.constructor)&&C!==N&&x(E=C.prototype)&&E!==N.prototype&&g(b,E),b}}),"./node_modules/core-js/internals/inspect-source.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/shared-store.js"),b=m(Function.toString);x(g.inspectSource)||(g.inspectSource=function(I){return b(I)}),u.exports=g.inspectSource}),"./node_modules/core-js/internals/internal-metadata.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/hidden-keys.js"),b=A("./node_modules/core-js/internals/is-object.js"),I=A("./node_modules/core-js/internals/has-own-property.js"),N=A("./node_modules/core-js/internals/object-define-property.js").f,C=A("./node_modules/core-js/internals/object-get-own-property-names.js"),E=A("./node_modules/core-js/internals/object-get-own-property-names-external.js"),F=A("./node_modules/core-js/internals/object-is-extensible.js"),L=A("./node_modules/core-js/internals/uid.js"),O=A("./node_modules/core-js/internals/freezing.js"),H=!1,Q=L("meta"),U=0,R=function(ue){N(ue,Q,{value:{objectID:"O"+U++,weakData:{}}})},$=function(ue,oe){if(!b(ue))return typeof ue=="symbol"?ue:(typeof ue=="string"?"S":"P")+ue;if(!I(ue,Q)){if(!F(ue))return"F";if(!oe)return"E";R(ue)}return ue[Q].objectID},P=function(ue,oe){if(!I(ue,Q)){if(!F(ue))return!0;if(!oe)return!1;R(ue)}return ue[Q].weakData},V=function(ue){return O&&H&&F(ue)&&!I(ue,Q)&&R(ue),ue},G=function(){ae.enable=function(){},H=!0;var ue=C.f,oe=x([].splice),X={};X[Q]=1,ue(X).length&&(C.f=function(Y){for(var re=ue(Y),pe=0,ee=re.length;pe<ee;pe++)if(re[pe]===Q){oe(re,pe,1);break}return re},m({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:E.f}))},ae=u.exports={enable:G,fastKey:$,getWeakData:P,onFreeze:V};g[Q]=!0}),"./node_modules/core-js/internals/internal-state.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/weak-map-basic-detection.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/is-object.js"),b=A("./node_modules/core-js/internals/create-non-enumerable-property.js"),I=A("./node_modules/core-js/internals/has-own-property.js"),N=A("./node_modules/core-js/internals/shared-store.js"),C=A("./node_modules/core-js/internals/shared-key.js"),E=A("./node_modules/core-js/internals/hidden-keys.js"),F="Object already initialized",L=x.TypeError,O=x.WeakMap,H,Q,U,R=function(G){return U(G)?Q(G):H(G,{})},$=function(G){return function(ae){var ue;if(!g(ae)||(ue=Q(ae)).type!==G)throw new L("Incompatible receiver, "+G+" required");return ue}};if(m||N.state){var P=N.state||(N.state=new O);P.get=P.get,P.has=P.has,P.set=P.set,H=function(G,ae){if(P.has(G))throw new L(F);return ae.facade=G,P.set(G,ae),ae},Q=function(G){return P.get(G)||{}},U=function(G){return P.has(G)}}else{var V=C("state");E[V]=!0,H=function(G,ae){if(I(G,V))throw new L(F);return ae.facade=G,b(G,V,ae),ae},Q=function(G){return I(G,V)?G[V]:{}},U=function(G){return I(G,V)}}u.exports={set:H,get:Q,has:U,enforce:R,getterFor:$}}),"./node_modules/core-js/internals/is-array-iterator-method.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/well-known-symbol.js"),x=A("./node_modules/core-js/internals/iterators.js"),g=m("iterator"),b=Array.prototype;u.exports=function(I){return I!==void 0&&(x.Array===I||b[g]===I)}}),"./node_modules/core-js/internals/is-array.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/classof-raw.js");u.exports=Array.isArray||function(g){return m(g)==="Array"}}),"./node_modules/core-js/internals/is-callable.js":(function(u){var f=typeof document=="object"&&document.all;u.exports=typeof f>"u"&&f!==void 0?function(A){return typeof A=="function"||A===f}:function(A){return typeof A=="function"}}),"./node_modules/core-js/internals/is-constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/fails.js"),g=A("./node_modules/core-js/internals/is-callable.js"),b=A("./node_modules/core-js/internals/classof.js"),I=A("./node_modules/core-js/internals/get-built-in.js"),N=A("./node_modules/core-js/internals/inspect-source.js"),C=function(){},E=I("Reflect","construct"),F=/^\s*(?:class|function)\b/,L=m(F.exec),O=!F.test(C),H=function(R){if(!g(R))return!1;try{return E(C,[],R),!0}catch{return!1}},Q=function(R){if(!g(R))return!1;switch(b(R)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return O||!!L(F,N(R))}catch{return!0}};Q.sham=!0,u.exports=!E||x(function(){var U;return H(H.call)||!H(Object)||!H(function(){U=!0})||U})?Q:H}),"./node_modules/core-js/internals/is-forced.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=/#|\.prototype\./,b=function(F,L){var O=N[I(F)];return O===E?!0:O===C?!1:x(L)?m(L):!!L},I=b.normalize=function(F){return String(F).replace(g,".").toLowerCase()},N=b.data={},C=b.NATIVE="N",E=b.POLYFILL="P";u.exports=b}),"./node_modules/core-js/internals/is-iterable.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/classof.js"),x=A("./node_modules/core-js/internals/has-own-property.js"),g=A("./node_modules/core-js/internals/is-null-or-undefined.js"),b=A("./node_modules/core-js/internals/well-known-symbol.js"),I=A("./node_modules/core-js/internals/iterators.js"),N=b("iterator"),C=Object;u.exports=function(E){if(g(E))return!1;var F=C(E);return F[N]!==void 0||"@@iterator"in F||x(I,m(F))}}),"./node_modules/core-js/internals/is-null-or-undefined.js":(function(u){u.exports=function(f){return f==null}}),"./node_modules/core-js/internals/is-object.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-callable.js");u.exports=function(x){return typeof x=="object"?x!==null:m(x)}}),"./node_modules/core-js/internals/is-possible-prototype.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-object.js");u.exports=function(x){return m(x)||x===null}}),"./node_modules/core-js/internals/is-pure.js":(function(u){u.exports=!1}),"./node_modules/core-js/internals/is-symbol.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/get-built-in.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/object-is-prototype-of.js"),b=A("./node_modules/core-js/internals/use-symbol-as-uid.js"),I=Object;u.exports=b?function(N){return typeof N=="symbol"}:function(N){var C=m("Symbol");return x(C)&&g(C.prototype,I(N))}}),"./node_modules/core-js/internals/iterate-simple.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js");u.exports=function(x,g,b){for(var I=b?x:x.iterator,N=x.next,C,E;!(C=m(N,I)).done;)if(E=g(C.value),E!==void 0)return E}}),"./node_modules/core-js/internals/iterate.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-bind-context.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/an-object.js"),b=A("./node_modules/core-js/internals/try-to-string.js"),I=A("./node_modules/core-js/internals/is-array-iterator-method.js"),N=A("./node_modules/core-js/internals/length-of-array-like.js"),C=A("./node_modules/core-js/internals/object-is-prototype-of.js"),E=A("./node_modules/core-js/internals/get-iterator.js"),F=A("./node_modules/core-js/internals/get-iterator-method.js"),L=A("./node_modules/core-js/internals/iterator-close.js"),O=TypeError,H=function(U,R){this.stopped=U,this.result=R},Q=H.prototype;u.exports=function(U,R,$){var P=$&&$.that,V=!!($&&$.AS_ENTRIES),G=!!($&&$.IS_RECORD),ae=!!($&&$.IS_ITERATOR),ue=!!($&&$.INTERRUPTED),oe=m(R,P),X,Y,re,pe,ee,M,J,ie=function(ce){return X&&L(X,"normal"),new H(!0,ce)},le=function(ce){return V?(g(ce),ue?oe(ce[0],ce[1],ie):oe(ce[0],ce[1])):ue?oe(ce,ie):oe(ce)};if(G)X=U.iterator;else if(ae)X=U;else{if(Y=F(U),!Y)throw new O(b(U)+" is not iterable");if(I(Y)){for(re=0,pe=N(U);pe>re;re++)if(ee=le(U[re]),ee&&C(Q,ee))return ee;return new H(!1)}X=E(U,Y)}for(M=G?U.next:X.next;!(J=x(M,X)).done;){try{ee=le(J.value)}catch(ce){L(X,"throw",ce)}if(typeof ee=="object"&&ee&&C(Q,ee))return ee}return new H(!1)}}),"./node_modules/core-js/internals/iterator-close-all.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/iterator-close.js");u.exports=function(x,g,b){for(var I=x.length-1;I>=0;I--)if(x[I]!==void 0)try{b=m(x[I].iterator,g,b)}catch(N){g="throw",b=N}if(g==="throw")throw b;return b}}),"./node_modules/core-js/internals/iterator-close.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/an-object.js"),g=A("./node_modules/core-js/internals/get-method.js");u.exports=function(b,I,N){var C,E;x(b);try{if(C=g(b,"return"),!C){if(I==="throw")throw N;return N}C=m(C,b)}catch(F){E=!0,C=F}if(I==="throw")throw N;if(E)throw C;return x(C),N}}),"./node_modules/core-js/internals/iterator-create-constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,x=A("./node_modules/core-js/internals/object-create.js"),g=A("./node_modules/core-js/internals/create-property-descriptor.js"),b=A("./node_modules/core-js/internals/set-to-string-tag.js"),I=A("./node_modules/core-js/internals/iterators.js"),N=function(){return this};u.exports=function(C,E,F,L){var O=E+" Iterator";return C.prototype=x(m,{next:g(+!L,F)}),b(C,O,!1,!0),I[O]=N,C}}),"./node_modules/core-js/internals/iterator-create-proxy.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/object-create.js"),g=A("./node_modules/core-js/internals/create-non-enumerable-property.js"),b=A("./node_modules/core-js/internals/define-built-ins.js"),I=A("./node_modules/core-js/internals/well-known-symbol.js"),N=A("./node_modules/core-js/internals/internal-state.js"),C=A("./node_modules/core-js/internals/get-method.js"),E=A("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,F=A("./node_modules/core-js/internals/create-iter-result-object.js"),L=A("./node_modules/core-js/internals/iterator-close.js"),O=A("./node_modules/core-js/internals/iterator-close-all.js"),H=I("toStringTag"),Q="IteratorHelper",U="WrapForValidIterator",R="normal",$="throw",P=N.set,V=function(ue){var oe=N.getterFor(ue?U:Q);return b(x(E),{next:function(){var Y=oe(this);if(ue)return Y.nextHandler();if(Y.done)return F(void 0,!0);try{var re=Y.nextHandler();return Y.returnHandlerResult?re:F(re,Y.done)}catch(pe){throw Y.done=!0,pe}},return:function(){var X=oe(this),Y=X.iterator;if(X.done=!0,ue){var re=C(Y,"return");return re?m(re,Y):F(void 0,!0)}if(X.inner)try{L(X.inner.iterator,R)}catch(pe){return L(Y,$,pe)}if(X.openIters)try{O(X.openIters,R)}catch(pe){return L(Y,$,pe)}return Y&&L(Y,R),F(void 0,!0)}})},G=V(!0),ae=V(!1);g(ae,H,"Iterator Helper"),u.exports=function(ue,oe,X){var Y=function(pe,ee){ee?(ee.iterator=pe.iterator,ee.next=pe.next):ee=pe,ee.type=oe?U:Q,ee.returnHandlerResult=!!X,ee.nextHandler=ue,ee.counter=0,ee.done=!1,P(this,ee)};return Y.prototype=oe?G:ae,Y}}),"./node_modules/core-js/internals/iterator-define.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/is-pure.js"),b=A("./node_modules/core-js/internals/function-name.js"),I=A("./node_modules/core-js/internals/is-callable.js"),N=A("./node_modules/core-js/internals/iterator-create-constructor.js"),C=A("./node_modules/core-js/internals/object-get-prototype-of.js"),E=A("./node_modules/core-js/internals/object-set-prototype-of.js"),F=A("./node_modules/core-js/internals/set-to-string-tag.js"),L=A("./node_modules/core-js/internals/create-non-enumerable-property.js"),O=A("./node_modules/core-js/internals/define-built-in.js"),H=A("./node_modules/core-js/internals/well-known-symbol.js"),Q=A("./node_modules/core-js/internals/iterators.js"),U=A("./node_modules/core-js/internals/iterators-core.js"),R=b.PROPER,$=b.CONFIGURABLE,P=U.IteratorPrototype,V=U.BUGGY_SAFARI_ITERATORS,G=H("iterator"),ae="keys",ue="values",oe="entries",X=function(){return this};u.exports=function(Y,re,pe,ee,M,J,ie){N(pe,re,ee);var le=function(me){if(me===M&&Be)return Be;if(!V&&me&&me in Se)return Se[me];switch(me){case ae:return function(){return new pe(this,me)};case ue:return function(){return new pe(this,me)};case oe:return function(){return new pe(this,me)}}return function(){return new pe(this)}},ce=re+" Iterator",ve=!1,Se=Y.prototype,ge=Se[G]||Se["@@iterator"]||M&&Se[M],Be=!V&&ge||le(M),Fe=re==="Array"&&Se.entries||ge,Qe,Ze,Pe;if(Fe&&(Qe=C(Fe.call(new Y)),Qe!==Object.prototype&&Qe.next&&(!g&&C(Qe)!==P&&(E?E(Qe,P):I(Qe[G])||O(Qe,G,X)),F(Qe,ce,!0,!0),g&&(Q[ce]=X))),R&&M===ue&&ge&&ge.name!==ue&&(!g&&$?L(Se,"name",ue):(ve=!0,Be=function(){return x(ge,this)})),M)if(Ze={values:le(ue),keys:J?Be:le(ae),entries:le(oe)},ie)for(Pe in Ze)(V||ve||!(Pe in Se))&&O(Se,Pe,Ze[Pe]);else m({target:re,proto:!0,forced:V||ve},Ze);return(!g||ie)&&Se[G]!==Be&&O(Se,G,Be,{name:M}),Q[re]=Be,Ze}}),"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":(function(u){u.exports=function(f,A){var m=typeof Iterator=="function"&&Iterator.prototype[f];if(m)try{m.call({next:null},A).next()}catch{return!0}}}),"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js");u.exports=function(x,g){var b=m.Iterator,I=b&&b.prototype,N=I&&I[x],C=!1;if(N)try{N.call({next:function(){return{done:!0}},return:function(){C=!0}},-1)}catch(E){E instanceof g||(C=!1)}if(!C)return N}}),"./node_modules/core-js/internals/iterators-core.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/is-object.js"),b=A("./node_modules/core-js/internals/object-create.js"),I=A("./node_modules/core-js/internals/object-get-prototype-of.js"),N=A("./node_modules/core-js/internals/define-built-in.js"),C=A("./node_modules/core-js/internals/well-known-symbol.js"),E=A("./node_modules/core-js/internals/is-pure.js"),F=C("iterator"),L=!1,O,H,Q;[].keys&&(Q=[].keys(),"next"in Q?(H=I(I(Q)),H!==Object.prototype&&(O=H)):L=!0);var U=!g(O)||m(function(){var R={};return O[F].call(R)!==R});U?O={}:E&&(O=b(O)),x(O[F])||N(O,F,function(){return this}),u.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:L}}),"./node_modules/core-js/internals/iterators.js":(function(u){u.exports={}}),"./node_modules/core-js/internals/length-of-array-like.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-length.js");u.exports=function(x){return m(x.length)}}),"./node_modules/core-js/internals/make-built-in.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/fails.js"),g=A("./node_modules/core-js/internals/is-callable.js"),b=A("./node_modules/core-js/internals/has-own-property.js"),I=A("./node_modules/core-js/internals/descriptors.js"),N=A("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,C=A("./node_modules/core-js/internals/inspect-source.js"),E=A("./node_modules/core-js/internals/internal-state.js"),F=E.enforce,L=E.get,O=String,H=Object.defineProperty,Q=m("".slice),U=m("".replace),R=m([].join),$=I&&!x(function(){return H(function(){},"length",{value:8}).length!==8}),P=String(String).split("String"),V=u.exports=function(G,ae,ue){Q(O(ae),0,7)==="Symbol("&&(ae="["+U(O(ae),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),ue&&ue.getter&&(ae="get "+ae),ue&&ue.setter&&(ae="set "+ae),(!b(G,"name")||N&&G.name!==ae)&&(I?H(G,"name",{value:ae,configurable:!0}):G.name=ae),$&&ue&&b(ue,"arity")&&G.length!==ue.arity&&H(G,"length",{value:ue.arity});try{ue&&b(ue,"constructor")&&ue.constructor?I&&H(G,"prototype",{writable:!1}):G.prototype&&(G.prototype=void 0)}catch{}var oe=F(G);return b(oe,"source")||(oe.source=R(P,typeof ae=="string"?ae:"")),G};Function.prototype.toString=V(function(){return g(this)&&L(this).source||C(this)},"toString")}),"./node_modules/core-js/internals/math-trunc.js":(function(u){var f=Math.ceil,A=Math.floor;u.exports=Math.trunc||function(x){var g=+x;return(g>0?A:f)(g)}}),"./node_modules/core-js/internals/microtask.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/safe-get-built-in.js"),g=A("./node_modules/core-js/internals/function-bind-context.js"),b=A("./node_modules/core-js/internals/task.js").set,I=A("./node_modules/core-js/internals/queue.js"),N=A("./node_modules/core-js/internals/environment-is-ios.js"),C=A("./node_modules/core-js/internals/environment-is-ios-pebble.js"),E=A("./node_modules/core-js/internals/environment-is-webos-webkit.js"),F=A("./node_modules/core-js/internals/environment-is-node.js"),L=m.MutationObserver||m.WebKitMutationObserver,O=m.document,H=m.process,Q=m.Promise,U=x("queueMicrotask"),R,$,P,V,G;if(!U){var ae=new I,ue=function(){var oe,X;for(F&&(oe=H.domain)&&oe.exit();X=ae.get();)try{X()}catch(Y){throw ae.head&&R(),Y}oe&&oe.enter()};!N&&!F&&!E&&L&&O?($=!0,P=O.createTextNode(""),new L(ue).observe(P,{characterData:!0}),R=function(){P.data=$=!$}):!C&&Q&&Q.resolve?(V=Q.resolve(void 0),V.constructor=Q,G=g(V.then,V),R=function(){G(ue)}):F?R=function(){H.nextTick(ue)}:(b=g(b,m),R=function(){b(ue)}),U=function(oe){ae.head||R(),ae.add(oe)}}u.exports=U}),"./node_modules/core-js/internals/new-promise-capability.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-callable.js"),x=TypeError,g=function(b){var I,N;this.promise=new b(function(C,E){if(I!==void 0||N!==void 0)throw new x("Bad Promise constructor");I=C,N=E}),this.resolve=m(I),this.reject=m(N)};u.exports.f=function(b){return new g(b)}}),"./node_modules/core-js/internals/object-assign.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/function-call.js"),b=A("./node_modules/core-js/internals/fails.js"),I=A("./node_modules/core-js/internals/object-keys.js"),N=A("./node_modules/core-js/internals/object-get-own-property-symbols.js"),C=A("./node_modules/core-js/internals/object-property-is-enumerable.js"),E=A("./node_modules/core-js/internals/to-object.js"),F=A("./node_modules/core-js/internals/indexed-object.js"),L=Object.assign,O=Object.defineProperty,H=x([].concat);u.exports=!L||b(function(){if(m&&L({b:1},L(O({},"a",{enumerable:!0,get:function(){O(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var Q={},U={},R=Symbol("assign detection"),$="abcdefghijklmnopqrst";return Q[R]=7,$.split("").forEach(function(P){U[P]=P}),L({},Q)[R]!==7||I(L({},U)).join("")!==$})?function(U,R){for(var $=E(U),P=arguments.length,V=1,G=N.f,ae=C.f;P>V;)for(var ue=F(arguments[V++]),oe=G?H(I(ue),G(ue)):I(ue),X=oe.length,Y=0,re;X>Y;)re=oe[Y++],(!m||g(ae,ue,re))&&($[re]=ue[re]);return $}:L}),"./node_modules/core-js/internals/object-create.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/an-object.js"),x=A("./node_modules/core-js/internals/object-define-properties.js"),g=A("./node_modules/core-js/internals/enum-bug-keys.js"),b=A("./node_modules/core-js/internals/hidden-keys.js"),I=A("./node_modules/core-js/internals/html.js"),N=A("./node_modules/core-js/internals/document-create-element.js"),C=A("./node_modules/core-js/internals/shared-key.js"),E=">",F="<",L="prototype",O="script",H=C("IE_PROTO"),Q=function(){},U=function(G){return F+O+E+G+F+"/"+O+E},R=function(G){G.write(U("")),G.close();var ae=G.parentWindow.Object;return G=null,ae},$=function(){var G=N("iframe"),ae="java"+O+":",ue;return G.style.display="none",I.appendChild(G),G.src=String(ae),ue=G.contentWindow.document,ue.open(),ue.write(U("document.F=Object")),ue.close(),ue.F},P,V=function(){try{P=new ActiveXObject("htmlfile")}catch{}V=typeof document<"u"?document.domain&&P?R(P):$():R(P);for(var G=g.length;G--;)delete V[L][g[G]];return V()};b[H]=!0,u.exports=Object.create||function(ae,ue){var oe;return ae!==null?(Q[L]=m(ae),oe=new Q,Q[L]=null,oe[H]=ae):oe=V(),ue===void 0?oe:x.f(oe,ue)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/v8-prototype-define-bug.js"),g=A("./node_modules/core-js/internals/object-define-property.js"),b=A("./node_modules/core-js/internals/an-object.js"),I=A("./node_modules/core-js/internals/to-indexed-object.js"),N=A("./node_modules/core-js/internals/object-keys.js");f.f=m&&!x?Object.defineProperties:function(E,F){b(E);for(var L=I(F),O=N(F),H=O.length,Q=0,U;H>Q;)g.f(E,U=O[Q++],L[U]);return E}}),"./node_modules/core-js/internals/object-define-property.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/ie8-dom-define.js"),g=A("./node_modules/core-js/internals/v8-prototype-define-bug.js"),b=A("./node_modules/core-js/internals/an-object.js"),I=A("./node_modules/core-js/internals/to-property-key.js"),N=TypeError,C=Object.defineProperty,E=Object.getOwnPropertyDescriptor,F="enumerable",L="configurable",O="writable";f.f=m?g?function(Q,U,R){if(b(Q),U=I(U),b(R),typeof Q=="function"&&U==="prototype"&&"value"in R&&O in R&&!R[O]){var $=E(Q,U);$&&$[O]&&(Q[U]=R.value,R={configurable:L in R?R[L]:$[L],enumerable:F in R?R[F]:$[F],writable:!1})}return C(Q,U,R)}:C:function(Q,U,R){if(b(Q),U=I(U),b(R),x)try{return C(Q,U,R)}catch{}if("get"in R||"set"in R)throw new N("Accessors not supported");return"value"in R&&(Q[U]=R.value),Q}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/object-property-is-enumerable.js"),b=A("./node_modules/core-js/internals/create-property-descriptor.js"),I=A("./node_modules/core-js/internals/to-indexed-object.js"),N=A("./node_modules/core-js/internals/to-property-key.js"),C=A("./node_modules/core-js/internals/has-own-property.js"),E=A("./node_modules/core-js/internals/ie8-dom-define.js"),F=Object.getOwnPropertyDescriptor;f.f=m?F:function(O,H){if(O=I(O),H=N(H),E)try{return F(O,H)}catch{}if(C(O,H))return b(!x(g.f,O,H),O[H])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/classof-raw.js"),x=A("./node_modules/core-js/internals/to-indexed-object.js"),g=A("./node_modules/core-js/internals/object-get-own-property-names.js").f,b=A("./node_modules/core-js/internals/array-slice.js"),I=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],N=function(C){try{return g(C)}catch{return b(I)}};u.exports.f=function(E){return I&&m(E)==="Window"?N(E):g(x(E))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/object-keys-internal.js"),x=A("./node_modules/core-js/internals/enum-bug-keys.js"),g=x.concat("length","prototype");f.f=Object.getOwnPropertyNames||function(I){return m(I,g)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(u,f){f.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/has-own-property.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/to-object.js"),b=A("./node_modules/core-js/internals/shared-key.js"),I=A("./node_modules/core-js/internals/correct-prototype-getter.js"),N=b("IE_PROTO"),C=Object,E=C.prototype;u.exports=I?C.getPrototypeOf:function(F){var L=g(F);if(m(L,N))return L[N];var O=L.constructor;return x(O)&&L instanceof O?O.prototype:L instanceof C?E:null}}),"./node_modules/core-js/internals/object-is-extensible.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/is-object.js"),g=A("./node_modules/core-js/internals/classof-raw.js"),b=A("./node_modules/core-js/internals/array-buffer-non-extensible.js"),I=Object.isExtensible,N=m(function(){});u.exports=N||b?function(E){return!x(E)||b&&g(E)==="ArrayBuffer"?!1:I?I(E):!0}:I}),"./node_modules/core-js/internals/object-is-prototype-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js");u.exports=m({}.isPrototypeOf)}),"./node_modules/core-js/internals/object-keys-internal.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/has-own-property.js"),g=A("./node_modules/core-js/internals/to-indexed-object.js"),b=A("./node_modules/core-js/internals/array-includes.js").indexOf,I=A("./node_modules/core-js/internals/hidden-keys.js"),N=m([].push);u.exports=function(C,E){var F=g(C),L=0,O=[],H;for(H in F)!x(I,H)&&x(F,H)&&N(O,H);for(;E.length>L;)x(F,H=E[L++])&&(~b(O,H)||N(O,H));return O}}),"./node_modules/core-js/internals/object-keys.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/object-keys-internal.js"),x=A("./node_modules/core-js/internals/enum-bug-keys.js");u.exports=Object.keys||function(b){return m(b,x)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(u,f){var A={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,x=m&&!A.call({1:2},1);f.f=x?function(b){var I=m(this,b);return!!I&&I.enumerable}:A}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),x=A("./node_modules/core-js/internals/is-object.js"),g=A("./node_modules/core-js/internals/require-object-coercible.js"),b=A("./node_modules/core-js/internals/a-possible-prototype.js");u.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var I=!1,N={},C;try{C=m(Object.prototype,"__proto__","set"),C(N,[]),I=N instanceof Array}catch{}return function(F,L){return g(F),b(L),x(F)&&(I?C(F,L):F.__proto__=L),F}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-string-tag-support.js"),x=A("./node_modules/core-js/internals/classof.js");u.exports=m?{}.toString:function(){return"[object "+x(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/is-object.js"),b=TypeError;u.exports=function(I,N){var C,E;if(N==="string"&&x(C=I.toString)&&!g(E=m(C,I))||x(C=I.valueOf)&&!g(E=m(C,I))||N!=="string"&&x(C=I.toString)&&!g(E=m(C,I)))return E;throw new b("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/get-built-in.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/object-get-own-property-names.js"),b=A("./node_modules/core-js/internals/object-get-own-property-symbols.js"),I=A("./node_modules/core-js/internals/an-object.js"),N=x([].concat);u.exports=m("Reflect","ownKeys")||function(E){var F=g.f(I(E)),L=b.f;return L?N(F,L(E)):F}}),"./node_modules/core-js/internals/path.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js");u.exports=m}),"./node_modules/core-js/internals/perform.js":(function(u){u.exports=function(f){try{return{error:!1,value:f()}}catch(A){return{error:!0,value:A}}}}),"./node_modules/core-js/internals/promise-constructor-detection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/promise-native-constructor.js"),g=A("./node_modules/core-js/internals/is-callable.js"),b=A("./node_modules/core-js/internals/is-forced.js"),I=A("./node_modules/core-js/internals/inspect-source.js"),N=A("./node_modules/core-js/internals/well-known-symbol.js"),C=A("./node_modules/core-js/internals/environment.js"),E=A("./node_modules/core-js/internals/is-pure.js"),F=A("./node_modules/core-js/internals/environment-v8-version.js"),L=x&&x.prototype,O=N("species"),H=!1,Q=g(m.PromiseRejectionEvent),U=b("Promise",function(){var R=I(x),$=R!==String(x);if(!$&&F===66||E&&!(L.catch&&L.finally))return!0;if(!F||F<51||!/native code/.test(R)){var P=new x(function(ae){ae(1)}),V=function(ae){ae(function(){},function(){})},G=P.constructor={};if(G[O]=V,H=P.then(function(){})instanceof V,!H)return!0}return!$&&(C==="BROWSER"||C==="DENO")&&!Q});u.exports={CONSTRUCTOR:U,REJECTION_EVENT:Q,SUBCLASSING:H}}),"./node_modules/core-js/internals/promise-native-constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js");u.exports=m.Promise}),"./node_modules/core-js/internals/promise-resolve.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/an-object.js"),x=A("./node_modules/core-js/internals/is-object.js"),g=A("./node_modules/core-js/internals/new-promise-capability.js");u.exports=function(b,I){if(m(b),x(I)&&I.constructor===b)return I;var N=g.f(b),C=N.resolve;return C(I),N.promise}}),"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/promise-native-constructor.js"),x=A("./node_modules/core-js/internals/check-correctness-of-iteration.js"),g=A("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;u.exports=g||!x(function(b){m.all(b).then(void 0,function(){})})}),"./node_modules/core-js/internals/queue.js":(function(u){var f=function(){this.head=null,this.tail=null};f.prototype={add:function(A){var m={item:A,next:null},x=this.tail;x?x.next=m:this.head=m,this.tail=m},get:function(){var A=this.head;if(A){var m=this.head=A.next;return m===null&&(this.tail=null),A.item}}},u.exports=f}),"./node_modules/core-js/internals/regexp-exec.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/to-string.js"),b=A("./node_modules/core-js/internals/regexp-flags.js"),I=A("./node_modules/core-js/internals/regexp-sticky-helpers.js"),N=A("./node_modules/core-js/internals/shared.js"),C=A("./node_modules/core-js/internals/object-create.js"),E=A("./node_modules/core-js/internals/internal-state.js").get,F=A("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),L=A("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),O=N("native-string-replace",String.prototype.replace),H=RegExp.prototype.exec,Q=H,U=x("".charAt),R=x("".indexOf),$=x("".replace),P=x("".slice),V=(function(){var oe=/a/,X=/b*/g;return m(H,oe,"a"),m(H,X,"a"),oe.lastIndex!==0||X.lastIndex!==0})(),G=I.BROKEN_CARET,ae=/()??/.exec("")[1]!==void 0,ue=V||ae||G||F||L;ue&&(Q=function(X){var Y=this,re=E(Y),pe=g(X),ee=re.raw,M,J,ie,le,ce,ve,Se;if(ee)return ee.lastIndex=Y.lastIndex,M=m(Q,ee,pe),Y.lastIndex=ee.lastIndex,M;var ge=re.groups,Be=G&&Y.sticky,Fe=m(b,Y),Qe=Y.source,Ze=0,Pe=pe;if(Be&&(Fe=$(Fe,"y",""),R(Fe,"g")===-1&&(Fe+="g"),Pe=P(pe,Y.lastIndex),Y.lastIndex>0&&(!Y.multiline||Y.multiline&&U(pe,Y.lastIndex-1)!==`
`)&&(Qe="(?: "+Qe+")",Pe=" "+Pe,Ze++),J=new RegExp("^(?:"+Qe+")",Fe)),ae&&(J=new RegExp("^"+Qe+"$(?!\\s)",Fe)),V&&(ie=Y.lastIndex),le=m(H,Be?J:Y,Pe),Be?le?(le.input=P(le.input,Ze),le[0]=P(le[0],Ze),le.index=Y.lastIndex,Y.lastIndex+=le[0].length):Y.lastIndex=0:V&&le&&(Y.lastIndex=Y.global?le.index+le[0].length:ie),ae&&le&&le.length>1&&m(O,le[0],J,function(){for(ce=1;ce<arguments.length-2;ce++)arguments[ce]===void 0&&(le[ce]=void 0)}),le&&ge)for(le.groups=ve=C(null),ce=0;ce<ge.length;ce++)Se=ge[ce],ve[Se[0]]=le[Se[1]];return le}),u.exports=Q}),"./node_modules/core-js/internals/regexp-flags-detection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/fails.js"),g=m.RegExp,b=!x(function(){var I=!0;try{g(".","d")}catch{I=!1}var N={},C="",E=I?"dgimsy":"gimsy",F=function(Q,U){Object.defineProperty(N,Q,{get:function(){return C+=U,!0}})},L={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};I&&(L.hasIndices="d");for(var O in L)F(O,L[O]);var H=Object.getOwnPropertyDescriptor(g.prototype,"flags").get.call(N);return H!==E||C!==E});u.exports={correct:b}}),"./node_modules/core-js/internals/regexp-flags.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/an-object.js");u.exports=function(){var x=m(this),g="";return x.hasIndices&&(g+="d"),x.global&&(g+="g"),x.ignoreCase&&(g+="i"),x.multiline&&(g+="m"),x.dotAll&&(g+="s"),x.unicode&&(g+="u"),x.unicodeSets&&(g+="v"),x.sticky&&(g+="y"),g}}),"./node_modules/core-js/internals/regexp-get-flags.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/has-own-property.js"),g=A("./node_modules/core-js/internals/object-is-prototype-of.js"),b=A("./node_modules/core-js/internals/regexp-flags-detection.js"),I=A("./node_modules/core-js/internals/regexp-flags.js"),N=RegExp.prototype;u.exports=b.correct?function(C){return C.flags}:function(C){return!b.correct&&g(N,C)&&!x(C,"flags")?m(I,C):C.flags}}),"./node_modules/core-js/internals/regexp-sticky-helpers.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=x.RegExp,b=m(function(){var C=g("a","y");return C.lastIndex=2,C.exec("abcd")!==null}),I=b||m(function(){return!g("a","y").sticky}),N=b||m(function(){var C=g("^r","gy");return C.lastIndex=2,C.exec("str")!==null});u.exports={BROKEN_CARET:N,MISSED_STICKY:I,UNSUPPORTED_Y:b}}),"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=x.RegExp;u.exports=m(function(){var b=g(".","s");return!(b.dotAll&&b.test(`
`)&&b.flags==="s")})}),"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=x.RegExp;u.exports=m(function(){var b=g("(?<a>b)","g");return b.exec("b").groups.a!=="b"||"b".replace(b,"$<a>c")!=="bc"})}),"./node_modules/core-js/internals/require-object-coercible.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-null-or-undefined.js"),x=TypeError;u.exports=function(g){if(m(g))throw new x("Can't call method on "+g);return g}}),"./node_modules/core-js/internals/safe-get-built-in.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/descriptors.js"),g=Object.getOwnPropertyDescriptor;u.exports=function(b){if(!x)return m[b];var I=g(m,b);return I&&I.value}}),"./node_modules/core-js/internals/schedulers-fix.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/function-apply.js"),g=A("./node_modules/core-js/internals/is-callable.js"),b=A("./node_modules/core-js/internals/environment.js"),I=A("./node_modules/core-js/internals/environment-user-agent.js"),N=A("./node_modules/core-js/internals/array-slice.js"),C=A("./node_modules/core-js/internals/validate-arguments-length.js"),E=m.Function,F=/MSIE .\./.test(I)||b==="BUN"&&(function(){var L=m.Bun.version.split(".");return L.length<3||L[0]==="0"&&(L[1]<3||L[1]==="3"&&L[2]==="0")})();u.exports=function(L,O){var H=O?2:1;return F?function(Q,U){var R=C(arguments.length,1)>H,$=g(Q)?Q:E(Q),P=R?N(arguments,H):[],V=R?function(){x($,this,P)}:$;return O?L(V,U):L(V)}:L}}),"./node_modules/core-js/internals/set-clone.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/set-helpers.js"),x=A("./node_modules/core-js/internals/set-iterate.js"),g=m.Set,b=m.add;u.exports=function(I){var N=new g;return x(I,function(C){b(N,C)}),N}}),"./node_modules/core-js/internals/set-difference.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-helpers.js"),g=A("./node_modules/core-js/internals/set-clone.js"),b=A("./node_modules/core-js/internals/set-size.js"),I=A("./node_modules/core-js/internals/get-set-record.js"),N=A("./node_modules/core-js/internals/set-iterate.js"),C=A("./node_modules/core-js/internals/iterate-simple.js"),E=x.has,F=x.remove;u.exports=function(O){var H=m(this),Q=I(O),U=g(H);return b(H)<=Q.size?N(H,function(R){Q.includes(R)&&F(U,R)}):C(Q.getIterator(),function(R){E(U,R)&&F(U,R)}),U}}),"./node_modules/core-js/internals/set-helpers.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=Set.prototype;u.exports={Set,add:m(x.add),has:m(x.has),remove:m(x.delete),proto:x}}),"./node_modules/core-js/internals/set-intersection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-helpers.js"),g=A("./node_modules/core-js/internals/set-size.js"),b=A("./node_modules/core-js/internals/get-set-record.js"),I=A("./node_modules/core-js/internals/set-iterate.js"),N=A("./node_modules/core-js/internals/iterate-simple.js"),C=x.Set,E=x.add,F=x.has;u.exports=function(O){var H=m(this),Q=b(O),U=new C;return g(H)>Q.size?N(Q.getIterator(),function(R){F(H,R)&&E(U,R)}):I(H,function(R){Q.includes(R)&&E(U,R)}),U}}),"./node_modules/core-js/internals/set-is-disjoint-from.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-helpers.js").has,g=A("./node_modules/core-js/internals/set-size.js"),b=A("./node_modules/core-js/internals/get-set-record.js"),I=A("./node_modules/core-js/internals/set-iterate.js"),N=A("./node_modules/core-js/internals/iterate-simple.js"),C=A("./node_modules/core-js/internals/iterator-close.js");u.exports=function(F){var L=m(this),O=b(F);if(g(L)<=O.size)return I(L,function(Q){if(O.includes(Q))return!1},!0)!==!1;var H=O.getIterator();return N(H,function(Q){if(x(L,Q))return C(H,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-is-subset-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-size.js"),g=A("./node_modules/core-js/internals/set-iterate.js"),b=A("./node_modules/core-js/internals/get-set-record.js");u.exports=function(N){var C=m(this),E=b(N);return x(C)>E.size?!1:g(C,function(F){if(!E.includes(F))return!1},!0)!==!1}}),"./node_modules/core-js/internals/set-is-superset-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-helpers.js").has,g=A("./node_modules/core-js/internals/set-size.js"),b=A("./node_modules/core-js/internals/get-set-record.js"),I=A("./node_modules/core-js/internals/iterate-simple.js"),N=A("./node_modules/core-js/internals/iterator-close.js");u.exports=function(E){var F=m(this),L=b(E);if(g(F)<L.size)return!1;var O=L.getIterator();return I(O,function(H){if(!x(F,H))return N(O,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-iterate.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/iterate-simple.js"),g=A("./node_modules/core-js/internals/set-helpers.js"),b=g.Set,I=g.proto,N=m(I.forEach),C=m(I.keys),E=C(new b).next;u.exports=function(F,L,O){return O?x({iterator:C(F),next:E},L):N(F,L)}}),"./node_modules/core-js/internals/set-size.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),x=A("./node_modules/core-js/internals/set-helpers.js");u.exports=m(x.proto,"size","get")||function(g){return g.size}}),"./node_modules/core-js/internals/set-species.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/get-built-in.js"),x=A("./node_modules/core-js/internals/define-built-in-accessor.js"),g=A("./node_modules/core-js/internals/well-known-symbol.js"),b=A("./node_modules/core-js/internals/descriptors.js"),I=g("species");u.exports=function(N){var C=m(N);b&&C&&!C[I]&&x(C,I,{configurable:!0,get:function(){return this}})}}),"./node_modules/core-js/internals/set-symmetric-difference.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-helpers.js"),g=A("./node_modules/core-js/internals/set-clone.js"),b=A("./node_modules/core-js/internals/get-set-record.js"),I=A("./node_modules/core-js/internals/iterate-simple.js"),N=x.add,C=x.has,E=x.remove;u.exports=function(L){var O=m(this),H=b(L).getIterator(),Q=g(O);return I(H,function(U){C(O,U)?E(Q,U):N(Q,U)}),Q}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/object-define-property.js").f,x=A("./node_modules/core-js/internals/has-own-property.js"),g=A("./node_modules/core-js/internals/well-known-symbol.js"),b=g("toStringTag");u.exports=function(I,N,C){I&&!C&&(I=I.prototype),I&&!x(I,b)&&m(I,b,{configurable:!0,value:N})}}),"./node_modules/core-js/internals/set-union.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/a-set.js"),x=A("./node_modules/core-js/internals/set-helpers.js").add,g=A("./node_modules/core-js/internals/set-clone.js"),b=A("./node_modules/core-js/internals/get-set-record.js"),I=A("./node_modules/core-js/internals/iterate-simple.js");u.exports=function(C){var E=m(this),F=b(C).getIterator(),L=g(E);return I(F,function(O){x(L,O)}),L}}),"./node_modules/core-js/internals/shared-key.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/shared.js"),x=A("./node_modules/core-js/internals/uid.js"),g=m("keys");u.exports=function(b){return g[b]||(g[b]=x(b))}}),"./node_modules/core-js/internals/shared-store.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/is-pure.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/define-global-property.js"),b="__core-js_shared__",I=u.exports=x[b]||g(b,{});(I.versions||(I.versions=[])).push({version:"3.45.1",mode:m?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),"./node_modules/core-js/internals/shared.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/shared-store.js");u.exports=function(x,g){return m[x]||(m[x]=g||{})}}),"./node_modules/core-js/internals/species-constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/an-object.js"),x=A("./node_modules/core-js/internals/a-constructor.js"),g=A("./node_modules/core-js/internals/is-null-or-undefined.js"),b=A("./node_modules/core-js/internals/well-known-symbol.js"),I=b("species");u.exports=function(N,C){var E=m(N).constructor,F;return E===void 0||g(F=m(E)[I])?C:x(F)}}),"./node_modules/core-js/internals/string-html-forced.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/fails.js");u.exports=function(x){return m(function(){var g=""[x]('"');return g!==g.toLowerCase()||g.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/to-integer-or-infinity.js"),g=A("./node_modules/core-js/internals/to-string.js"),b=A("./node_modules/core-js/internals/require-object-coercible.js"),I=m("".charAt),N=m("".charCodeAt),C=m("".slice),E=function(F){return function(L,O){var H=g(b(L)),Q=x(O),U=H.length,R,$;return Q<0||Q>=U?F?"":void 0:(R=N(H,Q),R<55296||R>56319||Q+1===U||($=N(H,Q+1))<56320||$>57343?F?I(H,Q):R:F?C(H,Q,Q+2):(R-55296<<10)+($-56320)+65536)}};u.exports={codeAt:E(!1),charAt:E(!0)}}),"./node_modules/core-js/internals/string-trim.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=A("./node_modules/core-js/internals/require-object-coercible.js"),g=A("./node_modules/core-js/internals/to-string.js"),b=A("./node_modules/core-js/internals/whitespaces.js"),I=m("".replace),N=RegExp("^["+b+"]+"),C=RegExp("(^|[^"+b+"])["+b+"]+$"),E=function(F){return function(L){var O=g(x(L));return F&1&&(O=I(O,N,"")),F&2&&(O=I(O,C,"$1")),O}};u.exports={start:E(1),end:E(2),trim:E(3)}}),"./node_modules/core-js/internals/symbol-constructor-detection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/environment-v8-version.js"),x=A("./node_modules/core-js/internals/fails.js"),g=A("./node_modules/core-js/internals/global-this.js"),b=g.String;u.exports=!!Object.getOwnPropertySymbols&&!x(function(){var I=Symbol("symbol detection");return!b(I)||!(Object(I)instanceof Symbol)||!Symbol.sham&&m&&m<41})}),"./node_modules/core-js/internals/symbol-define-to-primitive.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/get-built-in.js"),g=A("./node_modules/core-js/internals/well-known-symbol.js"),b=A("./node_modules/core-js/internals/define-built-in.js");u.exports=function(){var I=x("Symbol"),N=I&&I.prototype,C=N&&N.valueOf,E=g("toPrimitive");N&&!N[E]&&b(N,E,function(F){return m(C,this)},{arity:1})}}),"./node_modules/core-js/internals/symbol-registry-detection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/symbol-constructor-detection.js");u.exports=m&&!!Symbol.for&&!!Symbol.keyFor}),"./node_modules/core-js/internals/task.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/function-apply.js"),g=A("./node_modules/core-js/internals/function-bind-context.js"),b=A("./node_modules/core-js/internals/is-callable.js"),I=A("./node_modules/core-js/internals/has-own-property.js"),N=A("./node_modules/core-js/internals/fails.js"),C=A("./node_modules/core-js/internals/html.js"),E=A("./node_modules/core-js/internals/array-slice.js"),F=A("./node_modules/core-js/internals/document-create-element.js"),L=A("./node_modules/core-js/internals/validate-arguments-length.js"),O=A("./node_modules/core-js/internals/environment-is-ios.js"),H=A("./node_modules/core-js/internals/environment-is-node.js"),Q=m.setImmediate,U=m.clearImmediate,R=m.process,$=m.Dispatch,P=m.Function,V=m.MessageChannel,G=m.String,ae=0,ue={},oe="onreadystatechange",X,Y,re,pe;N(function(){X=m.location});var ee=function(le){if(I(ue,le)){var ce=ue[le];delete ue[le],ce()}},M=function(le){return function(){ee(le)}},J=function(le){ee(le.data)},ie=function(le){m.postMessage(G(le),X.protocol+"//"+X.host)};(!Q||!U)&&(Q=function(ce){L(arguments.length,1);var ve=b(ce)?ce:P(ce),Se=E(arguments,1);return ue[++ae]=function(){x(ve,void 0,Se)},Y(ae),ae},U=function(ce){delete ue[ce]},H?Y=function(le){R.nextTick(M(le))}:$&&$.now?Y=function(le){$.now(M(le))}:V&&!O?(re=new V,pe=re.port2,re.port1.onmessage=J,Y=g(pe.postMessage,pe)):m.addEventListener&&b(m.postMessage)&&!m.importScripts&&X&&X.protocol!=="file:"&&!N(ie)?(Y=ie,m.addEventListener("message",J,!1)):oe in F("script")?Y=function(le){C.appendChild(F("script"))[oe]=function(){C.removeChild(this),ee(le)}}:Y=function(le){setTimeout(M(le),0)}),u.exports={set:Q,clear:U}}),"./node_modules/core-js/internals/this-number-value.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js");u.exports=m(1.1.valueOf)}),"./node_modules/core-js/internals/to-absolute-index.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-integer-or-infinity.js"),x=Math.max,g=Math.min;u.exports=function(b,I){var N=m(b);return N<0?x(N+I,0):g(N,I)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/indexed-object.js"),x=A("./node_modules/core-js/internals/require-object-coercible.js");u.exports=function(g){return m(x(g))}}),"./node_modules/core-js/internals/to-integer-or-infinity.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/math-trunc.js");u.exports=function(x){var g=+x;return g!==g||g===0?0:m(g)}}),"./node_modules/core-js/internals/to-length.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-integer-or-infinity.js"),x=Math.min;u.exports=function(g){var b=m(g);return b>0?x(b,9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/require-object-coercible.js"),x=Object;u.exports=function(g){return x(m(g))}}),"./node_modules/core-js/internals/to-primitive.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-call.js"),x=A("./node_modules/core-js/internals/is-object.js"),g=A("./node_modules/core-js/internals/is-symbol.js"),b=A("./node_modules/core-js/internals/get-method.js"),I=A("./node_modules/core-js/internals/ordinary-to-primitive.js"),N=A("./node_modules/core-js/internals/well-known-symbol.js"),C=TypeError,E=N("toPrimitive");u.exports=function(F,L){if(!x(F)||g(F))return F;var O=b(F,E),H;if(O){if(L===void 0&&(L="default"),H=m(O,F,L),!x(H)||g(H))return H;throw new C("Can't convert object to primitive value")}return L===void 0&&(L="number"),I(F,L)}}),"./node_modules/core-js/internals/to-property-key.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-primitive.js"),x=A("./node_modules/core-js/internals/is-symbol.js");u.exports=function(g){var b=m(g,"string");return x(b)?b:b+""}}),"./node_modules/core-js/internals/to-set-like.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/get-built-in.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=A("./node_modules/core-js/internals/is-iterable.js"),b=A("./node_modules/core-js/internals/is-object.js"),I=m("Set"),N=function(C){return b(C)&&typeof C.size=="number"&&x(C.has)&&x(C.keys)};u.exports=function(C){return N(C)?C:g(C)?new I(C):C}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/well-known-symbol.js"),x=m("toStringTag"),g={};g[x]="z",u.exports=String(g)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/classof.js"),x=String;u.exports=function(g){if(m(g)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return x(g)}}),"./node_modules/core-js/internals/try-to-string.js":(function(u){var f=String;u.exports=function(A){try{return f(A)}catch{return"Object"}}}),"./node_modules/core-js/internals/uid.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-uncurry-this.js"),x=0,g=Math.random(),b=m(1.1.toString);u.exports=function(I){return"Symbol("+(I===void 0?"":I)+")_"+b(++x+g,36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/symbol-constructor-detection.js");u.exports=m&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/v8-prototype-define-bug.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/fails.js");u.exports=m&&x(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),"./node_modules/core-js/internals/validate-arguments-length.js":(function(u){var f=TypeError;u.exports=function(A,m){if(A<m)throw new f("Not enough arguments");return A}}),"./node_modules/core-js/internals/weak-map-basic-detection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/is-callable.js"),g=m.WeakMap;u.exports=x(g)&&/native code/.test(String(g))}),"./node_modules/core-js/internals/well-known-symbol-define.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/path.js"),x=A("./node_modules/core-js/internals/has-own-property.js"),g=A("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),b=A("./node_modules/core-js/internals/object-define-property.js").f;u.exports=function(I){var N=m.Symbol||(m.Symbol={});x(N,I)||b(N,I,{value:g.f(I)})}}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/well-known-symbol.js");f.f=m}),"./node_modules/core-js/internals/well-known-symbol.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/shared.js"),g=A("./node_modules/core-js/internals/has-own-property.js"),b=A("./node_modules/core-js/internals/uid.js"),I=A("./node_modules/core-js/internals/symbol-constructor-detection.js"),N=A("./node_modules/core-js/internals/use-symbol-as-uid.js"),C=m.Symbol,E=x("wks"),F=N?C.for||C:C&&C.withoutSetter||b;u.exports=function(L){return g(E,L)||(E[L]=I&&g(C,L)?C[L]:F("Symbol."+L)),E[L]}}),"./node_modules/core-js/internals/whitespaces.js":(function(u){u.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/fails.js"),g=A("./node_modules/core-js/internals/is-array.js"),b=A("./node_modules/core-js/internals/is-object.js"),I=A("./node_modules/core-js/internals/to-object.js"),N=A("./node_modules/core-js/internals/length-of-array-like.js"),C=A("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),E=A("./node_modules/core-js/internals/create-property.js"),F=A("./node_modules/core-js/internals/array-species-create.js"),L=A("./node_modules/core-js/internals/array-method-has-species-support.js"),O=A("./node_modules/core-js/internals/well-known-symbol.js"),H=A("./node_modules/core-js/internals/environment-v8-version.js"),Q=O("isConcatSpreadable"),U=H>=51||!x(function(){var P=[];return P[Q]=!1,P.concat()[0]!==P}),R=function(P){if(!b(P))return!1;var V=P[Q];return V!==void 0?!!V:g(P)},$=!U||!L("concat");m({target:"Array",proto:!0,arity:1,forced:$},{concat:function(V){var G=I(this),ae=F(G,0),ue=0,oe,X,Y,re,pe;for(oe=-1,Y=arguments.length;oe<Y;oe++)if(pe=oe===-1?G:arguments[oe],R(pe))for(re=N(pe),C(ue+re),X=0;X<re;X++,ue++)X in pe&&E(ae,ue,pe[X]);else C(ue+1),E(ae,ue++,pe);return ae.length=ue,ae}})}),"./node_modules/core-js/modules/es.array.from.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/array-from.js"),g=A("./node_modules/core-js/internals/check-correctness-of-iteration.js"),b=!g(function(I){Array.from(I)});m({target:"Array",stat:!0,forced:b},{from:x})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-indexed-object.js"),x=A("./node_modules/core-js/internals/add-to-unscopables.js"),g=A("./node_modules/core-js/internals/iterators.js"),b=A("./node_modules/core-js/internals/internal-state.js"),I=A("./node_modules/core-js/internals/object-define-property.js").f,N=A("./node_modules/core-js/internals/iterator-define.js"),C=A("./node_modules/core-js/internals/create-iter-result-object.js"),E=A("./node_modules/core-js/internals/is-pure.js"),F=A("./node_modules/core-js/internals/descriptors.js"),L="Array Iterator",O=b.set,H=b.getterFor(L);u.exports=N(Array,"Array",function(U,R){O(this,{type:L,target:m(U),index:0,kind:R})},function(){var U=H(this),R=U.target,$=U.index++;if(!R||$>=R.length)return U.target=null,C(void 0,!0);switch(U.kind){case"keys":return C($,!1);case"values":return C(R[$],!1)}return C([$,R[$]],!1)},"values");var Q=g.Arguments=g.Array;if(x("keys"),x("values"),x("entries"),!E&&F&&Q.name!=="values")try{I(Q,"name",{value:"values"})}catch{}}),"./node_modules/core-js/modules/es.array.join.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/indexed-object.js"),b=A("./node_modules/core-js/internals/to-indexed-object.js"),I=A("./node_modules/core-js/internals/array-method-is-strict.js"),N=x([].join),C=g!==Object,E=C||!I("join",",");m({target:"Array",proto:!0,forced:E},{join:function(L){return N(b(this),L===void 0?",":L)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/array-iteration.js").map,g=A("./node_modules/core-js/internals/array-method-has-species-support.js"),b=g("map");m({target:"Array",proto:!0,forced:!b},{map:function(N){return x(this,N,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/is-array.js"),g=A("./node_modules/core-js/internals/is-constructor.js"),b=A("./node_modules/core-js/internals/is-object.js"),I=A("./node_modules/core-js/internals/to-absolute-index.js"),N=A("./node_modules/core-js/internals/length-of-array-like.js"),C=A("./node_modules/core-js/internals/to-indexed-object.js"),E=A("./node_modules/core-js/internals/create-property.js"),F=A("./node_modules/core-js/internals/well-known-symbol.js"),L=A("./node_modules/core-js/internals/array-method-has-species-support.js"),O=A("./node_modules/core-js/internals/array-slice.js"),H=L("slice"),Q=F("species"),U=Array,R=Math.max;m({target:"Array",proto:!0,forced:!H},{slice:function(P,V){var G=C(this),ae=N(G),ue=I(P,ae),oe=I(V===void 0?ae:V,ae),X,Y,re;if(x(G)&&(X=G.constructor,g(X)&&(X===U||x(X.prototype))?X=void 0:b(X)&&(X=X[Q],X===null&&(X=void 0)),X===U||X===void 0))return O(G,ue,oe);for(Y=new(X===void 0?U:X)(R(oe-ue,0)),re=0;ue<oe;ue++,re++)ue in G&&E(Y,re,G[ue]);return Y.length=re,Y}})}),"./node_modules/core-js/modules/es.function.name.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/descriptors.js"),x=A("./node_modules/core-js/internals/function-name.js").EXISTS,g=A("./node_modules/core-js/internals/function-uncurry-this.js"),b=A("./node_modules/core-js/internals/define-built-in-accessor.js"),I=Function.prototype,N=g(I.toString),C=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,E=g(C.exec),F="name";m&&!x&&b(I,F,{configurable:!0,get:function(){try{return E(C,N(this))[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.iterator.constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/an-instance.js"),b=A("./node_modules/core-js/internals/an-object.js"),I=A("./node_modules/core-js/internals/is-callable.js"),N=A("./node_modules/core-js/internals/object-get-prototype-of.js"),C=A("./node_modules/core-js/internals/define-built-in-accessor.js"),E=A("./node_modules/core-js/internals/create-property.js"),F=A("./node_modules/core-js/internals/fails.js"),L=A("./node_modules/core-js/internals/has-own-property.js"),O=A("./node_modules/core-js/internals/well-known-symbol.js"),H=A("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,Q=A("./node_modules/core-js/internals/descriptors.js"),U=A("./node_modules/core-js/internals/is-pure.js"),R="constructor",$="Iterator",P=O("toStringTag"),V=TypeError,G=x[$],ae=U||!I(G)||G.prototype!==H||!F(function(){G({})}),ue=function(){if(g(this,H),N(this)===H)throw new V("Abstract class Iterator not directly constructable")},oe=function(X,Y){Q?C(H,X,{configurable:!0,get:function(){return Y},set:function(re){if(b(this),this===H)throw new V("You can't redefine this property");L(this,X)?this[X]=re:E(this,X,re)}}):H[X]=Y};L(H,P)||oe(P,$),(ae||!L(H,R)||H[R]===Object)&&oe(R,ue),ue.prototype=H,m({global:!0,constructor:!0,forced:ae},{Iterator:ue})}),"./node_modules/core-js/modules/es.iterator.for-each.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/iterate.js"),b=A("./node_modules/core-js/internals/a-callable.js"),I=A("./node_modules/core-js/internals/an-object.js"),N=A("./node_modules/core-js/internals/get-iterator-direct.js"),C=A("./node_modules/core-js/internals/iterator-close.js"),E=A("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),F=E("forEach",TypeError);m({target:"Iterator",proto:!0,real:!0,forced:F},{forEach:function(O){I(this);try{b(O)}catch(U){C(this,"throw",U)}if(F)return x(F,this,O);var H=N(this),Q=0;g(H,function(U){O(U,Q++)},{IS_RECORD:!0})}})}),"./node_modules/core-js/modules/es.iterator.map.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/a-callable.js"),b=A("./node_modules/core-js/internals/an-object.js"),I=A("./node_modules/core-js/internals/get-iterator-direct.js"),N=A("./node_modules/core-js/internals/iterator-create-proxy.js"),C=A("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),E=A("./node_modules/core-js/internals/iterator-close.js"),F=A("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),L=A("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),O=A("./node_modules/core-js/internals/is-pure.js"),H=!O&&!F("map",function(){}),Q=!O&&!H&&L("map",TypeError),U=O||H||Q,R=N(function(){var $=this.iterator,P=b(x(this.next,$)),V=this.done=!!P.done;if(!V)return C($,this.mapper,[P.value,this.counter++],!0)});m({target:"Iterator",proto:!0,real:!0,forced:U},{map:function(P){b(this);try{g(P)}catch(V){E(this,"throw",V)}return Q?x(Q,this,P):new R(I(this),{mapper:P})}})}),"./node_modules/core-js/modules/es.json.stringify.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/get-built-in.js"),g=A("./node_modules/core-js/internals/function-apply.js"),b=A("./node_modules/core-js/internals/function-call.js"),I=A("./node_modules/core-js/internals/function-uncurry-this.js"),N=A("./node_modules/core-js/internals/fails.js"),C=A("./node_modules/core-js/internals/is-callable.js"),E=A("./node_modules/core-js/internals/is-symbol.js"),F=A("./node_modules/core-js/internals/array-slice.js"),L=A("./node_modules/core-js/internals/get-json-replacer-function.js"),O=A("./node_modules/core-js/internals/symbol-constructor-detection.js"),H=String,Q=x("JSON","stringify"),U=I(/./.exec),R=I("".charAt),$=I("".charCodeAt),P=I("".replace),V=I(1.1.toString),G=/[\uD800-\uDFFF]/g,ae=/^[\uD800-\uDBFF]$/,ue=/^[\uDC00-\uDFFF]$/,oe=!O||N(function(){var pe=x("Symbol")("stringify detection");return Q([pe])!=="[null]"||Q({a:pe})!=="{}"||Q(Object(pe))!=="{}"}),X=N(function(){return Q("\uDF06\uD834")!=='"\\udf06\\ud834"'||Q("\uDEAD")!=='"\\udead"'}),Y=function(pe,ee){var M=F(arguments),J=L(ee);if(!(!C(J)&&(pe===void 0||E(pe))))return M[1]=function(ie,le){if(C(J)&&(le=b(J,this,H(ie),le)),!E(le))return le},g(Q,null,M)},re=function(pe,ee,M){var J=R(M,ee-1),ie=R(M,ee+1);return U(ae,pe)&&!U(ue,ie)||U(ue,pe)&&!U(ae,J)?"\\u"+V($(pe,0),16):pe};Q&&m({target:"JSON",stat:!0,arity:3,forced:oe||X},{stringify:function(ee,M,J){var ie=F(arguments),le=g(oe?Y:Q,null,ie);return X&&typeof le=="string"?P(le,G,re):le}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/is-pure.js"),g=A("./node_modules/core-js/internals/descriptors.js"),b=A("./node_modules/core-js/internals/global-this.js"),I=A("./node_modules/core-js/internals/path.js"),N=A("./node_modules/core-js/internals/function-uncurry-this.js"),C=A("./node_modules/core-js/internals/is-forced.js"),E=A("./node_modules/core-js/internals/has-own-property.js"),F=A("./node_modules/core-js/internals/inherit-if-required.js"),L=A("./node_modules/core-js/internals/object-is-prototype-of.js"),O=A("./node_modules/core-js/internals/is-symbol.js"),H=A("./node_modules/core-js/internals/to-primitive.js"),Q=A("./node_modules/core-js/internals/fails.js"),U=A("./node_modules/core-js/internals/object-get-own-property-names.js").f,R=A("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,$=A("./node_modules/core-js/internals/object-define-property.js").f,P=A("./node_modules/core-js/internals/this-number-value.js"),V=A("./node_modules/core-js/internals/string-trim.js").trim,G="Number",ae=b[G],ue=I[G],oe=ae.prototype,X=b.TypeError,Y=N("".slice),re=N("".charCodeAt),pe=function(ce){var ve=H(ce,"number");return typeof ve=="bigint"?ve:ee(ve)},ee=function(ce){var ve=H(ce,"number"),Se,ge,Be,Fe,Qe,Ze,Pe,me;if(O(ve))throw new X("Cannot convert a Symbol value to a number");if(typeof ve=="string"&&ve.length>2){if(ve=V(ve),Se=re(ve,0),Se===43||Se===45){if(ge=re(ve,2),ge===88||ge===120)return NaN}else if(Se===48){switch(re(ve,1)){case 66:case 98:Be=2,Fe=49;break;case 79:case 111:Be=8,Fe=55;break;default:return+ve}for(Qe=Y(ve,2),Ze=Qe.length,Pe=0;Pe<Ze;Pe++)if(me=re(Qe,Pe),me<48||me>Fe)return NaN;return parseInt(Qe,Be)}}return+ve},M=C(G,!ae(" 0o1")||!ae("0b1")||ae("+0x1")),J=function(ce){return L(oe,ce)&&Q(function(){P(ce)})},ie=function(ve){var Se=arguments.length<1?0:ae(pe(ve));return J(this)?F(Object(Se),this,ie):Se};ie.prototype=oe,M&&!x&&(oe.constructor=ie),m({global:!0,constructor:!0,wrap:!0,forced:M},{Number:ie});var le=function(ce,ve){for(var Se=g?U(ve):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ge=0,Be;Se.length>ge;ge++)E(ve,Be=Se[ge])&&!E(ce,Be)&&$(ce,Be,R(ve,Be))};x&&ue&&le(I[G],ue),(M||x)&&le(I[G],ae)}),"./node_modules/core-js/modules/es.object.assign.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/object-assign.js");m({target:"Object",stat:!0,arity:2,forced:Object.assign!==x},{assign:x})}),"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/symbol-constructor-detection.js"),g=A("./node_modules/core-js/internals/fails.js"),b=A("./node_modules/core-js/internals/object-get-own-property-symbols.js"),I=A("./node_modules/core-js/internals/to-object.js"),N=!x||g(function(){b.f(1)});m({target:"Object",stat:!0,forced:N},{getOwnPropertySymbols:function(E){var F=b.f;return F?F(I(E)):[]}})}),"./node_modules/core-js/modules/es.object.keys.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/to-object.js"),g=A("./node_modules/core-js/internals/object-keys.js"),b=A("./node_modules/core-js/internals/fails.js"),I=b(function(){g(1)});m({target:"Object",stat:!0,forced:I},{keys:function(C){return g(x(C))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/to-string-tag-support.js"),x=A("./node_modules/core-js/internals/define-built-in.js"),g=A("./node_modules/core-js/internals/object-to-string.js");m||x(Object.prototype,"toString",g,{unsafe:!0})}),"./node_modules/core-js/modules/es.promise.all.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/a-callable.js"),b=A("./node_modules/core-js/internals/new-promise-capability.js"),I=A("./node_modules/core-js/internals/perform.js"),N=A("./node_modules/core-js/internals/iterate.js"),C=A("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");m({target:"Promise",stat:!0,forced:C},{all:function(F){var L=this,O=b.f(L),H=O.resolve,Q=O.reject,U=I(function(){var R=g(L.resolve),$=[],P=0,V=1;N(F,function(G){var ae=P++,ue=!1;V++,x(R,L,G).then(function(oe){ue||(ue=!0,$[ae]=oe,--V||H($))},Q)}),--V||H($)});return U.error&&Q(U.value),O.promise}})}),"./node_modules/core-js/modules/es.promise.catch.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/is-pure.js"),g=A("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,b=A("./node_modules/core-js/internals/promise-native-constructor.js"),I=A("./node_modules/core-js/internals/get-built-in.js"),N=A("./node_modules/core-js/internals/is-callable.js"),C=A("./node_modules/core-js/internals/define-built-in.js"),E=b&&b.prototype;if(m({target:"Promise",proto:!0,forced:g,real:!0},{catch:function(L){return this.then(void 0,L)}}),!x&&N(b)){var F=I("Promise").prototype.catch;E.catch!==F&&C(E,"catch",F,{unsafe:!0})}}),"./node_modules/core-js/modules/es.promise.constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/is-pure.js"),g=A("./node_modules/core-js/internals/environment-is-node.js"),b=A("./node_modules/core-js/internals/global-this.js"),I=A("./node_modules/core-js/internals/path.js"),N=A("./node_modules/core-js/internals/function-call.js"),C=A("./node_modules/core-js/internals/define-built-in.js"),E=A("./node_modules/core-js/internals/object-set-prototype-of.js"),F=A("./node_modules/core-js/internals/set-to-string-tag.js"),L=A("./node_modules/core-js/internals/set-species.js"),O=A("./node_modules/core-js/internals/a-callable.js"),H=A("./node_modules/core-js/internals/is-callable.js"),Q=A("./node_modules/core-js/internals/is-object.js"),U=A("./node_modules/core-js/internals/an-instance.js"),R=A("./node_modules/core-js/internals/species-constructor.js"),$=A("./node_modules/core-js/internals/task.js").set,P=A("./node_modules/core-js/internals/microtask.js"),V=A("./node_modules/core-js/internals/host-report-errors.js"),G=A("./node_modules/core-js/internals/perform.js"),ae=A("./node_modules/core-js/internals/queue.js"),ue=A("./node_modules/core-js/internals/internal-state.js"),oe=A("./node_modules/core-js/internals/promise-native-constructor.js"),X=A("./node_modules/core-js/internals/promise-constructor-detection.js"),Y=A("./node_modules/core-js/internals/new-promise-capability.js"),re="Promise",pe=X.CONSTRUCTOR,ee=X.REJECTION_EVENT,M=X.SUBCLASSING,J=ue.getterFor(re),ie=ue.set,le=oe&&oe.prototype,ce=oe,ve=le,Se=b.TypeError,ge=b.document,Be=b.process,Fe=Y.f,Qe=Fe,Ze=!!(ge&&ge.createEvent&&b.dispatchEvent),Pe="unhandledrejection",me="rejectionhandled",nt=0,It=1,ut=2,ze=1,Ft=2,Qt,Ct,Jt,ts,as=function(lt){var Ot;return Q(lt)&&H(Ot=lt.then)?Ot:!1},Xe=function(lt,Ot){var De=Ot.value,dt=Ot.state===It,at=dt?lt.ok:lt.fail,Et=lt.resolve,Xt=lt.reject,vt=lt.domain,it,Rt,qt;try{at?(dt||(Ot.rejection===Ft&&Dt(Ot),Ot.rejection=ze),at===!0?it=De:(vt&&vt.enter(),it=at(De),vt&&(vt.exit(),qt=!0)),it===lt.promise?Xt(new Se("Promise-chain cycle")):(Rt=as(it))?N(Rt,it,Et,Xt):Et(it)):Xt(De)}catch(cs){vt&&!qt&&vt.exit(),Xt(cs)}},Vt=function(lt,Ot){lt.notified||(lt.notified=!0,P(function(){for(var De=lt.reactions,dt;dt=De.get();)Xe(dt,lt);lt.notified=!1,Ot&&!lt.rejection&&Mt(lt)}))},Kt=function(lt,Ot,De){var dt,at;Ze?(dt=ge.createEvent("Event"),dt.promise=Ot,dt.reason=De,dt.initEvent(lt,!1,!0),b.dispatchEvent(dt)):dt={promise:Ot,reason:De},!ee&&(at=b["on"+lt])?at(dt):lt===Pe&&V("Unhandled promise rejection",De)},Mt=function(lt){N($,b,function(){var Ot=lt.facade,De=lt.value,dt=mt(lt),at;if(dt&&(at=G(function(){g?Be.emit("unhandledRejection",De,Ot):Kt(Pe,Ot,De)}),lt.rejection=g||mt(lt)?Ft:ze,at.error))throw at.value})},mt=function(lt){return lt.rejection!==ze&&!lt.parent},Dt=function(lt){N($,b,function(){var Ot=lt.facade;g?Be.emit("rejectionHandled",Ot):Kt(me,Ot,lt.value)})},Ns=function(lt,Ot,De){return function(dt){lt(Ot,dt,De)}},$t=function(lt,Ot,De){lt.done||(lt.done=!0,De&&(lt=De),lt.value=Ot,lt.state=ut,Vt(lt,!0))},Wt=function(lt,Ot,De){if(!lt.done){lt.done=!0,De&&(lt=De);try{if(lt.facade===Ot)throw new Se("Promise can't be resolved itself");var dt=as(Ot);dt?P(function(){var at={done:!1};try{N(dt,Ot,Ns(Wt,at,lt),Ns($t,at,lt))}catch(Et){$t(at,Et,lt)}}):(lt.value=Ot,lt.state=It,Vt(lt,!1))}catch(at){$t({done:!1},at,lt)}}};if(pe&&(ce=function(Ot){U(this,ve),O(Ot),N(Qt,this);var De=J(this);try{Ot(Ns(Wt,De),Ns($t,De))}catch(dt){$t(De,dt)}},ve=ce.prototype,Qt=function(Ot){ie(this,{type:re,done:!1,notified:!1,parent:!1,reactions:new ae,rejection:!1,state:nt,value:null})},Qt.prototype=C(ve,"then",function(Ot,De){var dt=J(this),at=Fe(R(this,ce));return dt.parent=!0,at.ok=H(Ot)?Ot:!0,at.fail=H(De)&&De,at.domain=g?Be.domain:void 0,dt.state===nt?dt.reactions.add(at):P(function(){Xe(at,dt)}),at.promise}),Ct=function(){var lt=new Qt,Ot=J(lt);this.promise=lt,this.resolve=Ns(Wt,Ot),this.reject=Ns($t,Ot)},Y.f=Fe=function(lt){return lt===ce||lt===Jt?new Ct(lt):Qe(lt)},!x&&H(oe)&&le!==Object.prototype)){ts=le.then,M||C(le,"then",function(Ot,De){var dt=this;return new ce(function(at,Et){N(ts,dt,at,Et)}).then(Ot,De)},{unsafe:!0});try{delete le.constructor}catch{}E&&E(le,ve)}m({global:!0,constructor:!0,wrap:!0,forced:pe},{Promise:ce}),Jt=I.Promise,F(ce,re,!1,!0),L(re)}),"./node_modules/core-js/modules/es.promise.js":(function(u,f,A){A("./node_modules/core-js/modules/es.promise.constructor.js"),A("./node_modules/core-js/modules/es.promise.all.js"),A("./node_modules/core-js/modules/es.promise.catch.js"),A("./node_modules/core-js/modules/es.promise.race.js"),A("./node_modules/core-js/modules/es.promise.reject.js"),A("./node_modules/core-js/modules/es.promise.resolve.js")}),"./node_modules/core-js/modules/es.promise.race.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/a-callable.js"),b=A("./node_modules/core-js/internals/new-promise-capability.js"),I=A("./node_modules/core-js/internals/perform.js"),N=A("./node_modules/core-js/internals/iterate.js"),C=A("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");m({target:"Promise",stat:!0,forced:C},{race:function(F){var L=this,O=b.f(L),H=O.reject,Q=I(function(){var U=g(L.resolve);N(F,function(R){x(U,L,R).then(O.resolve,H)})});return Q.error&&H(Q.value),O.promise}})}),"./node_modules/core-js/modules/es.promise.reject.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/new-promise-capability.js"),g=A("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;m({target:"Promise",stat:!0,forced:g},{reject:function(I){var N=x.f(this),C=N.reject;return C(I),N.promise}})}),"./node_modules/core-js/modules/es.promise.resolve.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/get-built-in.js"),g=A("./node_modules/core-js/internals/is-pure.js"),b=A("./node_modules/core-js/internals/promise-native-constructor.js"),I=A("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,N=A("./node_modules/core-js/internals/promise-resolve.js"),C=x("Promise"),E=g&&!I;m({target:"Promise",stat:!0,forced:g||I},{resolve:function(L){return N(E&&this===C?b:this,L)}})}),"./node_modules/core-js/modules/es.regexp.exec.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/regexp-exec.js");m({target:"RegExp",proto:!0,forced:/./.exec!==x},{exec:x})}),"./node_modules/core-js/modules/es.regexp.test.js":(function(u,f,A){A("./node_modules/core-js/modules/es.regexp.exec.js");var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/is-callable.js"),b=A("./node_modules/core-js/internals/an-object.js"),I=A("./node_modules/core-js/internals/to-string.js"),N=(function(){var E=!1,F=/[ac]/;return F.exec=function(){return E=!0,/./.exec.apply(this,arguments)},F.test("abc")===!0&&E})(),C=/./.test;m({target:"RegExp",proto:!0,forced:!N},{test:function(E){var F=b(this),L=I(E),O=F.exec;if(!g(O))return x(C,F,L);var H=x(O,F,L);return H===null?!1:(b(H),!0)}})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/function-name.js").PROPER,x=A("./node_modules/core-js/internals/define-built-in.js"),g=A("./node_modules/core-js/internals/an-object.js"),b=A("./node_modules/core-js/internals/to-string.js"),I=A("./node_modules/core-js/internals/fails.js"),N=A("./node_modules/core-js/internals/regexp-get-flags.js"),C="toString",E=RegExp.prototype,F=E[C],L=I(function(){return F.call({source:"a",flags:"b"})!=="/a/b"}),O=m&&F.name!==C;(L||O)&&x(E,C,function(){var Q=g(this),U=b(Q.source),R=b(N(Q));return"/"+U+"/"+R},{unsafe:!0})}),"./node_modules/core-js/modules/es.set.constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/collection.js"),x=A("./node_modules/core-js/internals/collection-strong.js");m("Set",function(g){return function(){return g(this,arguments.length?arguments[0]:void 0)}},x)}),"./node_modules/core-js/modules/es.set.js":(function(u,f,A){A("./node_modules/core-js/modules/es.set.constructor.js")}),"./node_modules/core-js/modules/es.string.iterator.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/string-multibyte.js").charAt,x=A("./node_modules/core-js/internals/to-string.js"),g=A("./node_modules/core-js/internals/internal-state.js"),b=A("./node_modules/core-js/internals/iterator-define.js"),I=A("./node_modules/core-js/internals/create-iter-result-object.js"),N="String Iterator",C=g.set,E=g.getterFor(N);b(String,"String",function(F){C(this,{type:N,string:x(F),index:0})},function(){var L=E(this),O=L.string,H=L.index,Q;return H>=O.length?I(void 0,!0):(Q=m(O,H),L.index+=Q.length,I(Q,!1))})}),"./node_modules/core-js/modules/es.string.link.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/create-html.js"),g=A("./node_modules/core-js/internals/string-html-forced.js");m({target:"String",proto:!0,forced:g("link")},{link:function(I){return x(this,"a","href",I)}})}),"./node_modules/core-js/modules/es.symbol.constructor.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/function-call.js"),b=A("./node_modules/core-js/internals/function-uncurry-this.js"),I=A("./node_modules/core-js/internals/is-pure.js"),N=A("./node_modules/core-js/internals/descriptors.js"),C=A("./node_modules/core-js/internals/symbol-constructor-detection.js"),E=A("./node_modules/core-js/internals/fails.js"),F=A("./node_modules/core-js/internals/has-own-property.js"),L=A("./node_modules/core-js/internals/object-is-prototype-of.js"),O=A("./node_modules/core-js/internals/an-object.js"),H=A("./node_modules/core-js/internals/to-indexed-object.js"),Q=A("./node_modules/core-js/internals/to-property-key.js"),U=A("./node_modules/core-js/internals/to-string.js"),R=A("./node_modules/core-js/internals/create-property-descriptor.js"),$=A("./node_modules/core-js/internals/object-create.js"),P=A("./node_modules/core-js/internals/object-keys.js"),V=A("./node_modules/core-js/internals/object-get-own-property-names.js"),G=A("./node_modules/core-js/internals/object-get-own-property-names-external.js"),ae=A("./node_modules/core-js/internals/object-get-own-property-symbols.js"),ue=A("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),oe=A("./node_modules/core-js/internals/object-define-property.js"),X=A("./node_modules/core-js/internals/object-define-properties.js"),Y=A("./node_modules/core-js/internals/object-property-is-enumerable.js"),re=A("./node_modules/core-js/internals/define-built-in.js"),pe=A("./node_modules/core-js/internals/define-built-in-accessor.js"),ee=A("./node_modules/core-js/internals/shared.js"),M=A("./node_modules/core-js/internals/shared-key.js"),J=A("./node_modules/core-js/internals/hidden-keys.js"),ie=A("./node_modules/core-js/internals/uid.js"),le=A("./node_modules/core-js/internals/well-known-symbol.js"),ce=A("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),ve=A("./node_modules/core-js/internals/well-known-symbol-define.js"),Se=A("./node_modules/core-js/internals/symbol-define-to-primitive.js"),ge=A("./node_modules/core-js/internals/set-to-string-tag.js"),Be=A("./node_modules/core-js/internals/internal-state.js"),Fe=A("./node_modules/core-js/internals/array-iteration.js").forEach,Qe=M("hidden"),Ze="Symbol",Pe="prototype",me=Be.set,nt=Be.getterFor(Ze),It=Object[Pe],ut=x.Symbol,ze=ut&&ut[Pe],Ft=x.RangeError,Qt=x.TypeError,Ct=x.QObject,Jt=ue.f,ts=oe.f,as=G.f,Xe=Y.f,Vt=b([].push),Kt=ee("symbols"),Mt=ee("op-symbols"),mt=ee("wks"),Dt=!Ct||!Ct[Pe]||!Ct[Pe].findChild,Ns=function(vt,it,Rt){var qt=Jt(It,it);qt&&delete It[it],ts(vt,it,Rt),qt&&vt!==It&&ts(It,it,qt)},$t=N&&E(function(){return $(ts({},"a",{get:function(){return ts(this,"a",{value:7}).a}})).a!==7})?Ns:ts,Wt=function(vt,it){var Rt=Kt[vt]=$(ze);return me(Rt,{type:Ze,tag:vt,description:it}),N||(Rt.description=it),Rt},lt=function(it,Rt,qt){it===It&&lt(Mt,Rt,qt),O(it);var cs=Q(Rt);return O(qt),F(Kt,cs)?(qt.enumerable?(F(it,Qe)&&it[Qe][cs]&&(it[Qe][cs]=!1),qt=$(qt,{enumerable:R(0,!1)})):(F(it,Qe)||ts(it,Qe,R(1,$(null))),it[Qe][cs]=!0),$t(it,cs,qt)):ts(it,cs,qt)},Ot=function(it,Rt){O(it);var qt=H(Rt),cs=P(qt).concat(Xt(qt));return Fe(cs,function(Xs){(!N||g(dt,qt,Xs))&&lt(it,Xs,qt[Xs])}),it},De=function(it,Rt){return Rt===void 0?$(it):Ot($(it),Rt)},dt=function(it){var Rt=Q(it),qt=g(Xe,this,Rt);return this===It&&F(Kt,Rt)&&!F(Mt,Rt)?!1:qt||!F(this,Rt)||!F(Kt,Rt)||F(this,Qe)&&this[Qe][Rt]?qt:!0},at=function(it,Rt){var qt=H(it),cs=Q(Rt);if(!(qt===It&&F(Kt,cs)&&!F(Mt,cs))){var Xs=Jt(qt,cs);return Xs&&F(Kt,cs)&&!(F(qt,Qe)&&qt[Qe][cs])&&(Xs.enumerable=!0),Xs}},Et=function(it){var Rt=as(H(it)),qt=[];return Fe(Rt,function(cs){!F(Kt,cs)&&!F(J,cs)&&Vt(qt,cs)}),qt},Xt=function(vt){var it=vt===It,Rt=as(it?Mt:H(vt)),qt=[];return Fe(Rt,function(cs){F(Kt,cs)&&(!it||F(It,cs))&&Vt(qt,Kt[cs])}),qt};C||(ut=function(){if(L(ze,this))throw new Qt("Symbol is not a constructor");var it=!arguments.length||arguments[0]===void 0?void 0:U(arguments[0]),Rt=ie(it),qt=function(cs){var Xs=this===void 0?x:this;Xs===It&&g(qt,Mt,cs),F(Xs,Qe)&&F(Xs[Qe],Rt)&&(Xs[Qe][Rt]=!1);var Ls=R(1,cs);try{$t(Xs,Rt,Ls)}catch(Yt){if(!(Yt instanceof Ft))throw Yt;Ns(Xs,Rt,Ls)}};return N&&Dt&&$t(It,Rt,{configurable:!0,set:qt}),Wt(Rt,it)},ze=ut[Pe],re(ze,"toString",function(){return nt(this).tag}),re(ut,"withoutSetter",function(vt){return Wt(ie(vt),vt)}),Y.f=dt,oe.f=lt,X.f=Ot,ue.f=at,V.f=G.f=Et,ae.f=Xt,ce.f=function(vt){return Wt(le(vt),vt)},N&&(pe(ze,"description",{configurable:!0,get:function(){return nt(this).description}}),I||re(It,"propertyIsEnumerable",dt,{unsafe:!0}))),m({global:!0,constructor:!0,wrap:!0,forced:!C,sham:!C},{Symbol:ut}),Fe(P(mt),function(vt){ve(vt)}),m({target:Ze,stat:!0,forced:!C},{useSetter:function(){Dt=!0},useSimple:function(){Dt=!1}}),m({target:"Object",stat:!0,forced:!C,sham:!N},{create:De,defineProperty:lt,defineProperties:Ot,getOwnPropertyDescriptor:at}),m({target:"Object",stat:!0,forced:!C},{getOwnPropertyNames:Et}),Se(),ge(ut,Ze),J[Qe]=!0}),"./node_modules/core-js/modules/es.symbol.description.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/descriptors.js"),g=A("./node_modules/core-js/internals/global-this.js"),b=A("./node_modules/core-js/internals/function-uncurry-this.js"),I=A("./node_modules/core-js/internals/has-own-property.js"),N=A("./node_modules/core-js/internals/is-callable.js"),C=A("./node_modules/core-js/internals/object-is-prototype-of.js"),E=A("./node_modules/core-js/internals/to-string.js"),F=A("./node_modules/core-js/internals/define-built-in-accessor.js"),L=A("./node_modules/core-js/internals/copy-constructor-properties.js"),O=g.Symbol,H=O&&O.prototype;if(x&&N(O)&&(!("description"in H)||O().description!==void 0)){var Q={},U=function(){var oe=arguments.length<1||arguments[0]===void 0?void 0:E(arguments[0]),X=C(H,this)?new O(oe):oe===void 0?O():O(oe);return oe===""&&(Q[X]=!0),X};L(U,O),U.prototype=H,H.constructor=U;var R=String(O("description detection"))==="Symbol(description detection)",$=b(H.valueOf),P=b(H.toString),V=/^Symbol\((.*)\)[^)]+$/,G=b("".replace),ae=b("".slice);F(H,"description",{configurable:!0,get:function(){var oe=$(this);if(I(Q,oe))return"";var X=P(oe),Y=R?ae(X,7,-1):G(X,V,"$1");return Y===""?void 0:Y}}),m({global:!0,constructor:!0,forced:!0},{Symbol:U})}}),"./node_modules/core-js/modules/es.symbol.for.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/get-built-in.js"),g=A("./node_modules/core-js/internals/has-own-property.js"),b=A("./node_modules/core-js/internals/to-string.js"),I=A("./node_modules/core-js/internals/shared.js"),N=A("./node_modules/core-js/internals/symbol-registry-detection.js"),C=I("string-to-symbol-registry"),E=I("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!N},{for:function(F){var L=b(F);if(g(C,L))return C[L];var O=x("Symbol")(L);return C[L]=O,E[O]=L,O}})}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/well-known-symbol-define.js");m("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(u,f,A){A("./node_modules/core-js/modules/es.symbol.constructor.js"),A("./node_modules/core-js/modules/es.symbol.for.js"),A("./node_modules/core-js/modules/es.symbol.key-for.js"),A("./node_modules/core-js/modules/es.json.stringify.js"),A("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")}),"./node_modules/core-js/modules/es.symbol.key-for.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/has-own-property.js"),g=A("./node_modules/core-js/internals/is-symbol.js"),b=A("./node_modules/core-js/internals/try-to-string.js"),I=A("./node_modules/core-js/internals/shared.js"),N=A("./node_modules/core-js/internals/symbol-registry-detection.js"),C=I("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!N},{keyFor:function(F){if(!g(F))throw new TypeError(b(F)+" is not a symbol");if(x(C,F))return C[F]}})}),"./node_modules/core-js/modules/esnext.iterator.constructor.js":(function(u,f,A){A("./node_modules/core-js/modules/es.iterator.constructor.js")}),"./node_modules/core-js/modules/esnext.iterator.for-each.js":(function(u,f,A){A("./node_modules/core-js/modules/es.iterator.for-each.js")}),"./node_modules/core-js/modules/esnext.iterator.map.js":(function(u,f,A){A("./node_modules/core-js/modules/es.iterator.map.js")}),"./node_modules/core-js/modules/esnext.set.add-all.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/a-set.js"),g=A("./node_modules/core-js/internals/set-helpers.js").add;m({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var I=x(this),N=0,C=arguments.length;N<C;N++)g(I,arguments[N]);return I}})}),"./node_modules/core-js/modules/esnext.set.delete-all.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/a-set.js"),g=A("./node_modules/core-js/internals/set-helpers.js").remove;m({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var I=x(this),N=!0,C,E=0,F=arguments.length;E<F;E++)C=g(I,arguments[E]),N=N&&C;return!!N}})}),"./node_modules/core-js/modules/esnext.set.difference.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-difference.js");m({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/esnext.set.every.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-bind-context.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{every:function(N){var C=g(this),E=x(N,arguments.length>1?arguments[1]:void 0);return b(C,function(F){if(!E(F,F,C))return!1},!0)!==!1}})}),"./node_modules/core-js/modules/esnext.set.filter.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-bind-context.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-helpers.js"),I=A("./node_modules/core-js/internals/set-iterate.js"),N=b.Set,C=b.add;m({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(F){var L=g(this),O=x(F,arguments.length>1?arguments[1]:void 0),H=new N;return I(L,function(Q){O(Q,Q,L)&&C(H,Q)}),H}})}),"./node_modules/core-js/modules/esnext.set.find.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-bind-context.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{find:function(N){var C=g(this),E=x(N,arguments.length>1?arguments[1]:void 0),F=b(C,function(L){if(E(L,L,C))return{value:L}},!0);return F&&F.value}})}),"./node_modules/core-js/modules/esnext.set.intersection.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-intersection.js");m({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-is-disjoint-from.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/esnext.set.is-subset-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-is-subset-of.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/esnext.set.is-superset-of.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-is-superset-of.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/esnext.set.join.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-uncurry-this.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-iterate.js"),I=A("./node_modules/core-js/internals/to-string.js"),N=x([].join),C=x([].push);m({target:"Set",proto:!0,real:!0,forced:!0},{join:function(F){var L=g(this),O=F===void 0?",":I(F),H=[];return b(L,function(Q){C(H,Q)}),N(H,O)}})}),"./node_modules/core-js/modules/esnext.set.map.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-bind-context.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-helpers.js"),I=A("./node_modules/core-js/internals/set-iterate.js"),N=b.Set,C=b.add;m({target:"Set",proto:!0,real:!0,forced:!0},{map:function(F){var L=g(this),O=x(F,arguments.length>1?arguments[1]:void 0),H=new N;return I(L,function(Q){C(H,O(Q,Q,L))}),H}})}),"./node_modules/core-js/modules/esnext.set.reduce.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/a-callable.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-iterate.js"),I=TypeError;m({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(C){var E=g(this),F=arguments.length<2,L=F?void 0:arguments[1];if(x(C),b(E,function(O){F?(F=!1,L=O):L=C(L,O,O,E)}),F)throw new I("Reduce of empty set with no initial value");return L}})}),"./node_modules/core-js/modules/esnext.set.some.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-bind-context.js"),g=A("./node_modules/core-js/internals/a-set.js"),b=A("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{some:function(N){var C=g(this),E=x(N,arguments.length>1?arguments[1]:void 0);return b(C,function(F){if(E(F,F,C))return!0},!0)===!0}})}),"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-symmetric-difference.js");m({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/esnext.set.union.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/function-call.js"),g=A("./node_modules/core-js/internals/to-set-like.js"),b=A("./node_modules/core-js/internals/set-union.js");m({target:"Set",proto:!0,real:!0,forced:!0},{union:function(N){return x(b,this,g(N))}})}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/dom-iterables.js"),g=A("./node_modules/core-js/internals/dom-token-list-prototype.js"),b=A("./node_modules/core-js/internals/array-for-each.js"),I=A("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=function(E){if(E&&E.forEach!==b)try{I(E,"forEach",b)}catch{E.forEach=b}};for(var C in x)x[C]&&N(m[C]&&m[C].prototype);N(g)}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/global-this.js"),x=A("./node_modules/core-js/internals/dom-iterables.js"),g=A("./node_modules/core-js/internals/dom-token-list-prototype.js"),b=A("./node_modules/core-js/modules/es.array.iterator.js"),I=A("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=A("./node_modules/core-js/internals/set-to-string-tag.js"),C=A("./node_modules/core-js/internals/well-known-symbol.js"),E=C("iterator"),F=b.values,L=function(H,Q){if(H){if(H[E]!==F)try{I(H,E,F)}catch{H[E]=F}if(N(H,Q,!0),x[Q]){for(var U in b)if(H[U]!==b[U])try{I(H,U,b[U])}catch{H[U]=b[U]}}}};for(var O in x)L(m[O]&&m[O].prototype,O);L(g,"DOMTokenList")}),"./node_modules/core-js/modules/web.set-interval.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/schedulers-fix.js"),b=g(x.setInterval,!0);m({global:!0,bind:!0,forced:x.setInterval!==b},{setInterval:b})}),"./node_modules/core-js/modules/web.set-timeout.js":(function(u,f,A){var m=A("./node_modules/core-js/internals/export.js"),x=A("./node_modules/core-js/internals/global-this.js"),g=A("./node_modules/core-js/internals/schedulers-fix.js"),b=g(x.setTimeout,!0);m({global:!0,bind:!0,forced:x.setTimeout!==b},{setTimeout:b})}),"./node_modules/core-js/modules/web.timers.js":(function(u,f,A){A("./node_modules/core-js/modules/web.set-interval.js"),A("./node_modules/core-js/modules/web.set-timeout.js")}),"./src/plugin/hyperlinks.js":(function(u,f,A){A.r(f),A("./node_modules/core-js/modules/es.object.to-string.js"),A("./node_modules/core-js/modules/es.string.link.js"),A("./node_modules/core-js/modules/esnext.iterator.constructor.js"),A("./node_modules/core-js/modules/esnext.iterator.for-each.js"),A("./node_modules/core-js/modules/web.dom-collections.for-each.js");var m=A("./src/worker.js"),x=A("./src/utils.js"),g=[],b={toContainer:m.default.prototype.toContainer,toPdf:m.default.prototype.toPdf};m.default.prototype.toContainer=function(){return b.toContainer.call(this).then(function(){if(this.opt.enableLinks){var C=this.prop.container,E=C.querySelectorAll("a"),F=(0,x.unitConvert)(C.getBoundingClientRect(),this.prop.pageSize.k);g=[],Array.prototype.forEach.call(E,function(L){for(var O=L.getClientRects(),H=0;H<O.length;H++){var Q=(0,x.unitConvert)(O[H],this.prop.pageSize.k);Q.left-=F.left,Q.top-=F.top;var U=Math.floor(Q.top/this.prop.pageSize.inner.height)+1,R=this.opt.margin[0]+Q.top%this.prop.pageSize.inner.height,$=this.opt.margin[1]+Q.left;g.push({page:U,top:R,left:$,clientRect:Q,link:L})}},this)}})},m.default.prototype.toPdf=function(){return b.toPdf.call(this).then(function(){if(this.opt.enableLinks){g.forEach(function(E){this.prop.pdf.setPage(E.page),this.prop.pdf.link(E.left,E.top,E.clientRect.width,E.clientRect.height,{url:E.link.href})},this);var C=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(C)}})}}),"./src/plugin/jspdf-plugin.js":(function(u,f,A){A.r(f),A("./node_modules/core-js/modules/es.symbol.js"),A("./node_modules/core-js/modules/es.symbol.description.js"),A("./node_modules/core-js/modules/es.symbol.iterator.js"),A("./node_modules/core-js/modules/es.array.iterator.js"),A("./node_modules/core-js/modules/es.object.to-string.js"),A("./node_modules/core-js/modules/es.string.iterator.js"),A("./node_modules/core-js/modules/web.dom-collections.iterator.js");var m=A("jspdf");function x(g){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},x(g)}m.jsPDF.getPageSize=function(g,b,I){if(x(g)==="object"){var N=g;g=N.orientation,b=N.unit||b,I=N.format||I}b=b||"mm",I=I||"a4",g=(""+(g||"P")).toLowerCase();var C=(""+I).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(b){case"pt":var F=1;break;case"mm":var F=72/25.4;break;case"cm":var F=72/2.54;break;case"in":var F=72;break;case"px":var F=72/96;break;case"pc":var F=12;break;case"em":var F=12;break;case"ex":var F=6;break;default:throw"Invalid unit: "+b}if(E.hasOwnProperty(C))var L=E[C][1]/F,O=E[C][0]/F;else try{var L=I[1],O=I[0]}catch{throw new Error("Invalid format: "+I)}if(g==="p"||g==="portrait"){if(g="p",O>L){var H=O;O=L,L=H}}else if(g==="l"||g==="landscape"){if(g="l",L>O){var H=O;O=L,L=H}}else throw"Invalid orientation: "+g;var Q={width:O,height:L,unit:b,k:F};return Q},f.default=m.jsPDF}),"./src/plugin/pagebreaks.js":(function(u,f,A){A.r(f),A("./node_modules/core-js/modules/es.array.concat.js"),A("./node_modules/core-js/modules/es.array.join.js"),A("./node_modules/core-js/modules/es.array.slice.js"),A("./node_modules/core-js/modules/es.object.keys.js"),A("./node_modules/core-js/modules/es.object.to-string.js"),A("./node_modules/core-js/modules/esnext.iterator.constructor.js"),A("./node_modules/core-js/modules/esnext.iterator.for-each.js"),A("./node_modules/core-js/modules/web.dom-collections.for-each.js");var m=A("./src/worker.js"),x=A("./src/utils.js"),g={toContainer:m.default.prototype.toContainer};m.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},m.default.prototype.toContainer=function(){return g.toContainer.call(this).then(function(){var N=this.prop.container,C=this.prop.pageSize.inner.px.height,E=[].concat(this.opt.pagebreak.mode),F={avoidAll:E.indexOf("avoid-all")!==-1,css:E.indexOf("css")!==-1,legacy:E.indexOf("legacy")!==-1},L={},O=this;["before","after","avoid"].forEach(function(U){var R=F.avoidAll&&U==="avoid";L[U]=R?[]:[].concat(O.opt.pagebreak[U]||[]),L[U].length>0&&(L[U]=Array.prototype.slice.call(N.querySelectorAll(L[U].join(", "))))});var H=N.querySelectorAll(".html2pdf__page-break");H=Array.prototype.slice.call(H);var Q=N.querySelectorAll("*");Array.prototype.forEach.call(Q,function(R){var $={before:!1,after:F.legacy&&H.indexOf(R)!==-1,avoid:F.avoidAll};if(F.css){var P=window.getComputedStyle(R),V=["always","page","left","right"],G=["avoid","avoid-page"];$={before:$.before||V.indexOf(P.breakBefore||P.pageBreakBefore)!==-1,after:$.after||V.indexOf(P.breakAfter||P.pageBreakAfter)!==-1,avoid:$.avoid||G.indexOf(P.breakInside||P.pageBreakInside)!==-1}}Object.keys($).forEach(function(re){$[re]=$[re]||L[re].indexOf(R)!==-1});var ae=R.getBoundingClientRect();if($.avoid&&!$.before){var ue=Math.floor(ae.top/C),oe=Math.floor(ae.bottom/C),X=Math.abs(ae.bottom-ae.top)/C;oe!==ue&&X<=1&&($.before=!0)}if($.before){var Y=(0,x.createElement)("div",{style:{display:"block",height:C-ae.top%C+"px"}});R.parentNode.insertBefore(Y,R)}if($.after){var Y=(0,x.createElement)("div",{style:{display:"block",height:C-ae.bottom%C+"px"}});R.parentNode.insertBefore(Y,R.nextSibling)}})})}}),"./src/snapdom/clone.js":(function(u,f,A){A.r(f),A.d(f,{deepCloneBasic:function(){return I}}),A("./node_modules/core-js/modules/es.symbol.js"),A("./node_modules/core-js/modules/es.symbol.description.js"),A("./node_modules/core-js/modules/es.symbol.iterator.js"),A("./node_modules/core-js/modules/es.array.concat.js"),A("./node_modules/core-js/modules/es.array.from.js"),A("./node_modules/core-js/modules/es.array.iterator.js"),A("./node_modules/core-js/modules/es.array.slice.js"),A("./node_modules/core-js/modules/es.function.name.js"),A("./node_modules/core-js/modules/es.object.to-string.js"),A("./node_modules/core-js/modules/es.regexp.exec.js"),A("./node_modules/core-js/modules/es.regexp.test.js"),A("./node_modules/core-js/modules/es.regexp.to-string.js"),A("./node_modules/core-js/modules/es.set.js"),A("./node_modules/core-js/modules/es.string.iterator.js"),A("./node_modules/core-js/modules/esnext.set.add-all.js"),A("./node_modules/core-js/modules/esnext.set.delete-all.js"),A("./node_modules/core-js/modules/esnext.set.difference.js"),A("./node_modules/core-js/modules/esnext.set.every.js"),A("./node_modules/core-js/modules/esnext.set.filter.js"),A("./node_modules/core-js/modules/esnext.set.find.js"),A("./node_modules/core-js/modules/esnext.set.intersection.js"),A("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),A("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),A("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),A("./node_modules/core-js/modules/esnext.set.join.js"),A("./node_modules/core-js/modules/esnext.set.map.js"),A("./node_modules/core-js/modules/esnext.set.reduce.js"),A("./node_modules/core-js/modules/esnext.set.some.js"),A("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),A("./node_modules/core-js/modules/esnext.set.union.js"),A("./node_modules/core-js/modules/web.dom-collections.iterator.js");function m(N,C){var E=typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(!E){if(Array.isArray(N)||(E=x(N))||C){E&&(N=E);var F=0,L=function(){};return{s:L,n:function(){return F>=N.length?{done:!0}:{done:!1,value:N[F++]}},e:function(R){throw R},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O,H=!0,Q=!1;return{s:function(){E=E.call(N)},n:function(){var R=E.next();return H=R.done,R},e:function(R){Q=!0,O=R},f:function(){try{H||E.return==null||E.return()}finally{if(Q)throw O}}}}function x(N,C){if(N){if(typeof N=="string")return g(N,C);var E={}.toString.call(N).slice(8,-1);return E==="Object"&&N.constructor&&(E=N.constructor.name),E==="Map"||E==="Set"?Array.from(N):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?g(N,C):void 0}}function g(N,C){(C==null||C>N.length)&&(C=N.length);for(var E=0,F=Array(C);E<C;E++)F[E]=N[E];return F}function b(N,C){try{var E=N.currentSrc||N.src||"";if(!E)return;C.setAttribute("src",E),C.removeAttribute("srcset"),C.removeAttribute("sizes"),C.loading="eager",C.decoding="sync"}catch{}}function I(N){if(!N)throw new Error("Invalid node");var C=new Set,E=null;if(N.nodeType===Node.TEXT_NODE||N.nodeType!==Node.ELEMENT_NODE)return N.cloneNode(!0);if(N.tagName==="IFRAME"){var F=document.createElement("div");return F.style.cssText="width:".concat(N.offsetWidth,"px;height:").concat(N.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),F}if(N.tagName==="CANVAS"){var L=N.toDataURL(),O=document.createElement("img");return O.src=L,O.width=N.width,O.height=N.height,O}var H;try{H=N.cloneNode(!1),N.tagName==="IMG"&&b(N,H)}catch(Ze){throw console.error("[Snapdom] Failed to clone node:",N,Ze),Ze}if(N instanceof HTMLTextAreaElement){H.textContent=N.value,H.value=N.value;var Q=N.getBoundingClientRect();return H.style.boxSizing="border-box",H.style.width="".concat(Q.width,"px"),H.style.height="".concat(Q.height,"px"),H}if(N instanceof HTMLInputElement&&(N.hasAttribute("value")&&(H.value=N.value,H.setAttribute("value",N.value)),N.checked!==void 0&&(H.checked=N.checked,N.checked&&H.setAttribute("checked",""),N.indeterminate&&(H.indeterminate=N.indeterminate))),N instanceof HTMLSelectElement&&(E=N.value),N.shadowRoot){var U=Array.from(N.shadowRoot.querySelectorAll("slot")).length>0;if(!U){var R=document.createDocumentFragment(),$=m(N.shadowRoot.childNodes),P;try{for($.s();!(P=$.n()).done;){var V=P.value;if(!(V.nodeType===Node.ELEMENT_NODE&&V.tagName==="STYLE")){var G=I(V);G&&R.appendChild(G)}}}catch(Ze){$.e(Ze)}finally{$.f()}H.appendChild(R)}}if(N.tagName==="SLOT"){var ae,ue=((ae=N.assignedNodes)===null||ae===void 0?void 0:ae.call(N,{flatten:!0}))||[],oe=ue.length>0?ue:Array.from(N.childNodes),X=document.createDocumentFragment(),Y=m(oe),re;try{for(Y.s();!(re=Y.n()).done;){var pe=re.value,ee=I(pe);ee&&X.appendChild(ee)}}catch(Ze){Y.e(Ze)}finally{Y.f()}return X}var M=m(N.childNodes),J;try{for(M.s();!(J=M.n()).done;){var ie=J.value;if(!C.has(ie)){var le=I(ie);le&&H.appendChild(le)}}}catch(Ze){M.e(Ze)}finally{M.f()}if(E!==null&&H instanceof HTMLSelectElement){H.value=E;var ce=m(H.options),ve;try{for(ce.s();!(ve=ce.n()).done;){var Se=ve.value;Se.value===E?Se.setAttribute("selected",""):Se.removeAttribute("selected")}}catch(Ze){ce.e(Ze)}finally{ce.f()}}var ge=N.scrollLeft,Be=N.scrollTop,Fe=ge||Be;if(Fe&&H instanceof HTMLElement){H.style.overflow="hidden",H.style.scrollbarWidth="none",H.style.msOverflowStyle="none";var Qe=document.createElement("div");for(Qe.style.transform="translate(".concat(-ge,"px, ").concat(-Be,"px)"),Qe.style.willChange="transform",Qe.style.display="inline-block",Qe.style.width="100%";H.firstChild;)Qe.appendChild(H.firstChild);H.appendChild(Qe)}return H}}),"./src/utils.js":(function(u,f,A){A.r(f),A.d(f,{createElement:function(){return g},objType:function(){return x},toPx:function(){return I},unitConvert:function(){return b}}),A("./node_modules/core-js/modules/es.symbol.js"),A("./node_modules/core-js/modules/es.symbol.description.js"),A("./node_modules/core-js/modules/es.symbol.iterator.js"),A("./node_modules/core-js/modules/es.array.iterator.js"),A("./node_modules/core-js/modules/es.number.constructor.js"),A("./node_modules/core-js/modules/es.object.to-string.js"),A("./node_modules/core-js/modules/es.string.iterator.js"),A("./node_modules/core-js/modules/web.dom-collections.iterator.js");function m(N){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},m(N)}var x=function(C){var E=m(C);return E==="undefined"?"undefined":E==="string"||C instanceof String?"string":E==="number"||C instanceof Number?"number":E==="function"||C instanceof Function?"function":C&&C.constructor===Array?"array":C&&C.nodeType===1?"element":E==="object"?"object":"unknown"},g=function(C,E){var F=document.createElement(C);if(E.className&&(F.className=E.className),E.innerHTML){F.innerHTML=E.innerHTML;for(var L=F.getElementsByTagName("script"),O=L.length;O-- >0;null)L[O].parentNode.removeChild(L[O])}for(var H in E.style)F.style[H]=E.style[H];return F},b=function(C,E){if(x(C)==="number")return C*72/96/E;var F={};for(var L in C)F[L]=C[L]*72/96/E;return F},I=function(C,E){return Math.floor(C*E/72*96)}}),"./src/worker.js":(function(u,f,A){A.r(f),A("./node_modules/core-js/modules/es.array.concat.js"),A("./node_modules/core-js/modules/es.array.map.js"),A("./node_modules/core-js/modules/es.function.name.js"),A("./node_modules/core-js/modules/es.json.stringify.js"),A("./node_modules/core-js/modules/es.object.assign.js"),A("./node_modules/core-js/modules/es.object.keys.js"),A("./node_modules/core-js/modules/es.object.to-string.js"),A("./node_modules/core-js/modules/es.promise.js"),A("./node_modules/core-js/modules/es.regexp.to-string.js"),A("./node_modules/core-js/modules/esnext.iterator.constructor.js"),A("./node_modules/core-js/modules/esnext.iterator.for-each.js"),A("./node_modules/core-js/modules/esnext.iterator.map.js"),A("./node_modules/core-js/modules/web.dom-collections.for-each.js"),A("./node_modules/core-js/modules/web.timers.js");var m=A("jspdf"),x=A("html2canvas"),g=A.n(x),b=A("./src/snapdom/clone.js"),I=A("./src/utils.js"),N=function C(E){var F=Object.assign(C.convert(Promise.resolve()),JSON.parse(JSON.stringify(C.template))),L=C.convert(Promise.resolve(),F);return L=L.setProgress(1,C,1,[C]),L=L.set(E),L};N.prototype=Object.create(Promise.prototype),N.prototype.constructor=N,N.convert=function(E,F){return E.__proto__=F||N.prototype,E},N.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},N.prototype.from=function(E,F){function L(O){switch((0,I.objType)(O)){case"string":return"string";case"element":return O.nodeName.toLowerCase&&O.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(F=F||L(E),F){case"string":return this.set({src:(0,I.createElement)("div",{innerHTML:E})});case"element":return this.set({src:E});case"canvas":return this.set({canvas:E});case"img":return this.set({img:E});default:return this.error("Unknown source type.")}})},N.prototype.to=function(E){switch(E){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},N.prototype.toContainer=function(){var E=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(E).then(function(){var L={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},O={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};L.opacity=0;var H=(0,b.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,I.createElement)("div",{className:"html2pdf__overlay",style:L}),this.prop.container=(0,I.createElement)("div",{className:"html2pdf__container",style:O}),this.prop.container.appendChild(H),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function(Q){return setTimeout(Q,10)})})},N.prototype.toCanvas=function(){var E=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(E).then(function(){var L=Object.assign({},this.opt.html2canvas);return delete L.onrendered,g()(this.prop.container,L)}).then(function(L){var O=this.opt.html2canvas.onrendered||function(){};O(L),this.prop.canvas=L,document.body.removeChild(this.prop.overlay)})},N.prototype.toImg=function(){var E=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(E).then(function(){var L=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=L})},N.prototype.toPdf=function(){var E=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(E).then(function(){var L=this.prop.canvas,O=this.opt,H=L.height,Q=Math.floor(L.width*this.prop.pageSize.inner.ratio),U=Math.ceil(H/Q),R=this.prop.pageSize.inner.height,$=document.createElement("canvas"),P=$.getContext("2d");$.width=L.width,$.height=Q,this.prop.pdf=this.prop.pdf||new m.jsPDF(O.jsPDF);for(var V=0;V<U;V++){V===U-1&&H%Q!==0&&($.height=H%Q,R=$.height*this.prop.pageSize.inner.width/$.width);var G=$.width,ae=$.height;P.fillStyle="white",P.fillRect(0,0,G,ae),P.drawImage(L,0,V*Q,G,ae,0,0,G,ae),V&&this.prop.pdf.addPage();var ue=$.toDataURL("image/"+O.image.type,O.image.quality);this.prop.pdf.addImage(ue,O.image.type,O.margin[1],O.margin[0],this.prop.pageSize.inner.width,R)}})},N.prototype.output=function(E,F,L){return L=L||"pdf",L.toLowerCase()==="img"||L.toLowerCase()==="image"?this.outputImg(E,F):this.outputPdf(E,F)},N.prototype.outputPdf=function(E,F){var L=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(L).then(function(){return this.prop.pdf.output(E,F)})},N.prototype.outputImg=function(E,F){var L=[function(){return this.prop.img||this.toImg()}];return this.thenList(L).then(function(){switch(E){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+E+'" is not supported.'}})},N.prototype.save=function(E){var F=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(F).set(E?{filename:E}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},N.prototype.set=function(E){if((0,I.objType)(E)!=="object")return this;var F=Object.keys(E||{}).map(function(L){switch(L){case"margin":return this.setMargin.bind(this,E.margin);case"jsPDF":return function(){return this.opt.jsPDF=E.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,E.pageSize);default:return L in N.template.prop?function(){this.prop[L]=E[L]}:function(){this.opt[L]=E[L]}}},this);return this.then(function(){return this.thenList(F)})},N.prototype.get=function(E,F){return this.then(function(){var O=E in N.template.prop?this.prop[E]:this.opt[E];return F?F(O):O})},N.prototype.setMargin=function(E){return this.then(function(){switch((0,I.objType)(E)){case"number":E=[E,E,E,E];case"array":if(E.length===2&&(E=[E[0],E[1],E[0],E[1]]),E.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=E}).then(this.setPageSize)},N.prototype.setPageSize=function(E){return this.then(function(){E=E||m.jsPDF.getPageSize(this.opt.jsPDF),E.hasOwnProperty("inner")||(E.inner={width:E.width-this.opt.margin[1]-this.opt.margin[3],height:E.height-this.opt.margin[0]-this.opt.margin[2]},E.inner.px={width:(0,I.toPx)(E.inner.width,E.k),height:(0,I.toPx)(E.inner.height,E.k)},E.inner.ratio=E.inner.height/E.inner.width),this.prop.pageSize=E})},N.prototype.setProgress=function(E,F,L,O){return E!=null&&(this.progress.val=E),F!=null&&(this.progress.state=F),L!=null&&(this.progress.n=L),O!=null&&(this.progress.stack=O),this.progress.ratio=this.progress.val/this.progress.state,this},N.prototype.updateProgress=function(E,F,L,O){return this.setProgress(E?this.progress.val+E:null,F||null,L?this.progress.n+L:null,O?this.progress.stack.concat(O):null)},N.prototype.then=function(E,F){var L=this;return this.thenCore(E,F,function(H,Q){return L.updateProgress(null,null,1,[H]),Promise.prototype.then.call(this,function(R){return L.updateProgress(null,H),R}).then(H,Q).then(function(R){return L.updateProgress(1),R})})},N.prototype.thenCore=function(E,F,L){L=L||Promise.prototype.then;var O=this;E&&(E=E.bind(O)),F&&(F=F.bind(O));var H=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",Q=H?O:N.convert(Object.assign({},O),Promise.prototype),U=L.call(Q,E,F);return N.convert(U,O.__proto__)},N.prototype.thenExternal=function(E,F){return Promise.prototype.then.call(this,E,F)},N.prototype.thenList=function(E){var F=this;return E.forEach(function(O){F=F.thenCore(O)}),F},N.prototype.catch=function(C){C&&(C=C.bind(this));var E=Promise.prototype.catch.call(this,C);return N.convert(E,this)},N.prototype.catchExternal=function(E){return Promise.prototype.catch.call(this,E)},N.prototype.error=function(E){return this.then(function(){throw new Error(E)})},N.prototype.using=N.prototype.set,N.prototype.saveAs=N.prototype.save,N.prototype.export=N.prototype.output,N.prototype.run=N.prototype.then,f.default=N}),html2canvas:(function(u){u.exports=n}),jspdf:(function(u){u.exports=t})},o={};function c(u){var f=o[u];if(f!==void 0)return f.exports;var A=o[u]={exports:{}};return r[u].call(A.exports,A,A.exports,c),A.exports}(function(){c.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return c.d(f,{a:f}),f}})(),(function(){c.d=function(u,f){for(var A in f)c.o(f,A)&&!c.o(u,A)&&Object.defineProperty(u,A,{enumerable:!0,get:f[A]})}})(),(function(){c.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)}})(),(function(){c.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}})();var h={};return(function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/c.r(h);var u=c("./src/worker.js");c("./src/plugin/jspdf-plugin.js"),c("./src/plugin/pagebreaks.js"),c("./src/plugin/hyperlinks.js");var f=function A(m,x){var g=new A.Worker(x);return m?g.from(m).save():g};f.Worker=u.default,h.default=f})(),h=h.default,h})()})})(e1)),e1.exports}var NV=CV();const EV=qb(NV),TV=({data:s})=>{var C;const[e,t]=Z.useState(!1),[n,r]=Z.useState(null);if(Z.useEffect(()=>{var F;const E=async()=>{var O;const L=(O=s==null?void 0:s.schoolInfo)==null?void 0:O.logoUrl;if(!L){r(null);return}if(L.startsWith("data:")){r(L);return}try{const Q=await(await fetch(L)).blob(),U=new FileReader;U.onloadend=()=>{r(U.result)},U.readAsDataURL(Q)}catch(H){console.error("Failed to fetch or convert logo:",H),r(L)}};(F=s==null?void 0:s.schoolInfo)!=null&&F.logoUrl&&E()},[(C=s==null?void 0:s.schoolInfo)==null?void 0:C.logoUrl]),!s)return null;const{schoolInfo:o,studentInfo:c,attendance:h,performance:u,summary:f,skills:A,remarks:m,promotion:x,termDates:g}=s,b=async E=>{const F=Array.from(E.querySelectorAll("img"));await Promise.all(F.map(L=>(L.setAttribute("crossorigin","anonymous"),L.setAttribute("referrerpolicy","no-referrer"),L.complete&&L.naturalWidth>0?Promise.resolve():new Promise(O=>{const H=()=>O();L.addEventListener("load",H,{once:!0}),L.addEventListener("error",H,{once:!0})}))))},I=async E=>{const F=E.includes("?")?`${E}&cb=${Date.now()}`:`${E}?cb=${Date.now()}`,O=await(await fetch(F)).blob();return await new Promise((H,Q)=>{const U=new FileReader;U.onloadend=()=>H(U.result),U.onerror=Q,U.readAsDataURL(O)})},N=async()=>{const E=document.getElementById("report-card");if(!E)return;t(!0);const F=E.querySelector("img[data-report-logo='true']"),L=F==null?void 0:F.src,O={transform:E.style.transform,transformOrigin:E.style.transformOrigin,width:E.style.width};try{E.style.width="794px";const U=E.scrollHeight||E.offsetHeight,R=Math.min(1,1123/U);if(E.style.transform=`scale(${R})`,E.style.transformOrigin="top left",F!=null&&F.src&&!F.src.startsWith("data:image"))try{const P=await I(F.src);F.src=P}catch(P){console.warn("Logo base64 conversion failed. Using normal URL.",P)}await b(E);const $={margin:0,filename:`${s.studentInfo.name}_Report_Card.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2.2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1},jsPDF:{unit:"px",format:[794,1123],orientation:"portrait",compress:!0},pagebreak:{mode:["avoid-all","css","legacy"]}};await EV().set($).from(E).save()}catch(H){console.error("PDF generation failed:",H)}finally{F&&L&&(F.src=L),E.style.transform=O.transform,E.style.transformOrigin=O.transformOrigin,E.style.width=O.width,t(!1)}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{id:"report-card",className:"bg-white p-4 rounded-lg shadow-lg border border-slate-200 text-[12.5px] leading-relaxed",style:{minHeight:"10.7in",boxSizing:"border-box",pageBreakInside:"avoid"},children:[i.jsxs("div",{className:"flex justify-between items-center pb-2 mb-2",style:{borderBottom:"2px solid #0B4A82"},children:[i.jsxs("div",{className:"flex items-center",children:[o.logoUrl?i.jsx("img",{"data-report-logo":"true",src:o.logoUrl,alt:"School Logo",className:"h-12 w-12 object-contain",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:E=>{E.currentTarget.style.display="none",console.warn("Logo failed to load:",o.logoUrl)}}):null,i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-primary-900",children:o.name}),i.jsxs("p",{className:"text-xs text-slate-600",children:[o.address," | ",o.phone]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-lg font-bold text-primary-800",children:"Terminal Report Card"}),i.jsxs("p",{className:"text-xs font-semibold text-slate-700",children:[o.academicYear," | ",o.term]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 bg-slate-50 p-2 rounded mb-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Name:"})," ",c.name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Class:"})," ",c.class]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gender:"})," ",c.gender]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Teacher:"})," ",c.classTeacher]})]}),i.jsx("div",{className:"mb-2",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[i.jsxs("div",{className:"bg-red-50 p-1.5 rounded",children:[i.jsx("span",{className:"block font-bold text-red-800 text-lg",children:h.totalDays}),i.jsx("span",{className:"text-xs text-red-700",children:"School Days"})]}),i.jsxs("div",{className:"bg-green-50 p-1.5 rounded",children:[i.jsx("span",{className:"block font-bold text-green-800 text-lg",children:h.presentDays}),i.jsx("span",{className:"text-xs text-green-700",children:"Present"})]}),i.jsxs("div",{className:"bg-red-50 p-1.5 rounded",children:[i.jsx("span",{className:"block font-bold text-red-800 text-lg",children:h.absentDays}),i.jsx("span",{className:"text-xs text-red-700",children:"Absent"})]}),i.jsxs("div",{className:"bg-purple-50 p-1.5 rounded",children:[i.jsxs("span",{className:"block font-bold text-purple-800 text-lg",children:[h.attendancePercentage,"%"]}),i.jsx("span",{className:"text-xs text-purple-700",children:"Attendance"})]})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsx("h3",{className:"text-sm font-bold text-primary-900 mb-2 px-3 pb-2 bg-slate-50",style:{borderLeft:"2px solid #1160A8",borderRight:"2px solid #1160A8",borderBottom:"1px solid #1160A8"},children:"Academic Performance"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse text-xs",children:[i.jsx("thead",{className:"text-white",style:{backgroundColor:"#1160A8"},children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle leading-relaxed",children:"Subject"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-12",children:"C.Test"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-12",children:"HW"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-12",children:"Proj"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-12",children:"Exam"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-12",children:"Total"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-10",children:"Pos"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle text-center w-10",children:"Grade"}),i.jsx("th",{className:"px-2 pt-0 pb-3 border-b border-white align-middle",children:"Remark"})]})}),i.jsx("tbody",{children:s.allStudentsAssessments&&u.map((E,F)=>{const L=pm(E.total),O=s.allStudentsAssessments.filter(U=>U.subject===E.subject).map(U=>U.total);O.sort((U,R)=>R-U);const H=O.indexOf(E.total)+1,Q=["st","nd","rd"][H-1]||"th";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"p-1.5 border font-medium",children:E.subject}),i.jsx("td",{className:"px-2 py-2 border text-center leading-relaxed",children:E.testScore}),i.jsx("td",{className:"p-1.5 border text-center",children:E.homeworkScore}),i.jsx("td",{className:"p-1.5 border text-center",children:E.projectScore}),i.jsx("td",{className:"p-1.5 border text-center",children:E.examScore}),i.jsx("td",{className:"p-1.5 border text-center font-bold",children:E.total}),i.jsx("td",{className:"p-1.5 border text-center",children:`${H}${Q}`}),i.jsx("td",{className:`p-1.5 border text-center font-bold ${Mg(L.grade).split(" ")[0]}`,children:L.grade}),i.jsx("td",{className:"p-1.5 border",children:L.remark})]},F)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-primary-900 mb-1 pl-2",style:{borderLeft:"3px solid #1160A8"},children:"Performance Summary"}),i.jsxs("div",{className:"bg-slate-50 p-3 rounded text-xs space-y-1",style:{border:"1px solid #1160A8"},children:[i.jsxs("div",{className:"flex justify-between py-0.5",style:{borderBottom:"1px solid #C7D7EA"},children:[i.jsx("span",{className:"font-semibold",children:"Total Score:"}),i.jsx("span",{children:f.totalScore})]}),i.jsxs("div",{className:"flex justify-between py-0.5",style:{borderBottom:"1px solid #C7D7EA"},children:[i.jsx("span",{className:"font-semibold",children:"Average:"}),i.jsx("span",{children:f.averageScore})]}),i.jsxs("div",{className:"flex justify-between py-0.5",style:{borderBottom:"1px solid #C7D7EA"},children:[i.jsx("span",{className:"font-semibold",children:"Grade:"}),i.jsx("span",{className:"font-bold",children:f.overallGrade})]}),i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{className:"font-semibold",children:"Position:"}),i.jsxs("span",{children:[f.classPosition," of ",f.totalStudents]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-primary-900 mb-1 pl-2",style:{borderLeft:"3px solid #1160A8"},children:"Skills & Behaviour"}),i.jsx("div",{className:"bg-slate-50 p-3 rounded text-xs space-y-1",style:{border:"1px solid #1160A8"},children:A&&Object.entries(A).map(([E,F])=>i.jsxs("div",{className:"flex justify-between py-0.5 last:border-0",style:{borderBottom:"1px solid #C7D7EA"},children:[i.jsxs("span",{className:"font-semibold capitalize",children:[E.replace(/([A-Z])/g," $1"),":"]}),i.jsx("span",{children:F})]},E))})]})," "]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("h3",{className:"text-sm font-bold text-primary-900 mb-1 pl-2",style:{borderLeft:"3px solid #1160A8"},children:"Remarks"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-slate-50 p-3 rounded text-xs min-h-[70px]",children:[i.jsx("h4",{className:"font-bold mb-0.5",children:"Class Teacher:"}),i.jsxs("p",{className:"italic",children:['"',m.teacher,'"']})]}),i.jsxs("div",{className:"bg-slate-50 p-2 rounded text-xs",children:[i.jsx("h4",{className:"font-bold mb-0.5",children:"Head Teacher:"}),i.jsxs("p",{className:"italic",children:['"',m.headTeacher,'"']})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-2 text-xs",children:[i.jsxs("div",{className:"bg-red-50 text-red-800 p-2 rounded text-center",children:[i.jsx("span",{className:"font-bold",children:"Promotion:"})," ",x.status]}),i.jsxs("div",{className:"bg-green-50 text-green-800 p-2 rounded text-center",children:[i.jsx("span",{className:"font-bold",children:"Next Term:"})," ",g.reopeningDate]}),i.jsxs("div",{className:"bg-slate-100 text-slate-700 p-2 rounded text-center",children:[i.jsx("span",{className:"font-bold",children:"Term Ends in:"})," ",g.vacationDate]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"border-t border-dotted border-slate-400 w-32 pt-1 text-xs font-semibold",children:"Class Teacher"})}),i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"w-16 h-16 border border-dashed border-slate-300 flex items-center justify-center",children:i.jsx("p",{className:"text-slate-400 text-[10px]",children:"Stamp"})})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"border-t border-dotted border-slate-400 w-32 pt-1 text-xs font-semibold",children:"Head Teacher"})})]})]}),i.jsx("div",{className:"flex justify-end mt-4",children:i.jsx("button",{onClick:N,disabled:e,className:`px-6 py-2 text-white rounded-lg flex items-center gap-2 transition-colors ${e?"bg-[#5C93C4] cursor-not-allowed":"bg-[#1160A8] hover:bg-[#0B4A82]"}`,children:e?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating PDF..."]}):i.jsxs(i.Fragment,{children:[i.jsx(AA,{className:"h-4 w-4"}),"Download PDF"]})})})]})},IV=s=>new Promise((e,t)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{try{const r=document.createElement("canvas");r.width=n.width,r.height=n.height;const o=r.getContext("2d");if(!o)return t(new Error("Canvas context not available"));o.drawImage(n,0,0);const c=r.toDataURL("image/png");e(c)}catch(r){t(r)}},n.onerror=()=>t(new Error("Failed to load image for base64")),n.src=s}),vC=s=>{let e=parseInt(s);if(!isNaN(e)&&e>=1&&e<=3)return e;const t=s.split(" ");return t.length>1&&(e=parseInt(t[1]),!isNaN(e)&&e>=1&&e<=3)?e:1},_V=500,FV=()=>{const{school:s}=dc(),e=(s==null?void 0:s.id)||null,[t,n]=Z.useState(Es[0].id),[r,o]=Z.useState([]),[c,h]=Z.useState(""),[u,f]=Z.useState(null),[A,m]=Z.useState(!1),[x,g]=Z.useState(""),[b,I]=Z.useState(!1),[N,C]=Z.useState(!1),E=async O=>{if(!e){o([]),h(""),f(null);return}n(O);const H=await ot.getStudents(e,O);o(H),h(""),f(null)},F=async()=>{var O,H,Q,U,R,$,P,V,G,ae,ue;if(!(!c||!e)){m(!0);try{const X=(await ot.getStudents(e,t)).find(mt=>mt.id===c),Y=await ot.getSchoolConfig(e),re=((H=(O=Y==null?void 0:Y.logoUrl)==null?void 0:O.trim)==null?void 0:H.call(O))||((U=(Q=Y==null?void 0:Y.logo)==null?void 0:Q.trim)==null?void 0:U.call(Q))||(($=(R=Y==null?void 0:Y.schoolLogo)==null?void 0:R.trim)==null?void 0:$.call(R))||"",pe=((V=(P=s==null?void 0:s.logoUrl)==null?void 0:P.trim)==null?void 0:V.call(P))||((ae=(G=s==null?void 0:s.logo)==null?void 0:G.trim)==null?void 0:ae.call(G))||"",ee=re||pe||"";let M=ee;if(ee&&ee.startsWith("http"))try{M=await IV(ee)}catch(mt){console.warn("Base64 conversion failed, using original URL:",mt),M=ee}const J=vC(Y.currentTerm),ie=Y.academicYear,le=`${c}_term${J}_${ie}`,ve=(await ot.getAllAssessments(e).then(mt=>mt.filter(Dt=>Dt.studentId===c))).filter(mt=>mt.term===J),Se=Object.values(ve.reduce((mt,Dt)=>{const Ns=Dt.subject;if(!Ns)return mt;const $t=mt[Ns],Wt=($t==null?void 0:$t.total)??0,lt=Dt.total??0;return(!$t||lt>=Wt)&&(mt[Ns]=Dt),mt},{})),ge=await ot.getStudentRemarks(e,t).then(mt=>mt.find(Dt=>Dt.studentId===c)),Be=await ot.getAdminRemark(e,le),Fe=await ot.getClassAttendance(e,t),Qe=new Set([...Fe.filter(mt=>mt.isHoliday).map(mt=>mt.date),...(Y.holidayDates||[]).map(mt=>mt.date)]),Ze=Fe.filter(mt=>!mt.isHoliday),Pe=await ot.getStudentSkills(e,t).then(mt=>mt.find(Dt=>Dt.studentId===c)),me=await ot.getUsers(e);let nt=0;if(Y.schoolReopenDate){const mt=new Date(`${Y.schoolReopenDate}T00:00:00`),Dt=Y.vacationDate?new Date(`${Y.vacationDate}T00:00:00`):null,Ns=new Date;Ns.setHours(0,0,0,0);const $t=Dt&&Dt<Ns?Dt:Ns;if(Number.isNaN(mt.getTime()))nt=Ze.length;else{const Wt=new Date(mt);for(;Wt<=$t;){const lt=Wt.getDay();if(!(lt===0||lt===6)){const De=`${Wt.getFullYear()}-${String(Wt.getMonth()+1).padStart(2,"0")}-${String(Wt.getDate()).padStart(2,"0")}`;Qe.has(De)||nt++}Wt.setDate(Wt.getDate()+1)}}}else nt=Ze.length;const It=Ze.filter(mt=>mt.presentStudentIds.includes(c)).length,ut=nt-It,ze=nt>0?Math.round(It/nt*100):0,Ft=me.find(mt=>{var Dt;return(Dt=mt.assignedClassIds)==null?void 0:Dt.includes(t)}),Qt=mt=>mt>=80?"A":mt>=70?"B":mt>=60?"C":mt>=45?"D":"F",Ct=await ot.getAllAssessments(e).then(mt=>mt.filter(Dt=>Dt.classId===t&&Dt.term===J)),Jt=r.map(mt=>{const Ns=Ct.filter($t=>$t.studentId===mt.id).reduce(($t,Wt)=>$t+(Wt.total||0),0);return{studentId:mt.id,totalScore:Ns}});Jt.sort((mt,Dt)=>Dt.totalScore-mt.totalScore);const ts=Jt.findIndex(mt=>mt.studentId===c)+1;g((Be==null?void 0:Be.remark)||"");const as=Se.reduce((mt,Dt)=>mt+(Dt.total||0),0),Xe=Es.findIndex(mt=>mt.id===(X==null?void 0:X.classId)),Vt=Xe>=0&&Xe<Es.length-1?Es[Xe+1].name:"",Kt=J===3?as>=_V?Vt?`Promoted to ${Vt}`:"Promoted":"Fail":"N/A",Mt={schoolInfo:{name:(s==null?void 0:s.name)||Y.schoolName||"School Manager GH",logoUrl:ee,address:(s==null?void 0:s.address)||Y.address||"",phone:(s==null?void 0:s.phone)||Y.phone||"",email:Y.email||"",academicYear:Y.academicYear||"",term:Y.currentTerm||""},studentInfo:{name:(X==null?void 0:X.name)||"",gender:(X==null?void 0:X.gender)||"",dob:(X==null?void 0:X.dob)||"",class:((ue=Es.find(mt=>mt.id===(X==null?void 0:X.classId)))==null?void 0:ue.name)||"",classTeacher:(Ft==null?void 0:Ft.fullName)||"N/A"},attendance:{totalDays:nt||0,presentDays:It||0,absentDays:ut||0,attendancePercentage:ze||0},performance:Se||[],summary:{totalScore:as||0,averageScore:Se.length>0?(Se.reduce((mt,Dt)=>mt+(Dt.total||0),0)/Se.length).toFixed(1):"0.0",overallGrade:Qt(Se.length>0?Se.reduce((mt,Dt)=>mt+(Dt.total||0),0)/Se.length:0)||"N/A",classPosition:`${ts}${["st","nd","rd"][ts-1]||"th"}`,totalStudents:r.length||0},skills:{punctuality:(Pe==null?void 0:Pe.punctuality)||"N/A",neatness:(Pe==null?void 0:Pe.neatness)||"N/A",conduct:(Pe==null?void 0:Pe.conduct)||"N/A",attitudeToWork:(Pe==null?void 0:Pe.attitudeToWork)||"N/A",classParticipation:(Pe==null?void 0:Pe.classParticipation)||"N/A",homeworkCompletion:(Pe==null?void 0:Pe.homeworkCompletion)||"N/A"},remarks:{teacher:(ge==null?void 0:ge.remark)||"N/A",headTeacher:(Be==null?void 0:Be.remark)||Y.headTeacherRemark||"An outstanding performance. The school is proud of you.",adminRemark:(Be==null?void 0:Be.remark)||"",adminRemarkDate:(Be==null?void 0:Be.dateCreated)||""},promotion:{status:Kt},termDates:{endDate:Y.termEndDate||"",reopeningDate:Y.nextTermBegins||"",vacationDate:Y.vacationDate||""},allStudentsAssessments:Ct};f(Mt),Pt("Report card generated successfully!",{type:"success"})}catch(oe){console.error("Error generating report card:",oe),Pt(`Failed to generate report card: ${oe.message||"An unknown error occurred."}`,{type:"error"})}finally{m(!1)}}},L=async()=>{if(!(!c||!x.trim()||!e)){C(!0);try{const O=await ot.getSchoolConfig(e),H=vC(O.currentTerm),Q={id:`${c}_term${H}_${O.academicYear}`,studentId:c,classId:t,term:H,academicYear:O.academicYear,schoolId:e,remark:x,adminId:"admin",dateCreated:new Date().toISOString().split("T")[0]};await ot.saveAdminRemark(Q),I(!1),F()}catch(O){console.error("Error saving admin remark:",O)}finally{C(!1)}}};return Z.useEffect(()=>{(async()=>{try{await E(t)}catch(H){console.error("Error in useEffect:",H)}})()},[e]),i.jsxs(lr,{title:"Generate Report Card",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Select Student"}),i.jsxs("div",{className:"flex gap-4 mb-4",children:[i.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm bg-white text-black",value:t,onChange:O=>E(O.target.value),children:Es.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))}),i.jsxs("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm bg-white text-black flex-grow",value:c,onChange:O=>h(O.target.value),disabled:!r.length,children:[i.jsx("option",{value:"",children:"-- Select a student --"}),r.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsx("button",{onClick:F,disabled:!c||A,className:"px-6 py-2 bg-[#1160A8] text-white rounded-lg hover:bg-[#0B4A82] disabled:opacity-50",children:A?"Generating...":"Generate Report"})]}),u&&i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"bg-[#E6F0FA] border border-[#E6F0FA] rounded-xl p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#0B4A82] flex items-center gap-2",children:[i.jsx(fM,{className:"w-5 h-5"}),"Admin/Head Teacher Remark"]}),b?i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>I(!1),className:"flex items-center gap-1 px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600",children:[i.jsx(_o,{className:"w-4 h-4"}),"Cancel"]}),i.jsxs("button",{onClick:L,disabled:N,className:"flex items-center gap-1 px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:[i.jsx(AA,{className:"w-4 h-4"}),N?"Saving...":"Save"]})]}):i.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-1 px-3 py-1 text-sm bg-[#1160A8] text-white rounded hover:bg-[#0B4A82]",children:[i.jsx(xM,{className:"w-4 h-4"}),"Edit Remark"]})]}),b?i.jsx("textarea",{value:x,onChange:O=>g(O.target.value),className:"w-full border border-[#E6F0FA] rounded-lg p-3 text-black bg-white",rows:3,placeholder:"Enter admin/head teacher remark..."}):i.jsx("p",{className:"text-[#0B4A82] italic",children:x||"No remark added yet"})]}),i.jsx(TV,{data:u})]})]})};class UV{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebasestorage.googleapis.com",DV="storageBucket",RV=120*1e3,LV=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends uc{constructor(e,t,n=0){super(j1(e),`Firebase Storage: ${t} (${j1(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tu.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return j1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qc;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qc||(qc={}));function j1(s){return"storage/"+s}function QV(){const s="An unknown error occurred, please check the error payload for server response.";return new tu(qc.UNKNOWN,s)}function OV(){return new tu(qc.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PV(){return new tu(qc.CANCELED,"User canceled the upload/download.")}function kV(s){return new tu(qc.INVALID_URL,"Invalid URL '"+s+"'.")}function MV(s){return new tu(qc.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function yC(s){return new tu(qc.INVALID_ARGUMENT,s)}function LI(){return new tu(qc.APP_DELETED,"The Firebase app was deleted.")}function HV(s){return new tu(qc.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ic.makeFromUrl(e,t)}catch{return new ic(e,"")}if(n.path==="")return n;throw MV(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function o(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+r+c,"i"),u={bucket:1,path:3};function f(L){L.path_=decodeURIComponent(L.path)}const A="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",g=new RegExp(`^https?://${m}/${A}/b/${r}/o${x}`,"i"),b={bucket:1,path:3},I=t===RI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",C=new RegExp(`^https?://${I}/${r}/${N}`,"i"),F=[{regex:h,indices:u,postModify:o},{regex:g,indices:b,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let L=0;L<F.length;L++){const O=F[L],H=O.regex.exec(e);if(H){const Q=H[O.indices.bucket];let U=H[O.indices.path];U||(U=""),n=new ic(Q,U),O.postModify(n);break}}if(n==null)throw kV(e);return n}}class VV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(s,e,t){let n=1,r=null,o=null,c=!1,h=0;function u(){return h===2}let f=!1;function A(...N){f||(f=!0,e.apply(null,N))}function m(N){r=setTimeout(()=>{r=null,s(g,u())},N)}function x(){o&&clearTimeout(o)}function g(N,...C){if(f){x();return}if(N){x(),A.call(null,N,...C);return}if(u()||c){x(),A.call(null,N,...C);return}n<64&&(n*=2);let F;h===1?(h=2,F=0):F=(n+Math.random())*1e3,m(F)}let b=!1;function I(N){b||(b=!0,x(),!f&&(r!==null?(N||(h=2),clearTimeout(r),m(0)):N||(h=1)))}return m(0),o=setTimeout(()=>{c=!0,I(!0)},t),I}function zV(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(s){return s!==void 0}function bC(s,e,t,n){if(n<e)throw yC(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw yC(`Invalid value for '${s}'. Expected ${t} or less.`)}function $V(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const r=e(n)+"="+e(s[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var iv;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(iv||(iv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(s,e){const t=s>=500&&s<600,r=[408,429].indexOf(s)!==-1,o=e.indexOf(s)!==-1;return t||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,t,n,r,o,c,h,u,f,A,m,x=!0,g=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=A,this.connectionFactory_=m,this.retry=x,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,I)=>{this.resolve_=b,this.reject_=I,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new nx(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const u=h.loaded,f=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===iv.NO_ERROR,u=o.getStatus();if(!h||YV(u,this.additionalRetryCodes_)&&this.retry){const A=o.getErrorCode()===iv.ABORT;n(!1,new nx(!1,null,A));return}const f=this.successCodes_.indexOf(u)!==-1;n(!0,new nx(f,o))})},t=(n,r)=>{const o=this.resolve_,c=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(h,h.getResponse());GV(u)?o(u):o()}catch(u){c(u)}else if(h!==null){const u=QV();u.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,u)):c(u)}else if(r.canceled){const u=this.appDelete_?LI():PV();c(u)}else{const u=OV();c(u)}};this.canceled_?t(!1,new nx(!1,null,!0)):this.backoffId_=KV(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nx{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function XV(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function JV(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qV(s,e){e&&(s["X-Firebase-GMPID"]=e)}function ZV(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function eK(s,e,t,n,r,o,c=!0,h=!1){const u=$V(s.urlParams),f=s.url+u,A=Object.assign({},s.headers);return qV(A,e),XV(A,t),JV(A,o),ZV(A,n),new WV(f,s.method,A,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,r,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function sK(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){this._service=e,t instanceof ic?this._location=t:this._location=ic.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ov(e,t)}get root(){const e=new ic(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sK(this._location.path)}get storage(){return this._service}get parent(){const e=tK(this._location.path);if(e===null)return null;const t=new ic(this._location.bucket,e);return new ov(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw HV(e)}}function wC(s,e){const t=e==null?void 0:e[DV];return t==null?null:ic.makeFromBucketSpec(t,s)}class nK{constructor(e,t,n,r,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=RI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=RV,this._maxUploadRetryTime=LV,this._requests=new Set,r!=null?this._bucket=ic.makeFromBucketSpec(r,this._host):this._bucket=wC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ic.makeFromBucketSpec(this._url,e):this._bucket=wC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(iA(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ov(this,e)}_makeRequest(e,t,n,r,o=!0){if(this._deleted)return new VV(LI());{const c=eK(e,this._appId,n,r,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const jC="@firebase/storage",BC="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK="storage";function aK(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),r=s.getProvider("app-check-internal");return new nK(t,n,r,e,of)}function iK(){Hd(new UV(rK,aK,"PUBLIC").setMultipleInstances(!0)),UA(jC,BC,""),UA(jC,BC,"esm2020")}iK();const SC=s=>{const e=s.toLowerCase();return e.includes("nursery")?"Nursery":e.startsWith("kg")||e.includes("kg")?"KG":/class\s*[1-3]\b/i.test(s)?"Class 1-3":/class\s*[4-6]\b/i.test(s)?"Class 4-6":/jhs\s*[1-3]\b/i.test(s)?"JHS 1-3":"Other"},oK=()=>{var as;const{user:s}=Uo(),e=FT(s),[t,n]=Z.useState([]),[r,o]=Z.useState(""),[c,h]=Z.useState(new Date().toISOString().split("T")[0]),[u,f]=Z.useState("info"),[A,m]=Z.useState(!1),[x,g]=Z.useState(((as=Es[0])==null?void 0:as.id)||""),[b,I]=Z.useState([]),[N,C]=Z.useState(""),[E,F]=Z.useState(null),[L,O]=Z.useState({schoolId:e,schoolName:"",academicYear:"",currentTerm:"",schoolReopenDate:"",vacationDate:"",nextTermBegins:"",termTransitionProcessed:!1,headTeacherRemark:"",termEndDate:"",holidayDates:[]}),[H,Q]=Z.useState(!1),[U,R]=Z.useState(!1),[$,P]=Z.useState(""),[V,G]=Z.useState(""),[ae,ue]=Z.useState(!1),[oe,X]=Z.useState(!1),[Y,re]=Z.useState(!1),[pe,ee]=Z.useState(!1),[M,J]=Z.useState(null),[ie,le]=Z.useState(!1),ce=Ph.useMemo(()=>{const Xe={Nursery:[],KG:[],"Class 1-3":[],"Class 4-6":[],"JHS 1-3":[],Other:[]};return Es.forEach(Vt=>{const Kt=SC(Vt.name);Xe[Kt].push(Vt)}),Xe},[]),ve=Xe=>{const Vt=Es.find(mt=>mt.id===Xe);if(!Vt)return[Xe];const Kt=SC(Vt.name),Mt=ce[Kt];return(Mt!=null&&Mt.length?Mt:[Vt]).map(mt=>mt.id)},Se=async()=>{const Xe=await ot.getNotices(e);n(Xe)},ge=async()=>{if(x){const Xe=await ot.getSubjects(e,x);I(Xe)}},Be=async()=>{const Xe=await ot.getSchoolConfig(e);O(Vt=>({...Vt,schoolId:e,...Xe,holidayDates:Xe.holidayDates||[]}))};Z.useEffect(()=>{Se(),Be()},[e]),Z.useEffect(()=>{ge()},[x,e]);const Fe=async()=>{Q(!0),await ot.updateSchoolConfig({...L,holidayDates:L.holidayDates||[]}),Q(!1),Pt("Configuration saved successfully!",{type:"success"})},Qe=async()=>{if(!$)return;const Xe=V.trim(),Vt=L.holidayDates||[];if(Vt.some(Mt=>Mt.date===$)){Pt("Holiday date already exists.",{type:"error"});return}const Kt={...L,holidayDates:[...Vt,{date:$,reason:Xe||void 0}].sort((Mt,mt)=>Mt.date.localeCompare(mt.date))};O(Kt),await ot.updateSchoolConfig({...Kt,holidayDates:Kt.holidayDates||[]}),Pt("Holiday date saved.",{type:"success"}),P(""),G("")},Ze=async Xe=>{const Vt=L.holidayDates||[],Kt={...L,holidayDates:Vt.filter(Mt=>Mt.date!==Xe)};O(Kt),await ot.updateSchoolConfig({...Kt,holidayDates:Kt.holidayDates||[]}),Pt("Holiday date removed.",{type:"success"})},Pe=async()=>{R(!0);try{await ot.createTermBackup(L,L.currentTerm,L.academicYear),Pt("Term backup created successfully!",{type:"success"})}catch(Xe){console.error("Error creating term backup:",Xe),Pt("Failed to create term backup. Please try again.",{type:"error"})}finally{R(!1)}},me=async Xe=>{if(Xe.preventDefault(),!(!r.trim()||!c)){m(!0);try{const[Vt,Kt,Mt]=c.split("-").map(Number),Dt=new Date(Vt,Kt-1,Mt).toLocaleDateString("en-GB",{day:"numeric",month:"short"});await ot.addNotice({id:Math.random().toString(36).substr(2,9),schoolId:e,message:r,date:Dt,type:u,createdAt:Date.now()}),o(""),Se(),Pt("Notice added successfully!",{type:"success"})}catch(Vt){console.error("Error adding notice:",Vt),Pt("Failed to add notice. Please try again.",{type:"error"})}finally{m(!1)}}},nt=async Xe=>{await ot.deleteNotice(Xe),Se()},It=async Xe=>{if(Xe.preventDefault(),!N.trim()||!x)return;const Vt=ve(x);await Promise.all(Vt.map(Kt=>ot.addSubject(Kt,N.trim(),e))),C(""),ge(),Pt("Subject added successfully!",{type:"success"})},ut=Xe=>{J(Xe),ee(!0)},ze=async()=>{if(!(!M||!x)){ee(!1);try{const Xe=ve(x);await Promise.all(Xe.map(Vt=>ot.deleteSubject(Vt,M,e))),ge(),Pt(`Subject "${M}" deleted successfully!`,{type:"success"})}catch(Xe){console.error("Error deleting subject:",Xe),Pt("Failed to delete subject. Please try again.",{type:"error"})}finally{J(null)}}},Ft=Xe=>{F({original:Xe,current:Xe})},Qt=async()=>{if(!E||!E.current.trim()||!x)return;const Xe=ve(x);await Promise.all(Xe.map(Vt=>ot.updateSubject(Vt,E.original,E.current.trim(),e))),F(null),ge(),Pt("Subject updated successfully!",{type:"success"})},Ct=()=>{re(!0)},Jt=async Xe=>{const Vt=Rs(wt,Xe),Mt=(await qs(Vt)).docs.map(mt=>zi(mt.ref));await Promise.all(Mt)},ts=async()=>{re(!1),X(!0);try{const Xe=["attendance","assessments","teacher_attendance","notices","student_remarks","admin_remarks","student_skills","admin_notifications"];for(const Kt of Xe)console.log(`Deleting collection: ${Kt}`),await Jt(Kt);const Vt=Os(wt,"settings",e);await Vi(Vt,{schoolReopenDate:"",vacationDate:"",nextTermBegins:""},{merge:!0}),Pt("Term data reset successfully!",{type:"success"}),window.location.reload()}catch(Xe){console.error("Term Reset error:",Xe),Pt(`Term Reset Failed: ${Xe.message}`,{type:"error"})}finally{X(!1)}};return i.jsxs(lr,{title:"System Settings",children:[i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-50 via-white to-emerald-50 p-6 shadow-sm",children:[i.jsx("div",{className:"absolute -top-16 -right-16 h-40 w-40 rounded-full bg-indigo-200/40 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-20 -left-16 h-48 w-48 rounded-full bg-emerald-200/40 blur-3xl"}),i.jsxs("div",{className:"relative flex flex-col gap-2",children:[i.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[i.jsx("span",{className:"h-10 w-10 rounded-2xl bg-indigo-100 text-indigo-700 flex items-center justify-center",children:i.jsx(i2,{size:20})}),"System Settings"]}),i.jsx("p",{className:"text-sm text-slate-600",children:"Configure academic terms, subjects, notices, and backups with a premium control center."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"General Configuration"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Academic year, term, and key school dates."})]}),i.jsxs("button",{onClick:Fe,disabled:H,className:"flex items-center text-xs font-bold text-white bg-emerald-600 hover:bg-emerald-700 px-4 py-2 rounded-full transition-colors",children:[i.jsx(AA,{size:14,className:"mr-1"})," ",H?"Saving...":"Save Changes"]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Academic Year"}),i.jsx("input",{type:"text",value:L.academicYear,onChange:Xe=>O({...L,academicYear:Xe.target.value}),className:"w-full border border-slate-200 p-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Current Term"}),i.jsxs("select",{value:L.currentTerm,onChange:Xe=>O({...L,currentTerm:Xe.target.value}),className:"w-full border border-slate-200 p-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none",children:[i.jsx("option",{value:"Term 1",children:"Term 1"}),i.jsx("option",{value:"Term 2",children:"Term 2"}),i.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),i.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[i.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"School Information"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"School Re-open Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400 pointer-events-none"}),i.jsx("input",{type:"date",value:L.schoolReopenDate,onChange:Xe=>O({...L,schoolReopenDate:Xe.target.value}),className:"w-full border border-slate-200 pl-10 pr-3 py-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Term Vacation Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400 pointer-events-none"}),i.jsx("input",{type:"date",value:L.vacationDate,onChange:Xe=>O({...L,vacationDate:Xe.target.value}),className:"w-full border border-slate-200 pl-10 pr-3 py-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Next Term Begins"}),i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400 pointer-events-none"}),i.jsx("input",{type:"date",value:L.nextTermBegins||"",onChange:Xe=>O({...L,nextTermBegins:Xe.target.value}),className:"w-full border border-slate-200 pl-10 pr-3 py-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none"})]})]})]}),i.jsxs("div",{className:"mt-6 rounded-2xl border border-amber-200 bg-amber-50/60 p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-amber-900 font-semibold",children:[i.jsx(Wi,{className:"h-5 w-5"}),"Holiday Dates (exclude from term totals)"]}),i.jsx("p",{className:"mt-1 text-xs text-amber-800",children:"Add dates here to remove them from term total days and attendance analytics."}),i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-[180px_1fr_auto] gap-3 items-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-2.5 w-4 h-4 text-amber-400 pointer-events-none"}),i.jsx("input",{type:"date",value:$,onChange:Xe=>P(Xe.target.value),className:"w-full border border-amber-200 pl-10 pr-3 py-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-amber-200 outline-none"})]}),i.jsx("input",{type:"text",value:V,onChange:Xe=>G(Xe.target.value),placeholder:"Reason (optional) e.g. Independence Day",className:"w-full border border-amber-200 px-3 py-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-amber-200 outline-none"}),i.jsxs("button",{type:"button",onClick:Qe,className:"inline-flex items-center justify-center gap-2 rounded-full bg-amber-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-700",children:[i.jsx($h,{size:16}),"Add"]})]}),i.jsx("div",{className:"mt-4 space-y-2",children:(L.holidayDates||[]).length===0?i.jsx("div",{className:"text-xs text-amber-700",children:"No holiday dates added yet."}):(L.holidayDates||[]).map(Xe=>i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-amber-200 bg-white px-3 py-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-amber-900",children:Xe.date}),Xe.reason&&i.jsx("p",{className:"text-xs text-amber-700",children:Xe.reason})]}),i.jsxs("button",{type:"button",onClick:()=>Ze(Xe.date),className:"inline-flex items-center gap-1 text-xs font-semibold text-rose-600 hover:text-rose-700",children:[i.jsx(RA,{size:14}),"Remove"]})]},Xe.date))})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[i.jsx(xk,{className:"mr-2 text-[#0B4A82]",size:24}),"Manage Class Subjects"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Class"}),i.jsx("select",{value:x,onChange:Xe=>g(Xe.target.value),className:"w-full border border-slate-200 p-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-[#1160A8] outline-none",children:["Nursery","KG","Class 1-3","Class 4-6","JHS 1-3","Other"].map(Xe=>{var Vt;return(Vt=ce[Xe])!=null&&Vt.length?i.jsx("optgroup",{label:Xe,children:ce[Xe].map(Kt=>i.jsx("option",{value:Kt.id,children:Kt.name},Kt.id))},Xe):null})})]}),i.jsxs("form",{onSubmit:It,className:"flex gap-2 mb-6",children:[i.jsx("input",{type:"text",required:!0,className:"flex-1 border border-slate-200 p-2.5 rounded-xl focus:ring-2 focus:ring-[#1160A8] outline-none text-sm",placeholder:"New subject name...",value:N,onChange:Xe=>C(Xe.target.value)}),i.jsx("button",{type:"submit",className:"bg-[#1160A8] text-white px-4 py-2 rounded-xl hover:bg-[#0B4A82] transition-colors",children:i.jsx($h,{size:20})})]}),i.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:b.length===0?i.jsx("p",{className:"text-sm text-slate-500 text-center italic",children:"No subjects configured for this class. Add some above!"}):b.map(Xe=>i.jsx("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-xl border border-slate-100 group",children:(E==null?void 0:E.original)===Xe?i.jsxs("div",{className:"flex items-center flex-1 gap-2",children:[i.jsx("input",{type:"text",className:"flex-1 border border-slate-200 p-2 rounded-lg text-sm focus:ring-2 focus:ring-[#1160A8] outline-none",value:E.current,onChange:Vt=>F({...E,current:Vt.target.value}),autoFocus:!0}),i.jsx("button",{onClick:Qt,className:"text-emerald-600 hover:bg-emerald-50 p-1 rounded",children:i.jsx($p,{size:16})}),i.jsx("button",{onClick:()=>F(null),className:"text-[#1160A8] hover:bg-[#E6F0FA] p-1 rounded",children:i.jsx(_o,{size:16})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:Xe}),i.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>Ft(Xe),className:"text-slate-400 hover:text-[#1160A8] p-1.5 hover:bg-[#E6F0FA] rounded-md transition-colors",children:i.jsx(l2,{size:14})}),i.jsx("button",{onClick:()=>ut(Xe),className:"text-slate-400 hover:text-[#1160A8] p-1.5 hover:bg-[#E6F0FA] rounded-md transition-colors",children:i.jsx(RA,{size:14})})]})]})},Xe))})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[i.jsx(AA,{className:"mr-2 text-purple-600",size:24}),"Term Data Backup"]}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:`Create a full backup of the current term's academic records, attendance, and student data. Backups can be viewed and restored from the "Manage Backups" section.`}),i.jsx("button",{onClick:Pe,disabled:U,className:"bg-purple-600 text-white px-4 py-2 rounded-full hover:bg-purple-700 transition-colors flex items-center disabled:opacity-70 disabled:cursor-not-allowed",children:U?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Creating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(AA,{size:16,className:"mr-2"})," Create Current Term Backup"]})}),i.jsxs(Ua,{to:"/admin/backups",className:"mt-4 inline-flex items-center text-sm font-medium text-[#1160A8] hover:text-[#0B4A82]",children:[i.jsx(qk,{size:16,className:"mr-1"})," View and Manage Previous Backups"]})]}),ae&&i.jsxs("div",{className:"bg-rose-50 border border-rose-200 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(o2,{className:"text-rose-600 mr-2",size:24}),i.jsx("h2",{className:"text-xl font-bold text-rose-800",children:"Danger Zone: Database Reset"})]}),i.jsx("p",{className:"text-rose-700 mb-4",children:"This will reset term data (attendance, assessments, reports, and term-specific records) for the selected term. It does not delete school accounts or core setup, but the term data cannot be recovered. Use with extreme caution."}),i.jsx("div",{className:"flex flex-col space-y-4",children:i.jsx("button",{onClick:Ct,disabled:oe,className:"bg-rose-600 text-white px-4 py-2 rounded-full hover:bg-rose-700 disabled:bg-rose-400 transition-colors",children:oe?"Resetting Term...":"Term Reset"})})]}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{onClick:()=>ue(!ae),className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm transition-all hover:border-[#1160A8] hover:text-[#0B4A82] hover:shadow-md",children:[i.jsx("span",{className:`flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold transition-colors ${ae?"bg-rose-100 text-rose-600":"bg-[#E6F0FA] text-[#0B4A82]"}`,children:ae?"":"+"}),ae?"Hide":"Show"," Advanced Settings"]})})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6 flex flex-col h-full",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[i.jsx(cM,{className:"mr-2 text-emerald-600",size:24}),"School Notices"]}),i.jsxs("form",{onSubmit:me,className:"mb-6 bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"date",required:!0,className:"w-full border border-slate-200 pl-10 pr-3 py-2.5 rounded-xl focus:ring-2 focus:ring-emerald-200 outline-none text-sm",value:c,onChange:Xe=>h(Xe.target.value)})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notice Message"}),i.jsx("textarea",{required:!0,className:"w-full border border-slate-200 p-2.5 rounded-xl focus:ring-2 focus:ring-emerald-200 outline-none text-sm",placeholder:"Type notice here...",rows:2,value:r,onChange:Xe=>o(Xe.target.value)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("label",{className:"flex items-center text-sm cursor-pointer",children:[i.jsx("input",{type:"radio",name:"type",className:"mr-2 text-emerald-600 focus:ring-emerald-500",checked:u==="info",onChange:()=>f("info")}),"Info"]}),i.jsxs("label",{className:"flex items-center text-sm cursor-pointer",children:[i.jsx("input",{type:"radio",name:"type",className:"mr-2 text-red-600 focus:ring-red-500",checked:u==="urgent",onChange:()=>f("urgent")}),"Urgent"]})]}),i.jsx("button",{type:"submit",disabled:A,className:"bg-emerald-600 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-emerald-700 transition-colors flex items-center disabled:opacity-70 disabled:cursor-not-allowed",children:A?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-1"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx($h,{size:16,className:"mr-1"})," Add Notice"]})})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-3",children:"Active Notices"}),i.jsx("div",{className:"space-y-3",children:t.length===0?i.jsx("p",{className:"text-slate-400 text-sm text-center italic",children:"No notices posted."}):t.map(Xe=>i.jsxs("div",{className:"flex justify-between items-start group p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition-colors",children:[i.jsxs("div",{className:`border-l-2 pl-3 ${Xe.type==="urgent"?"border-red-500":"border-emerald-500"}`,children:[i.jsx("p",{className:"text-sm text-slate-800 font-medium",children:Xe.message}),i.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[Xe.date," "," ",Xe.type==="urgent"?"Urgent":"General Info"]})]}),i.jsx("button",{onClick:()=>nt(Xe.id),className:"text-slate-300 hover:text-[#1160A8] transition-colors p-1",title:"Delete Notice",children:i.jsx(RA,{size:16})})]},Xe.id))})]})]})]})]}),Y&&i.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-30 flex items-center justify-center z-50 transition-opacity duration-300",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4 transform transition-all duration-300 scale-100",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Wi,{className:"text-red-600 mr-3",size:32}),i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirm Term Reset"})]}),i.jsxs("div",{className:"text-slate-600 mb-6 space-y-2",children:[i.jsxs("p",{children:["This will reset all data for the current term, but"," ",i.jsx("strong",{children:"keep core school setup"}),". Are you sure you want to proceed?"]}),i.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"RESET:"})," Attendance, Assessments, Teacher Attendance, Notices, and all student Remarks."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"KEEP:"})," Student Enrollment, Teacher Accounts, Class Subjects, and Timetables."]})]}),i.jsx("p",{className:"font-semibold text-red-700",children:"This action cannot be undone."})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>re(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:ts,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Confirm Term Reset"})]})]})}),pe&&M&&i.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-30 flex items-center justify-center z-50 transition-opacity duration-300",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-100",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Wi,{className:"text-red-600 mr-3",size:32}),i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Delete Subject"})]}),i.jsxs("p",{className:"text-slate-600 mb-6",children:['Are you sure you want to delete the subject "',i.jsx("strong",{children:M}),'"? This might hide scores associated with this subject and cannot be undone.']}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{ee(!1),J(null)},className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:ze,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Subject"})]})]})})]})},lK=s=>{if(!s)return"CLASS";const e=Es.find(t=>t.id===s);return e&&e.level?e.level:s.startsWith("c_n")?"NURSERY":s.startsWith("c_kg")?"KG":s.startsWith("c_p")?"PRIMARY":s.startsWith("c_jhs")?"JHS":"CLASS"},AK=()=>{var ue,oe,X,Y,re,pe,ee,M;const{school:s}=dc(),e=(s==null?void 0:s.id)||null,[t,n]=Z.useState([]),[r,o]=Z.useState(!0),[c,h]=Z.useState(null),[u,f]=Z.useState(""),[A,m]=Z.useState(""),[x,g]=Z.useState(""),[b,I]=Z.useState(null),[N,C]=Z.useState(!1),[E,F]=Z.useState(null),[L,O]=Z.useState(!1),[H,Q]=Z.useState(!1),U=Z.useMemo(()=>{var Be;if(!((Be=b==null?void 0:b.data)!=null&&Be.students))return[];const J=b.data.students||[],ie=b.data.attendanceRecords||[],le=b.data.assessments||[],ce=b.data.studentRemarks||[],ve=ie.reduce((Fe,Qe)=>(Fe[Qe.classId]||(Fe[Qe.classId]=[]),Fe[Qe.classId].push(Qe),Fe),{}),Se=le.reduce((Fe,Qe)=>{const Ze=typeof Qe.total=="number"?Qe.total:_A(Qe);return Fe[Qe.studentId]||(Fe[Qe.studentId]={total:0,count:0}),Fe[Qe.studentId].total+=Ze,Fe[Qe.studentId].count+=1,Fe},{}),ge=ce.reduce((Fe,Qe)=>{const Ze=Fe[Qe.studentId];if(!Ze)return Fe[Qe.studentId]=Qe,Fe;const Pe=new Date(Ze.dateCreated).getTime();return new Date(Qe.dateCreated).getTime()>=Pe&&(Fe[Qe.studentId]=Qe),Fe},{});return J.map(Fe=>{var ze;const Qe=ve[Fe.classId]||[],Ze=Qe.filter(Ft=>{var Qt;return(Qt=Ft.presentStudentIds)==null?void 0:Qt.includes(Fe.id)}).length,Pe=Qe.length,me=Pe?`${Math.round(Ze/Pe*100)}%`:"-",nt=Se[Fe.id],It=nt!=null&&nt.count?(nt.total/nt.count).toFixed(1):"-",ut=((ze=ge[Fe.id])==null?void 0:ze.remark)||"N/A";return{student:Fe,presentDays:Ze,totalDays:Pe,attendanceRate:me,avgScore:It,remark:ut}})},[b]),R=async J=>{o(!0),h(null);try{if(!e){n([]);return}const ie={schoolId:e,term:(J==null?void 0:J.term)||void 0,academicYear:(J==null?void 0:J.academicYear)||void 0,date:(J==null?void 0:J.date)||void 0},le=await ot.getBackups(ie);n(le)}catch(ie){console.error("Error fetching backups:",ie),h("Failed to fetch backups."),Pt("Failed to fetch backups.",{type:"error"})}finally{o(!1)}},$=async J=>{try{if(!e)return;const ie=await ot.getBackupDetails(e,J);ie?(I(ie),C(!0)):Pt("Backup details not found.",{type:"error"})}catch(ie){console.error("Error fetching backup details:",ie),Pt("Failed to fetch backup details.",{type:"error"})}},P=J=>{F(J),O(!0)},V=async J=>{try{if(!e)return;const ie=await ot.getBackupDetails(e,J);if(ie&&ie.data){const le=`backup_${ie.academicYear.replace("-","")}_${ie.term.replace(" ","")}_${ie.timestamp}.json`,ce=JSON.stringify(ie.data,null,2),ve=new Blob([ce],{type:"application/json"}),Se=URL.createObjectURL(ve),ge=document.createElement("a");ge.href=Se,ge.download=le,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(Se),Pt("Backup downloaded successfully!",{type:"success"})}else Pt("No data available to download for this backup.",{type:"error"})}catch(ie){console.error("Error downloading backup:",ie),Pt("Failed to download backup.",{type:"error"})}},G=async()=>{if(E){console.log("Attempting to delete backup:",E);try{if(!e)return;await ot.deleteBackup(e,E),console.log("Backup deleted successfully in DB."),Pt("Backup deleted successfully!",{type:"success"}),O(!1),F(null),f(""),m(""),g(""),await R(),console.log("Backup list refreshed after deletion.")}catch(J){console.error("Error during backup deletion or refresh:",J),Pt("Failed to delete backup or refresh list.",{type:"error"})}}},ae=async()=>{Q(!1);try{if(!e)return;await ot.deleteAllBackups(e),Pt("All backups cleared successfully!",{type:"success"}),f(""),m(""),g(""),await R()}catch(J){console.error("Error clearing all backups:",J),Pt("Failed to clear all backups.",{type:"error"})}};return Z.useEffect(()=>{R()},[e]),r?i.jsx(lr,{title:"Manage Backups",children:i.jsxs("div",{className:"flex justify-center items-center h-48",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-300 border-t-[#0B4A82]"}),i.jsx("p",{className:"ml-4 text-slate-500",children:"Loading backups..."})]})}):c?i.jsx(lr,{title:"Manage Backups",children:i.jsxs("div",{className:"text-center p-8 bg-[#E6F0FA] border border-[#E6F0FA] rounded-lg",children:[i.jsx("p",{className:"text-[#0B4A82]",children:c}),i.jsxs("button",{onClick:()=>R(),className:"mt-4 px-4 py-2 bg-[#0B4A82] text-white rounded hover:bg-[#0B4A82]",children:[i.jsx(kT,{className:"inline-block mr-2",size:16})," Retry"]})]})}):i.jsxs(lr,{title:"Manage Backups",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Manage Term Backups"}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Backup Filters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filterTerm",className:"block text-sm font-medium text-slate-700 mb-1",children:"Term"}),i.jsxs("select",{id:"filterTerm",value:u,onChange:J=>f(J.target.value),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-[#1160A8] outline-none",children:[i.jsx("option",{value:"",children:"All Terms"}),i.jsx("option",{value:"Term 1",children:"Term 1"}),i.jsx("option",{value:"Term 2",children:"Term 2"}),i.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filterAcademicYear",className:"block text-sm font-medium text-slate-700 mb-1",children:"Academic Year"}),i.jsx("input",{id:"filterAcademicYear",type:"text",value:A,onChange:J=>m(J.target.value),placeholder:"e.g., 2023-2024",className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-[#1160A8] outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filterDate",className:"block text-sm font-medium text-slate-700 mb-1",children:"Date Created (YYYY-MM-DD)"}),i.jsx("input",{id:"filterDate",type:"date",value:x,onChange:J=>g(J.target.value),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-[#1160A8] outline-none"})]})]}),i.jsxs("button",{onClick:()=>R({term:u,academicYear:A,date:x}),className:"px-4 py-2 bg-[#1160A8] text-white rounded-lg hover:bg-[#0B4A82] transition-colors flex items-center",children:[i.jsx(PT,{size:16,className:"mr-2"})," Apply Filters"]}),i.jsx("button",{onClick:()=>{f(""),m(""),g(""),R()},className:"ml-2 px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors",children:"Clear Filters"}),i.jsx("button",{onClick:()=>Q(!0),className:"ml-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Clear All Backups"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Available Backups"}),t.length===0?i.jsx("div",{className:"text-center p-8 text-slate-500",children:i.jsx("p",{children:"No backups found. Create one from System Settings."})}):i.jsx("div",{className:"space-y-4",children:t.map((J,ie)=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[J.term," - ",J.academicYear]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Created: ",new Date(J.timestamp).toLocaleString()]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>$(J.id||""),className:"px-3 py-1 bg-[#E6F0FA] text-[#0B4A82] rounded-md text-sm hover:bg-[#E6F0FA] flex items-center",title:"View Backup Details",children:[i.jsx(Lu,{size:16,className:"mr-1"})," View"]}),i.jsxs("button",{onClick:()=>V(J.id||""),className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-md text-sm hover:bg-emerald-200 flex items-center",title:"Download Backup",children:[i.jsx(sv,{size:16,className:"mr-1"})," Download"]}),i.jsxs("button",{onClick:()=>P(J.id||""),className:"px-3 py-1 bg-[#E6F0FA] text-[#0B4A82] rounded-md text-sm hover:bg-[#E6F0FA] flex items-center",title:"Delete Backup",children:[i.jsx(RA,{size:16,className:"mr-1"})," Delete"]})]})]},J.id||`backup-${ie}`))})]}),N&&b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["Backup Details: ",b.term," -"," ",b.academicYear]}),i.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-slate-700",children:i.jsx(_o,{size:20})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#E6F0FA] to-amber-50 rounded-xl p-4 mb-6 border border-[#E6F0FA]",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-[#E6F0FA] rounded-full",children:i.jsx(ac,{className:"text-[#0B4A82]",size:24})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Backup Created"}),i.jsx("p",{className:"text-lg font-bold text-slate-800",children:new Date(b.timestamp).toLocaleString()})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Backup ID"}),i.jsxs("p",{className:"text-sm font-mono text-slate-700",children:[(ue=b.id)==null?void 0:ue.slice(0,8),"..."]})]})]})}),b.data?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:i.jsx(mm,{className:"text-amber-600",size:20})}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Students"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:((oe=b.data.students)==null?void 0:oe.length)||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-2 bg-[#E6F0FA] rounded-lg",children:i.jsx(xl,{className:"text-[#0B4A82]",size:20})}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Teachers"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:((X=b.data.users)==null?void 0:X.length)||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(zl,{className:"text-emerald-600",size:20})}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Assessments"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:((Y=b.data.assessments)==null?void 0:Y.length)||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(mo,{className:"text-purple-600",size:20})}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Attendance"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:((re=b.data.attendanceRecords)==null?void 0:re.length)||0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Gh,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Teacher Attendance"})]}),i.jsxs("p",{className:"text-lg font-bold text-slate-700",children:[((pe=b.data.teacherAttendanceRecords)==null?void 0:pe.length)||0," ","records"]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(wx,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Remarks"})]}),i.jsxs("p",{className:"text-lg font-bold text-slate-700",children:[((ee=b.data.studentRemarks)==null?void 0:ee.length)||0," ","records"]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(zl,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Timetables"})]}),i.jsxs("p",{className:"text-lg font-bold text-slate-700",children:[((M=b.data.timetables)==null?void 0:M.length)||0," classes"]})]})]}),i.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[i.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[i.jsx(xl,{size:18,className:"mr-2 text-[#0B4A82]"}),"Students List"]}),U.length>0?i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3",children:"Student"}),i.jsx("th",{className:"px-4 py-3",children:"Class"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Attendance"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Avg Score"}),i.jsx("th",{className:"px-4 py-3",children:"Remark"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:U.map(J=>{var ie;return i.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs text-white mr-3 shadow-sm ${J.student.gender==="Male"?"bg-amber-400":"bg-[#0B4A82]"}`,children:J.student.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{children:J.student.name}),i.jsx("p",{className:"text-xs text-slate-400",children:J.student.gender})]})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"px-2.5 py-1 rounded-md bg-slate-100 text-slate-600 text-xs font-semibold border border-slate-200",children:((ie=Es.find(le=>le.id===J.student.classId))==null?void 0:ie.name)||J.student.classId})}),i.jsxs("td",{className:"px-4 py-3 text-center",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-700",children:J.attendanceRate}),i.jsxs("div",{className:"text-xs text-slate-400",children:[J.presentDays,"/",J.totalDays," days"]})]}),i.jsx("td",{className:"px-4 py-3 text-center font-semibold text-slate-700",children:J.avgScore}),i.jsx("td",{className:"px-4 py-3 text-slate-600",children:J.remark})]},J.student.id)})})]})}),i.jsxs("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-100 text-xs text-slate-500",children:["Total: ",U.length," student",U.length!==1?"s":""]})]}):i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 rounded-xl border border-slate-100",children:[i.jsx(xl,{size:32,className:"mx-auto mb-2 text-slate-300"}),i.jsx("p",{children:"No students in this backup."})]}),b.data.classSubjects&&b.data.classSubjects.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h5",{className:"font-bold text-slate-800 mb-3 flex items-center",children:[i.jsx(mm,{size:18,className:"mr-2 text-amber-600"}),"Classes & Subjects"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.data.classSubjects.map((J,ie)=>{var ve,Se;const le=Es.find(ge=>ge.id===J.classId),ce=lK(J.classId);return i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-xl p-4 border border-amber-200 hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"text-center mb-3 pb-3 border-b border-amber-200",children:[i.jsx("p",{className:"text-xs font-bold text-amber-600 uppercase tracking-wider mb-1",children:ce}),i.jsx("p",{className:"text-2xl font-extrabold text-slate-800",children:(le==null?void 0:le.name)||J.classId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Subjects"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:J.subjects&&J.subjects.length>0?J.subjects.map((ge,Be)=>i.jsx("span",{className:"px-2 py-1 bg-white border border-slate-200 text-slate-700 text-xs rounded-md shadow-sm",children:ge},Be)):i.jsx("span",{className:"text-xs text-slate-400 italic",children:"No subjects"})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2 font-medium",children:[((ve=J.subjects)==null?void 0:ve.length)||0," subject",((Se=J.subjects)==null?void 0:Se.length)!==1?"s":""]})]})]},ie)})})]})]})]}):i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(Gh,{size:48,className:"mx-auto mb-4 text-slate-300"}),i.jsx("p",{children:"No data available for this backup."})]})]}),i.jsx("div",{className:"p-6 border-t border-slate-100 text-right",children:i.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-[#1160A8] text-white rounded-lg hover:bg-[#0B4A82]",children:"Close"})})]})}),L&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-[#0B4A82]",children:"Confirm Deletion"}),i.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-700",children:i.jsx(_o,{size:20})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("p",{className:"text-slate-700 mb-4",children:"Are you sure you want to delete this backup? This action cannot be undone."}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Backup ID: ",E]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 text-right space-x-2",children:[i.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"}),i.jsx("button",{onClick:G,className:"px-4 py-2 bg-[#1160A8] text-white rounded-lg hover:bg-[#0B4A82]",children:"Delete"})]})]})}),H&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-[#0B4A82]",children:"Confirm Clear All Backups"}),i.jsx("button",{onClick:()=>Q(!1),className:"text-slate-400 hover:text-slate-700",children:i.jsx(_o,{size:20})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("p",{className:"text-slate-700 mb-4",children:"Are you sure you want to delete ALL backups? This action cannot be undone and will permanently remove all backup data."}),i.jsxs("p",{className:"text-sm text-[#0B4A82] font-semibold",children:["Warning: This will affect ",t.length," backup",t.length!==1?"s":"","."]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 text-right space-x-2",children:[i.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"}),i.jsx("button",{onClick:ae,className:"px-4 py-2 bg-[#1160A8] text-white rounded-lg hover:bg-[#0B4A82]",children:"Clear All"})]})]})})]})},rx=["Monday","Tuesday","Wednesday","Thursday","Friday"],cK=()=>{var F,L;const{user:s}=Uo(),e=FT(s),[t,n]=Z.useState(Es[0].id),[r,o]=Z.useState({}),[c,h]=Z.useState(!1),[u,f]=Z.useState(rx[0]),[A,m]=Z.useState([]),[x,g]=Z.useState({startTime:"08:00",endTime:"09:00",subject:"",type:"lesson"});Z.useEffect(()=>{(async()=>{h(!0);const H=await ot.getSubjects(e,t);m(H),H.length>0?g($=>({...$,subject:H[0],type:"lesson"})):g($=>({...$,subject:"",type:"lesson"}));const Q=await ot.getTimetable(e,t),U=(Q==null?void 0:Q.schedule)||{};rx.forEach($=>{U[$]||(U[$]=[])});let R=!1;if(H.length>0&&Object.keys(U).forEach($=>{U[$].forEach(P=>{P.type==="lesson"&&!H.includes(P.subject)&&(P.subject=H[0],R=!0)})}),R){const $={schoolId:e,classId:t,schedule:U};await ot.saveTimetable($),Pt("Timetable subjects updated to match system settings!",{type:"success"})}o(U),h(!1)})()},[t,e]);const b=()=>{if(!x.startTime||!x.endTime||!x.subject)return;if(x.startTime>=x.endTime){Pt("End time must be after start time",{type:"error"});return}const O={id:Math.random().toString(36).substr(2,9),startTime:x.startTime,endTime:x.endTime,subject:x.subject,type:x.type},H={...r};H[u]=[...H[u],O].sort((Q,U)=>Q.startTime.localeCompare(U.startTime)),o(H)},I=O=>{const H={...r};H[u]=H[u].filter(Q=>Q.id!==O),o(H)},N=async()=>{h(!0);const O={schoolId:e,classId:t,schedule:r,updatedAt:Date.now()};await ot.saveTimetable(O),h(!1),Pt("Timetable saved successfully!",{type:"success"})},C=O=>{const H=r[O];return!H||H.length===0?"N/A":H[H.length-1].endTime},E=O=>{switch(O){case"break":return{bg:"bg-amber-50",border:"border-amber-100",icon:Ok,iconColor:"text-amber-600",badge:"text-amber-600 border-amber-200"};case"worship":return{bg:"bg-purple-50",border:"border-purple-100",icon:MT,iconColor:"text-purple-600",badge:"text-purple-600 border-purple-200"};case"assembly":return{bg:"bg-[#E6F0FA]",border:"border-[#E6F0FA]",icon:xl,iconColor:"text-[#0B4A82]",badge:"text-[#0B4A82] border-[#E6F0FA]"};case"arrival":return{bg:"bg-green-50",border:"border-green-100",icon:xl,iconColor:"text-green-600",badge:"text-green-600 border-green-200"};case"closing":return{bg:"bg-slate-100",border:"border-slate-200",icon:Hk,iconColor:"text-slate-600",badge:"text-slate-600 border-slate-300"};default:return{bg:"bg-white",border:"border-slate-100",icon:ac,iconColor:"text-emerald-600",badge:"text-slate-600 border-slate-200"}}};return i.jsx(lr,{title:"Manage Timetable",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-auto md:h-[calc(100vh-8rem)]",children:[i.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col md:flex-row justify-between md:items-center gap-4 bg-slate-50",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Class"}),i.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-48",value:t,onChange:O=>n(O.target.value),children:Es.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))})]})}),i.jsxs("button",{onClick:N,disabled:c,className:"flex items-center bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50",children:[i.jsx(AA,{size:18,className:"mr-2"}),c?"Saving...":"Save Schedule"]})]}),i.jsxs("div",{className:"flex flex-1 overflow-y-auto md:overflow-hidden",children:[i.jsx("div",{className:"hidden md:flex w-40 border-r border-slate-100 bg-white flex flex-col overflow-y-auto",children:rx.map(O=>{var Q;const H=((Q=r[O])==null?void 0:Q.length)||0;return i.jsxs("button",{onClick:()=>f(O),className:`p-4 text-left border-l-4 transition-colors hover:bg-slate-50 ${u===O?"border-emerald-500 bg-emerald-50 text-emerald-800 font-medium":"border-transparent text-slate-600"}`,children:[i.jsx("span",{className:"block",children:O}),i.jsxs("span",{className:"text-xs text-slate-400",children:[H," Slots"]})]},O)})}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto md:overflow-hidden bg-slate-50/50",children:[i.jsx("div",{className:"md:hidden flex overflow-x-auto bg-white border-b border-slate-100",children:rx.map(O=>{var Q;const H=((Q=r[O])==null?void 0:Q.length)||0;return i.jsxs("button",{onClick:()=>f(O),className:`px-4 py-3 text-sm whitespace-nowrap transition-colors hover:bg-slate-50 ${u===O?"border-b-2 border-emerald-500 bg-emerald-50 text-emerald-800 font-medium":"border-transparent text-slate-600"}`,children:[i.jsx("span",{children:O}),i.jsxs("span",{className:"text-xs text-slate-400 ml-1",children:["(",H,")"]})]},O)})}),i.jsx("div",{className:"p-4 md:p-6 border-b border-slate-100 flex justify-between items-center bg-white",children:i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[u," Schedule"]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Closing Time:"," ",i.jsx("span",{className:"font-semibold text-slate-800",children:C(u)})]})]})}),i.jsx("div",{className:"flex-1 overflow-visible md:overflow-y-auto p-3 md:p-6 space-y-3 md:space-y-4 min-h-[260px]",children:((F=r[u])==null?void 0:F.length)===0?i.jsxs("div",{className:"text-center w-full min-h-[260px] md:min-h-[320px] py-10 md:py-16 px-6 md:px-10 text-slate-500 border-2 border-dashed border-slate-200 rounded-2xl bg-white flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-xl md:text-2xl font-semibold mb-3 text-slate-700",children:"No classes or breaks scheduled"}),i.jsxs("div",{className:"text-base md:text-lg leading-relaxed max-w-md mx-auto",children:["Add time slots for ",u," using the form below."]})]}):(L=r[u])==null?void 0:L.map(O=>{const H=E(O.type),Q=H.icon;return i.jsxs("div",{className:`flex items-center p-4 md:p-5 rounded-lg border shadow-sm ${H.bg} ${H.border}`,children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 md:w-14 md:h-14 rounded-full mr-3 md:mr-4 bg-white shadow-sm text-slate-500 flex-shrink-0",children:i.jsx(Q,{size:20,className:H.iconColor})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[i.jsxs("span",{className:"font-mono text-sm md:text-base font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded whitespace-nowrap",children:[O.startTime," - ",O.endTime]}),O.type!=="lesson"&&i.jsx("span",{className:`text-xs uppercase font-bold border px-2 py-0.5 rounded ${H.badge}`,children:O.type})]}),i.jsx("p",{className:"text-base md:text-lg font-bold text-slate-800 break-words",children:O.subject})]}),i.jsx("button",{onClick:()=>I(O.id),className:"text-slate-300 hover:text-[#1160A8] p-2 transition-colors flex-shrink-0",children:i.jsx(RA,{size:18})})]},O.id)})}),i.jsxs("div",{className:"p-4 md:p-6 bg-white border-t border-slate-200",children:[i.jsx("h4",{className:"text-sm font-bold text-slate-500 uppercase mb-4",children:"Add Time Slot"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-1 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Start Time"}),i.jsx("input",{type:"time",className:"w-full border p-3 rounded text-sm md:text-base",value:x.startTime,onChange:O=>g({...x,startTime:O.target.value})})]}),i.jsxs("div",{className:"sm:col-span-1 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"End Time"}),i.jsx("input",{type:"time",className:"w-full border p-3 rounded text-sm md:text-base",value:x.endTime,onChange:O=>g({...x,endTime:O.target.value})})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Type"}),i.jsxs("select",{className:"w-full border p-3 rounded text-sm md:text-base",value:x.type,onChange:O=>{const H=O.target.value;let Q="";H==="break"?Q="Break":H==="worship"?Q="Worship":H==="closing"?Q="Closing":H==="assembly"?Q="Assembly":H==="arrival"?Q="Arrival & Free Play":H==="lunch"?Q="Lunch":H==="snack"?Q="Snack":H==="cleaning"?Q="Clean Up":H==="games"?Q="Games":H==="nap"?Q="Nap Time":H==="clubs"?Q="Clubs/Activities":Q=A[0]||"",g({...x,type:H,subject:Q})},children:[i.jsx("option",{value:"arrival",children:"Arrival & Free Play"}),i.jsx("option",{value:"assembly",children:"Morning Assembly"}),i.jsx("option",{value:"lesson",children:"Lesson"}),i.jsx("option",{value:"break",children:"Break"}),i.jsx("option",{value:"snack",children:"Snack"}),i.jsx("option",{value:"lunch",children:"Lunch"}),i.jsx("option",{value:"worship",children:"Worship/Devotion"}),i.jsx("option",{value:"games",children:"Games/Sports"}),i.jsx("option",{value:"clubs",children:"Clubs/Activities"}),i.jsx("option",{value:"cleaning",children:"Clean Up"}),i.jsx("option",{value:"nap",children:"Nap Time"}),i.jsx("option",{value:"closing",children:"Closing"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-4",children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Activity/Subject"}),x.type==="lesson"?i.jsxs("select",{className:"w-full border p-3 rounded text-sm md:text-base",value:x.subject,onChange:O=>g({...x,subject:O.target.value}),children:[A.map(O=>i.jsx("option",{value:O,children:O},O)),A.length===0&&i.jsx("option",{value:"",children:"No Subjects Found"})]}):i.jsx("input",{type:"text",className:"w-full border p-3 rounded text-sm md:text-base",value:x.subject,onChange:O=>g({...x,subject:O.target.value})})]}),i.jsx("div",{className:"sm:col-span-2 lg:col-span-2",children:i.jsxs("button",{onClick:b,className:"w-full bg-[#1160A8] text-white p-3 rounded text-sm md:text-base font-medium hover:bg-[#0B4A82] transition-colors",children:[i.jsx($h,{size:16,className:"inline mr-1"})," Add Slot"]})})]})]})]})]})]})})},uK=()=>{const{school:s}=dc(),e=bm(),[t,n]=Z.useState(!1),[r,o]=Z.useState("0"),[c,h]=Z.useState([]),[u,f]=Z.useState(!1),[A,m]=Z.useState(!1),[x,g]=Z.useState(!1),b=(U,R="GHS")=>{if(!U&&U!==0)return"-";const $=U>=100?U/100:U;return new Intl.NumberFormat("en-GH",{style:"currency",currency:R}).format($)},I=U=>{if(!U)return"-";if(U instanceof tr)return U.toDate().toLocaleString();if(typeof U=="number")return new Date(U).toLocaleString();const R=new Date(U);return Number.isNaN(R.getTime())?"-":R.toLocaleString()},N=U=>{const R=(U||"pending").toLowerCase();return["success","paid","active"].includes(R)?{label:"Paid",className:"bg-emerald-50 text-emerald-700"}:["failed","failure","past_due"].includes(R)?{label:"Failed",className:"bg-rose-50 text-rose-700"}:["abandoned","cancelled","canceled"].includes(R)?{label:"Cancelled",className:"bg-slate-100 text-slate-600"}:{label:"Pending",className:"bg-amber-50 text-amber-700"}},C=Z.useMemo(()=>{var $;const U=(($=s==null?void 0:s.billing)==null?void 0:$.status)||"inactive",R=(s==null?void 0:s.plan)||"monthly";return{status:U,plan:R}},[s]),E=C.plan==="free",F=Z.useMemo(()=>{const U=c[0];return N((U==null?void 0:U.status)||C.status)},[C.status,c]),L=Z.useMemo(()=>{const U=C.plan||"monthly";return 300*(U==="termly"?4:U==="yearly"?12:1)},[C.plan]);Z.useEffect(()=>{E||o(String(L))},[L,E]);const O=async()=>{if(s!=null&&s.id){f(!0);try{const U=Rs(wt,"payments"),R=Ks(U,rs("schoolId","==",s.id)),P=(await qs(R)).docs.map(V=>({id:V.id,...V.data()})).sort((V,G)=>{var oe,X;const ae=(oe=V.createdAt)!=null&&oe.toMillis?V.createdAt.toMillis():new Date(V.createdAt||0).getTime();return((X=G.createdAt)!=null&&X.toMillis?G.createdAt.toMillis():new Date(G.createdAt||0).getTime())-ae});h(P)}catch(U){console.error("Failed to load payment history",U),Pt("Failed to load payment history.",{type:"error"})}finally{f(!1)}}},H=async()=>{if(!c.length){Pt("No payments to verify.",{type:"info"});return}const U=c.filter(R=>["pending","abandoned","failed"].includes(String(R.status||"pending").toLowerCase()));if(!U.length){Pt("All payments are already verified.",{type:"success"});return}try{m(!0);let R=0;for(const $ of U)$.reference&&(await tS({reference:$.reference}),R+=1);Pt(`Verification complete. ${R} payment(s) updated.`,{type:"success"}),await O()}catch(R){console.error("Payment verification failed:",R),Pt((R==null?void 0:R.message)||"Payment verification failed.",{type:"error"})}finally{m(!1)}};Z.useEffect(()=>{E||O()},[s==null?void 0:s.id,E]),Z.useEffect(()=>{if(E)return;const R=new URLSearchParams(window.location.search).get("reference");if(!R)return;(async()=>{try{m(!0);const P=await tS({reference:R});if(String((P==null?void 0:P.status)||"").toLowerCase()==="success"){g(!0),setTimeout(()=>{e("/",{replace:!0})},3500);return}Pt("Payment was not completed. Please try again or verify later.",{type:"info"}),await O()}catch(P){console.error("Payment verification failed:",P),Pt((P==null?void 0:P.message)||"Payment verification failed.",{type:"error"})}finally{m(!1)}})()},[E,e]);const Q=async()=>{if(E)return;const U=Number(L);if(!U||U<=0){Pt("Enter a valid amount.",{type:"error"});return}try{n(!0);const R=await B7({amount:U*100,currency:"GHS"});window.location.href=R.authorizationUrl}catch(R){console.error("Billing error:",R),Pt((R==null?void 0:R.message)||"Payment initiation failed.",{type:"error"})}finally{n(!1)}};return E?i.jsx(lr,{title:"Billing & Subscription",children:i.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:i.jsx("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50/60 p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center",children:i.jsx(Zy,{size:18})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Free Plan Active"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Billing is disabled for your school. Contact your super admin if you need to change your subscription."})]})]})})})}):i.jsx(lr,{title:"Billing & Subscription",children:i.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[x&&i.jsx("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50/70 p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center",children:i.jsx(Zy,{size:18})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Subscription renewed successfully"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Great news! Your access has been restored. Redirecting to the dashboard now."})]})]})}),i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-50 via-white to-emerald-50 p-6 shadow-sm",children:[i.jsx("div",{className:"absolute -top-16 -right-16 h-40 w-40 rounded-full bg-indigo-200/40 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-20 -left-16 h-48 w-48 rounded-full bg-emerald-200/40 blur-3xl"}),i.jsxs("div",{className:"relative",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Billing & Subscription"}),i.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Pay monthly via Mobile Money and keep your school active."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-slate-100 p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center",children:i.jsx(Lp,{size:18})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Pay Monthly (MoMo)"}),i.jsx("p",{className:"text-sm text-slate-500",children:"MTN, Telecel, AirtelTigo supported via Paystack."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount (GHS)"}),i.jsx("input",{type:"number",min:"0",step:"1",value:r,readOnly:!0,className:"w-full border border-slate-200 rounded-xl p-2.5 bg-slate-50 text-slate-700"})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{onClick:Q,disabled:t,className:"w-full inline-flex items-center justify-center gap-2 rounded-full bg-emerald-600 text-white px-5 py-2.5 font-semibold hover:bg-emerald-700 transition disabled:opacity-60",children:[t?"Redirecting...":"Pay with MoMo",i.jsx(uk,{size:16})]})})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-indigo-100 text-indigo-600 flex items-center justify-center",children:i.jsx(Zy,{size:18})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Subscription Status"}),i.jsx("p",{className:"text-sm text-slate-500",children:"School Plan"})]})]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-500",children:"Plan"}),i.jsx("span",{className:"font-semibold text-slate-800",children:C.plan})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-500",children:"Status"}),i.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold ${F.className}`,children:F.label})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-500",children:"Renewal"}),i.jsx("span",{className:"font-semibold text-slate-800",children:"Monthly"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Payment History"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Track all payments made by your school admin account."})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{onClick:H,className:"text-sm text-emerald-700 border border-emerald-200 px-3 py-1.5 rounded-lg hover:bg-emerald-50",disabled:u||A,children:A?"Verifying...":"Verify Pending"}),i.jsx("button",{onClick:O,className:"text-sm text-slate-600 border border-slate-200 px-3 py-1.5 rounded-lg hover:bg-slate-50",disabled:u,children:u?"Loading...":"Refresh"})]})]}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-slate-500 border-b border-slate-100",children:[i.jsx("th",{className:"py-3 pr-4",children:"Amount"}),i.jsx("th",{className:"py-3 pr-4",children:"Currency"}),i.jsx("th",{className:"py-3 pr-4",children:"Status"}),i.jsx("th",{className:"py-3 pr-4",children:"Reference"}),i.jsx("th",{className:"py-3",children:"Created"})]})}),i.jsx("tbody",{children:c.map(U=>{const R=N(U.status);return i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 pr-4 text-slate-700",children:b(U.amount,U.currency)}),i.jsx("td",{className:"py-3 pr-4 text-slate-600",children:U.currency||"GHS"}),i.jsx("td",{className:"py-3 pr-4",children:i.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold ${R.className}`,children:R.label})}),i.jsx("td",{className:"py-3 pr-4 text-slate-500",children:U.reference||"-"}),i.jsx("td",{className:"py-3 text-slate-500",children:I(U.createdAt)})]},U.id)})})]}),!c.length&&!u&&i.jsx("div",{className:"text-center text-sm text-slate-400 py-10",children:"No payment history yet."})]})]})]})})},QI=Z.createContext({});function dK(s){const e=Z.useRef(null);return e.current===null&&(e.current=s()),e.current}const m2=typeof window<"u",hK=m2?Z.useLayoutEffect:Z.useEffect,p2=Z.createContext(null);function g2(s,e){s.indexOf(e)===-1&&s.push(e)}function x2(s,e){const t=s.indexOf(e);t>-1&&s.splice(t,1)}const Zc=(s,e,t)=>t>e?e:t<s?s:t;let v2=()=>{};const Fu={},OI=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function PI(s){return typeof s=="object"&&s!==null}const kI=s=>/^0[^.\s]+$/u.test(s);function y2(s){let e;return()=>(e===void 0&&(e=s()),e)}const LA=s=>s,fK=(s,e)=>t=>e(s(t)),Vg=(...s)=>s.reduce(fK),yg=(s,e,t)=>{const n=e-s;return n===0?1:(t-s)/n};class b2{constructor(){this.subscriptions=[]}add(e){return g2(this.subscriptions,e),()=>x2(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let o=0;o<r;o++){const c=this.subscriptions[o];c&&c(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cu=s=>s*1e3,FA=s=>s/1e3;function MI(s,e){return e?s*(1e3/e):0}const HI=(s,e,t)=>(((1-3*t+3*e)*s+(3*t-6*e))*s+3*e)*s,mK=1e-7,pK=12;function gK(s,e,t,n,r){let o,c,h=0;do c=e+(t-e)/2,o=HI(c,n,r)-s,o>0?t=c:e=c;while(Math.abs(o)>mK&&++h<pK);return c}function Kg(s,e,t,n){if(s===e&&t===n)return LA;const r=o=>gK(o,0,1,s,t);return o=>o===0||o===1?o:HI(r(o),e,n)}const VI=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,KI=s=>e=>1-s(1-e),zI=Kg(.33,1.53,.69,.99),w2=KI(zI),GI=VI(w2),$I=s=>(s*=2)<1?.5*w2(s):.5*(2-Math.pow(2,-10*(s-1))),j2=s=>1-Math.sin(Math.acos(s)),YI=KI(j2),WI=VI(j2),xK=Kg(.42,0,1,1),vK=Kg(0,0,.58,1),XI=Kg(.42,0,.58,1),yK=s=>Array.isArray(s)&&typeof s[0]!="number",JI=s=>Array.isArray(s)&&typeof s[0]=="number",bK={linear:LA,easeIn:xK,easeInOut:XI,easeOut:vK,circIn:j2,circInOut:WI,circOut:YI,backIn:w2,backInOut:GI,backOut:zI,anticipate:$I},wK=s=>typeof s=="string",CC=s=>{if(JI(s)){v2(s.length===4);const[e,t,n,r]=s;return Kg(e,t,n,r)}else if(wK(s))return bK[s];return s},ax=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function jK(s,e){let t=new Set,n=new Set,r=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function u(A){c.has(A)&&(f.schedule(A),s()),A(h)}const f={schedule:(A,m=!1,x=!1)=>{const b=x&&r?t:n;return m&&c.add(A),b.has(A)||b.add(A),A},cancel:A=>{n.delete(A),c.delete(A)},process:A=>{if(h=A,r){o=!0;return}r=!0,[t,n]=[n,t],t.forEach(u),t.clear(),r=!1,o&&(o=!1,f.process(A))}};return f}const BK=40;function qI(s,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,c=ax.reduce((F,L)=>(F[L]=jK(o),F),{}),{setup:h,read:u,resolveKeyframes:f,preUpdate:A,update:m,preRender:x,render:g,postRender:b}=c,I=()=>{const F=Fu.useManualTiming?r.timestamp:performance.now();t=!1,Fu.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(F-r.timestamp,BK),1)),r.timestamp=F,r.isProcessing=!0,h.process(r),u.process(r),f.process(r),A.process(r),m.process(r),x.process(r),g.process(r),b.process(r),r.isProcessing=!1,t&&e&&(n=!1,s(I))},N=()=>{t=!0,n=!0,r.isProcessing||s(I)};return{schedule:ax.reduce((F,L)=>{const O=c[L];return F[L]=(H,Q=!1,U=!1)=>(t||N(),O.schedule(H,Q,U)),F},{}),cancel:F=>{for(let L=0;L<ax.length;L++)c[ax[L]].cancel(F)},state:r,steps:c}}const{schedule:Ra,cancel:Xd,state:No,steps:B1}=qI(typeof requestAnimationFrame<"u"?requestAnimationFrame:LA,!0);let Cx;function SK(){Cx=void 0}const vl={now:()=>(Cx===void 0&&vl.set(No.isProcessing||Fu.useManualTiming?No.timestamp:performance.now()),Cx),set:s=>{Cx=s,queueMicrotask(SK)}},ZI=s=>e=>typeof e=="string"&&e.startsWith(s),e3=ZI("--"),CK=ZI("var(--"),B2=s=>CK(s)?NK.test(s.split("/*")[0].trim()):!1,NK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function NC(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const _m={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},bg={..._m,transform:s=>Zc(0,1,s)},ix={..._m,default:1},eg=s=>Math.round(s*1e5)/1e5,S2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EK(s){return s==null}const TK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,C2=(s,e)=>t=>!!(typeof t=="string"&&TK.test(t)&&t.startsWith(s)||e&&!EK(t)&&Object.prototype.hasOwnProperty.call(t,e)),t3=(s,e,t)=>n=>{if(typeof n!="string")return n;const[r,o,c,h]=n.match(S2);return{[s]:parseFloat(r),[e]:parseFloat(o),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},IK=s=>Zc(0,255,s),S1={..._m,transform:s=>Math.round(IK(s))},Hh={test:C2("rgb","red"),parse:t3("red","green","blue"),transform:({red:s,green:e,blue:t,alpha:n=1})=>"rgba("+S1.transform(s)+", "+S1.transform(e)+", "+S1.transform(t)+", "+eg(bg.transform(n))+")"};function _K(s){let e="",t="",n="",r="";return s.length>5?(e=s.substring(1,3),t=s.substring(3,5),n=s.substring(5,7),r=s.substring(7,9)):(e=s.substring(1,2),t=s.substring(2,3),n=s.substring(3,4),r=s.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const Ib={test:C2("#"),parse:_K,transform:Hh.transform},zg=s=>({test:e=>typeof e=="string"&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),wd=zg("deg"),Wc=zg("%"),ws=zg("px"),FK=zg("vh"),UK=zg("vw"),EC={...Wc,parse:s=>Wc.parse(s)/100,transform:s=>Wc.transform(s*100)},Jf={test:C2("hsl","hue"),parse:t3("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(s)+", "+Wc.transform(eg(e))+", "+Wc.transform(eg(t))+", "+eg(bg.transform(n))+")"},Gi={test:s=>Hh.test(s)||Ib.test(s)||Jf.test(s),parse:s=>Hh.test(s)?Hh.parse(s):Jf.test(s)?Jf.parse(s):Ib.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Hh.transform(s):Jf.transform(s),getAnimatableNone:s=>{const e=Gi.parse(s);return e.alpha=0,Gi.transform(e)}},DK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RK(s){var e,t;return isNaN(s)&&typeof s=="string"&&(((e=s.match(S2))==null?void 0:e.length)||0)+(((t=s.match(DK))==null?void 0:t.length)||0)>0}const s3="number",n3="color",LK="var",QK="var(",TC="${}",OK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wg(s){const e=s.toString(),t=[],n={color:[],number:[],var:[]},r=[];let o=0;const h=e.replace(OK,u=>(Gi.test(u)?(n.color.push(o),r.push(n3),t.push(Gi.parse(u))):u.startsWith(QK)?(n.var.push(o),r.push(LK),t.push(u)):(n.number.push(o),r.push(s3),t.push(parseFloat(u))),++o,TC)).split(TC);return{values:t,split:h,indexes:n,types:r}}function r3(s){return wg(s).values}function a3(s){const{split:e,types:t}=wg(s),n=e.length;return r=>{let o="";for(let c=0;c<n;c++)if(o+=e[c],r[c]!==void 0){const h=t[c];h===s3?o+=eg(r[c]):h===n3?o+=Gi.transform(r[c]):o+=r[c]}return o}}const PK=s=>typeof s=="number"?0:Gi.test(s)?Gi.getAnimatableNone(s):s;function kK(s){const e=r3(s);return a3(s)(e.map(PK))}const Jd={test:RK,parse:r3,createTransformer:a3,getAnimatableNone:kK};function C1(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*(2/3-t)*6:s}function MK({hue:s,saturation:e,lightness:t,alpha:n}){s/=360,e/=100,t/=100;let r=0,o=0,c=0;if(!e)r=o=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,u=2*t-h;r=C1(u,h,s+1/3),o=C1(u,h,s),c=C1(u,h,s-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:n}}function lv(s,e){return t=>t>0?e:s}const ni=(s,e,t)=>s+(e-s)*t,N1=(s,e,t)=>{const n=s*s,r=t*(e*e-n)+n;return r<0?0:Math.sqrt(r)},HK=[Ib,Hh,Jf],VK=s=>HK.find(e=>e.test(s));function IC(s){const e=VK(s);if(!e)return!1;let t=e.parse(s);return e===Jf&&(t=MK(t)),t}const _C=(s,e)=>{const t=IC(s),n=IC(e);if(!t||!n)return lv(s,e);const r={...t};return o=>(r.red=N1(t.red,n.red,o),r.green=N1(t.green,n.green,o),r.blue=N1(t.blue,n.blue,o),r.alpha=ni(t.alpha,n.alpha,o),Hh.transform(r))},_b=new Set(["none","hidden"]);function KK(s,e){return _b.has(s)?t=>t<=0?s:e:t=>t>=1?e:s}function zK(s,e){return t=>ni(s,e,t)}function N2(s){return typeof s=="number"?zK:typeof s=="string"?B2(s)?lv:Gi.test(s)?_C:YK:Array.isArray(s)?i3:typeof s=="object"?Gi.test(s)?_C:GK:lv}function i3(s,e){const t=[...s],n=t.length,r=s.map((o,c)=>N2(o)(o,e[c]));return o=>{for(let c=0;c<n;c++)t[c]=r[c](o);return t}}function GK(s,e){const t={...s,...e},n={};for(const r in t)s[r]!==void 0&&e[r]!==void 0&&(n[r]=N2(s[r])(s[r],e[r]));return r=>{for(const o in n)t[o]=n[o](r);return t}}function $K(s,e){const t=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],c=s.indexes[o][n[o]],h=s.values[c]??0;t[r]=h,n[o]++}return t}const YK=(s,e)=>{const t=Jd.createTransformer(e),n=wg(s),r=wg(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?_b.has(s)&&!r.values.length||_b.has(e)&&!n.values.length?KK(s,e):Vg(i3($K(n,r),r.values),t):lv(s,e)};function o3(s,e,t){return typeof s=="number"&&typeof e=="number"&&typeof t=="number"?ni(s,e,t):N2(s)(s,e)}const WK=s=>{const e=({timestamp:t})=>s(t);return{start:(t=!0)=>Ra.update(e,t),stop:()=>Xd(e),now:()=>No.isProcessing?No.timestamp:vl.now()}},l3=(s,e,t=10)=>{let n="";const r=Math.max(Math.round(e/t),2);for(let o=0;o<r;o++)n+=Math.round(s(o/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Av=2e4;function E2(s){let e=0;const t=50;let n=s.next(e);for(;!n.done&&e<Av;)e+=t,n=s.next(e);return e>=Av?1/0:e}function XK(s,e=100,t){const n=t({...s,keyframes:[0,e]}),r=Math.min(E2(n),Av);return{type:"keyframes",ease:o=>n.next(r*o).value/e,duration:FA(r)}}const JK=5;function A3(s,e,t){const n=Math.max(e-JK,0);return MI(t-s(n),e-n)}const fi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},E1=.001;function qK({duration:s=fi.duration,bounce:e=fi.bounce,velocity:t=fi.velocity,mass:n=fi.mass}){let r,o,c=1-e;c=Zc(fi.minDamping,fi.maxDamping,c),s=Zc(fi.minDuration,fi.maxDuration,FA(s)),c<1?(r=f=>{const A=f*c,m=A*s,x=A-t,g=Fb(f,c),b=Math.exp(-m);return E1-x/g*b},o=f=>{const m=f*c*s,x=m*t+t,g=Math.pow(c,2)*Math.pow(f,2)*s,b=Math.exp(-m),I=Fb(Math.pow(f,2),c);return(-r(f)+E1>0?-1:1)*((x-g)*b)/I}):(r=f=>{const A=Math.exp(-f*s),m=(f-t)*s+1;return-E1+A*m},o=f=>{const A=Math.exp(-f*s),m=(t-f)*(s*s);return A*m});const h=5/s,u=ez(r,o,h);if(s=Cu(s),isNaN(u))return{stiffness:fi.stiffness,damping:fi.damping,duration:s};{const f=Math.pow(u,2)*n;return{stiffness:f,damping:c*2*Math.sqrt(n*f),duration:s}}}const ZK=12;function ez(s,e,t){let n=t;for(let r=1;r<ZK;r++)n=n-s(n)/e(n);return n}function Fb(s,e){return s*Math.sqrt(1-e*e)}const tz=["duration","bounce"],sz=["stiffness","damping","mass"];function FC(s,e){return e.some(t=>s[t]!==void 0)}function nz(s){let e={velocity:fi.velocity,stiffness:fi.stiffness,damping:fi.damping,mass:fi.mass,isResolvedFromDuration:!1,...s};if(!FC(s,sz)&&FC(s,tz))if(s.visualDuration){const t=s.visualDuration,n=2*Math.PI/(t*1.2),r=n*n,o=2*Zc(.05,1,1-(s.bounce||0))*Math.sqrt(r);e={...e,mass:fi.mass,stiffness:r,damping:o}}else{const t=qK(s);e={...e,...t,mass:fi.mass},e.isResolvedFromDuration=!0}return e}function cv(s=fi.visualDuration,e=fi.bounce){const t=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:e}:s;let{restSpeed:n,restDelta:r}=t;const o=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:u,damping:f,mass:A,duration:m,velocity:x,isResolvedFromDuration:g}=nz({...t,velocity:-FA(t.velocity||0)}),b=x||0,I=f/(2*Math.sqrt(u*A)),N=c-o,C=FA(Math.sqrt(u/A)),E=Math.abs(N)<5;n||(n=E?fi.restSpeed.granular:fi.restSpeed.default),r||(r=E?fi.restDelta.granular:fi.restDelta.default);let F;if(I<1){const O=Fb(C,I);F=H=>{const Q=Math.exp(-I*C*H);return c-Q*((b+I*C*N)/O*Math.sin(O*H)+N*Math.cos(O*H))}}else if(I===1)F=O=>c-Math.exp(-C*O)*(N+(b+C*N)*O);else{const O=C*Math.sqrt(I*I-1);F=H=>{const Q=Math.exp(-I*C*H),U=Math.min(O*H,300);return c-Q*((b+I*C*N)*Math.sinh(U)+O*N*Math.cosh(U))/O}}const L={calculatedDuration:g&&m||null,next:O=>{const H=F(O);if(g)h.done=O>=m;else{let Q=O===0?b:0;I<1&&(Q=O===0?Cu(b):A3(F,O,H));const U=Math.abs(Q)<=n,R=Math.abs(c-H)<=r;h.done=U&&R}return h.value=h.done?c:H,h},toString:()=>{const O=Math.min(E2(L),Av),H=l3(Q=>L.next(O*Q).value,O,30);return O+"ms "+H},toTransition:()=>{}};return L}cv.applyToOptions=s=>{const e=XK(s,100,cv);return s.ease=e.ease,s.duration=Cu(e.duration),s.type="keyframes",s};function Ub({keyframes:s,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:u,restDelta:f=.5,restSpeed:A}){const m=s[0],x={done:!1,value:m},g=U=>h!==void 0&&U<h||u!==void 0&&U>u,b=U=>h===void 0?u:u===void 0||Math.abs(h-U)<Math.abs(u-U)?h:u;let I=t*e;const N=m+I,C=c===void 0?N:c(N);C!==N&&(I=C-m);const E=U=>-I*Math.exp(-U/n),F=U=>C+E(U),L=U=>{const R=E(U),$=F(U);x.done=Math.abs(R)<=f,x.value=x.done?C:$};let O,H;const Q=U=>{g(x.value)&&(O=U,H=cv({keyframes:[x.value,b(x.value)],velocity:A3(F,U,x.value),damping:r,stiffness:o,restDelta:f,restSpeed:A}))};return Q(0),{calculatedDuration:null,next:U=>{let R=!1;return!H&&O===void 0&&(R=!0,L(U),Q(U)),O!==void 0&&U>=O?H.next(U-O):(!R&&L(U),x)}}}function rz(s,e,t){const n=[],r=t||Fu.mix||o3,o=s.length-1;for(let c=0;c<o;c++){let h=r(s[c],s[c+1]);if(e){const u=Array.isArray(e)?e[c]||LA:e;h=Vg(u,h)}n.push(h)}return n}function az(s,e,{clamp:t=!0,ease:n,mixer:r}={}){const o=s.length;if(v2(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=s[0]===s[1];s[0]>s[o-1]&&(s=[...s].reverse(),e=[...e].reverse());const h=rz(e,n,r),u=h.length,f=A=>{if(c&&A<s[0])return e[0];let m=0;if(u>1)for(;m<s.length-2&&!(A<s[m+1]);m++);const x=yg(s[m],s[m+1],A);return h[m](x)};return t?A=>f(Zc(s[0],s[o-1],A)):f}function iz(s,e){const t=s[s.length-1];for(let n=1;n<=e;n++){const r=yg(0,e,n);s.push(ni(t,1,r))}}function oz(s){const e=[0];return iz(e,s.length-1),e}function lz(s,e){return s.map(t=>t*e)}function Az(s,e){return s.map(()=>e||XI).splice(0,s.length-1)}function tg({duration:s=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=yK(n)?n.map(CC):CC(n),o={done:!1,value:e[0]},c=lz(t&&t.length===e.length?t:oz(e),s),h=az(c,e,{ease:Array.isArray(r)?r:Az(e,r)});return{calculatedDuration:s,next:u=>(o.value=h(u),o.done=u>=s,o)}}const cz=s=>s!==null;function T2(s,{repeat:e,repeatType:t="loop"},n,r=1){const o=s.filter(cz),h=r<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||n===void 0?o[h]:n}const uz={decay:Ub,inertia:Ub,tween:tg,keyframes:tg,spring:cv};function c3(s){typeof s.type=="string"&&(s.type=uz[s.type])}class I2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const dz=s=>s/100;class _2 extends I2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:t}=this.options;t&&t.updatedAt!==vl.now()&&this.tick(vl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;c3(e);const{type:t=tg,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:c=0}=e;let{keyframes:h}=e;const u=t||tg;u!==tg&&typeof h[0]!="number"&&(this.mixKeyframes=Vg(dz,o3(h[0],h[1])),h=[0,100]);const f=u({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...h].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=E2(f));const{calculatedDuration:A}=f;this.calculatedDuration=A,this.resolvedDuration=A+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:A,repeat:m,repeatType:x,repeatDelay:g,type:b,onUpdate:I,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const C=this.currentTime-f*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?C<0:C>r;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let F=this.currentTime,L=n;if(m){const U=Math.min(this.currentTime,r)/h;let R=Math.floor(U),$=U%1;!$&&U>=1&&($=1),$===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(x==="reverse"?($=1-$,g&&($-=g/h)):x==="mirror"&&(L=c)),F=Zc(0,1,$)*h}const O=E?{done:!1,value:A[0]}:L.next(F);o&&(O.value=o(O.value));let{done:H}=O;!E&&u!==null&&(H=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const Q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return Q&&b!==Ub&&(O.value=T2(A,this.options,N,this.speed)),I&&I(O.value),Q&&this.finish(),O}then(e,t){return this.finished.then(e,t)}get duration(){return FA(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+FA(e)}get time(){return FA(this.currentTime)}set time(e){var t;e=Cu(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vl.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=FA(this.currentTime))}play(){var r,o;if(this.isStopped)return;const{driver:e=WK,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(r=this.options).onPlay)==null||o.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function hz(s){for(let e=1;e<s.length;e++)s[e]??(s[e]=s[e-1])}const Vh=s=>s*180/Math.PI,Db=s=>{const e=Vh(Math.atan2(s[1],s[0]));return Rb(e)},fz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Db,rotateZ:Db,skewX:s=>Vh(Math.atan(s[1])),skewY:s=>Vh(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Rb=s=>(s=s%360,s<0&&(s+=360),s),UC=Db,DC=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),RC=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),mz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:DC,scaleY:RC,scale:s=>(DC(s)+RC(s))/2,rotateX:s=>Rb(Vh(Math.atan2(s[6],s[5]))),rotateY:s=>Rb(Vh(Math.atan2(-s[2],s[0]))),rotateZ:UC,rotate:UC,skewX:s=>Vh(Math.atan(s[4])),skewY:s=>Vh(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Lb(s){return s.includes("scale")?1:0}function Qb(s,e){if(!s||s==="none")return Lb(e);const t=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(t)n=mz,r=t;else{const h=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=fz,r=h}if(!r)return Lb(e);const o=n[e],c=r[1].split(",").map(gz);return typeof o=="function"?o(c):c[o]}const pz=(s,e)=>{const{transform:t="none"}=getComputedStyle(s);return Qb(t,e)};function gz(s){return parseFloat(s.trim())}const Fm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Um=new Set(Fm),LC=s=>s===_m||s===ws,xz=new Set(["x","y","z"]),vz=Fm.filter(s=>!xz.has(s));function yz(s){const e=[];return vz.forEach(t=>{const n=s.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Rd={width:({x:s},{paddingLeft:e="0",paddingRight:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),height:({y:s},{paddingTop:e="0",paddingBottom:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:(s,{transform:e})=>Qb(e,"x"),y:(s,{transform:e})=>Qb(e,"y")};Rd.translateX=Rd.x;Rd.translateY=Rd.y;const qh=new Set;let Ob=!1,Pb=!1,kb=!1;function u3(){if(Pb){const s=Array.from(qh).filter(n=>n.needsMeasurement),e=new Set(s.map(n=>n.element)),t=new Map;e.forEach(n=>{const r=yz(n);r.length&&(t.set(n,r),n.render())}),s.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=t.get(n);r&&r.forEach(([o,c])=>{var h;(h=n.getValue(o))==null||h.set(c)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Pb=!1,Ob=!1,qh.forEach(s=>s.complete(kb)),qh.clear()}function d3(){qh.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Pb=!0)})}function bz(){kb=!0,d3(),u3(),kb=!1}class F2{constructor(e,t,n,r,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(qh.add(this),Ob||(Ob=!0,Ra.read(d3),Ra.resolveKeyframes(u3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(e[0]===null){const o=r==null?void 0:r.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const h=n.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),r&&o===void 0&&r.set(e[0])}hz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qh.delete(this)}cancel(){this.state==="scheduled"&&(qh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wz=s=>s.startsWith("--");function jz(s,e,t){wz(e)?s.style.setProperty(e,t):s.style[e]=t}const Bz=y2(()=>window.ScrollTimeline!==void 0),Sz={};function Cz(s,e){const t=y2(s);return()=>Sz[e]??t()}const h3=Cz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qp=([s,e,t,n])=>`cubic-bezier(${s}, ${e}, ${t}, ${n})`,QC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qp([0,.65,.55,1]),circOut:Qp([.55,0,1,.45]),backIn:Qp([.31,.01,.66,-.59]),backOut:Qp([.33,1.53,.69,.99])};function f3(s,e){if(s)return typeof s=="function"?h3()?l3(s,e):"ease-out":JI(s)?Qp(s):Array.isArray(s)?s.map(t=>f3(t,e)||QC.easeOut):QC[s]}function Nz(s,e,t,{delay:n=0,duration:r=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:u}={},f=void 0){const A={[e]:t};u&&(A.offset=u);const m=f3(h,r);Array.isArray(m)&&(A.easing=m);const x={delay:n,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),s.animate(A,x)}function m3(s){return typeof s=="function"&&"applyToOptions"in s}function Ez({type:s,...e}){return m3(s)&&h3()?s.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Tz extends I2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,v2(typeof e.type!="string");const f=Ez(e);this.animation=Nz(t,n,r,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const A=T2(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(A):jz(t,n,A),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return FA(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+FA(e)}get time(){return FA(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Cu(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Bz()?(this.animation.timeline=e,LA):t(this)}}const p3={anticipate:$I,backInOut:GI,circInOut:WI};function Iz(s){return s in p3}function _z(s){typeof s.ease=="string"&&Iz(s.ease)&&(s.ease=p3[s.ease])}const T1=10;class Fz extends Tz{constructor(e){_z(e),c3(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:o,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new _2({...c,autoplay:!1}),u=Math.max(T1,vl.now()-this.startTime),f=Zc(0,T1,u-T1);t.setWithVelocity(h.sample(Math.max(0,u-f)).value,h.sample(u).value,f),h.stop()}}const OC=(s,e)=>e==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Jd.test(s)||s==="0")&&!s.startsWith("url("));function Uz(s){const e=s[0];if(s.length===1)return!0;for(let t=0;t<s.length;t++)if(s[t]!==e)return!0}function Dz(s,e,t,n){const r=s[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=s[s.length-1],c=OC(r,e),h=OC(o,e);return!c||!h?!1:Uz(s)||(t==="spring"||m3(t))&&n}function Mb(s){s.duration=0,s.type="keyframes"}const Rz=new Set(["opacity","clipPath","filter","transform"]),Lz=y2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Qz(s){var A;const{motionValue:e,name:t,repeatDelay:n,repeatType:r,damping:o,type:c}=s;if(!(((A=e==null?void 0:e.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return Lz()&&t&&Rz.has(t)&&(t!=="transform"||!f)&&!u&&!n&&r!=="mirror"&&o!==0&&c!=="inertia"}const Oz=40;class Pz extends I2{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:u,motionValue:f,element:A,...m}){var b;super(),this.stop=()=>{var I,N;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=vl.now();const x={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:o,repeatType:c,name:u,motionValue:f,element:A,...m},g=(A==null?void 0:A.KeyframeResolver)||F2;this.keyframeResolver=new g(h,(I,N,C)=>this.onKeyframesResolved(I,N,x,!C),u,f,A),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:u,isHandoff:f,onUpdate:A}=n;this.resolvedAt=vl.now(),Dz(e,o,c,h)||((Fu.instantAnimations||!u)&&(A==null||A(T2(e,n,t))),e[0]=e[e.length-1],Mb(n),n.repeat=0);const x={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Oz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},g=!f&&Qz(x)?new Fz({...x,element:x.motionValue.owner.current}):new _2(x);g.finished.then(()=>this.notifyFinished()).catch(LA),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),bz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const kz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mz(s){const e=kz.exec(s);if(!e)return[,];const[,t,n,r]=e;return[`--${t??n}`,r]}function g3(s,e,t=1){const[n,r]=Mz(s);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const c=o.trim();return OI(c)?parseFloat(c):c}return B2(r)?g3(r,e,t+1):r}function U2(s,e){return(s==null?void 0:s[e])??(s==null?void 0:s.default)??s}const x3=new Set(["width","height","top","left","right","bottom",...Fm]),Hz={test:s=>s==="auto",parse:s=>s},v3=s=>e=>e.test(s),y3=[_m,ws,Wc,wd,UK,FK,Hz],PC=s=>y3.find(v3(s));function Vz(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||kI(s):!0}const Kz=new Set(["brightness","contrast","saturate","opacity"]);function zz(s){const[e,t]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[n]=t.match(S2)||[];if(!n)return s;const r=t.replace(n,"");let o=Kz.has(e)?1:0;return n!==t&&(o*=100),e+"("+o+r+")"}const Gz=/\b([a-z-]*)\(.*?\)/gu,Hb={...Jd,getAnimatableNone:s=>{const e=s.match(Gz);return e?e.map(zz).join(" "):s}},kC={..._m,transform:Math.round},$z={rotate:wd,rotateX:wd,rotateY:wd,rotateZ:wd,scale:ix,scaleX:ix,scaleY:ix,scaleZ:ix,skew:wd,skewX:wd,skewY:wd,distance:ws,translateX:ws,translateY:ws,translateZ:ws,x:ws,y:ws,z:ws,perspective:ws,transformPerspective:ws,opacity:bg,originX:EC,originY:EC,originZ:ws},D2={borderWidth:ws,borderTopWidth:ws,borderRightWidth:ws,borderBottomWidth:ws,borderLeftWidth:ws,borderRadius:ws,radius:ws,borderTopLeftRadius:ws,borderTopRightRadius:ws,borderBottomRightRadius:ws,borderBottomLeftRadius:ws,width:ws,maxWidth:ws,height:ws,maxHeight:ws,top:ws,right:ws,bottom:ws,left:ws,inset:ws,insetBlock:ws,insetBlockStart:ws,insetBlockEnd:ws,insetInline:ws,insetInlineStart:ws,insetInlineEnd:ws,padding:ws,paddingTop:ws,paddingRight:ws,paddingBottom:ws,paddingLeft:ws,paddingBlock:ws,paddingBlockStart:ws,paddingBlockEnd:ws,paddingInline:ws,paddingInlineStart:ws,paddingInlineEnd:ws,margin:ws,marginTop:ws,marginRight:ws,marginBottom:ws,marginLeft:ws,marginBlock:ws,marginBlockStart:ws,marginBlockEnd:ws,marginInline:ws,marginInlineStart:ws,marginInlineEnd:ws,backgroundPositionX:ws,backgroundPositionY:ws,...$z,zIndex:kC,fillOpacity:bg,strokeOpacity:bg,numOctaves:kC},Yz={...D2,color:Gi,backgroundColor:Gi,outlineColor:Gi,fill:Gi,stroke:Gi,borderColor:Gi,borderTopColor:Gi,borderRightColor:Gi,borderBottomColor:Gi,borderLeftColor:Gi,filter:Hb,WebkitFilter:Hb},b3=s=>Yz[s];function w3(s,e){let t=b3(s);return t!==Hb&&(t=Jd),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Wz=new Set(["auto","none","0"]);function Xz(s,e,t){let n=0,r;for(;n<s.length&&!r;){const o=s[n];typeof o=="string"&&!Wz.has(o)&&wg(o).values.length&&(r=s[n]),n++}if(r&&t)for(const o of e)s[o]=w3(t,r)}class Jz extends F2{constructor(e,t,n,r,o){super(e,t,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let A=0;A<e.length;A++){let m=e[A];if(typeof m=="string"&&(m=m.trim(),B2(m))){const x=g3(m,t.current);x!==void 0&&(e[A]=x),A===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!x3.has(n)||e.length!==2)return;const[r,o]=e,c=PC(r),h=PC(o),u=NC(r),f=NC(o);if(u!==f&&Rd[n]){this.needsMeasurement=!0;return}if(c!==h)if(LC(c)&&LC(h))for(let A=0;A<e.length;A++){const m=e[A];typeof m=="string"&&(e[A]=parseFloat(m))}else Rd[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(e[r]===null||Vz(e[r]))&&n.push(r);n.length&&Xz(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const o=n.length-1,c=n[o];n[o]=Rd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([u,f])=>{e.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function qz(s,e,t){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const r=(t==null?void 0:t[s])??n.querySelectorAll(s);return r?Array.from(r):[]}return Array.from(s)}const j3=(s,e)=>e&&typeof s=="number"?e.transform(s):s;function Zz(s){return PI(s)&&"offsetHeight"in s}const MC=30,eG=s=>!isNaN(parseFloat(s));class tG{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var o;const r=vl.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=vl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=eG(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new b2);const n=this.events[e].add(t);return e==="change"?()=>{n(),Ra.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=vl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MC);return MI(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gm(s,e){return new tG(s,e)}const{schedule:R2}=qI(queueMicrotask,!1),nc={x:!1,y:!1};function B3(){return nc.x||nc.y}function sG(s){return s==="x"||s==="y"?nc[s]?null:(nc[s]=!0,()=>{nc[s]=!1}):nc.x||nc.y?null:(nc.x=nc.y=!0,()=>{nc.x=nc.y=!1})}function S3(s,e){const t=qz(s),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[t,r,()=>n.abort()]}function HC(s){return!(s.pointerType==="touch"||B3())}function nG(s,e,t={}){const[n,r,o]=S3(s,t),c=h=>{if(!HC(h))return;const{target:u}=h,f=e(u,h);if(typeof f!="function"||!u)return;const A=m=>{HC(m)&&(f(m),u.removeEventListener("pointerleave",A))};u.addEventListener("pointerleave",A,r)};return n.forEach(h=>{h.addEventListener("pointerenter",c,r)}),o}const C3=(s,e)=>e?s===e?!0:C3(s,e.parentElement):!1,L2=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,rG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N3(s){return rG.has(s.tagName)||s.isContentEditable===!0}const Nx=new WeakSet;function VC(s){return e=>{e.key==="Enter"&&s(e)}}function I1(s,e){s.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aG=(s,e)=>{const t=s.currentTarget;if(!t)return;const n=VC(()=>{if(Nx.has(t))return;I1(t,"down");const r=VC(()=>{I1(t,"up")}),o=()=>I1(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function KC(s){return L2(s)&&!B3()}function iG(s,e,t={}){const[n,r,o]=S3(s,t),c=h=>{const u=h.currentTarget;if(!KC(h))return;Nx.add(u);const f=e(u,h),A=(g,b)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),Nx.has(u)&&Nx.delete(u),KC(g)&&typeof f=="function"&&f(g,{success:b})},m=g=>{A(g,u===window||u===document||t.useGlobalTarget||C3(u,g.target))},x=g=>{A(g,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",x,r)};return n.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,r),Zz(h)&&(h.addEventListener("focus",f=>aG(f,r)),!N3(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function E3(s){return PI(s)&&"ownerSVGElement"in s}function oG(s){return E3(s)&&s.tagName==="svg"}const il=s=>!!(s&&s.getVelocity),lG=[...y3,Gi,Jd],AG=s=>lG.find(v3(s)),T3=Z.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function cG(s=!0){const e=Z.useContext(p2);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,o=Z.useId();Z.useEffect(()=>{if(s)return r(o)},[s]);const c=Z.useCallback(()=>s&&n&&n(o),[o,n,s]);return!t&&n?[!1,c]:[!0]}const I3=Z.createContext({strict:!1}),zC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xm={};for(const s in zC)xm[s]={isEnabled:e=>zC[s].some(t=>!!e[t])};function uG(s){for(const e in s)xm[e]={...xm[e],...s[e]}}const dG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function uv(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||dG.has(s)}let _3=s=>!uv(s);function hG(s){typeof s=="function"&&(_3=e=>e.startsWith("on")?!uv(e):s(e))}try{hG(require("@emotion/is-prop-valid").default)}catch{}function fG(s,e,t){const n={};for(const r in s)r==="values"&&typeof s.values=="object"||(_3(r)||t===!0&&uv(r)||!e&&!uv(r)||s.draggable&&r.startsWith("onDrag"))&&(n[r]=s[r]);return n}const zv=Z.createContext({});function Gv(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function jg(s){return typeof s=="string"||Array.isArray(s)}const Q2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],O2=["initial",...Q2];function $v(s){return Gv(s.animate)||O2.some(e=>jg(s[e]))}function F3(s){return!!($v(s)||s.variants)}function mG(s,e){if($v(s)){const{initial:t,animate:n}=s;return{initial:t===!1||jg(t)?t:void 0,animate:jg(n)?n:void 0}}return s.inherit!==!1?e:{}}function pG(s){const{initial:e,animate:t}=mG(s,Z.useContext(zv));return Z.useMemo(()=>({initial:e,animate:t}),[GC(e),GC(t)])}function GC(s){return Array.isArray(s)?s.join(" "):s}function $C(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const Tp={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(ws.test(s))s=parseFloat(s);else return s;const t=$C(s,e.target.x),n=$C(s,e.target.y);return`${t}% ${n}%`}},gG={correct:(s,{treeScale:e,projectionDelta:t})=>{const n=s,r=Jd.parse(s);if(r.length>5)return n;const o=Jd.createTransformer(s),c=typeof r[0]!="number"?1:0,h=t.x.scale*e.x,u=t.y.scale*e.y;r[0+c]/=h,r[1+c]/=u;const f=ni(h,u,.5);return typeof r[2+c]=="number"&&(r[2+c]/=f),typeof r[3+c]=="number"&&(r[3+c]/=f),o(r)}},Vb={borderRadius:{...Tp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tp,borderTopRightRadius:Tp,borderBottomLeftRadius:Tp,borderBottomRightRadius:Tp,boxShadow:gG};function U3(s,{layout:e,layoutId:t}){return Um.has(s)||s.startsWith("origin")||(e||t!==void 0)&&(!!Vb[s]||s==="opacity")}const xG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vG=Fm.length;function yG(s,e,t){let n="",r=!0;for(let o=0;o<vG;o++){const c=Fm[o],h=s[c];if(h===void 0)continue;let u=!0;if(typeof h=="number"?u=h===(c.startsWith("scale")?1:0):u=parseFloat(h)===0,!u||t){const f=j3(h,D2[c]);if(!u){r=!1;const A=xG[c]||c;n+=`${A}(${f}) `}t&&(e[c]=f)}}return n=n.trim(),t?n=t(e,r?"":n):r&&(n="none"),n}function P2(s,e,t){const{style:n,vars:r,transformOrigin:o}=s;let c=!1,h=!1;for(const u in e){const f=e[u];if(Um.has(u)){c=!0;continue}else if(e3(u)){r[u]=f;continue}else{const A=j3(f,D2[u]);u.startsWith("origin")?(h=!0,o[u]=A):n[u]=A}}if(e.transform||(c||t?n.transform=yG(e,s.transform,t):n.transform&&(n.transform="none")),h){const{originX:u="50%",originY:f="50%",originZ:A=0}=o;n.transformOrigin=`${u} ${f} ${A}`}}const k2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D3(s,e,t){for(const n in e)!il(e[n])&&!U3(n,t)&&(s[n]=e[n])}function bG({transformTemplate:s},e){return Z.useMemo(()=>{const t=k2();return P2(t,e,s),Object.assign({},t.vars,t.style)},[e])}function wG(s,e){const t=s.style||{},n={};return D3(n,t,s),Object.assign(n,bG(s,e)),n}function jG(s,e){const t={},n=wG(s,e);return s.drag&&s.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(t.tabIndex=0),t.style=n,t}const BG={offset:"stroke-dashoffset",array:"stroke-dasharray"},SG={offset:"strokeDashoffset",array:"strokeDasharray"};function CG(s,e,t=1,n=0,r=!0){s.pathLength=1;const o=r?BG:SG;s[o.offset]=ws.transform(-n);const c=ws.transform(e),h=ws.transform(t);s[o.array]=`${c} ${h}`}const NG=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function R3(s,{attrX:e,attrY:t,attrScale:n,pathLength:r,pathSpacing:o=1,pathOffset:c=0,...h},u,f,A){if(P2(s,h,f),u){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:x}=s;m.transform&&(x.transform=m.transform,delete m.transform),(x.transform||m.transformOrigin)&&(x.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),x.transform&&(x.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete m.transformBox);for(const g of NG)m[g]!==void 0&&(x[g]=m[g],delete m[g]);e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),r!==void 0&&CG(m,r,o,c,!1)}const L3=()=>({...k2(),attrs:{}}),Q3=s=>typeof s=="string"&&s.toLowerCase()==="svg";function EG(s,e,t,n){const r=Z.useMemo(()=>{const o=L3();return R3(o,e,Q3(n),s.transformTemplate,s.style),{...o.attrs,style:{...o.style}}},[e]);if(s.style){const o={};D3(o,s.style,s),r.style={...o,...r.style}}return r}const TG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function M2(s){return typeof s!="string"||s.includes("-")?!1:!!(TG.indexOf(s)>-1||/[A-Z]/u.test(s))}function IG(s,e,t,{latestValues:n},r,o=!1,c){const u=(c??M2(s)?EG:jG)(e,n,r,s),f=fG(e,typeof s=="string",o),A=s!==Z.Fragment?{...f,...u,ref:t}:{},{children:m}=e,x=Z.useMemo(()=>il(m)?m.get():m,[m]);return Z.createElement(s,{...A,children:x})}function YC(s){const e=[{},{}];return s==null||s.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function H2(s,e,t,n){if(typeof e=="function"){const[r,o]=YC(n);e=e(t!==void 0?t:s.custom,r,o)}if(typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"){const[r,o]=YC(n);e=e(t!==void 0?t:s.custom,r,o)}return e}function Ex(s){return il(s)?s.get():s}function _G({scrapeMotionValuesFromProps:s,createRenderState:e},t,n,r){return{latestValues:FG(t,n,r,s),renderState:e()}}function FG(s,e,t,n){const r={},o=n(s,{});for(const x in o)r[x]=Ex(o[x]);let{initial:c,animate:h}=s;const u=$v(s),f=F3(s);e&&f&&!u&&s.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let A=t?t.initial===!1:!1;A=A||c===!1;const m=A?h:c;if(m&&typeof m!="boolean"&&!Gv(m)){const x=Array.isArray(m)?m:[m];for(let g=0;g<x.length;g++){const b=H2(s,x[g]);if(b){const{transitionEnd:I,transition:N,...C}=b;for(const E in C){let F=C[E];if(Array.isArray(F)){const L=A?F.length-1:0;F=F[L]}F!==null&&(r[E]=F)}for(const E in I)r[E]=I[E]}}}return r}const O3=s=>(e,t)=>{const n=Z.useContext(zv),r=Z.useContext(p2),o=()=>_G(s,e,n,r);return t?o():dK(o)};function V2(s,e,t){var o;const{style:n}=s,r={};for(const c in n)(il(n[c])||e.style&&il(e.style[c])||U3(c,s)||((o=t==null?void 0:t.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(r[c]=n[c]);return r}const UG=O3({scrapeMotionValuesFromProps:V2,createRenderState:k2});function P3(s,e,t){const n=V2(s,e,t);for(const r in s)if(il(s[r])||il(e[r])){const o=Fm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=s[r]}return n}const DG=O3({scrapeMotionValuesFromProps:P3,createRenderState:L3}),RG=Symbol.for("motionComponentSymbol");function LG(s,e,t){const n=Z.useRef(t);Z.useInsertionEffect(()=>{n.current=t});const r=Z.useRef(null);return Z.useCallback(o=>{var h;o&&((h=s.onMount)==null||h.call(s,o)),e&&(o?e.mount(o):e.unmount());const c=n.current;if(typeof c=="function")if(o){const u=c(o);typeof u=="function"&&(r.current=u)}else r.current?(r.current(),r.current=null):c(o);else c&&(c.current=o)},[e])}const K2=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),QG="framerAppearId",k3="data-"+K2(QG),M3=Z.createContext({});function Op(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function OG(s,e,t,n,r,o){var N,C;const{visualElement:c}=Z.useContext(zv),h=Z.useContext(I3),u=Z.useContext(p2),f=Z.useContext(T3).reducedMotion,A=Z.useRef(null);n=n||h.renderer,!A.current&&n&&(A.current=n(s,{visualState:e,parent:c,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f,isSVG:o}));const m=A.current,x=Z.useContext(M3);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&PG(A.current,t,r,x);const g=Z.useRef(!1);Z.useInsertionEffect(()=>{m&&g.current&&m.update(t,u)});const b=t[k3],I=Z.useRef(!!b&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,b))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,b)));return hK(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),I.current&&m.animationState&&m.animationState.animateChanges())}),Z.useEffect(()=>{m&&(!I.current&&m.animationState&&m.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,b)}),I.current=!1),m.enteringChildren=void 0)}),m}function PG(s,e,t,n){const{layoutId:r,layout:o,drag:c,dragConstraints:h,layoutScroll:u,layoutRoot:f,layoutCrossfade:A}=e;s.projection=new t(s.latestValues,e["data-framer-portal-id"]?void 0:H3(s.parent)),s.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!c||h&&Op(h),visualElement:s,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:A,layoutScroll:u,layoutRoot:f})}function H3(s){if(s)return s.options.allowProjection!==!1?s.projection:H3(s.parent)}function _1(s,{forwardMotionProps:e=!1,type:t}={},n,r){n&&uG(n);const o=t?t==="svg":M2(s),c=o?DG:UG;function h(f,A){let m;const x={...Z.useContext(T3),...f,layoutId:kG(f)},{isStatic:g}=x,b=pG(f),I=c(f,g);if(!g&&m2){MG();const N=HG(x);m=N.MeasureLayout,b.visualElement=OG(s,I,x,r,N.ProjectionNode,o)}return i.jsxs(zv.Provider,{value:b,children:[m&&b.visualElement?i.jsx(m,{visualElement:b.visualElement,...x}):null,IG(s,f,LG(I,b.visualElement,A),I,g,e,o)]})}h.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const u=Z.forwardRef(h);return u[RG]=s,u}function kG({layoutId:s}){const e=Z.useContext(QI).id;return e&&s!==void 0?e+"-"+s:s}function MG(s,e){Z.useContext(I3).strict}function HG(s){const{drag:e,layout:t}=xm;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(s)||t!=null&&t.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function VG(s,e){if(typeof Proxy>"u")return _1;const t=new Map,n=(o,c)=>_1(o,c,s,e),r=(o,c)=>n(o,c);return new Proxy(r,{get:(o,c)=>c==="create"?n:(t.has(c)||t.set(c,_1(c,void 0,s,e)),t.get(c))})}function V3({top:s,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:s,max:n}}}function KG({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function zG(s,e){if(!e)return s;const t=e({x:s.left,y:s.top}),n=e({x:s.right,y:s.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function F1(s){return s===void 0||s===1}function Kb({scale:s,scaleX:e,scaleY:t}){return!F1(s)||!F1(e)||!F1(t)}function Qh(s){return Kb(s)||K3(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function K3(s){return WC(s.x)||WC(s.y)}function WC(s){return s&&s!=="0%"}function dv(s,e,t){const n=s-t,r=e*n;return t+r}function XC(s,e,t,n,r){return r!==void 0&&(s=dv(s,r,n)),dv(s,t,n)+e}function zb(s,e=0,t=1,n,r){s.min=XC(s.min,e,t,n,r),s.max=XC(s.max,e,t,n,r)}function z3(s,{x:e,y:t}){zb(s.x,e.translate,e.scale,e.originPoint),zb(s.y,t.translate,t.scale,t.originPoint)}const JC=.999999999999,qC=1.0000000000001;function GG(s,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let o,c;for(let h=0;h<r;h++){o=t[h],c=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Zf(s,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,z3(s,c)),n&&Qh(o.latestValues)&&Zf(s,o.latestValues))}e.x<qC&&e.x>JC&&(e.x=1),e.y<qC&&e.y>JC&&(e.y=1)}function qf(s,e){s.min=s.min+e,s.max=s.max+e}function ZC(s,e,t,n,r=.5){const o=ni(s.min,s.max,r);zb(s,e,t,o,n)}function Zf(s,e){ZC(s.x,e.x,e.scaleX,e.scale,e.originX),ZC(s.y,e.y,e.scaleY,e.scale,e.originY)}function G3(s,e){return V3(zG(s.getBoundingClientRect(),e))}function $G(s,e,t){const n=G3(s,t),{scroll:r}=e;return r&&(qf(n.x,r.offset.x),qf(n.y,r.offset.y)),n}const eN=()=>({translate:0,scale:1,origin:0,originPoint:0}),em=()=>({x:eN(),y:eN()}),tN=()=>({min:0,max:0}),io=()=>({x:tN(),y:tN()}),Gb={current:null},$3={current:!1};function YG(){if($3.current=!0,!!m2)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gb.current=s.matches;s.addEventListener("change",e),e()}else Gb.current=!1}const WG=new WeakMap;function XG(s,e,t){for(const n in e){const r=e[n],o=t[n];if(il(r))s.addValue(n,r);else if(il(o))s.addValue(n,gm(r,{owner:s}));else if(o!==r)if(s.hasValue(n)){const c=s.getValue(n);c.liveStyle===!0?c.jump(r):c.hasAnimated||c.set(r)}else{const c=s.getStaticValue(n);s.addValue(n,gm(c!==void 0?c:r,{owner:s}))}}for(const n in t)e[n]===void 0&&s.removeValue(n);return e}const sN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class JG{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=F2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=vl.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Ra.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=c;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=$v(t),this.isVariantNode=F3(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:A,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in m){const g=m[x];u[x]!==void 0&&il(g)&&g.set(u[x])}}mount(e){var t;this.current=e,WG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:($3.current||YG(),this.shouldReduceMotion=Gb.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Xd(this.notifyUpdate),Xd(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Um.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ra.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xm){const t=xm[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):io()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<sN.length;n++){const r=sN[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,c=e[o];c&&(this.propEventSubscriptions[r]=this.on(r,c))}this.prevMotionValues=XG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=gm(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(OI(n)||kI(n))?n=parseFloat(n):!AG(n)&&Jd.test(t)&&(n=w3(e,t)),this.setBaseTarget(e,il(n)?n.get():n)),il(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const c=H2(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);c&&(n=c[e])}if(t&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!il(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new b2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){R2.render(this.render)}}class Y3 extends JG{constructor(){super(...arguments),this.KeyframeResolver=Jz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;il(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function W3(s,{style:e,vars:t},n,r){const o=s.style;let c;for(c in e)o[c]=e[c];r==null||r.applyProjectionStyles(o,n);for(c in t)o.setProperty(c,t[c])}function qG(s){return window.getComputedStyle(s)}class ZG extends Y3{constructor(){super(...arguments),this.type="html",this.renderInstance=W3}readValueFromInstance(e,t){var n;if(Um.has(t))return(n=this.projection)!=null&&n.isProjecting?Lb(t):pz(e,t);{const r=qG(e),o=(e3(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return G3(e,t)}build(e,t,n){P2(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return V2(e,t,n)}}const X3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function e$(s,e,t,n){W3(s,e,void 0,n);for(const r in e.attrs)s.setAttribute(X3.has(r)?r:K2(r),e.attrs[r])}class t$ extends Y3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=io}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Um.has(t)){const n=b3(t);return n&&n.default||0}return t=X3.has(t)?t:K2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return P3(e,t,n)}build(e,t,n){R3(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){e$(e,t,n,r)}mount(e){this.isSVGTag=Q3(e.tagName),super.mount(e)}}const s$=(s,e)=>e.isSVG??M2(s)?new t$(e):new ZG(e,{allowProjection:s!==Z.Fragment});function im(s,e,t){const n=s.getProps();return H2(n,e,t!==void 0?t:n.custom,s)}const $b=s=>Array.isArray(s);function n$(s,e,t){s.hasValue(e)?s.getValue(e).set(t):s.addValue(e,gm(t))}function r$(s){return $b(s)?s[s.length-1]||0:s}function a$(s,e){const t=im(s,e);let{transitionEnd:n={},transition:r={},...o}=t||{};o={...o,...n};for(const c in o){const h=r$(o[c]);n$(s,c,h)}}function i$(s){return!!(il(s)&&s.add)}function Yb(s,e){const t=s.getValue("willChange");if(i$(t))return t.add(e);if(!t&&Fu.WillChange){const n=new Fu.WillChange("auto");s.addValue("willChange",n),n.add(e)}}function J3(s){return s.props[k3]}const o$=s=>s!==null;function l$(s,{repeat:e,repeatType:t="loop"},n){const r=s.filter(o$),o=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[o]}const A$={type:"spring",stiffness:500,damping:25,restSpeed:10},c$=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),u$={type:"keyframes",duration:.8},d$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h$=(s,{keyframes:e})=>e.length>2?u$:Um.has(s)?s.startsWith("scale")?c$(e[1]):A$:d$;function f$({when:s,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:c,repeatDelay:h,from:u,elapsed:f,...A}){return!!Object.keys(A).length}const z2=(s,e,t,n={},r,o)=>c=>{const h=U2(n,s)||{},u=h.delay||n.delay||0;let{elapsed:f=0}=n;f=f-Cu(u);const A={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-f,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:s,motionValue:e,element:o?void 0:r};f$(h)||Object.assign(A,h$(s,A)),A.duration&&(A.duration=Cu(A.duration)),A.repeatDelay&&(A.repeatDelay=Cu(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let m=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(Mb(A),A.delay===0&&(m=!0)),(Fu.instantAnimations||Fu.skipAnimations)&&(m=!0,Mb(A),A.delay=0),A.allowFlatten=!h.type&&!h.ease,m&&!o&&e.get()!==void 0){const x=l$(A.keyframes,h);if(x!==void 0){Ra.update(()=>{A.onUpdate(x),A.onComplete()});return}}return h.isSync?new _2(A):new Pz(A)};function m$({protectedKeys:s,needsAnimating:e},t){const n=s.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function q3(s,e,{delay:t=0,transitionOverride:n,type:r}={}){let{transition:o=s.getDefaultTransition(),transitionEnd:c,...h}=e;n&&(o=n);const u=[],f=r&&s.animationState&&s.animationState.getState()[r];for(const A in h){const m=s.getValue(A,s.latestValues[A]??null),x=h[A];if(x===void 0||f&&m$(f,A))continue;const g={delay:t,...U2(o||{},A)},b=m.get();if(b!==void 0&&!m.isAnimating&&!Array.isArray(x)&&x===b&&!g.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const C=J3(s);if(C){const E=window.MotionHandoffAnimation(C,A,Ra);E!==null&&(g.startTime=E,I=!0)}}Yb(s,A),m.start(z2(A,m,x,s.shouldReduceMotion&&x3.has(A)?{type:!1}:g,s,I));const N=m.animation;N&&u.push(N)}return c&&Promise.all(u).then(()=>{Ra.update(()=>{c&&a$(s,c)})}),u}function Z3(s,e,t,n=0,r=1){const o=Array.from(s).sort((f,A)=>f.sortNodePosition(A)).indexOf(e),c=s.size,h=(c-1)*n;return typeof t=="function"?t(o,c):r===1?o*n:h-o*n}function Wb(s,e,t={}){var u;const n=im(s,e,t.type==="exit"?(u=s.presenceContext)==null?void 0:u.custom:void 0);let{transition:r=s.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(r=t.transitionOverride);const o=n?()=>Promise.all(q3(s,n,t)):()=>Promise.resolve(),c=s.variantChildren&&s.variantChildren.size?(f=0)=>{const{delayChildren:A=0,staggerChildren:m,staggerDirection:x}=r;return p$(s,e,f,A,m,x,t)}:()=>Promise.resolve(),{when:h}=r;if(h){const[f,A]=h==="beforeChildren"?[o,c]:[c,o];return f().then(()=>A())}else return Promise.all([o(),c(t.delay)])}function p$(s,e,t=0,n=0,r=0,o=1,c){const h=[];for(const u of s.variantChildren)u.notify("AnimationStart",e),h.push(Wb(u,e,{...c,delay:t+(typeof n=="function"?0:n)+Z3(s.variantChildren,u,n,r,o)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(h)}function g$(s,e,t={}){s.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(o=>Wb(s,o,t));n=Promise.all(r)}else if(typeof e=="string")n=Wb(s,e,t);else{const r=typeof e=="function"?im(s,e,t.custom):e;n=Promise.all(q3(s,r,t))}return n.then(()=>{s.notify("AnimationComplete",e)})}function e_(s,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==s.length)return!1;for(let n=0;n<t;n++)if(e[n]!==s[n])return!1;return!0}const x$=O2.length;function t_(s){if(!s)return;if(!s.isControllingVariants){const t=s.parent?t_(s.parent)||{}:{};return s.props.initial!==void 0&&(t.initial=s.props.initial),t}const e={};for(let t=0;t<x$;t++){const n=O2[t],r=s.props[n];(jg(r)||r===!1)&&(e[n]=r)}return e}const v$=[...Q2].reverse(),y$=Q2.length;function b$(s){return e=>Promise.all(e.map(({animation:t,options:n})=>g$(s,t,n)))}function w$(s){let e=b$(s),t=nN(),n=!0;const r=u=>(f,A)=>{var x;const m=im(s,A,u==="exit"?(x=s.presenceContext)==null?void 0:x.custom:void 0);if(m){const{transition:g,transitionEnd:b,...I}=m;f={...f,...I,...b}}return f};function o(u){e=u(s)}function c(u){const{props:f}=s,A=t_(s.parent)||{},m=[],x=new Set;let g={},b=1/0;for(let N=0;N<y$;N++){const C=v$[N],E=t[C],F=f[C]!==void 0?f[C]:A[C],L=jg(F),O=C===u?E.isActive:null;O===!1&&(b=N);let H=F===A[C]&&F!==f[C]&&L;if(H&&n&&s.manuallyAnimateOnMount&&(H=!1),E.protectedKeys={...g},!E.isActive&&O===null||!F&&!E.prevProp||Gv(F)||typeof F=="boolean")continue;const Q=j$(E.prevProp,F);let U=Q||C===u&&E.isActive&&!H&&L||N>b&&L,R=!1;const $=Array.isArray(F)?F:[F];let P=$.reduce(r(C),{});O===!1&&(P={});const{prevResolvedValues:V={}}=E,G={...V,...P},ae=X=>{U=!0,x.has(X)&&(R=!0,x.delete(X)),E.needsAnimating[X]=!0;const Y=s.getValue(X);Y&&(Y.liveStyle=!1)};for(const X in G){const Y=P[X],re=V[X];if(g.hasOwnProperty(X))continue;let pe=!1;$b(Y)&&$b(re)?pe=!e_(Y,re):pe=Y!==re,pe?Y!=null?ae(X):x.add(X):Y!==void 0&&x.has(X)?ae(X):E.protectedKeys[X]=!0}E.prevProp=F,E.prevResolvedValues=P,E.isActive&&(g={...g,...P}),n&&s.blockInitialAnimation&&(U=!1);const ue=H&&Q;U&&(!ue||R)&&m.push(...$.map(X=>{const Y={type:C};if(typeof X=="string"&&n&&!ue&&s.manuallyAnimateOnMount&&s.parent){const{parent:re}=s,pe=im(re,X);if(re.enteringChildren&&pe){const{delayChildren:ee}=pe.transition||{};Y.delay=Z3(re.enteringChildren,s,ee)}}return{animation:X,options:Y}}))}if(x.size){const N={};if(typeof f.initial!="boolean"){const C=im(s,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(N.transition=C.transition)}x.forEach(C=>{const E=s.getBaseTarget(C),F=s.getValue(C);F&&(F.liveStyle=!0),N[C]=E??null}),m.push({animation:N})}let I=!!m.length;return n&&(f.initial===!1||f.initial===f.animate)&&!s.manuallyAnimateOnMount&&(I=!1),n=!1,I?e(m):Promise.resolve()}function h(u,f){var m;if(t[u].isActive===f)return Promise.resolve();(m=s.variantChildren)==null||m.forEach(x=>{var g;return(g=x.animationState)==null?void 0:g.setActive(u,f)}),t[u].isActive=f;const A=c(u);for(const x in t)t[x].protectedKeys={};return A}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=nN()}}}function j$(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!e_(e,s):!1}function Dh(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nN(){return{animate:Dh(!0),whileInView:Dh(),whileHover:Dh(),whileTap:Dh(),whileDrag:Dh(),whileFocus:Dh(),exit:Dh()}}class sh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class B$ extends sh{constructor(e){super(e),e.animationState||(e.animationState=w$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let S$=0;class C$ extends sh{constructor(){super(...arguments),this.id=S$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const N$={animation:{Feature:B$},exit:{Feature:C$}};function Bg(s,e,t,n={passive:!0}){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t)}function Gg(s){return{point:{x:s.pageX,y:s.pageY}}}const E$=s=>e=>L2(e)&&s(e,Gg(e));function sg(s,e,t,n){return Bg(s,e,E$(t),n)}const s_=1e-4,T$=1-s_,I$=1+s_,n_=.01,_$=0-n_,F$=0+n_;function yl(s){return s.max-s.min}function U$(s,e,t){return Math.abs(s-e)<=t}function rN(s,e,t,n=.5){s.origin=n,s.originPoint=ni(e.min,e.max,s.origin),s.scale=yl(t)/yl(e),s.translate=ni(t.min,t.max,s.origin)-s.originPoint,(s.scale>=T$&&s.scale<=I$||isNaN(s.scale))&&(s.scale=1),(s.translate>=_$&&s.translate<=F$||isNaN(s.translate))&&(s.translate=0)}function ng(s,e,t,n){rN(s.x,e.x,t.x,n?n.originX:void 0),rN(s.y,e.y,t.y,n?n.originY:void 0)}function aN(s,e,t){s.min=t.min+e.min,s.max=s.min+yl(e)}function D$(s,e,t){aN(s.x,e.x,t.x),aN(s.y,e.y,t.y)}function iN(s,e,t){s.min=e.min-t.min,s.max=s.min+yl(e)}function hv(s,e,t){iN(s.x,e.x,t.x),iN(s.y,e.y,t.y)}function TA(s){return[s("x"),s("y")]}const r_=({current:s})=>s?s.ownerDocument.defaultView:null,oN=(s,e)=>Math.abs(s-e);function R$(s,e){const t=oN(s.x,e.x),n=oN(s.y,e.y);return Math.sqrt(t**2+n**2)}const lN=new Set(["auto","scroll"]);class a_{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=D1(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,I=R$(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!I)return;const{point:N}=g,{timestamp:C}=No;this.history.push({...N,timestamp:C});const{onStart:E,onMove:F}=this.handlers;b||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=U1(b,this.transformPagePoint),Ra.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:I,onSessionEnd:N,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=D1(g.type==="pointercancel"?this.lastMoveEventInfo:U1(b,this.transformPagePoint),this.history);this.startEvent&&I&&I(g,E),N&&N(g,E)},!L2(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=c,this.contextWindow=r||window;const u=Gg(e),f=U1(u,this.transformPagePoint),{point:A}=f,{timestamp:m}=No;this.history=[{...A,timestamp:m}];const{onSessionStart:x}=t;x&&x(e,D1(f,this.history)),this.removeListeners=Vg(sg(this.contextWindow,"pointermove",this.handlePointerMove),sg(this.contextWindow,"pointerup",this.handlePointerUp),sg(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let t=e.parentElement;for(;t;){const n=getComputedStyle(t);(lN.has(n.overflowX)||lN.has(n.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:r.x-t.x,y:r.y-t.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,r),Ra.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Xd(this.updatePoint)}}function U1(s,e){return e?{point:e(s.point)}:s}function AN(s,e){return{x:s.x-e.x,y:s.y-e.y}}function D1({point:s},e){return{point:s,delta:AN(s,i_(e)),offset:AN(s,L$(e)),velocity:Q$(e,.1)}}function L$(s){return s[0]}function i_(s){return s[s.length-1]}function Q$(s,e){if(s.length<2)return{x:0,y:0};let t=s.length-1,n=null;const r=i_(s);for(;t>=0&&(n=s[t],!(r.timestamp-n.timestamp>Cu(e)));)t--;if(!n)return{x:0,y:0};const o=FA(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const c={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function O$(s,{min:e,max:t},n){return e!==void 0&&s<e?s=n?ni(e,s,n.min):Math.max(s,e):t!==void 0&&s>t&&(s=n?ni(t,s,n.max):Math.min(s,t)),s}function cN(s,e,t){return{min:e!==void 0?s.min+e:void 0,max:t!==void 0?s.max+t-(s.max-s.min):void 0}}function P$(s,{top:e,left:t,bottom:n,right:r}){return{x:cN(s.x,t,r),y:cN(s.y,e,n)}}function uN(s,e){let t=e.min-s.min,n=e.max-s.max;return e.max-e.min<s.max-s.min&&([t,n]=[n,t]),{min:t,max:n}}function k$(s,e){return{x:uN(s.x,e.x),y:uN(s.y,e.y)}}function M$(s,e){let t=.5;const n=yl(s),r=yl(e);return r>n?t=yg(e.min,e.max-n,s.min):n>r&&(t=yg(s.min,s.max-r,e.min)),Zc(0,1,t)}function H$(s,e){const t={};return e.min!==void 0&&(t.min=e.min-s.min),e.max!==void 0&&(t.max=e.max-s.min),t}const Xb=.35;function V$(s=Xb){return s===!1?s=0:s===!0&&(s=Xb),{x:dN(s,"left","right"),y:dN(s,"top","bottom")}}function dN(s,e,t){return{min:hN(s,e),max:hN(s,t)}}function hN(s,e){return typeof s=="number"?s:s[e]||0}const K$=new WeakMap;class z${constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=io(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=m=>{t?(this.stopAnimation(),this.snapToCursor(Gg(m).point)):this.pauseAnimation()},c=(m,x)=>{this.stopAnimation();const{drag:g,dragPropagation:b,onDragStart:I}=this.getProps();if(g&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sG(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),TA(C=>{let E=this.getAxisMotionValue(C).get()||0;if(Wc.test(E)){const{projection:F}=this.visualElement;if(F&&F.layout){const L=F.layout.layoutBox[C];L&&(E=yl(L)*(parseFloat(E)/100))}}this.originPoint[C]=E}),I&&Ra.postRender(()=>I(m,x)),Yb(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},h=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x;const{dragPropagation:g,dragDirectionLock:b,onDirectionLock:I,onDrag:N}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=x;if(b&&this.currentDirection===null){this.currentDirection=G$(C),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",x.point,C),this.updateAxis("y",x.point,C),this.visualElement.render(),N&&N(m,x)},u=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x,this.stop(m,x),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>TA(m=>{var x;return this.getAnimationState(m)==="paused"&&((x=this.getAxisMotionValue(m).animation)==null?void 0:x.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new a_(e,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:n,contextWindow:r_(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!n)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&Ra.postRender(()=>h(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!ox(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(c=O$(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,r=this.constraints;e&&Op(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=P$(n.layoutBox,e):this.constraints=!1,this.elastic=V$(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&TA(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=H$(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Op(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=$G(n,r.root,this.visualElement.getTransformPagePoint());let c=k$(r.layout.layoutBox,o);if(t){const h=t(KG(c));this.hasMutatedConstraints=!!h,h&&(c=V3(h))}return c}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),u=this.constraints||{},f=TA(A=>{if(!ox(A,t,this.currentDirection))return;let m=u&&u[A]||{};c&&(m={min:0,max:0});const x=r?200:1e6,g=r?40:1e7,b={type:"inertia",velocity:n?e[A]:0,bounceStiffness:x,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(A,b)});return Promise.all(f).then(h)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Yb(this.visualElement,e),n.start(z2(e,n,0,t,this.visualElement,!1))}stopAnimation(){TA(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){TA(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){TA(t=>{const{drag:n}=this.getProps();if(!ox(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(t);if(r&&r.layout){const{min:c,max:h}=r.layout.layoutBox[t],u=o.get()||0;o.set(e[t]-ni(c,h,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Op(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};TA(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const u=h.get();r[c]=M$({min:u,max:u},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),TA(c=>{if(!ox(c,e,null))return;const h=this.getAxisMotionValue(c),{min:u,max:f}=this.constraints[c];h.set(ni(u,f,r[c]))})}addListeners(){if(!this.visualElement.current)return;K$.set(this.visualElement,this);const e=this.visualElement.current,t=sg(e,"pointerdown",u=>{const{drag:f,dragListener:A=!0}=this.getProps();f&&A&&!N3(u.target)&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Op(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ra.read(n);const c=Bg(window,"resize",()=>this.scalePositionWithinConstraints()),h=r.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(TA(A=>{const m=this.getAxisMotionValue(A);m&&(this.originPoint[A]+=u[A].translate,m.set(m.get()+u[A].translate))}),this.visualElement.render())}));return()=>{c(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:c=Xb,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function ox(s,e,t){return(e===!0||e===s)&&(t===null||t===s)}function G$(s,e=10){let t=null;return Math.abs(s.y)>e?t="y":Math.abs(s.x)>e&&(t="x"),t}class $$ extends sh{constructor(e){super(e),this.removeGroupControls=LA,this.removeListeners=LA,this.controls=new z$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||LA}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const fN=s=>(e,t)=>{s&&Ra.postRender(()=>s(e,t))};class Y$ extends sh{constructor(){super(...arguments),this.removePointerDownListener=LA}onPointerDown(e){this.session=new a_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:fN(e),onStart:fN(t),onMove:n,onEnd:(o,c)=>{delete this.session,r&&Ra.postRender(()=>r(o,c))}}}mount(){this.removePointerDownListener=sg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let R1=!1;class W$ extends Z.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=e;o&&(t.group&&t.group.add(o),n&&n.register&&r&&n.register(o),R1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Tx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:o}=this.props,{projection:c}=n;return c&&(c.isPresent=o,R1=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Ra.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),R2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;R1=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function o_(s){const[e,t]=cG(),n=Z.useContext(QI);return i.jsx(W$,{...s,layoutGroup:n,switchLayoutGroup:Z.useContext(M3),isPresent:e,safeToRemove:t})}function X$(s,e,t){const n=il(s)?s:gm(s);return n.start(z2("",n,e,t)),n.animation}const J$=(s,e)=>s.depth-e.depth;class q${constructor(){this.children=[],this.isDirty=!1}add(e){g2(this.children,e),this.isDirty=!0}remove(e){x2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J$),this.isDirty=!1,this.children.forEach(e)}}function Z$(s,e){const t=vl.now(),n=({timestamp:r})=>{const o=r-t;o>=e&&(Xd(n),s(o-e))};return Ra.setup(n,!0),()=>Xd(n)}const l_=["TopLeft","TopRight","BottomLeft","BottomRight"],eY=l_.length,mN=s=>typeof s=="string"?parseFloat(s):s,pN=s=>typeof s=="number"||ws.test(s);function tY(s,e,t,n,r,o){r?(s.opacity=ni(0,t.opacity??1,sY(n)),s.opacityExit=ni(e.opacity??1,0,nY(n))):o&&(s.opacity=ni(e.opacity??1,t.opacity??1,n));for(let c=0;c<eY;c++){const h=`border${l_[c]}Radius`;let u=gN(e,h),f=gN(t,h);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||pN(u)===pN(f)?(s[h]=Math.max(ni(mN(u),mN(f),n),0),(Wc.test(f)||Wc.test(u))&&(s[h]+="%")):s[h]=f}(e.rotate||t.rotate)&&(s.rotate=ni(e.rotate||0,t.rotate||0,n))}function gN(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const sY=A_(0,.5,YI),nY=A_(.5,.95,LA);function A_(s,e,t){return n=>n<s?0:n>e?1:t(yg(s,e,n))}function xN(s,e){s.min=e.min,s.max=e.max}function sc(s,e){xN(s.x,e.x),xN(s.y,e.y)}function vN(s,e){s.translate=e.translate,s.scale=e.scale,s.originPoint=e.originPoint,s.origin=e.origin}function yN(s,e,t,n,r){return s-=e,s=dv(s,1/t,n),r!==void 0&&(s=dv(s,1/r,n)),s}function rY(s,e=0,t=1,n=.5,r,o=s,c=s){if(Wc.test(e)&&(e=parseFloat(e),e=ni(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=ni(o.min,o.max,n);s===o&&(h-=e),s.min=yN(s.min,e,t,h,r),s.max=yN(s.max,e,t,h,r)}function bN(s,e,[t,n,r],o,c){rY(s,e[t],e[n],e[r],e.scale,o,c)}const aY=["x","scaleX","originX"],iY=["y","scaleY","originY"];function wN(s,e,t,n){bN(s.x,e,aY,t?t.x:void 0,n?n.x:void 0),bN(s.y,e,iY,t?t.y:void 0,n?n.y:void 0)}function jN(s){return s.translate===0&&s.scale===1}function c_(s){return jN(s.x)&&jN(s.y)}function BN(s,e){return s.min===e.min&&s.max===e.max}function oY(s,e){return BN(s.x,e.x)&&BN(s.y,e.y)}function SN(s,e){return Math.round(s.min)===Math.round(e.min)&&Math.round(s.max)===Math.round(e.max)}function u_(s,e){return SN(s.x,e.x)&&SN(s.y,e.y)}function CN(s){return yl(s.x)/yl(s.y)}function NN(s,e){return s.translate===e.translate&&s.scale===e.scale&&s.originPoint===e.originPoint}class lY{constructor(){this.members=[]}add(e){g2(this.members,e),e.scheduleRender()}remove(e){if(x2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AY(s,e,t){let n="";const r=s.x.translate/e.x,o=s.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((r||o||c)&&(n=`translate3d(${r}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:A,rotateX:m,rotateY:x,skewX:g,skewY:b}=t;f&&(n=`perspective(${f}px) ${n}`),A&&(n+=`rotate(${A}deg) `),m&&(n+=`rotateX(${m}deg) `),x&&(n+=`rotateY(${x}deg) `),g&&(n+=`skewX(${g}deg) `),b&&(n+=`skewY(${b}deg) `)}const h=s.x.scale*e.x,u=s.y.scale*e.y;return(h!==1||u!==1)&&(n+=`scale(${h}, ${u})`),n||"none"}const L1=["","X","Y","Z"],cY=1e3;let uY=0;function Q1(s,e,t,n){const{latestValues:r}=e;r[s]&&(t[s]=r[s],e.setStaticValue(s,0),n&&(n[s]=0))}function d_(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:e}=s.options;if(!e)return;const t=J3(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:o}=s.options;window.MotionCancelOptimisedAnimation(t,"transform",Ra,!(r||o))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&d_(n)}function h_({attachResizeListener:s,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(c={},h=e==null?void 0:e()){this.id=uY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fY),this.nodes.forEach(xY),this.nodes.forEach(vY),this.nodes.forEach(mY)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new q$)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new b2),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const u=this.eventHandlers.get(c);u&&u.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=E3(c)&&!oG(c),this.instance=c;const{layoutId:h,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||h)&&(this.isLayoutDirty=!0),s){let A,m=0;const x=()=>this.root.updateBlockedByResize=!1;Ra.read(()=>{m=window.innerWidth}),s(c,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,A&&A(),A=Z$(x,250),Tx.hasAnimatedSinceResize&&(Tx.hasAnimatedSinceResize=!1,this.nodes.forEach(IN)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||u)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:m,hasRelativeLayoutChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||BY,{onLayoutAnimationStart:I,onLayoutAnimationComplete:N}=f.getProps(),C=!this.targetLayout||!u_(this.targetLayout,g),E=!m&&x;if(this.options.layoutRoot||this.resumeFrom||E||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...U2(b,"layout"),onPlay:I,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(A,E)}else m||IN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yY),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&d_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const m=this.path[A];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:h,layout:u}=this.options;if(h===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(TN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gY),this.nodes.forEach(dY),this.nodes.forEach(hY)):this.nodes.forEach(TN),this.clearAllSnapshots();const h=vl.now();No.delta=Zc(0,1e3/60,h-No.timestamp),No.timestamp=h,No.isProcessing=!0,B1.update.process(No),B1.preRender.process(No),B1.render.process(No),No.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,R2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pY),this.sharedNodes.forEach(bY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ra.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ra.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yl(this.snapshot.measuredBox.x)&&!yl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=io(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!c_(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,A=f!==this.prevTransformTemplateValue;c&&this.instance&&(h||Qh(this.latestValues)||A)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let u=this.removeElementScroll(h);return c&&(u=this.removeTransform(u)),SY(u),{animationId:this.root.animationId,measuredBox:h,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return io();const h=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(CY))){const{scroll:A}=this.root;A&&(qf(h.x,A.offset.x),qf(h.y,A.offset.y))}return h}removeElementScroll(c){var u;const h=io();if(sc(h,c),(u=this.scroll)!=null&&u.wasRoot)return h;for(let f=0;f<this.path.length;f++){const A=this.path[f],{scroll:m,options:x}=A;A!==this.root&&m&&x.layoutScroll&&(m.wasRoot&&sc(h,c),qf(h.x,m.offset.x),qf(h.y,m.offset.y))}return h}applyTransform(c,h=!1){const u=io();sc(u,c);for(let f=0;f<this.path.length;f++){const A=this.path[f];!h&&A.options.layoutScroll&&A.scroll&&A!==A.root&&Zf(u,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),Qh(A.latestValues)&&Zf(u,A.latestValues)}return Qh(this.latestValues)&&Zf(u,this.latestValues),u}removeTransform(c){const h=io();sc(h,c);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!Qh(f.latestValues))continue;Kb(f.latestValues)&&f.updateSnapshot();const A=io(),m=f.measurePageBox();sc(A,m),wN(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,A)}return Qh(this.latestValues)&&wN(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==No.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var g;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==h;if(!(c||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:m}=this.options;if(!this.layout||!(A||m))return;this.resolvedRelativeTargetAt=No.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=io(),this.targetWithTransforms=io()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sc(this.target,this.layout.layoutBox),z3(this.target,this.targetDelta)):sc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Kb(this.parent.latestValues)||K3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,u){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=io(),this.relativeTargetOrigin=io(),hv(this.relativeTargetOrigin,h,u),sc(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let u=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(u=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===No.timestamp&&(u=!1),u)return;const{layout:f,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||A))return;sc(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;GG(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=io());const{target:g}=c;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vN(this.prevProjectionDelta.x,this.projectionDelta.x),vN(this.prevProjectionDelta.y,this.projectionDelta.y)),ng(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!NN(this.projectionDelta.x,this.prevProjectionDelta.x)||!NN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=em(),this.projectionDelta=em(),this.projectionDeltaWithTransform=em()}setAnimationOrigin(c,h=!1){const u=this.snapshot,f=u?u.latestValues:{},A={...this.latestValues},m=em();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=io(),g=u?u.source:void 0,b=this.layout?this.layout.source:void 0,I=g!==b,N=this.getStack(),C=!N||N.members.length<=1,E=!!(I&&!C&&this.options.crossfade===!0&&!this.path.some(jY));this.animationProgress=0;let F;this.mixTargetDelta=L=>{const O=L/1e3;_N(m.x,c.x,O),_N(m.y,c.y,O),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hv(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wY(this.relativeTarget,this.relativeTargetOrigin,x,O),F&&oY(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=io()),sc(F,this.relativeTarget)),I&&(this.animationValues=A,tY(A,f,this.latestValues,O,E,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,u,f;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(f=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Xd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ra.update(()=>{Tx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gm(0)),this.currentAnimation=X$(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),c.onUpdate&&c.onUpdate(A)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cY),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:u,layout:f,latestValues:A}=c;if(!(!h||!u||!f)){if(this!==c&&this.layout&&f&&f_(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||io();const m=yl(this.layout.layoutBox.x);u.x.min=c.target.x.min,u.x.max=u.x.min+m;const x=yl(this.layout.layoutBox.y);u.y.min=c.target.y.min,u.y.max=u.y.min+x}sc(h,u),Zf(h,A),ng(this.projectionDeltaWithTransform,this.layoutCorrected,h,A)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new lY),this.sharedNodes.get(c).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:u}=c;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(h=!0),!h)return;const f={};u.z&&Q1("z",c,f,this.animationValues);for(let A=0;A<L1.length;A++)Q1(`rotate${L1[A]}`,c,f,this.animationValues),Q1(`skew${L1[A]}`,c,f,this.animationValues);c.render();for(const A in f)c.setStaticValue(A,f[A]),this.animationValues&&(this.animationValues[A]=f[A]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Ex(h==null?void 0:h.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Ex(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Qh(this.latestValues)&&(c.transform=u?u({},""):"none",this.hasProjected=!1);return}c.visibility="";const A=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=AY(this.projectionDeltaWithTransform,this.treeScale,A);u&&(m=u(A,m)),c.transform=m;const{x,y:g}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:c.opacity=f===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const b in Vb){if(A[b]===void 0)continue;const{correct:I,applyTo:N,isCSSVariable:C}=Vb[b],E=m==="none"?A[b]:I(A[b],f);if(N){const F=N.length;for(let L=0;L<F;L++)c[N[L]]=E}else C?this.options.visualElement.renderState.vars[b]=E:c[b]=E}this.options.layoutId&&(c.pointerEvents=f===this?Ex(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(EN),this.root.sharedNodes.clear()}}}function dY(s){s.updateLayout()}function hY(s){var t;const e=((t=s.resumeFrom)==null?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&e&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=s.layout,{animationType:o}=s.options,c=e.source!==s.layout.source;o==="size"?TA(m=>{const x=c?e.measuredBox[m]:e.layoutBox[m],g=yl(x);x.min=n[m].min,x.max=x.min+g}):f_(o,e.layoutBox,n)&&TA(m=>{const x=c?e.measuredBox[m]:e.layoutBox[m],g=yl(n[m]);x.max=x.min+g,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[m].max=s.relativeTarget[m].min+g)});const h=em();ng(h,n,e.layoutBox);const u=em();c?ng(u,s.applyTransform(r,!0),e.measuredBox):ng(u,n,e.layoutBox);const f=!c_(h);let A=!1;if(!s.resumeFrom){const m=s.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:x,layout:g}=m;if(x&&g){const b=io();hv(b,e.layoutBox,x.layoutBox);const I=io();hv(I,n,g.layoutBox),u_(b,I)||(A=!0),m.options.layoutRoot&&(s.relativeTarget=I,s.relativeTargetOrigin=b,s.relativeParent=m)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:A})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function fY(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function mY(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function pY(s){s.clearSnapshot()}function EN(s){s.clearMeasurements()}function TN(s){s.isLayoutDirty=!1}function gY(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function IN(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function xY(s){s.resolveTargetDelta()}function vY(s){s.calcProjection()}function yY(s){s.resetSkewAndRotation()}function bY(s){s.removeLeadSnapshot()}function _N(s,e,t){s.translate=ni(e.translate,0,t),s.scale=ni(e.scale,1,t),s.origin=e.origin,s.originPoint=e.originPoint}function FN(s,e,t,n){s.min=ni(e.min,t.min,n),s.max=ni(e.max,t.max,n)}function wY(s,e,t,n){FN(s.x,e.x,t.x,n),FN(s.y,e.y,t.y,n)}function jY(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const BY={duration:.45,ease:[.4,0,.1,1]},UN=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),DN=UN("applewebkit/")&&!UN("chrome/")?Math.round:LA;function RN(s){s.min=DN(s.min),s.max=DN(s.max)}function SY(s){RN(s.x),RN(s.y)}function f_(s,e,t){return s==="position"||s==="preserve-aspect"&&!U$(CN(e),CN(t),.2)}function CY(s){var e;return s!==s.root&&((e=s.scroll)==null?void 0:e.wasRoot)}const NY=h_({attachResizeListener:(s,e)=>Bg(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),O1={current:void 0},m_=h_({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!O1.current){const s=new NY({});s.mount(window),s.setOptions({layoutScroll:!0}),O1.current=s}return O1.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),EY={pan:{Feature:Y$},drag:{Feature:$$,ProjectionNode:m_,MeasureLayout:o_}};function LN(s,e,t){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,o=n[r];o&&Ra.postRender(()=>o(e,Gg(e)))}class TY extends sh{mount(){const{current:e}=this.node;e&&(this.unmount=nG(e,(t,n)=>(LN(this.node,n,"Start"),r=>LN(this.node,r,"End"))))}unmount(){}}class IY extends sh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vg(Bg(this.node.current,"focus",()=>this.onFocus()),Bg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function QN(s,e,t){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),o=n[r];o&&Ra.postRender(()=>o(e,Gg(e)))}class _Y extends sh{mount(){const{current:e}=this.node;e&&(this.unmount=iG(e,(t,n)=>(QN(this.node,n,"Start"),(r,{success:o})=>QN(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jb=new WeakMap,P1=new WeakMap,FY=s=>{const e=Jb.get(s.target);e&&e(s)},UY=s=>{s.forEach(FY)};function DY({root:s,...e}){const t=s||document;P1.has(t)||P1.set(t,{});const n=P1.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(UY,{root:s,...e})),n[r]}function RY(s,e,t){const n=DY(e);return Jb.set(s,t),n.observe(s),()=>{Jb.delete(s),n.unobserve(s)}}const LY={some:0,all:1};class QY extends sh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:o}=e,c={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:LY[r]},h=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:A,onViewportLeave:m}=this.node.getProps(),x=f?A:m;x&&x(u)};return RY(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(OY(e,t))&&this.startObserver()}unmount(){}}function OY({viewport:s={}},{viewport:e={}}={}){return t=>s[t]!==e[t]}const PY={inView:{Feature:QY},tap:{Feature:_Y},focus:{Feature:IY},hover:{Feature:TY}},kY={layout:{ProjectionNode:m_,MeasureLayout:o_}},MY={...N$,...PY,...EY,...kY},ON=VG(MY,s$),HY=({reopenDate:s})=>{const e=s?(()=>{const[t,n,r]=s.split("-").map(c=>parseInt(c,10));return new Date(t,n-1,r).toLocaleDateString()})():"Not set";return i.jsx(ON.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:i.jsxs(ON.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:.2},className:"bg-white rounded-lg p-8 m-4 text-center shadow-2xl",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"School is on Vacation!"}),i.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"The school is currently on break. We hope you are having a wonderful time."}),i.jsxs("p",{className:"text-lg text-gray-600",children:["School will reopen on"," ",i.jsx("span",{className:"font-semibold text-red-600",children:e}),"."]})]})})},PN=["Monday","Tuesday","Wednesday","Thursday","Friday"],VY=["punctuality","neatness","conduct","attitudeToWork","classParticipation","homeworkCompletion"],KY=["An outstanding performer with excellent academic progress.","Shows great potential and maintains good conduct in class.","Consistent effort and improvement throughout the term.","Active participant in class activities and assignments.","Demonstrates good leadership qualities among peers.","Maintains excellent attendance and punctuality.","Shows remarkable improvement in academic performance.","A disciplined student who follows school rules diligently.","Excellent interpersonal skills and teamwork abilities.","Creative and innovative in approaching class tasks."],p_=()=>{const{user:s}=Uo(),e=(s==null?void 0:s.schoolId)||null,[t,n]=Z.useState([]),r=(s==null?void 0:s.assignedClassIds)||[],[o,c]=Z.useState(""),[h,u]=Z.useState("Term 1"),[f,A]=Z.useState(null),[m,x]=Z.useState(!1);Z.useEffect(()=>{r.length>0&&c(r[0])},[s]);const g=Es.find(De=>De.id===o),b=r.map(De=>{var dt;return(dt=Es.find(at=>at.id===De))==null?void 0:dt.name}).join(", "),[I,N]=Z.useState([]),[C,E]=Z.useState(null),[F,L]=Z.useState(!1),[O,H]=Z.useState({show:!1,dates:[]}),[Q,U]=Z.useState({show:!1,date:""}),[R,$]=Z.useState(!1),[P,V]=Z.useState([]),[G,ae]=Z.useState({}),[ue,oe]=Z.useState(!1),[X,Y]=Z.useState(!1),[re,pe]=Z.useState([]),[ee,M]=Z.useState({}),[J,ie]=Z.useState(!1),[le,ce]=Z.useState([]),ve=()=>{const De=new Date().toLocaleDateString("en-US",{weekday:"long"});return PN.includes(De)?De:"Monday"},Se=(De=new Date)=>`${De.getFullYear()}-${String(De.getMonth()+1).padStart(2,"0")}-${String(De.getDate()).padStart(2,"0")}`,[ge,Be]=Z.useState(null),[Fe,Qe]=Z.useState(ve()),[Ze,Pe]=Z.useState([]),[me,nt]=Z.useState([]),[It,ut]=Z.useState([]),[ze,Ft]=Z.useState(0),[Qt,Ct]=Z.useState(0),[Jt,ts]=Z.useState(0),[as,Xe]=Z.useState(0),[Vt,Kt]=Z.useState(0),[Mt,mt]=Z.useState("0.0"),[Dt,Ns]=Z.useState([]);if(!s)return i.jsx(lr,{title:"Teacher Dashboard",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-8rem)]",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1160A8] mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500",children:"Loading dashboard..."})]})});const $t=(De=0)=>{const dt=new Date;dt.setDate(dt.getDate()+De*7);const at=dt.getDay(),Et=at===0?-6:1-at,Xt=new Date(dt);Xt.setDate(dt.getDate()+Et);const vt=[];for(let it=0;it<5;it++){const Rt=new Date(Xt);Rt.setDate(Xt.getDate()+it);const qt=Rt.getFullYear(),cs=String(Rt.getMonth()+1).padStart(2,"0"),Xs=String(Rt.getDate()).padStart(2,"0");vt.push(`${qt}-${cs}-${Xs}`)}return vt},Wt=De=>{if(De===0)return"This Week";const dt=$t(De),at=new Date(dt[0]+"T00:00:00"),Et=new Date(dt[4]+"T00:00:00"),Xt={month:"short",day:"numeric"},vt=at.toLocaleDateString("en-US",Xt),it=Et.toLocaleDateString("en-US",Xt);return De===-1?`Last Week (${vt} - ${it})`:`${vt} - ${it}`},lt=async De=>{if(!e||!(s!=null&&s.id))return;const dt=$t(De),at=await Promise.all(dt.map(Xt=>ot.getTeacherAttendance(e,(s==null?void 0:s.id)||"",Xt))),Et=dt.map((Xt,vt)=>{const it=at[vt],[Rt,qt,cs]=Xt.split("-").map(Number),Ls=new Date(Rt,qt-1,cs).toLocaleDateString("en-US",{weekday:"short"}),Yt=it?it.status==="absent"?"absent":it.approvalStatus||"approved":"missing";return{day:Ls,percentage:it?100:0,status:Yt}});ut(Xt=>Et.some(it=>it.status!=="missing")?Et:Xt)};Z.useEffect(()=>{let De=!0;return s&&(async()=>{const at=Se();await ot.getTeacherAttendance(e||void 0,(s==null?void 0:s.id)||"",at);try{if(!e)return;const Et=await ot.getSchoolConfig(e);if(!De)return;const Xt=new Date,vt=Et.schoolReopenDate?new Date(Et.schoolReopenDate+"T00:00:00"):null;vt&&vt.setHours(0,0,0,0);const it=new Date;it.setHours(0,0,0,0);const Rt=Et.nextTermBegins?new Date(Et.nextTermBegins+"T00:00:00"):null;if(Rt&&Rt.setHours(0,0,0,0),Rt&&it.getTime()===Rt.getTime()){H({show:!1,dates:[]}),U({show:!1,date:""});return}const qt=Et.vacationDate?new Date(Et.vacationDate+"T00:00:00"):null;qt&&qt.setHours(0,0,0,0);const cs=!vt||Xt>=vt,Xs=qt&&Rt&&it>=qt&&it<Rt;if(cs&&!Xs){const Ls=[];let Yt=new Date;for(Yt.setDate(Yt.getDate()-1);Yt>=vt;){const hn=Yt.getDay(),Tr=qt&&Yt.toDateString()===qt.toDateString();if(hn===0||hn===6||Tr){Yt.setDate(Yt.getDate()-1);continue}const dr=`${Yt.getFullYear()}-${String(Yt.getMonth()+1).padStart(2,"0")}-${String(Yt.getDate()).padStart(2,"0")}`,hr=await ot.getTeacherAttendance(e,(s==null?void 0:s.id)||"",dr);if(!De)return;hr||Ls.push(dr),Yt.setDate(Yt.getDate()-1)}if(Ls.length>0?H({show:!0,dates:Ls}):H({show:!1,dates:[]}),o&&Ls.length>0){const hn=Ls[0],Tr=await ot.getAttendance(e,o,hn);if(!De)return;U(Tr?{show:!1,date:""}:{show:!0,date:hn})}}}catch(Et){console.error("Error re-checking missed attendance:",Et)}})(),()=>{De=!1}},[s,o,ze,e]),Z.useEffect(()=>{!e||!(s!=null&&s.id)||lt(ze)},[e,s==null?void 0:s.id,ze]),Z.useEffect(()=>{if(!e||!(s!=null&&s.id))return;const De=Ks(Rs(wt,"teacher_attendance"),rs("schoolId","==",e),rs("teacherId","==",s.id)),dt=_d(De,async()=>{await lt(ze);const at=Se(),Et=await ot.getTeacherAttendance(e,s.id,at);E(Et)});return()=>dt()},[e,s==null?void 0:s.id,ze]),Z.useEffect(()=>{if(!e||!o)return;const De=Ks(Rs(wt,"attendance"),rs("schoolId","==",e),rs("classId","==",o)),dt=_d(De,async()=>{try{const[at,Et]=await Promise.all([ot.getClassAttendance(e,o),ot.getStudents(e,o)]),Xt=Et.length||1,vt=$t(ze),it=at.filter(Ls=>vt.includes(Ls.date)),Rt=vt.map(Ls=>{const Yt=it.find(pn=>pn.date===Ls),hn=Yt?Math.round(Yt.presentStudentIds.length/Xt*100):0,[Tr,dr,hr]=Ls.split("-").map(Number);return{day:new Date(Tr,dr-1,hr).toLocaleDateString("en-US",{weekday:"short"}),percentage:hn}});nt(Rt),Ct(Et.length);const qt=Se(),cs=at.find(Ls=>Ls.date===qt),Xs=cs?cs.presentStudentIds.length:0;ts(Xs),Xe(cs?Et.length-Xs:0)}catch(at){console.error("Error updating attendance trend:",at)}});return()=>dt()},[e,o,ze]),Z.useEffect(()=>{let De=!0;return(async()=>{if(!o||!e)return;let at;try{if(at=await ot.getSchoolConfig(e),De){A(at),u(at.currentTerm||`Term ${Xi}`);const Rt=new Date;Rt.setHours(0,0,0,0);const qt=Rt.getTime();let cs=null;if(at.vacationDate){const hn=new Date(at.vacationDate+"T00:00:00");hn.setHours(0,0,0,0),cs=hn.getTime()}let Xs=null;if(at.nextTermBegins){const hn=new Date(at.nextTermBegins+"T00:00:00");hn.setHours(0,0,0,0),Xs=hn.getTime()}let Ls=null;if(cs!==null){const hn=new Date(cs);hn.setDate(hn.getDate()+1),Ls=hn.getTime()}let Yt=!1;if(Ls!==null&&qt>=Ls&&Xs!==null&&qt<Xs&&(Yt=!0),x(Yt),console.log("--- Vacation Overlay Debug ---"),console.log("Current Date (Local Midnight):",Rt.toLocaleDateString()),console.log("Vacation Date (Last School Day):",at.vacationDate),console.log("Vacation Starts (Local Midnight):",Ls?new Date(Ls).toLocaleDateString():"N/A"),console.log("Next Term Begins (Local Midnight):",at.nextTermBegins),console.log("Is Vacation:",Yt),console.log("--- End Debug ---"),at.nextTermBegins&&qt>=Xs){if(at.termTransitionProcessed===!1){console.log("New term begins today or has passed. Initiating dashboard reset...");try{await ot.resetForNewTerm(at),await ot.updateSchoolConfig({...at,termTransitionProcessed:!0}),Pt("New term started! Dashboard has been reset.",{type:"success"}),window.location.reload()}catch(hn){console.error("Error during new term reset:",hn),Pt("Failed to reset dashboard for new term.",{type:"error"})}}}else at.nextTermBegins&&qt<Xs&&at.termTransitionProcessed===!0&&await ot.updateSchoolConfig({...at,termTransitionProcessed:!1})}}catch(Rt){console.error(Rt),at={currentTerm:`Term ${Xi}`,academicYear:Io,schoolReopenDate:"",schoolName:"School Manager GH",headTeacherRemark:"An outstanding performance. The school is proud of you.",termEndDate:"2024-12-20",vacationDate:"2024-12-20",nextTermBegins:"",termTransitionProcessed:!1,schoolId:""}}const Et=await ot.getSubjects(e,o);if(!De)return;n(Et);const Xt=await ot.getNotices(e);if(!De)return;N(Xt);const vt=Se(),it=await ot.getTeacherAttendance(e,(s==null?void 0:s.id)||"",vt);if(De){if(E(it),o){const Rt=await ot.getTimetable(e,o);if(!De)return;Be(Rt||null),Qe(ve());try{const[qt,cs]=await Promise.all([ot.getClassAttendance(e,o),ot.getStudents(e,o)]);if(!De)return;const Xs=cs.length||1,Ls=$t(ze),Yt=qt.filter(yn=>Ls.includes(yn.date)),hn=Ls.map(yn=>{const _r=Yt.find(Qa=>Qa.date===yn),ea=_r?Math.round(_r.presentStudentIds.length/Xs*100):0,[xr,Fr,da]=yn.split("-").map(Number);return{day:new Date(xr,Fr-1,da).toLocaleDateString("en-US",{weekday:"short"}),percentage:ea}});nt(hn),ce(cs),Ct(cs.length);const Tr=Se(),dr=qt.find(yn=>yn.date===Tr),hr=dr?dr.presentStudentIds.length:0;ts(hr),Xe(dr?cs.length-hr:0);const Zt=parseInt((at.currentTerm||`Term ${Xi}`).split(" ")[1]);let mn=0,pn=0;for(const yn of Et){const ea=(await ot.getAssessments(e,o,yn)).filter(xr=>xr.term===Zt);for(const xr of ea){const Fr=xr.total??_A(xr);mn+=Fr,pn++}}const Nn=pn>0?mn/pn:0;Kt(Nn);const En=(await ot.getStudentSkills(e,o)).filter(yn=>yn.term===Zt);let An=0,Ir=0;const ya={Excellent:5,"Very Good":4,Good:3,Fair:2,Poor:1};for(const yn of En)yn.conduct&&(An+=ya[yn.conduct]||0,Ir++);const ai=Ir>0?An/Ir:0;mt(ai.toFixed(1));const ii=[];for(const yn of Et){const ea=(await ot.getAssessments(e,o,yn)).filter(zn=>zn.term===Zt);if(ea.length===0)continue;let xr=0,Fr=0,da="";for(const zn of ea){const Qa=zn.total??_A(zn),ha=cs.find(Ur=>Ur.id===zn.studentId);ha&&Qa>Fr&&(Fr=Qa,da=ha.name),xr+=Qa}const La=xr/ea.length;ii.push({subject:yn,topStudent:da,average:La})}ii.sort((yn,_r)=>_r.average-yn.average),Ns(ii)}catch(qt){console.error("Error calculating dashboard stats:",qt)}}try{await lt(ze)}catch(Rt){console.error("Error calculating teacher attendance trend:",Rt)}}})(),()=>{De=!1}},[o,ze,e]),Z.useEffect(()=>{if(ge&&ge.schedule&&Fe){const De=ge.schedule[Fe]||[];Pe(De)}else Pe([])},[ge,Fe]);const Ot=De=>{switch(De){case"break":return{border:"border-amber-400",bgHover:"group-hover:bg-amber-50",text:"text-amber-700 italic",badge:"text-amber-600"};case"worship":return{border:"border-purple-400",bgHover:"group-hover:bg-purple-50",text:"text-purple-700 font-semibold",badge:"text-purple-600"};case"closing":return{border:"border-slate-400",bgHover:"group-hover:bg-slate-50",text:"text-slate-700 font-bold",badge:"text-slate-600"};default:return{border:"border-[#1160A8]",bgHover:"group-hover:bg-[#E6F0FA]",text:"text-slate-800",badge:"text-[#1160A8]"}}};return i.jsxs(lr,{title:"Teacher Dashboard",children:[m&&i.jsx(HY,{reopenDate:(f==null?void 0:f.nextTermBegins)||"TBD"}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-800",children:["Welcome back, ",s==null?void 0:s.fullName]}),i.jsxs("p",{className:"text-slate-500 mt-1",children:[i.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-[#1160A8] mr-2"}),"Class Teacher for:"," ",i.jsx("span",{className:"font-semibold text-slate-800",children:b||"Not Assigned"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-end sm:items-center",children:[r.length>1&&i.jsxs("div",{className:"flex items-center bg-white border border-slate-200 rounded-lg px-3 py-1.5 shadow-sm",children:[i.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase mr-2",children:"Viewing:"}),i.jsx("select",{value:o,onChange:De=>c(De.target.value),className:"text-sm font-semibold text-slate-800 bg-transparent outline-none cursor-pointer",children:r.map(De=>{const dt=Es.find(at=>at.id===De);return i.jsx("option",{value:De,children:dt==null?void 0:dt.name},De)})})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-100 uppercase tracking-wide",children:[h," Active"]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs(Ua,{to:"/teacher/attendance",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-[#1160A8] transition-all relative overflow-hidden",children:[i.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-[#E6F0FA] rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-[#E6F0FA] rounded-lg flex items-center justify-center mb-4 group-hover:bg-[#0B4A82] transition-colors",children:i.jsx(Xf,{className:"w-6 h-6 text-[#1160A8] group-hover:text-white"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Take Attendance"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Record daily register for"," ",(g==null?void 0:g.name)||"your class","."]})]})]}),i.jsxs(Ua,{to:"/teacher/assessment",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-amber-500 transition-all relative overflow-hidden",children:[i.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-amber-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-amber-500 transition-colors",children:i.jsx(zl,{className:"w-6 h-6 text-amber-600 group-hover:text-white"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Gradebook"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Record marks for tests, homework & exams."})]})]}),i.jsxs(Ua,{to:"/teacher/my-attendance",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-green-500 transition-all relative overflow-hidden w-full text-left",children:[i.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-green-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-green-500 transition-colors",children:i.jsx(Xf,{className:"w-6 h-6 text-green-600 group-hover:text-white"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"My Attendance"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Mark weekly attendance & view records"}),C&&i.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-xs text-slate-400",children:[i.jsxs("span",{children:["Last marked: ",C.date]}),C.approvalStatus==="pending"&&i.jsx("span",{className:"rounded-full bg-amber-50 px-2 py-0.5 text-[10px] font-semibold text-amber-700",children:"Pending approval"})]})]})]}),i.jsxs("button",{onClick:async()=>{let De=le;(!De||De.length===0)&&(De=await ot.getStudents(e,o));const at=(await ot.getStudentRemarks(e,o)).reduce((vt,it)=>(vt[it.studentId]={remark:it.remark,behaviorTag:it.behaviorTag},vt),{});ae(at);const Xt=(await ot.getStudentSkills(e,o)).reduce((vt,it)=>(vt[it.studentId]={punctuality:it.punctuality,neatness:it.neatness,conduct:it.conduct,attitudeToWork:it.attitudeToWork,classParticipation:it.classParticipation,homeworkCompletion:it.homeworkCompletion},vt),{});M(Xt),V(De||[]),$(!0)},className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-purple-500 transition-all relative overflow-hidden w-full text-left",children:[i.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-purple-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-purple-500 transition-colors",children:i.jsx(zl,{className:"w-6 h-6 text-purple-600 group-hover:text-white"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Write Remarks"}),i.jsx("p",{className:"text-sm text-slate-500",children:"End of term comments & behavior tags."})]})]}),i.jsxs("button",{onClick:async()=>{let De=le;(!De||De.length===0)&&(De=await ot.getStudents(e,o));const at=(await ot.getStudentSkills(e,o)).reduce((Et,Xt)=>(Et[Xt.studentId]={punctuality:Xt.punctuality,neatness:Xt.neatness,conduct:Xt.conduct,attitudeToWork:Xt.attitudeToWork,classParticipation:Xt.classParticipation,homeworkCompletion:Xt.homeworkCompletion},Et),{});M(at),pe(De||[]),Y(!0)},className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-[#1160A8] transition-all relative overflow-hidden w-full text-left",children:[i.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-[#E6F0FA] rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-[#E6F0FA] rounded-lg flex items-center justify-center mb-4 group-hover:bg-[#1160A8] transition-colors",children:i.jsx(Ud,{className:"w-6 h-6 text-[#1160A8] group-hover:text-white"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Edit Skills"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Rate student skills and behavior."})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Class Health"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Total Students:"}),i.jsx("span",{className:"font-semibold",children:Qt})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Present Today:"}),i.jsx("span",{className:"font-semibold text-green-600",children:Jt})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Absent Today:"}),i.jsx("span",{className:"font-semibold text-red-600",children:as})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Average Performance"}),i.jsx("div",{className:"text-center",children:Vt>0?i.jsxs("span",{className:"text-2xl font-bold text-[#1160A8]",children:[Vt.toFixed(1),"%"]}):i.jsx("span",{className:"text-sm text-slate-400 italic",children:"No assessment data."})})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Behavior Average"}),i.jsx("div",{className:"text-center",children:parseFloat(Mt)>0?i.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[Mt,"/5"]}):i.jsx("span",{className:"text-sm text-slate-400 italic",children:"No behavior data."})})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Subject Standings"}),i.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:Dt.slice(0,3).map(De=>i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{children:[De.subject,":"]}),i.jsx("span",{className:"font-semibold",children:De.topStudent||"N/A"})]},De.subject))})]})]}),i.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 gap-3 sm:gap-0",children:[i.jsxs("h3",{className:"font-bold text-slate-800 flex items-center text-base sm:text-lg",children:[i.jsx(Ud,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-[#1160A8]"})," ","Students Weekly Attendance Trend"]}),i.jsxs("div",{className:"flex gap-2 items-center w-full sm:w-auto justify-center sm:justify-start",children:[i.jsx("button",{onClick:()=>Ft(ze-1),className:"px-3 py-1.5 text-xs font-medium rounded-full bg-slate-100 hover:bg-slate-200 transition-colors min-w-[60px] touch-manipulation",children:" Prev"}),i.jsx("span",{className:"px-3 py-1.5 text-xs font-medium rounded-full bg-[#1160A8] text-white text-center min-w-[120px] sm:w-36 truncate",children:Wt(ze)}),i.jsx("button",{onClick:()=>Ft(ze+1),disabled:ze===0,className:"px-3 py-1.5 text-xs font-medium rounded-full bg-slate-100 hover:bg-slate-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-w-[60px] touch-manipulation",children:"Next "})]})]}),i.jsx("div",{className:"flex items-end justify-between h-32 sm:h-40 gap-1 sm:gap-2 px-1 sm:px-2",children:me.length===0?i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-300",children:[i.jsx(Ud,{className:"w-6 h-6 sm:w-8 sm:h-8 mb-2 opacity-30"}),i.jsx("p",{className:"text-xs sm:text-sm italic",children:"No attendance records found."})]}):me.map((De,dt)=>i.jsxs("div",{className:"flex flex-col items-center flex-1 group min-w-0",children:[i.jsxs("div",{className:"relative w-full flex justify-center",children:[i.jsx("div",{className:"w-full max-w-[32px] sm:max-w-[40px] bg-slate-100 rounded-t-lg transition-all duration-500 group-hover:bg-[#E6F0FA] relative overflow-hidden",style:{height:"120px"},children:i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-[#1160A8] rounded-t-lg transition-all duration-1000",style:{height:`${De.percentage}%`}})}),i.jsxs("div",{className:"hidden sm:block absolute -top-8 bg-slate-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[De.percentage,"%"]}),i.jsxs("div",{className:"sm:hidden absolute -top-6 bg-slate-800 text-white text-xs py-0.5 px-1 rounded opacity-0 group-active:opacity-100 transition-opacity",children:[De.percentage,"%"]})]}),i.jsx("span",{className:"text-xs text-slate-500 mt-2 sm:mt-3 font-medium truncate",children:De.day})]},dt))})]}),i.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 gap-3 sm:gap-0",children:[i.jsxs("h3",{className:"font-bold text-slate-800 flex items-center text-base sm:text-lg",children:[i.jsx(Xf,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-emerald-600"})," ","Teacher Attendance Trend"]}),i.jsxs("div",{className:"flex gap-2 items-center w-full sm:w-auto justify-center sm:justify-start",children:[i.jsx("button",{onClick:()=>Ft(ze-1),className:"px-3 py-1.5 text-xs font-medium rounded-full bg-slate-100 hover:bg-slate-200 transition-colors min-w-[60px] touch-manipulation",children:" Prev"}),i.jsx("span",{className:"px-3 py-1.5 text-xs font-medium rounded-full bg-emerald-600 text-white text-center min-w-[120px] sm:w-36 truncate",children:Wt(ze)}),i.jsx("button",{onClick:()=>Ft(ze+1),disabled:ze===0,className:"px-3 py-1.5 text-xs font-medium rounded-full bg-slate-100 hover:bg-slate-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-w-[60px] touch-manipulation",children:"Next "})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[10px] text-slate-500 mb-3",children:[i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 font-semibold text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Present (Approved)"]}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 font-semibold text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"}),"Absent (Rejected)"]}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200 bg-amber-50 px-2 py-0.5 font-semibold text-amber-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-amber-400"}),"Pending"]})]}),i.jsx("div",{className:"flex items-end justify-between h-32 sm:h-40 gap-1 sm:gap-2 px-1 sm:px-2",children:It.length===0?i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-300",children:[i.jsx(Xf,{className:"w-6 h-6 sm:w-8 sm:h-8 mb-2 opacity-30"}),i.jsx("p",{className:"text-xs sm:text-sm italic",children:"No attendance records found."})]}):It.map((De,dt)=>i.jsxs("div",{className:"flex flex-col items-center flex-1 group min-w-0",children:[i.jsxs("div",{className:"relative w-full flex justify-center",children:[i.jsx("div",{className:"w-full max-w-[32px] sm:max-w-[40px] bg-slate-100 rounded-t-lg transition-all duration-500 group-hover:bg-emerald-50 relative overflow-hidden",style:{height:"120px"},children:i.jsx("div",{className:`absolute bottom-0 left-0 right-0 rounded-t-lg transition-all duration-1000 ${De.status==="pending"?"bg-amber-400":De.status==="approved"?"bg-emerald-500":De.status==="rejected"||De.status==="absent"?"bg-rose-500":"bg-slate-300"}`,style:{height:`${De.percentage}%`}})}),i.jsx("div",{className:"hidden sm:block absolute -top-8 bg-slate-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:De.status==="pending"?"Pending":De.status==="approved"?"Approved":De.status==="rejected"||De.status==="absent"?"Absent":"Missing"}),i.jsx("div",{className:"sm:hidden absolute -top-6 bg-slate-800 text-white text-xs py-0.5 px-1 rounded opacity-0 group-active:opacity-100 transition-opacity",children:De.status==="pending"?"Pending":De.status==="approved"?"Approved":De.status==="rejected"||De.status==="absent"?"Absent":"Missing"})]}),i.jsx("span",{className:"text-xs text-slate-500 mt-2 sm:mt-3 font-medium truncate",children:De.day})]},dt))})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[i.jsx(zp,{className:"w-5 h-5 mr-2 text-[#1160A8]"})," Notice Board"]}),i.jsx("div",{className:"space-y-4 max-h-[350px] overflow-y-auto pr-1",children:I.length===0?i.jsx("div",{className:"text-center py-6 text-slate-400 italic text-sm",children:"No announcements at this time."}):I.map(De=>i.jsxs("div",{className:"group relative pl-4 pb-2 border-l-2 border-slate-200 hover:border-[#1160A8] transition-colors",children:[i.jsx("div",{className:`absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white ${De.type==="urgent"?"bg-red-500":"bg-amber-400"} shadow-sm`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:De.date}),De.type==="urgent"&&i.jsx("span",{className:"text-[10px] text-red-500 font-bold px-1.5 py-0.5 bg-red-50 rounded",children:"URGENT"})]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 leading-snug",children:De.message})]})]},De.id))})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[i.jsx(ac,{className:"w-5 h-5 mr-2 text-[#1160A8]"})," Class Schedule"]}),i.jsx("select",{value:Fe,onChange:De=>Qe(De.target.value),className:"text-xs font-bold text-[#1160A8] bg-[#E6F0FA] px-2 py-1 rounded uppercase border-none outline-none cursor-pointer hover:bg-[#E6F0FA] transition-colors",children:PN.map(De=>i.jsx("option",{value:De,children:De},De))})]}),o?i.jsx("div",{className:"space-y-4 relative min-h-[150px]",children:Ze.length===0?i.jsxs("div",{className:"text-center py-10 text-slate-400 text-sm italic border-2 border-dashed border-slate-100 rounded-lg",children:["No schedule set for ",Fe,"."]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute left-2.5 top-2 bottom-2 w-0.5 bg-slate-200"}),Ze.map(De=>{const dt=Ot(De.type);return i.jsxs("div",{className:"relative pl-8 group",children:[i.jsx("div",{className:`absolute left-0 top-1.5 w-5 h-5 bg-white border-2 rounded-full z-10 transition-colors ${dt.border} ${dt.bgHover}`}),i.jsxs("div",{className:"flex items-baseline justify-between",children:[i.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[De.startTime," - ",De.endTime]}),i.jsx("span",{className:`text-[10px] font-bold uppercase ${dt.badge}`,children:De.type})]}),i.jsx("p",{className:`text-sm ${dt.text}`,children:De.subject})]},De.id)})]})}):i.jsx("div",{className:"text-center py-10 text-slate-400",children:"Select a class to view schedule."})]})]})]}),O.show&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsx("div",{className:"p-6 border-b border-slate-100",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 rounded-full",children:i.jsx(zp,{className:"text-amber-600",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Attendance Reminder"}),i.jsx("p",{className:"text-sm text-slate-500",children:"You missed marking attendance for a previous school day"})]})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-amber-800",children:"Please mark your attendance for the following dates to keep your records accurate:"}),i.jsx("ul",{className:"mt-2 space-y-1",children:O.dates.map(De=>i.jsx("li",{className:"text-sm font-medium",children:i.jsx("strong",{children:(()=>{const dt=De.split("-");return dt.length===3?`${dt[1]}/${dt[2]}/${dt[0]}`:De})()})},De))})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>H({show:!1,dates:[]}),className:"flex-1 px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Remind Me Later"}),i.jsx(Ua,{to:"/teacher/my-attendance",onClick:()=>H({show:!1,dates:[]}),className:"flex-1 px-4 py-2 bg-[#1160A8] text-white rounded-lg hover:bg-[#0B4A82] transition-colors text-center",children:"Mark Attendance Now"})]})]})]})}),Q.show&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsx("div",{className:"p-6 border-b border-slate-100",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:i.jsx(zp,{className:"text-red-600",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Student Attendance Reminder"}),i.jsx("p",{className:"text-sm text-slate-500",children:"You missed marking student attendance for your class."})]})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-red-800",children:["Please mark student attendance for"," ",i.jsx("strong",{children:g==null?void 0:g.name})," on"," ",i.jsx("strong",{children:(()=>{const De=Q.date.split("-");return De.length===3?`${De[1]}/${De[2]}/${De[0]}`:Q.date})()})," ","to keep records accurate."]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>U({show:!1,date:""}),className:"flex-1 px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Remind Me Later"}),i.jsx(Ua,{to:"/teacher/attendance",onClick:()=>U({show:!1,date:""}),className:"flex-1 px-4 py-2 text-center bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Take Attendance"})]})]})]})}),R&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsx("div",{className:"p-6 border-b border-slate-100",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:i.jsx(zl,{className:"text-purple-600",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"End of Term Remarks"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Write comments and select behavior tags for each student"})]})]}),i.jsx("button",{onClick:()=>$(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:i.jsx(_o,{size:20})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:P.map(De=>{var dt,at;return i.jsxs("div",{className:"border rounded p-4",children:[i.jsx("h4",{className:"font-semibold mb-2",children:De.name}),i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Behavior Tag"}),i.jsxs("select",{value:((dt=G[De.id])==null?void 0:dt.behaviorTag)||"",onChange:Et=>ae(Xt=>({...Xt,[De.id]:{...Xt[De.id],behaviorTag:Et.target.value}})),className:"w-full p-2 border rounded",children:[i.jsx("option",{value:"",children:"Select Behavior"}),i.jsx("option",{value:"Excellent",children:"Excellent"}),i.jsx("option",{value:"Good",children:"Good"}),i.jsx("option",{value:"Needs Improvement",children:"Needs Improvement"})]})]}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center gap-2",children:[i.jsx(MT,{size:14,className:"text-purple-600"}),"Remark"]}),i.jsx("textarea",{value:((at=G[De.id])==null?void 0:at.remark)||"",onChange:Et=>ae(Xt=>({...Xt,[De.id]:{...Xt[De.id],remark:Et.target.value}})),placeholder:"Write remark or select from suggestions below...",className:"w-full p-2 border rounded",rows:3}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Tap to insert suggestion:"}),i.jsx("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto p-1 bg-slate-50 rounded-lg",children:KY.map((Et,Xt)=>i.jsx("button",{type:"button",onClick:()=>ae(vt=>({...vt,[De.id]:{...vt[De.id],remark:Et}})),className:"text-xs px-2 py-1 bg-purple-50 text-purple-700 rounded-full border border-purple-200 hover:bg-purple-100 transition-colors text-left truncate max-w-full",title:Et,children:Et.length>50?Et.substring(0,50)+"...":Et},Xt))})]})]})]},De.id)})}),i.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 text-slate-600 border rounded hover:bg-slate-50",children:"Cancel"}),i.jsx("button",{onClick:async()=>{var De,dt;oe(!0);try{for(const at of P){const Et=parseInt(h.split(" ")[1]),Xt={id:`${at.id}_${h}_${Io}`,studentId:at.id,classId:o,term:Et,academicYear:Io,schoolId:e||(f==null?void 0:f.schoolId)||"",remark:((De=G[at.id])==null?void 0:De.remark)||"",behaviorTag:((dt=G[at.id])==null?void 0:dt.behaviorTag)||"",teacherId:s.id,dateCreated:new Date().toISOString().split("T")[0]};await ot.saveStudentRemark(Xt)}Pt("Remarks saved successfully!",{type:"success"}),$(!1)}catch(at){console.error(at),Pt("Failed to save remarks",{type:"error"})}finally{oe(!1)}},disabled:ue,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:ue?"Saving...":"Save Remarks"})]})]})]})}),X&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsx("div",{className:"p-6 border-b border-slate-100",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-[#E6F0FA] rounded-full",children:i.jsx(Ud,{className:"text-[#1160A8]",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Edit Student Skills"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Rate skills and behavior for each student"})]})]}),i.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:i.jsx(_o,{size:20})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:re.map(De=>i.jsxs("div",{className:"border rounded p-4",children:[i.jsx("h4",{className:"font-semibold mb-3",children:De.name}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:VY.map(dt=>{var at;return i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium mb-1 capitalize",children:dt.replace(/([A-Z])/g," $1").trim()}),i.jsxs("select",{value:((at=ee[De.id])==null?void 0:at[dt])||"",onChange:Et=>M(Xt=>({...Xt,[De.id]:{...Xt[De.id],[dt]:Et.target.value}})),className:"w-full p-2 border rounded text-sm",children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Excellent",children:"Excellent"}),i.jsx("option",{value:"Very Good",children:"Very Good"}),i.jsx("option",{value:"Good",children:"Good"}),i.jsx("option",{value:"Fair",children:"Fair"}),i.jsx("option",{value:"Poor",children:"Poor"})]})]},dt)})})]},De.id))}),i.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-slate-600 border rounded hover:bg-slate-50",children:"Cancel"}),i.jsx("button",{onClick:async()=>{ie(!0);try{const De=parseInt(h.split(" ")[1]);for(const dt of re){const at={id:`${dt.id}_${h}_${Io}`,studentId:dt.id,classId:o,term:De,academicYear:Io,schoolId:e||(f==null?void 0:f.schoolId)||"",...ee[dt.id]};await ot.saveStudentSkills(at)}Pt("Skills saved successfully!",{type:"success"}),Y(!1)}catch(De){console.error(De),Pt("Failed to save skills",{type:"error"})}finally{ie(!1)}},disabled:J,className:"px-4 py-2 bg-[#1160A8] text-white rounded hover:bg-[#0B4A82] disabled:opacity-50",children:J?"Saving...":"Save Skills"})]})]})]})})]})},zY=()=>{var X;const{user:s}=Uo(),e=(s==null?void 0:s.assignedClassIds)||[],[t,n]=Z.useState(""),r=(s==null?void 0:s.schoolId)||null,[o,c]=Z.useState([]),h=(Y=new Date)=>`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`,[u,f]=Z.useState(h()),[A,m]=Z.useState(new Set),[x,g]=Z.useState(!1),[b,I]=Z.useState(""),[N,C]=Z.useState(!1),[E,F]=Z.useState(!1),[L,O]=Z.useState(null),[H,Q]=Z.useState(""),[U,R]=Z.useState(null);Z.useEffect(()=>{e.length>0&&!t&&n(e[0])},[e]),Z.useEffect(()=>{(async()=>{if(!r){R(null);return}const re=await ot.getSchoolConfig(r);R(re);const pe=P(re);pe&&u<pe&&f(pe)})()},[r]);const $=()=>P(U),P=Y=>Y&&Y.schoolReopenDate?Y.schoolReopenDate:"",V=()=>{const Y=U==null?void 0:U.vacationDate,re=U==null?void 0:U.nextTermBegins,pe=U==null?void 0:U.schoolReopenDate,ee=((U==null?void 0:U.holidayDates)||[]).some(M=>M.date===u);return re&&u>=re?!1:!!(ee||Y&&u>Y||!Y&&pe&&u<pe)};Z.useEffect(()=>{if(!t||!r)return;(async()=>{F(!0);try{const re=await ot.getStudents(r,t);c(re);const pe=await ot.getAttendance(r,t,u),ee=((U==null?void 0:U.holidayDates)||[]).find(M=>M.date===u);if(ee){O(ee),g(!0),I(ee.reason||""),m(new Set);return}pe?pe.isHoliday?(g(!0),I(pe.holidayReason||""),m(new Set),C(!1)):(g(!1),I(""),m(new Set(pe.presentStudentIds)),C(!0)):(g(!1),I(""),m(new Set),C(!1)),O(null)}catch(re){console.error(re)}finally{F(!1)}})()},[t,u,r,U]);const G=Y=>{if(x||L)return;N||C(!0);const re=new Set(A);re.has(Y)?re.delete(Y):re.add(Y),m(re)},ae=async()=>{var ee;if(!t||!r)return;const Y=U==null?void 0:U.vacationDate,re=U==null?void 0:U.nextTermBegins,pe=U==null?void 0:U.schoolReopenDate;if(L){Q("This date is marked as a holiday by the admin."),setTimeout(()=>Q(""),3e3);return}if(!(re&&u>=re)){if(Y&&u>Y){Q("Cannot mark attendance after school vacation date"),setTimeout(()=>Q(""),3e3);return}else if(!Y&&pe&&u<pe){Q(`Cannot mark attendance before school re-open date (${pe})`),setTimeout(()=>Q(""),3e3);return}}F(!0);try{if(x&&(await ot.getAttendanceByDate(r,u)).some(ie=>{var le;return(le=ie.presentStudentIds)==null?void 0:le.length})){Q("This date already has attendance records. Clear them before marking a holiday."),setTimeout(()=>Q(""),4e3);return}await ot.saveAttendance({id:`${r}_${t}_${u}`,schoolId:r,classId:t,date:u,presentStudentIds:x?[]:Array.from(A),isHoliday:x,holidayReason:x?b.trim():""}),C(!x);const M=((ee=Es.find(J=>J.id===t))==null?void 0:ee.name)||t;await ot.addSystemNotification(x?`${s==null?void 0:s.fullName} marked ${M} as Holiday on ${u}.`:`${s==null?void 0:s.fullName} marked attendance for ${M} on ${u}. (${A.size} Present)`,"attendance",r),Q(x?"Holiday saved successfully!":"Attendance saved successfully!"),setTimeout(()=>Q(""),3e3)}catch(M){console.error(M)}finally{F(!1)}};if(e.length===0)return i.jsx(lr,{title:"Attendance",children:i.jsx("div",{className:"p-8 text-center text-slate-500",children:"You are not assigned to any class. Contact Admin."})});const ue=((X=Es.find(Y=>Y.id===t))==null?void 0:X.name)||t,oe=x||!N?0:o.length-A.size;return i.jsx(lr,{title:"Mark Attendance",children:i.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-50 via-white to-emerald-50 p-6 shadow-sm",children:[i.jsx("div",{className:"absolute -top-16 -right-16 h-40 w-40 rounded-full bg-indigo-200/40 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-20 -left-16 h-48 w-48 rounded-full bg-emerald-200/40 blur-3xl"}),i.jsxs("div",{className:"relative flex flex-col gap-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Student Attendance"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Mark attendance quickly and accurately for your class."}),L&&i.jsxs("div",{className:"mt-3 rounded-2xl border border-amber-200 bg-amber-50/70 px-4 py-2 text-xs font-semibold text-amber-900 shadow-sm",children:["Admin Holiday: ",L.reason||"No reason provided"]}),x&&i.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-800",children:[i.jsx(Wi,{className:"h-4 w-4"}),L?"Admin Holiday":"Holiday / No School",b?` ${b}`:""]}),i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(xl,{className:"h-4 w-4 text-indigo-500"}),"Class: ",ue||"Select class"]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 font-medium text-emerald-700 shadow-sm",children:[i.jsx(DA,{className:"h-4 w-4"}),A.size," Present"]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1 font-medium text-rose-700 shadow-sm",children:[i.jsx(Fd,{className:"h-4 w-4"}),oe," Absent"]})]})]})]}),i.jsx("div",{className:"rounded-2xl border bg-white/80 p-6 shadow-sm",children:i.jsxs("div",{className:"flex flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[i.jsxs("div",{className:"w-full md:w-64",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Class"}),i.jsx("select",{value:t,onChange:Y=>n(Y.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus:border-emerald-400 focus:ring-2 focus:ring-emerald-200",children:e.map(Y=>{const re=Es.find(pe=>pe.id===Y);return i.jsx("option",{value:Y,children:re==null?void 0:re.name},Y)})})]}),i.jsxs("div",{className:"w-full md:w-64",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"date",value:u,onChange:Y=>f(Y.target.value),min:$(),className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-4 py-2 text-sm shadow-sm transition focus:border-emerald-400 focus:ring-2 focus:ring-emerald-200"})]})]})]}),i.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-amber-200 bg-amber-50/60 p-4",children:[i.jsxs("label",{className:"inline-flex items-center gap-3 text-sm font-semibold text-amber-900",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:Y=>{const re=Y.target.checked;g(re),re&&m(new Set)},disabled:!!L,className:"h-4 w-4 rounded border-amber-300 text-amber-600 focus:ring-amber-300"}),"Mark this date as Holiday / No School"]}),L?i.jsx("div",{className:"text-xs text-amber-800",children:"This date is locked as a holiday by the admin."}):x?i.jsx("input",{type:"text",value:b,onChange:Y=>I(Y.target.value),placeholder:"Reason (optional) e.g. Independence Day",className:"w-full rounded-xl border border-amber-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-amber-400 focus:ring-2 focus:ring-amber-200"}):null]}),i.jsxs("div",{className:"flex flex-col gap-4 border-t border-slate-100 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 font-semibold text-emerald-700",children:[i.jsx(DA,{className:"h-4 w-4"}),A.size," Present"]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1 font-semibold text-rose-700",children:[i.jsx(Fd,{className:"h-4 w-4"}),oe," Absent"]})]}),i.jsxs("button",{onClick:ae,disabled:E||!t||V()||!!L,className:"inline-flex w-full items-center justify-center gap-2 rounded-full bg-emerald-600 px-6 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:scale-[1.01] hover:bg-emerald-700 disabled:opacity-50 sm:w-auto",children:[i.jsx(AA,{size:18}),E?"Saving...":x?"Save Holiday":"Save Register"]})]})]})}),H&&i.jsx("div",{className:`rounded-2xl p-3 text-center text-sm shadow-sm ${H.includes("Cannot")?"bg-rose-50 text-rose-700":"bg-emerald-50 text-emerald-700"}`,children:H}),(V()||L)&&i.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/70 p-4 text-amber-900 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[i.jsx(Wi,{size:18}),i.jsx("span",{className:"font-medium",children:L?`Admin marked ${L.date} as a holiday${L.reason?` (${L.reason})`:""}.`:U!=null&&U.nextTermBegins&&u>=U.nextTermBegins?"Attendance not available for selected date":U!=null&&U.vacationDate&&u>U.vacationDate?`Cannot mark attendance after vacation date (${U.vacationDate})`:!(U!=null&&U.vacationDate)&&(U!=null&&U.schoolReopenDate)&&u<U.schoolReopenDate?`Cannot mark attendance before school re-open date (${U.schoolReopenDate})`:"Attendance not available for selected date"})]})}),i.jsxs("div",{className:"rounded-2xl border bg-white/80 p-2 shadow-sm",children:[o.map(Y=>{const re=A.has(Y.id),pe=V()||x||!!L;return i.jsxs("div",{className:`group flex items-center justify-between gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition duration-300 hover:-translate-y-0.5 hover:shadow-md ${pe?"opacity-60":"cursor-pointer"}`,onClick:()=>!pe&&G(Y.id),children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-full text-sm font-bold ${re?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:Y.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900",children:Y.name}),i.jsx("p",{className:"text-xs text-slate-500",children:Y.gender})]})]}),i.jsxs("div",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold ${x?"border-amber-200 bg-amber-50 text-amber-700":re?"border-emerald-200 bg-emerald-50 text-emerald-700":N?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-slate-50 text-slate-500"}`,children:[x?i.jsx(Wi,{className:"h-4 w-4"}):re?i.jsx(DA,{className:"h-4 w-4"}):N?i.jsx(Fd,{className:"h-4 w-4"}):i.jsx(ac,{className:"h-4 w-4"}),x?L?"ADMIN HOLIDAY":"HOLIDAY":re?"PRESENT":N?"ABSENT":"UNMARKED"]})]},Y.id)}),o.length===0&&i.jsx("div",{className:"p-8 text-center text-slate-500",children:t?"No students found in this class.":"Select a class to view students."})]})]})})},Co=s=>{const e=s.split("-");if(e.length===3){const n=new Date(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2]));if(!isNaN(n.getTime()))return n}const t=new Date(s);return isNaN(t.getTime())?(console.error("Invalid date string:",s),new Date):t},GY=()=>{var oe;const{user:s}=Uo(),e=(s==null?void 0:s.schoolId)||null,[t,n]=Z.useState({}),[r,o]=Z.useState(!0),[c,h]=Z.useState({}),[u,f]=Z.useState(null),[A,m]=Z.useState(null),[x,g]=Z.useState({}),[b,I]=Z.useState({}),[N,C]=Z.useState(""),E=X=>{const Y=X.getFullYear(),re=String(X.getMonth()+1).padStart(2,"0"),pe=String(X.getDate()).padStart(2,"0");return`${Y}-${re}-${pe}`},F=()=>{const X=new Date;return X.setHours(0,0,0,0),X},L=Z.useMemo(()=>F(),[]),O=Z.useMemo(()=>E(L),[L]),H=(X,Y,re=!1)=>{const pe=[];let ee=new Date(X);for(ee.setHours(0,0,0,0);pe.length<Y;)ee.getDay()!==0&&ee.getDay()!==6&&pe.push(E(ee)),ee.setDate(ee.getDate()+(re?-1:1));return pe},Q=Z.useMemo(()=>{const X=u!=null&&u.schoolReopenDate?Co(u.schoolReopenDate):null,Y=u!=null&&u.vacationDate?Co(u.vacationDate):null,re=new Date(L);return H(re,20,!0).filter(ee=>{const M=Co(ee),J=u!=null&&u.nextTermBegins?Co(u.nextTermBegins):null;if(J&&M>=J)return!0;const ie=!X||M>=X,le=!Y||M<=Y;return ie&&le}).sort()},[L,u]),U=X=>{const Y=new Date(X);for(Y.setDate(Y.getDate()-1);Y.getDay()===0||Y.getDay()===6;)Y.setDate(Y.getDate()-1);return E(Y)},R=Z.useMemo(()=>U(L),[L]),$=(X,Y,re,pe,ee)=>{const M=Co(X),J=Y?Co(Y):null,ie=re?Co(re):null,le=pe?Co(pe):null,ce=(ee||[]).some(ve=>ve.date===X);return le&&M>=le?!0:!(ce||J&&M<J||ie&&M>ie)};Z.useEffect(()=>{(async()=>{if(!e){f(null);return}const Y=await ot.getSchoolConfig(e);f(Y)})()},[e]),Z.useEffect(()=>{if(!(s!=null&&s.id)||!e||Q.length===0){o(!1);return}(async()=>{o(!0);const Y={};for(const re of Q)if($(re,u==null?void 0:u.schoolReopenDate,u==null?void 0:u.vacationDate,u==null?void 0:u.nextTermBegins,u==null?void 0:u.holidayDates)){const pe=await ot.getTeacherAttendance(e,s.id,re);pe&&(Y[re]=pe)}n(Y),o(!1)})()},[s==null?void 0:s.id,Q,u==null?void 0:u.schoolReopenDate,e]),Z.useEffect(()=>{if(!(s!=null&&s.id)||!e||!u)return;(async()=>{const Y=u.schoolReopenDate,re=u.vacationDate;if(!$(R,Y,re,u.nextTermBegins,u.holidayDates))return;await ot.getTeacherAttendance(e,s.id,R)||m(R)})()},[s==null?void 0:s.id,u,R,$]);const P=async(X,Y)=>{if(!(s!=null&&s.id)||!e)return;h(pe=>({...pe,[X]:!0}));const re={id:`${e}_${s.id}_${X}`,date:X,teacherId:s.id,schoolId:e||(u==null?void 0:u.schoolId)||"",status:Y,approvalStatus:"pending",isHoliday:!1,holidayReason:""};await ot.saveTeacherAttendance(re),n(pe=>({...pe,[X]:re})),m(null),await ot.addSystemNotification(`${(s==null?void 0:s.fullName)||"Teacher"} submitted ${Y} attendance for ${X} (pending approval)`,"attendance",e),h(pe=>({...pe,[X]:!1}))},V=async X=>{var Y;if(!(!(s!=null&&s.id)||!e)){h(re=>({...re,[X]:!0}));try{if((await ot.getAllTeacherAttendance(e,X)).some(M=>!M.isHoliday)){C("This date already has attendance records. Clear them before marking a holiday."),setTimeout(()=>C(""),4e3);return}const ee={id:`${e}_${s.id}_${X}`,date:X,teacherId:s.id,schoolId:e||(u==null?void 0:u.schoolId)||"",status:"absent",approvalStatus:"pending",isHoliday:!0,holidayReason:((Y=x[X])==null?void 0:Y.trim())||""};await ot.saveTeacherAttendance(ee),n(M=>({...M,[X]:ee})),m(null),await ot.addSystemNotification(`${(s==null?void 0:s.fullName)||"Teacher"} submitted ${X} as Holiday (pending approval).`,"attendance",e),C("Holiday saved successfully!"),setTimeout(()=>C(""),3e3),I(M=>({...M,[X]:!1}))}finally{h(re=>({...re,[X]:!1}))}}},G=()=>u!=null&&u.schoolReopenDate?L>=Co(u.schoolReopenDate):!0,ae=X=>{const Y=Co(X),re=u!=null&&u.schoolReopenDate?Co(u.schoolReopenDate):null,pe=u!=null&&u.vacationDate?Co(u.vacationDate):null,ee=u!=null&&u.nextTermBegins?Co(u.nextTermBegins):null;return ee&&Y>=ee?!0:!(re&&Y<re||pe&&Y>pe)},ue=X=>Co(X).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"});return i.jsx(lr,{title:"Daily Attendance",children:i.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-50 via-white to-emerald-50 p-6 shadow-sm",children:[i.jsx("div",{className:"absolute -top-16 -right-16 h-40 w-40 rounded-full bg-indigo-200/40 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-20 -left-16 h-48 w-48 rounded-full bg-emerald-200/40 blur-3xl"}),i.jsxs("div",{className:"relative flex flex-col gap-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Daily Attendance"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Mark your attendance with confidence  fast, clear, and beautiful."}),((oe=u==null?void 0:u.holidayDates)==null?void 0:oe.some(X=>X.date===O))&&i.jsxs("div",{className:"mt-3 rounded-2xl border border-amber-200 bg-amber-50/70 px-4 py-2 text-xs font-semibold text-amber-900 shadow-sm",children:["Admin Holiday:"," ",(()=>{const X=u.holidayDates.find(Y=>Y.date===O);return(X==null?void 0:X.reason)||"No reason provided"})()]}),i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(mo,{className:"h-4 w-4 text-indigo-500"}),"Today: ",ue(O)]}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 font-medium shadow-sm ${G()?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"}`,children:[i.jsx(ac,{className:"h-4 w-4"}),G()?"School Open":"School Closed"]})]})]})]}),A&&i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-amber-200 bg-amber-50/60 p-5 shadow-sm",children:[i.jsx("div",{className:"absolute -right-10 -top-10 h-24 w-24 rounded-full bg-amber-200/60 blur-2xl"}),i.jsxs("div",{className:"relative flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[i.jsx(Wi,{className:"h-5 w-5"}),i.jsx("span",{className:"font-semibold",children:"Missed Attendance"})]}),i.jsxs("p",{className:"text-sm text-amber-900",children:["You missed attendance for",i.jsxs("span",{className:"font-semibold",children:[" ",ue(A)]}),". Please update it now."]}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("button",{onClick:()=>P(A,"present"),disabled:c[A],className:"inline-flex items-center gap-2 rounded-full bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:scale-[1.02] hover:bg-emerald-700 disabled:opacity-50",children:[i.jsx(DA,{className:"h-4 w-4"}),"Mark Present"]}),i.jsxs("button",{onClick:()=>P(A,"absent"),disabled:c[A],className:"inline-flex items-center gap-2 rounded-full bg-rose-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:scale-[1.02] hover:bg-rose-700 disabled:opacity-50",children:[i.jsx(Fd,{className:"h-4 w-4"}),"Mark Absent"]})]})]})]}),N&&i.jsx("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/70 p-4 text-sm text-emerald-800 shadow-sm",children:N}),!G()&&i.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50/70 p-4 text-rose-800 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[i.jsx(ac,{className:"h-5 w-5"}),"School not yet open"]})}),(u==null?void 0:u.vacationDate)&&L<Co(u.vacationDate)&&i.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/70 p-4 text-amber-900 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[i.jsx(mo,{className:"h-5 w-5 text-amber-600"}),"School will vacate on: ",u.vacationDate]})}),i.jsx("div",{className:"rounded-2xl border bg-white/80 p-2 shadow-sm",children:r?i.jsx("div",{className:"p-8 text-center text-sm text-slate-500",children:"Loading attendance..."}):i.jsx("div",{className:"grid gap-3 p-2",children:Q.map(X=>{const Y=t[X],re=X>O,pe=$(X,u==null?void 0:u.schoolReopenDate,u==null?void 0:u.vacationDate,u==null?void 0:u.nextTermBegins,u==null?void 0:u.holidayDates),ee=((u==null?void 0:u.holidayDates)||[]).find(le=>le.date===X),M=!!ee,J=!!(Y!=null&&Y.isHoliday),ie=(Y==null?void 0:Y.holidayReason)||(ee==null?void 0:ee.reason)||"";return i.jsxs("div",{className:"group flex flex-col gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm transition duration-300 hover:-translate-y-0.5 hover:shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ue(X)}),i.jsx("p",{className:"text-xs text-slate-500",children:X})]}),i.jsx("div",{className:"flex items-center gap-2",children:M||J?i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-700",children:[i.jsx(Wi,{className:"h-4 w-4"}),"Holiday"]}):Y?i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${Y.approvalStatus==="rejected"?"bg-rose-50 text-rose-700":Y.status==="present"?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"}`,children:[Y.approvalStatus==="pending"?i.jsx(ac,{className:"h-4 w-4"}):Y.approvalStatus==="rejected"?i.jsx(Fd,{className:"h-4 w-4"}):Y.status==="present"?i.jsx(DA,{className:"h-4 w-4"}):i.jsx(Fd,{className:"h-4 w-4"}),Y.approvalStatus==="pending"?"PENDING":Y.approvalStatus==="rejected"?"ABSENT":Y.status.toUpperCase()]}):pe?re?i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-500",children:[i.jsx(ac,{className:"h-4 w-4"}),"Future"]}):i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-700",children:[i.jsx(mo,{className:"h-4 w-4"}),"Pending"]}):i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-700",children:[i.jsx(Wi,{className:"h-4 w-4"}),Co(X)<Co((u==null?void 0:u.schoolReopenDate)||"")?"Before Reopen":"After Vacation"]})})]}),(M||J)&&ie&&i.jsxs("div",{className:"text-xs font-medium text-amber-700",children:["Reason: ",ie]}),(Y==null?void 0:Y.approvalStatus)==="rejected"&&i.jsx("div",{className:"text-xs font-semibold text-rose-600",children:"Attendance rejected. Please do not cheat when marking attendance."}),i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsx("div",{className:"text-xs text-slate-500",children:M||J?"Holiday / No School":ae(X)?"School in session":"Out of session"}),M||!pe||re?null:i.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:[!Y&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>P(X,"present"),className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-4 py-2 text-xs font-semibold text-emerald-700 shadow-sm transition hover:scale-[1.02] hover:bg-emerald-100",children:[i.jsx(DA,{className:"h-4 w-4"}),"Present"]}),i.jsxs("button",{onClick:()=>P(X,"absent"),className:"inline-flex items-center gap-2 rounded-full border border-rose-200 bg-rose-50 px-4 py-2 text-xs font-semibold text-rose-700 shadow-sm transition hover:scale-[1.02] hover:bg-rose-100",children:[i.jsx(Fd,{className:"h-4 w-4"}),"Absent"]})]}),(!Y||Y.isHoliday)&&i.jsxs("button",{onClick:()=>I(le=>({...le,[X]:!le[X]})),className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-amber-50 px-4 py-2 text-xs font-semibold text-amber-700 shadow-sm transition hover:scale-[1.02] hover:bg-amber-100",children:[i.jsx(Wi,{className:"h-4 w-4"}),Y!=null&&Y.isHoliday?"Update Holiday":"Mark Holiday"]})]})]}),(b[X]||J)&&(!Y||Y.isHoliday)&&!re&&pe&&!M&&i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[i.jsx("input",{type:"text",value:x[X]??(Y==null?void 0:Y.holidayReason)??"",onChange:le=>g(ce=>({...ce,[X]:le.target.value})),placeholder:"Reason (optional) e.g. Independence Day",className:"w-full rounded-xl border border-amber-200 bg-white px-3 py-2 text-xs text-slate-900 shadow-sm focus:border-amber-400 focus:ring-2 focus:ring-amber-200"}),i.jsx("button",{onClick:()=>V(X),disabled:c[X],className:"inline-flex items-center justify-center gap-2 rounded-full bg-amber-600 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:scale-[1.02] hover:bg-amber-700 disabled:opacity-50",children:"Save Holiday"})]})]},X)})})})]})})},$Y=()=>{const{user:s}=Uo(),e=(s==null?void 0:s.assignedClassIds)||[],t=(s==null?void 0:s.schoolId)||null,[n,r]=Z.useState(""),[o,c]=Z.useState([]),[h,u]=Z.useState([]),[f,A]=Z.useState(""),[m,x]=Z.useState({}),[g,b]=Z.useState(!1),[I,N]=Z.useState(!1),[C,E]=Z.useState({currentTerm:`Term ${Xi}`,academicYear:Io}),F={testScore:15,homeworkScore:15,projectScore:20,examScore:100};Z.useEffect(()=>{e.length>0&&!n&&r(e[0])},[e]),Z.useEffect(()=>{(async()=>{try{if(!t)return;const Q=await ot.getSchoolConfig(t);if(E({currentTerm:Q.currentTerm||`Term ${Xi}`,academicYear:Q.academicYear||Io}),Q.termTransitionProcessed){console.log("Term transition detected, reloading for fresh data..."),await ot.updateSchoolConfig({...Q,termTransitionProcessed:!1}),window.location.reload();return}const U=new Date;U.setHours(0,0,0,0);const R=Q.nextTermBegins?new Date(Q.nextTermBegins+"T00:00:00"):null;if(R&&U>=R){console.log("New term begins, initiating reset..."),await ot.resetForNewTerm(Q),await ot.updateSchoolConfig({...Q,termTransitionProcessed:!0}),Pt("New term started! Assessments have been reset.",{type:"success"}),window.location.reload();return}}catch(Q){console.error("Failed to load school config",Q)}})()},[t]),Z.useEffect(()=>{(async()=>{if(!n||!t){u([]),A("");return}const Q=await ot.getSubjects(t,n);u(Q),Q.length>0?A(Q[0]):A("")})()},[n,t]),Z.useEffect(()=>{if(!n||!t)return;(async()=>{const Q=await ot.getStudents(t,n);c(Q)})()},[n,t]),Z.useEffect(()=>{if(!n||!f||!t){x({});return}(async()=>{b(!0);const Q=await ot.getAssessments(t,n,f);let U=Xi;if(C.currentTerm){const $=C.currentTerm.match(/\d+/);$&&(U=parseInt($[0],10))}const R={};o.forEach($=>{const P=Q.find(V=>V.studentId===$.id&&V.term===U);R[$.id]=P||{id:`${$.id}_${f}_${U}_${C.academicYear}`,schoolId:t||"",studentId:$.id,classId:n,term:U,academicYear:C.academicYear,subject:f,testScore:0,homeworkScore:0,projectScore:0,examScore:0,total:0}}),x(R),b(!1)})()},[n,f,o,C.currentTerm,C.academicYear,t]);const L=(H,Q,U)=>{let R=U===""?0:parseFloat(U);const $=F[Q];R>$&&(R=$),R<0&&(R=0),x(P=>{const V=P[H]||{};return{...P,[H]:{...V,[Q]:R}}})},O=async()=>{var H;if(!(!n||!t)){N(!0);try{let Q=Xi;if(C.currentTerm){const $=C.currentTerm.match(/\d+/);$&&(Q=parseInt($[0],10))}const U=Object.values(m).map(async $=>{if(!$.studentId)return;const P=_A($),V={...$,id:$.id||Math.random().toString(36),schoolId:t,total:P,studentId:$.studentId,classId:n,subject:f,term:Q,academicYear:C.academicYear,testScore:$.testScore||0,homeworkScore:$.homeworkScore||0,projectScore:$.projectScore||0,examScore:$.examScore||0};return ot.saveAssessment(V)});await Promise.all(U);const R=((H=Es.find($=>$.id===n))==null?void 0:H.name)||n;await ot.addSystemNotification(`${(s==null?void 0:s.fullName)||"Teacher"} updated assessments for ${R} in ${f}.`,"assessment",t),Pt("Saved Successfully",{type:"success"})}catch(Q){console.error(Q),Pt("Error saving data",{type:"error"})}finally{N(!1)}}};return e.length===0?i.jsx(lr,{title:"Assessment",children:i.jsx("div",{className:"p-8 text-center text-slate-500",children:"No class assigned."})}):i.jsx(lr,{title:"Assessment Sheet",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Class"}),i.jsx("select",{value:n,onChange:H=>r(H.target.value),className:"p-2 border border-slate-300 rounded-md shadow-sm w-full md:w-64 bg-white text-black",children:e.map(H=>{const Q=Es.find(U=>U.id===H);return i.jsx("option",{value:H,children:Q==null?void 0:Q.name},H)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Subject"}),i.jsxs("select",{value:f,onChange:H=>A(H.target.value),className:"p-2 border border-slate-300 rounded-md shadow-sm w-full md:w-64",disabled:h.length===0,children:[h.length===0&&i.jsx("option",{children:"Loading subjects..."}),h.map(H=>i.jsx("option",{value:H,children:H},H))]})]})]}),i.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[i.jsx("div",{className:"hidden sm:block",children:i.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[C.currentTerm,"  ",C.academicYear]})}),i.jsxs("button",{onClick:O,disabled:I||!f||!n,className:"flex items-center bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ml-auto",children:[i.jsx(AA,{size:18,className:"mr-2"}),I?"Saving...":"Save Scores"]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold uppercase text-xs tracking-wider",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 sticky left-0 bg-slate-100 z-10 w-48",children:"Student Name"}),i.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Class Test",i.jsx("br",{}),i.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(15)"})]}),i.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Homework",i.jsx("br",{}),i.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(15)"})]}),i.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Project",i.jsx("br",{}),i.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(20)"})]}),i.jsxs("th",{className:"px-2 py-3 w-28 text-center border-l border-slate-200 bg-red-50/50",children:["Exam",i.jsx("br",{}),i.jsx("span",{className:"text-[10px] normal-case font-bold text-red-600",children:"(100)"})]}),i.jsxs("th",{className:"px-4 py-3 w-24 text-center bg-slate-200",children:["Total",i.jsx("br",{}),i.jsx("span",{className:"text-[10px] normal-case",children:"(100%)"})]}),i.jsx("th",{className:"px-4 py-3 w-20 text-center bg-slate-200",children:"Grade"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100",children:[o.map(H=>{const Q=m[H.id]||{},U=_A(Q),{grade:R,remark:$}=pm(U),P=Mg(R);return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-slate-800 sticky left-0 bg-white border-r border-slate-100",children:H.name}),i.jsx("td",{className:"px-2 py-2",children:i.jsx("input",{type:"number",min:"0",max:F.testScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:Q.testScore||0,onChange:V=>L(H.id,"testScore",V.target.value),onFocus:V=>V.target.select()})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx("input",{type:"number",min:"0",max:F.homeworkScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:Q.homeworkScore||0,onChange:V=>L(H.id,"homeworkScore",V.target.value),onFocus:V=>V.target.select()})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx("input",{type:"number",min:"0",max:F.projectScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:Q.projectScore||0,onChange:V=>L(H.id,"projectScore",V.target.value),onFocus:V=>V.target.select()})}),i.jsx("td",{className:"px-2 py-2 border-l border-slate-200 bg-red-50/20",children:i.jsx("input",{type:"number",min:"0",max:F.examScore,className:"w-full text-center border border-red-500 rounded p-1 focus:ring-2 focus:ring-red-300 outline-none font-bold text-slate-800 bg-white shadow-sm",value:Q.examScore||0,onChange:V=>L(H.id,"examScore",V.target.value),onFocus:V=>V.target.select()})}),i.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-800 bg-slate-50",children:U}),i.jsx("td",{className:"px-4 py-3 text-center bg-slate-50",children:i.jsx("span",{className:`inline-block w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${P}`,children:R})})]},H.id)}),o.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:n?"No students found in this class.":"Select a class above."})})]})]})})]})})},YY=()=>{const{user:s}=Uo(),e=(s==null?void 0:s.assignedClassIds)||[],t=(s==null?void 0:s.schoolId)||null,[n,r]=Z.useState(""),[o,c]=Z.useState([]),[h,u]=Z.useState({}),[f,A]=Z.useState(!1),[m,x]=Z.useState(!1),[g,b]=Z.useState("");Z.useEffect(()=>{e.length>0&&!n&&r(e[0])},[e]),Z.useEffect(()=>{if(!n||!t)return;(async()=>{A(!0);try{const E=await ot.getStudents(t,n);c(E);const F=await ot.getStudentRemarks(t,n),L={};let O=Xi;const H=await ot.getSchoolConfig(t);if(H.currentTerm){const Q=H.currentTerm.match(/\d+/);Q&&(O=parseInt(Q[0],10))}E.forEach(Q=>{const U=F.find(R=>R.studentId===Q.id&&R.term===O);L[Q.id]=(U==null?void 0:U.remark)||""}),u(L)}catch(E){console.error(E)}finally{A(!1)}})()},[n,t]);const I=(C,E)=>{u(F=>({...F,[C]:E}))},N=async()=>{var C;if(!(!n||!t)){x(!0);try{const E=await ot.getSchoolConfig(t);let F=Xi;if(E.currentTerm){const H=E.currentTerm.match(/\d+/);H&&(F=parseInt(H[0],10))}const L=Object.entries(h).map(async([H,Q])=>{const U=Q;if(!U.trim())return;const R={id:`${H}_${n}_${F}_${Io}`,studentId:H,classId:n,term:F,academicYear:Io,schoolId:t,remark:U,behaviorTag:"Good",teacherId:(s==null?void 0:s.id)||"",dateCreated:new Date().toISOString().split("T")[0]};await ot.saveStudentRemark(R)});await Promise.all(L);const O=((C=Es.find(H=>H.id===n))==null?void 0:C.name)||n;await ot.addSystemNotification(`${s==null?void 0:s.fullName} updated remarks for ${O}.`,"assessment",t),b("Remarks saved successfully!"),setTimeout(()=>b(""),3e3)}catch(E){console.error(E),b("Error saving remarks"),setTimeout(()=>b(""),3e3)}finally{x(!1)}}};return e.length===0?i.jsx(lr,{title:"Write Remarks",children:i.jsx("div",{className:"p-8 text-center text-slate-500",children:"You are not assigned to any class. Contact Admin."})}):i.jsx(lr,{title:"Write Remarks",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col gap-6 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[i.jsxs("div",{className:"w-full sm:w-auto",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Class"}),i.jsx("select",{value:n,onChange:C=>r(C.target.value),className:"w-full sm:w-64 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-black",children:e.map(C=>{const E=Es.find(F=>F.id===C);return i.jsx("option",{value:C,children:E==null?void 0:E.name},C)})})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{onClick:N,disabled:m||!n,className:"flex items-center bg-emerald-600 text-white px-6 py-2.5 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 font-medium shadow-sm",children:[i.jsx(AA,{size:18,className:"mr-2"}),m?"Saving...":"Save Remarks"]})})]}),g&&i.jsx("div",{className:`p-3 rounded text-center text-sm ${g.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:g})]}),i.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[f?i.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):o.map(C=>{var E;return i.jsxs("div",{className:"p-4 border-b last:border-b-0",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-sm font-bold text-slate-600 mr-3",children:C.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800",children:C.name}),i.jsx("p",{className:"text-xs text-slate-400",children:(E=Es.find(F=>F.id===C.classId))==null?void 0:E.name})]})]}),i.jsx("textarea",{value:h[C.id]||"",onChange:F=>I(C.id,F.target.value),placeholder:"Write remarks for this student...",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none resize-none",rows:3})]},C.id)}),o.length===0&&i.jsx("div",{className:"p-8 text-center text-slate-500",children:n?"No students found in this class.":"Select a class to view students."})]})]})})},WY=["Excellent","Very Good","Good","Fair","Poor"],XY=()=>{const{user:s}=Uo(),e=(s==null?void 0:s.assignedClassIds)||[],t=(s==null?void 0:s.schoolId)||null,[n,r]=Z.useState(""),[o,c]=Z.useState([]),[h,u]=Z.useState({}),[f,A]=Z.useState(!1),[m,x]=Z.useState(!1),[g,b]=Z.useState("");Z.useEffect(()=>{e.length>0&&!n&&r(e[0])},[e]),Z.useEffect(()=>{if(!n||!t)return;(async()=>{A(!0);try{const F=await ot.getStudents(t,n);c(F);const L=await ot.getStudentSkills(t,n),O={};let H=Xi;const Q=await ot.getSchoolConfig(t);if(Q.currentTerm){const U=Q.currentTerm.match(/\d+/);U&&(H=parseInt(U[0],10))}F.forEach(U=>{const R=L.find($=>$.studentId===U.id&&$.term===H);R?O[U.id]=R:O[U.id]={id:`${U.id}_${n}_${H}_${Io}`,studentId:U.id,classId:n,term:H,academicYear:Io,schoolId:t||(Q==null?void 0:Q.schoolId)||"",punctuality:"Good",neatness:"Good",conduct:"Good",attitudeToWork:"Good",classParticipation:"Good",homeworkCompletion:"Good"}}),u(O)}catch(F){console.error(F)}finally{A(!1)}})()},[n,t]);const I=(E,F,L)=>{u(O=>({...O,[E]:{...O[E],[F]:L}}))},N=async()=>{var E;if(!(!n||!t)){x(!0);try{const F=await ot.getSchoolConfig(t);let L=Xi;if(F.currentTerm){const Q=F.currentTerm.match(/\d+/);Q&&(L=parseInt(Q[0],10))}const O=Object.values(h).map(async Q=>{await ot.saveStudentSkills(Q)});await Promise.all(O);const H=((E=Es.find(Q=>Q.id===n))==null?void 0:E.name)||n;await ot.addSystemNotification(`${(s==null?void 0:s.fullName)||"Teacher"} updated skills for ${H}.`,"assessment",t),b("Skills saved successfully!"),setTimeout(()=>b(""),3e3)}catch(F){console.error(F),b("Error saving skills"),setTimeout(()=>b(""),3e3)}finally{x(!1)}}};if(e.length===0)return i.jsx(lr,{title:"Edit Skills",children:i.jsx("div",{className:"p-8 text-center text-slate-500",children:"You are not assigned to any class. Contact Admin."})});const C=[{key:"punctuality",label:"Punctuality"},{key:"neatness",label:"Neatness"},{key:"conduct",label:"Conduct"},{key:"attitudeToWork",label:"Attitude to Work"},{key:"classParticipation",label:"Class Participation"},{key:"homeworkCompletion",label:"Homework Completion"}];return i.jsx(lr,{title:"Edit Skills",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col gap-6 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[i.jsxs("div",{className:"w-full sm:w-auto",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Class"}),i.jsx("select",{value:n,onChange:E=>r(E.target.value),className:"w-full sm:w-64 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-black",children:e.map(E=>{const F=Es.find(L=>L.id===E);return i.jsx("option",{value:E,children:F==null?void 0:F.name},E)})})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{onClick:N,disabled:m||!n,className:"flex items-center bg-emerald-600 text-white px-6 py-2.5 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 font-medium shadow-sm",children:[i.jsx(AA,{size:18,className:"mr-2"}),m?"Saving...":"Save Skills"]})})]}),g&&i.jsx("div",{className:`p-3 rounded text-center text-sm ${g.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:g})]}),i.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[f?i.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left w-48",children:"Student Name"}),C.map(E=>i.jsx("th",{className:"px-2 py-3 text-center",children:E.label},E.key))]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:o.map(E=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-bold text-slate-600 mr-3",children:E.name.charAt(0)}),E.name]})}),C.map(F=>{var L;return i.jsx("td",{className:"px-2 py-3",children:i.jsx("select",{value:((L=h[E.id])==null?void 0:L[F.key])||"Good",onChange:O=>I(E.id,F.key,O.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-center",children:WY.map(O=>i.jsx("option",{value:O,children:O},O))})},F.key)})]},E.id))})]}),o.length===0&&i.jsx("div",{className:"p-8 text-center text-slate-500",children:n?"No students found in this class.":"Select a class to view students."})]})]})})},JY=()=>{const{user:s}=Uo(),[e,t]=Z.useState([]),[n,r]=Z.useState(!0),[o,c]=Z.useState(!1),[h,u]=Z.useState({name:"",phone:"",address:"",logoUrl:"",plan:"trial"}),[f,A]=Z.useState(!1),[m,x]=Z.useState(null),[g,b]=Z.useState(!1),[I,N]=Z.useState(!1),[C,E]=Z.useState(""),[F,L]=Z.useState(1),[O,H]=Z.useState({x:0,y:0}),[Q,U]=Z.useState({width:0,height:0}),R=Z.useRef(null),$=180,P=512,V=$/2,G=re=>{if(!re)return"N/A";const pe=re,ee=pe instanceof Date?pe:typeof(pe==null?void 0:pe.toDate)=="function"?pe.toDate():typeof pe=="string"||typeof pe=="number"?new Date(pe):null;return!ee||Number.isNaN(ee.getTime())?"N/A":ee.toLocaleDateString()};Z.useEffect(()=>{const re=Rs(wt,"schools");return _d(re,ee=>{const M=ee.docs.map(J=>({id:J.id,...J.data()}));t(M),r(!1)})},[]);const ae=async re=>{if(re.preventDefault(),!h.name.trim())return;const pe=()=>{if(!C||!R.current)return"";const ee=R.current,M=Q.width||ee.naturalWidth||1,J=Q.height||ee.naturalHeight||1,le=Math.max($/M,$/J)*F*(P/$),ce=O.x*(P/$),ve=O.y*(P/$),Se=document.createElement("canvas");Se.width=P,Se.height=P;const ge=Se.getContext("2d");if(!ge)return"";const Be=M*le,Fe=J*le,Qe=P/2-Be/2+ce,Ze=P/2-Fe/2+ve;return ge.drawImage(ee,Qe,Ze,Be,Fe),Se.toDataURL("image/png")};b(!0);try{const ee=pe();await y7({name:h.name.trim(),phone:h.phone.trim(),address:h.address.trim(),logoUrl:ee||"",plan:h.plan}),u({name:"",phone:"",address:"",logoUrl:"",plan:"trial"}),E(""),L(1),H({x:0,y:0}),U({width:0,height:0}),c(!1),Pt("School created successfully!",{type:"success"})}catch(ee){console.error("Error creating school:",ee),Pt(ee.message||"Failed to create school",{type:"error"})}finally{b(!1)}},ue=re=>{var M;const pe=(M=re.target.files)==null?void 0:M[0];if(!pe){E(""),U({width:0,height:0});return}const ee=new FileReader;ee.onload=()=>{E(ee.result),L(1),H({x:0,y:0})},ee.readAsDataURL(pe)},oe=async(re,pe)=>{try{const ee=pe==="active"?"inactive":"active";await Oh(Os(wt,"schools",re),{status:ee}),Pt(`School ${ee==="active"?"activated":"deactivated"}`,{type:"success"})}catch(ee){console.error("Error updating school status:",ee),Pt("Failed to update school status",{type:"error"})}},X=async()=>{if(m)try{N(!0);const re=m.id,pe=400,ee=await qs(Ks(Rs(wt,"users"),rs("schoolId","==",re)));let M=0;const J=[];for(let ce=0;ce<ee.docs.length;ce+=pe){const ve=M5(wt),Se=ee.docs.slice(ce,ce+pe);for(const ge of Se)ve.delete(Os(wt,"users",ge.id));J.push(ve.commit()),M+=Se.length}J.length>0&&(await Promise.all(J),console.log(`Deleted ${M} user documents`));const ie=["students","classes","attendance","assessments","teacher_attendance","notices","student_remarks","student_skills","admin_remarks","admin_notifications","timetables","class_subjects","settings"];let le=0;for(const ce of ie)if(ce==="settings")try{await zi(Os(wt,"settings",re)),le+=1}catch{console.log(`Settings document ${re} not found or already deleted`)}else{const ve=Ks(Rs(wt,ce),rs("schoolId","==",re)),ge=(await qs(ve)).docs.map(Be=>Be.id);if(ge.length>0)for(let Be=0;Be<ge.length;Be+=pe){const Fe=M5(wt),Qe=ge.slice(Be,Be+pe);for(const Ze of Qe)Fe.delete(Os(wt,ce,Ze));await Fe.commit(),le+=Qe.length}}await zi(Os(wt,"schools",re)),Pt(`School deleted successfully! Removed ${M} users and ${le} data records.`,{type:"success"}),A(!1),x(null)}catch(re){console.error("Error deleting school:",re),Pt(re.message||"Failed to delete school",{type:"error"})}finally{N(!1)}},Y=re=>{x(re),A(!0)};return n?i.jsx(lr,{title:"Schools",children:i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0B4A82]"})})}):i.jsxs(lr,{title:"Schools",children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Schools Management"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Manage all schools in the system"})]}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center px-4 py-2 bg-[#0B4A82] text-white rounded-lg hover:bg-[#0B4A82] transition-colors",children:[i.jsx($h,{size:18,className:"mr-2"}),"Create School"]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4",children:"Name"}),i.jsx("th",{className:"px-6 py-4",children:"Code"}),i.jsx("th",{className:"px-6 py-4",children:"Status"}),i.jsx("th",{className:"px-6 py-4",children:"Plan"}),i.jsx("th",{className:"px-6 py-4",children:"Created"}),i.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-400",children:"No schools created yet."})}):e.map(re=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsxs("td",{className:"px-6 py-4 font-medium text-slate-800 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center overflow-hidden",children:re.logoUrl?i.jsx("img",{src:re.logoUrl,alt:re.name,className:"w-full h-full object-cover"}):i.jsx(Gp,{size:16,className:"text-slate-600"})}),re.name]}),i.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:re.code}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${re.status==="active"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:re.status==="active"?"Active":"Inactive"})}),i.jsx("td",{className:"px-6 py-4 capitalize",children:re.plan}),i.jsx("td",{className:"px-6 py-4",children:G(re.createdAt)}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>oe(re.id,re.status),className:`p-1 rounded transition-colors ${re.status==="active"?"text-[#1160A8] hover:bg-[#E6F0FA]":"text-emerald-600 hover:bg-emerald-50"}`,title:re.status==="active"?"Deactivate":"Activate",children:re.status==="active"?i.jsx(MM,{size:18}):i.jsx(PM,{size:18})}),i.jsx(Ua,{to:`/super-admin/schools/${re.id}`,className:"p-1 text-slate-600 hover:bg-slate-50 rounded transition-colors",title:"View Details",children:i.jsx(Lu,{size:18})}),i.jsx("button",{onClick:()=>Y(re),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete School",children:i.jsx(RA,{size:18})})]})})]},re.id))})]})})})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-xl relative overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Create New School"}),i.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-700",children:i.jsx(_o,{size:20})})]}),i.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"School Name"}),i.jsx("input",{type:"text",required:!0,disabled:g,className:"w-full border border-slate-300 p-3 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-transparent outline-none disabled:bg-slate-100 disabled:cursor-not-allowed",value:h.name,onChange:re=>u({...h,name:re.target.value}),placeholder:"Enter school name"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",disabled:g,className:"w-full border border-slate-300 p-3 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-transparent outline-none disabled:bg-slate-100 disabled:cursor-not-allowed",value:h.phone,onChange:re=>u({...h,phone:re.target.value}),placeholder:"School phone number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Address"}),i.jsx("input",{type:"text",disabled:g,className:"w-full border border-slate-300 p-3 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-transparent outline-none disabled:bg-slate-100 disabled:cursor-not-allowed",value:h.address,onChange:re=>u({...h,address:re.target.value}),placeholder:"School address"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Logo Upload (Optional)"}),i.jsx("input",{type:"file",accept:"image/*",disabled:g,className:"w-full border border-slate-300 p-3 rounded-lg bg-white focus:ring-2 focus:ring-[#1160A8] focus:border-transparent outline-none disabled:bg-slate-100 disabled:cursor-not-allowed",onChange:ue}),C&&i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[i.jsx("span",{children:"Crop to square"}),i.jsxs("span",{children:[Math.round(F*100),"%"]})]}),i.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 flex items-center justify-center overflow-hidden",style:{width:$,height:$},children:i.jsx("img",{ref:R,src:C,alt:"Logo preview",onLoad:re=>{const pe=re.currentTarget;U({width:pe.naturalWidth,height:pe.naturalHeight})},style:{width:Q.width?`${Math.max($,$/Q.height*Q.width)*F}px`:"auto",height:Q.height?`${Math.max($,$/Q.width*Q.height)*F}px`:"auto",transform:`translate(${O.x}px, ${O.y}px)`}})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Zoom"}),i.jsx("input",{type:"range",min:1,max:3,step:.05,value:F,onChange:re=>L(parseFloat(re.target.value)),className:"w-full"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Move X"}),i.jsx("input",{type:"range",min:-V,max:V,value:O.x,onChange:re=>H(pe=>({...pe,x:parseFloat(re.target.value)})),className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Move Y"}),i.jsx("input",{type:"range",min:-V,max:V,value:O.y,onChange:re=>H(pe=>({...pe,y:parseFloat(re.target.value)})),className:"w-full"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Plan"}),i.jsxs("select",{disabled:g,className:"w-full border border-slate-300 p-3 rounded-lg focus:ring-2 focus:ring-[#1160A8] focus:border-transparent outline-none bg-white disabled:bg-slate-100 disabled:cursor-not-allowed",value:h.plan,onChange:re=>u({...h,plan:re.target.value}),children:[i.jsx("option",{value:"free",children:"Free (No Billing)"}),i.jsx("option",{value:"trial",children:"Trial"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"termly",children:"Termly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[i.jsx("button",{type:"button",disabled:g,onClick:()=>c(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:g,className:"flex items-center px-4 py-2 bg-[#0B4A82] text-white rounded-lg hover:bg-[#0B4A82] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(AA,{size:18,className:"mr-2"}),"Create School"]})})]})]}),g&&i.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"relative mb-4",children:[i.jsx("div",{className:"w-16 h-16 mx-auto",children:i.jsx(Gp,{size:64,className:"text-[#0B4A82] animate-pulse"})}),i.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 bg-[#1160A8] rounded-full animate-bounce"}),i.jsx("div",{className:"absolute top-4 right-3 w-1.5 h-1.5 bg-[#E6F0FA] rounded-full animate-ping"}),i.jsx("div",{className:"absolute bottom-2 left-4 w-1 h-1 bg-[#0B4A82] rounded-full animate-pulse"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 animate-pulse",children:"Creating Your School"}),i.jsx("p",{className:"text-sm text-slate-600 animate-pulse delay-100",children:"Setting up everything perfectly..."})]}),i.jsxs("div",{className:"flex justify-center space-x-1 mt-4",children:[i.jsx("div",{className:"w-2 h-2 bg-[#1160A8] rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-[#1160A8] rounded-full animate-bounce delay-75"}),i.jsx("div",{className:"w-2 h-2 bg-[#1160A8] rounded-full animate-bounce delay-150"})]})]})})]})}),f&&m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-xl relative overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete School"}),i.jsx("button",{onClick:()=>A(!1),disabled:I,className:"text-slate-400 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(_o,{size:20})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Are you sure you want to delete this school?"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This action cannot be undone. All associated data including students, teachers, admin accounts, and all school records will be permanently removed from the system."})]})]})}),i.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center",children:i.jsx(Gp,{size:20,className:"text-slate-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:m.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Code: ",m.code]})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[i.jsx("button",{onClick:()=>A(!1),disabled:I,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{onClick:X,disabled:I,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete School"})]}),I&&i.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"relative mb-4",children:[i.jsx("div",{className:"w-16 h-16 mx-auto",children:i.jsx(RA,{size:64,className:"text-red-600 animate-pulse"})}),i.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 bg-red-400 rounded-full animate-bounce"}),i.jsx("div",{className:"absolute top-4 right-3 w-1.5 h-1.5 bg-red-300 rounded-full animate-ping"}),i.jsx("div",{className:"absolute bottom-2 left-4 w-1 h-1 bg-red-500 rounded-full animate-pulse"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 animate-pulse",children:"Deleting School"}),i.jsx("p",{className:"text-sm text-slate-600 animate-pulse delay-100",children:"Removing associated data safely..."})]}),i.jsxs("div",{className:"flex justify-center space-x-1 mt-4",children:[i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce delay-75"}),i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce delay-150"})]})]})})]})})]})},qY=()=>{const{schoolId:s}=aF(),e=bm(),[t,n]=Z.useState(null),[r,o]=Z.useState(null),[c,h]=Z.useState(!0),[u,f]=Z.useState(!1),[A,m]=Z.useState(!1),[x,g]=Z.useState(!1),[b,I]=Z.useState({fullName:"",email:"",password:""}),[N,C]=Z.useState(!1),[E,F]=Z.useState(null),[L,O]=Z.useState({students:"0",teachers:"0",lastActivity:"Coming soon"}),[H,Q]=Z.useState(!1),[U,R]=Z.useState(""),[$,P]=Z.useState(!1),[V,G]=Z.useState(""),[ae,ue]=Z.useState(1),[oe,X]=Z.useState({x:0,y:0}),[Y,re]=Z.useState({width:0,height:0}),pe=Z.useRef(null),ee=180,M=512,J=ee/2;Z.useEffect(()=>{if(!s)return;(async()=>{var me,nt;try{const It=await kc(Os(wt,"schools",s));if(!It.exists()){Pt("School not found",{type:"error"}),e("/super-admin/schools");return}const ut={id:It.id,...It.data()};n(ut);const ze=ut.createdAt&&((nt=(me=ut.createdAt)==null?void 0:me.toDate)!=null&&nt.call(me))?ut.createdAt.toDate():null;o({name:ut.name||"",code:ut.code||"",phone:ut.phone||"",address:ut.address||"",logoUrl:ut.logoUrl||"",status:ut.status||"active",plan:ut.plan||"trial",planEndsAt:ut.planEndsAt?new Date(ut.planEndsAt).toISOString().split("T")[0]:"",notes:ut.notes||""});const Ft=Ks(Rs(wt,"users"),rs("role","==",xn.SCHOOL_ADMIN),rs("schoolId","==",ut.id)),Ct=(await qs(Ft)).docs[0];F(Ct?{id:Ct.id,...Ct.data()}:null);const[Jt,ts]=await Promise.all([qs(Ks(Rs(wt,"students"),rs("schoolId","==",ut.id))),qs(Ks(Rs(wt,"users"),rs("schoolId","==",ut.id),rs("role","==",xn.TEACHER)))]);O({students:Jt.size.toString(),teachers:ts.size.toString(),lastActivity:ze?ze.toLocaleDateString():""})}catch(It){console.error("Error fetching school:",It),Pt("Failed to load school details",{type:"error"})}finally{h(!1)}})()},[s,e]);const ie=Z.useMemo(()=>{var me,nt;if(!(t!=null&&t.createdAt))return"";const Pe=(nt=(me=t.createdAt)==null?void 0:me.toDate)!=null&&nt.call(me)?t.createdAt.toDate():new Date(t.createdAt);return!Pe||Number.isNaN(Pe.getTime())?"":Pe.toLocaleDateString()},[t==null?void 0:t.createdAt]),le=(Pe,me)=>{r&&o({...r,[Pe]:me})},ce=Pe=>{var It;const me=(It=Pe.target.files)==null?void 0:It[0];if(!me){G(""),re({width:0,height:0});return}const nt=new FileReader;nt.onload=()=>{G(nt.result),ue(1),X({x:0,y:0})},nt.readAsDataURL(me)},ve=()=>{if(!r)return!1;if(!r.name.trim())return Pt("School name is required.",{type:"error"}),!1;if(r.phone&&r.phone.trim().length<7)return Pt("Phone number is too short.",{type:"error"}),!1;if(r.planEndsAt){const Pe=new Date(r.planEndsAt),me=new Date;if(me.setHours(0,0,0,0),Pe<me)return Pt("Plan end date cannot be in the past.",{type:"error"}),!1}return!0},Se=async()=>{if(!s||!r||!ve())return;const Pe=()=>{if(!V||!pe.current)return"";const me=pe.current,nt=Y.width||me.naturalWidth||1,It=Y.height||me.naturalHeight||1,ze=Math.max(ee/nt,ee/It)*ae*(M/ee),Ft=oe.x*(M/ee),Qt=oe.y*(M/ee),Ct=document.createElement("canvas");Ct.width=M,Ct.height=M;const Jt=Ct.getContext("2d");if(!Jt)return"";const ts=nt*ze,as=It*ze,Xe=M/2-ts/2+Ft,Vt=M/2-as/2+Qt;return Jt.drawImage(me,Xe,Vt,ts,as),Ct.toDataURL("image/png")};f(!0);try{const nt=Pe()||r.logoUrl.trim();await Vi(Os(wt,"schools",s),{name:r.name.trim(),code:r.code.trim(),phone:r.phone.trim(),address:r.address.trim(),logoUrl:nt,status:r.status,plan:r.plan,planEndsAt:r.planEndsAt?new Date(r.planEndsAt):null,notes:r.notes.trim()},{merge:!0}),Pt("School updated successfully.",{type:"success"}),n(It=>It&&{...It,...r,logoUrl:nt,planEndsAt:r.planEndsAt?new Date(r.planEndsAt):null}),o(It=>It&&{...It,logoUrl:nt}),G(""),ue(1),X({x:0,y:0}),re({width:0,height:0})}catch(me){console.error("Failed to update school",me),Pt(me.message||"Failed to update school.",{type:"error"})}finally{f(!1)}},ge=()=>{t&&o({name:t.name||"",code:t.code||"",phone:t.phone||"",address:t.address||"",logoUrl:t.logoUrl||"",status:t.status||"active",plan:t.plan||"trial",planEndsAt:t.planEndsAt?new Date(t.planEndsAt).toISOString().split("T")[0]:"",notes:t.notes||""})},Be=async Pe=>{if(Pe.preventDefault(),!!s&&!(!b.fullName.trim()||!b.email.trim())){C(!0);try{const me=await b7({schoolId:s,fullName:b.fullName.trim(),email:b.email.trim(),password:b.password.trim()||void 0});Pt(b.password.trim()?`Admin created: ${me.email}`:`Admin created: ${me.email}. Reset link sent.`,{type:"success"}),I({fullName:"",email:"",password:""}),m(!1);const nt=Ks(Rs(wt,"users"),rs("role","==",xn.SCHOOL_ADMIN),rs("schoolId","==",s)),ut=(await qs(nt)).docs[0];F(ut?{id:ut.id,...ut.data()}:null)}catch(me){console.error("Error creating admin:",me),Pt(me.message||"Failed to create admin.",{type:"error"})}finally{C(!1)}}},Fe=async()=>{if(E)try{const Pe=await w7({adminUid:E.id});await navigator.clipboard.writeText(Pe.resetLink),Pt("Reset link copied to clipboard.",{type:"success"})}catch(Pe){console.error("Failed to reset admin password",Pe),Pt(Pe.message||"Failed to reset admin password.",{type:"error"})}},Qe=async()=>{if(E)try{await Oh(Os(wt,"users",E.id),{status:"inactive"}),F({...E,status:"inactive"}),Pt("Admin disabled successfully.",{type:"success"})}catch(Pe){console.error("Failed to disable admin",Pe),Pt(Pe.message||"Failed to disable admin.",{type:"error"})}},Ze=async()=>{if(!(!t||U.trim()!==t.name)){P(!0);try{await S7({schoolId:t.id}),Pt("School deleted successfully.",{type:"success"}),Q(!1),e("/super-admin/schools")}catch(Pe){console.error("Failed to delete school",Pe),Pt(Pe.message||"Failed to delete school.",{type:"error"})}finally{P(!1),R("")}}};return c?i.jsx(lr,{title:"School Details",children:i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0B4A82]"})})}):!t||!r?i.jsx(lr,{title:"School Details",children:i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"School not found"})})}):i.jsxs(lr,{title:"School Details",children:[i.jsxs("div",{className:"p-6 space-y-8",children:[i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("button",{onClick:()=>e("/super-admin/schools"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-700 text-sm",children:[i.jsx(LT,{size:16}),"Schools / ",t.name]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-100 flex items-center justify-center overflow-hidden",children:t.logoUrl?i.jsx("img",{src:t.logoUrl,alt:t.name,className:"w-full h-full object-cover"}):i.jsx(yk,{className:"text-slate-500"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t.name}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Gh,{size:14})," Code: ",t.code||""]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(mo,{size:14})," Created: ",ie]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.status==="active"?"bg-emerald-100 text-emerald-700":"bg-[#E6F0FA] text-[#0B4A82]"}`,children:t.status==="active"?"Active":"Inactive"}),i.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-slate-100 text-slate-600",children:t.plan})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1.1fr_1.4fr] gap-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm p-6 space-y-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Overview"}),i.jsxs("div",{className:"grid gap-3 text-sm text-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(wM,{size:16}),i.jsx("span",{children:t.phone||"No phone"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(lM,{size:16}),i.jsx("span",{children:t.address||"No address"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Gh,{size:16}),i.jsx("span",{children:t.notes||"No internal notes"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Administration"}),!E&&i.jsx("button",{onClick:()=>m(!0),className:"text-sm font-medium text-emerald-600 hover:text-emerald-700",children:"Create Admin"})]}),E?i.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900",children:E.fullName}),i.jsx("p",{className:"text-sm text-slate-500",children:E.email})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.status==="active"?"bg-emerald-100 text-emerald-700":"bg-[#E6F0FA] text-[#0B4A82]"}`,children:E.status})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:Fe,className:"px-3 py-2 rounded-lg border border-slate-200 text-sm text-slate-600 hover:bg-slate-50",children:"Reset Admin Password"}),i.jsx("button",{onClick:Qe,className:"px-3 py-2 rounded-lg border border-red-200 text-sm text-red-600 hover:bg-red-50",children:"Disable Admin"})]})]}):i.jsx("div",{className:"text-sm text-slate-500",children:"No admin assigned yet."})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{label:"Total students",value:L.students},{label:"Total teachers",value:L.teachers},{label:"Last activity",value:L.lastActivity}].map(Pe=>i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm p-4",children:[i.jsx("p",{className:"text-xs uppercase text-slate-400",children:Pe.label}),i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Pe.value})]},Pe.label))})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Edit School Settings"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Name"}),i.jsx("input",{value:r.name,onChange:Pe=>le("name",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Code"}),i.jsx("input",{value:r.code,onChange:Pe=>le("code",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Phone"}),i.jsx("input",{value:r.phone,onChange:Pe=>le("phone",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Status"}),i.jsxs("select",{value:r.status,onChange:Pe=>le("status",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2 bg-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Address"}),i.jsx("input",{value:r.address,onChange:Pe=>le("address",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Logo Upload"}),i.jsx("input",{type:"file",accept:"image/*",onChange:ce,className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2 bg-white"}),r.logoUrl&&!V&&i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Current logo is saved. Upload a new file to replace it."}),V&&i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[i.jsx("span",{children:"Crop to square"}),i.jsxs("span",{children:[Math.round(ae*100),"%"]})]}),i.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 flex items-center justify-center overflow-hidden",style:{width:ee,height:ee},children:i.jsx("img",{ref:pe,src:V,alt:"Logo preview",onLoad:Pe=>{const me=Pe.currentTarget;re({width:me.naturalWidth,height:me.naturalHeight})},style:{width:Y.width?`${Math.max(ee,ee/Y.height*Y.width)*ae}px`:"auto",height:Y.height?`${Math.max(ee,ee/Y.width*Y.height)*ae}px`:"auto",transform:`translate(${oe.x}px, ${oe.y}px)`}})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Zoom"}),i.jsx("input",{type:"range",min:1,max:3,step:.05,value:ae,onChange:Pe=>ue(parseFloat(Pe.target.value)),className:"w-full"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Move X"}),i.jsx("input",{type:"range",min:-J,max:J,value:oe.x,onChange:Pe=>X(me=>({...me,x:parseFloat(Pe.target.value)})),className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Move Y"}),i.jsx("input",{type:"range",min:-J,max:J,value:oe.y,onChange:Pe=>X(me=>({...me,y:parseFloat(Pe.target.value)})),className:"w-full"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Plan"}),i.jsxs("select",{value:r.plan,onChange:Pe=>le("plan",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2 bg-white",children:[i.jsx("option",{value:"free",children:"Free (No Billing)"}),i.jsx("option",{value:"trial",children:"Trial"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"termly",children:"Termly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Plan Ends At"}),i.jsx("input",{type:"date",value:r.planEndsAt,onChange:Pe=>le("planEndsAt",Pe.target.value),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Internal Notes"}),i.jsx("textarea",{value:r.notes,onChange:Pe=>le("notes",Pe.target.value),rows:4,className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[i.jsx("button",{onClick:ge,className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-600",children:"Cancel"}),i.jsxs("button",{onClick:Se,disabled:u,className:"px-4 py-2 rounded-xl bg-emerald-600 text-white flex items-center gap-2 disabled:opacity-60",children:[i.jsx(AA,{size:16})," ",u?"Saving...":"Save Changes"]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-red-100 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[i.jsx(Y5,{size:18}),i.jsx("h2",{className:"text-lg font-semibold",children:"Danger Zone"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>le("status",r.status==="active"?"inactive":"active"),className:"w-full flex items-center justify-between px-4 py-3 rounded-xl border border-red-200 text-red-600 hover:bg-red-50",children:[i.jsx("span",{children:r.status==="active"?"Deactivate School":"Activate School"}),i.jsx(RA,{size:16})]}),i.jsxs("button",{onClick:()=>Q(!0),className:"w-full flex items-center justify-between px-4 py-3 rounded-xl border border-red-200 text-red-600 hover:bg-red-50",children:[i.jsx("span",{children:"Delete School"}),i.jsx(RA,{size:16})]})]})]})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-xl relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create School Admin"}),i.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-700",children:i.jsx(_o,{size:18})})]}),i.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Full Name"}),i.jsx("input",{value:b.fullName,onChange:Pe=>I({...b,fullName:Pe.target.value}),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Email"}),i.jsx("input",{type:"email",value:b.email,onChange:Pe=>I({...b,email:Pe.target.value}),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Password (optional)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:x?"text":"password",value:b.password,onChange:Pe=>I({...b,password:Pe.target.value}),className:"w-full mt-1 border border-slate-200 rounded-xl px-3 py-2 pr-10"}),i.jsx("button",{type:"button",onClick:()=>g(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:x?i.jsx(a2,{size:16}):i.jsx(Lu,{size:16})})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Leave blank to send a reset link."})]}),i.jsxs("button",{type:"submit",disabled:N,className:"w-full py-2 rounded-xl bg-emerald-600 text-white flex items-center justify-center gap-2 disabled:opacity-60",children:[i.jsx(A2,{size:16}),N?"Creating...":"Create Admin"]})]})]})}),H&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-xl space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[i.jsx(Y5,{size:18}),i.jsx("h3",{className:"text-lg font-semibold",children:"Delete School"})]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Type ",i.jsx("span",{className:"font-semibold",children:t.name})," to confirm deletion."]}),i.jsx("input",{value:U,onChange:Pe=>R(Pe.target.value),className:"w-full border border-slate-200 rounded-xl px-3 py-2"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-2 rounded-xl border border-slate-200 text-slate-600",children:"Cancel"}),i.jsx("button",{onClick:Ze,disabled:U.trim()!==t.name||$,className:"flex-1 py-2 rounded-xl bg-red-600 text-white disabled:opacity-60",children:$?"Deleting...":"Delete"})]})]})})]})},jd=({children:s,className:e=""})=>i.jsx("div",{className:`bg-white rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow p-6 ${e}`,children:s}),lx=({label:s,value:e,hint:t,icon:n,trend:r=0})=>i.jsxs(jd,{className:"group hover:-translate-y-0.5 hover:shadow-lg transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:s}),i.jsx("div",{className:"text-3xl md:text-4xl font-bold text-slate-900 mt-2",children:e})]}),i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-white ${r>=0?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-amber-400 to-amber-600"}`,children:n})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[t&&i.jsx("div",{className:"text-xs text-slate-500",children:t}),r!==void 0&&i.jsxs("div",{className:`flex items-center gap-1 text-xs font-semibold ${r>=0?"text-emerald-600":"text-[#0B4A82]"}`,children:[r>=0?i.jsx(QT,{size:14}):i.jsx(lk,{size:14}),Math.abs(r),"%"]})]}),i.jsx("div",{className:"mt-3 h-1 bg-gradient-to-r from-slate-100 via-slate-200 to-slate-100 rounded-full opacity-50"})]}),Ax=({icon:s,title:e,count:t,description:n,accentColor:r})=>i.jsx(jd,{className:`border-l-4 ${r} group hover:shadow-lg transition-all`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-white ${r.replace("border","bg")}`,children:s}),i.jsx("h3",{className:"font-semibold text-slate-800",children:e})]}),i.jsx("div",{className:"text-3xl font-bold text-slate-900 mb-1",children:t}),i.jsx("p",{className:"text-sm text-slate-600",children:n})]}),i.jsx("button",{className:"p-2 rounded-lg hover:bg-slate-50 transition",children:i.jsx(OT,{size:18,className:"text-slate-400"})})]})}),Vf=({className:s="h-6 bg-gradient-to-r from-slate-100 via-slate-50 to-slate-100 rounded animate-pulse"})=>i.jsx("div",{className:s}),kN=({icon:s,title:e,description:t,action:n})=>i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"flex justify-center mb-4",children:s}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:e}),i.jsx("p",{className:"text-sm text-slate-600 mb-6",children:t}),n&&i.jsx("button",{onClick:n.onClick,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#0B4A82] text-white rounded-lg hover:bg-[#0B4A82] transition-colors text-sm font-medium",children:n.label})]}),g_=()=>{const{user:s}=Uo(),[e,t]=Z.useState([]),[n,r]=Z.useState([]),[o,c]=Z.useState([]),[h,u]=Z.useState(!1),[f,A]=Z.useState(""),[m,x]=Z.useState(""),[g,b]=Z.useState(""),[I,N]=Z.useState("inactive"),[C,E]=Z.useState(null),[F,L]=Z.useState({summary:{},perSchool:{}}),O=Z.useCallback(async()=>{u(!0);try{const X=Rs(wt,"schools"),re=(await qs(X)).docs.map(Se=>({id:Se.id,...Se.data()}));t(re);const pe=Rs(wt,"activity_logs"),ee=Ks(pe,Zx("createdAt","desc"),am(20)),J=(await qs(ee)).docs.map(Se=>({id:Se.id,...Se.data()}));r(J);const ie=Rs(wt,"payments"),le=Ks(ie,Zx("createdAt","desc"),am(200)),ve=(await qs(le)).docs.map(Se=>({id:Se.id,...Se.data()}));c(ve),E(new Date)}catch(X){console.error(X)}finally{u(!1)}},[]);Z.useEffect(()=>{if(!e.length)return;(async()=>{try{const Y=new Date,pe=(ut=>{const ze=ut.getFullYear(),Ft=String(ut.getMonth()+1).padStart(2,"0"),Qt=String(ut.getDate()).padStart(2,"0");return`${ze}-${Ft}-${Qt}`})(Y),ee=new Date(Y);ee.setHours(0,0,0,0);const M=new Date(Y);M.setHours(23,59,59,999);const J=ee.getTime(),ie=M.getTime(),le=e.length,ce={attendance:{completed:0,total:le},teacherAttendance:{completed:0,total:le},assessments:{completed:0,total:le},timetable:{completed:0,total:le},notices:{completed:0,total:le}},ve={},[Se,ge,Be,Fe,Qe]=await Promise.all([qs(Ks(Rs(wt,"attendance"),rs("date","==",pe))),qs(Ks(Rs(wt,"teacher_attendance"),rs("date","==",pe))),qs(Ks(Rs(wt,"assessments"),rs("createdAt",">=",J),rs("createdAt","<=",ie))),qs(Rs(wt,"timetables")),qs(Ks(Rs(wt,"notices"),rs("createdAt",">=",J),rs("createdAt","<=",ie)))]),Ze=new Set(Se.docs.map(ut=>ut.data().schoolId).filter(Boolean)),Pe=new Set(ge.docs.map(ut=>ut.data().schoolId).filter(Boolean)),me=new Set(Be.docs.map(ut=>ut.data().schoolId).filter(Boolean)),nt=new Set(Fe.docs.map(ut=>ut.data().schoolId).filter(Boolean)),It=new Set(Qe.docs.map(ut=>ut.data().schoolId).filter(Boolean));e.forEach(ut=>{const ze=ut.id;if(!ze)return;const Ft={attendance:Ze.has(ze),teacherAttendance:Pe.has(ze),assessments:me.has(ze),timetable:nt.has(ze),notices:It.has(ze)};ve[ze]=Ft,Ft.attendance&&(ce.attendance.completed+=1),Ft.teacherAttendance&&(ce.teacherAttendance.completed+=1),Ft.assessments&&(ce.assessments.completed+=1),Ft.timetable&&(ce.timetable.completed+=1),Ft.notices&&(ce.notices.completed+=1)}),L({summary:ce,perSchool:ve})}catch(Y){console.error("Failed to load daily checklist",Y)}})()},[e]),Z.useEffect(()=>{O()},[O]);const H=Z.useMemo(()=>{const X=e.length,Y=e.filter(le=>le.status==="active").length,re=e.filter(le=>le.status==="inactive").length,pe=e.filter(le=>le.plan==="trial").length,ee=e.filter(le=>le.plan==="free").length,M=e.filter(le=>le.plan&&le.plan!=="trial"&&le.plan!=="free").length,J=e.filter(le=>le.createdAt?(le.createdAt instanceof tr?le.createdAt.toDate():new Date(le.createdAt))>=new Date(Date.now()-720*60*60*1e3):!1).length,ie=new Set(n.filter(le=>le.createdAt?(le.createdAt instanceof tr?le.createdAt.toDate():new Date(le.createdAt))>=new Date(Date.now()-10080*60*1e3):!1).map(le=>le.schoolId)).size;return{total:X,active:Y,inactive:re,trial:pe,free:ee,paid:M,newSchools:J,activeLast7:ie}},[e,n]),Q=X=>{const Y=String(X||"pending").toLowerCase();return["success","paid","active"].includes(Y)?"success":["failed","failure","past_due"].includes(Y)||["abandoned","cancelled","canceled"].includes(Y)?"failed":"pending"},U=(X,Y="GHS")=>new Intl.NumberFormat("en-GH",{style:"currency",currency:Y,maximumFractionDigits:2}).format(X),R=Z.useMemo(()=>{const X=new Date,Y=[];for(let ge=0;ge<12;ge+=1){const Be=new Date(X.getFullYear(),ge,1),Fe=`${Be.getFullYear()}-${String(Be.getMonth()+1).padStart(2,"0")}`,Qe=Be.toLocaleString("en-US",{month:"short"});Y.push({key:Fe,label:Qe})}const re=Object.fromEntries(Y.map(ge=>[ge.key,0])),pe=Object.fromEntries(Y.map(ge=>[ge.key,0])),ee=new Date(Date.now()-720*60*60*1e3);let M=0,J=0,ie=0,le=0,ce=0;o.forEach(ge=>{const Be=Q(ge.status),Fe=ge.amount??0,Qe=Fe>=100?Fe/100:Fe,Ze=ge.createdAt instanceof tr?ge.createdAt.toDate():new Date(ge.createdAt||0);if(Be==="success"){M+=Qe,J+=1,Ze>=ee&&(ce+=Qe);const Pe=`${Ze.getFullYear()}-${String(Ze.getMonth()+1).padStart(2,"0")}`;re[Pe]!==void 0&&(re[Pe]+=Qe),pe[Pe]!==void 0&&(pe[Pe]+=Qe)}Be==="pending"&&(ie+=1),Be==="failed"&&(le+=1)});const ve=J+ie+le,Se=ve?Math.round(J/ve*100):0;return{paidAmount:M,paidCount:J,pendingCount:ie,failedCount:le,last30Amount:ce,successRate:Se,monthlySeries:Y.map(ge=>({label:ge.label,value:re[ge.key]||0})),monthlyFeesSeries:Y.map(ge=>({label:ge.label,value:pe[ge.key]||0}))}},[o]),$=Z.useMemo(()=>{const X={free:0,trial:0,monthly:0,termly:0,yearly:0};return e.forEach(Y=>{const re=Y.plan||"trial";X[re]=(X[re]||0)+1}),X},[e]),P=e.filter(X=>!(f&&!X.name.toLowerCase().includes(f.toLowerCase())||m&&X.status!==m||g&&X.plan!==g)),V=e.filter(X=>X.status!=="active"),G=e.filter(X=>X.plan==="trial"&&X.planEndsAt).sort((X,Y)=>{const re=X.planEndsAt instanceof tr?X.planEndsAt.toDate().getTime():new Date(X.planEndsAt).getTime(),pe=Y.planEndsAt instanceof tr?Y.planEndsAt.toDate().getTime():new Date(Y.planEndsAt).getTime();return re-pe}),ae=e.filter(X=>X.plan!=="free"&&X.planEndsAt).map(X=>{const Y=X.planEndsAt,re=Y instanceof tr?Y.toDate():new Date(Y),pe=new Date(re.getTime()+10080*60*1e3);return{...X,planEndsAt:re,graceEndsAt:pe}}).filter(X=>!Number.isNaN(X.graceEndsAt.getTime())).filter(X=>new Date>=X.graceEndsAt).sort((X,Y)=>X.graceEndsAt.getTime()-Y.graceEndsAt.getTime()),ue=(()=>{const X=new Date(Date.now()-12096e5),Y={};return n.forEach(re=>{if(!re.schoolId)return;const pe=re.createdAt instanceof tr?re.createdAt.toDate():new Date(re.createdAt);(!Y[re.schoolId]||Y[re.schoolId]<pe)&&(Y[re.schoolId]=pe)}),e.filter(re=>{const pe=Y[re.id];return!pe||pe<X})})(),oe=[{label:"Active",count:H.active,color:"bg-emerald-100 text-emerald-700"},{label:"Free",count:H.free,color:"bg-emerald-50 text-emerald-700"},{label:"Trial",count:H.trial,color:"bg-amber-100 text-amber-700"},{label:"Paid",count:H.paid,color:"bg-[#E6F0FA] text-[#0B4A82]"}];return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"bg-gradient-to-br from-slate-50 via-white to-slate-50 rounded-3xl border border-slate-100 shadow-sm p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-xs font-semibold text-emerald-600 uppercase tracking-widest",children:"System Status"})]}),i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Super Admin Dashboard"}),i.jsxs("p",{className:"text-slate-600",children:["Manage ",H.total," schools across ",H.active," active organizations"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>O(),"aria-label":"Refresh dashboard",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1160A8]",children:[i.jsx(mg,{size:16,className:"group-hover:rotate-180 transition-transform"}),"Refresh"]}),i.jsxs(Ua,{to:"/super-admin/schools",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#0B4A82] text-white rounded-lg text-sm font-medium hover:bg-[#0B4A82] transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1160A8]",children:[i.jsx(Gp,{size:16}),"View Schools"]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-6 pt-6 border-t border-slate-100",children:[oe.map(X=>i.jsxs("div",{className:`px-3 py-1.5 rounded-full text-xs font-semibold ${X.color}`,children:[X.label,": ",i.jsx("span",{className:"font-bold",children:X.count})]},X.label)),i.jsx("div",{className:"text-xs text-slate-500 flex items-center ml-auto",children:C?`Last updated ${C.toLocaleTimeString()}`:"Not updated yet"})]})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-8",children:h?Array.from({length:4}).map((X,Y)=>i.jsx("div",{children:i.jsx(Vf,{className:"h-32"})},Y)):i.jsxs(i.Fragment,{children:[i.jsx(lx,{label:"Total Schools",value:H.total,hint:"All time",icon:i.jsx(xl,{size:20}),trend:5}),i.jsx(lx,{label:"Active Schools",value:H.active,hint:"Currently active",icon:i.jsx(DA,{size:20}),trend:3}),i.jsx(lx,{label:"Inactive Schools",value:H.inactive,hint:"Needs attention",icon:i.jsx(Wi,{size:20}),trend:-1}),i.jsx(lx,{label:"New Schools",value:H.newSchools,hint:"Last 30 days",icon:i.jsx(Ud,{size:20}),trend:8})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[i.jsxs(jd,{className:"lg:col-span-2",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Billing Analytics"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Payment performance over the last 6 months"})]}),i.jsxs(Ua,{to:"/super-admin/payments",className:"inline-flex items-center gap-2 text-sm font-semibold text-[#0B4A82]",children:["View payments ",i.jsx(OT,{size:16})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/50 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-semibold uppercase text-emerald-600",children:"Total Revenue"}),i.jsx("span",{className:"w-8 h-8 rounded-lg bg-emerald-500/90 text-white flex items-center justify-center",children:i.jsx(fk,{size:16})})]}),i.jsx("div",{className:"mt-3 text-2xl font-bold text-slate-900",children:U(R.paidAmount)}),i.jsxs("p",{className:"text-xs text-emerald-700 mt-2",children:[R.paidCount," successful payments"]})]}),i.jsxs("div",{className:"rounded-2xl border border-amber-100 bg-amber-50/60 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-semibold uppercase text-amber-600",children:"Pending"}),i.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-500/90 text-white flex items-center justify-center",children:i.jsx(ac,{size:16})})]}),i.jsx("div",{className:"mt-3 text-2xl font-bold text-slate-900",children:R.pendingCount}),i.jsx("p",{className:"text-xs text-amber-700 mt-2",children:"Awaiting confirmation"})]}),i.jsxs("div",{className:"rounded-2xl border border-rose-100 bg-rose-50/60 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-semibold uppercase text-rose-600",children:"Failed"}),i.jsx("span",{className:"w-8 h-8 rounded-lg bg-rose-500/90 text-white flex items-center justify-center",children:i.jsx(Wi,{size:16})})]}),i.jsx("div",{className:"mt-3 text-2xl font-bold text-slate-900",children:R.failedCount}),i.jsx("p",{className:"text-xs text-rose-700 mt-2",children:"Needs follow-up"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-5",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Earnings"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Successful payments per month"})]}),i.jsx("div",{className:"text-xs text-slate-400",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-6 text-xs text-slate-500",children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-[#3B82F6]"}),"Total Collections"]}),i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"}),"Fees Collection"]})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-400",children:"Total Collections"}),i.jsx("p",{className:"text-lg font-bold text-slate-900",children:U(R.paidAmount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-400",children:"Fees Collection"}),i.jsx("p",{className:"text-lg font-bold text-slate-900",children:U(R.last30Amount)})]})]}),i.jsx("div",{className:"mt-4",children:(()=>{const le=Be=>Be>=300?130-(Be-300)/3300*102:130+Math.min(1,(300-Be)/300)*22,ce=R.monthlySeries.map((Be,Fe)=>{const Qe=28+Fe*584/(R.monthlySeries.length-1||1),Ze=le(Be.value);return{x:Qe,y:Ze}}),ve=R.monthlyFeesSeries.map((Be,Fe)=>{const Qe=28+Fe*584/(R.monthlyFeesSeries.length-1||1),Ze=le(Be.value);return{x:Qe,y:Ze}}),Se=Be=>{if(Be.length===0)return"";const[Fe,...Qe]=Be;return Qe.reduce((Ze,Pe,me)=>{const nt=Be[me],It=(nt.x+Pe.x)/2;return`${Ze} Q ${It} ${nt.y} ${Pe.x} ${Pe.y}`},`M ${Fe.x} ${Fe.y}`)},ge=Be=>{const Fe=Se(Be);if(!Fe)return"";const Qe=Be[Be.length-1],Ze=Be[0];return`${Fe} L ${Qe.x} 152 L ${Ze.x} 152 Z`};return i.jsx("div",{className:"w-full rounded-2xl bg-gradient-to-br from-slate-50 via-white to-slate-50 border border-slate-100 p-3 shadow-[0_10px_30px_-24px_rgba(15,23,42,0.5)]",children:i.jsxs("svg",{viewBox:"0 0 640 180",className:"w-full h-44",role:"img","aria-label":"Monthly earnings chart",children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"earningsBlue",x1:"0",x2:"0",y1:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.65"}),i.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0.05"})]}),i.jsxs("linearGradient",{id:"earningsRed",x1:"0",x2:"0",y1:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#F43F5E",stopOpacity:"0.7"}),i.jsx("stop",{offset:"100%",stopColor:"#F43F5E",stopOpacity:"0.1"})]})]}),i.jsx("rect",{x:28,y:28,width:584,height:102,rx:12,fill:"#FFFFFF",opacity:"0.6"}),i.jsx("rect",{x:28,y:130,width:584,height:22,rx:10,fill:"#F1F5F9"}),[0,25,50,75,100].map(Be=>{const Fe=130-Be/100*102,Qe=Math.round(300+Be/100*3300);return i.jsxs("g",{children:[i.jsx("line",{x1:28,x2:612,y1:Fe,y2:Fe,stroke:"#E2E8F0",strokeDasharray:"4 4"}),i.jsxs("text",{x:6,y:Fe+4,fontSize:"10",fill:"#94A3B8",children:["GHS ",Qe.toLocaleString("en-GH")]})]},Be)}),i.jsx("line",{x1:28,x2:612,y1:130,y2:130,stroke:"#CBD5F5",strokeWidth:"1.5"}),i.jsx("path",{d:ge(ce),fill:"url(#earningsBlue)"}),i.jsx("path",{d:Se(ce),fill:"none",stroke:"#3B82F6",strokeWidth:"2"}),i.jsx("path",{d:ge(ve),fill:"url(#earningsRed)"}),i.jsx("path",{d:Se(ve),fill:"none",stroke:"#F43F5E",strokeWidth:"2"}),R.monthlySeries.map((Be,Fe)=>{const Qe=28+Fe*584/(R.monthlySeries.length-1||1);return i.jsx("text",{x:Qe,y:174,textAnchor:"middle",fontSize:"10",fill:"#94A3B8",children:Be.label},Be.label)})]})})})()})]})]}),i.jsxs(jd,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Billing Health"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Current payment status mix"})]}),i.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#E6F0FA] text-[#0B4A82] flex items-center justify-center",children:i.jsx(pg,{size:18})})]}),i.jsx("div",{className:"space-y-4",children:[{label:"Successful",value:R.paidCount,color:"bg-emerald-500"},{label:"Pending",value:R.pendingCount,color:"bg-amber-500"},{label:"Failed",value:R.failedCount,color:"bg-rose-500"}].map(X=>{const Y=R.paidCount+R.pendingCount+R.failedCount,re=Y?Math.round(X.value/Y*100):0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium text-slate-700",children:X.label}),i.jsxs("span",{className:"text-slate-500",children:[re,"%"]})]}),i.jsx("div",{className:"h-2 rounded-full bg-slate-100 overflow-hidden",children:i.jsx("div",{className:`h-full ${X.color} rounded-full`,style:{width:`${re}%`}})})]},X.label)})}),i.jsxs("div",{className:"mt-6 rounded-2xl bg-slate-50 border border-slate-100 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Success rate"}),i.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[R.successRate,"%"]})]}),i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:i.jsx(Ud,{size:18})})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Track billed revenue and follow up on pending payments."})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 mb-8",children:[i.jsx(Ax,{icon:i.jsx(Wi,{size:18}),title:"Inactive Schools",count:V.length,description:"Schools requiring attention",accentColor:"border-[#1160A8] bg-[#E6F0FA]"}),i.jsx(Ax,{icon:i.jsx(t7,{size:18}),title:"Trials Ending",count:G.length,description:"Trial periods expiring soon",accentColor:"border-amber-400 bg-amber-80"}),i.jsx(Ax,{icon:i.jsx(ac,{size:18}),title:"Expired Subscriptions",count:ae.length,description:"Grace period ended  renewal required",accentColor:"border-rose-400 bg-rose-50"}),i.jsx(Ax,{icon:i.jsx(ac,{size:18}),title:"No Recent Activity",count:ue.length,description:"Last 14 days with no activity",accentColor:"border-slate-400 bg-slate-50"})]}),ae.length>0&&i.jsxs(jd,{className:"mb-8",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-rose-500",children:"Renewal required"}),i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mt-1",children:"Subscriptions past grace period"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"These schools have exceeded the one-week grace period and need renewal to restore access."})]}),i.jsxs(Ua,{to:"/super-admin/payments",className:"inline-flex items-center gap-2 rounded-full border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-600 hover:bg-rose-100",children:[i.jsx(pg,{size:16}),"Review payments"]})]}),i.jsx("div",{className:"mt-6 overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-xs uppercase tracking-wider text-slate-400",children:[i.jsx("th",{className:"py-2 pr-4",children:"School"}),i.jsx("th",{className:"py-2 pr-4",children:"Plan"}),i.jsx("th",{className:"py-2 pr-4",children:"Grace ended"}),i.jsx("th",{className:"py-2",children:"Status"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:ae.slice(0,6).map(X=>i.jsxs("tr",{className:"text-slate-600",children:[i.jsxs("td",{className:"py-3 pr-4",children:[i.jsx(Ua,{to:`/super-admin/schools/${X.id}`,className:"font-semibold text-slate-800 hover:text-[#0B4A82]",children:X.name}),i.jsx("div",{className:"text-xs text-slate-400",children:X.code})]}),i.jsx("td",{className:"py-3 pr-4 capitalize",children:X.plan}),i.jsx("td",{className:"py-3 pr-4",children:X.graceEndsAt.toLocaleDateString()}),i.jsx("td",{className:"py-3",children:i.jsx("span",{className:"inline-flex items-center rounded-full bg-rose-50 px-2 py-1 text-xs font-semibold text-rose-600",children:"Renewal overdue"})})]},X.id))})]})})]}),i.jsxs(jd,{className:"mb-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Plan Distribution"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Plan split across ",H.total," schools"]})]}),e.length===0?i.jsx(kN,{icon:i.jsx(Tk,{className:"mx-auto text-slate-300",size:48}),title:"No Plan Data",description:"Create your first school to see plan distribution",action:{label:"Create School",onClick:()=>{}}}):i.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-center",children:[i.jsx("div",{className:"w-full lg:w-1/3 flex justify-center",children:i.jsx("div",{className:"w-40 h-40",children:i.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full",style:{transform:"rotate(-90deg)"},children:[i.jsx("circle",{cx:"18",cy:"18",r:"15.915",fill:"none",stroke:"#f1f5f9",strokeWidth:"8"}),i.jsx("circle",{cx:"18",cy:"18",r:"15.915",fill:"none",stroke:"#f97316",strokeWidth:"8",strokeDasharray:`${$.trial/Math.max(1,e.length)*100} 100`}),i.jsx("circle",{cx:"18",cy:"18",r:"15.915",fill:"none",stroke:"#3b82f6",strokeWidth:"8",strokeDasharray:`${$.monthly/Math.max(1,e.length)*100} 100`,style:{strokeDashoffset:`${-($.trial/Math.max(1,e.length)*100)}`}})]})})}),i.jsx("div",{className:"w-full lg:w-2/3",children:i.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Free",value:$.free,color:"bg-emerald-50 border-l-4 border-emerald-500"},{label:"Trial",value:$.trial,color:"bg-orange-100 border-l-4 border-orange-500"},{label:"Monthly",value:$.monthly,color:"bg-[#E6F0FA] border-l-4 border-[#1160A8]"},{label:"Termly",value:$.termly,color:"bg-green-100 border-l-4 border-green-500"},{label:"Yearly",value:$.yearly,color:"bg-purple-100 border-l-4 border-purple-500"}].map(X=>i.jsxs("div",{className:`${X.color} rounded-lg p-4`,children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900",children:X.value}),i.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[X.label," Plan"]})]},X.label))})})]})]}),i.jsxs(jd,{className:"mb-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Schools Directory"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[P.length," of ",e.length," schools"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center",children:[i.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[i.jsx(gb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{value:f,onChange:X=>A(X.target.value),placeholder:"Search schools...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-[#1160A8] transition-all","aria-label":"Search schools"})]}),i.jsxs("select",{value:m,onChange:X=>x(X.target.value),className:"px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#1160A8]",children:[i.jsx("option",{value:"",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"})]}),i.jsxs("select",{value:g,onChange:X=>b(X.target.value),className:"px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#1160A8]",children:[i.jsx("option",{value:"",children:"All Plans"}),i.jsx("option",{value:"free",children:"Free"}),i.jsx("option",{value:"trial",children:"Trial"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"termly",children:"Termly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"School"}),i.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Plan"}),i.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Created"}),i.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-700",children:"Action"})]})}),i.jsx("tbody",{children:h?Array.from({length:5}).map((X,Y)=>i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-4 px-4",children:i.jsx(Vf,{className:"h-4 w-32"})}),i.jsx("td",{className:"py-4 px-4",children:i.jsx(Vf,{className:"h-4 w-16"})}),i.jsx("td",{className:"py-4 px-4",children:i.jsx(Vf,{className:"h-4 w-20"})}),i.jsx("td",{className:"py-4 px-4",children:i.jsx(Vf,{className:"h-4 w-24"})}),i.jsx("td",{className:"py-4 px-4 text-right",children:i.jsx(Vf,{className:"h-8 w-16 ml-auto"})})]},Y)):P.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"py-12 px-4",children:i.jsx(kN,{icon:i.jsx(gb,{className:"text-slate-300 mx-auto",size:40}),title:"No schools found",description:"Try adjusting your filters or search criteria"})})}):P.map((X,Y)=>i.jsxs("tr",{className:`border-b border-slate-100 hover:bg-slate-50 transition-colors ${Y%2===0?"bg-white":"bg-slate-50/30"}`,children:[i.jsx("td",{className:"py-4 px-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-slate-600 overflow-hidden font-semibold flex-shrink-0",children:X.logoUrl?i.jsx("img",{src:X.logoUrl,alt:X.name,className:"w-full h-full object-cover"}):X.name.charAt(0).toUpperCase()}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900",children:X.name}),i.jsx("div",{className:"text-xs text-slate-500",children:X.code||""})]})]})}),i.jsx("td",{className:"py-4 px-4",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ${X.status==="active"?"bg-emerald-100 text-emerald-700":"bg-[#E6F0FA] text-[#0B4A82]"}`,children:X.status==="active"?"Active":"Inactive"})}),i.jsx("td",{className:"py-4 px-4",children:i.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700 capitalize",children:X.plan})}),i.jsx("td",{className:"py-4 px-4 text-slate-600",children:X.createdAt?X.createdAt instanceof tr?X.createdAt.toDate().toLocaleDateString():new Date(X.createdAt).toLocaleDateString():""}),i.jsx("td",{className:"py-4 px-4 text-right",children:i.jsxs(Ua,{to:`/super-admin/schools/${X.id}`,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold bg-[#0B4A82] text-white hover:bg-[#0B4A82] transition-colors",children:[i.jsx(Lu,{size:14})," View"]})})]},X.id))})]})}),P.length>0&&i.jsxs("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-slate-100",children:[i.jsxs("div",{className:"text-xs text-slate-600",children:["Showing 1 to ",Math.min(10,P.length)," of"," ",P.length]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"px-3 py-1 rounded-lg border border-slate-200 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:" Previous"}),i.jsx("button",{className:"px-3 py-1 rounded-lg border border-slate-200 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Next "})]})]})]}),i.jsxs(jd,{className:"bg-gradient-to-br from-white via-slate-50 to-white border border-slate-100",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-2xl bg-[#E6F0FA] text-[#0B4A82] flex items-center justify-center",children:i.jsx(ik,{size:20})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Daily Operations Checklist"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Track routine school actions completed each day"})]})]})}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[i.jsx("span",{className:"px-3 py-1 rounded-full border border-slate-200 bg-white",children:"Live today"}),i.jsxs("span",{className:"px-3 py-1 rounded-full border border-slate-200 bg-white",children:[e.length," schools"]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"attendance",title:"Attendance submitted",description:"Daily student attendance recorded by classes.",gradient:"from-emerald-500/15 to-emerald-500/5",accent:"text-emerald-600",bar:"bg-emerald-500"},{key:"teacherAttendance",title:"Teacher attendance completed",description:"Staff attendance confirmed for the day.",gradient:"from-blue-500/15 to-blue-500/5",accent:"text-blue-600",bar:"bg-blue-500"},{key:"timetable",title:"Lesson plans logged",description:"Timetable updated today to reflect lessons.",gradient:"from-violet-500/15 to-violet-500/5",accent:"text-violet-600",bar:"bg-violet-500"},{key:"assessments",title:"Assessments graded",description:"Class assessments scored and saved.",gradient:"from-amber-500/15 to-amber-500/5",accent:"text-amber-600",bar:"bg-amber-500"},{key:"notices",title:"Notices posted",description:"Daily notices shared to staff and students.",gradient:"from-slate-500/15 to-slate-500/5",accent:"text-slate-600",bar:"bg-slate-500"}].map(X=>{const Y=F.summary[X.key],re=Y?Math.round(Y.completed/Math.max(1,Y.total)*100):0,pe=(Y==null?void 0:Y.completed)??0,ee=(Y==null?void 0:Y.total)??0;return i.jsxs("div",{className:`rounded-2xl border border-slate-100 bg-gradient-to-br ${X.gradient} p-4 shadow-sm hover:shadow-md transition-shadow`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`mt-1 ${X.accent}`,children:i.jsx(DA,{size:18})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-900",children:X.title}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:X.description})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`text-lg font-bold ${X.accent}`,children:[re,"%"]}),i.jsxs("div",{className:"text-[10px] text-slate-500",children:[pe,"/",ee," schools"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"h-2 w-full rounded-full bg-white/70 border border-white/60 overflow-hidden",children:i.jsx("div",{className:`h-full ${X.bar} transition-all`,style:{width:`${re}%`}})})})]},X.title)})}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"School Activity Status"}),i.jsx("span",{className:"text-xs text-slate-500",children:"Live today per school"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(X=>{const Y=F.perSchool[X.id]||{attendance:!1,teacherAttendance:!1,assessments:!1,timetable:!1,notices:!1},re=[{label:"Attendance",value:Y.attendance},{label:"Teacher Attendance",value:Y.teacherAttendance},{label:"Assessments",value:Y.assessments},{label:"Timetable",value:Y.timetable},{label:"Notices",value:Y.notices}],pe=re.filter(ee=>ee.value).length;return i.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"School"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:X.name}),i.jsx("p",{className:"text-xs text-slate-400",children:X.code})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Completion"}),i.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:[pe,"/",re.length]})]})]}),i.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:re.map(ee=>i.jsxs("div",{className:`flex items-center justify-between rounded-lg border px-2 py-1.5 ${ee.value?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-slate-50 text-slate-500"}`,children:[i.jsx("span",{children:ee.label}),i.jsx("span",{className:"font-semibold",children:ee.value?"Done":"Pending"})]},ee.label))})]},X.id)})})]})]})]})})},ZY=()=>{var Y,re,pe,ee;const[s,e]=Z.useState([]),[t,n]=Z.useState([]),[r,o]=Z.useState(!0),[c,h]=Z.useState(null),[u,f]=Z.useState(""),[A,m]=Z.useState(""),[x,g]=Z.useState(""),[b,I]=Z.useState(""),[N,C]=Z.useState(null),[E,F]=Z.useState(!1),[L,O]=Z.useState(null),[H,Q]=Z.useState(!1),U=Z.useMemo(()=>s.reduce((M,J)=>(M[J.id]=J,M),{}),[s]),R=Z.useMemo(()=>{var ge;if(!((ge=N==null?void 0:N.data)!=null&&ge.students))return[];const M=N.data.students||[],J=N.data.attendanceRecords||[],ie=N.data.assessments||[],le=N.data.studentRemarks||[],ce=J.reduce((Be,Fe)=>(Be[Fe.classId]||(Be[Fe.classId]=[]),Be[Fe.classId].push(Fe),Be),{}),ve=ie.reduce((Be,Fe)=>{const Qe=typeof Fe.total=="number"?Fe.total:_A(Fe);return Be[Fe.studentId]||(Be[Fe.studentId]={total:0,count:0}),Be[Fe.studentId].total+=Qe,Be[Fe.studentId].count+=1,Be},{}),Se=le.reduce((Be,Fe)=>{const Qe=Be[Fe.studentId];if(!Qe)return Be[Fe.studentId]=Fe,Be;const Ze=new Date(Qe.dateCreated).getTime();return new Date(Fe.dateCreated).getTime()>=Ze&&(Be[Fe.studentId]=Fe),Be},{});return M.map(Be=>{var ut;const Fe=ce[Be.classId]||[],Qe=Fe.filter(ze=>{var Ft;return(Ft=ze.presentStudentIds)==null?void 0:Ft.includes(Be.id)}).length,Ze=Fe.length,Pe=Ze?`${Math.round(Qe/Ze*100)}%`:"-",me=ve[Be.id],nt=me!=null&&me.count?(me.total/me.count).toFixed(1):"-",It=((ut=Se[Be.id])==null?void 0:ut.remark)||"N/A";return{student:Be,presentDays:Qe,totalDays:Ze,attendanceRate:Pe,avgScore:nt,remark:It}})},[N]),$=M=>{if(!M)return"CLASS";const J=Es.find(ie=>ie.id===M);return J&&J.level?J.level:M.startsWith("c_n")?"NURSERY":M.startsWith("c_kg")?"KG":M.startsWith("c_p")?"PRIMARY":M.startsWith("c_jhs")?"JHS":"CLASS"},P=u&&U[u]?U[u].name:"All Schools",V=async()=>{const J=(await qs(Rs(wt,"schools"))).docs.map(ie=>({id:ie.id,...ie.data()}));e(J)},G=async()=>{o(!0),h(null);try{const M=[];if(u&&M.push(rs("schoolId","==",u)),A&&M.push(rs("term","==",A)),x&&M.push(rs("academicYear","==",x)),b){const ve=new Date(b).getTime(),Se=ve+1440*60*1e3-1;M.push(rs("timestamp",">=",ve)),M.push(rs("timestamp","<=",Se))}const J=Rs(wt,"backups"),ie=M.length>0?Ks(J,...M):J,ce=(await qs(ie)).docs.map(ve=>ve.data());ce.sort((ve,Se)=>(Se.timestamp||0)-(ve.timestamp||0)),n(ce)}catch(M){console.error("Error fetching backups:",M),h("Failed to fetch backups."),Pt("Failed to fetch backups.",{type:"error"})}finally{o(!1)}},ae=async M=>{try{const J=await kc(Os(wt,"backups",M));if(!J.exists()){Pt("Backup details not found.",{type:"error"});return}C(J.data()),F(!0)}catch(J){console.error("Error fetching backup details:",J),Pt("Failed to fetch backup details.",{type:"error"})}},ue=async M=>{try{const J=await kc(Os(wt,"backups",M));if(!J.exists()){Pt("No data available to download.",{type:"error"});return}const ie=J.data();if(!ie.data){Pt("No data available to download.",{type:"error"});return}const le=`backup_${ie.academicYear.replace("-","")}_${ie.term.replace(" ","")}_${ie.timestamp}.json`,ce=JSON.stringify(ie.data,null,2),ve=new Blob([ce],{type:"application/json"}),Se=URL.createObjectURL(ve),ge=document.createElement("a");ge.href=Se,ge.download=le,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(Se),Pt("Backup downloaded successfully!",{type:"success"})}catch(J){console.error("Error downloading backup:",J),Pt("Failed to download backup.",{type:"error"})}},oe=async()=>{if(L)try{await zi(Os(wt,"backups",L)),Pt("Backup deleted successfully!",{type:"success"}),Q(!1),O(null),await G()}catch(M){console.error("Error deleting backup:",M),Pt("Failed to delete backup.",{type:"error"})}};Z.useEffect(()=>{V()},[]),Z.useEffect(()=>{G()},[u,A,x,b]);const X=M=>M?M.length:"-";return i.jsxs(lr,{title:"Backups Overview",children:[i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-50 via-white to-emerald-50 p-6 shadow-sm",children:[i.jsx("div",{className:"absolute -top-16 -right-16 h-40 w-40 rounded-full bg-indigo-200/40 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-20 -left-16 h-48 w-48 rounded-full bg-emerald-200/40 blur-3xl"}),i.jsxs("div",{className:"relative flex flex-col gap-2",children:[i.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[i.jsx("span",{className:"h-10 w-10 rounded-2xl bg-indigo-100 text-indigo-700 flex items-center justify-center",children:i.jsx(o2,{size:20})}),"Global Backups"]}),i.jsx("p",{className:"text-sm text-slate-600",children:"View, audit, and manage term backups across all schools."}),i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-medium text-slate-700 shadow-sm",children:[i.jsx(Gp,{className:"h-4 w-4 text-indigo-500"}),P]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 font-medium text-emerald-700 shadow-sm",children:[i.jsx(Gh,{className:"h-4 w-4"}),"Backups: ",t.length]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-700 font-semibold",children:[i.jsx(PT,{size:16})," Filters"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"School"}),i.jsxs("select",{value:u,onChange:M=>f(M.target.value),className:"w-full border border-slate-200 p-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none",children:[i.jsx("option",{value:"",children:"All Schools"}),s.map(M=>i.jsx("option",{value:M.id,children:M.name},M.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Term"}),i.jsxs("select",{value:A,onChange:M=>m(M.target.value),className:"w-full border border-slate-200 p-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none",children:[i.jsx("option",{value:"",children:"All Terms"}),i.jsx("option",{value:"Term 1",children:"Term 1"}),i.jsx("option",{value:"Term 2",children:"Term 2"}),i.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Academic Year"}),i.jsx("input",{type:"text",value:x,onChange:M=>g(M.target.value),placeholder:"e.g. 2024-2025",className:"w-full border border-slate-200 p-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(mo,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),i.jsx("input",{type:"date",value:b,onChange:M=>I(M.target.value),className:"w-full border border-slate-200 pl-10 pr-3 py-2.5 rounded-xl bg-white text-slate-800 focus:ring-2 focus:ring-emerald-200 outline-none"})]})]})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[i.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 rounded-full bg-[#0B4A82] text-white px-4 py-2 text-sm font-semibold hover:bg-[#0B4A82]",children:[i.jsx(kT,{size:16})," Refresh"]}),i.jsx("button",{onClick:()=>{f(""),m(""),g(""),I("")},className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 hover:bg-slate-50",children:"Clear Filters"})]})]}),r?i.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading backups..."}):c?i.jsx("div",{className:"text-center py-12 text-rose-600",children:c}):t.length===0?i.jsx("div",{className:"text-center py-12 text-slate-500",children:"No backups found for the current filters."}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:t.map(M=>{var ie,le,ce,ve;const J=M.schoolId?((ie=U[M.schoolId])==null?void 0:ie.name)||M.schoolId:"Unknown School";return i.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"School"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:J}),i.jsxs("p",{className:"text-sm text-slate-500",children:[M.term,"  ",M.academicYear]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:M.timestamp?new Date(M.timestamp).toLocaleString():"N/A"})]}),i.jsx(Ua,{to:M.schoolId?`/super-admin/schools/${M.schoolId}`:"/super-admin/schools",className:"text-xs font-semibold text-[#1160A8] hover:text-[#0B4A82]",children:"View School"})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-xs text-slate-500",children:[i.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[i.jsx("p",{children:"Students"}),i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:X((le=M.data)==null?void 0:le.students)})]}),i.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[i.jsx("p",{children:"Assessments"}),i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:X((ce=M.data)==null?void 0:ce.assessments)})]}),i.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[i.jsx("p",{children:"Users"}),i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:X((ve=M.data)==null?void 0:ve.users)})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>ae(M.id||""),className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:[i.jsx(Lu,{size:14})," View"]}),i.jsxs("button",{onClick:()=>ue(M.id||""),className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1.5 text-xs font-semibold text-emerald-700 hover:bg-emerald-100",children:[i.jsx(sv,{size:14})," Download"]}),i.jsxs("button",{onClick:()=>{O(M.id||null),Q(!0)},className:"inline-flex items-center gap-2 rounded-full border border-rose-200 bg-rose-50 px-3 py-1.5 text-xs font-semibold text-rose-700 hover:bg-rose-100",children:[i.jsx(RA,{size:14})," Delete"]})]})]},M.id)})})]}),E&&N&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Backup Details"}),i.jsxs("p",{className:"text-sm text-slate-500",children:[N.term,"  ",N.academicYear]})]}),i.jsx("button",{onClick:()=>F(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),i.jsxs("div",{className:"p-5 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Students"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:X((Y=N.data)==null?void 0:Y.students)})]}),i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Assessments"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:X((re=N.data)==null?void 0:re.assessments)})]}),i.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Users"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:X((pe=N.data)==null?void 0:pe.users)})]})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center",children:[i.jsx(Gh,{size:18,className:"mr-2 text-[#0B4A82]"}),"Student Performance Snapshot"]}),R.length>0?i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3",children:"Student"}),i.jsx("th",{className:"px-4 py-3",children:"Class"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Attendance"}),i.jsx("th",{className:"px-4 py-3 text-center",children:"Avg Score"}),i.jsx("th",{className:"px-4 py-3",children:"Remark"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:R.map(M=>{var J;return i.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs text-white mr-3 shadow-sm ${M.student.gender==="Male"?"bg-amber-400":"bg-[#0B4A82]"}`,children:M.student.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{children:M.student.name}),i.jsx("p",{className:"text-xs text-slate-400",children:M.student.gender})]})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"px-2.5 py-1 rounded-md bg-slate-100 text-slate-600 text-xs font-semibold border border-slate-200",children:((J=Es.find(ie=>ie.id===M.student.classId))==null?void 0:J.name)||M.student.classId})}),i.jsxs("td",{className:"px-4 py-3 text-center",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-700",children:M.attendanceRate}),i.jsxs("div",{className:"text-xs text-slate-400",children:[M.presentDays,"/",M.totalDays," days"]})]}),i.jsx("td",{className:"px-4 py-3 text-center font-semibold text-slate-700",children:M.avgScore}),i.jsx("td",{className:"px-4 py-3 text-slate-600",children:M.remark})]},M.student.id)})})]})}),i.jsxs("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-100 text-xs text-slate-500",children:["Total: ",R.length," student",R.length!==1?"s":""]})]}):i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 rounded-xl border border-slate-100",children:[i.jsx(Gh,{size:32,className:"mx-auto mb-2 text-slate-300"}),i.jsx("p",{children:"No student records in this backup."})]})]}),((ee=N.data)==null?void 0:ee.classSubjects)&&N.data.classSubjects.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center",children:[i.jsx(mm,{size:18,className:"mr-2 text-amber-600"}),"Classes & Subjects"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.data.classSubjects.map((M,J)=>{var ce,ve;const ie=Es.find(Se=>Se.id===M.classId),le=$(M.classId);return i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-xl p-4 border border-amber-200 hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"text-center mb-3 pb-3 border-b border-amber-200",children:[i.jsx("p",{className:"text-xs font-bold text-amber-600 uppercase tracking-wider mb-1",children:le}),i.jsx("p",{className:"text-2xl font-extrabold text-slate-800",children:(ie==null?void 0:ie.name)||M.classId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Subjects"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:M.subjects&&M.subjects.length>0?M.subjects.map((Se,ge)=>i.jsx("span",{className:"px-2 py-1 bg-white border border-slate-200 text-slate-700 text-xs rounded-md shadow-sm",children:Se},ge)):i.jsx("span",{className:"text-xs text-slate-400 italic",children:"No subjects"})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2 font-medium",children:[((ce=M.subjects)==null?void 0:ce.length)||0," subject",((ve=M.subjects)==null?void 0:ve.length)!==1?"s":""]})]})]},J)})})]}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsxs("button",{onClick:()=>ue(N.id),className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-4 py-2 text-sm font-semibold text-emerald-700 hover:bg-emerald-100",children:[i.jsx(sv,{size:16})," Download JSON"]})})]})]})}),H&&L&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Delete Backup"}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Are you sure you want to delete this backup? This action cannot be undone."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 rounded-full border border-slate-200 text-slate-600",children:"Cancel"}),i.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-full bg-rose-600 text-white",children:"Delete"})]})]})})]})},eW=s=>{if(!s)return"-";if(s instanceof tr)return s.toDate().toLocaleString();if(typeof s=="number")return new Date(s).toLocaleString();const e=new Date(s);return Number.isNaN(e.getTime())?"-":e.toLocaleString()},tW=(s,e="GHS")=>{if(!s&&s!==0)return"-";const t=s>=100?s/100:s;return new Intl.NumberFormat("en-GH",{style:"currency",currency:e}).format(t)},MN=s=>{const e=(s||"pending").toLowerCase();return["success","paid","active"].includes(e)?{label:"Paid",className:"bg-emerald-50 text-emerald-700"}:["failed","failure","past_due"].includes(e)?{label:"Failed",className:"bg-rose-50 text-rose-700"}:["abandoned","cancelled","canceled"].includes(e)?{label:"Cancelled",className:"bg-slate-100 text-slate-600"}:{label:"Pending",className:"bg-amber-50 text-amber-700"}},sW=()=>{const[s,e]=Z.useState([]),[t,n]=Z.useState(!1),[r,o]=Z.useState(""),c=async()=>{n(!0);try{const u=Rs(wt,"payments"),f=Ks(u,Zx("createdAt","desc")),m=(await qs(f)).docs.map(x=>({id:x.id,...x.data()}));e(m)}catch(u){console.error("Failed to load payments",u),Pt("Failed to load payment data.",{type:"error"})}finally{n(!1)}};Z.useEffect(()=>{c()},[]);const h=Z.useMemo(()=>{const u=r.trim().toLowerCase();return u?s.filter(f=>[f.schoolName,f.schoolId,f.adminEmail,f.status,f.reference,f.currency].filter(Boolean).join(" ").toLowerCase().includes(u)):s},[s,r]);return i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsx("div",{className:"bg-white rounded-2xl border border-slate-100 p-6 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Payments"}),i.jsx("p",{className:"text-sm text-slate-500",children:"View all school admin payments in one place."})]}),i.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50",disabled:t,children:[i.jsx(mg,{size:16,className:t?"animate-spin":""}),"Refresh"]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(gb,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),i.jsx("input",{value:r,onChange:u=>o(u.target.value),placeholder:"Search by school, email, status, reference",className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#0B4A82]/20"})]}),i.jsxs("span",{className:"text-xs text-slate-400",children:[h.length," records"]})]}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-slate-500 border-b border-slate-100",children:[i.jsx("th",{className:"py-3 pr-4",children:"School"}),i.jsx("th",{className:"py-3 pr-4",children:"Admin Email"}),i.jsx("th",{className:"py-3 pr-4",children:"Amount"}),i.jsx("th",{className:"py-3 pr-4",children:"Currency"}),i.jsx("th",{className:"py-3 pr-4",children:"Status"}),i.jsx("th",{className:"py-3 pr-4",children:"Reference"}),i.jsx("th",{className:"py-3",children:"Created"})]})}),i.jsx("tbody",{children:h.map(u=>i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsxs("td",{className:"py-3 pr-4",children:[i.jsx("div",{className:"font-medium text-slate-800",children:u.schoolName||"-"}),i.jsx("div",{className:"text-xs text-slate-400",children:u.schoolId||""})]}),i.jsx("td",{className:"py-3 pr-4 text-slate-600",children:u.adminEmail||"-"}),i.jsx("td",{className:"py-3 pr-4 text-slate-700",children:tW(u.amount,u.currency)}),i.jsx("td",{className:"py-3 pr-4 text-slate-600",children:u.currency||"GHS"}),i.jsx("td",{className:"py-3 pr-4",children:i.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold ${MN(u.status).className}`,children:MN(u.status).label})}),i.jsx("td",{className:"py-3 pr-4 text-slate-500",children:u.reference||"-"}),i.jsx("td",{className:"py-3 text-slate-500",children:eW(u.createdAt)})]},u.id))})]}),!h.length&&!t&&i.jsx("div",{className:"text-center text-sm text-slate-400 py-10",children:"No payments found yet."})]})]})]})},nW=()=>{const{user:s,loading:e,authLoading:t,error:n,logout:r}=Uo(),{school:o,schoolLoading:c,schoolError:h}=dc();return t?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0B4A82] mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Authenticating..."})]})}):n==="Your account is not set up yet. Please contact your administrator for access."?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg border border-slate-100 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-[#E6F0FA] rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-8 h-8 text-[#0B4A82]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Account Not Set Up"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"Your account is not set up yet. Please contact your administrator for access to the system."}),i.jsx("button",{onClick:r,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Sign Out"})]})}):h&&(s==null?void 0:s.role)!==xn.SUPER_ADMIN?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg border border-slate-100 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-[#E6F0FA] rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-8 h-8 text-[#0B4A82]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"School Access Issue"}),i.jsx("p",{className:"text-slate-600 mb-6",children:h}),i.jsx("button",{onClick:r,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Sign Out"})]})}):i.jsx(s7,{children:i.jsx(iW,{})})},rW=()=>i.jsx(qP,{children:i.jsx(ZP,{children:i.jsx(KF,{children:i.jsx(nW,{})})})}),di=({children:s,allowedRoles:e})=>{const{user:t,isAuthenticated:n,authLoading:r}=Uo();if(r)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0B4A82] mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Authenticating..."})]})});if(!n)return i.jsx(M1,{to:"/login",replace:!0});if(e&&t&&!e.includes(t.role)){const o=t.role===xn.SUPER_ADMIN?"/super-admin/schools":t.role===xn.SCHOOL_ADMIN?"/admin/students":"/teacher";return i.jsx(M1,{to:o,replace:!0})}return s},aW=()=>{const{user:s}=Uo();return(s==null?void 0:s.role)===xn.SUPER_ADMIN?i.jsx(lr,{title:"Super Admin Dashboard",children:i.jsx(g_,{})}):(s==null?void 0:s.role)===xn.SCHOOL_ADMIN?i.jsx(m7,{}):(s==null?void 0:s.role)===xn.TEACHER?i.jsx(p_,{}):i.jsx(M1,{to:"/login"})},iW=()=>i.jsxs(yF,{children:[i.jsx(Xa,{path:"/login",element:i.jsx(n7,{})}),i.jsx(Xa,{path:"/",element:i.jsx(di,{children:i.jsx(aW,{})})}),i.jsx(Xa,{path:"/admin/students",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(p7,{})})}),i.jsx(Xa,{path:"/admin/teachers",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(N7,{})})}),i.jsx(Xa,{path:"/admin/attendance",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(E7,{})})}),i.jsx(Xa,{path:"/admin/teacher-attendance",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(T7,{})})}),i.jsx(Xa,{path:"/admin/reports",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(I7,{})})}),i.jsx(Xa,{path:"/admin/report-card",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(FV,{})})}),i.jsx(Xa,{path:"/admin/timetable",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(cK,{})})}),i.jsx(Xa,{path:"/admin/settings",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(oK,{})})}),i.jsx(Xa,{path:"/admin/backups",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(AK,{})})}),i.jsx(Xa,{path:"/admin/billing",element:i.jsx(di,{allowedRoles:[xn.SCHOOL_ADMIN],children:i.jsx(uK,{})})}),i.jsx(Xa,{path:"/super-admin/schools",element:i.jsx(di,{allowedRoles:[xn.SUPER_ADMIN],children:i.jsx(JY,{})})}),i.jsx(Xa,{path:"/super-admin/dashboard",element:i.jsx(di,{allowedRoles:[xn.SUPER_ADMIN],children:i.jsx(lr,{title:"Super Admin Dashboard",children:i.jsx(g_,{})})})}),i.jsx(Xa,{path:"/super-admin/schools/:schoolId",element:i.jsx(di,{allowedRoles:[xn.SUPER_ADMIN],children:i.jsx(qY,{})})}),i.jsx(Xa,{path:"/super-admin/backups",element:i.jsx(di,{allowedRoles:[xn.SUPER_ADMIN],children:i.jsx(ZY,{})})}),i.jsx(Xa,{path:"/super-admin/payments",element:i.jsx(di,{allowedRoles:[xn.SUPER_ADMIN],children:i.jsx(lr,{title:"Payments",children:i.jsx(sW,{})})})}),i.jsx(Xa,{path:"/teacher",element:i.jsx(di,{allowedRoles:[xn.TEACHER],children:i.jsx(p_,{})})}),i.jsx(Xa,{path:"/teacher/attendance",element:i.jsx(di,{allowedRoles:[xn.TEACHER],children:i.jsx(zY,{})})}),i.jsx(Xa,{path:"/teacher/assessment",element:i.jsx(di,{allowedRoles:[xn.TEACHER],children:i.jsx($Y,{})})}),i.jsx(Xa,{path:"/teacher/my-attendance",element:i.jsx(di,{allowedRoles:[xn.TEACHER],children:i.jsx(GY,{})})}),i.jsx(Xa,{path:"/teacher/write-remarks",element:i.jsx(di,{allowedRoles:[xn.TEACHER],children:i.jsx(YY,{})})}),i.jsx(Xa,{path:"/teacher/edit-skills",element:i.jsx(di,{allowedRoles:[xn.TEACHER],children:i.jsx(XY,{})})})]}),x_=document.getElementById("root");if(!x_)throw new Error("Could not find root element to mount to");const oW=w6.createRoot(x_);oW.render(i.jsx(Ph.StrictMode,{children:i.jsx(rW,{})}));export{$r as _,Gj as c,qb as g};
