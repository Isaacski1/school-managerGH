(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function Wb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cm={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function Ow(){if(Wv)return Go;Wv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:i,key:d,ref:l!==void 0?l:null,props:c}}return Go.Fragment=e,Go.jsx=n,Go.jsxs=n,Go}var Zv;function Mw(){return Zv||(Zv=1,Cm.exports=Ow()),Cm.exports}var h=Mw(),Im={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function kw(){if(e_)return Ce;e_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function j(I){return I===null||typeof I!="object"?null:(I=w&&I[w]||I["@@iterator"],typeof I=="function"?I:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,P={};function H(I,X,le){this.props=I,this.context=X,this.refs=P,this.updater=le||L}H.prototype.isReactComponent={},H.prototype.setState=function(I,X){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,X,"setState")},H.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function J(){}J.prototype=H.prototype;function U(I,X,le){this.props=I,this.context=X,this.refs=P,this.updater=le||L}var $=U.prototype=new J;$.constructor=U,B($,H.prototype),$.isPureReactComponent=!0;var F=Array.isArray;function oe(){}var R={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(I,X,le){var ue=le.ref;return{$$typeof:r,type:I,key:X,ref:ue!==void 0?ue:null,props:le}}function O(I,X){return C(I.type,X,I.props)}function V(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function k(I){var X={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(le){return X[le]})}var A=/\/+/g;function _e(I,X){return typeof I=="object"&&I!==null&&I.key!=null?k(""+I.key):X.toString(36)}function Ae(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(oe,oe):(I.status="pending",I.then(function(X){I.status==="pending"&&(I.status="fulfilled",I.value=X)},function(X){I.status==="pending"&&(I.status="rejected",I.reason=X)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function W(I,X,le,ue,xe){var Se=typeof I;(Se==="undefined"||Se==="boolean")&&(I=null);var ke=!1;if(I===null)ke=!0;else switch(Se){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(I.$$typeof){case r:case e:ke=!0;break;case b:return ke=I._init,W(ke(I._payload),X,le,ue,xe)}}if(ke)return xe=xe(I),ke=ue===""?"."+_e(I,0):ue,F(xe)?(le="",ke!=null&&(le=ke.replace(A,"$&/")+"/"),W(xe,X,le,"",function(qe){return qe})):xe!=null&&(V(xe)&&(xe=O(xe,le+(xe.key==null||I&&I.key===xe.key?"":(""+xe.key).replace(A,"$&/")+"/")+ke)),X.push(xe)),1;ke=0;var yt=ue===""?".":ue+":";if(F(I))for(var tt=0;tt<I.length;tt++)ue=I[tt],Se=yt+_e(ue,tt),ke+=W(ue,X,le,Se,xe);else if(tt=j(I),typeof tt=="function")for(I=tt.call(I),tt=0;!(ue=I.next()).done;)ue=ue.value,Se=yt+_e(ue,tt++),ke+=W(ue,X,le,Se,xe);else if(Se==="object"){if(typeof I.then=="function")return W(Ae(I),X,le,ue,xe);throw X=String(I),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ce(I,X,le){if(I==null)return I;var ue=[],xe=0;return W(I,ue,"","",function(Se){return X.call(le,Se,xe++)}),ue}function fe(I){if(I._status===-1){var X=I._result;X=X(),X.then(function(le){(I._status===0||I._status===-1)&&(I._status=1,I._result=le)},function(le){(I._status===0||I._status===-1)&&(I._status=2,I._result=le)}),I._status===-1&&(I._status=0,I._result=X)}if(I._status===1)return I._result.default;throw I._result}var Ne=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ie={map:ce,forEach:function(I,X,le){ce(I,function(){X.apply(this,arguments)},le)},count:function(I){var X=0;return ce(I,function(){X++}),X},toArray:function(I){return ce(I,function(X){return X})||[]},only:function(I){if(!V(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Ce.Activity=E,Ce.Children=ie,Ce.Component=H,Ce.Fragment=n,Ce.Profiler=l,Ce.PureComponent=U,Ce.StrictMode=i,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(I){return R.H.useMemoCache(I)}},Ce.cache=function(I){return function(){return I.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(I,X,le){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ue=B({},I.props),xe=I.key;if(X!=null)for(Se in X.key!==void 0&&(xe=""+X.key),X)!N.call(X,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&X.ref===void 0||(ue[Se]=X[Se]);var Se=arguments.length-2;if(Se===1)ue.children=le;else if(1<Se){for(var ke=Array(Se),yt=0;yt<Se;yt++)ke[yt]=arguments[yt+2];ue.children=ke}return C(I.type,xe,ue)},Ce.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:c,_context:I},I},Ce.createElement=function(I,X,le){var ue,xe={},Se=null;if(X!=null)for(ue in X.key!==void 0&&(Se=""+X.key),X)N.call(X,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(xe[ue]=X[ue]);var ke=arguments.length-2;if(ke===1)xe.children=le;else if(1<ke){for(var yt=Array(ke),tt=0;tt<ke;tt++)yt[tt]=arguments[tt+2];xe.children=yt}if(I&&I.defaultProps)for(ue in ke=I.defaultProps,ke)xe[ue]===void 0&&(xe[ue]=ke[ue]);return C(I,Se,xe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(I){return{$$typeof:g,render:I}},Ce.isValidElement=V,Ce.lazy=function(I){return{$$typeof:b,_payload:{_status:-1,_result:I},_init:fe}},Ce.memo=function(I,X){return{$$typeof:y,type:I,compare:X===void 0?null:X}},Ce.startTransition=function(I){var X=R.T,le={};R.T=le;try{var ue=I(),xe=R.S;xe!==null&&xe(le,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(oe,Ne)}catch(Se){Ne(Se)}finally{X!==null&&le.types!==null&&(X.types=le.types),R.T=X}},Ce.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ce.use=function(I){return R.H.use(I)},Ce.useActionState=function(I,X,le){return R.H.useActionState(I,X,le)},Ce.useCallback=function(I,X){return R.H.useCallback(I,X)},Ce.useContext=function(I){return R.H.useContext(I)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(I,X){return R.H.useDeferredValue(I,X)},Ce.useEffect=function(I,X){return R.H.useEffect(I,X)},Ce.useEffectEvent=function(I){return R.H.useEffectEvent(I)},Ce.useId=function(){return R.H.useId()},Ce.useImperativeHandle=function(I,X,le){return R.H.useImperativeHandle(I,X,le)},Ce.useInsertionEffect=function(I,X){return R.H.useInsertionEffect(I,X)},Ce.useLayoutEffect=function(I,X){return R.H.useLayoutEffect(I,X)},Ce.useMemo=function(I,X){return R.H.useMemo(I,X)},Ce.useOptimistic=function(I,X){return R.H.useOptimistic(I,X)},Ce.useReducer=function(I,X,le){return R.H.useReducer(I,X,le)},Ce.useRef=function(I){return R.H.useRef(I)},Ce.useState=function(I){return R.H.useState(I)},Ce.useSyncExternalStore=function(I,X,le){return R.H.useSyncExternalStore(I,X,le)},Ce.useTransition=function(){return R.H.useTransition()},Ce.version="19.2.3",Ce}var t_;function Np(){return t_||(t_=1,Im.exports=kw()),Im.exports}var D=Np();const Vw=Wb(D);var jm={exports:{}},$o={},Dm={exports:{}},Om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function Pw(){return n_||(n_=1,(function(r){function e(W,ce){var fe=W.length;W.push(ce);e:for(;0<fe;){var Ne=fe-1>>>1,ie=W[Ne];if(0<l(ie,ce))W[Ne]=ce,W[fe]=ie,fe=Ne;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ce=W[0],fe=W.pop();if(fe!==ce){W[0]=fe;e:for(var Ne=0,ie=W.length,I=ie>>>1;Ne<I;){var X=2*(Ne+1)-1,le=W[X],ue=X+1,xe=W[ue];if(0>l(le,fe))ue<ie&&0>l(xe,le)?(W[Ne]=xe,W[ue]=fe,Ne=ue):(W[Ne]=le,W[X]=fe,Ne=X);else if(ue<ie&&0>l(xe,fe))W[Ne]=xe,W[ue]=fe,Ne=ue;else break e}}return ce}function l(W,ce){var fe=W.sortIndex-ce.sortIndex;return fe!==0?fe:W.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],y=[],b=1,E=null,w=3,j=!1,L=!1,B=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function $(W){for(var ce=n(y);ce!==null;){if(ce.callback===null)i(y);else if(ce.startTime<=W)i(y),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=n(y)}}function F(W){if(B=!1,$(W),!L)if(n(p)!==null)L=!0,oe||(oe=!0,k());else{var ce=n(y);ce!==null&&Ae(F,ce.startTime-W)}}var oe=!1,R=-1,N=5,C=-1;function O(){return P?!0:!(r.unstable_now()-C<N)}function V(){if(P=!1,oe){var W=r.unstable_now();C=W;var ce=!0;try{e:{L=!1,B&&(B=!1,J(R),R=-1),j=!0;var fe=w;try{t:{for($(W),E=n(p);E!==null&&!(E.expirationTime>W&&O());){var Ne=E.callback;if(typeof Ne=="function"){E.callback=null,w=E.priorityLevel;var ie=Ne(E.expirationTime<=W);if(W=r.unstable_now(),typeof ie=="function"){E.callback=ie,$(W),ce=!0;break t}E===n(p)&&i(p),$(W)}else i(p);E=n(p)}if(E!==null)ce=!0;else{var I=n(y);I!==null&&Ae(F,I.startTime-W),ce=!1}}break e}finally{E=null,w=fe,j=!1}ce=void 0}}finally{ce?k():oe=!1}}}var k;if(typeof U=="function")k=function(){U(V)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,_e=A.port2;A.port1.onmessage=V,k=function(){_e.postMessage(null)}}else k=function(){H(V,0)};function Ae(W,ce){R=H(function(){W(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(W){switch(w){case 1:case 2:case 3:var ce=3;break;default:ce=w}var fe=w;w=ce;try{return W()}finally{w=fe}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(W,ce){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var fe=w;w=W;try{return ce()}finally{w=fe}},r.unstable_scheduleCallback=function(W,ce,fe){var Ne=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,W){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=fe+ie,W={id:b++,callback:ce,priorityLevel:W,startTime:fe,expirationTime:ie,sortIndex:-1},fe>Ne?(W.sortIndex=fe,e(y,W),n(p)===null&&W===n(y)&&(B?(J(R),R=-1):B=!0,Ae(F,fe-Ne))):(W.sortIndex=ie,e(p,W),L||j||(L=!0,oe||(oe=!0,k()))),W},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(W){var ce=w;return function(){var fe=w;w=ce;try{return W.apply(this,arguments)}finally{w=fe}}}})(Om)),Om}var s_;function Lw(){return s_||(s_=1,Dm.exports=Pw()),Dm.exports}var Mm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function Uw(){if(r_)return rn;r_=1;var r=Np();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:p,containerInfo:y,implementation:b}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,b)},rn.flushSync=function(p){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=y,i.p=b,i.d.f()}},rn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},rn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},rn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,E=g(b,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:j}):b==="script"&&i.d.X(p,{crossOrigin:E,integrity:w,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},rn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=g(b,y.crossOrigin);i.d.L(p,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=g(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},rn.requestFormReset=function(p){i.d.r(p)},rn.unstable_batchedUpdates=function(p,y){return p(y)},rn.useFormState=function(p,y,b){return d.H.useFormState(p,y,b)},rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},rn.version="19.2.3",rn}var i_;function zw(){if(i_)return Mm.exports;i_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Mm.exports=Uw(),Mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function Bw(){if(a_)return $o;a_=1;var r=Lw(),e=Np(),n=zw();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(i(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,o=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),t;if(m===o)return p(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==o.return)a=f,o=m;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,o=m;break}if(T===o){_=!0,o=f,a=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===a){_=!0,a=m,o=f;break}if(T===o){_=!0,o=m,a=f;break}T=T.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),U=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function _e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case H:return"Profiler";case P:return"StrictMode";case F:return"Suspense";case oe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case U:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case $:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return s=t.displayName||null,s!==null?s:_e(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return _e(t(s))}catch{}}return null}var Ae=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ne=[],ie=-1;function I(t){return{current:t}}function X(t){0>ie||(t.current=Ne[ie],Ne[ie]=null,ie--)}function le(t,s){ie++,Ne[ie]=t.current,t.current=s}var ue=I(null),xe=I(null),Se=I(null),ke=I(null);function yt(t,s){switch(le(Se,s),le(xe,t),le(ue,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?xv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=xv(s),t=Ev(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(ue),le(ue,t)}function tt(){X(ue),X(xe),X(Se)}function qe(t){t.memoizedState!==null&&le(ke,t);var s=ue.current,a=Ev(s,t.type);s!==a&&(le(xe,t),le(ue,a))}function wn(t){xe.current===t&&(X(ue),X(xe)),ke.current===t&&(X(ke),Bo._currentValue=fe)}var Ln,er;function Un(t){if(Ln===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ln=s&&s[1]||"",er=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ln+t+er}var zl=!1;function Mi(t,s){if(!t||zl)return"";zl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(ee){var K=ee}Reflect.construct(t,[],re)}else{try{re.call()}catch(ee){K=ee}t.call(re.prototype)}}else{try{throw Error()}catch(ee){K=ee}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(ee){if(ee&&K&&typeof ee.stack=="string")return[ee.stack,K.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var M=_.split(`
`),Q=T.split(`
`);for(f=o=0;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(o===M.length||f===Q.length)for(o=M.length-1,f=Q.length-1;1<=o&&0<=f&&M[o]!==Q[f];)f--;for(;1<=o&&0<=f;o--,f--)if(M[o]!==Q[f]){if(o!==1||f!==1)do if(o--,f--,0>f||M[o]!==Q[f]){var te=`
`+M[o].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=o&&0<=f);break}}}finally{zl=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Un(a):""}function Bl(t,s){switch(t.tag){case 26:case 27:case 5:return Un(t.type);case 16:return Un("Lazy");case 13:return t.child!==s&&s!==null?Un("Suspense Fallback"):Un("Suspense");case 19:return Un("SuspenseList");case 0:case 15:return Mi(t.type,!1);case 11:return Mi(t.type.render,!1);case 1:return Mi(t.type,!0);case 31:return Un("Activity");default:return""}}function Hl(t){try{var s="",a=null;do s+=Bl(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ct=Object.prototype.hasOwnProperty,Bt=r.unstable_scheduleCallback,Mr=r.unstable_cancelCallback,Ih=r.unstable_shouldYield,zc=r.unstable_requestPaint,un=r.unstable_now,ki=r.unstable_getCurrentPriorityLevel,ql=r.unstable_ImmediatePriority,Fl=r.unstable_UserBlockingPriority,kr=r.unstable_NormalPriority,jh=r.unstable_LowPriority,Bc=r.unstable_IdlePriority,Hc=r.log,qc=r.unstable_setDisableYieldValue,ns=null,Kt=null;function zn(t){if(typeof Hc=="function"&&qc(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(ns,t)}catch{}}var Et=Math.clz32?Math.clz32:Gc,Fc=Math.log,Ta=Math.LN2;function Gc(t){return t>>>=0,t===0?32:31-(Fc(t)/Ta|0)|0}var xs=256,Vi=262144,It=4194304;function Es(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ts(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~m,o!==0?f=Es(o):(_&=T,_!==0?f=Es(_):a||(a=T&~t,a!==0&&(f=Es(a))))):(T=o&~m,T!==0?f=Es(T):_!==0?f=Es(_):a||(a=o&~t,a!==0&&(f=Es(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function ss(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Dh(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $c(){var t=It;return It<<=1,(It&62914560)===0&&(It=4194304),t}function ws(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Pi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Oh(t,s,a,o,f,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,M=t.expirationTimes,Q=t.hiddenUpdates;for(a=_&~a;0<a;){var te=31-Et(a),re=1<<te;T[te]=0,M[te]=-1;var K=Q[te];if(K!==null)for(Q[te]=null,te=0;te<K.length;te++){var ee=K[te];ee!==null&&(ee.lane&=-536870913)}a&=~re}o!==0&&Li(t,o,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function Li(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-Et(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Gl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-Et(a),f=1<<o;f&s|t[o]&s&&(t[o]|=s),a&=~f}}function $l(t,s){var a=s&-s;return a=(a&42)!==0?1:Ui(a),(a&(t.suspendedLanes|s))!==0?0:a}function Ui(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function tr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Yc(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:Gv(t.type))}function rs(t,s){var a=ce.p;try{return ce.p=t,s()}finally{ce.p=a}}var is=Math.random().toString(36).slice(2),jt="__reactFiber$"+is,Ft="__reactProps$"+is,Ss="__reactContainer$"+is,wa="__reactEvents$"+is,Mh="__reactListeners$"+is,Qc="__reactHandles$"+is,Kc="__reactResources$"+is,As="__reactMarker$"+is;function Sa(t){delete t[jt],delete t[Ft],delete t[wa],delete t[Mh],delete t[Qc]}function Ns(t){var s=t[jt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Ss]||a[jt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Cv(t);t!==null;){if(a=t[jt])return a;t=Cv(t)}return s}t=a,a=t.parentNode}return null}function Bn(t){if(t=t[jt]||t[Ss]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Sn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Rs(t){var s=t[Kc];return s||(s=t[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Dt(t){t[As]=!0}var Yl=new Set,Ql={};function Cs(t,s){Is(t,s),Is(t+"Capture",s)}function Is(t,s){for(Ql[t]=s,t=0;t<s.length;t++)Yl.add(s[t])}var Kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xl={},Jl={};function Xc(t){return Ct.call(Jl,t)?!0:Ct.call(Xl,t)?!1:Kl.test(t)?Jl[t]=!0:(Xl[t]=!0,!1)}function Aa(t,s,a){if(Xc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function An(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ot(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vr(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Wl(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function We(t){if(!t._valueTracker){var s=Vr(t)?"checked":"value";t._valueTracker=Wl(t,s,""+t[s])}}function zi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Vr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function js(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bi=/[\n"\\]/g;function fn(t){return t.replace(Bi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Na(t,s,a,o,f,m,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Gt(s)):t.value!==""+Gt(s)&&(t.value=""+Gt(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Zl(t,_,Gt(s)):a!=null?Zl(t,_,Gt(a)):o!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Gt(T):t.removeAttribute("name")}function Jc(t,s,a,o,f,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){We(t);return}a=a!=null?""+Gt(a):"",s=s!=null?""+Gt(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),We(t)}function Zl(t,s,a){s==="number"&&js(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Pr(t,s,a,o){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Gt(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function Wc(t,s,a){if(s!=null&&(s=""+Gt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Gt(a):""}function Lr(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(i(92));if(Ae(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=Gt(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),We(t)}function mn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Zc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eo(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Zc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function to(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in s)o=s[f],s.hasOwnProperty(f)&&a[f]!==o&&eo(t,f,o)}else for(var m in s)s.hasOwnProperty(m)&&eo(t,m,s[m])}function Ra(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ur=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return Ur.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function as(){}var no=null;function Hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zr=null,Ds=null;function Hi(t){var s=Bn(t);if(s&&(t=s.stateNode)){var a=t[Ft]||null;e:switch(t=s.stateNode,s.type){case"input":if(Na(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var f=o[Ft]||null;if(!f)throw Error(i(90));Na(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&zi(o)}break e;case"textarea":Wc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Pr(t,!!a.multiple,s,!1)}}}var Ia=!1;function Br(t,s,a){if(Ia)return t(s,a);Ia=!0;try{var o=t(s);return o}finally{if(Ia=!1,(zr!==null||Ds!==null)&&(Yu(),zr&&(s=zr,t=Ds,Ds=zr=null,Hi(s),t)))for(s=0;s<t.length;s++)Hi(t[s])}}function ls(t,s){var a=t.stateNode;if(a===null)return null;var o=a[Ft]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qi=!1;if(qn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){qi=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{qi=!1}var Os=null,so=null,Fi=null;function ro(){if(Fi)return Fi;var t,s=so,a=s.length,o,f="value"in Os?Os.value:Os.textContent,m=f.length;for(t=0;t<a&&s[t]===f[t];t++);var _=a-t;for(o=1;o<=_&&s[a-o]===f[m-o];o++);return Fi=f.slice(t,1<o?1-o:void 0)}function Gi(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function nr(){return!0}function os(){return!1}function Xt(t){function s(a,o,f,m,_){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?nr:os,this.isPropagationStopped=os,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),s}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ms=Xt(sr),Hr=E({},sr,{view:0,detail:0}),io=Xt(Hr),qr,ja,ks,Da=E({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ks&&(ks&&t.type==="mousemove"?(qr=t.screenX-ks.screenX,ja=t.screenY-ks.screenY):ja=qr=0,ks=t),qr)},movementY:function(t){return"movementY"in t?t.movementY:ja}}),ao=Xt(Da),$i=E({},Da,{dataTransfer:0}),tu=Xt($i),nu=E({},Hr,{relatedTarget:0}),Yi=Xt(nu),lo=E({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),su=Xt(lo),Oa=E({},sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ru=Xt(Oa),iu=E({},sr,{data:0}),Vs=Xt(iu),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=ou[t])?!!s[t]:!1}function Fr(){return cu}var dn=E({},Hr,{key:function(t){if(t.key){var s=au[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Gi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(t){return t.type==="keypress"?Gi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uu=Xt(dn),du=E({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=Xt(du),u=E({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),v=Xt(u),x=E({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Xt(x),G=E({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=Xt(G),de=E({},sr,{newState:0,oldState:0}),De=Xt(de),Tt=[9,13,27,32],Ke=qn&&"CompositionEvent"in window,mt=null;qn&&"documentMode"in document&&(mt=document.documentMode);var Fn=qn&&"TextEvent"in window&&!mt,Ps=qn&&(!Ke||mt&&8<mt&&11>=mt),cs=" ",us=!1;function Qi(t,s){switch(t){case"keyup":return Tt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ma(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function sT(t,s){switch(t){case"compositionend":return Ma(s);case"keypress":return s.which!==32?null:(us=!0,cs);case"textInput":return t=s.data,t===cs&&us?null:t;default:return null}}function rT(t,s){if(ka)return t==="compositionend"||!Ke&&Qi(t,s)?(t=ro(),Fi=so=Os=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ps&&s.locale!=="ko"?null:s.data;default:return null}}var iT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!iT[t.type]:s==="textarea"}function Og(t,s,a,o){zr?Ds?Ds.push(o):Ds=[o]:zr=o,s=ed(s,"onChange"),0<s.length&&(a=new Ms("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var oo=null,co=null;function aT(t){pv(t,0)}function hu(t){var s=Sn(t);if(zi(s))return t}function Mg(t,s){if(t==="change")return s}var kg=!1;if(qn){var kh;if(qn){var Vh="oninput"in document;if(!Vh){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),Vh=typeof Vg.oninput=="function"}kh=Vh}else kh=!1;kg=kh&&(!document.documentMode||9<document.documentMode)}function Pg(){oo&&(oo.detachEvent("onpropertychange",Lg),co=oo=null)}function Lg(t){if(t.propertyName==="value"&&hu(co)){var s=[];Og(s,co,t,Hn(t)),Br(aT,s)}}function lT(t,s,a){t==="focusin"?(Pg(),oo=s,co=a,oo.attachEvent("onpropertychange",Lg)):t==="focusout"&&Pg()}function oT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(co)}function cT(t,s){if(t==="click")return hu(s)}function uT(t,s){if(t==="input"||t==="change")return hu(s)}function dT(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Nn=typeof Object.is=="function"?Object.is:dT;function uo(t,s){if(Nn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!Ct.call(s,f)||!Nn(t[f],s[f]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,s){var a=Ug(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function Bg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Bg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Hg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=js(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=js(t.document)}return s}function Ph(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var hT=qn&&"documentMode"in document&&11>=document.documentMode,Va=null,Lh=null,ho=null,Uh=!1;function qg(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uh||Va==null||Va!==js(o)||(o=Va,"selectionStart"in o&&Ph(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ho&&uo(ho,o)||(ho=o,o=ed(Lh,"onSelect"),0<o.length&&(s=new Ms("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Va)))}function Ki(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Pa={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},zh={},Fg={};qn&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Xi(t){if(zh[t])return zh[t];if(!Pa[t])return t;var s=Pa[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Fg)return zh[t]=s[a];return t}var Gg=Xi("animationend"),$g=Xi("animationiteration"),Yg=Xi("animationstart"),fT=Xi("transitionrun"),mT=Xi("transitionstart"),pT=Xi("transitioncancel"),Qg=Xi("transitionend"),Kg=new Map,Bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bh.push("scrollEnd");function ds(t,s){Kg.set(t,s),Cs(s,[t])}var fu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Gn=[],La=0,Hh=0;function mu(){for(var t=La,s=Hh=La=0;s<t;){var a=Gn[s];Gn[s++]=null;var o=Gn[s];Gn[s++]=null;var f=Gn[s];Gn[s++]=null;var m=Gn[s];if(Gn[s++]=null,o!==null&&f!==null){var _=o.pending;_===null?f.next=f:(f.next=_.next,_.next=f),o.pending=f}m!==0&&Xg(a,f,m)}}function pu(t,s,a,o){Gn[La++]=t,Gn[La++]=s,Gn[La++]=a,Gn[La++]=o,Hh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function qh(t,s,a,o){return pu(t,s,a,o),gu(t)}function Ji(t,s){return pu(t,null,null,s),gu(t)}function Xg(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-Et(a),t=m.hiddenUpdates,o=t[f],o===null?t[f]=[s]:o.push(s),s.lane=a|536870912),m):null}function gu(t){if(50<Mo)throw Mo=0,Zf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ua={};function gT(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,s,a,o){return new gT(t,s,a,o)}function Fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ir(t,s){var a=t.alternate;return a===null?(a=Rn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Jg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function yu(t,s,a,o,f,m){var _=0;if(o=t,typeof t=="function")Fh(t)&&(_=1);else if(typeof t=="string")_=xw(t,a,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Rn(31,a,s,f),t.elementType=C,t.lanes=m,t;case B:return Wi(a.children,f,m,s);case P:_=8,f|=24;break;case H:return t=Rn(12,a,s,f|2),t.elementType=H,t.lanes=m,t;case F:return t=Rn(13,a,s,f),t.elementType=F,t.lanes=m,t;case oe:return t=Rn(19,a,s,f),t.elementType=oe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:_=10;break e;case J:_=9;break e;case $:_=11;break e;case R:_=14;break e;case N:_=16,o=null;break e}_=29,a=Error(i(130,t===null?"null":typeof t,"")),o=null}return s=Rn(_,a,s,f),s.elementType=t,s.type=o,s.lanes=m,s}function Wi(t,s,a,o){return t=Rn(7,t,o,s),t.lanes=a,t}function Gh(t,s,a){return t=Rn(6,t,null,s),t.lanes=a,t}function Wg(t){var s=Rn(18,null,null,0);return s.stateNode=t,s}function $h(t,s,a){return s=Rn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Zg=new WeakMap;function $n(t,s){if(typeof t=="object"&&t!==null){var a=Zg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Hl(s)},Zg.set(t,s),s)}return{value:t,source:s,stack:Hl(s)}}var za=[],Ba=0,vu=null,fo=0,Yn=[],Qn=0,Gr=null,Ls=1,Us="";function ar(t,s){za[Ba++]=fo,za[Ba++]=vu,vu=t,fo=s}function e0(t,s,a){Yn[Qn++]=Ls,Yn[Qn++]=Us,Yn[Qn++]=Gr,Gr=t;var o=Ls;t=Us;var f=32-Et(o)-1;o&=~(1<<f),a+=1;var m=32-Et(s)+f;if(30<m){var _=f-f%5;m=(o&(1<<_)-1).toString(32),o>>=_,f-=_,Ls=1<<32-Et(s)+f|a<<f|o,Us=m+t}else Ls=1<<m|a<<f|o,Us=t}function Yh(t){t.return!==null&&(ar(t,1),e0(t,1,0))}function Qh(t){for(;t===vu;)vu=za[--Ba],za[Ba]=null,fo=za[--Ba],za[Ba]=null;for(;t===Gr;)Gr=Yn[--Qn],Yn[Qn]=null,Us=Yn[--Qn],Yn[Qn]=null,Ls=Yn[--Qn],Yn[Qn]=null}function t0(t,s){Yn[Qn++]=Ls,Yn[Qn++]=Us,Yn[Qn++]=Gr,Ls=s.id,Us=s.overflow,Gr=t}var Jt=null,ut=null,He=!1,$r=null,Kn=!1,Kh=Error(i(519));function Yr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mo($n(s,t)),Kh}function n0(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[jt]=t,s[Ft]=o,a){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(a=0;a<Vo.length;a++)Pe(Vo[a],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),Jc(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Lr(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||_v(s.textContent,a)?(o.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),o.onScroll!=null&&Pe("scroll",s),o.onScrollEnd!=null&&Pe("scrollend",s),o.onClick!=null&&(s.onclick=as),s=!0):s=!1,s||Yr(t,!0)}function s0(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Jt=Jt.return}}function Ha(t){if(t!==Jt)return!1;if(!He)return s0(t),He=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||mm(t.type,t.memoizedProps)),a=!a),a&&ut&&Yr(t),s0(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));ut=Rv(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));ut=Rv(t)}else s===27?(s=ut,li(t.type)?(t=_m,_m=null,ut=t):ut=s):ut=Jt?Jn(t.stateNode.nextSibling):null;return!0}function Zi(){ut=Jt=null,He=!1}function Xh(){var t=$r;return t!==null&&(vn===null?vn=t:vn.push.apply(vn,t),$r=null),t}function mo(t){$r===null?$r=[t]:$r.push(t)}var Jh=I(null),ea=null,lr=null;function Qr(t,s,a){le(Jh,s._currentValue),s._currentValue=a}function or(t){t._currentValue=Jh.current,X(Jh)}function Wh(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Zh(t,s,a,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var M=0;M<s.length;M++)if(T.context===s[M]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),Wh(m.return,a,t),o||(_=null);break e}m=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Wh(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function qa(t,s,a,o){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var T=f.type;Nn(f.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(f===ke.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Bo):t=[Bo])}f=f.return}t!==null&&Zh(s,t,a,o),s.flags|=262144}function _u(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ta(t){ea=t,lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wt(t){return r0(ea,t)}function bu(t,s){return ea===null&&ta(t),r0(t,s)}function r0(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},lr===null){if(t===null)throw Error(i(308));lr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else lr=lr.next=s;return a}var yT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},vT=r.unstable_scheduleCallback,_T=r.unstable_NormalPriority,Mt={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new yT,data:new Map,refCount:0}}function po(t){t.refCount--,t.refCount===0&&vT(_T,function(){t.controller.abort()})}var go=null,tf=0,Fa=0,Ga=null;function bT(t,s){if(go===null){var a=go=[];tf=0,Fa=im(),Ga={status:"pending",value:void 0,then:function(o){a.push(o)}}}return tf++,s.then(i0,i0),s}function i0(){if(--tf===0&&go!==null){Ga!==null&&(Ga.status="fulfilled");var t=go;go=null,Fa=0,Ga=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function xT(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var a0=W.S;W.S=function(t,s){qy=un(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&bT(t,s),a0!==null&&a0(t,s)};var na=I(null);function nf(){var t=na.current;return t!==null?t:lt.pooledCache}function xu(t,s){s===null?le(na,na.current):le(na,s.pool)}function l0(){var t=nf();return t===null?null:{parent:Mt._currentValue,pool:t}}var $a=Error(i(460)),sf=Error(i(474)),Eu=Error(i(542)),Tu={then:function(){}};function o0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function c0(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(as,as),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,d0(t),t;default:if(typeof s.status=="string")s.then(as,as);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=o}},function(o){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,d0(t),t}throw ra=s,$a}}function sa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ra=a,$a):a}}var ra=null;function u0(){if(ra===null)throw Error(i(459));var t=ra;return ra=null,t}function d0(t){if(t===$a||t===Eu)throw Error(i(483))}var Ya=null,yo=0;function wu(t){var s=yo;return yo+=1,Ya===null&&(Ya=[]),c0(Ya,t,s)}function vo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Su(t,s){throw s.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function h0(t){function s(q,z){if(t){var Y=q.deletions;Y===null?(q.deletions=[z],q.flags|=16):Y.push(z)}}function a(q,z){if(!t)return null;for(;z!==null;)s(q,z),z=z.sibling;return null}function o(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function f(q,z){return q=ir(q,z),q.index=0,q.sibling=null,q}function m(q,z,Y){return q.index=Y,t?(Y=q.alternate,Y!==null?(Y=Y.index,Y<z?(q.flags|=67108866,z):Y):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function _(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,z,Y,ne){return z===null||z.tag!==6?(z=Gh(Y,q.mode,ne),z.return=q,z):(z=f(z,Y),z.return=q,z)}function M(q,z,Y,ne){var ye=Y.type;return ye===B?te(q,z,Y.props.children,ne,Y.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===N&&sa(ye)===z.type)?(z=f(z,Y.props),vo(z,Y),z.return=q,z):(z=yu(Y.type,Y.key,Y.props,null,q.mode,ne),vo(z,Y),z.return=q,z)}function Q(q,z,Y,ne){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=$h(Y,q.mode,ne),z.return=q,z):(z=f(z,Y.children||[]),z.return=q,z)}function te(q,z,Y,ne,ye){return z===null||z.tag!==7?(z=Wi(Y,q.mode,ne,ye),z.return=q,z):(z=f(z,Y),z.return=q,z)}function re(q,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Gh(""+z,q.mode,Y),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return Y=yu(z.type,z.key,z.props,null,q.mode,Y),vo(Y,z),Y.return=q,Y;case L:return z=$h(z,q.mode,Y),z.return=q,z;case N:return z=sa(z),re(q,z,Y)}if(Ae(z)||k(z))return z=Wi(z,q.mode,Y,null),z.return=q,z;if(typeof z.then=="function")return re(q,wu(z),Y);if(z.$$typeof===U)return re(q,bu(q,z),Y);Su(q,z)}return null}function K(q,z,Y,ne){var ye=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ye!==null?null:T(q,z,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:return Y.key===ye?M(q,z,Y,ne):null;case L:return Y.key===ye?Q(q,z,Y,ne):null;case N:return Y=sa(Y),K(q,z,Y,ne)}if(Ae(Y)||k(Y))return ye!==null?null:te(q,z,Y,ne,null);if(typeof Y.then=="function")return K(q,z,wu(Y),ne);if(Y.$$typeof===U)return K(q,z,bu(q,Y),ne);Su(q,Y)}return null}function ee(q,z,Y,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(Y)||null,T(z,q,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case j:return q=q.get(ne.key===null?Y:ne.key)||null,M(z,q,ne,ye);case L:return q=q.get(ne.key===null?Y:ne.key)||null,Q(z,q,ne,ye);case N:return ne=sa(ne),ee(q,z,Y,ne,ye)}if(Ae(ne)||k(ne))return q=q.get(Y)||null,te(z,q,ne,ye,null);if(typeof ne.then=="function")return ee(q,z,Y,wu(ne),ye);if(ne.$$typeof===U)return ee(q,z,Y,bu(z,ne),ye);Su(z,ne)}return null}function pe(q,z,Y,ne){for(var ye=null,Ye=null,ge=z,Me=z=0,Ue=null;ge!==null&&Me<Y.length;Me++){ge.index>Me?(Ue=ge,ge=null):Ue=ge.sibling;var Qe=K(q,ge,Y[Me],ne);if(Qe===null){ge===null&&(ge=Ue);break}t&&ge&&Qe.alternate===null&&s(q,ge),z=m(Qe,z,Me),Ye===null?ye=Qe:Ye.sibling=Qe,Ye=Qe,ge=Ue}if(Me===Y.length)return a(q,ge),He&&ar(q,Me),ye;if(ge===null){for(;Me<Y.length;Me++)ge=re(q,Y[Me],ne),ge!==null&&(z=m(ge,z,Me),Ye===null?ye=ge:Ye.sibling=ge,Ye=ge);return He&&ar(q,Me),ye}for(ge=o(ge);Me<Y.length;Me++)Ue=ee(ge,q,Me,Y[Me],ne),Ue!==null&&(t&&Ue.alternate!==null&&ge.delete(Ue.key===null?Me:Ue.key),z=m(Ue,z,Me),Ye===null?ye=Ue:Ye.sibling=Ue,Ye=Ue);return t&&ge.forEach(function(hi){return s(q,hi)}),He&&ar(q,Me),ye}function be(q,z,Y,ne){if(Y==null)throw Error(i(151));for(var ye=null,Ye=null,ge=z,Me=z=0,Ue=null,Qe=Y.next();ge!==null&&!Qe.done;Me++,Qe=Y.next()){ge.index>Me?(Ue=ge,ge=null):Ue=ge.sibling;var hi=K(q,ge,Qe.value,ne);if(hi===null){ge===null&&(ge=Ue);break}t&&ge&&hi.alternate===null&&s(q,ge),z=m(hi,z,Me),Ye===null?ye=hi:Ye.sibling=hi,Ye=hi,ge=Ue}if(Qe.done)return a(q,ge),He&&ar(q,Me),ye;if(ge===null){for(;!Qe.done;Me++,Qe=Y.next())Qe=re(q,Qe.value,ne),Qe!==null&&(z=m(Qe,z,Me),Ye===null?ye=Qe:Ye.sibling=Qe,Ye=Qe);return He&&ar(q,Me),ye}for(ge=o(ge);!Qe.done;Me++,Qe=Y.next())Qe=ee(ge,q,Me,Qe.value,ne),Qe!==null&&(t&&Qe.alternate!==null&&ge.delete(Qe.key===null?Me:Qe.key),z=m(Qe,z,Me),Ye===null?ye=Qe:Ye.sibling=Qe,Ye=Qe);return t&&ge.forEach(function(Dw){return s(q,Dw)}),He&&ar(q,Me),ye}function it(q,z,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:e:{for(var ye=Y.key;z!==null;){if(z.key===ye){if(ye=Y.type,ye===B){if(z.tag===7){a(q,z.sibling),ne=f(z,Y.props.children),ne.return=q,q=ne;break e}}else if(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===N&&sa(ye)===z.type){a(q,z.sibling),ne=f(z,Y.props),vo(ne,Y),ne.return=q,q=ne;break e}a(q,z);break}else s(q,z);z=z.sibling}Y.type===B?(ne=Wi(Y.props.children,q.mode,ne,Y.key),ne.return=q,q=ne):(ne=yu(Y.type,Y.key,Y.props,null,q.mode,ne),vo(ne,Y),ne.return=q,q=ne)}return _(q);case L:e:{for(ye=Y.key;z!==null;){if(z.key===ye)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){a(q,z.sibling),ne=f(z,Y.children||[]),ne.return=q,q=ne;break e}else{a(q,z);break}else s(q,z);z=z.sibling}ne=$h(Y,q.mode,ne),ne.return=q,q=ne}return _(q);case N:return Y=sa(Y),it(q,z,Y,ne)}if(Ae(Y))return pe(q,z,Y,ne);if(k(Y)){if(ye=k(Y),typeof ye!="function")throw Error(i(150));return Y=ye.call(Y),be(q,z,Y,ne)}if(typeof Y.then=="function")return it(q,z,wu(Y),ne);if(Y.$$typeof===U)return it(q,z,bu(q,Y),ne);Su(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,z!==null&&z.tag===6?(a(q,z.sibling),ne=f(z,Y),ne.return=q,q=ne):(a(q,z),ne=Gh(Y,q.mode,ne),ne.return=q,q=ne),_(q)):a(q,z)}return function(q,z,Y,ne){try{yo=0;var ye=it(q,z,Y,ne);return Ya=null,ye}catch(ge){if(ge===$a||ge===Eu)throw ge;var Ye=Rn(29,ge,null,q.mode);return Ye.lanes=ne,Ye.return=q,Ye}finally{}}}var ia=h0(!0),f0=h0(!1),Kr=!1;function rf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Xr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Jr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Xe&2)!==0){var f=o.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s,s=gu(t),Xg(t,null,a),s}return pu(t,o,s,a),gu(t)}function _o(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Gl(t,a)}}function lf(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var of=!1;function bo(){if(of){var t=Ga;if(t!==null)throw t}}function xo(t,s,a,o){of=!1;var f=t.updateQueue;Kr=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var M=T,Q=M.next;M.next=null,_===null?m=Q:_.next=Q,_=M;var te=t.alternate;te!==null&&(te=te.updateQueue,T=te.lastBaseUpdate,T!==_&&(T===null?te.firstBaseUpdate=Q:T.next=Q,te.lastBaseUpdate=M))}if(m!==null){var re=f.baseState;_=0,te=Q=M=null,T=m;do{var K=T.lane&-536870913,ee=K!==T.lane;if(ee?(Le&K)===K:(o&K)===K){K!==0&&K===Fa&&(of=!0),te!==null&&(te=te.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var pe=t,be=T;K=s;var it=a;switch(be.tag){case 1:if(pe=be.payload,typeof pe=="function"){re=pe.call(it,re,K);break e}re=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=be.payload,K=typeof pe=="function"?pe.call(it,re,K):pe,K==null)break e;re=E({},re,K);break e;case 2:Kr=!0}}K=T.callback,K!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[K]:ee.push(K))}else ee={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},te===null?(Q=te=ee,M=re):te=te.next=ee,_|=K;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);te===null&&(M=re),f.baseState=M,f.firstBaseUpdate=Q,f.lastBaseUpdate=te,m===null&&(f.shared.lanes=0),ni|=_,t.lanes=_,t.memoizedState=re}}function m0(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function p0(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)m0(a[t],s)}var Qa=I(null),Au=I(0);function g0(t,s){t=yr,le(Au,t),le(Qa,s),yr=t|s.baseLanes}function cf(){le(Au,yr),le(Qa,Qa.current)}function uf(){yr=Au.current,X(Qa),X(Au)}var Cn=I(null),Xn=null;function Wr(t){var s=t.alternate;le(wt,wt.current&1),le(Cn,t),Xn===null&&(s===null||Qa.current!==null||s.memoizedState!==null)&&(Xn=t)}function df(t){le(wt,wt.current),le(Cn,t),Xn===null&&(Xn=t)}function y0(t){t.tag===22?(le(wt,wt.current),le(Cn,t),Xn===null&&(Xn=t)):Zr()}function Zr(){le(wt,wt.current),le(Cn,Cn.current)}function In(t){X(Cn),Xn===t&&(Xn=null),X(wt)}var wt=I(0);function Nu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ym(a)||vm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cr=0,Oe=null,st=null,kt=null,Ru=!1,Ka=!1,aa=!1,Cu=0,Eo=0,Xa=null,ET=0;function bt(){throw Error(i(321))}function hf(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Nn(t[a],s[a]))return!1;return!0}function ff(t,s,a,o,f,m){return cr=m,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=t===null||t.memoizedState===null?ey:Rf,aa=!1,m=a(o,f),aa=!1,Ka&&(m=_0(s,a,o,f)),v0(t),m}function v0(t){W.H=So;var s=st!==null&&st.next!==null;if(cr=0,kt=st=Oe=null,Ru=!1,Eo=0,Xa=null,s)throw Error(i(300));t===null||Vt||(t=t.dependencies,t!==null&&_u(t)&&(Vt=!0))}function _0(t,s,a,o){Oe=t;var f=0;do{if(Ka&&(Xa=null),Eo=0,Ka=!1,25<=f)throw Error(i(301));if(f+=1,kt=st=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=ty,m=s(a,o)}while(Ka);return m}function TT(){var t=W.H,s=t.useState()[0];return s=typeof s.then=="function"?To(s):s,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Oe.flags|=1024),s}function mf(){var t=Cu!==0;return Cu=0,t}function pf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function gf(t){if(Ru){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ru=!1}cr=0,kt=st=Oe=null,Ka=!1,Eo=Cu=0,Xa=null}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Oe.memoizedState=kt=t:kt=kt.next=t,kt}function St(){if(st===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var s=kt===null?Oe.memoizedState:kt.next;if(s!==null)kt=s,st=t;else{if(t===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?Oe.memoizedState=kt=t:kt=kt.next=t}return kt}function Iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function To(t){var s=Eo;return Eo+=1,Xa===null&&(Xa=[]),t=c0(Xa,t,s),s=Oe,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?ey:Rf),t}function ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return To(t);if(t.$$typeof===U)return Wt(t)}throw Error(i(438,String(t)))}function yf(t){var s=null,a=Oe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Oe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Iu(),Oe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=O;return s.index++,a}function ur(t,s){return typeof s=="function"?s(t):s}function Du(t){var s=St();return vf(s,st,t)}function vf(t,s,a){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var f=t.baseQueue,m=o.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,o.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var T=_=null,M=null,Q=s,te=!1;do{var re=Q.lane&-536870913;if(re!==Q.lane?(Le&re)===re:(cr&re)===re){var K=Q.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),re===Fa&&(te=!0);else if((cr&K)===K){Q=Q.next,K===Fa&&(te=!0);continue}else re={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(T=M=re,_=m):M=M.next=re,Oe.lanes|=K,ni|=K;re=Q.action,aa&&a(m,re),m=Q.hasEagerState?Q.eagerState:a(m,re)}else K={lane:re,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(T=M=K,_=m):M=M.next=K,Oe.lanes|=re,ni|=re;Q=Q.next}while(Q!==null&&Q!==s);if(M===null?_=m:M.next=T,!Nn(m,t.memoizedState)&&(Vt=!0,te&&(a=Ga,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=M,o.lastRenderedState=m}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function _f(t){var s=St(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var o=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);Nn(m,s.memoizedState)||(Vt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function b0(t,s,a){var o=Oe,f=St(),m=He;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var _=!Nn((st||f).memoizedState,a);if(_&&(f.memoizedState=a,Vt=!0),f=f.queue,Ef(T0.bind(null,o,f,t),[t]),f.getSnapshot!==s||_||kt!==null&&kt.memoizedState.tag&1){if(o.flags|=2048,Ja(9,{destroy:void 0},E0.bind(null,o,f,a,s),null),lt===null)throw Error(i(349));m||(cr&127)!==0||x0(o,s,a)}return a}function x0(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Oe.updateQueue,s===null?(s=Iu(),Oe.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function E0(t,s,a,o){s.value=a,s.getSnapshot=o,w0(s)&&S0(t)}function T0(t,s,a){return a(function(){w0(s)&&S0(t)})}function w0(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Nn(t,a)}catch{return!0}}function S0(t){var s=Ji(t,2);s!==null&&_n(s,t,2)}function bf(t){var s=hn();if(typeof t=="function"){var a=t;if(t=a(),aa){zn(!0);try{a()}finally{zn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:t},s}function A0(t,s,a,o){return t.baseState=a,vf(t,st,typeof o=="function"?o:ur)}function wT(t,s,a,o,f){if(ku(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};W.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,N0(s,m)):(m.next=a.next,s.pending=a.next=m)}}function N0(t,s){var a=s.action,o=s.payload,f=t.state;if(s.isTransition){var m=W.T,_={};W.T=_;try{var T=a(f,o),M=W.S;M!==null&&M(_,T),R0(t,s,T)}catch(Q){xf(t,s,Q)}finally{m!==null&&_.types!==null&&(m.types=_.types),W.T=m}}else try{m=a(f,o),R0(t,s,m)}catch(Q){xf(t,s,Q)}}function R0(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){C0(t,s,o)},function(o){return xf(t,s,o)}):C0(t,s,a)}function C0(t,s,a){s.status="fulfilled",s.value=a,I0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,N0(t,a)))}function xf(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,I0(s),s=s.next;while(s!==o)}t.action=null}function I0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function j0(t,s){return s}function D0(t,s){if(He){var a=lt.formState;if(a!==null){e:{var o=Oe;if(He){if(ut){t:{for(var f=ut,m=Kn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Jn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ut=Jn(f.nextSibling),o=f.data==="F!";break e}}Yr(o)}o=!1}o&&(s=a[0])}}return a=hn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j0,lastRenderedState:s},a.queue=o,a=J0.bind(null,Oe,o),o.dispatch=a,o=bf(!1),m=Nf.bind(null,Oe,!1,o.queue),o=hn(),f={state:s,dispatch:null,action:t,pending:null},o.queue=f,a=wT.bind(null,Oe,f,m,a),f.dispatch=a,o.memoizedState=t,[s,a,!1]}function O0(t){var s=St();return M0(s,st,t)}function M0(t,s,a){if(s=vf(t,s,j0)[0],t=Du(ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=To(s)}catch(_){throw _===$a?Eu:_}else o=s;s=St();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(Oe.flags|=2048,Ja(9,{destroy:void 0},ST.bind(null,f,a),null)),[o,m,t]}function ST(t,s){t.action=s}function k0(t){var s=St(),a=st;if(a!==null)return M0(s,a,t);St(),s=s.memoizedState,a=St();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function Ja(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Iu(),Oe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function V0(){return St().memoizedState}function Ou(t,s,a,o){var f=hn();Oe.flags|=t,f.memoizedState=Ja(1|s,{destroy:void 0},a,o===void 0?null:o)}function Mu(t,s,a,o){var f=St();o=o===void 0?null:o;var m=f.memoizedState.inst;st!==null&&o!==null&&hf(o,st.memoizedState.deps)?f.memoizedState=Ja(s,m,a,o):(Oe.flags|=t,f.memoizedState=Ja(1|s,m,a,o))}function P0(t,s){Ou(8390656,8,t,s)}function Ef(t,s){Mu(2048,8,t,s)}function AT(t){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=Iu(),Oe.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function L0(t){var s=St().memoizedState;return AT({ref:s,nextImpl:t}),function(){if((Xe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function U0(t,s){return Mu(4,2,t,s)}function z0(t,s){return Mu(4,4,t,s)}function B0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function H0(t,s,a){a=a!=null?a.concat([t]):null,Mu(4,4,B0.bind(null,s,t),a)}function Tf(){}function q0(t,s){var a=St();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&hf(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function F0(t,s){var a=St();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&hf(s,o[1]))return o[0];if(o=t(),aa){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[o,s],o}function wf(t,s,a){return a===void 0||(cr&1073741824)!==0&&(Le&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=Gy(),Oe.lanes|=t,ni|=t,a)}function G0(t,s,a,o){return Nn(a,s)?a:Qa.current!==null?(t=wf(t,a,o),Nn(t,s)||(Vt=!0),t):(cr&42)===0||(cr&1073741824)!==0&&(Le&261930)===0?(Vt=!0,t.memoizedState=a):(t=Gy(),Oe.lanes|=t,ni|=t,s)}function $0(t,s,a,o,f){var m=ce.p;ce.p=m!==0&&8>m?m:8;var _=W.T,T={};W.T=T,Nf(t,!1,s,a);try{var M=f(),Q=W.S;if(Q!==null&&Q(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var te=xT(M,o);wo(t,s,te,On(t))}else wo(t,s,o,On(t))}catch(re){wo(t,s,{then:function(){},status:"rejected",reason:re},On())}finally{ce.p=m,_!==null&&T.types!==null&&(_.types=T.types),W.T=_}}function NT(){}function Sf(t,s,a,o){if(t.tag!==5)throw Error(i(476));var f=Y0(t).queue;$0(t,f,s,fe,a===null?NT:function(){return Q0(t),a(o)})}function Y0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:fe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Q0(t){var s=Y0(t);s.next===null&&(s=t.alternate.memoizedState),wo(t,s.next.queue,{},On())}function Af(){return Wt(Bo)}function K0(){return St().memoizedState}function X0(){return St().memoizedState}function RT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=On();t=Xr(a);var o=Jr(s,t,a);o!==null&&(_n(o,s,a),_o(o,s,a)),s={cache:ef()},t.payload=s;return}s=s.return}}function CT(t,s,a){var o=On();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ku(t)?W0(s,a):(a=qh(t,s,a,o),a!==null&&(_n(a,t,o),Z0(a,s,o)))}function J0(t,s,a){var o=On();wo(t,s,a,o)}function wo(t,s,a,o){var f={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ku(t))W0(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,T=m(_,a);if(f.hasEagerState=!0,f.eagerState=T,Nn(T,_))return pu(t,s,f,0),lt===null&&mu(),!1}catch{}finally{}if(a=qh(t,s,f,o),a!==null)return _n(a,t,o),Z0(a,s,o),!0}return!1}function Nf(t,s,a,o){if(o={lane:2,revertLane:im(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(s)throw Error(i(479))}else s=qh(t,a,o,2),s!==null&&_n(s,t,2)}function ku(t){var s=t.alternate;return t===Oe||s!==null&&s===Oe}function W0(t,s){Ka=Ru=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Z0(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Gl(t,a)}}var So={readContext:Wt,use:ju,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};So.useEffectEvent=bt;var ey={readContext:Wt,use:ju,useCallback:function(t,s){return hn().memoizedState=[t,s===void 0?null:s],t},useContext:Wt,useEffect:P0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ou(4194308,4,B0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ou(4194308,4,t,s)},useInsertionEffect:function(t,s){Ou(4,2,t,s)},useMemo:function(t,s){var a=hn();s=s===void 0?null:s;var o=t();if(aa){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=hn();if(a!==void 0){var f=a(s);if(aa){zn(!0);try{a(s)}finally{zn(!1)}}}else f=s;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=CT.bind(null,Oe,t),[o.memoizedState,t]},useRef:function(t){var s=hn();return t={current:t},s.memoizedState=t},useState:function(t){t=bf(t);var s=t.queue,a=J0.bind(null,Oe,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Tf,useDeferredValue:function(t,s){var a=hn();return wf(a,t,s)},useTransition:function(){var t=bf(!1);return t=$0.bind(null,Oe,t.queue,!0,!1),hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Oe,f=hn();if(He){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),lt===null)throw Error(i(349));(Le&127)!==0||x0(o,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,P0(T0.bind(null,o,m,t),[t]),o.flags|=2048,Ja(9,{destroy:void 0},E0.bind(null,o,m,a,s),null),a},useId:function(){var t=hn(),s=lt.identifierPrefix;if(He){var a=Us,o=Ls;a=(o&~(1<<32-Et(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Cu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=ET++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Af,useFormState:D0,useActionState:D0,useOptimistic:function(t){var s=hn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Nf.bind(null,Oe,!0,a),a.dispatch=s,[t,s]},useMemoCache:yf,useCacheRefresh:function(){return hn().memoizedState=RT.bind(null,Oe)},useEffectEvent:function(t){var s=hn(),a={impl:t};return s.memoizedState=a,function(){if((Xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Rf={readContext:Wt,use:ju,useCallback:q0,useContext:Wt,useEffect:Ef,useImperativeHandle:H0,useInsertionEffect:U0,useLayoutEffect:z0,useMemo:F0,useReducer:Du,useRef:V0,useState:function(){return Du(ur)},useDebugValue:Tf,useDeferredValue:function(t,s){var a=St();return G0(a,st.memoizedState,t,s)},useTransition:function(){var t=Du(ur)[0],s=St().memoizedState;return[typeof t=="boolean"?t:To(t),s]},useSyncExternalStore:b0,useId:K0,useHostTransitionStatus:Af,useFormState:O0,useActionState:O0,useOptimistic:function(t,s){var a=St();return A0(a,st,t,s)},useMemoCache:yf,useCacheRefresh:X0};Rf.useEffectEvent=L0;var ty={readContext:Wt,use:ju,useCallback:q0,useContext:Wt,useEffect:Ef,useImperativeHandle:H0,useInsertionEffect:U0,useLayoutEffect:z0,useMemo:F0,useReducer:_f,useRef:V0,useState:function(){return _f(ur)},useDebugValue:Tf,useDeferredValue:function(t,s){var a=St();return st===null?wf(a,t,s):G0(a,st.memoizedState,t,s)},useTransition:function(){var t=_f(ur)[0],s=St().memoizedState;return[typeof t=="boolean"?t:To(t),s]},useSyncExternalStore:b0,useId:K0,useHostTransitionStatus:Af,useFormState:k0,useActionState:k0,useOptimistic:function(t,s){var a=St();return st!==null?A0(a,st,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:yf,useCacheRefresh:X0};ty.useEffectEvent=L0;function Cf(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var If={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=On(),f=Xr(o);f.payload=s,a!=null&&(f.callback=a),s=Jr(t,f,o),s!==null&&(_n(s,t,o),_o(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=On(),f=Xr(o);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Jr(t,f,o),s!==null&&(_n(s,t,o),_o(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=On(),o=Xr(a);o.tag=2,s!=null&&(o.callback=s),s=Jr(t,o,a),s!==null&&(_n(s,t,a),_o(s,t,a))}};function ny(t,s,a,o,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,_):s.prototype&&s.prototype.isPureReactComponent?!uo(a,o)||!uo(f,m):!0}function sy(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&If.enqueueReplaceState(s,s.state,null)}function la(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function ry(t){fu(t)}function iy(t){console.error(t)}function ay(t){fu(t)}function Vu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function ly(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jf(t,s,a){return a=Xr(a),a.tag=3,a.payload={element:null},a.callback=function(){Vu(t,s)},a}function oy(t){return t=Xr(t),t.tag=3,t}function cy(t,s,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;t.payload=function(){return f(m)},t.callback=function(){ly(s,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){ly(s,a,o),typeof f!="function"&&(si===null?si=new Set([this]):si.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function IT(t,s,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&qa(s,a,f,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?Qu():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===Tu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),nm(t,o,f)),!1;case 22:return a.flags|=65536,o===Tu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),nm(t,o,f)),!1}throw Error(i(435,a.tag))}return nm(t,o,f),Qu(),!1}if(He)return s=Cn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,o!==Kh&&(t=Error(i(422),{cause:o}),mo($n(t,a)))):(o!==Kh&&(s=Error(i(423),{cause:o}),mo($n(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=$n(o,a),f=jf(t.stateNode,o,f),lf(t,f),xt!==4&&(xt=2)),!1;var m=Error(i(520),{cause:o});if(m=$n(m,a),Oo===null?Oo=[m]:Oo.push(m),xt!==4&&(xt=2),s===null)return!0;o=$n(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=jf(a.stateNode,o,t),lf(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(si===null||!si.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=oy(f),cy(f,t,a,o),lf(a,f),!1}a=a.return}while(a!==null);return!1}var Df=Error(i(461)),Vt=!1;function Zt(t,s,a,o){s.child=t===null?f0(s,null,a,o):ia(s,t.child,a,o)}function uy(t,s,a,o,f){a=a.render;var m=s.ref;if("ref"in o){var _={};for(var T in o)T!=="ref"&&(_[T]=o[T])}else _=o;return ta(s),o=ff(t,s,a,_,m,f),T=mf(),t!==null&&!Vt?(pf(t,s,f),dr(t,s,f)):(He&&T&&Yh(s),s.flags|=1,Zt(t,s,o,f),s.child)}function dy(t,s,a,o,f){if(t===null){var m=a.type;return typeof m=="function"&&!Fh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,hy(t,s,m,o,f)):(t=yu(a.type,null,o,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!zf(t,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:uo,a(_,o)&&t.ref===s.ref)return dr(t,s,f)}return s.flags|=1,t=ir(m,o),t.ref=s.ref,t.return=s,s.child=t}function hy(t,s,a,o,f){if(t!==null){var m=t.memoizedProps;if(uo(m,o)&&t.ref===s.ref)if(Vt=!1,s.pendingProps=o=m,zf(t,f))(t.flags&131072)!==0&&(Vt=!0);else return s.lanes=t.lanes,dr(t,s,f)}return Of(t,s,a,o,f)}function fy(t,s,a,o){var f=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,s.child=null;return my(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&xu(s,m!==null?m.cachePool:null),m!==null?g0(s,m):cf(),y0(s);else return o=s.lanes=536870912,my(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(xu(s,m.cachePool),g0(s,m),Zr(),s.memoizedState=null):(t!==null&&xu(s,null),cf(),Zr());return Zt(t,s,f,a),s.child}function Ao(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function my(t,s,a,o,f){var m=nf();return m=m===null?null:{parent:Mt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&xu(s,null),cf(),y0(s),t!==null&&qa(t,s,o,!0),s.childLanes=f,null}function Pu(t,s){return s=Uu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function py(t,s,a){return ia(s,t.child,null,a),t=Pu(s,s.pendingProps),t.flags|=2,In(s),s.memoizedState=null,t}function jT(t,s,a){var o=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(He){if(o.mode==="hidden")return t=Pu(s,o),s.lanes=536870912,Ao(null,t);if(df(s),(t=ut)?(t=Nv(t,Kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Gr!==null?{id:Ls,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},a=Wg(t),a.return=s,s.child=a,Jt=s,ut=null)):t=null,t===null)throw Yr(s);return s.lanes=536870912,null}return Pu(s,o)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(df(s),f)if(s.flags&256)s.flags&=-257,s=py(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Vt||qa(t,s,a,!1),f=(a&t.childLanes)!==0,Vt||f){if(o=lt,o!==null&&(_=$l(o,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ji(t,_),_n(o,t,_),Df;Qu(),s=py(t,s,a)}else t=m.treeContext,ut=Jn(_.nextSibling),Jt=s,He=!0,$r=null,Kn=!1,t!==null&&t0(s,t),s=Pu(s,o),s.flags|=4096;return s}return t=ir(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Lu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Of(t,s,a,o,f){return ta(s),a=ff(t,s,a,o,void 0,f),o=mf(),t!==null&&!Vt?(pf(t,s,f),dr(t,s,f)):(He&&o&&Yh(s),s.flags|=1,Zt(t,s,a,f),s.child)}function gy(t,s,a,o,f,m){return ta(s),s.updateQueue=null,a=_0(s,o,a,f),v0(t),o=mf(),t!==null&&!Vt?(pf(t,s,m),dr(t,s,m)):(He&&o&&Yh(s),s.flags|=1,Zt(t,s,a,m),s.child)}function yy(t,s,a,o,f){if(ta(s),s.stateNode===null){var m=Ua,_=a.contextType;typeof _=="object"&&_!==null&&(m=Wt(_)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=If,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},rf(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?Wt(_):Ua,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Cf(s,a,_,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&If.enqueueReplaceState(m,m.state,null),xo(s,o,m,f),bo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var T=s.memoizedProps,M=la(a,T);m.props=M;var Q=m.context,te=a.contextType;_=Ua,typeof te=="object"&&te!==null&&(_=Wt(te));var re=a.getDerivedStateFromProps;te=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||Q!==_)&&sy(s,m,o,_),Kr=!1;var K=s.memoizedState;m.state=K,xo(s,o,m,f),bo(),Q=s.memoizedState,T||K!==Q||Kr?(typeof re=="function"&&(Cf(s,a,re,o),Q=s.memoizedState),(M=Kr||ny(s,a,M,o,K,Q,_))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=Q),m.props=o,m.state=Q,m.context=_,o=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,af(t,s),_=s.memoizedProps,te=la(a,_),m.props=te,re=s.pendingProps,K=m.context,Q=a.contextType,M=Ua,typeof Q=="object"&&Q!==null&&(M=Wt(Q)),T=a.getDerivedStateFromProps,(Q=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==re||K!==M)&&sy(s,m,o,M),Kr=!1,K=s.memoizedState,m.state=K,xo(s,o,m,f),bo();var ee=s.memoizedState;_!==re||K!==ee||Kr||t!==null&&t.dependencies!==null&&_u(t.dependencies)?(typeof T=="function"&&(Cf(s,a,T,o),ee=s.memoizedState),(te=Kr||ny(s,a,te,o,K,ee,M)||t!==null&&t.dependencies!==null&&_u(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ee,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ee,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=ee),m.props=o,m.state=ee,m.context=M,o=te):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Lu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=ia(s,t.child,null,f),s.child=ia(s,null,a,f)):Zt(t,s,a,f),s.memoizedState=m.state,t=s.child):t=dr(t,s,f),t}function vy(t,s,a,o){return Zi(),s.flags|=256,Zt(t,s,a,o),s.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kf(t){return{baseLanes:t,cachePool:l0()}}function Vf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Dn),t}function _y(t,s,a){var o=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(wt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(He){if(f?Wr(s):Zr(),(t=ut)?(t=Nv(t,Kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Gr!==null?{id:Ls,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},a=Wg(t),a.return=s,s.child=a,Jt=s,ut=null)):t=null,t===null)throw Yr(s);return vm(t)?s.lanes=32:s.lanes=536870912,null}var T=o.children;return o=o.fallback,f?(Zr(),f=s.mode,T=Uu({mode:"hidden",children:T},f),o=Wi(o,f,a,null),T.return=s,o.return=s,T.sibling=o,s.child=T,o=s.child,o.memoizedState=kf(a),o.childLanes=Vf(t,_,a),s.memoizedState=Mf,Ao(null,o)):(Wr(s),Pf(s,T))}var M=t.memoizedState;if(M!==null&&(T=M.dehydrated,T!==null)){if(m)s.flags&256?(Wr(s),s.flags&=-257,s=Lf(t,s,a)):s.memoizedState!==null?(Zr(),s.child=t.child,s.flags|=128,s=null):(Zr(),T=o.fallback,f=s.mode,o=Uu({mode:"visible",children:o.children},f),T=Wi(T,f,a,null),T.flags|=2,o.return=s,T.return=s,o.sibling=T,s.child=o,ia(s,t.child,null,a),o=s.child,o.memoizedState=kf(a),o.childLanes=Vf(t,_,a),s.memoizedState=Mf,s=Ao(null,o));else if(Wr(s),vm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var Q=_.dgst;_=Q,o=Error(i(419)),o.stack="",o.digest=_,mo({value:o,source:null,stack:null}),s=Lf(t,s,a)}else if(Vt||qa(t,s,a,!1),_=(a&t.childLanes)!==0,Vt||_){if(_=lt,_!==null&&(o=$l(_,a),o!==0&&o!==M.retryLane))throw M.retryLane=o,Ji(t,o),_n(_,t,o),Df;ym(T)||Qu(),s=Lf(t,s,a)}else ym(T)?(s.flags|=192,s.child=t.child,s=null):(t=M.treeContext,ut=Jn(T.nextSibling),Jt=s,He=!0,$r=null,Kn=!1,t!==null&&t0(s,t),s=Pf(s,o.children),s.flags|=4096);return s}return f?(Zr(),T=o.fallback,f=s.mode,M=t.child,Q=M.sibling,o=ir(M,{mode:"hidden",children:o.children}),o.subtreeFlags=M.subtreeFlags&65011712,Q!==null?T=ir(Q,T):(T=Wi(T,f,a,null),T.flags|=2),T.return=s,o.return=s,o.sibling=T,s.child=o,Ao(null,o),o=s.child,T=t.child.memoizedState,T===null?T=kf(a):(f=T.cachePool,f!==null?(M=Mt._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=l0(),T={baseLanes:T.baseLanes|a,cachePool:f}),o.memoizedState=T,o.childLanes=Vf(t,_,a),s.memoizedState=Mf,Ao(t.child,o)):(Wr(s),a=t.child,t=a.sibling,a=ir(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function Pf(t,s){return s=Uu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Uu(t,s){return t=Rn(22,t,null,s),t.lanes=0,t}function Lf(t,s,a){return ia(s,t.child,null,a),t=Pf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function by(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Wh(t.return,s,a)}function Uf(t,s,a,o,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function xy(t,s,a){var o=s.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var _=wt.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,le(wt,_),Zt(t,s,o,a),o=He?fo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,a,s);else if(t.tag===19)by(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&Nu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Uf(s,!1,f,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Nu(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Uf(s,!0,a,null,m,o);break;case"together":Uf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function dr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),ni|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(qa(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=ir(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=ir(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function zf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&_u(t)))}function DT(t,s,a){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),Qr(s,Mt,t.memoizedState.cache),Zi();break;case 27:case 5:qe(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:Qr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,df(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(Wr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?_y(t,s,a):(Wr(s),t=dr(t,s,a),t!==null?t.sibling:null);Wr(s);break;case 19:var f=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(qa(t,s,a,!1),o=(a&s.childLanes)!==0),f){if(o)return xy(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(wt,wt.current),o)break;return null;case 22:return s.lanes=0,fy(t,s,a,s.pendingProps);case 24:Qr(s,Mt,t.memoizedState.cache)}return dr(t,s,a)}function Ey(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Vt=!0;else{if(!zf(t,a)&&(s.flags&128)===0)return Vt=!1,DT(t,s,a);Vt=(t.flags&131072)!==0}else Vt=!1,He&&(s.flags&1048576)!==0&&e0(s,fo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=sa(s.elementType),s.type=t,typeof t=="function")Fh(t)?(o=la(t,o),s.tag=1,s=yy(null,s,t,o,a)):(s.tag=0,s=Of(null,s,t,o,a));else{if(t!=null){var f=t.$$typeof;if(f===$){s.tag=11,s=uy(null,s,t,o,a);break e}else if(f===R){s.tag=14,s=dy(null,s,t,o,a);break e}}throw s=_e(t)||t,Error(i(306,s,""))}}return s;case 0:return Of(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,f=la(o,s.pendingProps),yy(t,s,o,f,a);case 3:e:{if(yt(s,s.stateNode.containerInfo),t===null)throw Error(i(387));o=s.pendingProps;var m=s.memoizedState;f=m.element,af(t,s),xo(s,o,null,a);var _=s.memoizedState;if(o=_.cache,Qr(s,Mt,o),o!==m.cache&&Zh(s,[Mt],a,!0),bo(),o=_.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=vy(t,s,o,a);break e}else if(o!==f){f=$n(Error(i(424)),s),mo(f),s=vy(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ut=Jn(t.firstChild),Jt=s,He=!0,$r=null,Kn=!0,a=f0(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zi(),o===f){s=dr(t,s,a);break e}Zt(t,s,o,a)}s=s.child}return s;case 26:return Lu(t,s),t===null?(a=Ov(s.type,null,s.pendingProps,null))?s.memoizedState=a:He||(a=s.type,t=s.pendingProps,o=td(Se.current).createElement(a),o[jt]=s,o[Ft]=t,en(o,a,t),Dt(o),s.stateNode=o):s.memoizedState=Ov(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return qe(s),t===null&&He&&(o=s.stateNode=Iv(s.type,s.pendingProps,Se.current),Jt=s,Kn=!0,f=ut,li(s.type)?(_m=f,ut=Jn(o.firstChild)):ut=f),Zt(t,s,s.pendingProps.children,a),Lu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&He&&((f=o=ut)&&(o=ow(o,s.type,s.pendingProps,Kn),o!==null?(s.stateNode=o,Jt=s,ut=Jn(o.firstChild),Kn=!1,f=!0):f=!1),f||Yr(s)),qe(s),f=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,o=m.children,mm(f,m)?o=null:_!==null&&mm(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=ff(t,s,TT,null,null,a),Bo._currentValue=f),Lu(t,s),Zt(t,s,o,a),s.child;case 6:return t===null&&He&&((t=a=ut)&&(a=cw(a,s.pendingProps,Kn),a!==null?(s.stateNode=a,Jt=s,ut=null,t=!0):t=!1),t||Yr(s)),null;case 13:return _y(t,s,a);case 4:return yt(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=ia(s,null,o,a):Zt(t,s,o,a),s.child;case 11:return uy(t,s,s.type,s.pendingProps,a);case 7:return Zt(t,s,s.pendingProps,a),s.child;case 8:return Zt(t,s,s.pendingProps.children,a),s.child;case 12:return Zt(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,Qr(s,s.type,o.value),Zt(t,s,o.children,a),s.child;case 9:return f=s.type._context,o=s.pendingProps.children,ta(s),f=Wt(f),o=o(f),s.flags|=1,Zt(t,s,o,a),s.child;case 14:return dy(t,s,s.type,s.pendingProps,a);case 15:return hy(t,s,s.type,s.pendingProps,a);case 19:return xy(t,s,a);case 31:return jT(t,s,a);case 22:return fy(t,s,a,s.pendingProps);case 24:return ta(s),o=Wt(Mt),t===null?(f=nf(),f===null&&(f=lt,m=ef(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:o,cache:f},rf(s),Qr(s,Mt,f)):((t.lanes&a)!==0&&(af(t,s),xo(s,null,null,a),bo()),f=t.memoizedState,m=s.memoizedState,f.parent!==o?(f={parent:o,cache:o},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Qr(s,Mt,o)):(o=m.cache,Qr(s,Mt,o),o!==f.cache&&Zh(s,[Mt],a,!0))),Zt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function hr(t){t.flags|=4}function Bf(t,s,a,o,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ky())t.flags|=8192;else throw ra=Tu,sf}else t.flags&=-16777217}function Ty(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Lv(s))if(Ky())t.flags|=8192;else throw ra=Tu,sf}function zu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?$c():536870912,t.lanes|=s,tl|=s)}function No(t,s){if(!He)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function dt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function OT(t,s,a){var o=s.pendingProps;switch(Qh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),or(Mt),tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ha(s)?hr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xh())),dt(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(hr(s),m!==null?(dt(s),Ty(s,m)):(dt(s),Bf(s,f,null,o,a))):m?m!==t.memoizedState?(hr(s),dt(s),Ty(s,m)):(dt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&hr(s),dt(s),Bf(s,f,t,o,a)),null;case 27:if(wn(s),a=Se.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&hr(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return dt(s),null}t=ue.current,Ha(s)?n0(s):(t=Iv(f,o,a),s.stateNode=t,hr(s))}return dt(s),null;case 5:if(wn(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&hr(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return dt(s),null}if(m=ue.current,Ha(s))n0(s);else{var _=td(Se.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?_.createElement(f,{is:o.is}):_.createElement(f)}}m[jt]=s,m[Ft]=o;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(en(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&hr(s)}}return dt(s),Bf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&hr(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(t=Se.current,Ha(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,f=Jt,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[jt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||_v(t.nodeValue,a)),t||Yr(s,!0)}else t=td(t).createTextNode(o),t[jt]=s,s.stateNode=t}return dt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=Ha(s),a!==null){if(t===null){if(!o)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[jt]=s}else Zi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),t=!1}else a=Xh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(In(s),s):(In(s),null);if((s.flags&128)!==0)throw Error(i(558))}return dt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ha(s),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[jt]=s}else Zi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),f=!1}else f=Xh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(In(s),s):(In(s),null)}return In(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),zu(s,s.updateQueue),dt(s),null);case 4:return tt(),t===null&&cm(s.stateNode.containerInfo),dt(s),null;case 10:return or(s.type),dt(s),null;case 19:if(X(wt),o=s.memoizedState,o===null)return dt(s),null;if(f=(s.flags&128)!==0,m=o.rendering,m===null)if(f)No(o,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Nu(t),m!==null){for(s.flags|=128,No(o,!1),t=m.updateQueue,s.updateQueue=t,zu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Jg(a,t),a=a.sibling;return le(wt,wt.current&1|2),He&&ar(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&un()>Gu&&(s.flags|=128,f=!0,No(o,!1),s.lanes=4194304)}else{if(!f)if(t=Nu(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,zu(s,t),No(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!He)return dt(s),null}else 2*un()-o.renderingStartTime>Gu&&a!==536870912&&(s.flags|=128,f=!0,No(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=un(),t.sibling=null,a=wt.current,le(wt,f?a&1|2:a&1),He&&ar(s,o.treeForkCount),t):(dt(s),null);case 22:case 23:return In(s),uf(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),a=s.updateQueue,a!==null&&zu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&X(na),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),or(Mt),dt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function MT(t,s){switch(Qh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return or(Mt),tt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return wn(s),null;case 31:if(s.memoizedState!==null){if(In(s),s.alternate===null)throw Error(i(340));Zi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(In(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Zi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return X(wt),null;case 4:return tt(),null;case 10:return or(s.type),null;case 22:case 23:return In(s),uf(),t!==null&&X(na),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return or(Mt),null;case 25:return null;default:return null}}function wy(t,s){switch(Qh(s),s.tag){case 3:or(Mt),tt();break;case 26:case 27:case 5:wn(s);break;case 4:tt();break;case 31:s.memoizedState!==null&&In(s);break;case 13:In(s);break;case 19:X(wt);break;case 10:or(s.type);break;case 22:case 23:In(s),uf(),t!==null&&X(na);break;case 24:or(Mt)}}function Ro(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&t)===t){o=void 0;var m=a.create,_=a.inst;o=m(),_.destroy=o}a=a.next}while(a!==f)}}catch(T){et(s,s.return,T)}}function ei(t,s,a){try{var o=s.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&t)===t){var _=o.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=s;var M=a,Q=T;try{Q()}catch(te){et(f,M,te)}}}o=o.next}while(o!==m)}}catch(te){et(s,s.return,te)}}function Sy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{p0(s,a)}catch(o){et(t,t.return,o)}}}function Ay(t,s,a){a.props=la(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){et(t,s,o)}}function Co(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(f){et(t,s,f)}}function zs(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){et(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){et(t,s,f)}else a.current=null}function Ny(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){et(t,t.return,f)}}function Hf(t,s,a){try{var o=t.stateNode;nw(o,t.type,a,s),o[Ft]=s}catch(f){et(t,t.return,f)}}function Ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&li(t.type)||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&li(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=as));else if(o!==4&&(o===27&&li(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ff(t,s,a),t=t.sibling;t!==null;)Ff(t,s,a),t=t.sibling}function Bu(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&li(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Bu(t,s,a),t=t.sibling;t!==null;)Bu(t,s,a),t=t.sibling}function Cy(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);en(s,o,a),s[jt]=t,s[Ft]=a}catch(m){et(t,t.return,m)}}var fr=!1,Pt=!1,Gf=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,$t=null;function kT(t,s){if(t=t.containerInfo,hm=od,t=Hg(t),Ph(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,T=-1,M=-1,Q=0,te=0,re=t,K=null;t:for(;;){for(var ee;re!==a||f!==0&&re.nodeType!==3||(T=_+f),re!==m||o!==0&&re.nodeType!==3||(M=_+o),re.nodeType===3&&(_+=re.nodeValue.length),(ee=re.firstChild)!==null;)K=re,re=ee;for(;;){if(re===t)break t;if(K===a&&++Q===f&&(T=_),K===m&&++te===o&&(M=_),(ee=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=ee}a=T===-1||M===-1?null:{start:T,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(fm={focusedElem:t,selectionRange:a},od=!1,$t=s;$t!==null;)if(s=$t,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,$t=t;else for(;$t!==null;){switch(s=$t,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var pe=la(a.type,f);t=o.getSnapshotBeforeUpdate(pe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(be){et(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)gm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,$t=t;break}$t=s.return}}function jy(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:pr(t,a),o&4&&Ro(5,a);break;case 1:if(pr(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){et(a,a.return,_)}else{var f=la(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){et(a,a.return,_)}}o&64&&Sy(a),o&512&&Co(a,a.return);break;case 3:if(pr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{p0(t,s)}catch(_){et(a,a.return,_)}}break;case 27:s===null&&o&4&&Cy(a);case 26:case 5:pr(t,a),s===null&&o&4&&Ny(a),o&512&&Co(a,a.return);break;case 12:pr(t,a);break;case 31:pr(t,a),o&4&&My(t,a);break;case 13:pr(t,a),o&4&&ky(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=FT.bind(null,a),uw(t,a))));break;case 22:if(o=a.memoizedState!==null||fr,!o){s=s!==null&&s.memoizedState!==null||Pt,f=fr;var m=Pt;fr=o,(Pt=s)&&!m?gr(t,a,(a.subtreeFlags&8772)!==0):pr(t,a),fr=f,Pt=m}break;case 30:break;default:pr(t,a)}}function Dy(t){var s=t.alternate;s!==null&&(t.alternate=null,Dy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Sa(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,pn=!1;function mr(t,s,a){for(a=a.child;a!==null;)Oy(t,s,a),a=a.sibling}function Oy(t,s,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(ns,a)}catch{}switch(a.tag){case 26:Pt||zs(a,s),mr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||zs(a,s);var o=pt,f=pn;li(a.type)&&(pt=a.stateNode,pn=!1),mr(t,s,a),Lo(a.stateNode),pt=o,pn=f;break;case 5:Pt||zs(a,s);case 6:if(o=pt,f=pn,pt=null,mr(t,s,a),pt=o,pn=f,pt!==null)if(pn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(m){et(a,s,m)}else try{pt.removeChild(a.stateNode)}catch(m){et(a,s,m)}break;case 18:pt!==null&&(pn?(t=pt,Sv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),cl(t)):Sv(pt,a.stateNode));break;case 4:o=pt,f=pn,pt=a.stateNode.containerInfo,pn=!0,mr(t,s,a),pt=o,pn=f;break;case 0:case 11:case 14:case 15:ei(2,a,s),Pt||ei(4,a,s),mr(t,s,a);break;case 1:Pt||(zs(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ay(a,s,o)),mr(t,s,a);break;case 21:mr(t,s,a);break;case 22:Pt=(o=Pt)||a.memoizedState!==null,mr(t,s,a),Pt=o;break;default:mr(t,s,a)}}function My(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{cl(t)}catch(a){et(s,s.return,a)}}}function ky(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{cl(t)}catch(a){et(s,s.return,a)}}function VT(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Iy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Iy),s;default:throw Error(i(435,t.tag))}}function Hu(t,s){var a=VT(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var f=GT.bind(null,t,o);o.then(f,f)}})}function gn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],m=t,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(li(T.type)){pt=T.stateNode,pn=!1;break e}break;case 5:pt=T.stateNode,pn=!1;break e;case 3:case 4:pt=T.stateNode.containerInfo,pn=!0;break e}T=T.return}if(pt===null)throw Error(i(160));Oy(m,_,f),pt=null,pn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Vy(s,t),s=s.sibling}var hs=null;function Vy(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gn(s,t),yn(t),o&4&&(ei(3,t,t.return),Ro(3,t),ei(5,t,t.return));break;case 1:gn(s,t),yn(t),o&512&&(Pt||a===null||zs(a,a.return)),o&64&&fr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=hs;if(gn(s,t),yn(t),o&512&&(Pt||a===null||zs(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[As]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),en(m,o,a),m[jt]=t,Dt(m),o=m;break e;case"link":var _=Vv("link","href",f).get(o+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}m=f.createElement(o),en(m,o,a),f.head.appendChild(m);break;case"meta":if(_=Vv("meta","content",f).get(o+(a.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}m=f.createElement(o),en(m,o,a),f.head.appendChild(m);break;default:throw Error(i(468,o))}m[jt]=t,Dt(m),o=m}t.stateNode=o}else Pv(f,t.type,t.stateNode);else t.stateNode=kv(f,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?Pv(f,t.type,t.stateNode):kv(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Hf(t,t.memoizedProps,a.memoizedProps)}break;case 27:gn(s,t),yn(t),o&512&&(Pt||a===null||zs(a,a.return)),a!==null&&o&4&&Hf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(gn(s,t),yn(t),o&512&&(Pt||a===null||zs(a,a.return)),t.flags&32){f=t.stateNode;try{mn(f,"")}catch(pe){et(t,t.return,pe)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,Hf(t,f,a!==null?a.memoizedProps:f)),o&1024&&(Gf=!0);break;case 6:if(gn(s,t),yn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(pe){et(t,t.return,pe)}}break;case 3:if(rd=null,f=hs,hs=nd(s.containerInfo),gn(s,t),hs=f,yn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{cl(s.containerInfo)}catch(pe){et(t,t.return,pe)}Gf&&(Gf=!1,Py(t));break;case 4:o=hs,hs=nd(t.stateNode.containerInfo),gn(s,t),yn(t),hs=o;break;case 12:gn(s,t),yn(t);break;case 31:gn(s,t),yn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Hu(t,o)));break;case 13:gn(s,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Fu=un()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Hu(t,o)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,Q=fr,te=Pt;if(fr=Q||f,Pt=te||M,gn(s,t),Pt=te,fr=Q,yn(t),o&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||M||fr||Pt||oa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=M.stateNode;var re=M.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(pe){et(M,M.return,pe)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(pe){et(M,M.return,pe)}}}else if(s.tag===18){if(a===null){M=s;try{var ee=M.stateNode;f?Av(ee,!0):Av(M.stateNode,!1)}catch(pe){et(M,M.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Hu(t,a))));break;case 19:gn(s,t),yn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Hu(t,o)));break;case 30:break;case 21:break;default:gn(s,t),yn(t)}}function yn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(Ry(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=qf(t);Bu(t,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(mn(_,""),a.flags&=-33);var T=qf(t);Bu(t,T,_);break;case 3:case 4:var M=a.stateNode.containerInfo,Q=qf(t);Ff(t,Q,M);break;default:throw Error(i(161))}}catch(te){et(t,t.return,te)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Py(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function pr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)jy(t,s.alternate,s),s=s.sibling}function oa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ei(4,s,s.return),oa(s);break;case 1:zs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Ay(s,s.return,a),oa(s);break;case 27:Lo(s.stateNode);case 26:case 5:zs(s,s.return),oa(s);break;case 22:s.memoizedState===null&&oa(s);break;case 30:oa(s);break;default:oa(s)}t=t.sibling}}function gr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,f=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:gr(f,m,a),Ro(4,m);break;case 1:if(gr(f,m,a),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){et(o,o.return,Q)}if(o=m,f=o.updateQueue,f!==null){var T=o.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)m0(M[f],T)}catch(Q){et(o,o.return,Q)}}a&&_&64&&Sy(m),Co(m,m.return);break;case 27:Cy(m);case 26:case 5:gr(f,m,a),a&&o===null&&_&4&&Ny(m),Co(m,m.return);break;case 12:gr(f,m,a);break;case 31:gr(f,m,a),a&&_&4&&My(f,m);break;case 13:gr(f,m,a),a&&_&4&&ky(f,m);break;case 22:m.memoizedState===null&&gr(f,m,a),Co(m,m.return);break;case 30:break;default:gr(f,m,a)}s=s.sibling}}function $f(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&po(a))}function Yf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&po(t))}function fs(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ly(t,s,a,o),s=s.sibling}function Ly(t,s,a,o){var f=s.flags;switch(s.tag){case 0:case 11:case 15:fs(t,s,a,o),f&2048&&Ro(9,s);break;case 1:fs(t,s,a,o);break;case 3:fs(t,s,a,o),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&po(t)));break;case 12:if(f&2048){fs(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){et(s,s.return,M)}}else fs(t,s,a,o);break;case 31:fs(t,s,a,o);break;case 13:fs(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?fs(t,s,a,o):Io(t,s):m._visibility&2?fs(t,s,a,o):(m._visibility|=2,Wa(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),f&2048&&$f(_,s);break;case 24:fs(t,s,a,o),f&2048&&Yf(s.alternate,s);break;default:fs(t,s,a,o)}}function Wa(t,s,a,o,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,T=a,M=o,Q=_.flags;switch(_.tag){case 0:case 11:case 15:Wa(m,_,T,M,f),Ro(8,_);break;case 23:break;case 22:var te=_.stateNode;_.memoizedState!==null?te._visibility&2?Wa(m,_,T,M,f):Io(m,_):(te._visibility|=2,Wa(m,_,T,M,f)),f&&Q&2048&&$f(_.alternate,_);break;case 24:Wa(m,_,T,M,f),f&&Q&2048&&Yf(_.alternate,_);break;default:Wa(m,_,T,M,f)}s=s.sibling}}function Io(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,f=o.flags;switch(o.tag){case 22:Io(a,o),f&2048&&$f(o.alternate,o);break;case 24:Io(a,o),f&2048&&Yf(o.alternate,o);break;default:Io(a,o)}s=s.sibling}}var jo=8192;function Za(t,s,a){if(t.subtreeFlags&jo)for(t=t.child;t!==null;)Uy(t,s,a),t=t.sibling}function Uy(t,s,a){switch(t.tag){case 26:Za(t,s,a),t.flags&jo&&t.memoizedState!==null&&Ew(a,hs,t.memoizedState,t.memoizedProps);break;case 5:Za(t,s,a);break;case 3:case 4:var o=hs;hs=nd(t.stateNode.containerInfo),Za(t,s,a),hs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=jo,jo=16777216,Za(t,s,a),jo=o):Za(t,s,a));break;default:Za(t,s,a)}}function zy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Do(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];$t=o,Hy(o,t)}zy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)By(t),t=t.sibling}function By(t){switch(t.tag){case 0:case 11:case 15:Do(t),t.flags&2048&&ei(9,t,t.return);break;case 3:Do(t);break;case 12:Do(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,qu(t)):Do(t);break;default:Do(t)}}function qu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];$t=o,Hy(o,t)}zy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ei(8,s,s.return),qu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,qu(s));break;default:qu(s)}t=t.sibling}}function Hy(t,s){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:ei(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:po(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,$t=o;else e:for(a=t;$t!==null;){o=$t;var f=o.sibling,m=o.return;if(Dy(o),o===a){$t=null;break e}if(f!==null){f.return=m,$t=f;break e}$t=m}}}var PT={getCacheForType:function(t){var s=Wt(Mt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Wt(Mt).controller.signal}},LT=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,Ve=null,Le=0,Ze=0,jn=null,ti=!1,el=!1,Qf=!1,yr=0,xt=0,ni=0,ca=0,Kf=0,Dn=0,tl=0,Oo=null,vn=null,Xf=!1,Fu=0,qy=0,Gu=1/0,$u=null,si=null,Ht=0,ri=null,nl=null,vr=0,Jf=0,Wf=null,Fy=null,Mo=0,Zf=null;function On(){return(Xe&2)!==0&&Le!==0?Le&-Le:W.T!==null?im():Yc()}function Gy(){if(Dn===0)if((Le&536870912)===0||He){var t=Vi;Vi<<=1,(Vi&3932160)===0&&(Vi=262144),Dn=t}else Dn=536870912;return t=Cn.current,t!==null&&(t.flags|=32),Dn}function _n(t,s,a){(t===lt&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(sl(t,0),ii(t,Le,Dn,!1)),Pi(t,a),((Xe&2)===0||t!==lt)&&(t===lt&&((Xe&2)===0&&(ca|=a),xt===4&&ii(t,Le,Dn,!1)),Bs(t))}function $y(t,s,a){if((Xe&6)!==0)throw Error(i(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||ss(t,s),f=o?BT(t,s):tm(t,s,!0),m=o;do{if(f===0){el&&!o&&ii(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!UT(a)){f=tm(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=t;f=Oo;var M=T.current.memoizedState.isDehydrated;if(M&&(sl(T,_).flags|=256),_=tm(T,_,!1),_!==2){if(Qf&&!M){T.errorRecoveryDisabledLanes|=m,ca|=m,f=4;break e}m=vn,vn=f,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){sl(t,0),ii(t,s,0,!0);break}e:{switch(o=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ii(o,s,Dn,!ti);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Fu+300-un(),10<f)){if(ii(o,s,Dn,!ti),Ts(o,0,!0)!==0)break e;vr=s,o.timeoutHandle=Tv(Yy.bind(null,o,a,vn,$u,Xf,s,Dn,ca,tl,ti,m,"Throttled",-0,0),f);break e}Yy(o,a,vn,$u,Xf,s,Dn,ca,tl,ti,m,null,-0,0)}}break}while(!0);Bs(t)}function Yy(t,s,a,o,f,m,_,T,M,Q,te,re,K,ee){if(t.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:as},Uy(s,m,re);var pe=(m&62914560)===m?Fu-un():(m&4194048)===m?qy-un():0;if(pe=Tw(re,pe),pe!==null){vr=m,t.cancelPendingCommit=pe(tv.bind(null,t,s,m,a,o,f,_,T,M,te,re,null,K,ee)),ii(t,m,_,!Q);return}}tv(t,s,m,a,o,f,_,T,M)}function UT(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ii(t,s,a,o){s&=~Kf,s&=~ca,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var f=s;0<f;){var m=31-Et(f),_=1<<m;o[m]=-1,f&=~_}a!==0&&Li(t,a,s)}function Yu(){return(Xe&6)===0?(ko(0),!1):!0}function em(){if(Ve!==null){if(Ze===0)var t=Ve.return;else t=Ve,lr=ea=null,gf(t),Ya=null,yo=0,t=Ve;for(;t!==null;)wy(t.alternate,t),t=t.return;Ve=null}}function sl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,iw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),vr=0,em(),lt=t,Ve=a=ir(t.current,null),Le=s,Ze=0,jn=null,ti=!1,el=ss(t,s),Qf=!1,tl=Dn=Kf=ca=ni=xt=0,vn=Oo=null,Xf=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var f=31-Et(o),m=1<<f;s|=t[f],o&=~m}return yr=s,mu(),a}function Qy(t,s){Oe=null,W.H=So,s===$a||s===Eu?(s=u0(),Ze=3):s===sf?(s=u0(),Ze=4):Ze=s===Df?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,jn=s,Ve===null&&(xt=1,Vu(t,$n(s,t.current)))}function Ky(){var t=Cn.current;return t===null?!0:(Le&4194048)===Le?Xn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Xn:!1}function Xy(){var t=W.H;return W.H=So,t===null?So:t}function Jy(){var t=W.A;return W.A=PT,t}function Qu(){xt=4,ti||(Le&4194048)!==Le&&Cn.current!==null||(el=!0),(ni&134217727)===0&&(ca&134217727)===0||lt===null||ii(lt,Le,Dn,!1)}function tm(t,s,a){var o=Xe;Xe|=2;var f=Xy(),m=Jy();(lt!==t||Le!==s)&&($u=null,sl(t,s)),s=!1;var _=xt;e:do try{if(Ze!==0&&Ve!==null){var T=Ve,M=jn;switch(Ze){case 8:em(),_=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(s=!0);var Q=Ze;if(Ze=0,jn=null,rl(t,T,M,Q),a&&el){_=0;break e}break;default:Q=Ze,Ze=0,jn=null,rl(t,T,M,Q)}}zT(),_=xt;break}catch(te){Qy(t,te)}while(!0);return s&&t.shellSuspendCounter++,lr=ea=null,Xe=o,W.H=f,W.A=m,Ve===null&&(lt=null,Le=0,mu()),_}function zT(){for(;Ve!==null;)Wy(Ve)}function BT(t,s){var a=Xe;Xe|=2;var o=Xy(),f=Jy();lt!==t||Le!==s?($u=null,Gu=un()+500,sl(t,s)):el=ss(t,s);e:do try{if(Ze!==0&&Ve!==null){s=Ve;var m=jn;t:switch(Ze){case 1:Ze=0,jn=null,rl(t,s,m,1);break;case 2:case 9:if(o0(m)){Ze=0,jn=null,Zy(s);break}s=function(){Ze!==2&&Ze!==9||lt!==t||(Ze=7),Bs(t)},m.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:o0(m)?(Ze=0,jn=null,Zy(s)):(Ze=0,jn=null,rl(t,s,m,7));break;case 5:var _=null;switch(Ve.tag){case 26:_=Ve.memoizedState;case 5:case 27:var T=Ve;if(_?Lv(_):T.stateNode.complete){Ze=0,jn=null;var M=T.sibling;if(M!==null)Ve=M;else{var Q=T.return;Q!==null?(Ve=Q,Ku(Q)):Ve=null}break t}}Ze=0,jn=null,rl(t,s,m,5);break;case 6:Ze=0,jn=null,rl(t,s,m,6);break;case 8:em(),xt=6;break e;default:throw Error(i(462))}}HT();break}catch(te){Qy(t,te)}while(!0);return lr=ea=null,W.H=o,W.A=f,Xe=a,Ve!==null?0:(lt=null,Le=0,mu(),xt)}function HT(){for(;Ve!==null&&!Ih();)Wy(Ve)}function Wy(t){var s=Ey(t.alternate,t,yr);t.memoizedProps=t.pendingProps,s===null?Ku(t):Ve=s}function Zy(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=gy(a,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=gy(a,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:gf(s);default:wy(a,s),s=Ve=Jg(s,yr),s=Ey(a,s,yr)}t.memoizedProps=t.pendingProps,s===null?Ku(t):Ve=s}function rl(t,s,a,o){lr=ea=null,gf(s),Ya=null,yo=0;var f=s.return;try{if(IT(t,f,s,a,Le)){xt=1,Vu(t,$n(a,t.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;xt=1,Vu(t,$n(a,t.current)),Ve=null;return}s.flags&32768?(He||o===1?t=!0:el||(Le&536870912)!==0?t=!1:(ti=t=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),ev(s,t)):Ku(s)}function Ku(t){var s=t;do{if((s.flags&32768)!==0){ev(s,ti);return}t=s.return;var a=OT(s.alternate,s,yr);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=t}while(s!==null);xt===0&&(xt=5)}function ev(t,s){do{var a=MT(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);xt=6,Ve=null}function tv(t,s,a,o,f,m,_,T,M){t.cancelPendingCommit=null;do Xu();while(Ht!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Hh,Oh(t,a,m,_,T,M),t===lt&&(Ve=lt=null,Le=0),nl=s,ri=t,vr=a,Jf=m,Wf=f,Fy=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$T(kr,function(){return av(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=W.T,W.T=null,f=ce.p,ce.p=2,_=Xe,Xe|=4;try{kT(t,s,a)}finally{Xe=_,ce.p=f,W.T=o}}Ht=1,nv(),sv(),rv()}}function nv(){if(Ht===1){Ht=0;var t=ri,s=nl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var o=ce.p;ce.p=2;var f=Xe;Xe|=4;try{Vy(s,t);var m=fm,_=Hg(t.containerInfo),T=m.focusedElem,M=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&Bg(T.ownerDocument.documentElement,T)){if(M!==null&&Ph(T)){var Q=M.start,te=M.end;if(te===void 0&&(te=Q),"selectionStart"in T)T.selectionStart=Q,T.selectionEnd=Math.min(te,T.value.length);else{var re=T.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var ee=K.getSelection(),pe=T.textContent.length,be=Math.min(M.start,pe),it=M.end===void 0?be:Math.min(M.end,pe);!ee.extend&&be>it&&(_=it,it=be,be=_);var q=zg(T,be),z=zg(T,it);if(q&&z&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var Y=re.createRange();Y.setStart(q.node,q.offset),ee.removeAllRanges(),be>it?(ee.addRange(Y),ee.extend(z.node,z.offset)):(Y.setEnd(z.node,z.offset),ee.addRange(Y))}}}}for(re=[],ee=T;ee=ee.parentNode;)ee.nodeType===1&&re.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<re.length;T++){var ne=re[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}od=!!hm,fm=hm=null}finally{Xe=f,ce.p=o,W.T=a}}t.current=s,Ht=2}}function sv(){if(Ht===2){Ht=0;var t=ri,s=nl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var o=ce.p;ce.p=2;var f=Xe;Xe|=4;try{jy(t,s.alternate,s)}finally{Xe=f,ce.p=o,W.T=a}}Ht=3}}function rv(){if(Ht===4||Ht===3){Ht=0,zc();var t=ri,s=nl,a=vr,o=Fy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ht=5:(Ht=0,nl=ri=null,iv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(si=null),tr(a),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(ns,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=W.T,f=ce.p,ce.p=2,W.T=null;try{for(var m=t.onRecoverableError,_=0;_<o.length;_++){var T=o[_];m(T.value,{componentStack:T.stack})}}finally{W.T=s,ce.p=f}}(vr&3)!==0&&Xu(),Bs(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Zf?Mo++:(Mo=0,Zf=t):Mo=0,ko(0)}}function iv(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,po(s)))}function Xu(){return nv(),sv(),rv(),av()}function av(){if(Ht!==5)return!1;var t=ri,s=Jf;Jf=0;var a=tr(vr),o=W.T,f=ce.p;try{ce.p=32>a?32:a,W.T=null,a=Wf,Wf=null;var m=ri,_=vr;if(Ht=0,nl=ri=null,vr=0,(Xe&6)!==0)throw Error(i(331));var T=Xe;if(Xe|=4,By(m.current),Ly(m,m.current,_,a),Xe=T,ko(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(ns,m)}catch{}return!0}finally{ce.p=f,W.T=o,iv(t,s)}}function lv(t,s,a){s=$n(a,s),s=jf(t.stateNode,s,2),t=Jr(t,s,2),t!==null&&(Pi(t,2),Bs(t))}function et(t,s,a){if(t.tag===3)lv(t,t,a);else for(;s!==null;){if(s.tag===3){lv(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(si===null||!si.has(o))){t=$n(a,t),a=oy(2),o=Jr(s,a,2),o!==null&&(cy(a,o,s,t),Pi(o,2),Bs(o));break}}s=s.return}}function nm(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new LT;var f=new Set;o.set(s,f)}else f=o.get(s),f===void 0&&(f=new Set,o.set(s,f));f.has(a)||(Qf=!0,f.add(a),t=qT.bind(null,t,s,a),s.then(t,t))}function qT(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(Le&a)===a&&(xt===4||xt===3&&(Le&62914560)===Le&&300>un()-Fu?(Xe&2)===0&&sl(t,0):Kf|=a,tl===Le&&(tl=0)),Bs(t)}function ov(t,s){s===0&&(s=$c()),t=Ji(t,s),t!==null&&(Pi(t,s),Bs(t))}function FT(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),ov(t,a)}function GT(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),ov(t,a)}function $T(t,s){return Bt(t,s)}var Ju=null,il=null,sm=!1,Wu=!1,rm=!1,ai=0;function Bs(t){t!==il&&t.next===null&&(il===null?Ju=il=t:il=il.next=t),Wu=!0,sm||(sm=!0,QT())}function ko(t,s){if(!rm&&Wu){rm=!0;do for(var a=!1,o=Ju;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var _=o.suspendedLanes,T=o.pingedLanes;m=(1<<31-Et(42|t)+1)-1,m&=f&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,hv(o,m))}else m=Le,m=Ts(o,o===lt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ss(o,m)||(a=!0,hv(o,m));o=o.next}while(a);rm=!1}}function YT(){cv()}function cv(){Wu=sm=!1;var t=0;ai!==0&&rw()&&(t=ai);for(var s=un(),a=null,o=Ju;o!==null;){var f=o.next,m=uv(o,s);m===0?(o.next=null,a===null?Ju=f:a.next=f,f===null&&(il=a)):(a=o,(t!==0||(m&3)!==0)&&(Wu=!0)),o=f}Ht!==0&&Ht!==5||ko(t),ai!==0&&(ai=0)}function uv(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-Et(m),T=1<<_,M=f[_];M===-1?((T&a)===0||(T&o)!==0)&&(f[_]=Dh(T,s)):M<=s&&(t.expiredLanes|=T),m&=~T}if(s=lt,a=Le,a=Ts(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Mr(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ss(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&Mr(o),tr(a)){case 2:case 8:a=Fl;break;case 32:a=kr;break;case 268435456:a=Bc;break;default:a=kr}return o=dv.bind(null,t),a=Bt(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&Mr(o),t.callbackPriority=2,t.callbackNode=null,2}function dv(t,s){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Xu()&&t.callbackNode!==a)return null;var o=Le;return o=Ts(t,t===lt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:($y(t,o,s),uv(t,un()),t.callbackNode!=null&&t.callbackNode===a?dv.bind(null,t):null)}function hv(t,s){if(Xu())return null;$y(t,s,!0)}function QT(){aw(function(){(Xe&6)!==0?Bt(ql,YT):cv()})}function im(){if(ai===0){var t=Fa;t===0&&(t=xs,xs<<=1,(xs&261888)===0&&(xs=256)),ai=t}return ai}function fv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function mv(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function KT(t,s,a,o,f){if(s==="submit"&&a&&a.stateNode===f){var m=fv((f[Ft]||null).action),_=o.submitter;_&&(s=(s=_[Ft]||null)?fv(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var T=new Ms("action","action",null,o,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ai!==0){var M=_?mv(f,_):new FormData(f);Sf(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(T.preventDefault(),M=_?mv(f,_):new FormData(f),Sf(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var am=0;am<Bh.length;am++){var lm=Bh[am],XT=lm.toLowerCase(),JT=lm[0].toUpperCase()+lm.slice(1);ds(XT,"on"+JT)}ds(Gg,"onAnimationEnd"),ds($g,"onAnimationIteration"),ds(Yg,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(fT,"onTransitionRun"),ds(mT,"onTransitionStart"),ds(pT,"onTransitionCancel"),ds(Qg,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function pv(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],f=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var _=o.length-1;0<=_;_--){var T=o[_],M=T.instance,Q=T.currentTarget;if(T=T.listener,M!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Q;try{m(f)}catch(te){fu(te)}f.currentTarget=null,m=M}else for(_=0;_<o.length;_++){if(T=o[_],M=T.instance,Q=T.currentTarget,T=T.listener,M!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Q;try{m(f)}catch(te){fu(te)}f.currentTarget=null,m=M}}}}function Pe(t,s){var a=s[wa];a===void 0&&(a=s[wa]=new Set);var o=t+"__bubble";a.has(o)||(gv(s,t,2,!1),a.add(o))}function om(t,s,a){var o=0;s&&(o|=4),gv(a,t,o,s)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function cm(t){if(!t[Zu]){t[Zu]=!0,Yl.forEach(function(a){a!=="selectionchange"&&(WT.has(a)||om(a,!1,t),om(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Zu]||(s[Zu]=!0,om("selectionchange",!1,s))}}function gv(t,s,a,o){switch(Gv(s)){case 2:var f=Aw;break;case 8:f=Nw;break;default:f=wm}a=f.bind(null,s,a,t),f=void 0,!qi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function um(t,s,a,o,f){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var T=o.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=o.return;_!==null;){var M=_.tag;if((M===3||M===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Ns(T),_===null)return;if(M=_.tag,M===5||M===6||M===26||M===27){o=m=_;continue e}T=T.parentNode}}o=o.return}Br(function(){var Q=m,te=Hn(a),re=[];e:{var K=Kg.get(t);if(K!==void 0){var ee=Ms,pe=t;switch(t){case"keypress":if(Gi(a)===0)break e;case"keydown":case"keyup":ee=uu;break;case"focusin":pe="focus",ee=Yi;break;case"focusout":pe="blur",ee=Yi;break;case"beforeblur":case"afterblur":ee=Yi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=v;break;case Gg:case $g:case Yg:ee=su;break;case Qg:ee=S;break;case"scroll":case"scrollend":ee=io;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=rr;break;case"toggle":case"beforetoggle":ee=De}var be=(s&4)!==0,it=!be&&(t==="scroll"||t==="scrollend"),q=be?K!==null?K+"Capture":null:K;be=[];for(var z=Q,Y;z!==null;){var ne=z;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||q===null||(ne=ls(z,q),ne!=null&&be.push(Po(z,ne,Y))),it)break;z=z.return}0<be.length&&(K=new ee(K,pe,null,a,te),re.push({event:K,listeners:be}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",K&&a!==no&&(pe=a.relatedTarget||a.fromElement)&&(Ns(pe)||pe[Ss]))break e;if((ee||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,ee?(pe=a.relatedTarget||a.toElement,ee=Q,pe=pe?Ns(pe):null,pe!==null&&(it=c(pe),be=pe.tag,pe!==it||be!==5&&be!==27&&be!==6)&&(pe=null)):(ee=null,pe=Q),ee!==pe)){if(be=ao,ne="onMouseLeave",q="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(be=rr,ne="onPointerLeave",q="onPointerEnter",z="pointer"),it=ee==null?K:Sn(ee),Y=pe==null?K:Sn(pe),K=new be(ne,z+"leave",ee,a,te),K.target=it,K.relatedTarget=Y,ne=null,Ns(te)===Q&&(be=new be(q,z+"enter",pe,a,te),be.target=Y,be.relatedTarget=it,ne=be),it=ne,ee&&pe)t:{for(be=ZT,q=ee,z=pe,Y=0,ne=q;ne;ne=be(ne))Y++;ne=0;for(var ye=z;ye;ye=be(ye))ne++;for(;0<Y-ne;)q=be(q),Y--;for(;0<ne-Y;)z=be(z),ne--;for(;Y--;){if(q===z||z!==null&&q===z.alternate){be=q;break t}q=be(q),z=be(z)}be=null}else be=null;ee!==null&&yv(re,K,ee,be,!1),pe!==null&&it!==null&&yv(re,it,pe,be,!0)}}e:{if(K=Q?Sn(Q):window,ee=K.nodeName&&K.nodeName.toLowerCase(),ee==="select"||ee==="input"&&K.type==="file")var Ye=Mg;else if(Dg(K))if(kg)Ye=uT;else{Ye=oT;var ge=lT}else ee=K.nodeName,!ee||ee.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Q&&Ra(Q.elementType)&&(Ye=Mg):Ye=cT;if(Ye&&(Ye=Ye(t,Q))){Og(re,Ye,a,te);break e}ge&&ge(t,K,Q),t==="focusout"&&Q&&K.type==="number"&&Q.memoizedProps.value!=null&&Zl(K,"number",K.value)}switch(ge=Q?Sn(Q):window,t){case"focusin":(Dg(ge)||ge.contentEditable==="true")&&(Va=ge,Lh=Q,ho=null);break;case"focusout":ho=Lh=Va=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,qg(re,a,te);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":qg(re,a,te)}var Me;if(Ke)e:{switch(t){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ka?Qi(t,a)&&(Ue="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ue="onCompositionStart");Ue&&(Ps&&a.locale!=="ko"&&(ka||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ka&&(Me=ro()):(Os=te,so="value"in Os?Os.value:Os.textContent,ka=!0)),ge=ed(Q,Ue),0<ge.length&&(Ue=new Vs(Ue,t,null,a,te),re.push({event:Ue,listeners:ge}),Me?Ue.data=Me:(Me=Ma(a),Me!==null&&(Ue.data=Me)))),(Me=Fn?sT(t,a):rT(t,a))&&(Ue=ed(Q,"onBeforeInput"),0<Ue.length&&(ge=new Vs("onBeforeInput","beforeinput",null,a,te),re.push({event:ge,listeners:Ue}),ge.data=Me)),KT(re,t,Q,a,te)}pv(re,s)})}function Po(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ed(t,s){for(var a=s+"Capture",o=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ls(t,a),f!=null&&o.unshift(Po(t,f,m)),f=ls(t,s),f!=null&&o.push(Po(t,f,m))),t.tag===3)return o;t=t.return}return[]}function ZT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function yv(t,s,a,o,f){for(var m=s._reactName,_=[];a!==null&&a!==o;){var T=a,M=T.alternate,Q=T.stateNode;if(T=T.tag,M!==null&&M===o)break;T!==5&&T!==26&&T!==27||Q===null||(M=Q,f?(Q=ls(a,m),Q!=null&&_.unshift(Po(a,Q,M))):f||(Q=ls(a,m),Q!=null&&_.push(Po(a,Q,M)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var ew=/\r\n?/g,tw=/\u0000|\uFFFD/g;function vv(t){return(typeof t=="string"?t:""+t).replace(ew,`
`).replace(tw,"")}function _v(t,s){return s=vv(s),vv(t)===s}function rt(t,s,a,o,f,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||mn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&mn(t,""+o);break;case"className":An(t,"class",o);break;case"tabIndex":An(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":An(t,a,o);break;case"style":to(t,o,m);break;case"data":if(s!=="object"){An(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Ca(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&rt(t,s,"name",f.name,f,null),rt(t,s,"formEncType",f.formEncType,f,null),rt(t,s,"formMethod",f.formMethod,f,null),rt(t,s,"formTarget",f.formTarget,f,null)):(rt(t,s,"encType",f.encType,f,null),rt(t,s,"method",f.method,f,null),rt(t,s,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Ca(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=as);break;case"onScroll":o!=null&&Pe("scroll",t);break;case"onScrollEnd":o!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Ca(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Aa(t,"popover",o);break;case"xlinkActuate":Ot(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ot(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ot(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ot(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ot(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ot(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ot(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ot(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ot(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Aa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eu.get(a)||a,Aa(t,a,o))}}function dm(t,s,a,o,f,m){switch(a){case"style":to(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof o=="string"?mn(t,o):(typeof o=="number"||typeof o=="bigint")&&mn(t,""+o);break;case"onScroll":o!=null&&Pe("scroll",t);break;case"onScrollEnd":o!=null&&Pe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=as);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ql.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=t[Ft]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,f);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Aa(t,a,o)}}}function en(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var o=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(t,s,m,_,a,null)}}f&&rt(t,s,"srcSet",a.srcSet,a,null),o&&rt(t,s,"src",a.src,a,null);return;case"input":Pe("invalid",t);var T=m=_=f=null,M=null,Q=null;for(o in a)if(a.hasOwnProperty(o)){var te=a[o];if(te!=null)switch(o){case"name":f=te;break;case"type":_=te;break;case"checked":M=te;break;case"defaultChecked":Q=te;break;case"value":m=te;break;case"defaultValue":T=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:rt(t,s,o,te,a,null)}}Jc(t,m,T,M,Q,_,f,!1);return;case"select":Pe("invalid",t),o=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":o=T;default:rt(t,s,f,T,a,null)}s=m,a=_,t.multiple=!!o,s!=null?Pr(t,!!o,s,!1):a!=null&&Pr(t,!!o,a,!0);return;case"textarea":Pe("invalid",t),m=f=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":o=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:rt(t,s,_,T,a,null)}Lr(t,o,f,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(o=a[M],o!=null))switch(M){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:rt(t,s,M,o,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(o=0;o<Vo.length;o++)Pe(Vo[o],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(o=a[Q],o!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(t,s,Q,o,a,null)}return;default:if(Ra(s)){for(te in a)a.hasOwnProperty(te)&&(o=a[te],o!==void 0&&dm(t,s,te,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&rt(t,s,T,o,a,null))}function nw(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,T=null,M=null,Q=null,te=null;for(ee in a){var re=a[ee];if(a.hasOwnProperty(ee)&&re!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":M=re;default:o.hasOwnProperty(ee)||rt(t,s,ee,null,o,re)}}for(var K in o){var ee=o[K];if(re=a[K],o.hasOwnProperty(K)&&(ee!=null||re!=null))switch(K){case"type":m=ee;break;case"name":f=ee;break;case"checked":Q=ee;break;case"defaultChecked":te=ee;break;case"value":_=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:ee!==re&&rt(t,s,K,ee,o,re)}}Na(t,_,T,M,Q,te,m,f);return;case"select":ee=_=T=K=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":ee=M;default:o.hasOwnProperty(m)||rt(t,s,m,null,o,M)}for(f in o)if(m=o[f],M=a[f],o.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==M&&rt(t,s,f,m,o,M)}s=T,a=_,o=ee,K!=null?Pr(t,!!a,K,!1):!!o!=!!a&&(s!=null?Pr(t,!!a,s,!0):Pr(t,!!a,a?[]:"",!1));return;case"textarea":ee=K=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:rt(t,s,T,null,o,f)}for(_ in o)if(f=o[_],m=a[_],o.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":K=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&rt(t,s,_,f,o,m)}Wc(t,K,ee);return;case"option":for(var pe in a)if(K=a[pe],a.hasOwnProperty(pe)&&K!=null&&!o.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:rt(t,s,pe,null,o,K)}for(M in o)if(K=o[M],ee=a[M],o.hasOwnProperty(M)&&K!==ee&&(K!=null||ee!=null))switch(M){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:rt(t,s,M,K,o,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)K=a[be],a.hasOwnProperty(be)&&K!=null&&!o.hasOwnProperty(be)&&rt(t,s,be,null,o,K);for(Q in o)if(K=o[Q],ee=a[Q],o.hasOwnProperty(Q)&&K!==ee&&(K!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:rt(t,s,Q,K,o,ee)}return;default:if(Ra(s)){for(var it in a)K=a[it],a.hasOwnProperty(it)&&K!==void 0&&!o.hasOwnProperty(it)&&dm(t,s,it,void 0,o,K);for(te in o)K=o[te],ee=a[te],!o.hasOwnProperty(te)||K===ee||K===void 0&&ee===void 0||dm(t,s,te,K,o,ee);return}}for(var q in a)K=a[q],a.hasOwnProperty(q)&&K!=null&&!o.hasOwnProperty(q)&&rt(t,s,q,null,o,K);for(re in o)K=o[re],ee=a[re],!o.hasOwnProperty(re)||K===ee||K==null&&ee==null||rt(t,s,re,K,o,ee)}function bv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var f=a[o],m=f.transferSize,_=f.initiatorType,T=f.duration;if(m&&T&&bv(_)){for(_=0,T=f.responseEnd,o+=1;o<a.length;o++){var M=a[o],Q=M.startTime;if(Q>T)break;var te=M.transferSize,re=M.initiatorType;te&&bv(re)&&(M=M.responseEnd,_+=te*(M<T?1:(T-Q)/(M-Q)))}if(--o,s+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var hm=null,fm=null;function td(t){return t.nodeType===9?t:t.ownerDocument}function xv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ev(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function mm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pm=null;function rw(){var t=window.event;return t&&t.type==="popstate"?t===pm?!1:(pm=t,!0):(pm=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,iw=typeof clearTimeout=="function"?clearTimeout:void 0,wv=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof wv<"u"?function(t){return wv.resolve(null).then(t).catch(lw)}:Tv;function lw(t){setTimeout(function(){throw t})}function li(t){return t==="head"}function Sv(t,s){var a=s,o=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(f),cl(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Lo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Lo(a);for(var m=a.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[As]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Lo(t.ownerDocument.body);a=f}while(a);cl(s)}function Av(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function gm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gm(a),Sa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function ow(t,s,a,o){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[As])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function cw(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Jn(t.nextSibling),t===null))return null;return t}function Nv(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Jn(t.nextSibling),t===null))return null;return t}function ym(t){return t.data==="$?"||t.data==="$~"}function vm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function uw(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Jn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var _m=null;function Rv(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Jn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Cv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Iv(t,s,a){switch(s=td(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Lo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Sa(t)}var Wn=new Map,jv=new Set;function nd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _r=ce.d;ce.d={f:dw,r:hw,D:fw,C:mw,L:pw,m:gw,X:vw,S:yw,M:_w};function dw(){var t=_r.f(),s=Yu();return t||s}function hw(t){var s=Bn(t);s!==null&&s.tag===5&&s.type==="form"?Q0(s):_r.r(t)}var al=typeof document>"u"?null:document;function Dv(t,s,a){var o=al;if(o&&typeof s=="string"&&s){var f=fn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),jv.has(f)||(jv.add(f),t={rel:t,crossOrigin:a,href:s},o.querySelector(f)===null&&(s=o.createElement("link"),en(s,"link",t),Dt(s),o.head.appendChild(s)))}}function fw(t){_r.D(t),Dv("dns-prefetch",t,null)}function mw(t,s){_r.C(t,s),Dv("preconnect",t,s)}function pw(t,s,a){_r.L(t,s,a);var o=al;if(o&&t&&s){var f='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(t)+'"]';var m=f;switch(s){case"style":m=ll(t);break;case"script":m=ol(t)}Wn.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Wn.set(m,t),o.querySelector(f)!==null||s==="style"&&o.querySelector(Uo(m))||s==="script"&&o.querySelector(zo(m))||(s=o.createElement("link"),en(s,"link",t),Dt(s),o.head.appendChild(s)))}}function gw(t,s){_r.m(t,s);var a=al;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+fn(o)+'"][href="'+fn(t)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ol(t)}if(!Wn.has(m)&&(t=E({rel:"modulepreload",href:t},s),Wn.set(m,t),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zo(m)))return}o=a.createElement("link"),en(o,"link",t),Dt(o),a.head.appendChild(o)}}}function yw(t,s,a){_r.S(t,s,a);var o=al;if(o&&t){var f=Rs(o).hoistableStyles,m=ll(t);s=s||"default";var _=f.get(m);if(!_){var T={loading:0,preload:null};if(_=o.querySelector(Uo(m)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Wn.get(m))&&bm(t,a);var M=_=o.createElement("link");Dt(M),en(M,"link",t),M._p=new Promise(function(Q,te){M.onload=Q,M.onerror=te}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,sd(_,s,o)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(m,_)}}}function vw(t,s){_r.X(t,s);var a=al;if(a&&t){var o=Rs(a).hoistableScripts,f=ol(t),m=o.get(f);m||(m=a.querySelector(zo(f)),m||(t=E({src:t,async:!0},s),(s=Wn.get(f))&&xm(t,s),m=a.createElement("script"),Dt(m),en(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function _w(t,s){_r.M(t,s);var a=al;if(a&&t){var o=Rs(a).hoistableScripts,f=ol(t),m=o.get(f);m||(m=a.querySelector(zo(f)),m||(t=E({src:t,async:!0,type:"module"},s),(s=Wn.get(f))&&xm(t,s),m=a.createElement("script"),Dt(m),en(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function Ov(t,s,a,o){var f=(f=Se.current)?nd(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ll(a.href),a=Rs(f).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ll(a.href);var m=Rs(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(Uo(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),m||bw(f,t,a,_.state))),s&&o===null)throw Error(i(528,""));return _}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ol(a),a=Rs(f).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ll(t){return'href="'+fn(t)+'"'}function Uo(t){return'link[rel="stylesheet"]['+t+"]"}function Mv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function bw(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),en(s,"link",a),Dt(s),t.head.appendChild(s))}function ol(t){return'[src="'+fn(t)+'"]'}function zo(t){return"script[async]"+t}function kv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+fn(a.href)+'"]');if(o)return s.instance=o,Dt(o),o;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Dt(o),en(o,"style",f),sd(o,a.precedence,t),s.instance=o;case"stylesheet":f=ll(a.href);var m=t.querySelector(Uo(f));if(m)return s.state.loading|=4,s.instance=m,Dt(m),m;o=Mv(a),(f=Wn.get(f))&&bm(o,f),m=(t.ownerDocument||t).createElement("link"),Dt(m);var _=m;return _._p=new Promise(function(T,M){_.onload=T,_.onerror=M}),en(m,"link",o),s.state.loading|=4,sd(m,a.precedence,t),s.instance=m;case"script":return m=ol(a.src),(f=t.querySelector(zo(m)))?(s.instance=f,Dt(f),f):(o=a,(f=Wn.get(m))&&(o=E({},a),xm(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Dt(f),en(f,"link",o),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,sd(o,a.precedence,t));return s.instance}function sd(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,_=0;_<o.length;_++){var T=o[_];if(T.dataset.precedence===s)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function bm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function xm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var rd=null;function Vv(t,s,a){if(rd===null){var o=new Map,f=rd=new Map;f.set(a,o)}else f=rd,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[As]||m[jt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var T=o.get(_);T?T.push(m):o.set(_,[m])}}return o}function Pv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function xw(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Lv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Ew(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=ll(o.href),m=s.querySelector(Uo(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=id.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Dt(m);return}m=s.ownerDocument||s,o=Mv(o),(f=Wn.get(f))&&bm(o,f),m=m.createElement("link"),Dt(m);var _=m;_._p=new Promise(function(T,M){_.onload=T,_.onerror=M}),en(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=id.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Em=0;function Tw(t,s){return t.stylesheets&&t.count===0&&ld(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&ld(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Em===0&&(Em=62500*sw());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ld(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Em?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function id(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function ld(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,s.forEach(ww,t),ad=null,id.call(t))}function ww(t,s){if(!(s.state.loading&4)){var a=ad.get(t);if(a)var o=a.get(null);else{a=new Map,ad.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}f=s.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||o,m===o&&a.set(null,f),a.set(_,f),this.count++,o=id.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Bo={$$typeof:U,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Sw(t,s,a,o,f,m,_,T,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ws(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.hiddenUpdates=ws(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Uv(t,s,a,o,f,m,_,T,M,Q,te,re){return t=new Sw(t,s,a,_,M,Q,te,re,T),s=1,m===!0&&(s|=24),m=Rn(3,null,null,s),t.current=m,m.stateNode=t,s=ef(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},rf(m),t}function zv(t){return t?(t=Ua,t):Ua}function Bv(t,s,a,o,f,m){f=zv(f),o.context===null?o.context=f:o.pendingContext=f,o=Xr(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=Jr(t,o,s),a!==null&&(_n(a,t,s),_o(a,t,s))}function Hv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Tm(t,s){Hv(t,s),(t=t.alternate)&&Hv(t,s)}function qv(t){if(t.tag===13||t.tag===31){var s=Ji(t,67108864);s!==null&&_n(s,t,67108864),Tm(t,67108864)}}function Fv(t){if(t.tag===13||t.tag===31){var s=On();s=Ui(s);var a=Ji(t,s);a!==null&&_n(a,t,s),Tm(t,s)}}var od=!0;function Aw(t,s,a,o){var f=W.T;W.T=null;var m=ce.p;try{ce.p=2,wm(t,s,a,o)}finally{ce.p=m,W.T=f}}function Nw(t,s,a,o){var f=W.T;W.T=null;var m=ce.p;try{ce.p=8,wm(t,s,a,o)}finally{ce.p=m,W.T=f}}function wm(t,s,a,o){if(od){var f=Sm(o);if(f===null)um(t,s,o,cd,a),$v(t,o);else if(Cw(f,t,s,a,o))o.stopPropagation();else if($v(t,o),s&4&&-1<Rw.indexOf(t)){for(;f!==null;){var m=Bn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Es(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var M=1<<31-Et(_);T.entanglements[1]|=M,_&=~M}Bs(m),(Xe&6)===0&&(Gu=un()+500,ko(0))}}break;case 31:case 13:T=Ji(m,2),T!==null&&_n(T,m,2),Yu(),Tm(m,2)}if(m=Sm(o),m===null&&um(t,s,o,cd,a),m===f)break;f=m}f!==null&&o.stopPropagation()}else um(t,s,o,null,a)}}function Sm(t){return t=Hn(t),Am(t)}var cd=null;function Am(t){if(cd=null,t=Ns(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=g(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return cd=t,null}function Gv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case ql:return 2;case Fl:return 8;case kr:case jh:return 32;case Bc:return 268435456;default:return 32}default:return 32}}var Nm=!1,oi=null,ci=null,ui=null,Ho=new Map,qo=new Map,di=[],Rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $v(t,s){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Ho.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(s.pointerId)}}function Fo(t,s,a,o,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Bn(s),s!==null&&qv(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function Cw(t,s,a,o,f){switch(s){case"focusin":return oi=Fo(oi,t,s,a,o,f),!0;case"dragenter":return ci=Fo(ci,t,s,a,o,f),!0;case"mouseover":return ui=Fo(ui,t,s,a,o,f),!0;case"pointerover":var m=f.pointerId;return Ho.set(m,Fo(Ho.get(m)||null,t,s,a,o,f)),!0;case"gotpointercapture":return m=f.pointerId,qo.set(m,Fo(qo.get(m)||null,t,s,a,o,f)),!0}return!1}function Yv(t){var s=Ns(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,rs(t.priority,function(){Fv(a)});return}}else if(s===31){if(s=g(a),s!==null){t.blockedOn=s,rs(t.priority,function(){Fv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ud(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Sm(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);no=o,a.target.dispatchEvent(o),no=null}else return s=Bn(a),s!==null&&qv(s),t.blockedOn=a,!1;s.shift()}return!0}function Qv(t,s,a){ud(t)&&a.delete(s)}function Iw(){Nm=!1,oi!==null&&ud(oi)&&(oi=null),ci!==null&&ud(ci)&&(ci=null),ui!==null&&ud(ui)&&(ui=null),Ho.forEach(Qv),qo.forEach(Qv)}function dd(t,s){t.blockedOn===s&&(t.blockedOn=null,Nm||(Nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Iw)))}var hd=null;function Kv(t){hd!==t&&(hd=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hd===t&&(hd=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],f=t[s+2];if(typeof o!="function"){if(Am(o||a)===null)continue;break}var m=Bn(a);m!==null&&(t.splice(s,3),s-=3,Sf(m,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function cl(t){function s(M){return dd(M,t)}oi!==null&&dd(oi,t),ci!==null&&dd(ci,t),ui!==null&&dd(ui,t),Ho.forEach(s),qo.forEach(s);for(var a=0;a<di.length;a++){var o=di[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<di.length&&(a=di[0],a.blockedOn===null);)Yv(a),a.blockedOn===null&&di.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],m=a[o+1],_=f[Ft]||null;if(typeof m=="function")_||Kv(a);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Ft]||null)T=_.formAction;else if(Am(f)!==null)continue}else T=_.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),Kv(a)}}}function Xv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Rm(t){this._internalRoot=t}fd.prototype.render=Rm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,o=On();Bv(a,o,t,s,null,null)},fd.prototype.unmount=Rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Bv(t.current,2,null,t,null,null),Yu(),s[Ss]=null}};function fd(t){this._internalRoot=t}fd.prototype.unstable_scheduleHydration=function(t){if(t){var s=Yc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<di.length&&s!==0&&s<di[a].priority;a++);di.splice(a,0,t),a===0&&Yv(t)}};var Jv=e.version;if(Jv!=="19.2.3")throw Error(i(527,Jv,"19.2.3"));ce.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var jw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{ns=md.inject(jw),Kt=md}catch{}}return $o.createRoot=function(t,s){if(!l(t))throw Error(i(299));var a=!1,o="",f=ry,m=iy,_=ay;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Uv(t,1,!1,null,null,a,o,null,f,m,_,Xv),t[Ss]=s.current,cm(t),new Rm(s)},$o.hydrateRoot=function(t,s,a){if(!l(t))throw Error(i(299));var o=!1,f="",m=ry,_=iy,T=ay,M=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),s=Uv(t,1,!0,s,a??null,o,f,M,m,_,T,Xv),s.context=zv(null),a=s.current,o=On(),o=Ui(o),f=Xr(o),f.callback=null,Jr(a,f,o),a=o,s.current.lanes=a,Pi(s,a),Bs(s),t[Ss]=s.current,cm(t),new fd(s)},$o.version="19.2.3",$o}var l_;function Hw(){if(l_)return jm.exports;l_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jm.exports=Bw(),jm.exports}var qw=Hw();const Fw=Wb(qw);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var o_="popstate";function Gw(r={}){function e(l,c){let{pathname:d="/",search:g="",hash:p=""}=_a(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Jm("",{pathname:d,search:g,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(l,c){let d=l.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let p=l.location.href,y=p.indexOf("#");g=y===-1?p:p.slice(0,y)}return g+"#"+(typeof c=="string"?c:oc(c))}function i(l,c){Vn(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return Yw(e,n,i,r)}function gt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $w(){return Math.random().toString(36).substring(2,10)}function c_(r,e){return{usr:r.state,key:r.key,idx:e}}function Jm(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?_a(e):e,state:n,key:e&&e.key||i||$w()}}function oc({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function _a(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function Yw(r,e,n,i={}){let{window:l=document.defaultView,v5Compat:c=!1}=i,d=l.history,g="POP",p=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function E(){g="POP";let P=b(),H=P==null?null:P-y;y=P,p&&p({action:g,location:B.location,delta:H})}function w(P,H){g="PUSH";let J=Jm(B.location,P,H);n&&n(J,P),y=b()+1;let U=c_(J,y),$=B.createHref(J);try{d.pushState(U,"",$)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;l.location.assign($)}c&&p&&p({action:g,location:B.location,delta:1})}function j(P,H){g="REPLACE";let J=Jm(B.location,P,H);n&&n(J,P),y=b();let U=c_(J,y),$=B.createHref(J);d.replaceState(U,"",$),c&&p&&p({action:g,location:B.location,delta:0})}function L(P){return Qw(P)}let B={get action(){return g},get location(){return r(l,d)},listen(P){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(o_,E),p=P,()=>{l.removeEventListener(o_,E),p=null}},createHref(P){return e(l,P)},createURL:L,encodeLocation(P){let H=L(P);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:w,replace:j,go(P){return d.go(P)}};return B}function Qw(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:oc(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Zb(r,e,n="/"){return Kw(r,e,n,!1)}function Kw(r,e,n,i){let l=typeof e=="string"?_a(e):e,c=Sr(l.pathname||"/",n);if(c==null)return null;let d=ex(r);Xw(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=lS(c);g=iS(d[p],y,i)}return g}function ex(r,e=[],n=[],i="",l=!1){let c=(d,g,p=l,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&p)return;gt(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let E=Er([i,b.relativePath]),w=n.concat(b);d.children&&d.children.length>0&&(gt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),ex(d.children,e,w,E,p)),!(d.path==null&&!d.index)&&e.push({path:E,score:sS(E,d.index),routesMeta:w})};return r.forEach((d,g)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))c(d,g);else for(let y of tx(d.path))c(d,g,!0,y)}),e}function tx(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let d=tx(i.join("/")),g=[];return g.push(...d.map(p=>p===""?c:[c,p].join("/"))),l&&g.push(...d),g.map(p=>r.startsWith("/")&&p===""?"/":p)}function Xw(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:rS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Jw=/^:[\w-]+$/,Ww=3,Zw=2,eS=1,tS=10,nS=-2,u_=r=>r==="*";function sS(r,e){let n=r.split("/"),i=n.length;return n.some(u_)&&(i+=nS),e&&(i+=Zw),n.filter(l=>!u_(l)).reduce((l,c)=>l+(Jw.test(c)?Ww:c===""?eS:tS),i)}function rS(r,e){return r.length===e.length&&r.slice(0,-1).every((i,l)=>i===e[l])?r[r.length-1]-e[e.length-1]:0}function iS(r,e,n=!1){let{routesMeta:i}=r,l={},c="/",d=[];for(let g=0;g<i.length;++g){let p=i[g],y=g===i.length-1,b=c==="/"?e:e.slice(c.length)||"/",E=kd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},b),w=p.route;if(!E&&y&&n&&!i[i.length-1].route.index&&(E=kd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!E)return null;Object.assign(l,E.params),d.push({params:l,pathname:Er([c,E.pathname]),pathnameBase:dS(Er([c,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(c=Er([c,E.pathnameBase]))}return d}function kd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=aS(r.path,r.caseSensitive,r.end),l=e.match(n);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),g=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:E},w)=>{if(b==="*"){let L=g[w]||"";d=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const j=g[w];return E&&!j?y[b]=void 0:y[b]=(j||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function aS(r,e=!1,n=!0){Vn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(i.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function lS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Sr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}var nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oS=r=>nx.test(r);function cS(r,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof r=="string"?_a(r):r,c;if(n)if(oS(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Vn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?c=d_(n.substring(1),"/"):c=d_(n,e)}else c=e;return{pathname:c,search:hS(i),hash:fS(l)}}function d_(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function km(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uS(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rp(r){let e=uS(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Cp(r,e,n,i=!1){let l;typeof r=="string"?l=_a(r):(l={...r},gt(!l.pathname||!l.pathname.includes("?"),km("?","pathname","search",l)),gt(!l.pathname||!l.pathname.includes("#"),km("#","pathname","hash",l)),gt(!l.search||!l.search.includes("#"),km("#","search","hash",l)));let c=r===""||l.pathname==="",d=c?"/":l.pathname,g;if(d==null)g=n;else{let E=e.length-1;if(!i&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),E-=1;l.pathname=w.join("/")}g=E>=0?e[E]:"/"}let p=cS(l,g),y=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||b)&&(p.pathname+="/"),p}var Er=r=>r.join("/").replace(/\/\/+/g,"/"),dS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),hS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,fS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,mS=class{constructor(r,e,n,i=!1){this.status=r,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function pS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function gS(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rx(r,e){let n=r;if(typeof n!="string"||!nx.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(sx)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),g=Sr(d.pathname,e);d.origin===c.origin&&g!=null?n=g+d.search+d.hash:l=!0}catch{Vn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ix=["POST","PUT","PATCH","DELETE"];new Set(ix);var yS=["GET",...ix];new Set(yS);var Cl=D.createContext(null);Cl.displayName="DataRouter";var ih=D.createContext(null);ih.displayName="DataRouterState";var vS=D.createContext(!1),ax=D.createContext({isTransitioning:!1});ax.displayName="ViewTransition";var _S=D.createContext(new Map);_S.displayName="Fetchers";var bS=D.createContext(null);bS.displayName="Await";var Pn=D.createContext(null);Pn.displayName="Navigation";var Sc=D.createContext(null);Sc.displayName="Location";var Zs=D.createContext({outlet:null,matches:[],isDataRoute:!1});Zs.displayName="Route";var Ip=D.createContext(null);Ip.displayName="RouteError";var lx="REACT_ROUTER_ERROR",xS="REDIRECT",ES="ROUTE_ERROR_RESPONSE";function TS(r){if(r.startsWith(`${lx}:${xS}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function wS(r){if(r.startsWith(`${lx}:${ES}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new mS(e.status,e.statusText,e.data)}catch{}}function SS(r,{relative:e}={}){gt(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(Pn),{hash:l,pathname:c,search:d}=Ac(r,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:Er([n,c])),i.createHref({pathname:g,search:d,hash:l})}function Il(){return D.useContext(Sc)!=null}function Ir(){return gt(Il(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Sc).location}var ox="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cx(r){D.useContext(Pn).static||D.useLayoutEffect(r)}function ah(){let{isDataRoute:r}=D.useContext(Zs);return r?LS():AS()}function AS(){gt(Il(),"useNavigate() may be used only in the context of a <Router> component.");let r=D.useContext(Cl),{basename:e,navigator:n}=D.useContext(Pn),{matches:i}=D.useContext(Zs),{pathname:l}=Ir(),c=JSON.stringify(Rp(i)),d=D.useRef(!1);return cx(()=>{d.current=!0}),D.useCallback((p,y={})=>{if(Vn(d.current,ox),!d.current)return;if(typeof p=="number"){n.go(p);return}let b=Cp(p,JSON.parse(c),l,y.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Er([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,l,r])}D.createContext(null);function Ac(r,{relative:e}={}){let{matches:n}=D.useContext(Zs),{pathname:i}=Ir(),l=JSON.stringify(Rp(n));return D.useMemo(()=>Cp(r,JSON.parse(l),i,e==="path"),[r,l,i,e])}function NS(r,e){return ux(r,e)}function ux(r,e,n,i,l){var J;gt(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=D.useContext(Pn),{matches:d}=D.useContext(Zs),g=d[d.length-1],p=g?g.params:{},y=g?g.pathname:"/",b=g?g.pathnameBase:"/",E=g&&g.route;{let U=E&&E.path||"";hx(y,!E||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let w=Ir(),j;if(e){let U=typeof e=="string"?_a(e):e;gt(b==="/"||((J=U.pathname)==null?void 0:J.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${U.pathname}" was given in the \`location\` prop.`),j=U}else j=w;let L=j.pathname||"/",B=L;if(b!=="/"){let U=b.replace(/^\//,"").split("/");B="/"+L.replace(/^\//,"").split("/").slice(U.length).join("/")}let P=Zb(r,{pathname:B});Vn(E||P!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Vn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=DS(P&&P.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:Er([b,c.encodeLocation?c.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?b:Er([b,c.encodeLocation?c.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),d,n,i,l);return e&&H?D.createElement(Sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},H):H}function RS(){let r=PS(),e=pS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:c},"ErrorBoundary")," or"," ",D.createElement("code",{style:c},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:l},n):null,d)}var CS=D.createElement(RS,null),dx=class extends D.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=wS(r.digest);n&&(r=n)}let e=r!==void 0?D.createElement(Zs.Provider,{value:this.props.routeContext},D.createElement(Ip.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?D.createElement(IS,{error:r},e):e}};dx.contextType=vS;var Vm=new WeakMap;function IS({children:r,error:e}){let{basename:n}=D.useContext(Pn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=TS(e.digest);if(i){let l=Vm.get(e);if(l)throw l;let c=rx(i.location,n);if(sx&&!Vm.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw Vm.set(e,d),d}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return r}function jS({routeContext:r,match:e,children:n}){let i=D.useContext(Cl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Zs.Provider,{value:r},n)}function DS(r,e=[],n=null,i=null,l=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let c=r,d=n==null?void 0:n.errors;if(d!=null){let b=c.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);gt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let g=!1,p=-1;if(n)for(let b=0;b<c.length;b++){let E=c[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=b),E.route.id){let{loaderData:w,errors:j}=n,L=E.route.loader&&!w.hasOwnProperty(E.route.id)&&(!j||j[E.route.id]===void 0);if(E.route.lazy||L){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let y=n&&i?(b,E)=>{var w,j;i(b,{location:n.location,params:((j=(w=n.matches)==null?void 0:w[0])==null?void 0:j.params)??{},unstable_pattern:gS(n.matches),errorInfo:E})}:void 0;return c.reduceRight((b,E,w)=>{let j,L=!1,B=null,P=null;n&&(j=d&&E.route.id?d[E.route.id]:void 0,B=E.route.errorElement||CS,g&&(p<0&&w===0?(hx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,P=null):p===w&&(L=!0,P=E.route.hydrateFallbackElement||null)));let H=e.concat(c.slice(0,w+1)),J=()=>{let U;return j?U=B:L?U=P:E.route.Component?U=D.createElement(E.route.Component,null):E.route.element?U=E.route.element:U=b,D.createElement(jS,{match:E,routeContext:{outlet:b,matches:H,isDataRoute:n!=null},children:U})};return n&&(E.route.ErrorBoundary||E.route.errorElement||w===0)?D.createElement(dx,{location:n.location,revalidation:n.revalidation,component:B,error:j,children:J(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:y}):J()},null)}function jp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OS(r){let e=D.useContext(Cl);return gt(e,jp(r)),e}function MS(r){let e=D.useContext(ih);return gt(e,jp(r)),e}function kS(r){let e=D.useContext(Zs);return gt(e,jp(r)),e}function Dp(r){let e=kS(r),n=e.matches[e.matches.length-1];return gt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function VS(){return Dp("useRouteId")}function PS(){var i;let r=D.useContext(Ip),e=MS("useRouteError"),n=Dp("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[n]}function LS(){let{router:r}=OS("useNavigate"),e=Dp("useNavigate"),n=D.useRef(!1);return cx(()=>{n.current=!0}),D.useCallback(async(l,c={})=>{Vn(n.current,ox),n.current&&(typeof l=="number"?await r.navigate(l):await r.navigate(l,{fromRouteId:e,...c}))},[r,e])}var h_={};function hx(r,e,n){!e&&!h_[r]&&(h_[r]=!0,Vn(!1,n))}D.memo(US);function US({routes:r,future:e,state:n,onError:i}){return ux(r,void 0,n,i,e)}function Wm({to:r,replace:e,state:n,relative:i}){gt(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=D.useContext(Pn);Vn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=D.useContext(Zs),{pathname:d}=Ir(),g=ah(),p=Cp(r,Rp(c),d,i==="path"),y=JSON.stringify(p);return D.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:i})},[g,y,i,e,n]),null}function Zn(r){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zS({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:c=!1,unstable_useTransitions:d}){gt(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=r.replace(/^\/*/,"/"),p=D.useMemo(()=>({basename:g,navigator:l,static:c,unstable_useTransitions:d,future:{}}),[g,l,c,d]);typeof n=="string"&&(n=_a(n));let{pathname:y="/",search:b="",hash:E="",state:w=null,key:j="default"}=n,L=D.useMemo(()=>{let B=Sr(y,g);return B==null?null:{location:{pathname:B,search:b,hash:E,state:w,key:j},navigationType:i}},[g,y,b,E,w,j,i]);return Vn(L!=null,`<Router basename="${g}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:D.createElement(Pn.Provider,{value:p},D.createElement(Sc.Provider,{children:e,value:L}))}function BS({children:r,location:e}){return NS(Zm(r),e)}function Zm(r,e=[]){let n=[];return D.Children.forEach(r,(i,l)=>{if(!D.isValidElement(i))return;let c=[...e,l];if(i.type===D.Fragment){n.push.apply(n,Zm(i.props.children,c));return}gt(i.type===Zn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Zm(i.props.children,c)),n.push(d)}),n}var Td="get",wd="application/x-www-form-urlencoded";function lh(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function HS(r){return lh(r)&&r.tagName.toLowerCase()==="button"}function qS(r){return lh(r)&&r.tagName.toLowerCase()==="form"}function FS(r){return lh(r)&&r.tagName.toLowerCase()==="input"}function GS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function $S(r,e){return r.button===0&&(!e||e==="_self")&&!GS(r)}var pd=null;function YS(){if(pd===null)try{new FormData(document.createElement("form"),0),pd=!1}catch{pd=!0}return pd}var QS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pm(r){return r!=null&&!QS.has(r)?(Vn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wd}"`),null):r}function KS(r,e){let n,i,l,c,d;if(qS(r)){let g=r.getAttribute("action");i=g?Sr(g,e):null,n=r.getAttribute("method")||Td,l=Pm(r.getAttribute("enctype"))||wd,c=new FormData(r)}else if(HS(r)||FS(r)&&(r.type==="submit"||r.type==="image")){let g=r.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||g.getAttribute("action");if(i=p?Sr(p,e):null,n=r.getAttribute("formmethod")||g.getAttribute("method")||Td,l=Pm(r.getAttribute("formenctype"))||Pm(g.getAttribute("enctype"))||wd,c=new FormData(g,r),!YS()){let{name:y,type:b,value:E}=r;if(b==="image"){let w=y?`${y}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else y&&c.append(y,E)}}else{if(lh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Td,i=null,l=wd,d=r}return c&&l==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Op(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function XS(r,e,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Sr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function JS(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function ZS(r,e,n){let i=await Promise.all(r.map(async l=>{let c=e.routes[l.route.id];if(c){let d=await JS(c,n);return d.links?d.links():[]}return[]}));return sA(i.flat(1).filter(WS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function f_(r,e,n,i,l,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>{var b;return n[y].pathname!==p.pathname||((b=n[y].route.path)==null?void 0:b.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return c==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{var E;let b=i.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function eA(r,e,{includeHydrateFallback:n}={}){return tA(r.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function tA(r){return[...new Set(r)]}function nA(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function sA(r,e){let n=new Set;return new Set(e),r.reduce((i,l)=>{let c=JSON.stringify(nA(l));return n.has(c)||(n.add(c),i.push({key:c,link:l})),i},[])}function fx(){let r=D.useContext(Cl);return Op(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function rA(){let r=D.useContext(ih);return Op(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Mp=D.createContext(void 0);Mp.displayName="FrameworkContext";function mx(){let r=D.useContext(Mp);return Op(r,"You must render this element inside a <HydratedRouter> element"),r}function iA(r,e){let n=D.useContext(Mp),[i,l]=D.useState(!1),[c,d]=D.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:b,onTouchStart:E}=e,w=D.useRef(null);D.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let B=H=>{H.forEach(J=>{d(J.isIntersecting)})},P=new IntersectionObserver(B,{threshold:.5});return w.current&&P.observe(w.current),()=>{P.disconnect()}}},[r]),D.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let j=()=>{l(!0)},L=()=>{l(!1),d(!1)};return n?r!=="intent"?[c,w,{}]:[c,w,{onFocus:Yo(g,j),onBlur:Yo(p,L),onMouseEnter:Yo(y,j),onMouseLeave:Yo(b,L),onTouchStart:Yo(E,j)}]:[!1,w,{}]}function Yo(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function aA({page:r,...e}){let{router:n}=fx(),i=D.useMemo(()=>Zb(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?D.createElement(oA,{page:r,matches:i,...e}):null}function lA(r){let{manifest:e,routeModules:n}=mx(),[i,l]=D.useState([]);return D.useEffect(()=>{let c=!1;return ZS(r,e,n).then(d=>{c||l(d)}),()=>{c=!0}},[r,e,n]),i}function oA({page:r,matches:e,...n}){let i=Ir(),{manifest:l,routeModules:c}=mx(),{basename:d}=fx(),{loaderData:g,matches:p}=rA(),y=D.useMemo(()=>f_(r,e,p,l,i,"data"),[r,e,p,l,i]),b=D.useMemo(()=>f_(r,e,p,l,i,"assets"),[r,e,p,l,i]),E=D.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let L=new Set,B=!1;if(e.forEach(H=>{var U;let J=l.routes[H.route.id];!J||!J.hasLoader||(!y.some($=>$.route.id===H.route.id)&&H.route.id in g&&((U=c[H.route.id])!=null&&U.shouldRevalidate)||J.hasClientLoader?B=!0:L.add(H.route.id))}),L.size===0)return[];let P=XS(r,d,"data");return B&&L.size>0&&P.searchParams.set("_routes",e.filter(H=>L.has(H.route.id)).map(H=>H.route.id).join(",")),[P.pathname+P.search]},[d,g,i,l,y,e,r,c]),w=D.useMemo(()=>eA(b,l),[b,l]),j=lA(b);return D.createElement(D.Fragment,null,E.map(L=>D.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),w.map(L=>D.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),j.map(({key:L,link:B})=>D.createElement("link",{key:L,nonce:n.nonce,...B})))}function cA(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uA&&(window.__reactRouterVersion="7.11.0")}catch{}function dA({basename:r,children:e,unstable_useTransitions:n,window:i}){let l=D.useRef();l.current==null&&(l.current=Gw({window:i,v5Compat:!0}));let c=l.current,[d,g]=D.useState({action:c.action,location:c.location}),p=D.useCallback(y=>{n===!1?g(y):D.startTransition(()=>g(y))},[n]);return D.useLayoutEffect(()=>c.listen(p),[c,p]),D.createElement(zS,{basename:r,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fs=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:c,replace:d,state:g,target:p,to:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:w,...j},L){let{basename:B,unstable_useTransitions:P}=D.useContext(Pn),H=typeof y=="string"&&px.test(y),J=rx(y,B);y=J.to;let U=SS(y,{relative:l}),[$,F,oe]=iA(i,j),R=pA(y,{replace:d,state:g,target:p,preventScrollReset:b,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:w,unstable_useTransitions:P});function N(O){e&&e(O),O.defaultPrevented||R(O)}let C=D.createElement("a",{...j,...oe,href:J.absoluteURL||U,onClick:J.isExternal||c?e:N,ref:cA(L,F),target:p,"data-discover":!H&&n==="render"?"true":void 0});return $&&!H?D.createElement(D.Fragment,null,C,D.createElement(aA,{page:U})):C});Fs.displayName="Link";var hA=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:c,to:d,viewTransition:g,children:p,...y},b){let E=Ac(d,{relative:y.relative}),w=Ir(),j=D.useContext(ih),{navigator:L,basename:B}=D.useContext(Pn),P=j!=null&&bA(E)&&g===!0,H=L.encodeLocation?L.encodeLocation(E).pathname:E.pathname,J=w.pathname,U=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(J=J.toLowerCase(),U=U?U.toLowerCase():null,H=H.toLowerCase()),U&&B&&(U=Sr(U,B)||U);const $=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let F=J===H||!l&&J.startsWith(H)&&J.charAt($)==="/",oe=U!=null&&(U===H||!l&&U.startsWith(H)&&U.charAt(H.length)==="/"),R={isActive:F,isPending:oe,isTransitioning:P},N=F?e:void 0,C;typeof i=="function"?C=i(R):C=[i,F?"active":null,oe?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(R):c;return D.createElement(Fs,{...y,"aria-current":N,className:C,ref:b,style:O,to:d,viewTransition:g},typeof p=="function"?p(R):p)});hA.displayName="NavLink";var fA=D.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:c,method:d=Td,action:g,onSubmit:p,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:w,...j},L)=>{let{unstable_useTransitions:B}=D.useContext(Pn),P=vA(),H=_A(g,{relative:y}),J=d.toLowerCase()==="get"?"get":"post",U=typeof g=="string"&&px.test(g),$=F=>{if(p&&p(F),F.defaultPrevented)return;F.preventDefault();let oe=F.nativeEvent.submitter,R=(oe==null?void 0:oe.getAttribute("formmethod"))||d,N=()=>P(oe||F.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:l,state:c,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:w});B&&n!==!1?D.startTransition(()=>N()):N()};return D.createElement("form",{ref:L,method:J,action:H,onSubmit:i?p:$,...j,"data-discover":!U&&r==="render"?"true":void 0})});fA.displayName="Form";function mA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gx(r){let e=D.useContext(Cl);return gt(e,mA(r)),e}function pA(r,{target:e,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:g,unstable_useTransitions:p}={}){let y=ah(),b=Ir(),E=Ac(r,{relative:c});return D.useCallback(w=>{if($S(w,e)){w.preventDefault();let j=n!==void 0?n:oc(b)===oc(E),L=()=>y(r,{replace:j,state:i,preventScrollReset:l,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:g});p?D.startTransition(()=>L()):L()}},[b,y,E,n,i,e,r,l,c,d,g,p])}var gA=0,yA=()=>`__${String(++gA)}__`;function vA(){let{router:r}=gx("useSubmit"),{basename:e}=D.useContext(Pn),n=VS(),i=r.fetch,l=r.navigate;return D.useCallback(async(c,d={})=>{let{action:g,method:p,encType:y,formData:b,body:E}=KS(c,e);if(d.navigate===!1){let w=d.fetcherKey||yA();await i(w,n,d.action||g,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:E,formMethod:d.method||p,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||g,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:E,formMethod:d.method||p,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,n])}function _A(r,{relative:e}={}){let{basename:n}=D.useContext(Pn),i=D.useContext(Zs);gt(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),c={...Ac(r||".",{relative:e})},d=Ir();if(r==null){c.search=d.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(b=>b==="")){g.delete("index"),p.filter(E=>E).forEach(E=>g.append("index",E));let b=g.toString();c.search=b?`?${b}`:""}}return(!r||r===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Er([n,c.pathname])),oc(c)}function bA(r,{relative:e}={}){let n=D.useContext(ax);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=gx("useViewTransitionState"),l=Ac(r,{relative:e});if(!n.isTransitioning)return!1;let c=Sr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=Sr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return kd(l.pathname,d)!=null||kd(l.pathname,c)!=null}var At=(r=>(r.ADMIN="ADMIN",r.TEACHER="TEACHER",r))(At||{});const xA=()=>{};var m_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let l=r.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},EA=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const l=r[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];e[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},vx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,b=c>>2,E=(c&3)<<4|g>>4;let w=(g&15)<<2|y>>6,j=y&63;p||(j=64,d||(w=64)),i.push(n[b],n[E],n[w],n[j])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):EA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const E=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||E==null)throw new TA;const w=c<<2|g>>4;if(i.push(w),y!==64){const j=g<<4&240|y>>2;if(i.push(j),E!==64){const L=y<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class TA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wA=function(r){const e=yx(r);return vx.encodeByteArray(e,!0)},Vd=function(r){return wA(r).replace(/\./g,"")},_x=function(r){try{return vx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=()=>SA().__FIREBASE_DEFAULTS__,NA=()=>{if(typeof process>"u"||typeof m_>"u")return;const r=m_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},RA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_x(r[1]);return e&&JSON.parse(e)},oh=()=>{try{return xA()||AA()||NA()||RA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bx=r=>{var e,n;return(n=(e=oh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},CA=r=>{const e=bx(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},xx=()=>{var r;return(r=oh())==null?void 0:r.config},Ex=r=>{var e;return(e=oh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tx(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Vd(JSON.stringify(n)),Vd(JSON.stringify(d)),""].join(".")}const nc={};function DA(){const r={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?r.emulator.push(e):r.prod.push(e);return r}function OA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let p_=!1;function wx(r,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||nc[r]===e||nc[r]||p_)return;nc[r]=e;function n(w){return`__firebase__banner__${w}`}const i="__firebase__banner",c=DA().prod.length>0;function d(){const w=document.getElementById(i);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,j){w.setAttribute("width","24"),w.setAttribute("id",j),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{p_=!0,d()},w}function b(w,j){w.setAttribute("id",j),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=OA(i),j=n("text"),L=document.getElementById(j)||document.createElement("span"),B=n("learnmore"),P=document.getElementById(B)||document.createElement("a"),H=n("preprendIcon"),J=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const U=w.element;g(U),b(P,B);const $=y();p(J,H),U.append(J,L,P,$),document.body.appendChild(U)}c?(L.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function kA(){var e;const r=(e=oh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function zA(){return!kA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BA(){try{return typeof indexedDB=="object"}catch{return!1}}function HA(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class jr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=qA,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?FA(c,i):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new jr(l,g,i)}}function FA(r,e){return r.replace(GA,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const GA=/\{\$([^}]+)}/g;function $A(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ma(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const c=r[l],d=e[l];if(g_(c)&&g_(d)){if(!ma(c,d))return!1}else if(c!==d)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function g_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ko(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,c]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Xo(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function YA(r,e){const n=new QA(r,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KA(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=Lm),l.error===void 0&&(l.error=Lm),l.complete===void 0&&(l.complete=Lm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r){return r&&r._delegate?r._delegate:r}let Pd=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new IA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WA(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&d.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JA(r){return r===da?void 0:r}function WA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ht||(ht={}));const eN={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},tN=ht.INFO,nN={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},sN=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),l=nN[e];if(l)console[l](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let rN=class{constructor(e){this.name=e,this._logLevel=tN,this._logHandler=sN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}};const iN=(r,e)=>e.some(n=>r instanceof n);let y_,v_;function aN(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lN(){return v_||(v_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sx=new WeakMap,ep=new WeakMap,Ax=new WeakMap,Um=new WeakMap,kp=new WeakMap;function oN(r){const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(_i(r.result)),l()},d=()=>{i(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Sx.set(n,r)}).catch(()=>{}),kp.set(e,r),e}function cN(r){if(ep.has(r))return;const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});ep.set(r,e)}let tp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return ep.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ax.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function uN(r){tp=r(tp)}function dN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(zm(this),e,...n);return Ax.set(i,e.sort?e.sort():[e]),_i(i)}:lN().includes(r)?function(...e){return r.apply(zm(this),e),_i(Sx.get(this))}:function(...e){return _i(r.apply(zm(this),e))}}function hN(r){return typeof r=="function"?dN(r):(r instanceof IDBTransaction&&cN(r),iN(r,aN())?new Proxy(r,tp):r)}function _i(r){if(r instanceof IDBRequest)return oN(r);if(Um.has(r))return Um.get(r);const e=hN(r);return e!==r&&(Um.set(r,e),kp.set(e,r)),e}const zm=r=>kp.get(r);function fN(r,e,{blocked:n,upgrade:i,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),g=_i(d);return i&&d.addEventListener("upgradeneeded",p=>{i(_i(d.result),p.oldVersion,p.newVersion,_i(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const mN=["get","getKey","getAll","getAllKeys","count"],pN=["put","add","delete","clear"],Bm=new Map;function __(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Bm.get(e))return Bm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=pN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||mN.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return Bm.set(e,c),c}uN(r=>({...r,get:(e,n,i)=>__(e,n)||r.get(e,n,i),has:(e,n)=>!!__(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function yN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",b_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new rN("@firebase/app"),vN="@firebase/app-compat",_N="@firebase/analytics-compat",bN="@firebase/analytics",xN="@firebase/app-check-compat",EN="@firebase/app-check",TN="@firebase/auth",wN="@firebase/auth-compat",SN="@firebase/database",AN="@firebase/data-connect",NN="@firebase/database-compat",RN="@firebase/functions",CN="@firebase/functions-compat",IN="@firebase/installations",jN="@firebase/installations-compat",DN="@firebase/messaging",ON="@firebase/messaging-compat",MN="@firebase/performance",kN="@firebase/performance-compat",VN="@firebase/remote-config",PN="@firebase/remote-config-compat",LN="@firebase/storage",UN="@firebase/storage-compat",zN="@firebase/firestore",BN="@firebase/ai",HN="@firebase/firestore-compat",qN="firebase",FN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",GN={[np]:"fire-core",[vN]:"fire-core-compat",[bN]:"fire-analytics",[_N]:"fire-analytics-compat",[EN]:"fire-app-check",[xN]:"fire-app-check-compat",[TN]:"fire-auth",[wN]:"fire-auth-compat",[SN]:"fire-rtdb",[AN]:"fire-data-connect",[NN]:"fire-rtdb-compat",[RN]:"fire-fn",[CN]:"fire-fn-compat",[IN]:"fire-iid",[jN]:"fire-iid-compat",[DN]:"fire-fcm",[ON]:"fire-fcm-compat",[MN]:"fire-perf",[kN]:"fire-perf-compat",[VN]:"fire-rc",[PN]:"fire-rc-compat",[LN]:"fire-gcs",[UN]:"fire-gcs-compat",[zN]:"fire-fst",[HN]:"fire-fst-compat",[BN]:"fire-vertex","fire-js":"fire-js",[qN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Map,rp=new Map,ip=new Map;function x_(r,e){try{r.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function El(r){const e=r.name;if(ip.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,r);for(const n of xl.values())x_(n,r);for(const n of rp.values())x_(n,r);return!0}function Vp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function es(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new Nc("app","Firebase",$N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=FN;function Pp(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:sp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw bi.create("bad-app-name",{appName:String(l)});if(n||(n=xx()),!n)throw bi.create("no-options");const c=xl.get(l);if(c){if(ma(n,c.options)&&ma(i,c.config))return c;throw bi.create("duplicate-app",{appName:l})}const d=new ZA(l);for(const p of ip.values())d.addComponent(p);const g=new YN(n,i,d);return xl.set(l,g),g}function Nx(r=sp){const e=xl.get(r);if(!e&&r===sp&&xx())return Pp();if(!e)throw bi.create("no-app",{appName:r});return e}async function QN(r){let e=!1;const n=r.name;xl.has(n)?(e=!0,xl.delete(n)):rp.has(n)&&r.decRefCount()<=0&&(rp.delete(n),e=!0),e&&(await Promise.all(r.container.getProviders().map(i=>i.delete())),r.isDeleted=!0)}function xi(r,e,n){let i=GN[r]??r;n&&(i+=`-${n}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(d.join(" "));return}El(new Pd(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="firebase-heartbeat-database",XN=1,cc="firebase-heartbeat-store";let Hm=null;function Rx(){return Hm||(Hm=fN(KN,XN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(r=>{throw bi.create("idb-open",{originalErrorMessage:r.message})})),Hm}async function JN(r){try{const n=(await Rx()).transaction(cc),i=await n.objectStore(cc).get(Cx(r));return await n.done,i}catch(e){if(e instanceof jr)Ar.warn(e.message);else{const n=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(n.message)}}}async function E_(r,e){try{const i=(await Rx()).transaction(cc,"readwrite");await i.objectStore(cc).put(e,Cx(r)),await i.done}catch(n){if(n instanceof jr)Ar.warn(n.message);else{const i=bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ar.warn(i.message)}}}function Cx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1024,ZN=30;class e2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new n2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=T_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>ZN){const d=s2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ar.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=T_(),{heartbeatsToSend:i,unsentEntries:l}=t2(this._heartbeatsCache.heartbeats),c=Vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ar.warn(n),""}}}function T_(){return new Date().toISOString().substring(0,10)}function t2(r,e=WN){const n=[];let i=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),w_(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),w_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class n2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BA()?HA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function w_(r){return Vd(JSON.stringify({version:2,heartbeats:r})).length}function s2(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(r){El(new Pd("platform-logger",e=>new gN(e),"PRIVATE")),El(new Pd("heartbeat",e=>new e2(e),"PRIVATE")),xi(np,b_,r),xi(np,b_,"esm2020"),xi("fire-js","")}r2("");var i2="firebase",a2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(i2,a2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ot||(ot={}));const l2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},o2=ot.INFO,c2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},u2=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),l=c2[e];if(l)console[l](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let d2=class{constructor(e){this.name=e,this._logLevel=o2,this._logHandler=u2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}},S_=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h2=Ix,jx=new Nc("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new d2("@firebase/auth");function f2(r,...e){Ld.logLevel<=ot.WARN&&Ld.warn(`Auth (${Dl}): ${r}`,...e)}function Sd(r,...e){Ld.logLevel<=ot.ERROR&&Ld.error(`Auth (${Dl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(r,...e){throw Lp(r,...e)}function Gs(r,...e){return Lp(r,...e)}function Dx(r,e,n){const i={...h2(),[e]:n};return new Nc("auth","Firebase",i).create(e,{appName:r.name})}function Tr(r){return Dx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lp(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return jx.create(r,...e)}function Te(r,e,...n){if(!r)throw Lp(e,...n)}function br(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Sd(e),new Error(e)}function Nr(r,e){r||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function m2(){return A_()==="http:"||A_()==="https:"}function A_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m2()||PA()||"connection"in navigator)?navigator.onLine:!0}function g2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nr(n>e,"Short delay should be less than long delay!"),this.isMobile=MA()||LA()}get(){return p2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(r,e){Nr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_2=new Cc(3e4,6e4);function Dr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Or(r,e,n,i,l={}){return Mx(r,l,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const g=Rc({key:r.config.apiKey,...d}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...c};return VA()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&jl(r.emulatorConfig.host)&&(y.credentials="include"),Ox.fetch()(await kx(r,r.config.apiHost,n,g),y)})}async function Mx(r,e,n){r._canInitEmulator=!1;const i={...y2,...e};try{const l=new x2(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw gd(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw gd(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw gd(r,"user-disabled",d);const b=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Dx(r,b,y);_s(r,b)}}catch(l){if(l instanceof jr)throw l;_s(r,"network-request-failed",{message:String(l)})}}async function Ic(r,e,n,i,l={}){const c=await Or(r,e,n,i,l);return"mfaPendingCredential"in c&&_s(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function kx(r,e,n,i){const l=`${e}${n}?${i}`,c=r,d=c.config.emulator?Up(r.config,l):`${r.config.apiScheme}://${l}`;return v2.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function b2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Gs(this.auth,"network-request-failed")),_2.get())})}}function gd(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=Gs(r,e,i);return l.customData._tokenResponse=n,l}function N_(r){return r!==void 0&&r.enterprise!==void 0}class E2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return b2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function T2(r,e){return Or(r,"GET","/v2/recaptchaConfig",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(r,e){return Or(r,"POST","/v1/accounts:delete",e)}async function Ud(r,e){return Or(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S2(r,e=!1){const n=Qt(r),i=await n.getIdToken(e),l=zp(i);Te(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:i,authTime:sc(qm(l.auth_time)),issuedAtTime:sc(qm(l.iat)),expirationTime:sc(qm(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function qm(r){return Number(r)*1e3}function zp(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const l=_x(n);return l?JSON.parse(l):(Sd("Failed to decode base64 JWT payload"),null)}catch(l){return Sd("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function R_(r){const e=zp(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof jr&&A2(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function A2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(r){var E;const e=r.auth,n=await r.getIdToken(),i=await uc(r,Ud(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const l=i.users[0];r._notifyReloadListener(l);const c=(E=l.providerUserInfo)!=null&&E.length?Vx(l.providerUserInfo):[],d=C2(r.providerData,c),g=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),y=g?p:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new lp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function R2(r){const e=Qt(r);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C2(r,e){return[...r.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Vx(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(r,e){const n=await Mx(r,{},async()=>{const i=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await kx(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:i};return r.emulatorConfig&&jl(r.emulatorConfig.host)&&(p.credentials="include"),Ox.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j2(r,e){return Or(r,"POST","/v2/accounts:revokeToken",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=R_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:c}=await I2(e,n);this.updateTokensAndExpiration(i,l,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:c}=n,d=new pl;return i&&(Te(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(Te(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Te(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gs{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new N2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new lp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return S2(this,e)}reload(){return R2(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await uc(this,w2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:j,providerData:L,stsTokenManager:B}=n;Te(E&&B,e,"internal-error");const P=pl.fromJSON(this.name,B);Te(typeof E=="string",e,"internal-error"),fi(i,e.name),fi(l,e.name),Te(typeof w=="boolean",e,"internal-error"),Te(typeof j=="boolean",e,"internal-error"),fi(c,e.name),fi(d,e.name),fi(g,e.name),fi(p,e.name),fi(y,e.name),fi(b,e.name);const H=new gs({uid:E,auth:e,email:l,emailVerified:w,displayName:i,isAnonymous:j,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:P,createdAt:y,lastLoginAt:b});return L&&Array.isArray(L)&&(H.providerData=L.map(J=>({...J}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,n,i=!1){const l=new pl;l.updateFromServerResponse(n);const c=new gs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await zd(c),c}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Te(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?Vx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new pl;g.updateFromIdToken(i);const p=new gs({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new lp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new Map;function xr(r){Nr(r instanceof Function,"Expected a class definition");let e=C_.get(r);return e?(Nr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,C_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Px.type="NONE";const I_=Px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(r,e,n){return`firebase:${r}:${e}:${n}`}class gl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:c}=this.auth;this.fullUserKey=Ad(this.userKey,l.apiKey,c),this.fullPersistenceKey=Ad("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ud(this.auth,{idToken:e}).catch(()=>{});return n?gs._fromGetAccountInfoResponse(this.auth,n,e):null}return gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new gl(xr(I_),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||xr(I_);const d=Ad(i,e.config.apiKey,e.name);let g=null;for(const y of n)try{const b=await y._get(d);if(b){let E;if(typeof b=="string"){const w=await Ud(e,{idToken:b}).catch(()=>{});if(!w)break;E=await gs._fromGetAccountInfoResponse(e,w,b)}else E=gs._fromJSON(e,b);y!==c&&(g=E),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new gl(c,e,i):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new gl(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qx(e))return"Blackberry";if(Fx(e))return"Webos";if(Ux(e))return"Safari";if((e.includes("chrome/")||zx(e))&&!e.includes("edge/"))return"Chrome";if(Hx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Lx(r=cn()){return/firefox\//i.test(r)}function Ux(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zx(r=cn()){return/crios\//i.test(r)}function Bx(r=cn()){return/iemobile/i.test(r)}function Hx(r=cn()){return/android/i.test(r)}function qx(r=cn()){return/blackberry/i.test(r)}function Fx(r=cn()){return/webos/i.test(r)}function Bp(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function D2(r=cn()){var e;return Bp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function O2(){return UA()&&document.documentMode===10}function Gx(r=cn()){return Bp(r)||Hx(r)||Fx(r)||qx(r)||/windows phone/i.test(r)||Bx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r,e=[]){let n;switch(r){case"Browser":n=j_(cn());break;case"Worker":n=`${j_(cn())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(r,e={}){return Or(r,"GET","/v2/passwordPolicy",Dr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=6;class P2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??V2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D_(this),this.idTokenSubscription=new D_(this),this.beforeStateQueue=new M2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xr(n)),this._initializationPromise=this.queue(async()=>{var i,l,c;if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ud(this,{idToken:e}),i=await gs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(es(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===g)&&(p!=null&&p.user)&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(Tr(this));const n=e?Qt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k2(this),n=new P2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await j2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,l);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$x(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&f2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ii(r){return Qt(r)}class D_{constructor(e){this.auth=e,this.observer=null,this.addObserver=YA(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U2(r){ch=r}function Yx(r){return ch.loadJS(r)}function z2(){return ch.recaptchaEnterpriseScript}function B2(){return ch.gapiScript}function H2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class q2{constructor(){this.enterprise=new F2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class F2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G2="recaptcha-enterprise",Qx="NO_RECAPTCHA";class $2{constructor(e){this.type=G2,this.auth=Ii(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{T2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new E2(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(p=>{g(p)})})}function l(c,d,g){const p=window.grecaptcha;N_(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Qx)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q2().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(g=>{if(!n&&N_(window.grecaptcha))l(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=z2();p.length!==0&&(p+=g),Yx(p).then(()=>{l(g,c,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function O_(r,e,n,i=!1,l=!1){const c=new $2(r);let d;if(l)d=Qx;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Bd(r,e,n,i,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await O_(r,e,n,n==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await O_(r,e,n,n==="getOobCode");return i(r,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(r,e){const n=Vp(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(ma(c,e??{}))return l;_s(l,"already-initialized")}return n.initialize({options:e})}function Q2(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(xr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function K2(r,e,n){const i=Ii(r);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,c=Kx(e),{host:d,port:g}=X2(e),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},b=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(ma(y,i.config.emulator)&&ma(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,jl(d)?(Tx(`${c}//${d}${p}`),wx("Auth",!0)):J2()}function Kx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function X2(r){const e=Kx(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const c=l[1];return{host:c,port:M_(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:M_(d)}}}function M_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function J2(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function W2(r,e){return Or(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(r,e){return Ic(r,"POST","/v1/accounts:signInWithPassword",Dr(r,e))}async function eR(r,e){return Or(r,"POST","/v1/accounts:sendOobCode",Dr(r,e))}async function tR(r,e){return eR(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(r,e){return Ic(r,"POST","/v1/accounts:signInWithEmailLink",Dr(r,e))}async function sR(r,e){return Ic(r,"POST","/v1/accounts:signInWithEmailLink",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Hp{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new dc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new dc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bd(e,n,"signInWithPassword",Z2);case"emailLink":return nR(e,{email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bd(e,i,"signUpPassword",W2);case"emailLink":return sR(e,{idToken:n,email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(r,e){return Ic(r,"POST","/v1/accounts:signInWithIdp",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="http://localhost";class pa extends Hp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_s("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...c}=n;if(!i||!l)return null;const d=new pa(i,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return yl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yl(e,n)}buildRequest(){const e={requestUri:rR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aR(r){const e=Ko(Xo(r)).link,n=e?Ko(Xo(e)).deep_link_id:null,i=Ko(Xo(r)).deep_link_id;return(i?Ko(Xo(i)).link:null)||i||n||e||r}class qp{constructor(e){const n=Ko(Xo(e)),i=n.apiKey??null,l=n.oobCode??null,c=iR(n.mode??null);Te(i&&l&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aR(e);try{return new qp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,n){return dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=qp.parseLink(n);return Te(i,"argument-error"),dc._fromEmailAndCode(e,i.code,i.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Xx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends jc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pa._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return pi.credential(n,i)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends jc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends jc{constructor(){super("twitter.com")}static credential(e,n){return pa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return yi.credential(n,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(r,e){return Ic(r,"POST","/v1/accounts:signUp",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const c=await gs._fromIdTokenResponse(e,i,l),d=k_(i);return new ga({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=k_(i);return new ga({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function k_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends jr{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Hd(e,n,i,l)}}function Jx(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(r,c,e,i):c})}async function oR(r,e,n=!1){const i=await uc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return ga._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(r,e,n=!1){const{auth:i}=r;if(es(i.app))return Promise.reject(Tr(i));const l="reauthenticate";try{const c=await uc(r,Jx(i,l,e,r),n);Te(c.idToken,i,"internal-error");const d=zp(c.idToken);Te(d,i,"internal-error");const{sub:g}=d;return Te(r.uid===g,i,"user-mismatch"),ga._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&_s(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(r,e,n=!1){if(es(r.app))return Promise.reject(Tr(r));const i="signIn",l=await Jx(r,i,e),c=await ga._fromIdTokenResponse(r,i,l);return n||await r._updateCurrentUser(c.user),c}async function uR(r,e){return Wx(Ii(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(r){const e=Ii(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dR(r,e,n){const i=Ii(r);await Bd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",tR)}async function hR(r,e,n){if(es(r.app))return Promise.reject(Tr(r));const i=Ii(r),d=await Bd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Zx(r),p}),g=await ga._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(g.user),g}function fR(r,e,n){return es(r.app)?Promise.reject(Tr(r)):uR(Qt(r),Ol.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zx(r),i})}function mR(r,e,n,i){return Qt(r).onIdTokenChanged(e,n,i)}function pR(r,e,n){return Qt(r).beforeAuthStateChanged(e,n)}function gR(r,e,n,i){return Qt(r).onAuthStateChanged(e,n,i)}function e1(r){return Qt(r).signOut()}const qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1e3,vR=10;class n1 extends t1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);O2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,vR):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}n1.type="LOCAL";const _R=n1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends t1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}s1.type="SESSION";const r1=s1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new uh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await bR(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=Fp("",20);l.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(E){const w=E;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(w.data.response);break;default:clearTimeout(b),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}function ER(r){$s().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function TR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wR(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function SR(){return i1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="firebaseLocalStorageDb",AR=1,Fd="firebaseLocalStorage",l1="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dh(r,e){return r.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function NR(){const r=indexedDB.deleteDatabase(a1);return new Dc(r).toPromise()}function op(){const r=indexedDB.open(a1,AR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Fd,{keyPath:l1})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Fd)?e(i):(i.close(),await NR(),e(await op()))})})}async function V_(r,e,n){const i=dh(r,!0).put({[l1]:e,value:n});return new Dc(i).toPromise()}async function RR(r,e){const n=dh(r,!1).get(e),i=await new Dc(n).toPromise();return i===void 0?null:i.value}function P_(r,e){const n=dh(r,!0).delete(e);return new Dc(n).toPromise()}const CR=800,IR=3;class o1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await op(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>IR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await TR(),!this.activeServiceWorker)return;this.sender=new xR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await op();return await V_(e,qd,"1"),await P_(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>V_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>RR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>P_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=dh(l,!1).getAll();return new Dc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o1.type="LOCAL";const jR=o1;new Cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(r,e){return e?xr(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends Hp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OR(r){return Wx(r.auth,new Gp(r),r.bypassAuthState)}function MR(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),cR(n,new Gp(r),r.bypassAuthState)}async function kR(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),oR(n,new Gp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n,i,l,c=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OR;case"linkViaPopup":case"linkViaRedirect":return kR;case"reauthViaPopup":case"reauthViaRedirect":return MR;default:_s(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Cc(2e3,1e4);class ml extends c1{constructor(e,n,i,l,c){super(e,n,l,c),this.provider=i,this.authWindow=null,this.pollId=null,ml.currentPopupAction&&ml.currentPopupAction.cancel(),ml.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ml.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VR.get())};e()}}ml.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="pendingRedirect",Nd=new Map;class LR extends c1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const i=await UR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UR(r,e){const n=HR(e),i=BR(r);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function zR(r,e){Nd.set(r._key(),e)}function BR(r){return xr(r._redirectPersistence)}function HR(r){return Ad(PR,r.config.apiKey,r.name)}async function qR(r,e,n=!1){if(es(r.app))return Promise.reject(Tr(r));const i=Ii(r),l=DR(i,e),d=await new LR(i,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=600*1e3;class GR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$R(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!u1(e)){const l=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Gs(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FR&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function u1({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $R(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u1(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(r,e={}){return Or(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KR=/^https?/;async function XR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await YR(r);for(const n of e)try{if(JR(n))return}catch{}_s(r,"unauthorized-domain")}function JR(r){const e=ap(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!KR.test(n))return!1;if(QR.test(r))return i===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new Cc(3e4,6e4);function U_(){const r=$s().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function ZR(r){return new Promise((e,n)=>{var l,c,d;function i(){U_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U_(),n(Gs(r,"network-request-failed"))},timeout:WR.get()})}if((c=(l=$s().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=$s().gapi)!=null&&d.load)i();else{const g=H2("iframefcb");return $s()[g]=()=>{gapi.load?i():n(Gs(r,"network-request-failed"))},Yx(`${B2()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw Rd=null,e})}let Rd=null;function eC(r){return Rd=Rd||ZR(r),Rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Cc(5e3,15e3),nC="__/auth/iframe",sC="emulator/auth/iframe",rC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aC(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Up(e,sC):`https://${r.config.authDomain}/${nC}`,i={apiKey:e.apiKey,appName:r.name,v:Dl},l=iC.get(r.config.apiHost);l&&(i.eid=l);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Rc(i).slice(1)}`}async function lC(r){const e=await eC(r),n=$s().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:aC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rC,dontclear:!0},i=>new Promise(async(l,c)=>{await i.restyle({setHideOnLeave:!1});const d=Gs(r,"network-request-failed"),g=$s().setTimeout(()=>{c(d)},tC.get());function p(){$s().clearTimeout(g),l(i)}i.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cC=500,uC=600,dC="_blank",hC="http://localhost";class z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fC(r,e,n,i=cC,l=uC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const p={...oC,width:i.toString(),height:l.toString(),top:c,left:d},y=cn().toLowerCase();n&&(g=zx(y)?dC:n),Lx(y)&&(e=e||hC,p.scrollbars="yes");const b=Object.entries(p).reduce((w,[j,L])=>`${w}${j}=${L},`,"");if(D2(y)&&g!=="_self")return mC(e||"",g),new z_(null);const E=window.open(e||"",g,b);Te(E,r,"popup-blocked");try{E.focus()}catch{}return new z_(E)}function mC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="__/auth/handler",gC="emulator/auth/handler",yC=encodeURIComponent("fac");async function B_(r,e,n,i,l,c){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Dl,eventId:l};if(e instanceof Xx){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",$A(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))d[b]=E}if(e instanceof jc){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(d.scopes=b.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const p=await r._getAppCheckToken(),y=p?`#${yC}=${encodeURIComponent(p)}`:"";return`${vC(r)}?${Rc(g).slice(1)}${y}`}function vC({config:r}){return r.emulator?Up(r,gC):`https://${r.authDomain}/${pC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="webStorageSupport";class _C{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r1,this._completeRedirectFn=qR,this._overrideRedirectResult=zR}async _openPopup(e,n,i,l){var d;Nr((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await B_(e,n,i,ap(),l);return fC(e,c,Fp())}async _openRedirect(e,n,i,l){await this._originValidation(e);const c=await B_(e,n,i,ap(),l);return ER(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Nr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await lC(e),i=new GR(e);return n.register("authEvent",l=>(Te(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Fm];c!==void 0&&n(!!c),_s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gx()||Ux()||Bp()}}const bC=_C;var H_="@firebase/auth",q_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TC(r){El(new S_("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=i.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$x(r)},y=new L2(i,l,c,p);return Q2(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),El(new S_("auth-internal",e=>{const n=Ii(e.getProvider("auth").getImmediate());return(i=>new xC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(H_,q_,EC(r)),xi(H_,q_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=300,SC=Ex("authIdTokenMaxAge")||wC;let F_=null;const AC=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>SC)return;const l=n==null?void 0:n.token;F_!==l&&(F_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function d1(r=Nx()){const e=Vp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Y2(r,{popupRedirectResolver:bC,persistence:[jR,_R,r1]}),i=Ex("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=AC(c.toString());pR(n,d,()=>d(n.currentUser)),mR(n,g=>d(g))}}const l=bx("auth");return l&&K2(n,`http://${l}`),n}function NC(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}U2({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=l=>{const c=Gs("internal-error");c.customData=l,n(c)},i.type="text/javascript",i.charset="UTF-8",NC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TC("Browser");class RC{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($e||($e={}));const CC={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},IC=$e.INFO,jC={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},DC=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),l=jC[e];if(l)console[l](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class OC{constructor(e){this.name=e,this._logLevel=IC,this._logHandler=DC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}var G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ei,h1;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function C(){}C.prototype=N.prototype,R.F=N.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(O,V,k){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return N.prototype[V].apply(O,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(R,N,C){C||(C=0);const O=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)O[V]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(V=0;V<16;++V)O[V]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=R.g[0],C=R.g[1],V=R.g[2];let k=R.g[3],A;A=N+(k^C&(V^k))+O[0]+3614090360&4294967295,N=C+(A<<7&4294967295|A>>>25),A=k+(V^N&(C^V))+O[1]+3905402710&4294967295,k=N+(A<<12&4294967295|A>>>20),A=V+(C^k&(N^C))+O[2]+606105819&4294967295,V=k+(A<<17&4294967295|A>>>15),A=C+(N^V&(k^N))+O[3]+3250441966&4294967295,C=V+(A<<22&4294967295|A>>>10),A=N+(k^C&(V^k))+O[4]+4118548399&4294967295,N=C+(A<<7&4294967295|A>>>25),A=k+(V^N&(C^V))+O[5]+1200080426&4294967295,k=N+(A<<12&4294967295|A>>>20),A=V+(C^k&(N^C))+O[6]+2821735955&4294967295,V=k+(A<<17&4294967295|A>>>15),A=C+(N^V&(k^N))+O[7]+4249261313&4294967295,C=V+(A<<22&4294967295|A>>>10),A=N+(k^C&(V^k))+O[8]+1770035416&4294967295,N=C+(A<<7&4294967295|A>>>25),A=k+(V^N&(C^V))+O[9]+2336552879&4294967295,k=N+(A<<12&4294967295|A>>>20),A=V+(C^k&(N^C))+O[10]+4294925233&4294967295,V=k+(A<<17&4294967295|A>>>15),A=C+(N^V&(k^N))+O[11]+2304563134&4294967295,C=V+(A<<22&4294967295|A>>>10),A=N+(k^C&(V^k))+O[12]+1804603682&4294967295,N=C+(A<<7&4294967295|A>>>25),A=k+(V^N&(C^V))+O[13]+4254626195&4294967295,k=N+(A<<12&4294967295|A>>>20),A=V+(C^k&(N^C))+O[14]+2792965006&4294967295,V=k+(A<<17&4294967295|A>>>15),A=C+(N^V&(k^N))+O[15]+1236535329&4294967295,C=V+(A<<22&4294967295|A>>>10),A=N+(V^k&(C^V))+O[1]+4129170786&4294967295,N=C+(A<<5&4294967295|A>>>27),A=k+(C^V&(N^C))+O[6]+3225465664&4294967295,k=N+(A<<9&4294967295|A>>>23),A=V+(N^C&(k^N))+O[11]+643717713&4294967295,V=k+(A<<14&4294967295|A>>>18),A=C+(k^N&(V^k))+O[0]+3921069994&4294967295,C=V+(A<<20&4294967295|A>>>12),A=N+(V^k&(C^V))+O[5]+3593408605&4294967295,N=C+(A<<5&4294967295|A>>>27),A=k+(C^V&(N^C))+O[10]+38016083&4294967295,k=N+(A<<9&4294967295|A>>>23),A=V+(N^C&(k^N))+O[15]+3634488961&4294967295,V=k+(A<<14&4294967295|A>>>18),A=C+(k^N&(V^k))+O[4]+3889429448&4294967295,C=V+(A<<20&4294967295|A>>>12),A=N+(V^k&(C^V))+O[9]+568446438&4294967295,N=C+(A<<5&4294967295|A>>>27),A=k+(C^V&(N^C))+O[14]+3275163606&4294967295,k=N+(A<<9&4294967295|A>>>23),A=V+(N^C&(k^N))+O[3]+4107603335&4294967295,V=k+(A<<14&4294967295|A>>>18),A=C+(k^N&(V^k))+O[8]+1163531501&4294967295,C=V+(A<<20&4294967295|A>>>12),A=N+(V^k&(C^V))+O[13]+2850285829&4294967295,N=C+(A<<5&4294967295|A>>>27),A=k+(C^V&(N^C))+O[2]+4243563512&4294967295,k=N+(A<<9&4294967295|A>>>23),A=V+(N^C&(k^N))+O[7]+1735328473&4294967295,V=k+(A<<14&4294967295|A>>>18),A=C+(k^N&(V^k))+O[12]+2368359562&4294967295,C=V+(A<<20&4294967295|A>>>12),A=N+(C^V^k)+O[5]+4294588738&4294967295,N=C+(A<<4&4294967295|A>>>28),A=k+(N^C^V)+O[8]+2272392833&4294967295,k=N+(A<<11&4294967295|A>>>21),A=V+(k^N^C)+O[11]+1839030562&4294967295,V=k+(A<<16&4294967295|A>>>16),A=C+(V^k^N)+O[14]+4259657740&4294967295,C=V+(A<<23&4294967295|A>>>9),A=N+(C^V^k)+O[1]+2763975236&4294967295,N=C+(A<<4&4294967295|A>>>28),A=k+(N^C^V)+O[4]+1272893353&4294967295,k=N+(A<<11&4294967295|A>>>21),A=V+(k^N^C)+O[7]+4139469664&4294967295,V=k+(A<<16&4294967295|A>>>16),A=C+(V^k^N)+O[10]+3200236656&4294967295,C=V+(A<<23&4294967295|A>>>9),A=N+(C^V^k)+O[13]+681279174&4294967295,N=C+(A<<4&4294967295|A>>>28),A=k+(N^C^V)+O[0]+3936430074&4294967295,k=N+(A<<11&4294967295|A>>>21),A=V+(k^N^C)+O[3]+3572445317&4294967295,V=k+(A<<16&4294967295|A>>>16),A=C+(V^k^N)+O[6]+76029189&4294967295,C=V+(A<<23&4294967295|A>>>9),A=N+(C^V^k)+O[9]+3654602809&4294967295,N=C+(A<<4&4294967295|A>>>28),A=k+(N^C^V)+O[12]+3873151461&4294967295,k=N+(A<<11&4294967295|A>>>21),A=V+(k^N^C)+O[15]+530742520&4294967295,V=k+(A<<16&4294967295|A>>>16),A=C+(V^k^N)+O[2]+3299628645&4294967295,C=V+(A<<23&4294967295|A>>>9),A=N+(V^(C|~k))+O[0]+4096336452&4294967295,N=C+(A<<6&4294967295|A>>>26),A=k+(C^(N|~V))+O[7]+1126891415&4294967295,k=N+(A<<10&4294967295|A>>>22),A=V+(N^(k|~C))+O[14]+2878612391&4294967295,V=k+(A<<15&4294967295|A>>>17),A=C+(k^(V|~N))+O[5]+4237533241&4294967295,C=V+(A<<21&4294967295|A>>>11),A=N+(V^(C|~k))+O[12]+1700485571&4294967295,N=C+(A<<6&4294967295|A>>>26),A=k+(C^(N|~V))+O[3]+2399980690&4294967295,k=N+(A<<10&4294967295|A>>>22),A=V+(N^(k|~C))+O[10]+4293915773&4294967295,V=k+(A<<15&4294967295|A>>>17),A=C+(k^(V|~N))+O[1]+2240044497&4294967295,C=V+(A<<21&4294967295|A>>>11),A=N+(V^(C|~k))+O[8]+1873313359&4294967295,N=C+(A<<6&4294967295|A>>>26),A=k+(C^(N|~V))+O[15]+4264355552&4294967295,k=N+(A<<10&4294967295|A>>>22),A=V+(N^(k|~C))+O[6]+2734768916&4294967295,V=k+(A<<15&4294967295|A>>>17),A=C+(k^(V|~N))+O[13]+1309151649&4294967295,C=V+(A<<21&4294967295|A>>>11),A=N+(V^(C|~k))+O[4]+4149444226&4294967295,N=C+(A<<6&4294967295|A>>>26),A=k+(C^(N|~V))+O[11]+3174756917&4294967295,k=N+(A<<10&4294967295|A>>>22),A=V+(N^(k|~C))+O[2]+718787259&4294967295,V=k+(A<<15&4294967295|A>>>17),A=C+(k^(V|~N))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+k&4294967295}i.prototype.v=function(R,N){N===void 0&&(N=R.length);const C=N-this.blockSize,O=this.C;let V=this.h,k=0;for(;k<N;){if(V==0)for(;k<=C;)l(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<N;)if(O[V++]=R.charCodeAt(k++),V==this.blockSize){l(this,O),V=0;break}}else for(;k<N;)if(O[V++]=R[k++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=N},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;N=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=N&255,N/=256;for(this.v(R),R=Array(16),N=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)R[N++]=this.g[C]>>>O&255;return R};function c(R,N){var C=g;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=N(R)}function d(R,N){this.h=N;const C=[];let O=!0;for(let V=R.length-1;V>=0;V--){const k=R[V]|0;O&&k==N||(C[V]=k,O=!1)}this.g=C}var g={};function p(R){return-128<=R&&R<128?c(R,function(N){return new d([N|0],N<0?-1:0)}):new d([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return P(y(-R));const N=[];let C=1;for(let O=0;R>=C;O++)N[O]=R/C|0,C*=4294967296;return new d(N,0)}function b(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return P(b(R.substring(1),N));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(N,8));let O=E;for(let k=0;k<R.length;k+=8){var V=Math.min(8,R.length-k);const A=parseInt(R.substring(k,k+V),N);V<8?(V=y(Math.pow(N,V)),O=O.j(V).add(y(A))):(O=O.j(C),O=O.add(y(A)))}return O}var E=p(0),w=p(1),j=p(16777216);r=d.prototype,r.m=function(){if(B(this))return-P(this).m();let R=0,N=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);R+=(O>=0?O:4294967296+O)*N,N*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(L(this))return"0";if(B(this))return"-"+P(this).toString(R);const N=y(Math.pow(R,6));var C=this;let O="";for(;;){const V=$(C,N).g;C=H(C,V.j(N));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=V,L(C))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function L(R){if(R.h!=0)return!1;for(let N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function B(R){return R.h==-1}r.l=function(R){return R=H(this,R),B(R)?-1:L(R)?0:1};function P(R){const N=R.g.length,C=[];for(let O=0;O<N;O++)C[O]=~R.g[O];return new d(C,~R.h).add(w)}r.abs=function(){return B(this)?P(this):this},r.add=function(R){const N=Math.max(this.g.length,R.g.length),C=[];let O=0;for(let V=0;V<=N;V++){let k=O+(this.i(V)&65535)+(R.i(V)&65535),A=(k>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=A>>>16,k&=65535,A&=65535,C[V]=A<<16|k}return new d(C,C[C.length-1]&-2147483648?-1:0)};function H(R,N){return R.add(P(N))}r.j=function(R){if(L(this)||L(R))return E;if(B(this))return B(R)?P(this).j(P(R)):P(P(this).j(R));if(B(R))return P(this.j(P(R)));if(this.l(j)<0&&R.l(j)<0)return y(this.m()*R.m());const N=this.g.length+R.g.length,C=[];for(var O=0;O<2*N;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<R.g.length;V++){const k=this.i(O)>>>16,A=this.i(O)&65535,_e=R.i(V)>>>16,Ae=R.i(V)&65535;C[2*O+2*V]+=A*Ae,J(C,2*O+2*V),C[2*O+2*V+1]+=k*Ae,J(C,2*O+2*V+1),C[2*O+2*V+1]+=A*_e,J(C,2*O+2*V+1),C[2*O+2*V+2]+=k*_e,J(C,2*O+2*V+2)}for(R=0;R<N;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=N;R<2*N;R++)C[R]=0;return new d(C,0)};function J(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function U(R,N){this.g=R,this.h=N}function $(R,N){if(L(N))throw Error("division by zero");if(L(R))return new U(E,E);if(B(R))return N=$(P(R),N),new U(P(N.g),P(N.h));if(B(N))return N=$(R,P(N)),new U(P(N.g),N.h);if(R.g.length>30){if(B(R)||B(N))throw Error("slowDivide_ only works with positive integers.");for(var C=w,O=N;O.l(R)<=0;)C=F(C),O=F(O);var V=oe(C,1),k=oe(O,1);for(O=oe(O,2),C=oe(C,2);!L(O);){var A=k.add(O);A.l(R)<=0&&(V=V.add(C),k=A),O=oe(O,1),C=oe(C,1)}return N=H(R,V.j(N)),new U(V,N)}for(V=E;R.l(N)>=0;){for(C=Math.max(1,Math.floor(R.m()/N.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=y(C),A=k.j(N);B(A)||A.l(R)>0;)C-=O,k=y(C),A=k.j(N);L(k)&&(k=w),V=V.add(k),R=H(R,A)}return new U(V,R)}r.B=function(R){return $(this,R).h},r.and=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<N;O++)C[O]=this.i(O)&R.i(O);return new d(C,this.h&R.h)},r.or=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<N;O++)C[O]=this.i(O)|R.i(O);return new d(C,this.h|R.h)},r.xor=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<N;O++)C[O]=this.i(O)^R.i(O);return new d(C,this.h^R.h)};function F(R){const N=R.g.length+1,C=[];for(let O=0;O<N;O++)C[O]=R.i(O)<<1|R.i(O-1)>>>31;return new d(C,R.h)}function oe(R,N){const C=N>>5;N%=32;const O=R.g.length-C,V=[];for(let k=0;k<O;k++)V[k]=N>0?R.i(k+C)>>>N|R.i(k+C+1)<<32-N:R.i(k+C);return new d(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,h1=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ei=d}).apply(typeof G_<"u"?G_:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f1,Jo,m1,Cd,cp,p1,g1,y1;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function l(u,v){if(v)e:{var x=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var G=u[S];if(!(G in x))break e;x=x[G]}u=u[u.length-1],S=x[u],v=v(S),v!=S&&v!=null&&e(x,u,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(v){var x=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&x.push([S,v[S]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function p(u,v,x){return u.call.apply(u.bind,arguments)}function y(u,v,x){return y=p,y.apply(null,arguments)}function b(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,v){function x(){}x.prototype=v.prototype,u.Z=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(S,G,Z){for(var de=Array(arguments.length-2),De=2;De<arguments.length;De++)de[De-2]=arguments[De];return v.prototype[G].apply(S,de)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function j(u){const v=u.length;if(v>0){const x=Array(v);for(let S=0;S<v;S++)x[S]=u[S];return x}return[]}function L(u,v){for(let S=1;S<arguments.length;S++){const G=arguments[S];var x=typeof G;if(x=x!="object"?x:G?Array.isArray(G)?"array":x:"null",x=="array"||x=="object"&&typeof G.length=="number"){x=u.length||0;const Z=G.length||0;u.length=x+Z;for(let de=0;de<Z;de++)u[x+de]=G[de]}else u.push(G)}}class B{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(u){d.setTimeout(()=>{throw u},0)}function H(){var u=R;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class J{constructor(){this.h=this.g=null}add(v,x){const S=U.get();S.set(v,x),this.h?this.h.next=S:this.g=S,this.h=S}}var U=new B(()=>new $,u=>u.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let F,oe=!1,R=new J,N=()=>{const u=Promise.resolve(void 0);F=()=>{u.then(C)}};function C(){for(var u;u=H();){try{u.h.call(u.g)}catch(x){P(x)}var v=U;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}oe=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};d.addEventListener("test",x,v),d.removeEventListener("test",x,v)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function _e(u,v){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}E(_e,V),_e.prototype.init=function(u,v){const x=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),W=0;function ce(u,v,x,S,G){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!S,this.ha=G,this.key=++W,this.da=this.fa=!1}function fe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ne(u,v,x){for(const S in u)v.call(x,u[S],S,u)}function ie(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function I(u){const v={};for(const x in u)v[x]=u[x];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,v){let x,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(x in S)u[x]=S[x];for(let Z=0;Z<X.length;Z++)x=X[Z],Object.prototype.hasOwnProperty.call(S,x)&&(u[x]=S[x])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,v,x,S,G){const Z=u.toString();u=this.g[Z],u||(u=this.g[Z]=[],this.h++);const de=Se(u,v,S,G);return de>-1?(v=u[de],x||(v.fa=!1)):(v=new ce(v,this.src,Z,!!S,G),v.fa=x,u.push(v)),v};function xe(u,v){const x=v.type;if(x in u.g){var S=u.g[x],G=Array.prototype.indexOf.call(S,v,void 0),Z;(Z=G>=0)&&Array.prototype.splice.call(S,G,1),Z&&(fe(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Se(u,v,x,S){for(let G=0;G<u.length;++G){const Z=u[G];if(!Z.da&&Z.listener==v&&Z.capture==!!x&&Z.ha==S)return G}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),yt={};function tt(u,v,x,S,G){if(Array.isArray(v)){for(let Z=0;Z<v.length;Z++)tt(u,v[Z],x,S,G);return null}return x=Hl(x),u&&u[Ae]?u.J(v,x,g(S)?!!S.capture:!1,G):qe(u,v,x,!1,S,G)}function qe(u,v,x,S,G,Z){if(!v)throw Error("Invalid event type");const de=g(G)?!!G.capture:!!G;let De=Mi(u);if(De||(u[ke]=De=new ue(u)),x=De.add(v,x,S,de,Z),x.proxy)return x;if(S=wn(),x.proxy=S,S.src=u,S.listener=x,u.addEventListener)k||(G=de),G===void 0&&(G=!1),u.addEventListener(v.toString(),S,G);else if(u.attachEvent)u.attachEvent(Un(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function wn(){function u(x){return v.call(u.src,u.listener,x)}const v=zl;return u}function Ln(u,v,x,S,G){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)Ln(u,v[Z],x,S,G);else S=g(S)?!!S.capture:!!S,x=Hl(x),u&&u[Ae]?(u=u.i,Z=String(v).toString(),Z in u.g&&(v=u.g[Z],x=Se(v,x,S,G),x>-1&&(fe(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete u.g[Z],u.h--)))):u&&(u=Mi(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Se(v,x,S,G)),(x=u>-1?v[u]:null)&&er(x))}function er(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[Ae])xe(v.i,u);else{var x=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(x,S,u.capture):v.detachEvent?v.detachEvent(Un(x),S):v.addListener&&v.removeListener&&v.removeListener(S),(x=Mi(v))?(xe(x,u),x.h==0&&(x.src=null,v[ke]=null)):fe(u)}}}function Un(u){return u in yt?yt[u]:yt[u]="on"+u}function zl(u,v){if(u.da)u=!0;else{v=new _e(v,this);const x=u.listener,S=u.ha||u.src;u.fa&&er(u),u=x.call(S,v)}return u}function Mi(u){return u=u[ke],u instanceof ue?u:null}var Bl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hl(u){return typeof u=="function"?u:(u[Bl]||(u[Bl]=function(v){return u.handleEvent(v)}),u[Bl])}function Ct(){O.call(this),this.i=new ue(this),this.M=this,this.G=null}E(Ct,O),Ct.prototype[Ae]=!0,Ct.prototype.removeEventListener=function(u,v,x,S){Ln(this,u,v,x,S)};function Bt(u,v){var x,S=u.G;if(S)for(x=[];S;S=S.G)x.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new V(v,u);else if(v instanceof V)v.target=v.target||u;else{var G=v;v=new V(S,u),le(v,G)}G=!0;let Z,de;if(x)for(de=x.length-1;de>=0;de--)Z=v.g=x[de],G=Mr(Z,S,!0,v)&&G;if(Z=v.g=u,G=Mr(Z,S,!0,v)&&G,G=Mr(Z,S,!1,v)&&G,x)for(de=0;de<x.length;de++)Z=v.g=x[de],G=Mr(Z,S,!1,v)&&G}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const x=u.g[v];for(let S=0;S<x.length;S++)fe(x[S]);delete u.g[v],u.h--}}this.G=null},Ct.prototype.J=function(u,v,x,S){return this.i.add(String(u),v,!1,x,S)},Ct.prototype.K=function(u,v,x,S){return this.i.add(String(u),v,!0,x,S)};function Mr(u,v,x,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let G=!0;for(let Z=0;Z<v.length;++Z){const de=v[Z];if(de&&!de.da&&de.capture==x){const De=de.listener,Tt=de.ha||de.src;de.fa&&xe(u.i,de),G=De.call(Tt,S)!==!1&&G}}return G&&!S.defaultPrevented}function Ih(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(u,v||0)}function zc(u){u.g=Ih(()=>{u.g=null,u.i&&(u.i=!1,zc(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class un extends O{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:zc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(u){O.call(this),this.h=u,this.g={}}E(ki,O);var ql=[];function Fl(u){Ne(u.g,function(v,x){this.g.hasOwnProperty(x)&&er(v)},u),u.g={}}ki.prototype.N=function(){ki.Z.N.call(this),Fl(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kr=d.JSON.stringify,jh=d.JSON.parse,Bc=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Hc(){}function qc(){}var ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){V.call(this,"d")}E(Kt,V);function zn(){V.call(this,"c")}E(zn,V);var Et={},Fc=null;function Ta(){return Fc=Fc||new Ct}Et.Ia="serverreachability";function Gc(u){V.call(this,Et.Ia,u)}E(Gc,V);function xs(u){const v=Ta();Bt(v,new Gc(v))}Et.STAT_EVENT="statevent";function Vi(u,v){V.call(this,Et.STAT_EVENT,u),this.stat=v}E(Vi,V);function It(u){const v=Ta();Bt(v,new Vi(v,u))}Et.Ja="timingevent";function Es(u,v){V.call(this,Et.Ja,u),this.size=v}E(Es,V);function Ts(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},v)}function ss(){this.g=!0}ss.prototype.ua=function(){this.g=!1};function Dh(u,v,x,S,G,Z){u.info(function(){if(u.g)if(Z){var de="",De=Z.split("&");for(let Ke=0;Ke<De.length;Ke++){var Tt=De[Ke].split("=");if(Tt.length>1){const mt=Tt[0];Tt=Tt[1];const Fn=mt.split("_");de=Fn.length>=2&&Fn[1]=="type"?de+(mt+"="+Tt+"&"):de+(mt+"=redacted&")}}}else de=null;else de=Z;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+v+`
`+x+`
`+de})}function $c(u,v,x,S,G,Z,de){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+v+`
`+x+`
`+Z+" "+de})}function ws(u,v,x,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Oh(u,x)+(S?" "+S:"")})}function Pi(u,v){u.info(function(){return"TIMEOUT: "+v})}ss.prototype.info=function(){};function Oh(u,v){if(!u.g)return v;if(!v)return null;try{const Z=JSON.parse(v);if(Z){for(u=0;u<Z.length;u++)if(Array.isArray(Z[u])){var x=Z[u];if(!(x.length<2)){var S=x[1];if(Array.isArray(S)&&!(S.length<1)){var G=S[0];if(G!="noop"&&G!="stop"&&G!="close")for(let de=1;de<S.length;de++)S[de]=""}}}}return kr(Z)}catch{return v}}var Li={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$l;function Ui(){}E(Ui,Hc),Ui.prototype.g=function(){return new XMLHttpRequest},$l=new Ui;function tr(u){return encodeURIComponent(String(u))}function Yc(u){var v=1;u=u.split(":");const x=[];for(;v>0&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function rs(u,v,x,S){this.j=u,this.i=v,this.l=x,this.S=S||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new is}function is(){this.i=null,this.g="",this.h=!1}var jt={},Ft={};function Ss(u,v,x){u.M=1,u.A=zi(Ot(v)),u.u=x,u.R=!0,wa(u,null)}function wa(u,v){u.F=Date.now(),As(u),u.B=Ot(u.A);var x=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ra(x.i,"t",S),u.C=0,x=u.j.L,u.h=new is,u.g=ou(u.j,x?v:null,!u.u),u.P>0&&(u.O=new un(y(u.Y,u,u.g),u.P)),v=u.V,x=u.g,S=u.ba;var G="readystatechange";Array.isArray(G)||(G&&(ql[0]=G.toString()),G=ql);for(let Z=0;Z<G.length;Z++){const de=tt(x,G[Z],S||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=u.J?I(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),xs(),Dh(u.i,u.v,u.B,u.l,u.S,u.u)}rs.prototype.ba=function(u){u=u.target;const v=this.O;v&&os(u)==3?v.j():this.Y(u)},rs.prototype.Y=function(u){try{if(u==this.g)e:{const De=os(this.g),Tt=this.g.ya(),Ke=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||De!=4||Tt==7||(Tt==8||Ke<=0?xs(3):xs(2)),Ns(this);var v=this.g.ca();this.X=v;var x=Mh(this);if(this.o=v==200,$c(this.i,this.v,this.B,this.l,this.S,De,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,G=this.g;if((S=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var Z=S;break t}}Z=null}if(u=Z)ws(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rs(this,u);else{this.o=!1,this.m=3,It(12),Sn(this),Bn(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<x.length;)if(mt=Kc(this,x),mt==Ft){De==4&&(this.m=4,It(14),u=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==jt){this.m=4,It(15),ws(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else ws(this.i,this.l,mt,null),Rs(this,mt);if(Qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||x.length!=0||this.h.h||(this.m=1,It(16),u=!1),this.o=this.o&&u,!u)ws(this.i,this.l,x,"[Invalid Chunked Response]"),Sn(this),Bn(this);else if(x.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),lo(de),de.P=!0,It(11))}}else ws(this.i,this.l,x,null),Rs(this,x);De==4&&Sn(this),this.o&&!this.K&&(De==4?ru(this.j,this):(this.o=!1,As(this)))}else sr(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Sn(this),Bn(this)}}}catch{}finally{}};function Mh(u){if(!Qc(u))return u.g.la();const v=Xt(u.g);if(v==="")return"";let x="";const S=v.length,G=os(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Sn(u),Bn(u),"";u.h.i=new d.TextDecoder}for(let Z=0;Z<S;Z++)u.h.h=!0,x+=u.h.i.decode(v[Z],{stream:!(G&&Z==S-1)});return v.length=0,u.h.g+=x,u.C=0,u.h.g}function Qc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Kc(u,v){var x=u.C,S=v.indexOf(`
`,x);return S==-1?Ft:(x=Number(v.substring(x,S)),isNaN(x)?jt:(S+=1,S+x>v.length?Ft:(v=v.slice(S,S+x),u.C=S+x,v)))}rs.prototype.cancel=function(){this.K=!0,Sn(this)};function As(u){u.T=Date.now()+u.H,Sa(u,u.H)}function Sa(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ts(y(u.aa,u),v)}function Ns(u){u.D&&(d.clearTimeout(u.D),u.D=null)}rs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Pi(this.i,this.B),this.M!=2&&(xs(),It(17)),Sn(this),this.m=2,Bn(this)):Sa(this,this.T-u)};function Bn(u){u.j.I==0||u.K||ru(u.j,u)}function Sn(u){Ns(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Fl(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function Rs(u,v){try{var x=u.j;if(x.I!=0&&(x.g==u||Is(x.h,u))){if(!u.L&&Is(x.h,u)&&x.I==3){try{var S=x.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)Oa(x),qr(x);else break e;Yi(x),It(18)}}else x.xa=G[1],0<x.xa-x.K&&G[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ts(y(x.Va,x),6e3));Cs(x.h)<=1&&x.ta&&(x.ta=void 0)}else Vs(x,11)}else if((u.L||x.g==u)&&Oa(x),!A(v))for(G=x.Ba.g.parse(v),v=0;v<G.length;v++){let Ke=G[v];const mt=Ke[0];if(!(mt<=x.K))if(x.K=mt,Ke=Ke[1],x.I==2)if(Ke[0]=="c"){x.M=Ke[1],x.ba=Ke[2];const Fn=Ke[3];Fn!=null&&(x.ka=Fn,x.j.info("VER="+x.ka));const Ps=Ke[4];Ps!=null&&(x.za=Ps,x.j.info("SVER="+x.za));const cs=Ke[5];cs!=null&&typeof cs=="number"&&cs>0&&(S=1.5*cs,x.O=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const us=u.g;if(us){const Qi=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var Z=S.h;Z.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Kl(Z,Z.h),Z.h=null))}if(S.G){const Ma=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;Ma&&(S.wa=Ma,We(S.J,S.G,Ma))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),S=x;var de=u;if(S.na=lu(S,S.L?S.ba:null,S.W),de.L){Xl(S.h,de);var De=de,Tt=S.O;Tt&&(De.H=Tt),De.D&&(Ns(De),As(De)),S.g=de}else nu(S);x.i.length>0&&ks(x)}else Ke[0]!="stop"&&Ke[0]!="close"||Vs(x,7);else x.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Vs(x,7):io(x):Ke[0]!="noop"&&x.l&&x.l.qa(Ke),x.A=0)}}xs(4)}catch{}}var Dt=class{constructor(u,v){this.g=u,this.map=v}};function Yl(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ql(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cs(u){return u.h?1:u.g?u.g.size:0}function Is(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Kl(u,v){u.g?u.g.add(v):u.h=v}function Xl(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Yl.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.G);return v}return j(u.i)}var Xc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aa(u,v){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const S=u[x].indexOf("=");let G,Z=null;S>=0?(G=u[x].substring(0,S),Z=u[x].substring(S+1)):G=u[x],v(G,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function An(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof An?(this.l=u.l,Gt(this,u.j),this.o=u.o,this.g=u.g,Vr(this,u.u),this.h=u.h,Wl(this,eu(u.i)),this.m=u.m):u&&(v=String(u).match(Xc))?(this.l=!1,Gt(this,v[1]||"",!0),this.o=js(v[2]||""),this.g=js(v[3]||"",!0),Vr(this,v[4]),this.h=js(v[5]||"",!0),Wl(this,v[6]||"",!0),this.m=js(v[7]||"")):(this.l=!1,this.i=new Lr(null,this.l))}An.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(Bi(v,Na,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Bi(v,Na,!0),"@"),u.push(tr(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Bi(x,x.charAt(0)=="/"?Zl:Jc,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Bi(x,Wc)),u.join("")},An.prototype.resolve=function(u){const v=Ot(this);let x=!!u.j;x?Gt(v,u.j):x=!!u.o,x?v.o=u.o:x=!!u.g,x?v.g=u.g:x=u.u!=null;var S=u.h;if(x)Vr(v,u.u);else if(x=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var G=v.h.lastIndexOf("/");G!=-1&&(S=v.h.slice(0,G+1)+S)}if(G=S,G==".."||G==".")S="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){S=G.lastIndexOf("/",0)==0,G=G.split("/");const Z=[];for(let de=0;de<G.length;){const De=G[de++];De=="."?S&&de==G.length&&Z.push(""):De==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),S&&de==G.length&&Z.push("")):(Z.push(De),S=!0)}S=Z.join("/")}else S=G}return x?v.h=S:x=u.i.toString()!=="",x?Wl(v,eu(u.i)):x=!!u.m,x&&(v.m=u.m),v};function Ot(u){return new An(u)}function Gt(u,v,x){u.j=x?js(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Vr(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function Wl(u,v,x){v instanceof Lr?(u.i=v,Ca(u.i,u.l)):(x||(v=Bi(v,Pr)),u.i=new Lr(v,u.l))}function We(u,v,x){u.i.set(v,x)}function zi(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function js(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bi(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,fn),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Na=/[#\/\?@]/g,Jc=/[#\?:]/g,Zl=/[#\?]/g,Pr=/[#\?@]/g,Wc=/#/g;function Lr(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function mn(u){u.g||(u.g=new Map,u.h=0,u.i&&Aa(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}r=Lr.prototype,r.add=function(u,v){mn(this),this.i=null,u=Ur(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function Zc(u,v){mn(u),v=Ur(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function eo(u,v){return mn(u),v=Ur(u,v),u.g.has(v)}r.forEach=function(u,v){mn(this),this.g.forEach(function(x,S){x.forEach(function(G){u.call(v,G,S,this)},this)},this)};function to(u,v){mn(u);let x=[];if(typeof v=="string")eo(u,v)&&(x=x.concat(u.g.get(Ur(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)x=x.concat(u[v]);return x}r.set=function(u,v){return mn(this),this.i=null,u=Ur(this,u),eo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},r.get=function(u,v){return u?(u=to(this,u),u.length>0?String(u[0]):v):v};function Ra(u,v,x){Zc(u,v),x.length>0&&(u.i=null,u.g.set(Ur(u,v),j(x)),u.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var x=v[S];const G=tr(x);x=to(this,x);for(let Z=0;Z<x.length;Z++){let de=G;x[Z]!==""&&(de+="="+tr(x[Z])),u.push(de)}}return this.i=u.join("&")};function eu(u){const v=new Lr;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function Ur(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Ca(u,v){v&&!u.j&&(mn(u),u.i=null,u.g.forEach(function(x,S){const G=S.toLowerCase();S!=G&&(Zc(this,S),Ra(this,G,x))},u)),u.j=v}function as(u,v){const x=new ss;if(d.Image){const S=new Image;S.onload=b(Hn,x,"TestLoadImage: loaded",!0,v,S),S.onerror=b(Hn,x,"TestLoadImage: error",!1,v,S),S.onabort=b(Hn,x,"TestLoadImage: abort",!1,v,S),S.ontimeout=b(Hn,x,"TestLoadImage: timeout",!1,v,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function no(u,v){const x=new ss,S=new AbortController,G=setTimeout(()=>{S.abort(),Hn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then(Z=>{clearTimeout(G),Z.ok?Hn(x,"TestPingServer: ok",!0,v):Hn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Hn(x,"TestPingServer: error",!1,v)})}function Hn(u,v,x,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(x)}catch{}}function zr(){this.g=new Bc}function Ds(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ds,Hc),Ds.prototype.g=function(){return new Hi(this.i,this.h)};function Hi(u,v){Ct.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Hi,Ct),r=Hi.prototype,r.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,ls(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ls(this)),this.g&&(this.readyState=3,ls(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ia(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ia(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Br(this):ls(this),this.readyState==3&&Ia(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Br(this))},r.Na=function(u){this.g&&(this.response=u,Br(this))},r.ga=function(){this.g&&Br(this)};function Br(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ls(u)}r.setRequestHeader=function(u,v){this.A.append(u,v)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function ls(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qn(u){let v="";return Ne(u,function(x,S){v+=S,v+=":",v+=x,v+=`\r
`}),v}function qi(u,v,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=qn(x),typeof u=="string"?x!=null&&tr(x):We(u,v,x))}function nt(u){Ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(nt,Ct);var Os=/^https?$/i,so=["POST","PUT"];r=nt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,v,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$l.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(Z){Fi(this,Z);return}if(u=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)x.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Z of S.keys())x.set(Z,S.get(Z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(so,v,void 0)>=0)||S||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of x)this.g.setRequestHeader(Z,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Z){Fi(this,Z)}};function Fi(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,ro(u),nr(u)}function ro(u){u.A||(u.A=!0,Bt(u,"complete"),Bt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Bt(this,"complete"),Bt(this,"abort"),nr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nr(this,!0)),nt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Gi(this):this.Xa())},r.Xa=function(){Gi(this)};function Gi(u){if(u.h&&typeof c<"u"){if(u.v&&os(u)==4)setTimeout(u.Ca.bind(u),0);else if(Bt(u,"readystatechange"),os(u)==4){u.h=!1;try{const Z=u.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var S;if(S=Z===0){let de=String(u.D).match(Xc)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),S=!Os.test(de?de.toLowerCase():"")}x=S}if(x)Bt(u,"complete"),Bt(u,"success");else{u.o=6;try{var G=os(u)>2?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.ca()+"]",ro(u)}}finally{nr(u)}}}}function nr(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,v||Bt(u,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function os(u){return u.g?u.g.readyState:0}r.ca=function(){try{return os(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),jh(v)}};function Xt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function sr(u){const v={};u=(u.g&&os(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(A(u[S]))continue;var x=Yc(u[S]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Z=v[G]||[];v[G]=Z,Z.push(x)}ie(v,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function Hr(u){this.za=0,this.i=[],this.j=new ss,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ms("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ms("baseRetryDelayMs",5e3,u),this.Za=Ms("retryDelaySeedMs",1e4,u),this.Ta=Ms("forwardChannelMaxRetries",2,u),this.va=Ms("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Yl(u&&u.concurrentRequestLimit),this.Ba=new zr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Hr.prototype,r.ka=8,r.I=1,r.connect=function(u,v,x,S){It(0),this.W=u,this.H=v||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.J=lu(this,null,this.W),ks(this)};function io(u){if(ja(u),u.I==3){var v=u.V++,x=Ot(u.J);if(We(x,"SID",u.M),We(x,"RID",v),We(x,"TYPE","terminate"),$i(u,x),v=new rs(u,u.j,v),v.M=2,v.A=zi(Ot(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&d.Image&&(new Image().src=v.A,x=!0),x||(v.g=ou(v.j,null),v.g.ea(v.A)),v.F=Date.now(),As(v)}au(u)}function qr(u){u.g&&(lo(u),u.g.cancel(),u.g=null)}function ja(u){qr(u),u.v&&(d.clearTimeout(u.v),u.v=null),Oa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ks(u){if(!Ql(u.h)&&!u.m){u.m=!0;var v=u.Ea;F||N(),oe||(F(),oe=!0),R.add(v,u),u.D=0}}function Da(u,v){return Cs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ts(y(u.Ea,u,v),iu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const G=new rs(this,this.j,u);let Z=this.o;if(this.U&&(Z?(Z=I(Z),le(Z,this.U)):Z=this.U),this.u!==null||this.R||(G.J=Z,Z=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=tu(this,G,v),x=Ot(this.J),We(x,"RID",u),We(x,"CVER",22),this.G&&We(x,"X-HTTP-Session-Id",this.G),$i(this,x),Z&&(this.R?v="headers="+tr(qn(Z))+"&"+v:this.u&&qi(x,this.u,Z)),Kl(this.h,G),this.Ra&&We(x,"TYPE","init"),this.S?(We(x,"$req",v),We(x,"SID","null"),G.U=!0,Ss(G,x,null)):Ss(G,x,v),this.I=2}}else this.I==3&&(u?ao(this,u):this.i.length==0||Ql(this.h)||ao(this))};function ao(u,v){var x;v?x=v.l:x=u.V++;const S=Ot(u.J);We(S,"SID",u.M),We(S,"RID",x),We(S,"AID",u.K),$i(u,S),u.u&&u.o&&qi(S,u.u,u.o),x=new rs(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),v&&(u.i=v.G.concat(u.i)),v=tu(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Kl(u.h,x),Ss(x,S,v)}function $i(u,v){u.H&&Ne(u.H,function(x,S){We(v,S,x)}),u.l&&Ne({},function(x,S){We(v,S,x)})}function tu(u,v,x){x=Math.min(u.i.length,x);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var G=u.i;let De=-1;for(;;){const Tt=["count="+x];De==-1?x>0?(De=G[0].g,Tt.push("ofs="+De)):De=0:Tt.push("ofs="+De);let Ke=!0;for(let mt=0;mt<x;mt++){var Z=G[mt].g;const Fn=G[mt].map;if(Z-=De,Z<0)De=Math.max(0,G[mt].g-100),Ke=!1;else try{Z="req"+Z+"_"||"";try{var de=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Ps,cs]of de){let us=cs;g(cs)&&(us=kr(cs)),Tt.push(Z+Ps+"="+encodeURIComponent(us))}}catch(Ps){throw Tt.push(Z+"type="+encodeURIComponent("_badmap")),Ps}}catch{S&&S(Fn)}}if(Ke){de=Tt.join("&");break e}}de=void 0}return u=u.i.splice(0,x),v.G=u,de}function nu(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;F||N(),oe||(F(),oe=!0),R.add(v,u),u.A=0}}function Yi(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ts(y(u.Da,u),iu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ts(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),qr(this),su(this))};function lo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function su(u){u.g=new rs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=Ot(u.na);We(v,"RID","rpc"),We(v,"SID",u.M),We(v,"AID",u.K),We(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(v,"TO",u.ia),We(v,"TYPE","xmlhttp"),$i(u,v),u.u&&u.o&&qi(v,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=zi(Ot(v)),x.u=null,x.R=!0,wa(x,u)}r.Va=function(){this.C!=null&&(this.C=null,qr(this),Yi(this),It(19))};function Oa(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function ru(u,v){var x=null;if(u.g==v){Oa(u),lo(u),u.g=null;var S=2}else if(Is(u.h,v))x=v.G,Xl(u.h,v),S=1;else return;if(u.I!=0){if(v.o)if(S==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var G=u.D;S=Ta(),Bt(S,new Es(S,x)),ks(u)}else nu(u);else if(G=v.m,G==3||G==0&&v.X>0||!(S==1&&Da(u,v)||S==2&&Yi(u)))switch(x&&x.length>0&&(v=u.h,v.i=v.i.concat(x)),G){case 1:Vs(u,5);break;case 4:Vs(u,10);break;case 3:Vs(u,6);break;default:Vs(u,2)}}}function iu(u,v){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*v}function Vs(u,v){if(u.j.info("Error code "+v),v==2){var x=y(u.bb,u),S=u.Ua;const G=!S;S=new An(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gt(S,"https"),zi(S),G?as(S.toString(),x):no(S.toString(),x)}else It(2);u.I=0,u.l&&u.l.pa(v),au(u),ja(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function au(u){if(u.I=0,u.ja=[],u.l){const v=Jl(u.h);(v.length!=0||u.i.length!=0)&&(L(u.ja,v),L(u.ja,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.oa()}}function lu(u,v,x){var S=x instanceof An?Ot(x):new An(x);if(S.g!="")v&&(S.g=v+"."+S.g),Vr(S,S.u);else{var G=d.location;S=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;const Z=new An(null);S&&Gt(Z,S),v&&(Z.g=v),G&&Vr(Z,G),x&&(Z.h=x),S=Z}return x=u.G,v=u.wa,x&&v&&We(S,x,v),We(S,"VER",u.ka),$i(u,S),S}function ou(u,v,x){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new nt(new Ds({ab:x})):new nt(u.ma),v.Fa(u.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}r=cu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Fr(){}Fr.prototype.g=function(u,v){return new dn(u,v)};function dn(u,v){Ct.call(this),this.g=new Hr(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!A(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new rr(this)}E(dn,Ct),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){io(this.g)},dn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=kr(u),u=x);v.i.push(new Dt(v.Ya++,u)),v.I==3&&ks(v)},dn.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,dn.Z.N.call(this)};function uu(u){Kt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}E(uu,Kt);function du(){zn.call(this),this.status=1}E(du,zn);function rr(u){this.g=u}E(rr,cu),rr.prototype.ra=function(){Bt(this.g,"a")},rr.prototype.qa=function(u){Bt(this.g,new uu(u))},rr.prototype.pa=function(u){Bt(this.g,new du)},rr.prototype.oa=function(){Bt(this.g,"b")},Fr.prototype.createWebChannel=Fr.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,y1=function(){return new Fr},g1=function(){return Ta()},p1=Et,cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Li.NO_ERROR=0,Li.TIMEOUT=8,Li.HTTP_ERROR=6,Cd=Li,Gl.COMPLETE="complete",m1=Gl,qc.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Jo=qc,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,f1=nt}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});const $_="@firebase/firestore",Y_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new OC("@firebase/firestore");function ul(){return ya.logLevel}function me(r,...e){if(ya.logLevel<=$e.DEBUG){const n=e.map($p);ya.debug(`Firestore (${Ml}): ${r}`,...n)}}function Rr(r,...e){if(ya.logLevel<=$e.ERROR){const n=e.map($p);ya.error(`Firestore (${Ml}): ${r}`,...n)}}function Tl(r,...e){if(ya.logLevel<=$e.WARN){const n=e.map($p);ya.warn(`Firestore (${Ml}): ${r}`,...n)}}function $p(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,v1(r,i,n)}function v1(r,e,n){let i=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Rr(i),new Error(i)}function Je(r,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,r||v1(e,l,i)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class kC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class VC{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0,42304);let i=this.i;const l=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let c=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new wr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new wr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string",31837,{l:i}),new _1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class PC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new PC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0,3512);const i=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const l=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=zC(40);for(let c=0;c<l.length;++c)i.length<20&&l[c]<n&&(i+=e.charAt(l[c]%62))}return i}}function ze(r,e){return r<e?-1:r>e?1:0}function up(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const l=r.charAt(i),c=e.charAt(i);if(l!==c)return Gm(l)===Gm(c)?ze(l,c):Gm(l)?1:-1}return ze(r.length,e.length)}const BC=55296,HC=57343;function Gm(r){const e=r.charCodeAt(0);return e>=BC&&e<=HC}function wl(r,e,n){return r.length===e.length&&r.every(((i,l)=>n(i,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="__name__";class qs{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const c=qs.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return ze(e.length,n.length)}static compareSegments(e,n){const i=qs.isNumericId(e),l=qs.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?qs.extractNumericId(e).compare(qs.extractNumericId(n)):up(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ei.fromString(e.substring(4,e.length-2))}}class ct extends qs{construct(e,n,i){return new ct(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new ct(n)}static emptyPath(){return new ct([])}}const qC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends qs{construct(e,n,i){return new nn(e,n,i)}static isValidIdentifier(e){return qC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K_}static keyField(){return new nn([K_])}static fromServerFormat(e){const n=[];let i="",l=0;const c=()=>{if(i.length===0)throw new he(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new he(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(i+=g,l++):(c(),l++)}if(c(),d)throw new he(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ct.fromString(e))}static fromName(e){return new ve(ct.fromString(e).popFirst(5))}static empty(){return new ve(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r,e,n){if(!n)throw new he(se.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FC(r,e,n,i){if(e===!0&&i===!0)throw new he(se.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function X_(r){if(!ve.isDocumentKey(r))throw new he(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function J_(r){if(ve.isDocumentKey(r))throw new he(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function x1(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function hh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function Js(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(r);throw new he(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(r,e){const n={typeString:r};return e&&(n.value=e),n}function Oc(r,e){if(!x1(r))throw new he(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const d=r[i];if(l&&typeof d!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new he(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=-62135596800,Z_=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Z_);return new ft(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<W_)throw new he(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z_}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-W_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:zt("string",ft._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ft(0,0))}static max(){return new Re(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=-1;function GC(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,l=Re.fromTimestamp(i===1e9?new ft(n+1,0):new ft(n,i));return new wi(l,ve.empty(),e)}function $C(r){return new wi(r.readTime,r.key,hc)}class wi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new wi(Re.min(),ve.empty(),hc)}static max(){return new wi(Re.max(),ve.empty(),hc)}}function YC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(r){if(r.code!==se.FAILED_PRECONDITION||r.message!==QC)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((i,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,i)=>{n(e)}))}static reject(e){return new ae(((n,i)=>{i(e)}))}static waitFor(e){return new ae(((n,i)=>{let l=0,c=0,d=!1;e.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&n()}),(p=>i(p)))})),d=!0,c===l&&n()}))}static or(e){let n=ae.resolve(!1);for(const i of e)n=n.next((l=>l?ae.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,c)=>{i.push(n.call(this,l,c))})),this.waitFor(i)}static mapArray(e,n){return new ae(((i,l)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next((b=>{d[y]=b,++g,g===c&&i(d)}),(b=>l(b)))}}))}static doWhile(e,n){return new ae(((i,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):i()};c()}))}}function XC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=-1;function mh(r){return r==null}function Gd(r){return r===0&&1/r==-1/0}function JC(r){return typeof r=="number"&&Number.isInteger(r)&&!Gd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="";function WC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=eb(e)),e=ZC(r.get(n),e);return eb(e)}function ZC(r,e){let n=e;const i=r.length;for(let l=0;l<i;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case E1:n+="";break;default:n+=c}}return n}function eb(r){return r+E1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ji(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function T1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,i,l,c){this.key=e,this.value=n,this.color=i??tn.RED,this.left=l??tn.EMPTY,this.right=c??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,c){return new tn(e??this.key,n??this.value,i??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const c=i(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,i),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return tn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,l,c){return this}insert(e,n,i){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nb(this.data.getIterator())}getIteratorFrom(e){return new nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new kn([])}unionWith(e){let n=new qt(nn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new w1("Invalid base64 string: "+c):c}})(e);return new sn(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const eI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(r){if(Je(!!r,39018),typeof r=="string"){let e=0;const n=eI.exec(r);if(Je(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nt(r.seconds),nanos:Nt(r.nanos)}}function Nt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="server_timestamp",A1="__type__",N1="__previous_value__",R1="__local_write_time__";function Kp(r){var n,i;return((i=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[A1])==null?void 0:i.stringValue)===S1}function ph(r){const e=r.mapValue.fields[N1];return Kp(e)?ph(e):e}function fc(r){const e=Si(r.mapValue.fields[R1].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n,i,l,c,d,g,p,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b}}const $d="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||$d}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="__type__",nI="__max__",_d={mapValue:{}},I1="__vector__",Yd="value";function Ni(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Kp(r)?4:rI(r)?9007199254740991:sI(r)?10:11:we(28295,{value:r})}function Ws(r,e){if(r===e)return!0;const n=Ni(r);if(n!==Ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return fc(r).isEqual(fc(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Si(l.timestampValue),g=Si(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Ai(l.bytesValue).isEqual(Ai(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return Nt(l.geoPointValue.latitude)===Nt(c.geoPointValue.latitude)&&Nt(l.geoPointValue.longitude)===Nt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Nt(l.integerValue)===Nt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Nt(l.doubleValue),g=Nt(c.doubleValue);return d===g?Gd(d)===Gd(g):isNaN(d)&&isNaN(g)}return!1})(r,e);case 9:return wl(r.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(tb(d)!==tb(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!Ws(d[p],g[p])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function pc(r,e){return(r.values||[]).find((n=>Ws(n,e)))!==void 0}function Sl(r,e){if(r===e)return 0;const n=Ni(r),i=Ni(e);if(n!==i)return ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=Nt(c.integerValue||c.doubleValue),p=Nt(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(r,e);case 3:return sb(r.timestampValue,e.timestampValue);case 4:return sb(fc(r),fc(e));case 5:return up(r.stringValue,e.stringValue);case 6:return(function(c,d){const g=Ai(c),p=Ai(d);return g.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const b=ze(g[y],p[y]);if(b!==0)return b}return ze(g.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=ze(Nt(c.latitude),Nt(d.latitude));return g!==0?g:ze(Nt(c.longitude),Nt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return rb(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var w,j,L,B;const g=c.fields||{},p=d.fields||{},y=(w=g[Yd])==null?void 0:w.arrayValue,b=(j=p[Yd])==null?void 0:j.arrayValue,E=ze(((L=y==null?void 0:y.values)==null?void 0:L.length)||0,((B=b==null?void 0:b.values)==null?void 0:B.length)||0);return E!==0?E:rb(y,b)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===_d.mapValue&&d===_d.mapValue)return 0;if(c===_d.mapValue)return 1;if(d===_d.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let E=0;E<p.length&&E<b.length;++E){const w=up(p[E],b[E]);if(w!==0)return w;const j=Sl(g[p[E]],y[b[E]]);if(j!==0)return j}return ze(p.length,b.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function sb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const n=Si(r),i=Si(e),l=ze(n.seconds,i.seconds);return l!==0?l:ze(n.nanos,i.nanos)}function rb(r,e){const n=r.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const c=Sl(n[l],i[l]);if(c)return c}return ze(n.length,i.length)}function Al(r){return dp(r)}function dp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=Si(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ai(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",l=!0;for(const c of n.values||[])l?l=!1:i+=",",i+=dp(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of i)c?c=!1:l+=",",l+=`${d}:${dp(n.fields[d])}`;return l+"}"})(r.mapValue):we(61005,{value:r})}function Id(r){switch(Ni(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(r);return e?16+Id(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,c)=>l+Id(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let l=0;return ji(i.fields,((c,d)=>{l+=c.length+Id(d)})),l})(r.mapValue);default:throw we(13486,{value:r})}}function ib(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function hp(r){return!!r&&"integerValue"in r}function Xp(r){return!!r&&"arrayValue"in r}function ab(r){return!!r&&"nullValue"in r}function lb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function jd(r){return!!r&&"mapValue"in r}function sI(r){var n,i;return((i=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[C1])==null?void 0:i.stringValue)===I1}function rc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ji(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=rc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rc(r.arrayValue.values[n]);return e}return{...r}}function rI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===nI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(n)}setAll(e){let n=nn.emptyPath(),i={},l=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,i,l),i={},l=[],n=g.popLast()}d?i[g.lastSegment()]=rc(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,l)}delete(e){const n=this.field(e.popLast());jd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];jd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){ji(n,((l,c)=>e[l]=c));for(const l of i)delete e[l]}clone(){return new En(rc(this.value))}}function j1(r){const e=[];return ji(r.fields,((n,i)=>{const l=new nn([n]);if(jd(i)){const c=j1(i.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,i,l,c,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),En.empty(),0)}static newFoundDocument(e,n,i,l){return new on(e,1,n,Re.min(),i,l,0)}static newNoDocument(e,n){return new on(e,2,n,Re.min(),Re.min(),En.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,Re.min(),Re.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.position=e,this.inclusive=n}}function ob(r,e,n){let i=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?i=ve.comparator(ve.fromName(d.referenceValue),n.key):i=Sl(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function cb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ws(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function iI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{}class Ut extends D1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new lI(e,n,i):n==="array-contains"?new uI(e,i):n==="in"?new dI(e,i):n==="not-in"?new hI(e,i):n==="array-contains-any"?new fI(e,i):new Ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new oI(e,i):new cI(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sl(n,this.value)):n!==null&&Ni(this.value)===Ni(n)&&this.matchesComparison(Sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends D1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bs(e,n)}matches(e){return O1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O1(r){return r.op==="and"}function M1(r){return aI(r)&&O1(r)}function aI(r){for(const e of r.filters)if(e instanceof bs)return!1;return!0}function fp(r){if(r instanceof Ut)return r.field.canonicalString()+r.op.toString()+Al(r.value);if(M1(r))return r.filters.map((e=>fp(e))).join(",");{const e=r.filters.map((n=>fp(n))).join(",");return`${r.op}(${e})`}}function k1(r,e){return r instanceof Ut?(function(i,l){return l instanceof Ut&&i.op===l.op&&i.field.isEqual(l.field)&&Ws(i.value,l.value)})(r,e):r instanceof bs?(function(i,l){return l instanceof bs&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((c,d,g)=>c&&k1(d,l.filters[g])),!0):!1})(r,e):void we(19439)}function V1(r){return r instanceof Ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${Al(n.value)}`})(r):r instanceof bs?(function(n){return n.op.toString()+" {"+n.getFilters().map(V1).join(" ,")+"}"})(r):"Filter"}class lI extends Ut{constructor(e,n,i){super(e,n,i),this.key=ve.fromName(i.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class oI extends Ut{constructor(e,n){super(e,"in",n),this.keys=P1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class cI extends Ut{constructor(e,n){super(e,"not-in",n),this.keys=P1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function P1(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class uI extends Ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&pc(n.arrayValue,this.value)}}class dI extends Ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pc(this.value.arrayValue,n)}}class hI extends Ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pc(this.value.arrayValue,n)}}class fI extends Ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>pc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n=null,i=[],l=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function ub(r,e=null,n=[],i=[],l=null,c=null,d=null){return new mI(r,e,n,i,l,c,d)}function Jp(r){const e=Ie(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>fp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Al(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Al(i))).join(",")),e.Te=n}return e.Te}function Wp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!iI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!k1(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!cb(r.startAt,e.startAt)&&cb(r.endAt,e.endAt)}function mp(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n=null,i=[],l=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pI(r,e,n,i,l,c,d,g){return new Pl(r,e,n,i,l,c,d,g)}function Zp(r){return new Pl(r)}function db(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function L1(r){return r.collectionGroup!==null}function ic(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new qt(nn.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new gc(c,i))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new gc(nn.keyField(),i))}return e.Ie}function Ys(r){const e=Ie(r);return e.Ee||(e.Ee=gI(e,ic(r))),e.Ee}function gI(r,e){if(r.limitType==="F")return ub(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new gc(l.field,c)}));const n=r.endAt?new Qd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Qd(r.startAt.position,r.startAt.inclusive):null;return ub(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function pp(r,e){const n=r.filters.concat([e]);return new Pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Kd(r,e,n){return new Pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function gh(r,e){return Wp(Ys(r),Ys(e))&&r.limitType===e.limitType}function U1(r){return`${Jp(Ys(r))}|lt:${r.limitType}`}function dl(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>V1(l))).join(", ")}]`),mh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Al(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Al(l))).join(",")),`Target(${i})`})(Ys(r))}; limitType=${r.limitType})`}function yh(r,e){return e.isFoundDocument()&&(function(i,l){const c=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ve.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,l){for(const c of ic(i))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,l){for(const c of i.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(i,l){return!(i.startAt&&!(function(d,g,p){const y=ob(d,g,p);return d.inclusive?y<=0:y<0})(i.startAt,ic(i),l)||i.endAt&&!(function(d,g,p){const y=ob(d,g,p);return d.inclusive?y>=0:y>0})(i.endAt,ic(i),l))})(r,e)}function yI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function z1(r){return(e,n)=>{let i=!1;for(const l of ic(r)){const c=vI(l,e,n);if(c!==0)return c;i=i||l.field.isKeyField()}return 0}}function vI(r,e,n){const i=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Sl(p,y):we(42886)})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,c]of i)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,((n,i)=>{for(const[l,c]of i)e(l,c)}))}isEmpty(){return T1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new _t(ve.comparator);function Cr(){return _I}const B1=new _t(ve.comparator);function Wo(...r){let e=B1;for(const n of r)e=e.insert(n.key,n);return e}function H1(r){let e=B1;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ha(){return ac()}function q1(){return ac()}function ac(){return new ba((r=>r.toString()),((r,e)=>r.isEqual(e)))}const bI=new _t(ve.comparator),xI=new qt(ve.comparator);function Be(...r){let e=xI;for(const n of r)e=e.add(n);return e}const EI=new qt(ze);function TI(){return EI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function F1(r){return{integerValue:""+r}}function wI(r,e){return JC(e)?F1(e):eg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this._=void 0}}function SI(r,e,n){return r instanceof Xd?(function(l,c){const d={fields:{[A1]:{stringValue:S1},[R1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Kp(c)&&(c=ph(c)),c&&(d.fields[N1]=c),{mapValue:d}})(n,e):r instanceof yc?$1(r,e):r instanceof vc?Y1(r,e):(function(l,c){const d=G1(l,c),g=hb(d)+hb(l.Ae);return hp(d)&&hp(l.Ae)?F1(g):eg(l.serializer,g)})(r,e)}function AI(r,e,n){return r instanceof yc?$1(r,e):r instanceof vc?Y1(r,e):n}function G1(r,e){return r instanceof Jd?(function(i){return hp(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Xd extends vh{}class yc extends vh{constructor(e){super(),this.elements=e}}function $1(r,e){const n=Q1(e);for(const i of r.elements)n.some((l=>Ws(l,i)))||n.push(i);return{arrayValue:{values:n}}}class vc extends vh{constructor(e){super(),this.elements=e}}function Y1(r,e){let n=Q1(e);for(const i of r.elements)n=n.filter((l=>!Ws(l,i)));return{arrayValue:{values:n}}}class Jd extends vh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function hb(r){return Nt(r.integerValue||r.doubleValue)}function Q1(r){return Xp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function NI(r,e){return r.field.isEqual(e.field)&&(function(i,l){return i instanceof yc&&l instanceof yc||i instanceof vc&&l instanceof vc?wl(i.elements,l.elements,Ws):i instanceof Jd&&l instanceof Jd?Ws(i.Ae,l.Ae):i instanceof Xd&&l instanceof Xd})(r.transform,e.transform)}class RI{constructor(e,n){this.version=e,this.transformResults=n}}class vs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class _h{}function K1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new tg(r.key,vs.none()):new Mc(r.key,r.data,vs.none());{const n=r.data,i=En.empty();let l=new qt(nn.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),l=l.add(c)}return new Di(r.key,i,new kn(l.toArray()),vs.none())}}function CI(r,e,n){r instanceof Mc?(function(l,c,d){const g=l.value.clone(),p=mb(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):r instanceof Di?(function(l,c,d){if(!Dd(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=mb(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(X1(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function lc(r,e,n,i){return r instanceof Mc?(function(c,d,g,p){if(!Dd(c.precondition,d))return g;const y=c.value.clone(),b=pb(c.fieldTransforms,p,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,i):r instanceof Di?(function(c,d,g,p){if(!Dd(c.precondition,d))return g;const y=pb(c.fieldTransforms,p,d),b=d.data;return b.setAll(X1(c)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(r,e,n,i):(function(c,d,g){return Dd(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,e,n)}function II(r,e){let n=null;for(const i of r.fieldTransforms){const l=e.data.field(i.field),c=G1(i.transform,l||null);c!=null&&(n===null&&(n=En.empty()),n.set(i.field,c))}return n||null}function fb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&wl(i,l,((c,d)=>NI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Mc extends _h{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Di extends _h{constructor(e,n,i,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function X1(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function mb(r,e,n){const i=new Map;Je(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,g=e.data.field(c.field);i.set(c.field,AI(d,g,n[l]))}return i}function pb(r,e,n){const i=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);i.set(l.field,SI(c,d,e))}return i}class tg extends _h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jI extends _h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&CI(c,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=lc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=lc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=q1();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const p=K1(d,g);p!==null&&i.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,((n,i)=>fb(n,i)))&&wl(this.baseMutations,e.baseMutations,((n,i)=>fb(n,i)))}}class ng{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){Je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return bI})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,i[d].version);return new ng(e,n,i,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Fe;function kI(r){switch(r){case se.OK:return we(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function J1(r){if(r===void 0)return Rr("GRPC error has no .code"),se.UNKNOWN;switch(r){case Lt.OK:return se.OK;case Lt.CANCELLED:return se.CANCELLED;case Lt.UNKNOWN:return se.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return se.INTERNAL;case Lt.UNAVAILABLE:return se.UNAVAILABLE;case Lt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Lt.NOT_FOUND:return se.NOT_FOUND;case Lt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Lt.ABORTED:return se.ABORTED;case Lt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Lt.DATA_LOSS:return se.DATA_LOSS;default:return we(39323,{code:r})}}(Fe=Lt||(Lt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new Ei([4294967295,4294967295],0);function gb(r){const e=VI().encode(r),n=new h1;return n.update(e),new Uint8Array(n.digest())}function yb(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ei([n,i],0),new Ei([l,c],0)]}class sg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(i<0)throw new Zo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ei.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ei.fromNumber(i)));return l.compare(PI)===1&&(l=new Ei([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gb(e),[i,l]=yb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,l,c);if(!this.we(d))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new sg(c,l,n);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=gb(e),[i,l]=yb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,i,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new bh(Re.min(),l,new _t(ze),Cr(),Be())}}class kc{constructor(e,n,i,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new kc(i,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,i,l){this.be=e,this.removedTargetIds=n,this.key=i,this.De=l}}class W1{constructor(e,n){this.targetId=e,this.Ce=n}}class Z1{constructor(e,n,i=sn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class vb{constructor(){this.ve=0,this.Fe=_b(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),i=Be();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:we(38017,{changeType:c})}})),new kc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=_b()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cr(),this.Je=bd(),this.He=bd(),this.Ye=new _t(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(mp(c))if(i===0){const d=new ve(c.path);this.et(n,d,on.newNoDocument(d,Re.min()))}else Je(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=Ai(i).toUint8Array()}catch(p){if(p instanceof w1)return Tl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new sg(d,l,c)}catch(p){return Tl(p instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&mp(g.target)){const p=new ve(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,on.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let i=Be();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new bh(e,n,this.Ye,this.je,i);return this.je=Cr(),this.Je=bd(),this.He=bd(),this.Ye=new _t(ze),l}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function bd(){return new _t(ve.comparator)}function _b(){return new _t(ve.comparator)}const UI={asc:"ASCENDING",desc:"DESCENDING"},zI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BI={and:"AND",or:"OR"};class HI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gp(r,e){return r.useProto3Json||mh(e)?e:{value:e}}function Wd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function qI(r,e){return Wd(r,e.toTimestamp())}function Qs(r){return Je(!!r,49232),Re.fromTimestamp((function(n){const i=Si(n);return new ft(i.seconds,i.nanos)})(r))}function rg(r,e){return yp(r,e).canonicalString()}function yp(r,e){const n=(function(l){return new ct(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function tE(r){const e=ct.fromString(r);return Je(aE(e),10190,{key:e.toString()}),e}function vp(r,e){return rg(r.databaseId,e.path)}function $m(r,e){const n=tE(e);if(n.get(1)!==r.databaseId.projectId)throw new he(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(sE(n))}function nE(r,e){return rg(r.databaseId,e)}function FI(r){const e=tE(r);return e.length===4?ct.emptyPath():sE(e)}function _p(r){return new ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function sE(r){return Je(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function bb(r,e,n){return{name:vp(r,e),fields:n.value.mapValue.fields}}function GI(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Je(b===void 0||typeof b=="string",58123),sn.fromBase64String(b||"")):(Je(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),sn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const b=y.code===void 0?se.UNKNOWN:J1(y.code);return new he(b,y.message||"")})(d);n=new Z1(i,l,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=$m(r,i.document.name),c=Qs(i.document.updateTime),d=i.document.createTime?Qs(i.document.createTime):Re.min(),g=new En({mapValue:{fields:i.document.fields}}),p=on.newFoundDocument(l,c,d,g),y=i.targetIds||[],b=i.removedTargetIds||[];n=new Od(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=$m(r,i.document),c=i.readTime?Qs(i.readTime):Re.min(),d=on.newNoDocument(l,c),g=i.removedTargetIds||[];n=new Od([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=$m(r,i.document),c=i.removedTargetIds||[];n=new Od([],c,l,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:c}=i,d=new MI(l,c),g=i.targetId;n=new W1(g,d)}}return n}function $I(r,e){let n;if(e instanceof Mc)n={update:bb(r,e.key,e.value)};else if(e instanceof tg)n={delete:vp(r,e.key)};else if(e instanceof Di)n={update:bb(r,e.key,e.data),updateMask:tj(e.fieldMask)};else{if(!(e instanceof jI))return we(16599,{Vt:e.type});n={verify:vp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const g=d.transform;if(g instanceof Xd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof yc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof vc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Jd)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:qI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(r,e.precondition)),n}function YI(r,e){return r&&r.length>0?(Je(e!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?Qs(l.updateTime):Qs(c);return d.isEqual(Re.min())&&(d=Qs(c)),new RI(d,l.transformResults||[])})(n,e)))):[]}function QI(r,e){return{documents:[nE(r,e.path)]}}function KI(r,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=nE(r,l);const c=(function(y){if(y.length!==0)return iE(bs.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((b=>(function(w){return{field:hl(w.field),direction:WI(w.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=gp(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function XI(r){let e=FI(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){Je(i===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(E){const w=rE(E);return w instanceof bs&&M1(w)?w.getFilters():[w]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((w=>(function(L){return new gc(fl(L.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(w)))})(n.orderBy));let g=null;n.limit&&(g=(function(E){let w;return w=typeof E=="object"?E.value:E,mh(w)?null:w})(n.limit));let p=null;n.startAt&&(p=(function(E){const w=!!E.before,j=E.values||[];return new Qd(j,w)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const w=!E.before,j=E.values||[];return new Qd(j,w)})(n.endAt)),pI(e,l,d,c,g,"F",p,y)}function JI(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rE(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fl(n.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=fl(n.unaryFilter.field);return Ut.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=fl(n.unaryFilter.field);return Ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fl(n.unaryFilter.field);return Ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ut.create(fl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return bs.create(n.compositeFilter.filters.map((i=>rE(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(r):we(30097,{filter:r})}function WI(r){return UI[r]}function ZI(r){return zI[r]}function ej(r){return BI[r]}function hl(r){return{fieldPath:r.canonicalString()}}function fl(r){return nn.fromServerFormat(r.fieldPath)}function iE(r){return r instanceof Ut?(function(n){if(n.op==="=="){if(lb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(ab(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(ab(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:ZI(n.op),value:n.value}}})(r):r instanceof bs?(function(n){const i=n.getFilters().map((l=>iE(l)));return i.length===1?i[0]:{compositeFilter:{op:ej(n.op),filters:i}}})(r):we(54877,{filter:r})}function tj(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function aE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,i,l,c=Re.min(),d=Re.min(),g=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.yt=e}}function sj(r){const e=XI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Kd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.Cn=new ij}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(wi.min())}updateCollectionGroup(e,n,i){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class ij{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new qt(ct.comparator),c=!l.has(i);return this.index[n]=l.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new qt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lE=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(lE,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nl(0)}static cr(){return new Nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="LruGarbageCollector",aj=1048576;function Tb([r,e],[n,i]){const l=ze(r,n);return l===0?ze(e,i):l}class lj{constructor(e){this.Ir=e,this.buffer=new qt(Tb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Tb(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oj{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Eb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vl(n)?me(Eb,"Ignoring IndexedDB error during garbage collection: ",n):await kl(n)}await this.Vr(3e5)}))}}class cj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(fh.ce);const i=new lj(n);return this.mr.forEachTarget(e,(l=>i.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>i.Ar(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(xb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,l,c,d,g,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,d=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,g=Date.now(),this.removeTargets(e,i,n)))).next((E=>(c=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),ul()<=$e.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:E}))))}}function uj(r,e){return new cj(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.changes=new ba((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ae.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&lc(i.mutation,l,kn.empty(),ft.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Be()){const l=ha();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((c=>{let d=Wo();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ha();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Be())))}populateOverlays(e,n,i){const l=[];return i.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,i,l){let c=Cr();const d=ac(),g=(function(){return ac()})();return n.forEach(((p,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof Di)?c=c.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),lc(b.mutation,y,b.mutation.getFieldMask(),ft.now())):d.set(y.key,kn.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>g.set(y,new hj(b,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const i=ac();let l=new _t(((d,g)=>d-g)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let b=i.get(p)||kn.empty();b=g.applyToLocalView(y,b),i.set(p,b);const E=(l.get(g.batchId)||Be()).add(p);l=l.insert(g.batchId,E)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,b=p.value,E=q1();b.forEach((w=>{if(!c.has(w)){const j=K1(n.get(w),i.get(w));j!==null&&E.set(w,j),c=c.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ae.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):L1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-c.size):ae.resolve(ha());let g=hc,p=c;return d.next((y=>ae.forEach(y,((b,E)=>(g<E.largestBatchId&&(g=E.largestBatchId),c.get(b)?ae.resolve():this.remoteDocumentCache.getEntry(e,b).next((w=>{p=p.insert(b,w)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,Be()))).next((b=>({batchId:g,changes:H1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((i=>{let l=Wo();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const c=n.collectionGroup;let d=Wo();return this.indexManager.getCollectionParents(e,c).next((g=>ae.forEach(g,(p=>{const y=(function(E,w){return new Pl(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((E,w)=>{d=d.insert(E,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,l)))).next((d=>{c.forEach(((p,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,on.newInvalidDocument(b)))}));let g=Wo();return d.forEach(((p,y)=>{const b=c.get(p);b!==void 0&&lc(b.mutation,y,kn.empty(),ft.now()),yh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Qs(l.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:sj(l.bundledQuery),readTime:Qs(l.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.overlays=new _t(ve.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ha();return ae.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&i.set(l,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,c)=>{this.St(e,n,c)})),ae.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.qr.get(i);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,n,i){const l=ha(),c=n.length+1,d=new ve(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>i&&l.set(p.getKey(),p)}return ae.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let c=new _t(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=c.get(y.largestBatchId);b===null&&(b=ha(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=ha(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=l)););return ae.resolve(g)}St(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(i.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new OI(n,i));let c=this.qr.get(n);c===void 0&&(c=Be(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Qr=new qt(Yt.$r),this.Ur=new qt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Yt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new ve(new ct([])),i=new Yt(n,e),l=new Yt(n,e+1),c=[];return this.Ur.forEachInRange([i,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new ct([])),i=new Yt(n,e),l=new Yt(n,e+1);let c=Be();return this.Ur.forEachInRange([i,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Yt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Yt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new DI(c,n,i,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Yt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ae.resolve(d)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.ei(i),c=l<0?0:l;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Qp:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Yt(n,0),l=new Yt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new qt(ze);return n.forEach((l=>{const c=new Yt(l,0),d=new Yt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{i=i.add(g.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let c=i;ve.isDocumentKey(c)||(c=c.child(""));const d=new Yt(new ve(c),0);let g=new qt(ze);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Yr)),!0)}),d),ae.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((i=>{const l=this.Xr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(n.mutations,(l=>{const c=new Yt(l.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Yt(n,0),l=this.Zr.firstAfterOrEqual(i);return ae.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.ri=e,this.docs=(function(){return new _t(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ae.resolve(i?i.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let i=Cr();return n.forEach((l=>{const c=this.docs.get(l);i=i.insert(l,c?c.document.mutableCopy():on.newInvalidDocument(l))})),ae.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let c=Cr();const d=n.path,g=new ve(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||YC($C(b),i)<=0||(l.has(b.key)||yh(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,n,i,l){we(9500)}ii(e,n){return ae.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new _j(this)}getSize(e){return ae.resolve(this.size)}}class _j extends dj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(i)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.persistence=e,this.si=new ba((n=>Jp(n)),Wp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=Nl.ur()}forEachTarget(e,n){return this.si.forEach(((i,l)=>n(l))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,i){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),ae.waitFor(c).next((()=>l))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ae.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ae.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),ae.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ae.resolve(i)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.ui={},this.overlays={},this.ci=new fh(0),this.li=!1,this.li=!0,this.hi=new gj,this.referenceDelegate=e(this),this.Pi=new bj(this),this.indexManager=new rj,this.remoteDocumentCache=(function(l){return new vj(l)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new nj(n),this.Ii=new mj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new yj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){me("MemoryPersistence","Starting transaction:",e);const l=new xj(this.ci.next());return this.referenceDelegate.Ei(),i(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class xj extends KC{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Ri=new ig,this.Vi=null}static mi(e){return new ag(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const l=ve.fromPath(i);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zd{constructor(e,n){this.persistence=e,this.pi=new ba((i=>WC(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=uj(this,n)}static mi(e,n){return new Zd(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((i,l)=>this.br(e,i,l).next((c=>c?ae.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((g=>{g||(i++,c.removeEntry(d,Re.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Id(e.data.value)),n}br(e,n,i){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return ae.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=l}static As(e,n){let i=Be(),l=Be();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new lg(e,n.fromCache,i,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zA()?8:XC(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Ej;return this.Ss(e,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>c.result))}bs(e,n,i,l){return i.documentReadCount<this.fs?(ul()<=$e.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(ul()<=$e.DEBUG&&me("QueryEngine","Query:",dl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.gs*l?(ul()<=$e.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ys(n))):ae.resolve())}ys(e,n){if(db(n))return ae.resolve(null);let i=Ys(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Kd(n,null,"F"),i=Ys(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Be(...c);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(e,Kd(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,i,l){return db(n)||l.isEqual(Re.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,i,l)?ae.resolve(null):(ul()<=$e.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),dl(n)),this.vs(e,d,n,GC(l,hc)).next((g=>g)))}))}Ds(e,n){let i=new qt(z1(e));return n.forEach(((l,c)=>{yh(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,i){return ul()<=$e.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ps.getDocumentsMatchingQuery(e,n,wi.min(),i)}vs(e,n,i,l){return this.ps.getDocumentsMatchingQuery(e,i,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="LocalStore",wj=3e8;class Sj{constructor(e,n,i,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new _t(ze),this.xs=new ba((c=>Jp(c)),Wp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Aj(r,e,n,i){return new Sj(r,e,n,i)}async function cE(r,e){const n=Ie(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],g=[];let p=Be();for(const y of l){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of c){g.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function Nj(r,e){const n=Ie(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,b){const E=y.batch,w=E.keys();let j=ae.resolve();return w.forEach((L=>{j=j.next((()=>b.getEntry(p,L))).next((B=>{const P=y.docVersions.get(L);Je(P!==null,48541),B.version.compareTo(P)<0&&(E.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),b.addEntry(B)))}))})),j.next((()=>g.mutationQueue.removeMutationBatch(p,E)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let p=Be();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function uE(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Rj(r,e){const n=Ie(r),i=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];e.targetChanges.forEach(((b,E)=>{const w=l.get(E);if(!w)return;g.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,E))));let j=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?j=j.withResumeToken(sn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,i)),l=l.insert(E,j),(function(B,P,H){return B.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=wj?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(w,j,b)&&g.push(n.Pi.updateTargetData(c,j))}));let p=Cr(),y=Be();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),g.push(Cj(c,d,e.documentUpdates).next((b=>{p=b.ks,y=b.qs}))),!i.isEqual(Re.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((E=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(b)}return ae.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=l,c)))}function Cj(r,e,n){let i=Be(),l=Be();return n.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=Cr();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):me(og,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:l}}))}function Ij(r,e){const n=Ie(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function jj(r,e){const n=Ie(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.Pi.getTargetData(i,e).next((c=>c?(l=c,ae.resolve(l)):n.Pi.allocateTargetId(i).next((d=>(l=new vi(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.Ms.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function bp(r,e,n){const i=Ie(r),l=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Vl(d))throw d;me(og,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(l.target)}function wb(r,e,n){const i=Ie(r);let l=Re.min(),c=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,b){const E=Ie(p),w=E.xs.get(b);return w!==void 0?ae.resolve(E.Ms.get(w)):E.Pi.getTargetData(y,b)})(i,d,Ys(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?l:Re.min(),n?c:Be()))).next((g=>(Dj(i,yI(e),g),{documents:g,Qs:c})))))}function Dj(r,e,n){let i=r.Os.get(e)||Re.min();n.forEach(((l,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Os.set(e,i)}class Sb{constructor(){this.activeTargetIds=TI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oj{constructor(){this.Mo=new Sb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Sb,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="ConnectivityMonitor";class Nb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Ab,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Ab,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function xp(){return xd===null?xd=(function(){return 268435456+Math.round(2147483648*Math.random())})():xd++,"0x"+xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="RestConnection",kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${l}`,this.Wo=this.databaseId.database===$d?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Go(e,n,i,l,c){const d=xp(),g=this.zo(e,n.toUriEncodedString());me(Ym,`Sending RPC '${e}' ${d}:`,g,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:y}=new URL(g),b=jl(y);return this.Jo(e,g,p,i,b).then((E=>(me(Ym,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Tl(Ym,`RPC '${e}' ${d} failed with error: `,E,"url: ",g,"request:",i),E}))}Ho(e,n,i,l,c,d){return this.Go(e,n,i,l,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),i&&i.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const i=kj[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class Lj extends Vj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,l,c){const d=xp();return new Promise(((g,p)=>{const y=new f1;y.setWithCredentials(!0),y.listenOnce(m1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Cd.NO_ERROR:const E=y.getResponseJson();me(an,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),g(E);break;case Cd.TIMEOUT:me(an,`RPC '${e}' ${d} timed out`),p(new he(se.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:const w=y.getStatus();if(me(an,`RPC '${e}' ${d} failed with status:`,w,"response text:",y.getResponseText()),w>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const L=j==null?void 0:j.error;if(L&&L.status&&L.message){const B=(function(H){const J=H.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(J)>=0?J:se.UNKNOWN})(L.status);p(new he(B,L.message))}else p(new he(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new he(se.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{me(an,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);me(an,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",b,i,15)}))}T_(e,n,i){const l=xp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=y1(),g=g1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const b=c.join("");me(an,`Creating RPC '${e}' stream ${l}: ${b}`,p);const E=d.createWebChannel(b,p);this.I_(E);let w=!1,j=!1;const L=new Pj({Yo:P=>{j?me(an,`Not sending because RPC '${e}' stream ${l} is closed:`,P):(w||(me(an,`Opening RPC '${e}' stream ${l} transport.`),E.open(),w=!0),me(an,`RPC '${e}' stream ${l} sending:`,P),E.send(P))},Zo:()=>E.close()}),B=(P,H,J)=>{P.listen(H,(U=>{try{J(U)}catch($){setTimeout((()=>{throw $}),0)}}))};return B(E,Jo.EventType.OPEN,(()=>{j||(me(an,`RPC '${e}' stream ${l} transport opened.`),L.o_())})),B(E,Jo.EventType.CLOSE,(()=>{j||(j=!0,me(an,`RPC '${e}' stream ${l} transport closed`),L.a_(),this.E_(E))})),B(E,Jo.EventType.ERROR,(P=>{j||(j=!0,Tl(an,`RPC '${e}' stream ${l} transport errored. Name:`,P.name,"Message:",P.message),L.a_(new he(se.UNAVAILABLE,"The operation could not be completed")))})),B(E,Jo.EventType.MESSAGE,(P=>{var H;if(!j){const J=P.data[0];Je(!!J,16349);const U=J,$=(U==null?void 0:U.error)||((H=U[0])==null?void 0:H.error);if($){me(an,`RPC '${e}' stream ${l} received error:`,$);const F=$.status;let oe=(function(C){const O=Lt[C];if(O!==void 0)return J1(O)})(F),R=$.message;oe===void 0&&(oe=se.INTERNAL,R="Unknown error status: "+F+" with message "+$.message),j=!0,L.a_(new he(oe,R)),E.close()}else me(an,`RPC '${e}' stream ${l} received:`,J),L.u_(J)}})),B(g,p1.STAT_EVENT,(P=>{P.stat===cp.PROXY?me(an,`RPC '${e}' stream ${l} detected buffering proxy`):P.stat===cp.NOPROXY&&me(an,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(r){return new HI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,i=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="PersistentStream";class hE{constructor(e,n,i,l,c,d,g,p){this.Mi=e,this.S_=i,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new he(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Rb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(Rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Uj extends hE{constructor(e,n,i,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GI(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Re.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Qs(d.readTime):Re.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=_p(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=mp(p)?{documents:QI(c,p)}:{query:KI(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=eE(c,d.resumeToken);const y=gp(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Re.min())>0){g.readTime=Wd(c,d.snapshotVersion.toTimestamp());const y=gp(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const i=JI(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=_p(this.serializer),n.removeTarget=e,this.q_(n)}}class zj extends hE{constructor(e,n,i,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YI(e.writeResults,e.commitTime),i=Qs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=_p(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>$I(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{}class Hj extends Bj{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new he(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,yp(n,i),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(se.UNKNOWN,c.toString())}))}Ho(e,n,i,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,yp(n,i),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(se.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class Fj{constructor(e,n,i,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{xa(this)&&(me(va,"Restarting streams for network reachability change."),await(async function(p){const y=Ie(p);y.Ea.add(4),await Vc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Eh(y)})(this))}))})),this.Ra=new qj(i,l)}}async function Eh(r){if(xa(r))for(const e of r.da)await e(!0)}async function Vc(r){for(const e of r.da)await e(!1)}function fE(r,e){const n=Ie(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hg(n)?dg(n):Ll(n).O_()&&ug(n,e))}function cg(r,e){const n=Ie(r),i=Ll(n);n.Ia.delete(e),i.O_()&&mE(n,e),n.Ia.size===0&&(i.O_()?i.L_():xa(n)&&n.Ra.set("Unknown"))}function ug(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(r).Y_(e)}function mE(r,e){r.Va.Ue(e),Ll(r).Z_(e)}function dg(r){r.Va=new LI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ll(r).start(),r.Ra.ua()}function hg(r){return xa(r)&&!Ll(r).x_()&&r.Ia.size>0}function xa(r){return Ie(r).Ea.size===0}function pE(r){r.Va=void 0}async function Gj(r){r.Ra.set("Online")}async function $j(r){r.Ia.forEach(((e,n)=>{ug(r,e)}))}async function Yj(r,e){pE(r),hg(r)?(r.Ra.ha(e),dg(r)):r.Ra.set("Unknown")}async function Qj(r,e,n){if(r.Ra.set("Online"),e instanceof Z1&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(r,e)}catch(i){me(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await eh(r,i)}else if(e instanceof Od?r.Va.Ze(e):e instanceof W1?r.Va.st(e):r.Va.tt(e),!n.isEqual(Re.min()))try{const i=await uE(r.localStore);n.compareTo(i)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(sn.EMPTY_BYTE_STRING,b.snapshotVersion)),mE(c,p);const E=new vi(b.target,p,y,b.sequenceNumber);ug(c,E)})),c.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(i){me(va,"Failed to raise snapshot:",i),await eh(r,i)}}async function eh(r,e,n){if(!Vl(e))throw e;r.Ea.add(1),await Vc(r),r.Ra.set("Offline"),n||(n=()=>uE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(va,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Eh(r)}))}function gE(r,e){return e().catch((n=>eh(r,n,e)))}async function Th(r){const e=Ie(r),n=Ri(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qp;for(;Kj(e);)try{const l=await Ij(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,Xj(e,l)}catch(l){await eh(e,l)}yE(e)&&vE(e)}function Kj(r){return xa(r)&&r.Ta.length<10}function Xj(r,e){r.Ta.push(e);const n=Ri(r);n.O_()&&n.X_&&n.ea(e.mutations)}function yE(r){return xa(r)&&!Ri(r).x_()&&r.Ta.length>0}function vE(r){Ri(r).start()}async function Jj(r){Ri(r).ra()}async function Wj(r){const e=Ri(r);for(const n of r.Ta)e.ea(n.mutations)}async function Zj(r,e,n){const i=r.Ta.shift(),l=ng.from(i,e,n);await gE(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Th(r)}async function e4(r,e){e&&Ri(r).X_&&await(async function(i,l){if((function(d){return kI(d)&&d!==se.ABORTED})(l.code)){const c=i.Ta.shift();Ri(i).B_(),await gE(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Th(i)}})(r,e),yE(r)&&vE(r)}async function Cb(r,e){const n=Ie(r);n.asyncQueue.verifyOperationInProgress(),me(va,"RemoteStore received new credentials");const i=xa(n);n.Ea.add(3),await Vc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Eh(n)}async function t4(r,e){const n=Ie(r);e?(n.Ea.delete(2),await Eh(n)):e||(n.Ea.add(2),await Vc(n),n.Ra.set("Unknown"))}function Ll(r){return r.ma||(r.ma=(function(n,i,l){const c=Ie(n);return c.sa(),new Uj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:Gj.bind(null,r),t_:$j.bind(null,r),r_:Yj.bind(null,r),H_:Qj.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),hg(r)?dg(r):r.Ra.set("Unknown")):(await r.ma.stop(),pE(r))}))),r.ma}function Ri(r){return r.fa||(r.fa=(function(n,i,l){const c=Ie(n);return c.sa(),new zj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jj.bind(null,r),r_:e4.bind(null,r),ta:Wj.bind(null,r),na:Zj.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Th(r)):(await r.fa.stop(),r.Ta.length>0&&(me(va,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,i,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=c,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,c){const d=Date.now()+i,g=new fg(e,n,d,l,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mg(r,e){if(Rr("AsyncQueue",`${e}: ${r}`),Vl(r))return new he(se.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ve.comparator(n.key,i.key):(n,i)=>ve.comparator(n.key,i.key),this.keyedMap=Wo(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.ga=new _t(ve.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Rl{constructor(e,n,i,l,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Rl(e,n,vl.emptySet(n),d,i,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class s4{constructor(){this.queries=jb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Ie(n),c=l.queries;l.queries=jb(),c.forEach(((d,g)=>{for(const p of g.Sa)p.onError(i)}))})(this,new he(se.ABORTED,"Firestore shutting down"))}}function jb(){return new ba((r=>U1(r)),gh)}async function _E(r,e){const n=Ie(r);let i=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(i=2):(c=new n4,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=mg(d,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&pg(n)}async function bE(r,e){const n=Ie(r),i=e.query;let l=3;const c=n.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function r4(r,e){const n=Ie(r);let i=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(i=!0);d.wa=l}}i&&pg(n)}function i4(r,e,n){const i=Ie(r),l=i.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);i.queries.delete(e)}function pg(r){r.Ca.forEach((e=>{e.next()}))}var Ep,Db;(Db=Ep||(Ep={})).Ma="default",Db.Cache="cache";class xE{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Rl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.key=e}}class TE{constructor(e){this.key=e}}class a4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=z1(e),this.tu=new vl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Ib,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,E)=>{const w=l.get(b),j=yh(this.query,E)?E:null,L=!!w&&this.mutatedKeys.has(w.key),B=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let P=!1;w&&j?w.data.isEqual(j.data)?L!==B&&(i.track({type:3,doc:j}),P=!0):this.su(w,j)||(i.track({type:2,doc:j}),P=!0,(p&&this.eu(j,p)>0||y&&this.eu(j,y)<0)&&(g=!0)):!w&&j?(i.track({type:0,doc:j}),P=!0):w&&!j&&(i.track({type:1,doc:w}),P=!0,(p||y)&&(g=!0)),P&&(j?(d=d.add(j),c=B?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,E)=>(function(j,L){const B=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:P})}};return B(j)-B(L)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(i),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new Rl(this.query,e.tu,c,d,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ib,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new TE(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new EE(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gg="SyncEngine";class l4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class o4{constructor(e){this.key=e,this.hu=!1}}class c4{constructor(e,n,i,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ba((g=>U1(g)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new _t(ve.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=Nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function u4(r,e,n=!0){const i=CE(r);let l;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await wE(i,e,n,!0),l}async function d4(r,e){const n=CE(r);await wE(n,e,!0,!1)}async function wE(r,e,n,i){const l=await jj(r.localStore,Ys(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await h4(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&fE(r.remoteStore,l),g}async function h4(r,e,n,i,l){r.pu=(E,w,j)=>(async function(B,P,H,J){let U=P.view.ru(H);U.Cs&&(U=await wb(B.localStore,P.query,!1).then((({documents:R})=>P.view.ru(R,U))));const $=J&&J.targetChanges.get(P.targetId),F=J&&J.targetMismatches.get(P.targetId)!=null,oe=P.view.applyChanges(U,B.isPrimaryClient,$,F);return Mb(B,P.targetId,oe.au),oe.snapshot})(r,E,w,j);const c=await wb(r.localStore,e,!0),d=new a4(e,c.Qs),g=d.ru(c.documents),p=kc.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",l),y=d.applyChanges(g,r.isPrimaryClient,p);Mb(r,n,y.au);const b=new l4(e,n,d);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function f4(r,e,n){const i=Ie(r),l=i.Tu.get(e),c=i.Iu.get(l.targetId);if(c.length>1)return i.Iu.set(l.targetId,c.filter((d=>!gh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await bp(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&cg(i.remoteStore,l.targetId),Tp(i,l.targetId)})).catch(kl)):(Tp(i,l.targetId),await bp(i.localStore,l.targetId,!0))}async function m4(r,e){const n=Ie(r),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cg(n.remoteStore,i.targetId))}async function p4(r,e,n){const i=E4(r);try{const l=await(function(d,g){const p=Ie(d),y=ft.now(),b=g.reduce(((j,L)=>j.add(L.key)),Be());let E,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let L=Cr(),B=Be();return p.Ns.getEntries(j,b).next((P=>{L=P,L.forEach(((H,J)=>{J.isValidDocument()||(B=B.add(H))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,L))).next((P=>{E=P;const H=[];for(const J of g){const U=II(J,E.get(J.key).overlayedDocument);U!=null&&H.push(new Di(J.key,U,j1(U.value.mapValue),vs.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,H,g)})).next((P=>{w=P;const H=P.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(j,P.batchId,H)}))})).then((()=>({batchId:w.batchId,changes:H1(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new _t(ze)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y})(i,l.batchId,n),await Pc(i,l.changes),await Th(i.remoteStore)}catch(l){const c=mg(l,"Failed to persist write");n.reject(c)}}async function SE(r,e){const n=Ie(r);try{const i=await Rj(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Je(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Je(d.hu,14607):l.removedDocuments.size>0&&(Je(d.hu,42227),d.hu=!1))})),await Pc(n,i,e)}catch(i){await kl(i)}}function Ob(r,e,n){const i=Ie(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const p=Ie(d);p.onlineState=g;let y=!1;p.queries.forEach(((b,E)=>{for(const w of E.Sa)w.va(g)&&(y=!0)})),y&&pg(p)})(i.eventManager,e),l.length&&i.Pu.H_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function g4(r,e,n){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),c=l&&l.key;if(c){let d=new _t(ve.comparator);d=d.insert(c,on.newNoDocument(c,Re.min()));const g=Be().add(c),p=new bh(Re.min(),new Map,new _t(ze),d,g);await SE(i,p),i.du=i.du.remove(c),i.Au.delete(e),yg(i)}else await bp(i.localStore,e,!1).then((()=>Tp(i,e,n))).catch(kl)}async function y4(r,e){const n=Ie(r),i=e.batch.batchId;try{const l=await Nj(n.localStore,e);NE(n,i,null),AE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Pc(n,l)}catch(l){await kl(l)}}async function v4(r,e,n){const i=Ie(r);try{const l=await(function(d,g){const p=Ie(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return p.mutationQueue.lookupMutationBatch(y,g).next((E=>(Je(E!==null,37113),b=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>p.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);NE(i,e,n),AE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Pc(i,l)}catch(l){await kl(l)}}function AE(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function NE(r,e,n){const i=Ie(r);let l=i.Vu[i.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),i.Vu[i.currentUser.toKey()]=l}}function Tp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),n&&r.Pu.yu(i,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||RE(r,i)}))}function RE(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(cg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),yg(r))}function Mb(r,e,n){for(const i of n)i instanceof EE?(r.Ru.addReference(i.key,e),_4(r,i)):i instanceof TE?(me(gg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||RE(r,i.key)):we(19791,{wu:i})}function _4(r,e){const n=e.key,i=n.path.canonicalString();r.du.get(n)||r.Eu.has(i)||(me(gg,"New document in limbo: "+n),r.Eu.add(i),yg(r))}function yg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(ct.fromString(e)),i=r.fu.next();r.Au.set(i,new o4(n)),r.du=r.du.insert(n,i),fE(r.remoteStore,new vi(Ys(Zp(n.path)),i,"TargetPurposeLimboResolution",fh.ce))}}async function Pc(r,e,n){const i=Ie(r),l=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,p)=>{d.push(i.pu(p,e,n).then((y=>{var b;if((y||n)&&i.isPrimaryClient){const E=y?!y.fromCache:(b=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:b.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){l.push(y);const E=lg.As(p.targetId,y);c.push(E)}})))})),await Promise.all(d),i.Pu.H_(l),await(async function(p,y){const b=Ie(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ae.forEach(y,(w=>ae.forEach(w.Es,(j=>b.persistence.referenceDelegate.addReference(E,w.targetId,j))).next((()=>ae.forEach(w.ds,(j=>b.persistence.referenceDelegate.removeReference(E,w.targetId,j)))))))))}catch(E){if(!Vl(E))throw E;me(og,"Failed to update sequence numbers: "+E)}for(const E of y){const w=E.targetId;if(!E.fromCache){const j=b.Ms.get(w),L=j.snapshotVersion,B=j.withLastLimboFreeSnapshotVersion(L);b.Ms=b.Ms.insert(w,B)}}})(i.localStore,c))}async function b4(r,e){const n=Ie(r);if(!n.currentUser.isEqual(e)){me(gg,"User change. New user:",e.toKey());const i=await cE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new he(se.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pc(n,i.Ls)}}function x4(r,e){const n=Ie(r),i=n.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let l=Be();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const g=n.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function CE(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=SE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g4.bind(null,e),e.Pu.H_=r4.bind(null,e.eventManager),e.Pu.yu=i4.bind(null,e.eventManager),e}function E4(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v4.bind(null,e),e}class th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Aj(this.persistence,new Tj,e.initialUser,this.serializer)}Cu(e){return new oE(ag.mi,this.serializer)}Du(e){return new Oj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}th.provider={build:()=>new th};class T4 extends th{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Je(this.persistence.referenceDelegate instanceof Zd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oj(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new oE((i=>Zd.mi(i,n)),this.serializer)}}class wp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ob(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=b4.bind(null,this.syncEngine),await t4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new s4})()}createDatastore(e){const n=xh(e.databaseInfo.databaseId),i=(function(c){return new Lj(c)})(e.databaseInfo);return(function(c,d,g,p){return new Hj(c,d,g,p)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,c,d,g){return new Fj(i,l,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ob(this.syncEngine,n,0)),(function(){return Nb.v()?new Nb:new Mj})())}createSyncEngine(e,n){return(function(l,c,d,g,p,y,b){const E=new c4(l,c,d,g,p,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const c=Ie(l);me(va,"RemoteStore shutting down."),c.Ea.add(5),await Vc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wp.provider={build:()=>new wp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="FirestoreClient";class w4{constructor(e,n,i,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=l,this.user=ln.UNAUTHENTICATED,this.clientId=Yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{me(Ci,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(me(Ci,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=mg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Km(r,e){r.asyncQueue.verifyOperationInProgress(),me(Ci,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async l=>{i.isEqual(l)||(await cE(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function kb(r,e){r.asyncQueue.verifyOperationInProgress();const n=await S4(r);me(Ci,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>Cb(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,l)=>Cb(e.remoteStore,l))),r._onlineComponents=e}async function S4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Ci,"Using user provided OfflineComponentProvider");try{await Km(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Tl("Error using user provided cache. Falling back to memory cache: "+n),await Km(r,new th)}}else me(Ci,"Using default OfflineComponentProvider"),await Km(r,new T4(void 0));return r._offlineComponents}async function jE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Ci,"Using user provided OnlineComponentProvider"),await kb(r,r._uninitializedComponentsProvider._online)):(me(Ci,"Using default OnlineComponentProvider"),await kb(r,new wp))),r._onlineComponents}function A4(r){return jE(r).then((e=>e.syncEngine))}async function DE(r){const e=await jE(r),n=e.eventManager;return n.onListen=u4.bind(null,e.syncEngine),n.onUnlisten=f4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=m4.bind(null,e.syncEngine),n}function N4(r,e,n={}){const i=new wr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const b=new IE({next:w=>{b.Nu(),d.enqueueAndForget((()=>bE(c,E)));const j=w.docs.has(g);!j&&w.fromCache?y.reject(new he(se.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&w.fromCache&&p&&p.source==="server"?y.reject(new he(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),E=new xE(Zp(g.path),b,{includeMetadataChanges:!0,qa:!0});return _E(c,E)})(await DE(r),r.asyncQueue,e,n,i))),i.promise}function R4(r,e,n={}){const i=new wr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const b=new IE({next:w=>{b.Nu(),d.enqueueAndForget((()=>bE(c,E))),w.fromCache&&p.source==="server"?y.reject(new he(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),E=new xE(g,b,{includeMetadataChanges:!0,qa:!0});return _E(c,E)})(await DE(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firestore.googleapis.com",Pb=!0;class Lb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ME,this.ssl=Pb}else this.host=e.host,this.ssl=e.ssl??Pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aj)throw new he(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OE(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new MC;switch(i.type){case"firstParty":return new LC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Vb.get(n);i&&(me("ComponentProvider","Removing Datastore"),Vb.delete(n),i.terminate())})(this),Promise.resolve()}}function C4(r,e,n,i={}){var y;r=Js(r,wh);const l=jl(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${n}`;l&&(Tx(`https://${g}`),wx("Firestore",!0)),c.host!==ME&&c.host!==g&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:i};if(!ma(p,d)&&(r._setSettings(p),i.mockUserToken)){let b,E;if(typeof i.mockUserToken=="string")b=i.mockUserToken,E=ln.MOCK_USER;else{b=jA(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new he(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(w)}r._authCredentials=new kC(new _1(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class Rt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Oc(n,Rt._jsonSchema))return new Rt(e,i||null,new ve(ct.fromString(n.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:zt("string",Rt._jsonSchemaVersion),referencePath:zt("string")};class Ti extends Oi{constructor(e,n,i){super(e,n,Zp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ve(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function ms(r,e,...n){if(r=Qt(r),b1("collection","path",e),r instanceof wh){const i=ct.fromString(e,...n);return J_(i),new Ti(r,null,i)}{if(!(r instanceof Rt||r instanceof Ti))throw new he(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...n));return J_(i),new Ti(r.firestore,null,i)}}function vt(r,e,...n){if(r=Qt(r),arguments.length===1&&(e=Yp.newId()),b1("doc","path",e),r instanceof wh){const i=ct.fromString(e,...n);return X_(i),new Rt(r,null,new ve(i))}{if(!(r instanceof Rt||r instanceof Ti))throw new he(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...n));return X_(i),new Rt(r.firestore,r instanceof Ti?r.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="AsyncQueue";class zb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dE(this,"async_queue_retry"),this._c=()=>{const i=Qm();i&&me(Ub,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new wr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vl(e))throw e;me(Ub,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",Bb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=fg.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&we(47125,{Pc:Bb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Bb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ul extends wh{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new zb,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zb(e),this._firestoreClient=void 0,await e}}}function I4(r,e){const n=typeof r=="object"?r:Nx(),i=typeof r=="string"?r:$d,l=Vp(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const c=CA("firestore");c&&C4(l,...c)}return l}function vg(r){if(r._terminated)throw new he(se.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||j4(r),r._firestoreClient}function j4(r){var i,l,c;const e=r._freezeSettings(),n=(function(g,p,y,b){return new tI(g,p,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,OE(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new w4(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(sn.fromBase64String(e))}catch(n){throw new he(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:zt("string",ts._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ks._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,Ks._jsonSchema))return new Ks(e.latitude,e.longitude)}}Ks._jsonSchemaVersion="firestore/geoPoint/1.0",Ks._jsonSchema={type:zt("string",Ks._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,Xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xs(e.vectorValues);throw new he(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xs._jsonSchemaVersion="firestore/vectorValue/1.0",Xs._jsonSchema={type:zt("string",Xs._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=/^__.*__$/;class O4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(e,this.data,n,this.fieldTransforms)}}class kE{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class bg{constructor(e,n,i,l,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VE(this.Ac)&&D4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class M4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||xh(e)}Cc(e,n,i,l=!1){return new bg({Ac:e,methodName:n,Dc:i,path:nn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xg(r){const e=r._freezeSettings(),n=xh(r._databaseId);return new M4(r._databaseId,!!e.ignoreUndefinedProperties,n)}function k4(r,e,n,i,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);Eg("Data must be an object, but it was:",d,i);const g=PE(i,d);let p,y;if(c.merge)p=new kn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const E of c.mergeFields){const w=Sp(e,E,n);if(!d.contains(w))throw new he(se.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);UE(b,w)||b.push(w)}p=new kn(b),y=d.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=d.fieldTransforms;return new O4(new En(g),p,y)}class Ah extends _g{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ah}}function V4(r,e,n,i){const l=r.Cc(1,e,n);Eg("Data must be an object, but it was:",l,i);const c=[],d=En.empty();ji(i,((p,y)=>{const b=Tg(e,p,n);y=Qt(y);const E=l.yc(b);if(y instanceof Ah)c.push(b);else{const w=Lc(y,E);w!=null&&(c.push(b),d.set(b,w))}}));const g=new kn(c);return new kE(d,g,l.fieldTransforms)}function P4(r,e,n,i,l,c){const d=r.Cc(1,e,n),g=[Sp(e,i,n)],p=[l];if(c.length%2!=0)throw new he(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)g.push(Sp(e,c[w])),p.push(c[w+1]);const y=[],b=En.empty();for(let w=g.length-1;w>=0;--w)if(!UE(y,g[w])){const j=g[w];let L=p[w];L=Qt(L);const B=d.yc(j);if(L instanceof Ah)y.push(j);else{const P=Lc(L,B);P!=null&&(y.push(j),b.set(j,P))}}const E=new kn(y);return new kE(b,E,d.fieldTransforms)}function L4(r,e,n,i=!1){return Lc(n,r.Cc(i?4:3,e))}function Lc(r,e){if(LE(r=Qt(r)))return Eg("Unsupported field value:",e,r),PE(r,e);if(r instanceof _g)return(function(i,l){if(!VE(l.Ac))throw l.Sc(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,l){const c=[];let d=0;for(const g of i){let p=Lc(g,l.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,l){if((i=Qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wI(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=ft.fromDate(i);return{timestampValue:Wd(l.serializer,c)}}if(i instanceof ft){const c=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wd(l.serializer,c)}}if(i instanceof Ks)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ts)return{bytesValue:eE(l.serializer,i._byteString)};if(i instanceof Rt){const c=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:rg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Xs)return(function(d,g){return{mapValue:{fields:{[C1]:{stringValue:I1},[Yd]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return eg(g.serializer,y)}))}}}}}})(i,l);throw l.Sc(`Unsupported field value: ${hh(i)}`)})(r,e)}function PE(r,e){const n={};return T1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(r,((i,l)=>{const c=Lc(l,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function LE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ft||r instanceof Ks||r instanceof ts||r instanceof Rt||r instanceof _g||r instanceof Xs)}function Eg(r,e,n){if(!LE(n)||!x1(n)){const i=hh(n);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Sp(r,e,n){if((e=Qt(e))instanceof Sh)return e._internalPath;if(typeof e=="string")return Tg(r,e);throw nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const U4=new RegExp("[~\\*/\\[\\]]");function Tg(r,e,n){if(e.search(U4)>=0)throw nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Sh(...e.split("."))._internalPath}catch{throw nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function nh(r,e,n,i,l){const c=i&&!i.isEmpty(),d=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${i}`),d&&(p+=` in document ${l}`),p+=")"),new he(se.INVALID_ARGUMENT,g+r+p)}function UE(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,i,l,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z4 extends zE{data(){return super.data()}}function Nh(r,e){return typeof e=="string"?Tg(r,e):e instanceof Sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class Sg extends wg{}function ua(r,e,...n){let i=[];e instanceof wg&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((p=>p instanceof Ag)).length,g=c.filter((p=>p instanceof Rh)).length;if(d>1||d>0&&g>0)throw new he(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)r=l._apply(r);return r}class Rh extends Sg{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Rh(e,n,i)}_apply(e){const n=this._parse(e);return BE(e._query,n),new Oi(e.firestore,e.converter,pp(e._query,n))}_parse(e){const n=xg(e.firestore);return(function(c,d,g,p,y,b,E){let w;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){qb(E,b);const L=[];for(const B of E)L.push(Hb(p,c,B));w={arrayValue:{values:L}}}else w=Hb(p,c,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||qb(E,b),w=L4(g,d,E,b==="in"||b==="not-in");return Ut.create(y,b,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qo(r,e,n){const i=e,l=Nh("where",r);return Rh._create(l,i,n)}class Ag extends wg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:bs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let d=l;const g=c.getFlattenedFilters();for(const p of g)BE(d,p),d=pp(d,p)})(e._query,n),new Oi(e.firestore,e.converter,pp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ng extends Sg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ng(e,n)}_apply(e){const n=(function(l,c,d){if(l.startAt!==null)throw new he(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new he(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gc(c,d)})(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new Pl(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function H4(r,e="asc"){const n=e,i=Nh("orderBy",r);return Ng._create(i,n)}class Rg extends Sg{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Rg(e,n,i)}_apply(e){return new Oi(e.firestore,e.converter,Kd(e._query,this._limit,this._limitType))}}function q4(r){return Rg._create("limit",r,"F")}function Hb(r,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new he(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L1(e)&&n.indexOf("/")!==-1)throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ct.fromString(n));if(!ve.isDocumentKey(i))throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ib(r,new ve(i))}if(n instanceof Rt)return ib(r,n._key);throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(n)}.`)}function qb(r,e){if(!Array.isArray(r)||r.length===0)throw new he(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BE(r,e){const n=(function(l,c){for(const d of l)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class F4{convertValue(e,n="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ji(e,((l,c)=>{i[l]=this.convertValue(c,n)})),i}convertVectorValue(e){var i,l,c;const n=(c=(l=(i=e.fields)==null?void 0:i[Yd].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Nt(d.doubleValue)));return new Xs(n)}convertGeoPoint(e){return new Ks(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ph(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=Si(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ct.fromString(e);Je(aE(i),9688,{name:e});const l=new mc(i.get(1),i.get(3)),c=new ve(i.popFirst(5));return l.isEqual(n)||Rr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(r,e,n){let i;return i=r?r.toFirestore(e):e,i}class ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends zE{constructor(e,n,i,l,c,d){super(e,n,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Nh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:zt("string",fa._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Md extends fa{data(e={}){return super.data(e)}}class _l{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new ec(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Md(this._firestore,this._userDataWriter,i.key,i,new ec(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const p=new Md(l._firestore,l._userDataWriter,g.doc.key,g.doc,new ec(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Md(l._firestore,l._userDataWriter,g.doc.key,g.doc,new ec(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:$4(g.type),doc:p,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(r){r=Js(r,Rt);const e=Js(r.firestore,Ul);return N4(vg(e),r._key).then((n=>Y4(e,r,n)))}_l._jsonSchemaVersion="firestore/querySnapshot/1.0",_l._jsonSchema={type:zt("string",_l._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class HE extends F4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function ps(r){r=Js(r,Oi);const e=Js(r.firestore,Ul),n=vg(e),i=new HE(e);return B4(r._query),R4(n,r._query).then((l=>new _l(e,i,r,l)))}function bn(r,e,n){r=Js(r,Rt);const i=Js(r.firestore,Ul),l=G4(r.converter,e);return Cg(i,[k4(xg(i),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,vs.none())])}function Fb(r,e,n,...i){r=Js(r,Rt);const l=Js(r.firestore,Ul),c=xg(l);let d;return d=typeof(e=Qt(e))=="string"||e instanceof Sh?P4(c,"updateDoc",r._key,e,n,i):V4(c,"updateDoc",r._key,e),Cg(l,[d.toMutation(r._key,vs.exists(!0))])}function Ed(r){return Cg(Js(r.firestore,Ul),[new tg(r._key,vs.none())])}function Cg(r,e){return(function(i,l){const c=new wr;return i.asyncQueue.enqueueAndForget((async()=>p4(await A4(i),l,c))),c.promise})(vg(r),e)}function Y4(r,e,n){const i=n.docs.get(e._key),l=new HE(r);return new fa(r,l,e._key,i,new ec(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){Ml=l})(Dl),El(new RC("firestore",((i,{instanceIdentifier:l,options:c})=>{const d=i.getProvider("app").getImmediate(),g=new Ul(new VC(i.getProvider("auth-internal")),new UC(d,i.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(y.options.projectId,b)})(d,l),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),xi($_,Y_,e),xi($_,Y_,"esm2020")})();const qE={apiKey:"AIzaSyCHlCLhumJn50nw2JBgJTGeIH_6GKzjFbA",authDomain:"noble-care-management-system.firebaseapp.com",projectId:"noble-care-management-system",storageBucket:"noble-care-management-system.firebasestorage.app",messagingSenderId:"573085015524",appId:"1:573085015524:web:29ae8a509813ec1199fbf1"},FE=Pp(qE),sh=d1(FE),Ge=I4(FE),GE=D.createContext(void 0),Q4=({children:r})=>{const[e,n]=D.useState(null),[i,l]=D.useState(!0),[c,d]=D.useState(null),g="JHaUOR3vlYQiaPKLTGlGtav1uYa2";D.useEffect(()=>{const y=gR(sh,async b=>{var E;if(l(!0),b){d(null);try{const w=vt(Ge,"users",b.uid),j=await tc(w);if(j.exists()){const L=j.data();n({id:b.uid,name:L.name||b.displayName||"User",email:b.email||"",role:L.role,assignedClassIds:L.assignedClassIds||[]})}else{console.log("Setting up new user profile in Firestore...");const L=b.uid===g,B=b.email==="admin@school.com"||b.email==="isaacskikrams@gmail.com",P=L||B?At.ADMIN:At.TEACHER,H={id:b.uid,name:b.displayName||((E=b.email)==null?void 0:E.split("@")[0])||"New User",email:b.email||"",role:P,assignedClassIds:[]};await bn(w,{name:H.name,email:H.email,role:H.role,assignedClassIds:[]}),n(H)}}catch(w){console.error("Error fetching user profile:",w),n(null);const j=w.message||w.toString();j.includes("Cloud Firestore API has not been used")?d("CRITICAL ERROR: The Firestore Database is not enabled. Go to Firebase Console > Build > Firestore Database > Create Database."):j.includes("permission-denied")||j.includes("Missing or insufficient permissions")?d("PERMISSION DENIED: Database access blocked. Go to Firebase Console > Firestore Database > Rules and change 'allow read, write: if false;' to 'allow read, write: if true;' (for testing)."):j.includes("client is offline")||j.includes("offline")?d("Network Error: Could not connect to the database. Check your internet connection."):d("Failed to load user profile. Please try refreshing the page. Error: "+j)}}else n(null),d(null);l(!1)});return()=>y()},[]);const p=async()=>{try{await e1(sh),n(null),d(null)}catch(y){console.error("Logout failed",y)}};return h.jsx(GE.Provider,{value:{user:e,loading:i,error:c,logout:p,isAuthenticated:!!e},children:r})},Ea=()=>{const r=D.useContext(GE);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),Gb=r=>{const e=X4(r);return e.charAt(0).toUpperCase()+e.slice(1)},$E=(...r)=>r.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),J4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=D.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:d,...g},p)=>D.createElement("svg",{ref:p,...W4,width:e,height:e,stroke:r,strokeWidth:i?Number(n)*24/Number(e):n,className:$E("lucide",l),...!c&&!J4(g)&&{"aria-hidden":"true"},...g},[...d.map(([y,b])=>D.createElement(y,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(r,e)=>{const n=D.forwardRef(({className:i,...l},c)=>D.createElement(Z4,{ref:c,iconNode:e,className:$E(`lucide-${K4(Gb(r))}`,`lucide-${r}`,i),...l}));return n.displayName=Gb(r),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tD=je("arrow-left",eD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sD=je("arrow-up-right",nD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ig=je("bell",rD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_c=je("book-open",iD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],lD=je("book",aD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],cD=je("calendar-days",oD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bc=je("calendar",uD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],hD=je("chart-no-axes-column-increasing",dD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],mD=je("chart-no-axes-column",fD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],YE=je("check",pD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$b=je("circle-alert",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vD=je("circle-check-big",yD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],QE=je("clipboard-check",_D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],KE=je("clock",bD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],ED=je("coffee",xD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],wD=je("door-open",TD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AD=je("download",SD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],RD=je("ellipsis",ND);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XE=je("eye",CD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],JE=je("graduation-cap",ID);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Yb=je("layout-dashboard",jD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],OD=je("loader-circle",DD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],kD=je("lock",MD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],PD=je("log-out",VD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],UD=je("mail",LD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],BD=je("megaphone",zD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],qD=je("menu",HD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],GD=je("octagon-alert",FD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xc=je("plus",$D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qb=je("refresh-cw",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Uc=je("save",QD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],WE=je("settings",KD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],JD=je("sparkles",XD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ZD=je("square-check-big",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jg=je("square-pen",e6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],n6=je("square",t6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ec=je("trash-2",s6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Kb=je("trending-up",r6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rh=je("triangle-alert",i6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],l6=je("trophy",a6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ZE=je("user-plus",o6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eT=je("user",c6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ap=je("users",u6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tc=je("x",d6),h6=()=>{const{isAuthenticated:r,loading:e,error:n}=Ea(),i=ah(),[l,c]=D.useState(""),[d,g]=D.useState(""),[p,y]=D.useState(!1),[b,E]=D.useState(""),[w,j]=D.useState(!1),[L,B]=D.useState("");D.useEffect(()=>{r&&!e&&i("/",{replace:!0})},[r,e,i]);const P=async U=>{U.preventDefault(),y(!0),E("");try{await fR(sh,l,d)}catch($){console.error($);let F="Failed to sign in.";$.code==="auth/invalid-credential"||$.code==="auth/user-not-found"||$.code==="auth/wrong-password"?F="Invalid email or password.":$.code==="auth/too-many-requests"&&(F="Too many failed attempts. Please try again later."),E(F),y(!1)}},H=async U=>{if(U.preventDefault(),y(!0),E(""),B(""),!l){E("Please enter your email address to reset password."),y(!1);return}try{await dR(sh,l),B("Password reset link has been sent to your email."),E("")}catch($){console.error($);let F="Failed to send reset email.";$.code==="auth/user-not-found"?F="No account found with this email address.":$.code==="auth/invalid-email"&&(F="Please enter a valid email address."),E(F)}finally{y(!1)}},J=()=>{j(!w),E(""),B(""),g("")};return e?h.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:h.jsx("div",{className:"text-red-900 animate-pulse font-semibold",children:"Loading Noble Care System..."})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-amber-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-xl p-8 border-t-8 border-red-900",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"mx-auto w-28 h-28 mb-4 relative p-2 bg-white rounded-full shadow-sm border border-amber-100",children:h.jsx("img",{src:"https://scontent.facc5-1.fna.fbcdn.net/v/t39.30808-6/277561581_380661664069143_4955839060397865014_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeFJNGCSI96CBW1S8R2sOotMrM2NNo5aPtOszY02jlo-04y0fL8D99GjvJaBXuzqH8OYrZRdn_DgSU4Kgwvj36D2&_nc_ohc=GeYOZj7SI8AQ7kNvwFo1QMy&_nc_oc=AdnCfyquuglPpsQYtG1zbC9KAOmrLOH7MKUJTuoVKPm7FdxXjqnrHmzUSj4b3hioGUo&_nc_zt=23&_nc_ht=scontent.facc5-1.fna&_nc_gid=DdsLMQJFSMTnkkiquIQTNQ&oh=00_Afo5zCyNS0kVyQ6p_ArT53WNpaTgIKDpPQScqRwUn3HyKA&oe=695CE41D",alt:"Noble Care Academy Logo",className:"w-full h-full object-contain rounded-full",onError:U=>{U.currentTarget.style.display="none",U.currentTarget.parentElement.innerHTML='<div class="w-24 h-24 bg-red-900 rounded-full flex items-center justify-center text-amber-400 font-bold border-4 border-amber-500 text-xs text-center p-1">NOBLE CARE</div>'}})}),h.jsx("h1",{className:"text-2xl font-bold text-red-900 font-serif",children:"Noble Care Academy"}),h.jsx("p",{className:"text-slate-500 mt-2 text-sm",children:w?"Reset your password":"Sign in to manage the system"})]}),n&&h.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-800 text-sm rounded-lg border border-red-200 flex items-start",children:[h.jsx($b,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold block mb-1",children:"System Error"}),n]})]}),b&&h.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-center",children:[h.jsx($b,{size:16,className:"mr-2 flex-shrink-0"}),b]}),L&&h.jsxs("div",{className:"mb-4 p-3 bg-emerald-50 text-emerald-700 text-sm rounded-lg border border-emerald-100 flex items-center",children:[h.jsx(vD,{size:16,className:"mr-2 flex-shrink-0"}),L]}),w?h.jsxs("form",{onSubmit:H,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),h.jsx("input",{type:"email",value:l,onChange:U=>c(U.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"Enter your registered email",required:!0}),h.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"We'll send you a link to reset your password."})]}),h.jsx("button",{type:"submit",disabled:p,className:`w-full py-3 px-4 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg transition-colors shadow-md flex justify-center items-center ${p?"opacity-70 cursor-not-allowed":""}`,children:p?"Sending...":"Send Reset Link"}),h.jsxs("button",{type:"button",onClick:J,className:"w-full text-center text-sm text-slate-600 hover:text-red-900 font-medium flex items-center justify-center mt-4",children:[h.jsx(tD,{size:16,className:"mr-1"})," Back to Sign In"]})]}):h.jsxs("form",{onSubmit:P,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),h.jsx("input",{type:"email",value:l,onChange:U=>c(U.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"e.g., admin@school.com",required:!0})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Password"}),h.jsx("button",{type:"button",onClick:J,className:"text-xs text-amber-600 hover:text-amber-800 font-medium",children:"Forgot Password?"})]}),h.jsx("input",{type:"password",value:d,onChange:U=>g(U.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"Enter your password",required:!0})]}),h.jsx("button",{type:"submit",disabled:p,className:`w-full py-3 px-4 bg-red-900 hover:bg-red-950 text-white font-bold rounded-lg transition-colors shadow-md flex justify-center items-center ${p?"opacity-70 cursor-not-allowed":""}`,children:p?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),h.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:h.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," Noble Care Academy  Empowering Excellence"]})})]})})},bl="2023-2024",ys=1,at=[{id:"c_n1",name:"Nursery 1",level:"NURSERY"},{id:"c_n2",name:"Nursery 2",level:"NURSERY"},{id:"c_kg1",name:"KG 1",level:"KG"},{id:"c_kg2",name:"KG 2",level:"KG"},{id:"c_p1",name:"Class 1",level:"PRIMARY"},{id:"c_p2",name:"Class 2",level:"PRIMARY"},{id:"c_p3",name:"Class 3",level:"PRIMARY"},{id:"c_p4",name:"Class 4",level:"PRIMARY"},{id:"c_p5",name:"Class 5",level:"PRIMARY"},{id:"c_p6",name:"Class 6",level:"PRIMARY"},{id:"c_jhs1",name:"JHS 1",level:"JHS"},{id:"c_jhs2",name:"JHS 2",level:"JHS"},{id:"c_jhs3",name:"JHS 3",level:"JHS"}],Xb=["Mathematics","English Language","Integrated Science","Social Studies","ICT","RME","Ghanaian Language","Creative Arts"],wc=r=>r>=80?{total:r,grade:"A",remark:"Excellent"}:r>=70?{total:r,grade:"B",remark:"Very Good"}:r>=60?{total:r,grade:"C",remark:"Good"}:r>=45?{total:r,grade:"D",remark:"Pass"}:{total:r,grade:"F",remark:"Fail"},Ch=r=>{switch(r){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";default:return"text-red-600 bg-red-100"}};class f6{async getCollection(e){return(await ps(ms(Ge,e))).docs.map(i=>i.data())}async getSchoolConfig(){const e=vt(Ge,"settings","schoolConfig"),n=await tc(e);return n.exists()?n.data():{schoolName:"Noble Care Academy",academicYear:bl,currentTerm:`Term ${ys}`}}async updateSchoolConfig(e){await bn(vt(Ge,"settings","schoolConfig"),e)}async getUsers(){return this.getCollection("users")}async addUser(e){await bn(vt(Ge,"users",e.id),e)}async deleteUser(e){await Ed(vt(Ge,"users",e))}async getStudents(e){const n=ms(Ge,"students");if(e){const i=ua(n,Qo("classId","==",e));return(await ps(i)).docs.map(c=>c.data())}return this.getCollection("students")}async addStudent(e){await bn(vt(Ge,"students",e.id),e)}async updateStudent(e){await Fb(vt(Ge,"students",e.id),{...e})}async deleteStudent(e){await Ed(vt(Ge,"students",e))}async getSubjects(){const e=vt(Ge,"settings","subjects"),n=await tc(e);return n.exists()?n.data().list:(await bn(e,{list:Xb}),Xb)}async addSubject(e){const n=await this.getSubjects();n.includes(e)||await bn(vt(Ge,"settings","subjects"),{list:[...n,e]})}async updateSubject(e,n){const i=await this.getSubjects(),l=i.indexOf(e);l!==-1&&(i[l]=n,await bn(vt(Ge,"settings","subjects"),{list:i}))}async deleteSubject(e){const i=(await this.getSubjects()).filter(l=>l!==e);await bn(vt(Ge,"settings","subjects"),{list:i})}async getAttendance(e,n){const i=`${e}_${n}`,l=await tc(vt(Ge,"attendance",i));return l.exists()?l.data():void 0}async getClassAttendance(e){const n=ua(ms(Ge,"attendance"),Qo("classId","==",e));return(await ps(n)).docs.map(l=>l.data())}async saveAttendance(e){await bn(vt(Ge,"attendance",e.id),e)}async getAssessments(e,n){const i=ua(ms(Ge,"assessments"),Qo("classId","==",e));return(await ps(i)).docs.map(d=>d.data()).filter(d=>d.subject===n)}async getAllAssessments(){return this.getCollection("assessments")}async saveAssessment(e){await bn(vt(Ge,"assessments",e.id),e)}async resetAssessmentsForClass(e,n=!1){const i=ua(ms(Ge,"assessments"),Qo("classId","==",e)),c=(await ps(i)).docs.map(d=>Ed(vt(Ge,"assessments",d.id)));if(await Promise.all(c),n){const d=await this.getStudents(e),g=await this.getSubjects(),p=[];for(const y of d)for(const b of g){const E=`${y.id}_${b}_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,w={id:E,studentId:y.id,classId:e,term:ys,academicYear:bl,subject:b,testScore:0,homeworkScore:0,projectScore:0,examScore:0,total:0};p.push(bn(vt(Ge,"assessments",E),w))}await Promise.all(p)}}async getNotices(){const e=ua(ms(Ge,"notices"));return(await ps(e)).docs.map(i=>i.data())}async addNotice(e){await bn(vt(Ge,"notices",e.id),e)}async deleteNotice(e){await Ed(vt(Ge,"notices",e))}async addSystemNotification(e,n){const i=Date.now().toString(),l={id:i,message:e,createdAt:Date.now(),isRead:!1,type:n};await bn(vt(Ge,"admin_notifications",i),l)}async getSystemNotifications(){const e=ua(ms(Ge,"admin_notifications"),H4("createdAt","desc"),q4(20));return(await ps(e)).docs.map(i=>i.data())}async markNotificationAsRead(e){await Fb(vt(Ge,"admin_notifications",e),{isRead:!0})}async getTimetable(e){const n=await tc(vt(Ge,"timetables",e));return n.exists()?n.data():void 0}async saveTimetable(e){await bn(vt(Ge,"timetables",e.classId),e)}async getStudentPerformance(e,n){const i=await this.getClassAttendance(n),l=i.length,c=i.filter(L=>L.presentStudentIds.includes(e)).length,d=l===0?0:Math.round(c/l*100),g=i.map(L=>L.date).sort(),p=i.filter(L=>L.presentStudentIds.includes(e)).map(L=>L.date).sort(),y=ua(ms(Ge,"assessments"),Qo("studentId","==",e)),E=(await ps(y)).docs.map(L=>L.data()).filter(L=>L.term===ys),j=(await this.getSubjects()).map(L=>{const B=E.find(P=>P.subject===L);return B||{subject:L,total:0}});return{attendance:{total:l,present:c,percentage:d,schoolDates:g,presentDates:p},grades:j}}async getDashboardStats(){const[e,n,i]=await Promise.all([ps(ms(Ge,"students")),ps(ms(Ge,"users")),ps(ms(Ge,"attendance"))]),l=e.docs.map(b=>b.data()),c=n.docs.map(b=>b.data()),d=i.docs.map(b=>b.data()),g=l.filter(b=>b.gender==="Male").length,p=l.filter(b=>b.gender==="Female").length,y=at.map(b=>{const E=d.filter(j=>j.classId===b.id),w=l.filter(j=>j.classId===b.id);if(E.length>0&&w.length>0){const j=E.length*w.length,L=E.reduce((P,H)=>P+H.presentStudentIds.length,0),B=Math.round(L/j*100);return{className:b.name,percentage:B,id:b.id}}return{className:b.name,percentage:0,id:b.id}});return{studentsCount:l.length,teachersCount:c.filter(b=>b.role===At.TEACHER).length,gender:{male:g,female:p},classAttendance:y}}}const Ee=new f6,m6=({toast:r,onClose:e})=>{D.useEffect(()=>{const i=setTimeout(()=>e(r.id),r.duration);return()=>clearTimeout(i)},[r,e]);const n=r.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-800":r.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-slate-50 border-slate-200 text-slate-800";return h.jsx("div",{className:`max-w-sm w-full px-4 py-3 rounded-lg border shadow-md ${n} transform transition-all`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-1 text-sm leading-tight",children:r.message}),h.jsx("button",{onClick:()=>e(r.id),className:"text-slate-400 hover:text-slate-600 ml-2",children:""})]})})},p6=()=>{const[r,e]=D.useState([]);D.useEffect(()=>{let i=1;const l=c=>{const{message:d,type:g,duration:p}=c.detail||{},y=i++;e(b=>[{id:y,message:d,type:g,duration:p},...b])};return window.addEventListener("app-toast",l),()=>window.removeEventListener("app-toast",l)},[]);const n=i=>e(l=>l.filter(c=>c.id!==i));return r.length===0?null:h.jsx("div",{className:"fixed right-4 top-20 z-60 flex flex-col gap-3",children:r.map(i=>h.jsx(m6,{toast:i,onClose:n},i.id))})},Tn=({children:r,title:e})=>{const{user:n,logout:i}=Ea(),[l,c]=D.useState(!1),d=Ir(),[g,p]=D.useState("Noble Care"),[y,b]=D.useState([]),[E,w]=D.useState(!1),[j,L]=D.useState(0),B=(n==null?void 0:n.role)===At.ADMIN;D.useEffect(()=>{(async()=>{try{const U=await Ee.getSchoolConfig();U&&U.schoolName&&p(U.schoolName)}catch(U){console.error("Failed to load school config",U)}})()},[]),D.useEffect(()=>{if(B){const J=async()=>{try{const $=await Ee.getSystemNotifications();b($),L($.filter(F=>!F.isRead).length)}catch($){console.error("Failed to fetch notifications",$)}};J();const U=setInterval(J,3e4);return()=>clearInterval(U)}},[B]);const P=async(J,U)=>{U.stopPropagation(),await Ee.markNotificationAsRead(J),b($=>$.map(F=>F.id===J?{...F,isRead:!0}:F)),L($=>Math.max(0,$-1))},H=({href:J,icon:U,label:$})=>{const F=d.pathname===J;return h.jsxs(Fs,{to:J,className:`flex items-center px-4 py-3 transition-colors ${F?"bg-red-950 text-amber-400 border-r-4 border-amber-500":"text-red-100 hover:bg-red-800 hover:text-white"}`,onClick:()=>c(!1),children:[h.jsx(U,{className:`w-5 h-5 mr-3 ${F?"text-amber-400":"text-red-300"}`}),h.jsx("span",{className:"font-medium",children:$})]})};return h.jsxs("div",{className:"min-h-screen bg-[#fafafa] flex",children:[l&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:()=>c(!1)}),h.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-30 w-64 bg-red-900 text-white transform transition-transform duration-200 ease-in-out
        ${l?"translate-x-0":"-translate-x-full"}
        md:relative md:translate-x-0 flex flex-col shadow-xl border-r border-red-800
      `,children:[h.jsxs("div",{className:"p-6 border-b border-red-800 bg-red-900 flex flex-col items-center justify-center relative",children:[h.jsx("button",{onClick:()=>c(!1),className:"md:hidden absolute top-4 right-4 text-red-200 hover:text-white",children:h.jsx(Tc,{size:24})}),h.jsx("div",{className:"w-20 h-20 mb-3 bg-white rounded-full p-1 shadow-lg border-2 border-amber-500",children:h.jsx("img",{src:"https://scontent.facc5-1.fna.fbcdn.net/v/t39.30808-6/277561581_380661664069143_4955839060397865014_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeFJNGCSI96CBW1S8R2sOotMrM2NNo5aPtOszY02jlo-04y0fL8D99GjvJaBXuzqH8OYrZRdn_DgSU4Kgwvj36D2&_nc_ohc=GeYOZj7SI8AQ7kNvwFo1QMy&_nc_oc=AdnCfyquuglPpsQYtG1zbC9KAOmrLOH7MKUJTuoVKPm7FdxXjqnrHmzUSj4b3hioGUo&_nc_zt=23&_nc_ht=scontent.facc5-1.fna&_nc_gid=DdsLMQJFSMTnkkiquIQTNQ&oh=00_Afo5zCyNS0kVyQ6p_ArT53WNpaTgIKDpPQScqRwUn3HyKA&oe=695CE41D",alt:"Noble Care Academy",className:"w-full h-full object-contain rounded-full",onError:J=>{J.currentTarget.style.display="none",J.currentTarget.parentElement.innerHTML='<div class="w-full h-full rounded-full bg-red-800 flex items-center justify-center text-amber-400 font-bold text-xs">NCA</div>'}})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-xl font-bold text-amber-400 leading-tight tracking-wide font-serif break-words px-2",children:g}),h.jsx("p",{className:"text-xs text-red-200 mt-1 uppercase tracking-wider",children:"Management System"})]})]}),h.jsx("nav",{className:"flex-1 py-6 space-y-1",children:B?h.jsxs(h.Fragment,{children:[h.jsx(H,{href:"/",icon:Yb,label:"Dashboard"}),h.jsx(H,{href:"/admin/students",icon:JE,label:"Students"}),h.jsx(H,{href:"/admin/teachers",icon:Ap,label:"Teachers"}),h.jsx(H,{href:"/admin/attendance",icon:hD,label:"Attendance"}),h.jsx(H,{href:"/admin/reports",icon:_c,label:"Reports"}),h.jsx(H,{href:"/admin/timetable",icon:cD,label:"Timetable"}),h.jsx(H,{href:"/admin/settings",icon:WE,label:"Settings"})]}):h.jsxs(h.Fragment,{children:[h.jsx(H,{href:"/",icon:Yb,label:"Dashboard"}),h.jsx(H,{href:"/teacher/attendance",icon:QE,label:"Attendance"}),h.jsx(H,{href:"/teacher/assessment",icon:_c,label:"Assessment"})]})}),h.jsxs("div",{className:"p-4 border-t border-red-800 bg-red-900",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 border-2 border-amber-300 flex items-center justify-center text-sm font-bold shadow-lg text-red-900",children:n==null?void 0:n.name.charAt(0)}),h.jsxs("div",{className:"ml-3",children:[h.jsx("p",{className:"text-sm font-medium text-white",children:n==null?void 0:n.name}),h.jsx("p",{className:"text-xs text-amber-400 capitalize",children:n==null?void 0:n.role.toLowerCase()})]})]}),h.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center px-4 py-2 text-sm text-red-200 hover:text-white hover:bg-red-800 rounded-md transition-colors",children:[h.jsx(PD,{size:16,className:"mr-2"}),"Sign Out"]})]})]}),h.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[h.jsxs("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-4 md:px-8 z-10 border-b border-amber-100",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("button",{onClick:()=>c(!0),className:"md:hidden p-2 -ml-2 text-red-900 hover:text-red-700",children:h.jsx(qD,{size:24})}),h.jsx("h2",{className:"text-xl font-bold text-red-900 ml-2 md:ml-0",children:e})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[B&&h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>w(!E),className:`relative p-2 transition-colors ${E?"text-red-700 bg-red-50 rounded-full":"text-slate-400 hover:text-red-700"}`,children:[h.jsx(Ig,{size:20}),j>0&&h.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-600 rounded-full border-2 border-white"})]}),E&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),h.jsxs("div",{className:"fixed right-4 top-16 w-80 sm:w-96 bg-white bg-opacity-100 rounded-xl shadow-2xl border border-slate-200 z-50 overflow-hidden",children:[h.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[h.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Notifications"}),h.jsxs("span",{className:"text-xs text-slate-500",children:[j," unread"]})]}),h.jsx("div",{className:"max-h-80 overflow-y-auto bg-white",children:y.length===0?h.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No new activity."}):y.map(J=>h.jsx("div",{className:`p-3 border-b border-slate-100 hover:bg-slate-50 transition-colors ${J.isRead?"bg-slate-50":"bg-white border-l-4 border-l-red-500"}`,children:h.jsxs("div",{className:"flex justify-between items-start gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:`text-sm leading-snug mb-1 ${J.isRead?"text-slate-500":"text-slate-800 font-medium"}`,children:J.message}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide ${J.isRead?"bg-slate-200 text-slate-500":"bg-red-100 text-red-600"}`,children:J.isRead?"Read":"Unread"}),h.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(J.createdAt).toLocaleString()})]})]}),!J.isRead&&h.jsx("button",{onClick:U=>P(J.id,U),className:"text-emerald-500 hover:text-emerald-700 p-1 hover:bg-emerald-50 rounded transition-colors shrink-0",title:"Mark as read",children:h.jsx(YE,{size:16})})]})},J.id))})]})]})]}),h.jsx("div",{className:"h-6 w-px bg-slate-200 mx-2 hidden sm:block"}),h.jsx("div",{className:"text-sm text-slate-500 hidden sm:block font-medium",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),h.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 md:p-8",children:r}),h.jsx(p6,{})]})]})},Mn=(r,e)=>{const n={message:r,type:(e==null?void 0:e.type)||"info",duration:(e==null?void 0:e.duration)??4e3};window.dispatchEvent(new CustomEvent("app-toast",{detail:n}))},g6=()=>{var Ne;ah();const[r,e]=D.useState({students:0,teachers:0,classes:at.length,maleStudents:0,femaleStudents:0,classAttendance:[]}),[n,i]=D.useState([]),[l,c]=D.useState([]),[d,g]=D.useState(!0),[p,y]=D.useState(null),[b,E]=D.useState(null),[w,j]=D.useState({academicYear:"...",currentTerm:"..."}),[L,B]=D.useState({A:0,B:0,C:0,D:0,F:0}),[P,H]=D.useState([]),[J,U]=D.useState(null),[$,F]=D.useState(null),[oe,R]=D.useState(null),[N,C]=D.useState({}),O=async()=>{g(!0),y(null);try{const ie=await Ee.getDashboardStats(),I=await Ee.getStudents(),X=await Ee.getNotices(),le=await Ee.getSchoolConfig();j({academicYear:le.academicYear,currentTerm:le.currentTerm});let ue=ys;if(le.currentTerm){const qe=le.currentTerm.match(/\d+/);qe&&(ue=parseInt(qe[0]))}const xe=await Ee.getAllAssessments(),Se={},ke=new Map(I.map(qe=>[qe.id,qe]));xe.forEach(qe=>{if(qe.term===ue&&ke.has(qe.studentId)){if(!Se[qe.studentId]){const Ln=ke.get(qe.studentId);Se[qe.studentId]={total:0,count:0,name:Ln.name,classId:Ln.classId}}const wn=qe.total||(qe.testScore||0)+(qe.homeworkScore||0)+(qe.projectScore||0)+(qe.examScore||0);Se[qe.studentId].total+=wn,Se[qe.studentId].count+=1}});const yt={A:0,B:0,C:0,D:0,F:0},tt=[];Object.values(Se).forEach(qe=>{var er;const wn=qe.count>0?qe.total/qe.count:0,{grade:Ln}=wc(wn);yt[Ln]!==void 0&&yt[Ln]++,tt.push({name:qe.name,class:((er=at.find(Un=>Un.id===qe.classId))==null?void 0:er.name)||"N/A",avg:parseFloat(wn.toFixed(1))})}),tt.sort((qe,wn)=>wn.avg-qe.avg),e({students:ie.studentsCount,teachers:ie.teachersCount,classes:at.length,maleStudents:ie.gender.male,femaleStudents:ie.gender.female,classAttendance:ie.classAttendance}),i(X),c(I.slice(-5).reverse()),B(yt),H(tt.slice(0,5))}catch(ie){console.error("Dashboard fetch error:",ie),y("Failed to load dashboard data. Please check your internet connection or database permissions.")}finally{g(!1)}};D.useEffect(()=>{O()},[]),D.useEffect(()=>{const ie=()=>E(null);return b&&window.addEventListener("click",ie),()=>window.removeEventListener("click",ie)},[b]);const V=(ie,I)=>{ie.stopPropagation(),E(b===I?null:I)},k=async ie=>{E(null),U(ie),F(null);try{const I=await Ee.getStudentPerformance(ie.id,ie.classId);F(I)}catch(I){console.error(I)}},A=ie=>{E(null),R(ie),C({...ie})},_e=async ie=>{if(ie.preventDefault(),!(!oe||!N.name))try{const I={...oe,...N};await Ee.updateStudent(I),O(),R(null)}catch{Mn("Failed to update student",{type:"error"})}},Ae=({title:ie,value:I,subtext:X,icon:le,colorClass:ue,iconColorClass:xe})=>h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between relative overflow-hidden group hover:shadow-md transition-shadow min-h-[140px]",children:[h.jsx("div",{className:"flex justify-between items-start z-10",children:h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-500 text-sm font-semibold uppercase tracking-wider",children:ie}),h.jsx("h3",{className:"text-3xl font-bold text-slate-800 mt-2",children:I}),X&&h.jsx("p",{className:"text-xs text-slate-400 mt-1",children:X})]})}),h.jsx("div",{className:`absolute -right-4 -bottom-4 opacity-10 pointer-events-none transform group-hover:scale-110 transition-transform ${xe}`,children:h.jsx(le,{size:100})})]}),W=()=>{const ie=r.classAttendance;return h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-full flex flex-col",children:[h.jsx("div",{className:"flex justify-between items-center mb-6",children:h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Class Attendance"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Live participation by Class"})]})}),h.jsx("div",{className:"flex-1 flex items-end justify-between gap-1 sm:gap-2 px-1 pb-2 h-64 w-full overflow-x-auto",children:ie.map(I=>{let X="bg-amber-500";return I.percentage<50?X="bg-red-600":I.percentage>=80&&(X="bg-emerald-500"),h.jsxs("div",{className:"flex flex-col items-center flex-1 group h-full justify-end min-w-[20px]",children:[h.jsxs("div",{className:"w-full max-w-[30px] bg-slate-50 rounded-t-sm relative flex items-end h-full hover:bg-slate-100 transition-colors",children:[h.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 pointer-events-none",children:[I.className,": ",I.percentage,"%"]}),h.jsx("div",{className:`w-full ${X} rounded-t-sm transition-all duration-1000 ease-out relative`,style:{height:`${I.percentage}%`}})]}),h.jsx("span",{className:"text-[10px] text-slate-400 mt-2 font-medium truncate w-full text-center",children:I.className.replace("Nursery ","N").replace("Class ","P").replace("Primary ","P").replace("KG ","K").replace("JHS ","J")})]},I.id)})})]})},ce=()=>{const ie=r.maleStudents+r.femaleStudents||1,I=Math.round(r.maleStudents/ie*100),X=Math.round(r.femaleStudents/ie*100);return h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-full flex flex-col justify-center items-center",children:[h.jsx("h3",{className:"font-bold text-slate-800 w-full mb-6",children:"Demographics"}),h.jsxs("div",{className:"relative w-48 h-48",children:[h.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-slate-50"}),h.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(#7f1d1d 0% ${X}%, #f59e0b ${X}% 100%)`,mask:"radial-gradient(transparent 60%, black 61%)",WebkitMask:"radial-gradient(transparent 60%, black 61%)"}}),h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[h.jsx("span",{className:"text-3xl font-bold text-slate-800",children:r.students}),h.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Total"})]})]}),h.jsxs("div",{className:"flex w-full justify-between px-6 mt-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Female"}),h.jsxs("p",{className:"text-xl font-bold text-red-900",children:[X,"%"]})]}),h.jsx("div",{className:"w-px bg-slate-100"}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Male"}),h.jsxs("p",{className:"text-xl font-bold text-amber-500",children:[I,"%"]})]})]})]})},fe=()=>{const ie=Object.keys(L).reduce((I,X)=>I+L[X],0)||1;return h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[h.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[h.jsx(mD,{className:"w-5 h-5 mr-2 text-red-700"})," Academic Performance Rate (",w.currentTerm,")"]}),h.jsxs("button",{onClick:O,disabled:d,className:"flex items-center px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Refresh performance data",children:[h.jsx(Qb,{size:14,className:`mr-1 ${d?"animate-spin":""}`}),"Refresh"]})]}),h.jsxs("div",{className:"space-y-4",children:[Object.entries(L).map(([I,X])=>{const le=Math.round(X/ie*100);let ue="bg-emerald-500";return I==="B"&&(ue="bg-blue-500"),I==="C"&&(ue="bg-amber-400"),I==="D"&&(ue="bg-orange-500"),I==="F"&&(ue="bg-red-600"),h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-8 font-bold text-slate-700",children:I}),h.jsx("div",{className:"flex-1 mx-3 h-3 bg-slate-100 rounded-full overflow-hidden",children:h.jsx("div",{className:`h-full ${ue} rounded-full transition-all duration-1000`,style:{width:`${le}%`}})}),h.jsxs("div",{className:"w-16 text-right text-xs text-slate-500",children:[h.jsx("span",{className:"font-bold text-slate-800",children:X})," (",le,"%)"]})]},I)}),ie===1&&Object.values(L).every(I=>I===0)&&h.jsxs("div",{className:"text-center text-slate-400 py-4 text-sm",children:["No academic data available for ",w.currentTerm,"."]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[h.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[h.jsx(l6,{className:"w-5 h-5 mr-2 text-amber-500"})," Top Performers"]}),h.jsx("div",{className:"space-y-4",children:P.length===0?h.jsx("p",{className:"text-sm text-slate-400 italic",children:"No data yet."}):P.map((I,X)=>h.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-2 last:border-0 last:pb-0",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${X===0?"bg-amber-500":"bg-slate-300"}`,children:X+1}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-semibold text-slate-800",children:I.name}),h.jsx("p",{className:"text-xs text-slate-400",children:I.class})]})]}),h.jsx("span",{className:"text-sm font-bold text-red-900",children:I.avg})]},X))})]})]})};return d?h.jsx(Tn,{title:"Dashboard",children:h.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-8rem)]",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 bg-amber-100 rounded-full blur-xl opacity-50 animate-pulse"}),h.jsx("div",{className:"relative w-16 h-16 border-4 border-slate-100 border-t-red-900 rounded-full animate-spin shadow-sm"}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-2 h-2 bg-red-900 rounded-full"})})]}),h.jsxs("div",{className:"mt-8 text-center space-y-2",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Noble Care Academy"}),h.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[h.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),h.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),h.jsx("div",{className:"w-2 h-2 bg-red-800 rounded-full animate-bounce"})]})]})]})}):p?h.jsx(Tn,{title:"Dashboard",children:h.jsxs("div",{className:"flex items-center justify-center h-96 flex-col p-8",children:[h.jsx(GD,{size:48,className:"text-red-400 mb-4"}),h.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"Unable to load dashboard"}),h.jsx("p",{className:"text-slate-500 text-center max-w-md mb-6",children:p}),h.jsxs("button",{onClick:O,className:"flex items-center px-4 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900 transition-colors",children:[h.jsx(Qb,{size:16,className:"mr-2"})," Retry"]})]})}):h.jsxs(Tn,{title:"Dashboard",children:[h.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Welcome, Headmistress"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"Here is what's happening in your school today."})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right mr-2 hidden sm:block",children:[h.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Academic Period"}),h.jsxs("p",{className:"text-sm font-bold text-red-900",children:[w.currentTerm,"  ",w.academicYear]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs(Fs,{to:"/admin/students",className:"flex items-center px-4 py-2 bg-red-900 text-white rounded-lg hover:bg-red-950 transition-colors shadow-sm text-sm font-medium",children:[h.jsx(ZE,{size:16,className:"mr-2"}),"Add Student"]}),h.jsxs(Fs,{to:"/admin/teachers",className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors shadow-sm text-sm font-medium",children:[h.jsx(Ap,{size:16,className:"mr-2"}),"Add Staff"]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[h.jsx(Ae,{title:"Students",value:r.students,subtext:"Number of students enrolled",icon:JE,colorClass:"bg-red-50",iconColorClass:"text-red-700"}),h.jsx(Ae,{title:"Teachers",value:r.teachers,subtext:"Fully Staffed",icon:Ap,colorClass:"bg-amber-50",iconColorClass:"text-amber-600"}),h.jsx(Ae,{title:"Notices",value:n.length,subtext:"Active Announcements",icon:Ig,colorClass:"bg-blue-50",iconColorClass:"text-blue-600"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[h.jsx("div",{className:"lg:col-span-2 h-96",children:h.jsx(W,{})}),h.jsx("div",{className:"h-96",children:h.jsx(ce,{})})]}),h.jsx(fe,{}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 overflow-visible",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-800",children:"New Admissions"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Recently added students"})]}),h.jsx(Fs,{to:"/admin/students",className:"text-sm text-red-700 hover:text-red-800 font-medium bg-red-50 px-3 py-1 rounded-full transition-colors",children:"View All"})]}),h.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:h.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Student Name"}),h.jsx("th",{className:"px-6 py-3",children:"Assigned Class"}),h.jsx("th",{className:"px-6 py-3",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Action"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:l.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"p-6 text-center text-slate-400",children:"No students yet."})}):l.map((ie,I)=>{var X;return h.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[h.jsxs("td",{className:"px-6 py-4 font-medium text-slate-800 flex items-center",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs text-white mr-3 shadow-sm ${ie.gender==="Male"?"bg-amber-400":"bg-red-800"}`,children:ie.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("p",{children:ie.name}),h.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:ie.gender})]})]}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"px-2.5 py-1 rounded-md bg-slate-100 text-slate-600 text-xs font-semibold border border-slate-200",children:(X=at.find(le=>le.id===ie.classId))==null?void 0:X.name})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("span",{className:"inline-flex items-center text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:[h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mr-1.5"}),"Active"]})}),h.jsx("td",{className:"px-6 py-4 text-right",children:h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:le=>V(le,ie.id),className:`transition-colors p-1.5 rounded-full hover:bg-slate-200 ${b===ie.id?"text-red-600 bg-slate-100":"text-slate-400"}`,children:h.jsx(RD,{size:18})}),b===ie.id&&h.jsxs("div",{className:"absolute right-0 mt-1 w-40 bg-white rounded-lg shadow-xl border border-slate-100 z-50 py-1 text-left animate-in fade-in zoom-in-95 duration-100 origin-top-right",children:[h.jsxs("button",{onClick:()=>k(ie),className:"flex items-center w-full px-4 py-2.5 text-xs text-slate-700 hover:bg-slate-50 hover:text-red-600 font-medium transition-colors",children:[h.jsx(XE,{size:14,className:"mr-2"})," View Details"]}),h.jsxs("button",{onClick:()=>A(ie),className:"flex items-center w-full px-4 py-2.5 text-xs text-slate-700 hover:bg-slate-50 hover:text-blue-600 font-medium transition-colors",children:[h.jsx(jg,{size:14,className:"mr-2"})," Edit Student"]})]})]})})]},ie.id)})})]})})]}),h.jsxs("div",{className:"bg-gradient-to-br from-red-900 to-slate-900 rounded-2xl shadow-lg border border-red-800 overflow-hidden flex flex-col text-white",children:[h.jsxs("div",{className:"p-6 border-b border-red-800 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-amber-400",children:"Notice Board"}),h.jsx("p",{className:"text-xs text-slate-300",children:"School announcements"})]}),h.jsx(Fs,{to:"/admin/settings",className:"p-2 rounded-lg hover:bg-white/10 text-slate-300 transition-colors",children:h.jsx(WE,{size:18})})]}),h.jsx("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto max-h-[400px]",children:n.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-400",children:[h.jsx(bc,{size:40,className:"mb-2 opacity-20"}),h.jsx("p",{className:"text-sm",children:"No new notices"})]}):n.map((ie,I)=>h.jsxs("div",{className:"group relative pl-4 pb-4 border-l border-slate-700 last:pb-0",children:[h.jsx("div",{className:`absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full border-2 border-slate-800 ${ie.type==="urgent"?"bg-red-500":"bg-amber-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-900 px-1.5 py-0.5 rounded",children:ie.date}),ie.type==="urgent"&&h.jsx("span",{className:"text-[10px] text-red-400 font-bold uppercase tracking-wider",children:"Urgent"})]}),h.jsx("p",{className:"text-sm font-medium text-slate-200 group-hover:text-white transition-colors",children:ie.message})]})]},ie.id))}),h.jsx("div",{className:"p-4 bg-slate-900/50 text-center",children:h.jsxs(Fs,{to:"/admin/timetable",className:"text-xs font-semibold text-amber-400 hover:text-amber-300 uppercase tracking-wide flex items-center justify-center w-full",children:["View Calendar ",h.jsx(sD,{size:12,className:"ml-1"})]})})]})]}),J&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-2xl font-bold text-slate-500 shadow-inner",children:J.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-900",children:J.name}),h.jsxs("div",{className:"flex gap-2 text-sm text-slate-500 mt-1",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(eT,{size:14,className:"mr-1"})," ",J.gender]}),h.jsx("span",{children:""}),h.jsx("span",{children:(Ne=at.find(ie=>ie.id===J.classId))==null?void 0:Ne.name})]})]})]}),h.jsx("button",{onClick:()=>U(null),className:"text-slate-400 hover:text-slate-700 transition-colors bg-white p-2 rounded-full shadow-sm hover:shadow",children:h.jsx(Tc,{size:20})})]}),h.jsxs("div",{className:"p-6 space-y-8",children:[h.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-5 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-3 bg-amber-100 rounded-full text-amber-600",children:h.jsx(bc,{size:24})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-amber-900",children:"Attendance Overview"}),h.jsx("p",{className:"text-sm text-amber-700",children:"Current Term Participation"})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"text-3xl font-bold text-amber-600",children:$?`${$.attendance.percentage}%`:"..."}),h.jsx("p",{className:"text-xs text-amber-700 font-medium mt-1",children:$?`${$.attendance.present}/${$.attendance.total} Days`:"Loading"})]})]}),h.jsxs("div",{children:[h.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[h.jsx(_c,{size:20,className:"mr-2 text-red-800"})," Academic Performance (",w.currentTerm,")"]}),h.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"Subject"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Score"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Grade"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"Remark"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:$?$.grades.map((ie,I)=>{const X=ie.total||(ie.testScore||0)+(ie.homeworkScore||0)+(ie.projectScore||0)+(ie.examScore||0),{grade:le,remark:ue}=wc(X);return h.jsxs("tr",{className:"hover:bg-slate-50",children:[h.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:ie.subject}),h.jsx("td",{className:"px-4 py-3 text-center",children:X>0?X:"-"}),h.jsx("td",{className:"px-4 py-3 text-center",children:h.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Ch(le)}`,children:X>0?le:"-"})}),h.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:X>0?ue:"N/A"})]},I)}):h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"p-4 text-center text-slate-400 italic",children:"Fetching academic records..."})})})]})})]})]})]})}),oe&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-2",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Edit Student Details"}),h.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-slate-700",children:h.jsx(Tc,{size:20})})]}),h.jsxs("form",{onSubmit:_e,className:"space-y-5",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"text-xs font-bold text-red-800 uppercase tracking-wide",children:"Personal Information"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),h.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none transition-all placeholder-slate-400",value:N.name||"",onChange:ie=>C({...N,name:ie.target.value})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Gender"}),h.jsxs("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none bg-white text-slate-900",value:N.gender,onChange:ie=>C({...N,gender:ie.target.value}),children:[h.jsx("option",{value:"Male",children:"Male"}),h.jsx("option",{value:"Female",children:"Female"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Date of Birth"}),h.jsx("input",{type:"date",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none",value:N.dob||"",onChange:ie=>C({...N,dob:ie.target.value})})]})]})]}),h.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-50 mt-2",children:[h.jsx("h4",{className:"text-xs font-bold text-red-800 uppercase tracking-wide",children:"Academic Info"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Assigned Class"}),h.jsx("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none bg-white text-slate-900",value:N.classId,onChange:ie=>C({...N,classId:ie.target.value}),children:at.map(ie=>h.jsx("option",{value:ie.id,children:ie.name},ie.id))})]})]}),h.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-50 mt-2",children:[h.jsx("h4",{className:"text-xs font-bold text-red-800 uppercase tracking-wide",children:"Guardian Information"}),h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Guardian Name"}),h.jsx("input",{type:"text",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none placeholder-slate-400",value:N.guardianName||"",onChange:ie=>C({...N,guardianName:ie.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Phone Number"}),h.jsx("input",{type:"tel",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-red-800 outline-none placeholder-slate-400",value:N.guardianPhone||"",onChange:ie=>C({...N,guardianPhone:ie.target.value})})]})]})]}),h.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[h.jsx("button",{type:"button",onClick:()=>R(null),className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),h.jsxs("button",{type:"submit",className:"flex items-center px-5 py-2.5 bg-red-800 text-white rounded-lg hover:bg-red-900 font-medium shadow-sm transition-colors",children:[h.jsx(Uc,{size:18,className:"mr-2"})," Save Changes"]})]})]})]})})]})},y6=()=>{var V,k;const[r,e]=D.useState([]),[n,i]=D.useState("all"),[l,c]=D.useState(!1),[d,g]=D.useState(null),[p,y]=D.useState({gender:"Male",classId:"c_p1",dob:""}),[b,E]=D.useState(null),[w,j]=D.useState(null),[L,B]=D.useState(null),P=async()=>{const A=await Ee.getStudents();e(A)};D.useEffect(()=>{P()},[]);const H=async A=>{j(null),E(A);const _e=await Ee.getStudentPerformance(A.id,A.classId);j(_e)},J=()=>{E(null),j(null)},U=r.filter(A=>n==="all"?!0:A.classId===n),$=()=>{j(null),y({gender:"Male",classId:"c_p1",dob:""}),g(null),c(!0)},F=async A=>{y(A),g(A.id),c(!0),j(null);const _e=await Ee.getStudentPerformance(A.id,A.classId);j(_e)},oe=()=>{c(!1),y({gender:"Male",classId:"c_p1",dob:""}),g(null),j(null)},R=(A,_e)=>{_e.stopPropagation(),B(A)},N=async()=>{if(!L)return;const A=L;B(null);const _e=[...r];e(Ae=>Ae.filter(W=>W.id!==A));try{await Ee.deleteStudent(A)}catch(Ae){console.error("Delete failed",Ae),e(_e),Mn("Failed to delete student. Please try again.",{type:"error"})}},C=async A=>{if(A.preventDefault(),!(!p.name||!p.classId)){if(d){const _e={...p,id:d};await Ee.updateStudent(_e)}else{const _e={id:Math.random().toString(36).substr(2,9),name:p.name,gender:p.gender,dob:p.dob||"2015-01-01",classId:p.classId,guardianName:p.guardianName||"",guardianPhone:p.guardianPhone||""};await Ee.addStudent(_e)}P(),oe()}},O=()=>{if(!w||!w.attendance.schoolDates)return null;const{schoolDates:A,presentDates:_e}=w.attendance;if(A.length===0)return h.jsx("div",{className:"text-center text-slate-400 py-4 italic",children:"No attendance records found for this term."});const Ae={};return A.forEach(W=>{const fe=new Date(W).toLocaleString("default",{month:"long",year:"numeric"});Ae[fe]||(Ae[fe]=[]),Ae[fe].push(W)}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:Object.entries(Ae).map(([W,ce])=>h.jsxs("div",{className:"border border-slate-200 rounded-lg p-3 bg-white",children:[h.jsx("h5",{className:"font-bold text-slate-700 text-sm mb-2 text-center border-b border-slate-100 pb-2",children:W}),h.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[["S","M","T","W","T","F","S"].map((fe,Ne)=>h.jsx("div",{className:"text-[10px] text-slate-400 font-bold",children:fe},Ne)),Array.from({length:31}).map((fe,Ne)=>{const ie=Ne+1,I=ce.find(ue=>new Date(ue).getDate()===ie);if(!I){const ue=new Date(W);return ue.setDate(ie),ue.getMonth()!==new Date(W).getMonth()?null:h.jsx("div",{className:"h-6 w-6 flex items-center justify-center text-[10px] text-slate-200"},Ne)}const X=_e.includes(I);return new Date(I).getDay(),h.jsx("div",{className:`h-6 w-6 mx-auto flex items-center justify-center rounded-full text-[10px] font-bold
                                        ${X?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}
                                    `,title:`${I}: ${X?"Present":"Absent"}`,children:ie},Ne)})]}),h.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5 justify-center",children:ce.map(fe=>{const Ne=new Date(fe).getDate(),ie=_e.includes(fe);return h.jsx("div",{className:`h-7 w-7 flex items-center justify-center rounded-full text-xs font-medium border
                                        ${ie?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-red-50 border-red-200 text-red-700"}
                                    `,title:`${fe}: ${ie?"Present":"Absent"}`,children:Ne},fe)})})]},W))})};return h.jsxs(Tn,{title:"Manage Students",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsx("div",{className:"flex gap-2",children:h.jsxs("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm bg-slate-800 text-white",value:n,onChange:A=>i(A.target.value),children:[h.jsx("option",{value:"all",children:"All Classes"}),at.map(A=>h.jsx("option",{value:A.id,children:A.name},A.id))]})}),h.jsxs("button",{onClick:$,className:"flex items-center justify-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors text-sm font-medium",children:[h.jsx(xc,{size:16,className:"mr-2"}),"Add Student"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Name"}),h.jsx("th",{className:"px-6 py-3",children:"Class"}),h.jsx("th",{className:"px-6 py-3",children:"Gender"}),h.jsx("th",{className:"px-6 py-3",children:"Guardian"}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:U.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-400",children:"No students found."})}):U.map(A=>{var Ae;const _e=((Ae=at.find(W=>W.id===A.classId))==null?void 0:Ae.name)||A.classId;return h.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[h.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:A.name}),h.jsx("td",{className:"px-6 py-3",children:_e}),h.jsx("td",{className:"px-6 py-3",children:A.gender}),h.jsx("td",{className:"px-6 py-3",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{children:A.guardianName}),h.jsx("span",{className:"text-xs text-slate-400",children:A.guardianPhone})]})}),h.jsxs("td",{className:"px-6 py-3 text-right whitespace-nowrap",children:[h.jsx("button",{type:"button",onClick:()=>H(A),className:"text-emerald-500 hover:text-emerald-700 p-2 hover:bg-emerald-50 rounded-full transition-colors mr-1",title:"View Performance",children:h.jsx(XE,{size:16})}),h.jsx("button",{type:"button",onClick:()=>F(A),className:"text-blue-500 hover:text-blue-700 p-2 hover:bg-blue-50 rounded-full transition-colors mr-1",title:"Edit Details",children:h.jsx(jg,{size:16})}),h.jsx("button",{type:"button",onClick:W=>R(A.id,W),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-full transition-colors cursor-pointer",title:"Delete Student",children:h.jsx(Ec,{size:16,className:"pointer-events-none"})})]})]},A.id)})})]})})]}),L&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:h.jsx("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl transform transition-all",children:h.jsxs("div",{className:"flex flex-col items-center text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:h.jsx(rh,{className:"text-red-600 w-6 h-6"})}),h.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Delete Student?"}),h.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this student? This action cannot be undone."}),h.jsxs("div",{className:"flex gap-3 w-full",children:[h.jsx("button",{onClick:()=>B(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Cancel"}),h.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors shadow-sm",children:"Delete"})]})]})})}),l&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[h.jsx("h3",{className:"text-lg font-bold mb-6 text-slate-900 border-b pb-2",children:d?"Edit Student Details":"Add New Student"}),d&&h.jsxs("div",{className:"mb-6 bg-slate-50 border border-slate-200 rounded-lg p-4 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-slate-700",children:"Attendance Summary"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Current Term Performance"})]}),h.jsx("div",{className:"text-right",children:w?h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:"text-xl font-bold text-emerald-600",children:[w.attendance.percentage,"%"]}),h.jsxs("p",{className:"text-xs text-slate-500",children:[w.attendance.present,"/",w.attendance.total," Days"]})]}):h.jsx("span",{className:"text-xs text-slate-400",children:"Loading data..."})})]}),h.jsxs("form",{onSubmit:C,className:"space-y-5",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Personal Information"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),h.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none transition-all placeholder-slate-400",value:p.name||"",onChange:A=>y({...p,name:A.target.value}),placeholder:"e.g. Kwame Nkrumah Jnr"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Gender"}),h.jsxs("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",value:p.gender,onChange:A=>y({...p,gender:A.target.value}),children:[h.jsx("option",{value:"Male",children:"Male"}),h.jsx("option",{value:"Female",children:"Female"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Date of Birth"}),h.jsx("input",{type:"date",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",value:p.dob||"",onChange:A=>y({...p,dob:A.target.value})})]})]})]}),h.jsxs("div",{className:"space-y-4 pt-2",children:[h.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Academic Info"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Assigned Class"}),h.jsx("select",{className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",value:p.classId,onChange:A=>y({...p,classId:A.target.value}),children:at.map(A=>h.jsx("option",{value:A.id,children:A.name},A.id))})]})]}),h.jsxs("div",{className:"space-y-4 pt-2",children:[h.jsx("h4",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wide",children:"Guardian Information"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Guardian Name"}),h.jsx("input",{type:"text",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:p.guardianName||"",onChange:A=>y({...p,guardianName:A.target.value}),placeholder:"e.g. Mr. John Doe"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Phone Number"}),h.jsx("input",{type:"tel",className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400",value:p.guardianPhone||"",onChange:A=>y({...p,guardianPhone:A.target.value}),placeholder:"e.g. 024 123 4567"})]})]})]}),h.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[h.jsx("button",{type:"button",onClick:oe,className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium shadow-sm transition-colors",children:d?"Update Student":"Save Student"})]})]})]})}),b&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-xl w-full max-w-3xl max-h-[95vh] overflow-y-auto shadow-2xl flex flex-col",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50 sticky top-0 z-10",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-2xl font-bold text-slate-500",children:b.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-900",children:b.name}),h.jsxs("div",{className:"flex gap-2 text-sm text-slate-500 mt-1",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(eT,{size:14,className:"mr-1"})," ",b.gender]}),h.jsx("span",{children:""}),h.jsx("span",{children:(V=at.find(A=>A.id===b.classId))==null?void 0:V.name})]})]})]}),h.jsx("button",{onClick:J,className:"text-slate-400 hover:text-slate-700 bg-white p-2 rounded-full shadow-sm",children:h.jsx(Tc,{size:24})})]}),h.jsxs("div",{className:"p-6 space-y-8",children:[h.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-xl p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:h.jsx(bc,{size:20})}),h.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"Attendance Record"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center",children:[h.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:"Total School Days"}),h.jsx("span",{className:"text-2xl font-bold text-slate-800",children:w?w.attendance.total:"-"})]}),h.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center",children:[h.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:"Days Present"}),h.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:w?w.attendance.present:"-"})]}),h.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center",children:[h.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:"Attendance Rate"}),h.jsx("span",{className:`text-2xl font-bold ${((k=w==null?void 0:w.attendance)==null?void 0:k.percentage)<50?"text-red-500":"text-blue-600"}`,children:w?`${w.attendance.percentage}%`:"-"})]})]}),h.jsxs("div",{className:"flex justify-center gap-6 text-xs text-slate-500 mb-2",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-emerald-100 border border-emerald-200 rounded-full mr-2"})," Present"]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-red-100 border border-red-200 rounded-full mr-2"})," Absent"]})]}),O()]}),h.jsxs("div",{children:[h.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[h.jsx(_c,{size:20,className:"mr-2 text-blue-600"})," Academic Performance"]}),h.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"Subject"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Score"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Grade"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"Remark"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:w?w.grades.map((A,_e)=>{const Ae=A.total||(A.testScore||0)+(A.homeworkScore||0)+(A.projectScore||0)+(A.examScore||0),{grade:W,remark:ce}=wc(Ae);return h.jsxs("tr",{className:"hover:bg-slate-50",children:[h.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:A.subject}),h.jsx("td",{className:"px-4 py-3 text-center",children:Ae>0?Ae:"-"}),h.jsx("td",{className:"px-4 py-3 text-center",children:h.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Ch(W)}`,children:Ae>0?W:"-"})}),h.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:Ae>0?ce:"N/A"})]},_e)}):h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Loading grades..."})})})]})})]})]}),h.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center",children:h.jsx("p",{className:"text-xs text-slate-400",children:"Generated automatically by Noble Care Academy System"})})]})})]})},v6=()=>{const[r,e]=D.useState([]),[n,i]=D.useState(!1),[l,c]=D.useState(!1),[d,g]=D.useState({role:At.TEACHER,assignedClassIds:[],password:""}),[p,y]=D.useState(null),b=async()=>{const B=await Ee.getUsers();e(B.filter(P=>P.role===At.TEACHER))};D.useEffect(()=>{b()},[]);const E=async B=>{if(B.preventDefault(),!d.name||!d.email||!d.password){Mn("Please fill in all fields including password.",{type:"error"});return}if(d.password.length<6){Mn("Password must be at least 6 characters.",{type:"error"});return}c(!0);let P;try{P=Pp(qE,"SecondaryApp");const H=d1(P),$={id:(await hR(H,d.email,d.password)).user.uid,name:d.name,email:d.email,role:At.TEACHER,assignedClassIds:d.assignedClassIds||[]};await Ee.addUser($),await e1(H),i(!1),g({role:At.TEACHER,assignedClassIds:[],password:""}),b(),Mn(`Teacher created successfully! Email: ${$.email}`,{type:"success",duration:6e3})}catch(H){console.error("Error creating teacher:",H),H.code==="auth/email-already-in-use"?Mn("This email is already registered.",{type:"error"}):Mn("Failed to create teacher. "+H.message,{type:"error"})}finally{P&&await QN(P),c(!1)}},w=B=>{y(B)},j=async()=>{if(!p)return;const B=p;y(null);const P=[...r];e(H=>H.filter(J=>J.id!==B));try{await Ee.deleteUser(B)}catch(H){console.error("Failed to delete teacher",H),e(P),Mn("Failed to delete teacher profile. Please try again.",{type:"error"})}},L=B=>{g(P=>{const H=P.assignedClassIds||[];return H.includes(B)?{...P,assignedClassIds:H.filter(J=>J!==B)}:{...P,assignedClassIds:[...H,B]}})};return h.jsxs(Tn,{title:"Manage Teachers",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[h.jsx("h2",{className:"font-semibold text-slate-800",children:"Staff List"}),h.jsxs("button",{onClick:()=>i(!0),className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors text-sm font-medium",children:[h.jsx(xc,{size:16,className:"mr-2"}),"Add Teacher"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Name"}),h.jsx("th",{className:"px-6 py-3",children:"Email"}),h.jsx("th",{className:"px-6 py-3",children:"Assigned Classes"}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:r.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-400",children:"No teachers found."})}):r.map(B=>{const H=(B.assignedClassIds||[]).map(J=>{var U;return(U=at.find($=>$.id===J))==null?void 0:U.name}).filter(Boolean);return h.jsxs("tr",{className:"hover:bg-slate-50",children:[h.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:B.name}),h.jsxs("td",{className:"px-6 py-3 flex items-center",children:[h.jsx(UD,{size:14,className:"mr-2 text-slate-400"}),B.email]}),h.jsx("td",{className:"px-6 py-3",children:h.jsx("div",{className:"flex flex-wrap gap-1",children:H.length>0?H.map(J=>h.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:J},J)):h.jsx("span",{className:"text-slate-400 italic text-xs",children:"No classes"})})}),h.jsx("td",{className:"px-6 py-3 text-right",children:h.jsx("button",{onClick:()=>w(B.id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-full transition-colors",title:"Remove Teacher",children:h.jsx(Ec,{size:16,className:"pointer-events-none"})})})]},B.id)})})]})})]}),p&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:h.jsx("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl transform transition-all",children:h.jsxs("div",{className:"flex flex-col items-center text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:h.jsx(rh,{className:"text-red-600 w-6 h-6"})}),h.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Remove Teacher?"}),h.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["This removes their profile from the system. ",h.jsx("br",{}),h.jsx("span",{className:"text-xs text-red-500 font-bold",children:"Note: You must manually disable their account in Firebase Console to stop login."})]}),h.jsxs("div",{className:"flex gap-3 w-full",children:[h.jsx("button",{onClick:()=>y(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Cancel"}),h.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors shadow-sm",children:"Remove"})]})]})})}),n&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[h.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center text-slate-900 border-b pb-2",children:[h.jsx(ZE,{className:"mr-2 text-emerald-600",size:20})," Add New Teacher"]}),h.jsxs("form",{onSubmit:E,className:"space-y-4 pt-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Full Name"}),h.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400 text-white bg-slate-800",value:d.name||"",onChange:B=>g({...d,name:B.target.value}),placeholder:"e.g. Mr. John Doe"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Email Address"}),h.jsx("input",{type:"email",required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400 text-white bg-slate-800",value:d.email||"",onChange:B=>g({...d,email:B.target.value}),placeholder:"teacher@school.com"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Set Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(kD,{className:"absolute left-3 top-3 text-slate-400 w-4 h-4"}),h.jsx("input",{type:"text",required:!0,className:"w-full border border-slate-300 pl-9 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none placeholder-slate-400 text-white bg-slate-800",value:d.password||"",onChange:B=>g({...d,password:B.target.value}),placeholder:"Min 6 chars",minLength:6})]}),h.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Teacher will use this email & password to log in."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Assign Classes"}),h.jsx("div",{className:"border border-slate-300 rounded-lg p-3 max-h-56 overflow-y-auto bg-slate-50",children:h.jsx("div",{className:"grid grid-cols-2 gap-3",children:at.map(B=>{var H;const P=(H=d.assignedClassIds)==null?void 0:H.includes(B.id);return h.jsxs("button",{type:"button",onClick:()=>L(B.id),className:`
                                        flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium border transition-all duration-200
                                        ${P?"bg-emerald-600 border-emerald-600 text-white shadow-md transform scale-[1.02]":"bg-white border-slate-200 text-slate-600 hover:border-emerald-300 hover:shadow-sm"}
                                    `,children:[h.jsx("span",{children:B.name}),P?h.jsx(ZD,{size:16,className:"text-white ml-2"}):h.jsx(n6,{size:16,className:"text-slate-300 ml-2"})]},B.id)})})}),h.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"Click classes to select/deselect them."})]}),h.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[h.jsx("button",{type:"button",onClick:()=>i(!1),disabled:l,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:l,className:"flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium shadow-sm transition-colors disabled:opacity-70",children:l?h.jsxs(h.Fragment,{children:[h.jsx(OD,{size:16,className:"mr-2 animate-spin"})," Creating..."]}):"Create Teacher"})]})]})]})})]})},_6=()=>{const[r,e]=D.useState(at[0].id),[n,i]=D.useState([]),[l,c]=D.useState(!1),[d,g]=D.useState(0);return D.useEffect(()=>{(async()=>{c(!0);try{const y=await Ee.getStudents(r),b=await Ee.getClassAttendance(r),E=b.length;g(E);const w=y.map(j=>{const L=b.filter(P=>P.presentStudentIds.includes(j.id)).length,B=E===0?0:Math.round(L/E*100);return{id:j.id,name:j.name,gender:j.gender,presentDays:L,totalDays:E,percentage:B}});w.sort((j,L)=>j.name.localeCompare(L.name)),i(w)}catch(y){console.error("Error fetching attendance stats:",y)}finally{c(!1)}})()},[r]),h.jsx(Tn,{title:"Attendance Statistics",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col xl:flex-row justify-between xl:items-center gap-4 bg-slate-50",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Class"}),h.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-48 bg-white text-slate-900",value:r,onChange:p=>e(p.target.value),children:at.map(p=>h.jsx("option",{value:p.id,children:p.name},p.id))})]}),h.jsxs("div",{className:"bg-white border border-slate-200 rounded-md px-4 py-1.5 shadow-sm",children:[h.jsx("span",{className:"block text-xs text-slate-400 uppercase",children:"Term Total Days"}),h.jsx("span",{className:"font-bold text-lg text-slate-800",children:d})]})]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500"})," Excellent (90%+)"]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-400"})," Average (50-89%)"]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-red-700 bg-red-50 px-3 py-1.5 rounded-full border border-red-200 shadow-sm",children:[h.jsx(rh,{size:12,className:"text-red-600"})," Critical (","<","50%)"]})]})]}),h.jsx("div",{className:"flex-1 overflow-auto p-0",children:l?h.jsx("div",{className:"text-center py-20 text-slate-400",children:"Calculating Attendance Data..."}):h.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-800 font-semibold border-b border-slate-200 sticky top-0 z-10",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4",children:"Student Name"}),h.jsx("th",{className:"px-6 py-4 text-center",children:"Days Present"}),h.jsx("th",{className:"px-6 py-4 text-center",children:"Total School Days"}),h.jsx("th",{className:"px-6 py-4 w-1/3",children:"Attendance Rate"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:n.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"No students found in this class."})}):n.map(p=>{let y="bg-emerald-500",b="text-emerald-700 bg-emerald-50 border-emerald-200",E="hover:bg-slate-50",w=null;return p.percentage<50?(y="bg-red-500",b="text-red-700 bg-red-50 border-red-200",E="bg-red-50/40 hover:bg-red-50/60",w=h.jsx("span",{title:"Critical Attendance",children:h.jsx(rh,{size:14,className:"text-red-500 ml-2"})})):p.percentage<90&&(y="bg-amber-400",b="text-amber-700 bg-amber-50 border-amber-200"),h.jsxs("tr",{className:`${E} transition-colors border-b border-slate-100 last:border-0`,children:[h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold text-white mr-3 shadow-sm ${p.gender==="Male"?"bg-blue-500":"bg-pink-500"}`,children:p.name.charAt(0)}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-semibold text-slate-800 flex items-center",children:[p.name,w]}),h.jsx("p",{className:"text-xs text-slate-500",children:p.gender})]})]})}),h.jsx("td",{className:"px-6 py-4 text-center",children:h.jsx("span",{className:"font-bold text-slate-800 text-lg",children:p.presentDays})}),h.jsx("td",{className:"px-6 py-4 text-center",children:h.jsx("span",{className:"text-slate-500",children:p.totalDays})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 h-2.5 bg-slate-200 rounded-full overflow-hidden shadow-inner",children:h.jsx("div",{className:`h-full ${y} transition-all duration-500 rounded-full`,style:{width:`${p.percentage}%`}})}),h.jsxs("span",{className:`text-xs font-bold px-2.5 py-1 rounded border ${b} min-w-[3.5rem] text-center shadow-sm`,children:[p.percentage,"%"]})]})})]},p.id)})})]})})]})})},b6=()=>{var y;const[r,e]=D.useState(at[0].id),[n,i]=D.useState([]),[l,c]=D.useState([]),[d,g]=D.useState(!1);D.useEffect(()=>{(async()=>{const E=await Ee.getSubjects();c(E)})()},[]),D.useEffect(()=>{const b=async()=>{if(l.length===0)return;g(!0);const E=await Ee.getStudents(r),w=await Promise.all(E.map(async j=>{let L=0,B=0;const P={};for(const J of l){const $=(await Ee.getAssessments(r,J)).find(F=>F.studentId===j.id&&F.term===ys);if($){const F=$.total||($.testScore||0)+($.homeworkScore||0)+($.projectScore||0)+($.examScore||0);P[J]=F,L+=F,B++}else P[J]="-"}const H=B>0?(L/B).toFixed(1):0;return{student:j,scores:P,totalScore:L,average:H}}));w.sort((j,L)=>L.totalScore-j.totalScore),i(w),g(!1)};l.length>0&&b()},[r,l]);const p=()=>{var J;if(n.length===0)return;const b=["Position","Student Name",...l,"Total Score","Average Grade"],E=n.map((U,$)=>{const F=l.map(oe=>U.scores[oe]);return[$+1,`"${U.student.name}"`,...F,U.totalScore,U.average]}),w=[b.join(","),...E.map(U=>U.join(","))].join(`
`),j=new Blob([w],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(j),B=document.createElement("a"),H=`${((J=at.find(U=>U.id===r))==null?void 0:J.name)||"Class"}_Report_Term${ys}.csv`;B.setAttribute("href",L),B.setAttribute("download",H),B.style.visibility="hidden",document.body.appendChild(B),B.click(),document.body.removeChild(B)};return h.jsxs(Tn,{title:"Academic Reports",children:[h.jsx("style",{children:`
                @media print {
                    @page { size: landscape; margin: 10mm; }
                    body * {
                        visibility: hidden;
                    }
                    #report-content, #report-content * {
                        visibility: visible;
                    }
                    #report-content {
                        position: fixed;
                        left: 0;
                        top: 0;
                        width: 100%;
                        height: 100%;
                        margin: 0;
                        padding: 0;
                        background: white;
                        z-index: 9999;
                    }
                    .no-print {
                        display: none !important;
                    }
                    /* Ensure table expands fully and isn't cut off by scroll areas */
                    #table-container {
                        overflow: visible !important;
                        height: auto !important;
                    }
                }
            `}),h.jsxs("div",{id:"report-content",className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)] print:h-auto print:border-none print:shadow-none",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 print:bg-white print:border-none",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm bg-white text-black no-print",value:r,onChange:b=>e(b.target.value),children:at.map(b=>h.jsx("option",{value:b.id,children:b.name},b.id))}),h.jsxs("div",{className:"hidden print:block text-2xl font-bold text-slate-900",children:[(y=at.find(b=>b.id===r))==null?void 0:y.name," Report"]}),h.jsxs("div",{className:"text-sm text-slate-500 print:text-slate-900 print:font-semibold",children:["Term ",ys," | ",bl]})]}),h.jsxs("button",{onClick:p,disabled:d||n.length===0,className:"flex items-center text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 px-4 py-2 rounded-lg transition-colors no-print font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(AD,{size:18,className:"mr-2"})," Export CSV"]})]}),h.jsx("div",{id:"table-container",className:"flex-1 overflow-auto p-4 print:overflow-visible print:p-0",children:d?h.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Report Data..."}):h.jsx("div",{className:"overflow-x-auto print:overflow-visible",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse text-black",children:[h.jsx("thead",{className:"bg-slate-100 text-black font-bold print:bg-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 border border-slate-200 w-10",children:"Pos"}),h.jsx("th",{className:"px-4 py-3 border border-slate-200 min-w-[200px]",children:"Student Name"}),l.map(b=>h.jsx("th",{className:"px-2 py-3 border border-slate-200 w-24 text-center text-xs",children:b.substring(0,3)},b)),h.jsx("th",{className:"px-4 py-3 border border-slate-200 text-center w-20 bg-emerald-50 text-emerald-900 print:bg-slate-100",children:"Total"}),h.jsx("th",{className:"px-4 py-3 border border-slate-200 text-center w-20 bg-blue-50 text-blue-900 print:bg-slate-100",children:"Avg"})]})}),h.jsxs("tbody",{children:[n.map((b,E)=>h.jsxs("tr",{className:"hover:bg-slate-50 print:hover:bg-transparent",children:[h.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-medium",children:E+1}),h.jsx("td",{className:"px-4 py-2 border border-slate-200 font-medium",children:b.student.name}),l.map(w=>{const j=b.scores[w],L=typeof j=="number"?wc(j).grade:"-";return h.jsx("td",{className:"px-2 py-2 border border-slate-200 text-center",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{children:j}),typeof j=="number"&&h.jsx("span",{className:`text-[10px] font-bold ${Ch(L).split(" ")[0]}`,children:L})]})},w)}),h.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-bold bg-emerald-50 text-emerald-900 print:bg-transparent",children:b.totalScore}),h.jsx("td",{className:"px-4 py-2 border border-slate-200 text-center font-bold bg-blue-50 text-blue-900 print:bg-transparent",children:b.average})]},b.student.id)),n.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:l.length+4,className:"p-8 text-center text-slate-400",children:"No students found."})})]})]})})})]})]})},x6=()=>{const[r,e]=D.useState([]),[n,i]=D.useState(""),[l,c]=D.useState(new Date().toISOString().split("T")[0]),[d,g]=D.useState("info"),[p,y]=D.useState([]),[b,E]=D.useState(""),[w,j]=D.useState(null),[L,B]=D.useState({schoolName:"",academicYear:"",currentTerm:""}),[P,H]=D.useState(!1),J=async()=>{const k=await Ee.getNotices();e(k)},U=async()=>{const k=await Ee.getSubjects();y(k)},$=async()=>{const k=await Ee.getSchoolConfig();B(k)};D.useEffect(()=>{J(),U(),$()},[]);const F=async()=>{H(!0),await Ee.updateSchoolConfig(L),H(!1),Mn("Configuration saved successfully!",{type:"success"})},oe=async k=>{if(k.preventDefault(),!n.trim()||!l)return;const[A,_e,Ae]=l.split("-").map(Number),ce=new Date(A,_e-1,Ae).toLocaleDateString("en-GB",{day:"numeric",month:"short"});await Ee.addNotice({id:Math.random().toString(36).substr(2,9),message:n,date:ce,type:d}),i(""),J()},R=async k=>{await Ee.deleteNotice(k),J()},N=async k=>{k.preventDefault(),b.trim()&&(await Ee.addSubject(b.trim()),E(""),U())},C=async k=>{window.confirm(`Are you sure you want to delete "${k}"? This might hide scores associated with this subject.`)&&(await Ee.deleteSubject(k),U())},O=k=>{j({original:k,current:k})},V=async()=>{!w||!w.current.trim()||(await Ee.updateSubject(w.original,w.current.trim()),j(null),U())};return h.jsx(Tn,{title:"System Settings",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"General Configuration"}),h.jsxs("button",{onClick:F,disabled:P,className:"flex items-center text-xs font-bold text-white bg-emerald-600 hover:bg-emerald-700 px-3 py-1.5 rounded-lg transition-colors",children:[h.jsx(Uc,{size:14,className:"mr-1"})," ",P?"Saving...":"Save Changes"]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Academic Year"}),h.jsx("input",{type:"text",value:L.academicYear,onChange:k=>B({...L,academicYear:k.target.value}),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Current Term"}),h.jsxs("select",{value:L.currentTerm,onChange:k=>B({...L,currentTerm:k.target.value}),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none",children:[h.jsx("option",{value:"Term 1",children:"Term 1"}),h.jsx("option",{value:"Term 2",children:"Term 2"}),h.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),h.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[h.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"School Information"}),h.jsx("div",{className:"grid grid-cols-1 gap-4",children:h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"School Name"}),h.jsx("input",{type:"text",value:L.schoolName,onChange:k=>B({...L,schoolName:k.target.value}),className:"w-full border border-slate-300 p-2 rounded-lg bg-white text-slate-800 focus:ring-2 focus:ring-emerald-500 outline-none"})]})})]})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6",children:[h.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[h.jsx(lD,{className:"mr-2 text-blue-600",size:24}),"Manage Subjects"]}),h.jsxs("form",{onSubmit:N,className:"flex gap-2 mb-6",children:[h.jsx("input",{type:"text",required:!0,className:"flex-1 border border-slate-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",placeholder:"New subject name...",value:b,onChange:k=>E(k.target.value)}),h.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:h.jsx(xc,{size:20})})]}),h.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:p.map(k=>h.jsx("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg border border-slate-100 group",children:(w==null?void 0:w.original)===k?h.jsxs("div",{className:"flex items-center flex-1 gap-2",children:[h.jsx("input",{type:"text",className:"flex-1 border border-slate-300 p-1 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:w.current,onChange:A=>j({...w,current:A.target.value}),autoFocus:!0}),h.jsx("button",{onClick:V,className:"text-emerald-600 hover:bg-emerald-50 p-1 rounded",children:h.jsx(YE,{size:16})}),h.jsx("button",{onClick:()=>j(null),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:h.jsx(Tc,{size:16})})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-sm font-medium text-slate-700",children:k}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>O(k),className:"text-slate-400 hover:text-blue-600 p-1.5 hover:bg-blue-50 rounded-md transition-colors",children:h.jsx(jg,{size:14})}),h.jsx("button",{onClick:()=>C(k),className:"text-slate-400 hover:text-red-600 p-1.5 hover:bg-red-50 rounded-md transition-colors",children:h.jsx(Ec,{size:14})})]})]})},k))})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 flex flex-col h-full",children:[h.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center",children:[h.jsx(BD,{className:"mr-2 text-emerald-600",size:24}),"School Notices"]}),h.jsxs("form",{onSubmit:oe,className:"mb-6 bg-slate-50 p-4 rounded-lg border border-slate-200",children:[h.jsxs("div",{className:"mb-3",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),h.jsxs("div",{className:"relative",children:[h.jsx(bc,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"date",required:!0,className:"w-full border border-slate-300 pl-10 pr-3 py-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none text-sm",value:l,onChange:k=>c(k.target.value)})]})]}),h.jsxs("div",{className:"mb-3",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notice Message"}),h.jsx("textarea",{required:!0,className:"w-full border border-slate-300 p-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none text-sm",placeholder:"Type notice here...",rows:2,value:n,onChange:k=>i(k.target.value)})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"flex items-center text-sm cursor-pointer",children:[h.jsx("input",{type:"radio",name:"type",className:"mr-2 text-emerald-600 focus:ring-emerald-500",checked:d==="info",onChange:()=>g("info")}),"Info"]}),h.jsxs("label",{className:"flex items-center text-sm cursor-pointer",children:[h.jsx("input",{type:"radio",name:"type",className:"mr-2 text-blue-600 focus:ring-blue-500",checked:d==="urgent",onChange:()=>g("urgent")}),"Urgent"]})]}),h.jsxs("button",{type:"submit",className:"bg-emerald-600 text-white px-3 py-1.5 rounded-md text-sm font-medium hover:bg-emerald-700 transition-colors flex items-center",children:[h.jsx(xc,{size:16,className:"mr-1"})," Add Notice"]})]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[h.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-3",children:"Active Notices"}),h.jsx("div",{className:"space-y-3",children:r.length===0?h.jsx("p",{className:"text-slate-400 text-sm text-center italic",children:"No notices posted."}):r.map(k=>h.jsxs("div",{className:"flex justify-between items-start group p-3 border border-slate-100 rounded-lg hover:bg-slate-50 transition-colors",children:[h.jsxs("div",{className:`border-l-2 pl-3 ${k.type==="urgent"?"border-blue-500":"border-emerald-500"}`,children:[h.jsx("p",{className:"text-sm text-slate-800 font-medium",children:k.message}),h.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[k.date,"  ",k.type==="urgent"?"Urgent":"General Info"]})]}),h.jsx("button",{onClick:()=>R(k.id),className:"text-slate-300 hover:text-red-500 transition-colors p-1",title:"Delete Notice",children:h.jsx(Ec,{size:16})})]},k.id))})]})]})]})})},Xm=["Monday","Tuesday","Wednesday","Thursday","Friday"],E6=()=>{var H,J;const[r,e]=D.useState(at[0].id),[n,i]=D.useState({}),[l,c]=D.useState(!1),[d,g]=D.useState(Xm[0]),[p,y]=D.useState([]),[b,E]=D.useState({startTime:"08:00",endTime:"09:00",subject:"",type:"lesson"});D.useEffect(()=>{(async()=>{const $=await Ee.getSubjects();y($),$.length>0&&E(F=>({...F,subject:$[0]}))})()},[]),D.useEffect(()=>{(async()=>{c(!0);const $=await Ee.getTimetable(r),F=($==null?void 0:$.schedule)||{};Xm.forEach(oe=>{F[oe]||(F[oe]=[])}),i(F),c(!1)})()},[r]);const w=()=>{if(!b.startTime||!b.endTime||!b.subject)return;if(b.startTime>=b.endTime){Mn("End time must be after start time",{type:"error"});return}const U={id:Math.random().toString(36).substr(2,9),startTime:b.startTime,endTime:b.endTime,subject:b.subject,type:b.type},$={...n};$[d]=[...$[d],U].sort((F,oe)=>F.startTime.localeCompare(oe.startTime)),i($)},j=U=>{const $={...n};$[d]=$[d].filter(F=>F.id!==U),i($)},L=async()=>{c(!0);const U={classId:r,schedule:n};await Ee.saveTimetable(U),c(!1),Mn("Timetable saved successfully!",{type:"success"})},B=U=>{const $=n[U];return!$||$.length===0?"N/A":$[$.length-1].endTime},P=U=>{switch(U){case"break":return{bg:"bg-amber-50",border:"border-amber-100",icon:ED,iconColor:"text-amber-600",badge:"text-amber-600 border-amber-200"};case"worship":return{bg:"bg-purple-50",border:"border-purple-100",icon:JD,iconColor:"text-purple-600",badge:"text-purple-600 border-purple-200"};case"closing":return{bg:"bg-slate-100",border:"border-slate-200",icon:wD,iconColor:"text-slate-600",badge:"text-slate-600 border-slate-300"};default:return{bg:"bg-white",border:"border-slate-100",icon:KE,iconColor:"text-emerald-600",badge:"text-slate-600 border-slate-200"}}};return h.jsx(Tn,{title:"Manage Timetable",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 flex flex-col h-[calc(100vh-8rem)]",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col md:flex-row justify-between md:items-center gap-4 bg-slate-50",children:[h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Select Class"}),h.jsx("select",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm w-48",value:r,onChange:U=>e(U.target.value),children:at.map(U=>h.jsx("option",{value:U.id,children:U.name},U.id))})]})}),h.jsxs("button",{onClick:L,disabled:l,className:"flex items-center bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50",children:[h.jsx(Uc,{size:18,className:"mr-2"}),l?"Saving...":"Save Schedule"]})]}),h.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[h.jsx("div",{className:"w-40 border-r border-slate-100 bg-white flex flex-col overflow-y-auto",children:Xm.map(U=>{var F;const $=((F=n[U])==null?void 0:F.length)||0;return h.jsxs("button",{onClick:()=>g(U),className:`p-4 text-left border-l-4 transition-colors hover:bg-slate-50 ${d===U?"border-emerald-500 bg-emerald-50 text-emerald-800 font-medium":"border-transparent text-slate-600"}`,children:[h.jsx("span",{className:"block",children:U}),h.jsxs("span",{className:"text-xs text-slate-400",children:[$," Slots"]})]},U)})}),h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-slate-50/50",children:[h.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-white",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[d," Schedule"]}),h.jsxs("p",{className:"text-sm text-slate-500",children:["Closing Time: ",h.jsx("span",{className:"font-semibold text-slate-800",children:B(d)})]})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:((H=n[d])==null?void 0:H.length)===0?h.jsxs("div",{className:"text-center py-10 text-slate-400 border-2 border-dashed border-slate-200 rounded-xl",children:["No classes or breaks scheduled for ",d,"."]}):(J=n[d])==null?void 0:J.map(U=>{const $=P(U.type),F=$.icon;return h.jsxs("div",{className:`flex items-center p-4 rounded-lg border shadow-sm ${$.bg} ${$.border}`,children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full mr-4 bg-white shadow-sm text-slate-500",children:h.jsx(F,{size:20,className:$.iconColor})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"font-mono text-sm font-semibold text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:[U.startTime," - ",U.endTime]}),U.type!=="lesson"&&h.jsx("span",{className:`text-[10px] uppercase font-bold border px-1 rounded ${$.badge}`,children:U.type})]}),h.jsx("p",{className:"text-lg font-bold text-slate-800",children:U.subject})]}),h.jsx("button",{onClick:()=>j(U.id),className:"text-slate-300 hover:text-red-500 p-2 transition-colors",children:h.jsx(Ec,{size:18})})]},U.id)})}),h.jsxs("div",{className:"p-4 bg-white border-t border-slate-200",children:[h.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3",children:"Add Time Slot"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Start"}),h.jsx("input",{type:"time",className:"w-full border p-2 rounded text-sm",value:b.startTime,onChange:U=>E({...b,startTime:U.target.value})})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"End"}),h.jsx("input",{type:"time",className:"w-full border p-2 rounded text-sm",value:b.endTime,onChange:U=>E({...b,endTime:U.target.value})})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Type"}),h.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:b.type,onChange:U=>{const $=U.target.value;let F="";$==="break"?F="Break":$==="worship"?F="Worship":$==="closing"?F="Closing":F=p[0]||"",E({...b,type:$,subject:F})},children:[h.jsx("option",{value:"lesson",children:"Lesson"}),h.jsx("option",{value:"break",children:"Break"}),h.jsx("option",{value:"worship",children:"Worship"}),h.jsx("option",{value:"closing",children:"Closing"})]})]}),h.jsxs("div",{className:"md:col-span-4",children:[h.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Activity/Subject"}),b.type==="lesson"?h.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:b.subject,onChange:U=>E({...b,subject:U.target.value}),children:[p.map(U=>h.jsx("option",{value:U,children:U},U)),p.length===0&&h.jsx("option",{value:"",children:"No Subjects Found"})]}):h.jsx("input",{type:"text",className:"w-full border p-2 rounded text-sm",value:b.subject,onChange:U=>E({...b,subject:U.target.value})})]}),h.jsx("div",{className:"md:col-span-2",children:h.jsxs("button",{onClick:w,className:"w-full bg-blue-600 text-white p-2 rounded text-sm font-medium hover:bg-blue-700",children:[h.jsx(xc,{size:16,className:"inline mr-1"})," Add"]})})]})]})]})]})]})})},Jb=["Monday","Tuesday","Wednesday","Thursday","Friday"],tT=()=>{const{user:r}=Ea(),e=(r==null?void 0:r.assignedClassIds)||[],[n,i]=D.useState(""),[l,c]=D.useState("Term 1");D.useEffect(()=>{e.length>0&&i(e[0])},[r]);const d=at.find(F=>F.id===n),g=e.map(F=>{var oe;return(oe=at.find(R=>R.id===F))==null?void 0:oe.name}).join(", "),[p,y]=D.useState([]),b=()=>{const F=new Date().toLocaleDateString("en-US",{weekday:"long"});return Jb.includes(F)?F:"Monday"},[E,w]=D.useState(null),[j,L]=D.useState(b()),[B,P]=D.useState([]),[H,J]=D.useState([]),U=()=>{const F=new Date,oe=F.getDay(),R=oe===0?-6:1-oe,N=new Date(F);N.setDate(F.getDate()+R);const C=[];for(let O=0;O<5;O++){const V=new Date(N);V.setDate(N.getDate()+O),C.push(V.toISOString().split("T")[0])}return C};D.useEffect(()=>{(async()=>{try{const R=await Ee.getSchoolConfig();R&&R.currentTerm&&c(R.currentTerm)}catch(R){console.error(R)}const oe=await Ee.getNotices();if(y(oe),n){const R=await Ee.getTimetable(n);w(R||null),L(b());try{const[N,C]=await Promise.all([Ee.getClassAttendance(n),Ee.getStudents(n)]),O=C.length||1,V=U(),k=N.filter(_e=>V.includes(_e.date)),A=V.map(_e=>{const Ae=k.find(X=>X.date===_e),W=Ae?Math.round(Ae.presentStudentIds.length/O*100):0,[ce,fe,Ne]=_e.split("-").map(Number);return{day:new Date(ce,fe-1,Ne).toLocaleDateString("en-US",{weekday:"short"}),percentage:W}});J(A)}catch(N){console.error("Error calculating attendance trend:",N)}}})()},[n]),D.useEffect(()=>{if(E&&E.schedule&&j){const F=E.schedule[j]||[];P(F)}else P([])},[E,j]);const $=F=>{switch(F){case"break":return{border:"border-amber-400",bgHover:"group-hover:bg-amber-50",text:"text-amber-700 italic",badge:"text-amber-600"};case"worship":return{border:"border-purple-400",bgHover:"group-hover:bg-purple-50",text:"text-purple-700 font-semibold",badge:"text-purple-600"};case"closing":return{border:"border-slate-400",bgHover:"group-hover:bg-slate-50",text:"text-slate-700 font-bold",badge:"text-slate-600"};default:return{border:"border-red-500",bgHover:"group-hover:bg-red-50",text:"text-slate-800",badge:"text-red-600"}}};return h.jsxs(Tn,{title:"Teacher Dashboard",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-2xl font-bold text-slate-800",children:["Welcome back, ",r==null?void 0:r.name]}),h.jsxs("p",{className:"text-slate-500 mt-1",children:[h.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-red-600 mr-2"}),"Class Teacher for: ",h.jsx("span",{className:"font-semibold text-slate-800",children:g||"Not Assigned"})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-end sm:items-center",children:[e.length>1&&h.jsxs("div",{className:"flex items-center bg-white border border-slate-200 rounded-lg px-3 py-1.5 shadow-sm",children:[h.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase mr-2",children:"Viewing:"}),h.jsx("select",{value:n,onChange:F=>i(F.target.value),className:"text-sm font-semibold text-slate-800 bg-transparent outline-none cursor-pointer",children:e.map(F=>{const oe=at.find(R=>R.id===F);return h.jsx("option",{value:F,children:oe==null?void 0:oe.name},F)})})]}),h.jsx("div",{className:"flex gap-2",children:h.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-100 uppercase tracking-wide",children:[l," Active"]})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs(Fs,{to:"/teacher/attendance",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-red-500 transition-all relative overflow-hidden",children:[h.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-red-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-red-800 transition-colors",children:h.jsx(QE,{className:"w-6 h-6 text-red-700 group-hover:text-white"})}),h.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Take Attendance"}),h.jsxs("p",{className:"text-sm text-slate-500",children:["Record daily register for ",(d==null?void 0:d.name)||"your class","."]})]})]}),h.jsxs(Fs,{to:"/teacher/assessment",className:"group block bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-amber-500 transition-all relative overflow-hidden",children:[h.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-amber-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-amber-500 transition-colors",children:h.jsx(_c,{className:"w-6 h-6 text-amber-600 group-hover:text-white"})}),h.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:"Gradebook"}),h.jsx("p",{className:"text-sm text-slate-500",children:"Record marks for tests, homework & exams."})]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[h.jsx(Kb,{className:"w-5 h-5 mr-2 text-red-700"})," Weekly Attendance Trend"]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-red-600 text-white",children:"This Week"})})]}),h.jsx("div",{className:"flex items-end justify-between h-40 gap-2 px-2",children:H.length===0?h.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-300",children:[h.jsx(Kb,{className:"w-8 h-8 mb-2 opacity-30"}),h.jsx("p",{className:"text-sm italic",children:"No attendance records found."})]}):H.map((F,oe)=>h.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[h.jsxs("div",{className:"relative w-full flex justify-center",children:[h.jsx("div",{className:"w-full max-w-[40px] bg-slate-100 rounded-t-lg transition-all duration-500 group-hover:bg-red-100 relative overflow-hidden",style:{height:"140px"},children:h.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-600 rounded-t-lg transition-all duration-1000",style:{height:`${F.percentage}%`}})}),h.jsxs("div",{className:"absolute -top-8 bg-slate-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[F.percentage,"%"]})]}),h.jsx("span",{className:"text-xs text-slate-500 mt-2 font-medium",children:F.day})]},oe))})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[h.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[h.jsx(Ig,{className:"w-5 h-5 mr-2 text-red-700"})," Notice Board"]}),h.jsx("div",{className:"space-y-4 max-h-[350px] overflow-y-auto pr-1",children:p.length===0?h.jsx("div",{className:"text-center py-6 text-slate-400 italic text-sm",children:"No announcements at this time."}):p.map(F=>h.jsxs("div",{className:"group relative pl-4 pb-2 border-l-2 border-slate-200 hover:border-red-400 transition-colors",children:[h.jsx("div",{className:`absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white ${F.type==="urgent"?"bg-red-500":"bg-amber-400"} shadow-sm`}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:F.date}),F.type==="urgent"&&h.jsx("span",{className:"text-[10px] text-red-500 font-bold px-1.5 py-0.5 bg-red-50 rounded",children:"URGENT"})]}),h.jsx("p",{className:"text-sm font-medium text-slate-800 leading-snug",children:F.message})]})]},F.id))})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[h.jsx(KE,{className:"w-5 h-5 mr-2 text-red-700"})," Class Schedule"]}),h.jsx("select",{value:j,onChange:F=>L(F.target.value),className:"text-xs font-bold text-red-700 bg-red-50 px-2 py-1 rounded uppercase border-none outline-none cursor-pointer hover:bg-red-100 transition-colors",children:Jb.map(F=>h.jsx("option",{value:F,children:F},F))})]}),n?h.jsx("div",{className:"space-y-4 relative min-h-[150px]",children:B.length===0?h.jsxs("div",{className:"text-center py-10 text-slate-400 text-sm italic border-2 border-dashed border-slate-100 rounded-lg",children:["No schedule set for ",j,"."]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute left-2.5 top-2 bottom-2 w-0.5 bg-slate-200"}),B.map(F=>{const oe=$(F.type);return h.jsxs("div",{className:"relative pl-8 group",children:[h.jsx("div",{className:`absolute left-0 top-1.5 w-5 h-5 bg-white border-2 rounded-full z-10 transition-colors ${oe.border} ${oe.bgHover}`}),h.jsxs("div",{className:"flex items-baseline justify-between",children:[h.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[F.startTime," - ",F.endTime]}),F.type!=="lesson"&&h.jsx("span",{className:`text-[10px] font-bold uppercase ${oe.badge}`,children:F.type})]}),h.jsx("p",{className:`text-sm ${oe.text}`,children:F.subject})]},F.id)})]})}):h.jsx("div",{className:"text-center py-10 text-slate-400",children:"Select a class to view schedule."})]})]})]})]})},T6=()=>{const{user:r}=Ea(),e=(r==null?void 0:r.assignedClassIds)||[],[n,i]=D.useState(""),[l,c]=D.useState([]),[d,g]=D.useState(new Date().toISOString().split("T")[0]),[p,y]=D.useState(new Set),[b,E]=D.useState(!1),[w,j]=D.useState("");D.useEffect(()=>{e.length>0&&!n&&i(e[0])},[e]),D.useEffect(()=>{if(!n)return;(async()=>{E(!0);try{const H=await Ee.getStudents(n);c(H);const J=await Ee.getAttendance(n,d);y(J?new Set(J.presentStudentIds):new Set(H.map(U=>U.id)))}catch(H){console.error(H)}finally{E(!1)}})()},[n,d]);const L=P=>{const H=new Set(p);H.has(P)?H.delete(P):H.add(P),y(H)},B=async()=>{var P;if(n){E(!0);try{await Ee.saveAttendance({id:`${n}_${d}`,classId:n,date:d,presentStudentIds:Array.from(p)});const H=((P=at.find(J=>J.id===n))==null?void 0:P.name)||n;await Ee.addSystemNotification(`${r==null?void 0:r.name} marked attendance for ${H} on ${d}. (${p.size} Present)`,"attendance"),j("Attendance saved successfully!"),setTimeout(()=>j(""),3e3)}catch(H){console.error(H)}finally{E(!1)}}};return e.length===0?h.jsx(Tn,{title:"Attendance",children:h.jsx("div",{className:"p-8 text-center text-slate-500",children:"You are not assigned to any class. Contact Admin."})}):h.jsx(Tn,{title:"Mark Attendance",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex flex-col gap-6 mb-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[h.jsxs("div",{className:"w-full sm:w-auto",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Class"}),h.jsx("select",{value:n,onChange:P=>i(P.target.value),className:"w-full sm:w-48 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-black",children:e.map(P=>{const H=at.find(J=>J.id===P);return h.jsx("option",{value:P,children:H==null?void 0:H.name},P)})})]}),h.jsxs("div",{className:"w-full sm:w-auto",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Date"}),h.jsxs("div",{className:"relative",children:[h.jsx(bc,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"date",value:d,onChange:P=>g(P.target.value),className:"w-full sm:w-auto pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-4 border-t border-slate-50",children:[h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-bold text-emerald-600 text-lg mr-1",children:p.size})," Present",h.jsx("span",{className:"mx-2 text-slate-300",children:"|"}),h.jsx("span",{className:"font-bold text-red-500 text-lg mr-1",children:l.length-p.size})," Absent"]}),h.jsxs("button",{onClick:B,disabled:b||!n,className:"w-full sm:w-auto flex justify-center items-center bg-emerald-600 text-white px-6 py-2.5 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 font-medium shadow-sm",children:[h.jsx(Uc,{size:18,className:"mr-2"}),b?"Saving...":"Save Register"]})]})]}),w&&h.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded text-center text-sm",children:w}),h.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[l.map(P=>{const H=p.has(P.id);return h.jsxs("div",{className:`flex items-center justify-between p-4 border-b last:border-b-0 cursor-pointer transition-colors ${H?"bg-white":"bg-red-50"}`,onClick:()=>L(P.id),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-4 ${H?"bg-slate-100 text-slate-600":"bg-red-100 text-red-600"}`,children:P.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("p",{className:`font-medium ${H?"text-slate-800":"text-red-700"}`,children:P.name}),h.jsx("p",{className:"text-xs text-slate-400",children:P.gender})]})]}),h.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold border ${H?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:H?"PRESENT":"ABSENT"})]},P.id)}),l.length===0&&h.jsx("div",{className:"p-8 text-center text-slate-500",children:n?"No students found in this class.":"Select a class to view students."})]})]})})},w6=()=>{const{user:r}=Ea(),e=(r==null?void 0:r.assignedClassIds)||[],[n,i]=D.useState(""),[l,c]=D.useState([]),[d,g]=D.useState([]),[p,y]=D.useState(""),[b,E]=D.useState({}),[w,j]=D.useState(!1),[L,B]=D.useState(!1),P={testScore:15,homeworkScore:15,projectScore:20,examScore:100};D.useEffect(()=>{e.length>0&&!n&&i(e[0])},[e]),D.useEffect(()=>{(async()=>{const F=await Ee.getSubjects();g(F),F.length>0&&y(F[0])})()},[]),D.useEffect(()=>{if(!n||!p)return;(async()=>{j(!0);const F=await Ee.getStudents(n);c(F);const oe=await Ee.getAssessments(n,p),R={};F.forEach(N=>{const C=oe.find(O=>O.studentId===N.id&&O.term===ys);R[N.id]=C||{studentId:N.id,classId:n,term:ys,academicYear:bl,subject:p,testScore:0,homeworkScore:0,projectScore:0,examScore:0}}),E(R),j(!1)})()},[n,p]);const H=($,F,oe)=>{let R=oe===""?0:parseFloat(oe);const N=P[F];R>N&&(R=N),R<0&&(R=0),E(C=>{const O=C[$]||{};return{...C,[$]:{...O,[F]:R}}})},J=$=>{const F=($.testScore||0)+($.homeworkScore||0)+($.projectScore||0),oe=($.examScore||0)*.5;return Math.round(F+oe)},U=async()=>{var $;if(n){B(!0);try{const F=Object.values(b).map(async R=>{if(!R.studentId)return;const N=J(R),C={...R,id:R.id||Math.random().toString(36),total:N,studentId:R.studentId,classId:n,subject:p,term:ys,academicYear:bl,testScore:R.testScore||0,homeworkScore:R.homeworkScore||0,projectScore:R.projectScore||0,examScore:R.examScore||0};return Ee.saveAssessment(C)});await Promise.all(F);const oe=(($=at.find(R=>R.id===n))==null?void 0:$.name)||n;await Ee.addSystemNotification(`${r==null?void 0:r.name} updated assessments for ${oe} in ${p}.`,"assessment"),Mn("Saved Successfully",{type:"success"})}catch(F){console.error(F),Mn("Error saving data",{type:"error"})}finally{B(!1)}}};return e.length===0?h.jsx(Tn,{title:"Assessment",children:h.jsx("div",{className:"p-8 text-center text-slate-500",children:"No class assigned."})}):h.jsx(Tn,{title:"Assessment Sheet",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex flex-col gap-4",children:[h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Class"}),h.jsx("select",{value:n,onChange:$=>i($.target.value),className:"p-2 border border-slate-300 rounded-md shadow-sm w-full md:w-64 bg-white text-black",children:e.map($=>{const F=at.find(oe=>oe.id===$);return h.jsx("option",{value:$,children:F==null?void 0:F.name},$)})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Subject"}),h.jsxs("select",{value:p,onChange:$=>y($.target.value),className:"p-2 border border-slate-300 rounded-md shadow-sm w-full md:w-64",disabled:d.length===0,children:[d.length===0&&h.jsx("option",{children:"Loading subjects..."}),d.map($=>h.jsx("option",{value:$,children:$},$))]})]})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[h.jsx("div",{className:"hidden sm:block",children:h.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["Term ",ys,"  ",bl]})}),h.jsxs("button",{onClick:U,disabled:L||!p||!n,className:"flex items-center bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ml-auto",children:[h.jsx(Uc,{size:18,className:"mr-2"}),L?"Saving...":"Save Scores"]})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm",children:[h.jsx("thead",{className:"bg-slate-100 text-slate-600 font-semibold uppercase text-xs tracking-wider",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 sticky left-0 bg-slate-100 z-10 w-48",children:"Student Name"}),h.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Class Test",h.jsx("br",{}),h.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(15)"})]}),h.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Homework",h.jsx("br",{}),h.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(15)"})]}),h.jsxs("th",{className:"px-2 py-3 w-24 text-center",children:["Project",h.jsx("br",{}),h.jsx("span",{className:"text-[10px] normal-case font-bold text-emerald-600",children:"(20)"})]}),h.jsxs("th",{className:"px-2 py-3 w-28 text-center border-l border-slate-200 bg-blue-50/50",children:["Exam",h.jsx("br",{}),h.jsx("span",{className:"text-[10px] normal-case font-bold text-blue-600",children:"(100)"})]}),h.jsxs("th",{className:"px-4 py-3 w-24 text-center bg-slate-200",children:["Total",h.jsx("br",{}),h.jsx("span",{className:"text-[10px] normal-case",children:"(100%)"})]}),h.jsx("th",{className:"px-4 py-3 w-20 text-center bg-slate-200",children:"Grade"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map($=>{const F=b[$.id]||{},oe=J(F),{grade:R,remark:N}=wc(oe),C=Ch(R);return h.jsxs("tr",{className:"hover:bg-slate-50",children:[h.jsx("td",{className:"px-4 py-3 font-medium text-slate-800 sticky left-0 bg-white border-r border-slate-100",children:$.name}),h.jsx("td",{className:"px-2 py-2",children:h.jsx("input",{type:"number",min:"0",max:P.testScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:F.testScore||0,onChange:O=>H($.id,"testScore",O.target.value),onFocus:O=>O.target.select()})}),h.jsx("td",{className:"px-2 py-2",children:h.jsx("input",{type:"number",min:"0",max:P.homeworkScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:F.homeworkScore||0,onChange:O=>H($.id,"homeworkScore",O.target.value),onFocus:O=>O.target.select()})}),h.jsx("td",{className:"px-2 py-2",children:h.jsx("input",{type:"number",min:"0",max:P.projectScore,className:"w-full text-center border border-slate-200 rounded p-1 focus:ring-2 focus:ring-emerald-500 outline-none",value:F.projectScore||0,onChange:O=>H($.id,"projectScore",O.target.value),onFocus:O=>O.target.select()})}),h.jsx("td",{className:"px-2 py-2 border-l border-slate-200 bg-blue-50/20",children:h.jsx("input",{type:"number",min:"0",max:P.examScore,className:"w-full text-center border border-blue-500 rounded p-1 focus:ring-2 focus:ring-blue-300 outline-none font-bold text-white bg-blue-600 shadow-sm",value:F.examScore||0,onChange:O=>H($.id,"examScore",O.target.value),onFocus:O=>O.target.select()})}),h.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-800 bg-slate-50",children:oe}),h.jsx("td",{className:"px-4 py-3 text-center bg-slate-50",children:h.jsx("span",{className:`inline-block w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${C}`,children:R})})]},$.id)}),l.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:n?"No students found in this class.":"Select a class above."})})]})]})})]})})},Hs=({children:r,allowedRoles:e})=>{const{user:n,isAuthenticated:i}=Ea();return i?e&&n&&!e.includes(n.role)?h.jsx(Wm,{to:n.role===At.ADMIN?"/":"/teacher",replace:!0}):r:h.jsx(Wm,{to:"/login",replace:!0})},S6=()=>{const{user:r}=Ea();return(r==null?void 0:r.role)===At.ADMIN?h.jsx(g6,{}):(r==null?void 0:r.role)===At.TEACHER?h.jsx(tT,{}):h.jsx(Wm,{to:"/login"})},A6=()=>h.jsxs(BS,{children:[h.jsx(Zn,{path:"/login",element:h.jsx(h6,{})}),h.jsx(Zn,{path:"/",element:h.jsx(Hs,{children:h.jsx(S6,{})})}),h.jsx(Zn,{path:"/admin/students",element:h.jsx(Hs,{allowedRoles:[At.ADMIN],children:h.jsx(y6,{})})}),h.jsx(Zn,{path:"/admin/teachers",element:h.jsx(Hs,{allowedRoles:[At.ADMIN],children:h.jsx(v6,{})})}),h.jsx(Zn,{path:"/admin/attendance",element:h.jsx(Hs,{allowedRoles:[At.ADMIN],children:h.jsx(_6,{})})}),h.jsx(Zn,{path:"/admin/reports",element:h.jsx(Hs,{allowedRoles:[At.ADMIN],children:h.jsx(b6,{})})}),h.jsx(Zn,{path:"/admin/timetable",element:h.jsx(Hs,{allowedRoles:[At.ADMIN],children:h.jsx(E6,{})})}),h.jsx(Zn,{path:"/admin/settings",element:h.jsx(Hs,{allowedRoles:[At.ADMIN],children:h.jsx(x6,{})})}),h.jsx(Zn,{path:"/teacher",element:h.jsx(Hs,{allowedRoles:[At.TEACHER],children:h.jsx(tT,{})})}),h.jsx(Zn,{path:"/teacher/attendance",element:h.jsx(Hs,{allowedRoles:[At.TEACHER],children:h.jsx(T6,{})})}),h.jsx(Zn,{path:"/teacher/assessment",element:h.jsx(Hs,{allowedRoles:[At.TEACHER],children:h.jsx(w6,{})})})]}),N6=()=>h.jsx(Q4,{children:h.jsx(dA,{children:h.jsx(A6,{})})}),nT=document.getElementById("root");if(!nT)throw new Error("Could not find root element to mount to");const R6=Fw.createRoot(nT);R6.render(h.jsx(Vw.StrictMode,{children:h.jsx(N6,{})}));
